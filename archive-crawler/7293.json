{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":493919204,"authorName":"Pedro Pinheiro","from":"Pedro Pinheiro &lt;prppedro@...&gt;","replyTo":"LIST","senderId":"rdoWjA5zldo3H-6GKteW027ijSu73ZB4980ezJpzx7e9SoYIaz50YfjE1yAX6cTL66jWXdFqlVRPmjxCRcIz-1NFpnmoGpmxlew","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] Problems with a custom module","postDate":"1314070767","msgId":7293,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDRFNTMyMEVGLjUwNDAzMDJAZ21haWwuY29tPg==","inReplyToHeader":"PDRFNTMwQkUyLjkwMDAyMDVAYXJjaGl2ZS5vcmc+","referencesHeader":"PDRFNTA3QUQyLjUwMzA0MDFAZ21haWwuY29tPiA8NEU1MzBCRTIuOTAwMDIwNUBhcmNoaXZlLm9yZz4="},"prevInTopic":7292,"nextInTopic":0,"prevInTime":7292,"nextInTime":7294,"topicId":7289,"numMessagesInTopic":3,"msgSnippet":"Hi, Noah... Thanks for replying... I already tried to use logger.warning (Largely inadequate, but easy for my yet small Java knowledge), but it gives me a","rawEmail":"Return-Path: &lt;prppedro@...&gt;\r\nX-Sender: prppedro@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 64650 invoked from network); 23 Aug 2011 03:38:50 -0000\r\nX-Received: from unknown (66.196.94.106)\n  by m10.grp.re1.yahoo.com with QMQP; 23 Aug 2011 03:38:50 -0000\r\nX-Received: from unknown (HELO mail-gy0-f182.google.com) (209.85.160.182)\n  by mta2.grp.re1.yahoo.com with SMTP; 23 Aug 2011 03:38:50 -0000\r\nX-Received: by gyd10 with SMTP id 10so6313019gyd.27\n        for &lt;archive-crawler@yahoogroups.com&gt;; Mon, 22 Aug 2011 20:38:50 -0700 (PDT)\r\nX-Received: by 10.236.165.98 with SMTP id d62mr13465696yhl.72.1314070730292;\n        Mon, 22 Aug 2011 20:38:50 -0700 (PDT)\r\nReturn-Path: &lt;prppedro@...&gt;\r\nX-Received: from [198.168.0.100] (bd21117a.virtua.com.br [189.33.17.122])\n        by mx.google.com with ESMTPS id c63sm345565yhe.18.2011.08.22.20.38.47\n        (version=TLSv1/SSLv3 cipher=OTHER);\n        Mon, 22 Aug 2011 20:38:49 -0700 (PDT)\r\nMessage-ID: &lt;4E5320EF.5040302@...&gt;\r\nDate: Tue, 23 Aug 2011 00:39:27 -0300\r\nUser-Agent: Mozilla/5.0 (X11; Linux i686; rv:6.0) Gecko/20110813 Firefox/6.0 SeaMonkey/2.3\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;4E507AD2.5030401@...&gt; &lt;4E530BE2.9000205@...&gt;\r\nIn-Reply-To: &lt;4E530BE2.9000205@...&gt;\r\nContent-Type: text/html; charset=ISO-8859-1\r\nContent-Transfer-Encoding: 7bit\r\nFrom: Pedro Pinheiro &lt;prppedro@...&gt;\r\nSubject: Re: [archive-crawler] Problems with a custom module\r\nX-Yahoo-Group-Post: member; u=493919204\r\n\r\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta content=&quot;text/html; charset=ISO-8859-1&quot;\n      http-equiv=&quot;Content-Type&quot;&gt;\n  &lt;/head&gt;\n  &lt;body bgcolor=&quot;#FFFFFF&quot; text=&quot;#000000&quot;&gt;\n    Hi, Noah... &lt;br&gt;\n    Thanks for replying... &lt;br&gt;\n    &lt;br&gt;\n    I already tried to use logger.warning (Largely inadequate, but easy\n    for my yet small Java knowledge), but it gives me a strange error. &lt;br&gt;\n    &lt;br&gt;\n    &lt;font face=&quot;monospace&quot;&gt;/home/prppedro/dev/heritrix-1.14.4/src/java/org/archive/crawler/writer/MySQLWriterProcessor.java:88:\n      unreachable statement&lt;br&gt;\n      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; logger.warning(&quot;URI crawl status is unsucessful&quot;);&lt;br&gt;\n      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; ^&lt;/font&gt;&lt;br&gt;\n    Not sure if the processor is really running, as you stated, but my\n    guess is no.&nbsp; It doesn&#39;t shows up at reports section and doesn&#39;t\n    return any MySQL error or any sort of message at log. &lt;br&gt;\n    &lt;br&gt;\n    Well, about the debugger... What debugger should I use? &lt;br&gt;\n    &lt;br&gt;\n    And the pool seems to be a good idea, but It&#39;s yet too advanced for\n    me. However it would be awesome to avoid multiple connections,\n    because my server is a rather limited machine. &lt;br&gt;\n    &lt;br&gt;\n    P.S.: I feel sorry for my freak questions, but I&#39;m&nbsp; somewhat lost\n    within all these codes. I&#39;ll try to write a processor from scratch\n    to definitively understand this. I&#39;m trying to understand this\n    silent problem before trying to build a brand new module. &lt;br&gt;\n    &lt;br&gt;\n    Att., &lt;br&gt;\n    Pedro Pinheiro&lt;br&gt;\n    &lt;br&gt;\n    Noah Levitt wrote:\n    &lt;blockquote cite=&quot;mid:4E530BE2.9000205@...&quot; type=&quot;cite&quot;&gt;\n      &lt;meta content=&quot;text/html; charset=ISO-8859-1&quot;\n        http-equiv=&quot;Content-Type&quot;&gt;\n      &lt;title&gt;&lt;/title&gt;\n      Hello Pedro,&lt;br&gt;\n      &lt;br&gt;\n      From this information it&#39;s hard to know what the problem might be.\n      If I were you I would try to pinpoint the problem, either by\n      stepping through in a debugger or by adding logging statements.\n      First thing is to confirm that your processor is being invoked in\n      the first place.&lt;br&gt;\n      &lt;br&gt;\n      This shouldn&#39;t be related to the problem you&#39;ve described, but you\n      might want to use a database connection pool. Opening a new\n      connection each time is probably not optimal.&lt;br&gt;\n      &lt;br&gt;\n      Noah&lt;br&gt;\n      &lt;br&gt;\n      On 08/20/2011 08:26 PM, Pedro Pinheiro wrote:\n      &lt;blockquote cite=&quot;mid:4E507AD2.5030401@...&quot; type=&quot;cite&quot;&gt;\n        &lt;style type=&quot;text/css&quot;&gt;\n&lt;!--\n\n/* start of attachment style */\n       .ygrp-photo-title{\n         clear: both;\n         font-size: smaller;\n         height: 15px;\n         overflow: hidden;\n         text-align: center;\n         width: 75px;\n       }\n       div.ygrp-photo{\n         background-position: center;\n         background-repeat: no-repeat;\n         background-color: white;\n         border: 1px solid black;\n         height: 62px;\n         width: 62px;\n       }\n\n       div.photo-title \n         a,\n         div.photo-title a:active,\n         div.photo-title a:hover,\n         div.photo-title a:visited {\n           text-decoration: none; \n       }\n\n       div.attach-table div.attach-row {\n         clear: both;\n       }\n\n       div.attach-table div.attach-row div {\n         float: left;\n         /* margin: 2px;*/\n       }\n\n       p {\n         clear: both;\n         padding: 15px 0 3px 0;\n\t overflow: hidden;\n       }\n\n       div.ygrp-file {\n         width: 30px;\n         valign: middle;\n       }\n       div.attach-table div.attach-row div div a {\n         text-decoration: none;\n       }\n\n       div.attach-table div.attach-row div div span {\n         font-weight: normal;\n       }\n\n       div.ygrp-file-title {\n         font-weight: bold;\n       }\n /* end of attachment style */\n        --&gt;\n        &lt;/style&gt;\n        &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;\n          charset=ISO-8859-1&quot;&gt;\n         Hi, all... &lt;br&gt;\n        &lt;br&gt;\n        I&#39;ve made a custom writer processor that uses JDBC Writer.\n        Well... In reality my code is 90% pasted from another JDBC\n        writes, because I&#39;m studying Java and wanted to change some\n        variable names in order to make the code more familiar to me. &lt;br&gt;\n        &lt;br&gt;\n        Finally, I used Maven-1.0.2 to compile all the thing. It took 19\n        minutes, with no errors, at least in MySQLWriterProcessor. The\n        source was from version 1.14.4 of Heritrix. &lt;br&gt;\n        &lt;br&gt;\n        After this, in order to get the crawler working with less\n        effort, I simple copied the jar to the actual Heritrix folder,\n        as well as the JDBC lib to the lib folder, without &quot;messing up\n        with binaries&quot;, how stated by the developer manual. &lt;br&gt;\n        &lt;br&gt;\n        Everything went okay, and the crawler started with no\n        Execptions. I&#39;ve created the job, selected MySQLWriterProcessor,\n        adjusted settings and started the job. Well, everything works,\n        except the writer. The table &#39;heritrix&#39;, expected to receive all\n        the data remain empty, and the job returns no error, despise the\n        fact that the code are prepared to catch some kinds of\n        exception, including SQL ones. &lt;br&gt;\n        &lt;br&gt;\n        Well, here is the code: &lt;br&gt;\n        &lt;font face=&quot;Courier New, Courier, monospace&quot;&gt;&lt;br&gt;\n          package org.archive.crawler.writer; &lt;br&gt;\n          &lt;br&gt;\n          import java.io.IOException;&lt;br&gt;\n          import java.io.InputStream;&lt;br&gt;\n          import java.io.ByteArrayOutputStream;&lt;br&gt;\n          import java.util.concurrent.atomic.AtomicInteger;&lt;br&gt;\n          import java.util.logging.Level;&lt;br&gt;\n          import java.util.logging.Logger;&lt;br&gt;\n          import java.sql.Connection;&lt;br&gt;\n          import java.sql.DriverManager;&lt;br&gt;\n          import java.sql.PreparedStatement;&lt;br&gt;\n          import java.sql.ResultSet;&lt;br&gt;\n          import java.sql.SQLException;&lt;br&gt;\n          import java.sql.Statement;&lt;br&gt;\n          &lt;br&gt;\n          import org.apache.commons.io.IOUtils;&lt;br&gt;\n          import org.archive.crawler.datamodel.CoreAttributeConstants;&lt;br&gt;\n          import org.archive.crawler.datamodel.CrawlURI;&lt;br&gt;\n          import org.archive.crawler.datamodel.FetchStatusCodes;&lt;br&gt;\n          import org.archive.crawler.framework.Processor;&lt;br&gt;\n          import org.archive.crawler.settings.SimpleType;&lt;br&gt;\n          import org.archive.crawler.event.CrawlStatusListener;&lt;br&gt;\n          import org.archive.crawler.framework.WriterPoolProcessor;&lt;br&gt;\n          import org.archive.io.ReplayInputStream;&lt;br&gt;\n          import org.archive.io.RecordingInputStream;&lt;br&gt;\n          import org.archive.io.WriterPoolMember;&lt;br&gt;\n          import org.archive.io.WriterPoolSettings; &lt;br&gt;\n          import org.archive.net.UURI;&lt;br&gt;\n          &lt;br&gt;\n          /**&lt;br&gt;\n          &nbsp;* Processor module that writes the results of successful\n          fetches to&lt;br&gt;\n          &nbsp;* Database via JDBC.&lt;br&gt;\n          &nbsp;*&lt;br&gt;\n          &nbsp;* @author zhousp( &lt;a moz-do-not-send=&quot;true&quot;\n            class=&quot;moz-txt-link-abbreviated&quot;\n            href=&quot;mailto:zhousp@...&quot;&gt;zhousp@...&lt;/a&gt;)&lt;br&gt;\n          &nbsp;*/&lt;br&gt;\n          &nbsp;&lt;br&gt;\n          public class MySQLWriterProcessor extends Processor &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; implements CoreAttributeConstants {&lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; private static Logger logger = &lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n          Logger.getLogger(MySQLWriterProcessor.class.getName()); &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; public static final String ATTR_MYSQL_DATABASE =\n          &quot;Database&quot;;&lt;br&gt;\n          &nbsp;&nbsp;&nbsp; public static final String ATTR_MYSQL_USERNAME = &quot;User&quot;;&lt;br&gt;\n          &nbsp;&nbsp;&nbsp; public static final String ATTR_MYSQL_PASSWORD =\n          &quot;Password&quot;; &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; public static final String ATTR_MYSQL_HOSTNAME =\n          &quot;Hostname:Port&quot;; &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; public MySQLWriterProcessor(String nome){&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; super(nome,&quot;MySQL Writer Processor:&quot; + &quot; An index\n          generator. &quot;); &lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; addElementToDefinition(new\n          SimpleType(ATTR_MYSQL_DATABASE,&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;MySQL Database&quot;, &quot;mungo&quot;)); &lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; addElementToDefinition(new\n          SimpleType(ATTR_MYSQL_USERNAME,&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;MySQL Username&quot;, &quot;root&quot;)); &lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; addElementToDefinition(new\n          SimpleType(ATTR_MYSQL_PASSWORD,&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;MySQL Password&quot;, &quot;pass&quot;)); &lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; addElementToDefinition(new\n          SimpleType(ATTR_MYSQL_HOSTNAME,&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;MySQL Hostname:Port&quot;, &quot;localhost:3306&quot;)); &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; }&lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; protected void innerProccess(CrawlURI cury) {&lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if (!cury.isSuccess()) {&lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return; &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; UURI curyProtocol = cury.getUURI(); &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String uriTemplate = curyProtocol.getScheme(); &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (!&quot;http&quot;.equalsIgnoreCase(uriTemplate) &amp;&amp; &lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; !&quot;https&quot;.equalsIgnoreCase(uriTemplate)) {&lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return; &lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String contentType = cury.getContentType(); &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (!&quot;text/html&quot;.equalsIgnoreCase(contentType)\n          &amp;&amp; &lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; !&quot;rss&quot;.equalsIgnoreCase(contentType) &amp;&amp; &lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; !&quot;atom&quot;.equalsIgnoreCase(contentType) ||\n          contentType == null) {&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return; &lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RecordingInputStream recis =\n          cury.getHttpRecorder().getRecordedInput(); &lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; long length = recis.getResponseContentLength(); &lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (1 &gt; length) {&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; try {&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; toDatabase(cury); &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; } catch (IOException problem) {&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; logger.warning(problem.getLocalizedMessage()); &lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&lt;br&gt;\n          &nbsp;&nbsp;&nbsp; }&lt;br&gt;\n          &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; /* Code core */&lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; private void toDatabase(CrawlURI curyDatabase) throws\n          IOException {&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ReplayInputStream playis = &lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n          curyDatabase.getHttpRecorder().getRecordedInput().getContentReplayInputStream();\n\n\n\n          &lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ByteArrayOutputStream sContent = new\n          ByteArrayOutputStream();&lt;br&gt;\n          &lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try {&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; playis.readContentTo(sContent);&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } finally {&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; playis.close();&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;br&gt;\n          &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Connection conn = null;&nbsp;&nbsp;&nbsp;&nbsp; &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; PreparedStatement stat = null; &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; try {&lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Class.forName(&quot;com.mysql.jdbc.Driver&quot;); &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; conn = DriverManager.getConnection(&quot;jdbc:mysql://&quot;\n          + &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ATTR_MYSQL_HOSTNAME + &quot;/&quot; +\n          ATTR_MYSQL_DATABASE + &quot;?&quot; + &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;user=&quot; + ATTR_MYSQL_USERNAME + &quot;password=&quot; +\n          &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ATTR_MYSQL_PASSWORD); &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; stat = conn.prepareStatement(&quot;INSERT into\n          heritrix(server,url,puro,cache)&quot; +&lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &quot;&nbsp; VALUES ?,?,?,?,?&quot;); &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //stmt = conn.prepareStatement(&quot;insert into news\n          (site,url,content) values(?,?,?)&quot;); &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; stat.setString(1,\n          curyDatabase.getUURI().getHost()); &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; stat.setString(2,\n          curyDatabase.getUURI().getURI()); &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; stat.setString(4,\n          removeHtmlTag(sContent.toString())); &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; stat.setString(5, sContent.toString()); &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; stat.executeUpdate(); &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; stat.close(); &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; conn.close(); &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; } catch (SQLException sqlerror) {&nbsp; &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; logger.warning(sqlerror.getLocalizedMessage()); &lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; } catch (ClassNotFoundException e) {&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; logger.warning(e.getLocalizedMessage());&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } finally { &lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (conn != null) {&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; try {&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; conn.close(); &lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; } catch (SQLException sqlerror) {&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;\n          logger.warning(sqlerror.getLocalizedMessage()); &lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (stat != null) {&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; try {&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; stat.close(); &lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; } catch (SQLException sqlerror) {&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;\n          logger.warning(sqlerror.getLocalizedMessage()); &lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&lt;br&gt;\n          &nbsp;&nbsp;&nbsp; }&lt;br&gt;\n          &nbsp;&nbsp;&nbsp; &lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /**&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp; * remove html tag&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp; *&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp; * @param src source&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp; * @return plain text&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp; */&lt;br&gt;\n          &nbsp;&nbsp;&nbsp; private String removeHtmlTag(String src) {&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; boolean tagbegin = false;&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; StringBuffer sb = new StringBuffer();&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (int i = 0; i &lt; src.length(); i++) {&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (src.substring(i, i + 1).equals(&quot;&lt;&quot;)) {&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tagbegin = true;&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } else if (src.substring(i, i + 1).equals(&quot;&gt;&quot;))\n          {&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tagbegin = false;&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } else {&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (!tagbegin) {&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sb.append(src.substring(i, i + 1));&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&lt;br&gt;\n          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return sb.toString();&lt;br&gt;\n          &nbsp;&nbsp;&nbsp; }&lt;br&gt;\n          }&lt;/font&gt;&lt;br&gt;\n        &lt;br&gt;\n        P.S.: Sorry for my bad English, actually, I still learning this\n        language. &lt;br&gt;\n        &lt;br&gt;\n        Att., &lt;br&gt;\n        Pedro Pinheiro&lt;br&gt;\n        &lt;pre class=&quot;moz-signature&quot; cols=&quot;72&quot;&gt;-- \n&quot;Seja sensato com um imbec&iacute;l, e ele te chamar&aacute; de imbec&iacute;l. &quot; -- Eur&iacute;pedes\n\n&lt;a moz-do-not-send=&quot;true&quot; class=&quot;moz-txt-link-freetext&quot; href=&quot;http://prppedro.blogspot.com&quot;&gt;http://prppedro.blogspot.com&lt;/a&gt;&lt;/pre&gt;\n        \n        &lt;div width=&quot;1&quot; style=&quot;color: white; clear: both;&quot;&gt;&lt;/div&gt;\n      &lt;/blockquote&gt;\n      &lt;br&gt;\n    &lt;/blockquote&gt;\n    &lt;br&gt;\n    &lt;br&gt;\n    &lt;pre class=&quot;moz-signature&quot; cols=&quot;72&quot;&gt;-- \n&quot;Seja sensato com um imbec&iacute;l, e ele te chamar&aacute; de imbec&iacute;l. &quot; -- Eur&iacute;pedes\n\n&lt;a class=&quot;moz-txt-link-freetext&quot; href=&quot;http://prppedro.blogspot.com&quot;&gt;http://prppedro.blogspot.com&lt;/a&gt;&lt;/pre&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n\n"}}