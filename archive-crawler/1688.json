{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":168599281,"authorName":"stack","from":"stack &lt;stack@...&gt;","profile":"stackarchiveorg","replyTo":"LIST","senderId":"gOFwuo_AhuB9NVr_9p8QMaJuqbVlClXWFTsI3wR8AxLGT3_5qqTqvYo2XBBQqHJ16isqkLCxtBtc9Q0mFPWMeQ","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] stuck threads","postDate":"1111544427","msgId":1688,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQyNDBEMjZCLjUwNDAwMDZAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PDYuMi4wLjE0LjIuMjAwNTAzMjIxNTA1NTYuMDJhYzM1NDhAdmhvc3Q2LmF0b21pY3NlcnZlcnMuY29tPg==","referencesHeader":"PDYuMi4wLjE0LjIuMjAwNTAyMjgxNDA1MzAuMDJiM2YxZThAdmhvc3Q2LmF0b21pY3NlcnZlcnMuY29tPiA8NDIyNEM2MzMuNTA3MDcwMEBhcmNoaXZlLm9yZz4gPDYuMi4wLjE0LjIuMjAwNTAzMjIxMjE1NTkuMDJiNTY0NThAdmhvc3Q2LmF0b21pY3NlcnZlcnMuY29tPiA8NDI0MDg3QjMuNTAwMDgwMEBhcmNoaXZlLm9yZz4gPDYuMi4wLjE0LjIuMjAwNTAzMjIxNTA1NTYuMDJhYzM1NDhAdmhvc3Q2LmF0b21pY3NlcnZlcnMuY29tPg=="},"prevInTopic":1686,"nextInTopic":0,"prevInTime":1687,"nextInTime":1689,"topicId":1622,"numMessagesInTopic":8,"msgSnippet":"(Reposting to list conversation undertaken off the list.) hi, yes, I m using bandwidth limiting (hadn t been before, but IT guys here asked me to for now). ","rawEmail":"Return-Path: &lt;stack@...&gt;\r\nX-Sender: stack@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 37064 invoked from network); 23 Mar 2005 02:15:56 -0000\r\nReceived: from unknown (66.218.66.166)\n  by m22.grp.scd.yahoo.com with QMQP; 23 Mar 2005 02:15:56 -0000\r\nReceived: from unknown (HELO dns.duboce.net) (63.203.238.114)\n  by mta5.grp.scd.yahoo.com with SMTP; 23 Mar 2005 02:15:56 -0000\r\nReceived: from archive.org ([192.168.1.105])\n\t(authenticated)\n\tby dns-eth1.duboce.net (8.10.2/8.10.2) with ESMTP id j2N1OZE03778\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Tue, 22 Mar 2005 17:24:35 -0800\r\nMessage-ID: &lt;4240D26B.5040006@...&gt;\r\nDate: Tue, 22 Mar 2005 18:20:27 -0800\r\nUser-Agent: Mozilla/5.0 (Macintosh; U; PPC Mac OS X Mach-O; en-US; rv:1.7b) Gecko/20040421\r\nX-Accept-Language: en-us, en\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;6.2.0.14.2.20050228140530.02b3f1e8@...&gt; &lt;4224C633.5070700@...&gt; &lt;6.2.0.14.2.20050322121559.02b56458@...&gt; &lt;424087B3.5000800@...&gt; &lt;6.2.0.14.2.20050322150556.02ac3548@...&gt;\r\nIn-Reply-To: &lt;6.2.0.14.2.20050322150556.02ac3548@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Msg-Info: 1:12:0\r\nFrom: stack &lt;stack@...&gt;\r\nSubject: Re: [archive-crawler] stuck threads\r\nX-Yahoo-Group-Post: member; u=168599281\r\nX-Yahoo-Profile: stackarchiveorg\r\n\r\n(Reposting to list conversation undertaken off the list.)\n\n\nhi,\n\nyes, I&#39;m using bandwidth limiting (hadn&#39;t been before, but IT guys here \nasked me to for now).\n\ngood point, I switched to the HEAD version and amd now using the \nDomainSensitiveFrontier.  I restarted the crawl and we&#39;ll see if it \nagain goes into a coma\n\nI also looked at the reformats you did to the code I contributed, so \nI&#39;ll know better for the next code I contrib.\n\nthanks again for your help\n - Mike\n\n\n\nAt 05:20 PM 3/22/2005, stack wrote:\nSuspicious looking is the below:\n\n&quot;ToeThread #71&quot; prio=1 tid=0x08147eb8 nid=0x3c9d waiting on condition \n[6b05b000..6b05b87c]\n        at java.lang.Thread.sleep(Native Method)\n        at \norg.archive.crawler.frontier.HostQueuesFrontier.enforceBandwidthThrottle(HostQueuesFrontier.java:739)\n        - locked &lt;0x73b6a088&gt; (a \norg.archive.crawler.frontier.RobegerFrontier)\n        at \norg.archive.crawler.frontier.HostQueuesFrontier.next(HostQueuesFrontier.java:590)\n        - locked &lt;0x73b6a088&gt; (a \norg.archive.crawler.frontier.RobegerFrontier)\n        at org.archive.crawler.framework.ToeThread.run(ToeThread.java:124)\n\nAre you using the bandwidth limiting facility?  We seem to have gone in \nto a synchronized block that gets a lock on Frontier and then we went to \nbye-bye: See \nhttp://crawler.archive.org/xref/org/archive/crawler/frontier/HostQueuesFrontier.html#738. \n&lt;http://crawler.archive.org/xref/org/archive/crawler/frontier/HostQueuesFrontier.html#738.%C2%A0&gt; \nMeantime, most threads are just waiting on notify with others waiting to \nget into HQF, only its Zzzzzzzzzzzz...\n\nSt.Ack\n\n\n\nMike Schwartz wrote:\n\n&gt; thanks for the pointer. I think I&#39;m running NPTL because &#39;ps x&#39; only \n&gt; shows 1 Linux process.\n&gt;\n&gt; I&#39;ll email you the SIGQUIT dump in a separate 1:1 email\n&gt;\n&gt; thanks\n&gt;  - Mike\n&gt;\n&gt; At 02:01 PM 3/22/2005, you wrote:\n&gt;\n&gt;&gt; Mike Schwartz wrote:\n&gt;&gt;\n&gt;&gt; &gt; hi,\n&gt;&gt; &gt;\n&gt;&gt; &gt; I&#39;m running a moderately large crawl right now (5000 seed URLs, each\n&gt;&gt; &gt; limited in the RobegerFrontier to 50 docs max, using 100 \n&gt;&gt; ToeThreads), and\n&gt;&gt; &gt; after running for about 12 hours I notice in the thread report that\n&gt;&gt; &gt; all but\n&gt;&gt; &gt; 1 thread are stuck in ABOUT_TO_GET_URI, with one thread in\n&gt;&gt; &gt; ABOUT_TO_RETURN_URI (for many minutes).  I tried killing (and \n&gt;&gt; replacinng)\n&gt;&gt; &gt; the ABOUT_TO_RETURN_URI and it caused there now to be 2 active threads.\n&gt;&gt;\n&gt;&gt; Is this your issue Mike:\n&gt;&gt; http://crawler.archive.org/articles/releasenotes.html#glibc2_3_2?\n&gt;&gt;\n&gt;&gt; Otherwise, take a couple of thread dumps -- Send a &#39;kill -SIGQUIT&#39; to\n&gt;&gt; the java launcher process.  The thread dumps will show in\n&gt;&gt; heritrix_out.log -- and send us the output.\n&gt;&gt;\n&gt;&gt; Yours,\n&gt;&gt; St.Ack\n&gt;&gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt; can anyone suggest what I need to do to get the rest of the threads \n&gt;&gt; going\n&gt;&gt; &gt; again?  It seems like some kind of deadlock/livelock condition is\n&gt;&gt; &gt; happening.\n&gt;&gt; &gt;\n&gt;&gt; &gt; thanks\n&gt;&gt; &gt;   - Mike\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt; *Yahoo! Groups Sponsor*\n&gt;&gt; &gt; ADVERTISEMENT\n&gt;&gt; &gt; &lt; \n&gt;&gt; http://us.ard.yahoo.com/SIG=129m4sh7i/M=298184.6191685.7192823.3001176/D=groups/S=1705004924:HM/EXP=1111605555/A=2593423/R=0/SIG=11el9gslf/*http://www.netflix.com/Default?mqso=60190075 \n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt; \n&gt;&gt; ------------------------------------------------------------------------\n&gt;&gt; &gt; *Yahoo! Groups Links*\n&gt;&gt; &gt;\n&gt;&gt; &gt;     * To visit your group on the web, go to:\n&gt;&gt; &gt;       http://groups.yahoo.com/group/archive-crawler/\n&gt;&gt; &gt;       \n&gt;&gt; &gt;     * To unsubscribe from this group, send an email to:\n&gt;&gt; &gt;       archive-crawler-unsubscribe@yahoogroups.com\n&gt;&gt; &gt;       &lt; \n&gt;&gt; mailto:archive-crawler-unsubscribe@yahoogroups.com?subject=Unsubscribe \n&gt;&gt; &lt;mailto:archive-crawler-unsubscribe@yahoogroups.com%3Fsubject=Unsubscribe&gt; \n&gt;&gt; &gt;\n&gt;&gt; &gt;       \n&gt;&gt; &gt;     * Your use of Yahoo! Groups is subject to the Yahoo! Terms of\n&gt;&gt; &gt;       Service &lt; http://docs.yahoo.com/info/terms/&gt;.\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; *Yahoo! Groups Sponsor*\n&gt;&gt; ADVERTISEMENT\n&gt;&gt; &lt;http://us.ard.yahoo.com/SIG=129kqomdd/M=298184.6191685.7192823.3001176/D=groups/S=1705004924:HM/EXP=1111611455/A=2593423/R=0/SIG=11el9gslf/*http://www.netflix.com/Default?mqso=60190075&gt;\n&gt;&gt;\n&gt;&gt; ------------------------------------------------------------------------\n&gt;&gt; Yahoo! Groups Links\n&gt;&gt;\n&gt;&gt;     * To visit your group on the web, go to:\n&gt;&gt;     * http://groups.yahoo.com/group/archive-crawler/\n&gt;&gt;     *  \n&gt;&gt;     * To unsubscribe from this group, send an email to:\n&gt;&gt;     * archive-crawler-unsubscribe@yahoogroups.com\n&gt;&gt;       &lt;mailto:archive-crawler-unsubscribe@yahoogroups.com?subject=Unsubscribe&gt;\n&gt;&gt;\n&gt;&gt;     *  \n&gt;&gt;     * Your use of Yahoo! Groups is subject to the Yahoo! Terms of\n&gt;&gt;       Service &lt;http://docs.yahoo.com/info/terms/&gt;.\n&gt;&gt;\n&gt;\n&gt; *Yahoo! Groups Sponsor*\n&gt; ADVERTISEMENT\n&gt; &lt;http://us.ard.yahoo.com/SIG=12972tmj9/M=298184.6191685.7192823.3001176/D=groups/S=1705004924:HM/EXP=1111615603/A=2593423/R=0/SIG=11el9gslf/*http://www.netflix.com/Default?mqso=60190075&gt; \n&gt;\n&gt;\n&gt;\n&gt; ------------------------------------------------------------------------\n&gt; *Yahoo! Groups Links*\n&gt;\n&gt;     * To visit your group on the web, go to:\n&gt;       http://groups.yahoo.com/group/archive-crawler/\n&gt;        \n&gt;     * To unsubscribe from this group, send an email to:\n&gt;       archive-crawler-unsubscribe@yahoogroups.com\n&gt;       &lt;mailto:archive-crawler-unsubscribe@yahoogroups.com?subject=Unsubscribe&gt;\n&gt;        \n&gt;     * Your use of Yahoo! Groups is subject to the Yahoo! Terms of\n&gt;       Service &lt;http://docs.yahoo.com/info/terms/&gt;.\n&gt;\n&gt;\n\n\n"}}