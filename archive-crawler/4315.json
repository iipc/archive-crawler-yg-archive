{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":202034705,"authorName":"Michael Stack","from":"Michael Stack &lt;stack@...&gt;","profile":"stackarchiveorg","replyTo":"LIST","senderId":"DjqCnqhuar2qMETVpZfKYBplvm3ECc4_ehqFqC50TnN2mnhXreSM9PxVG5m4en9eyN9xQJcu796j-B3Qaw3PaC7zl5FhaMY","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] many questions about hcc","postDate":"1181934317","msgId":4315,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ2NzJFMkVELjQwOTA3QGR1Ym9jZS5uZXQ+","inReplyToHeader":"PDVhMWMzNGFhMDcwNjE1MTE1MGcxZTAwYjc4MW82MTk0YzkwMDEyOTYyZDMxQG1haWwuZ21haWwuY29tPg==","referencesHeader":"PDVhMWMzNGFhMDcwNTI1MTQxMXYxOTljZTVhZXI2NDU5YTY2Njc4ZGNlMzE3QG1haWwuZ21haWwuY29tPgkgPDQ2NTc3MTFGLjYwMjA4MDdAZHVib2NlLm5ldD4JIDw1YTFjMzRhYTA3MDYxMjEyMTR3NDFlYjQ5ODVxNjAyZDc1NmViOGY4NGQzNEBtYWlsLmdtYWlsLmNvbT4JIDw1YTFjMzRhYTA3MDYxMzA5NDBpMjk2ODJhMzl5ZWE4ODYyZDk2ZDc2NWExOEBtYWlsLmdtYWlsLmNvbT4JIDw0NjcxOUQyQy4zMDBAZHVib2NlLm5ldD4gPDVhMWMzNGFhMDcwNjE1MTE1MGcxZTAwYjc4MW82MTk0YzkwMDEyOTYyZDMxQG1haWwuZ21haWwuY29tPg=="},"prevInTopic":4314,"nextInTopic":0,"prevInTime":4314,"nextInTime":4316,"topicId":4274,"numMessagesInTopic":7,"msgSnippet":"... I d think that the clients --whether JConsole or your listing code -- should both have the same view of the JMX Agent registered beans.  Is the listing","rawEmail":"Return-Path: &lt;stack@...&gt;\r\nX-Sender: stack@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 29335 invoked from network); 15 Jun 2007 19:04:33 -0000\r\nReceived: from unknown (66.218.66.70)\n  by m49.grp.scd.yahoo.com with QMQP; 15 Jun 2007 19:04:33 -0000\r\nReceived: from unknown (HELO mail4.omnex.netvigour.com) (208.229.144.195)\n  by mta12.grp.scd.yahoo.com with SMTP; 15 Jun 2007 19:04:27 -0000\r\nReceived: from incoming-imf1.netvigour.com ([10.201.10.9]) by mail4.omnex.netvigour.com with Microsoft SMTPSVC(6.0.3790.1830);\n\t Fri, 15 Jun 2007 15:02:19 -0400\r\nReceived: from [208.76.47.106] ([208.76.47.106]) by incoming-imf1.netvigour.com with Microsoft SMTPSVC(6.0.3790.1830);\n\t Fri, 15 Jun 2007 15:02:19 -0400\r\nMessage-ID: &lt;4672E2ED.40907@...&gt;\r\nDate: Fri, 15 Jun 2007 12:05:17 -0700\r\nUser-Agent: Thunderbird 1.5.0.12 (Macintosh/20070509)\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;5a1c34aa0705251411v199ce5aer6459a66678dce317@...&gt;\t &lt;4657711F.6020807@...&gt;\t &lt;5a1c34aa0706121214w41eb4985q602d756eb8f84d34@...&gt;\t &lt;5a1c34aa0706130940i29682a39yea8862d96d765a18@...&gt;\t &lt;46719D2C.300@...&gt; &lt;5a1c34aa0706151150g1e00b781o6194c90012962d31@...&gt;\r\nIn-Reply-To: &lt;5a1c34aa0706151150g1e00b781o6194c90012962d31@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nReturn-Path: stack@...\r\nX-OriginalArrivalTime: 15 Jun 2007 19:02:19.0721 (UTC) FILETIME=[B2B43390:01C7AF7F]\r\nX-eGroups-Msg-Info: 1:0:0:0\r\nFrom: Michael Stack &lt;stack@...&gt;\r\nSubject: Re: [archive-crawler] many questions about hcc\r\nX-Yahoo-Group-Post: member; u=202034705; y=59Sqb20it4naQCj1aX6dSr8a0Y7tlAYOCvmAtwiDldpm5qNKBlMlnx2X\r\nX-Yahoo-Profile: stackarchiveorg\r\n\r\nAndrea Goethals wrote:\n&gt;\n&gt; Hi,\n&gt;\n&gt; On 6/14/07, Michael Stack &lt;stack@... \n&gt; &lt;mailto:stack%40duboce.net&gt;&gt; wrote:\n&gt; &gt; ..\n&gt; &gt; You say you&#39;ve done a programmatic listing but perhaps JConsole will\n&gt; &gt; give you a clue as to whats up. If you pause after the registration and\n&gt; &gt; init of the ClusterControllerBean on port 8849, does it show in\n&gt; &gt; JConsole?\n&gt;\n&gt; Yes it does show up in JConsole\n&gt;\n&gt; &gt; If so, is the string the client is using to query the mbean\n&gt; &gt; appropriate.\n&gt;\n&gt; Yes, the string the HCC code is querying on should match the name that\n&gt; you see in the Info tab in JConsole. The reason it doesn&#39;t match\n&gt; anything is when I insert a listing of all the names (by doing a\n&gt; connection.queryNames(null,null)) and printing the names out before\n&gt; the query on the ClusterControllerBean name, the crawlers names all\n&gt; show up but the ClusterControllerBean doesn&#39;t.\n&gt;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nI&#39;d think that the clients --whether JConsole or your listing code -- \nshould both have the same view of the JMX Agent registered beans.  Is \nthe listing being done in the VM that is hosting the JMX Agent?  If it \nis, perhaps listing remotely makes a difference?\n\nDan or Karl, do you know how hcc ports are set in ArchiveIt?\n\nSt.Ack\n\n\n\n\n&gt;\n&gt; &gt;\n&gt; &gt; Anything other than Heritrix or hcc running in these JVMs?\n&gt;\n&gt; no. The heritrix instances are each started up by a slight variation\n&gt; of the heritrix command-line script. The hcc is started up via a bash\n&gt; script that calls my Java class that creates the ClusterControllerBean\n&gt; and Client.\n&gt;\n&gt; Something\n&gt; &gt; that is putting up its own JMX Agent (A JBoss or a Tomcat, etc.): i.e.\n&gt; &gt; if more than one JMX Agent running in JVM, one might catch the Heritrix\n&gt; &gt; bean registrations, while other catches registration of hcc beans?\n&gt;\n&gt; I don&#39;t see how that could happen. They&#39;re just running as stand-alone\n&gt; programs outside of anything like JBoss or Tomcat. The only thing I\n&gt; know is that if I pick any port for the ClusterControllerBean & Client\n&gt; to share that is different from any used by the Crawlers it works.\n&gt;\n&gt; Andrea\n&gt;\n&gt; &gt;\n&gt; &gt; Both of the above are stretches but, as with you, I am a little\n&gt; &gt; stumped. I see no reason why port should make a difference.\n&gt; &gt; St.Ack\n&gt; &gt;\n&gt; &gt; Andrea Goethals wrote:\n&gt; &gt; &gt;\n&gt; &gt;\n&gt; &gt; &gt; I think I solved the hcc problem I wrote about yesterday - here was\n&gt; &gt; &gt; the problem & exception:\n&gt; &gt; &gt;\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; The thing I haven&#39;t been able to get working is the hcc\n&gt; &gt; &gt; &gt; ClusterControllerClient. If I do the same thing as in the jndi doc:\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; public void main(String[] args){\n&gt; &gt; &gt; &gt; //initialize the cluster controller bean\n&gt; &gt; &gt; &gt; ClusterControllerBean ccbean = new ClusterControllerBean();\n&gt; &gt; &gt; &gt; ccbean.init();\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; //obtain a handle to the cluster controller client.\n&gt; &gt; &gt; &gt; ClusterControllerClient cc =\n&gt; &gt; &gt; &gt; ClusterControllerClientManager.getDefaultClient();\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; ...\n&gt; &gt; &gt; &gt; }\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; I get an exception on the getDefaultClient part:\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; Started ClusterControllerBean\n&gt; &gt; &gt; &gt; Jun 12, 2007 2:29:11 PM\n&gt; &gt; &gt; &gt; org.archive.hcc.util.jmx.MBeanServerConnectionFactory\n&gt; &gt; &gt; &gt; createJMXServiceUrl\n&gt; &gt; &gt; &gt; INFO: service url:\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; \n&gt; service:jmx:rmi://chaz.hul.harvard.edu:8849/jndi/rmi://chaz.hul.harvard.edu:8849/jmxrmi \n&gt; &lt;rmi://chaz.hul.harvard.edu:8849/jndi/rmi://chaz.hul.harvard.edu:8849/jmxrmi&gt;\n&gt; &gt; &gt; \n&gt; &lt;rmi://chaz.hul.harvard.edu:8849/jndi/rmi://chaz.hul.harvard.edu:8849/jmxrmi \n&gt; &lt;rmi://chaz.hul.harvard.edu:8849/jndi/rmi://chaz.hul.harvard.edu:8849/jmxrmi&gt;&gt;\n&gt; &gt; &gt; &gt; Jun 12, 2007 2:29:11 PM\n&gt; &gt; &gt; &gt; org.archive.hcc.util.jmx.MBeanServerConnectionFactory \n&gt; createConnection\n&gt; &gt; &gt; &gt; INFO: successfully created mbeanServerConnection on\n&gt; &gt; &gt; &gt; chaz.hul.harvard.edu/128.103.151.249:8849\n&gt; &gt; &gt; &gt; javax.management.InstanceNotFoundException: no mbean found matching\n&gt; &gt; &gt; &gt; query:org.archive.hcc:type=ClusterControllerBean,*\n&gt; &gt; &gt; &gt; at\n&gt; &gt; &gt; \n&gt; org.archive.hcc.client.ClusterControllerClientImpl.init(ClusterControllerClientImpl.java:100)\n&gt; &gt; &gt; &gt; at\n&gt; &gt; &gt; \n&gt; org.archive.hcc.client.ClusterControllerClientImpl.&lt;init&gt;(ClusterControllerClientImpl.java:89)\n&gt; &gt; &gt; &gt; at\n&gt; &gt; &gt; \n&gt; org.archive.hcc.client.ClusterControllerClientManager.getDefaultClient(ClusterControllerClientManager.java:70)\n&gt; &gt; &gt; &gt; at\n&gt; &gt; &gt; \n&gt; edu.harvard.hul.ois.wax.crawl.CrawlController.main(CrawlController.java:48)\n&gt; &gt; &gt; &gt; java.lang.RuntimeException:\n&gt; &gt; &gt; &gt; javax.management.InstanceNotFoundException: no mbean found matching\n&gt; &gt; &gt; &gt; query:org.archive.hcc:type=ClusterControllerBean,*\n&gt; &gt; &gt; &gt; at\n&gt; &gt; &gt; \n&gt; org.archive.hcc.client.ClusterControllerClientImpl.init(ClusterControllerClientImpl.java:113)\n&gt; &gt; &gt; &gt; at\n&gt; &gt; &gt; \n&gt; org.archive.hcc.client.ClusterControllerClientImpl.&lt;init&gt;(ClusterControllerClientImpl.java:89)\n&gt; &gt; &gt; &gt; at\n&gt; &gt; &gt; \n&gt; org.archive.hcc.client.ClusterControllerClientManager.getDefaultClient(ClusterControllerClientManager.java:70)\n&gt; &gt; &gt; &gt; at\n&gt; &gt; &gt; \n&gt; edu.harvard.hul.ois.wax.crawl.CrawlController.main(CrawlController.java:48)\n&gt; &gt; &gt; &gt; Caused by: javax.management.InstanceNotFoundException: no mbean \n&gt; found\n&gt; &gt; &gt; &gt; matching query:org.archive.hcc:type=ClusterControllerBean,*\n&gt; &gt; &gt; &gt; at\n&gt; &gt; &gt; \n&gt; org.archive.hcc.client.ClusterControllerClientImpl.init(ClusterControllerClientImpl.java:100)\n&gt; &gt; &gt; &gt; ... 3 more\n&gt; &gt; &gt; &gt; Jun 12, 2007 2:29:11 PM\n&gt; &gt; &gt; &gt; org.archive.hcc.client.ClusterControllerClientManager \n&gt; getDefaultClient\n&gt; &gt; &gt; &gt; SEVERE: : javax.management.InstanceNotFoundException: no mbean found\n&gt; &gt; &gt; &gt; matching query:org.archive.hcc:type=ClusterControllerBean,*\n&gt; &gt; &gt; &gt; Exception in thread &quot;main&quot; java.lang.RuntimeException:\n&gt; &gt; &gt; &gt; java.lang.RuntimeException:\n&gt; &gt; &gt; &gt; javax.management.InstanceNotFoundException: no mbean found matching\n&gt; &gt; &gt; &gt; query:org.archive.hcc:type=ClusterControllerBean,*\n&gt; &gt; &gt; &gt; at\n&gt; &gt; &gt; \n&gt; org.archive.hcc.client.ClusterControllerClientManager.getDefaultClient(ClusterControllerClientManager.java:80)\n&gt; &gt; &gt; &gt; at\n&gt; &gt; &gt; \n&gt; edu.harvard.hul.ois.wax.crawl.CrawlController.main(CrawlController.java:48)\n&gt; &gt; &gt; &gt; Caused by: java.lang.RuntimeException:\n&gt; &gt; &gt; &gt; javax.management.InstanceNotFoundException: no mbean found matching\n&gt; &gt; &gt; &gt; query:org.archive.hcc:type=ClusterControllerBean,*\n&gt; &gt; &gt; &gt; at\n&gt; &gt; &gt; \n&gt; org.archive.hcc.client.ClusterControllerClientImpl.init(ClusterControllerClientImpl.java:113)\n&gt; &gt; &gt; &gt; at\n&gt; &gt; &gt; \n&gt; org.archive.hcc.client.ClusterControllerClientImpl.&lt;init&gt;(ClusterControllerClientImpl.java:89)\n&gt; &gt; &gt; &gt; at\n&gt; &gt; &gt; \n&gt; org.archive.hcc.client.ClusterControllerClientManager.getDefaultClient(ClusterControllerClientManager.java:70)\n&gt; &gt; &gt; &gt; ... 1 more\n&gt; &gt; &gt; &gt; Caused by: javax.management.InstanceNotFoundException: no mbean \n&gt; found\n&gt; &gt; &gt; &gt; matching query:org.archive.hcc:type=ClusterControllerBean,*\n&gt; &gt; &gt; &gt; at\n&gt; &gt; &gt; \n&gt; org.archive.hcc.client.ClusterControllerClientImpl.init(ClusterControllerClientImpl.java:100)\n&gt; &gt; &gt; &gt; ... 3 more\n&gt; &gt; &gt; &gt; Jun 12, 2007 2:30:11 PM org.archive.hcc.ClusterControllerBean$3 run\n&gt; &gt; &gt; &gt; INFO: running poll task...\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt; I changed the JMX port for the hcc ClusterControllerBean &\n&gt; &gt; &gt; ClusterControllerClient so that they are the same as each other but\n&gt; &gt; &gt; different than the crawlers. I&#39;d just like to verify with someone that\n&gt; &gt; &gt; that&#39;s how its supposed to work, so for example:\n&gt; &gt; &gt; All heritrix instances use JMX port x (like 8849)\n&gt; &gt; &gt; The hcc controller bean & client communincate on a different port\n&gt; &gt; &gt; (like 8850)\n&gt; &gt; &gt;\n&gt; &gt; &gt; I thought different applications could use the same JMX port but if I\n&gt; &gt; &gt; use 8849 for all of the above, when I programatically list all the\n&gt; &gt; &gt; registered names at that host/JMX port only the crawlers show up.\n&gt; &gt; &gt;\n&gt; &gt; &gt; I think it works for me that all the heritrix crawlers use the same\n&gt; &gt; &gt; JMX port because they are running on different machines. Following the\n&gt; &gt; &gt; no app can use the same JMX port thing, if I have multiple heritrix\n&gt; &gt; &gt; containers running on the same machine - they would have to use\n&gt; &gt; &gt; different JMX ports, right?\n&gt; &gt; &gt;\n&gt; &gt; &gt; thanks,\n&gt; &gt; &gt; Andrea\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt;\n&gt;  \n\n\n"}}