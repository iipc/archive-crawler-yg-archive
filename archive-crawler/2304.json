{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":163406187,"authorName":"Kristinn Sigurdsson","from":"&quot;Kristinn Sigurdsson&quot; &lt;kris@...&gt;","profile":"kristsi25","replyTo":"LIST","senderId":"-CrTNJM2S0IoDSYZhh4p_2J_7Pc_OCZ4c1qohKrQTSU9gyy7IuXp7S0JXj72QV0eXSKlFywlFrGF9CK0A3r63-WjVoP8gezdR34YCHmMaQ","spamInfo":{"isSpam":false,"reason":"5"},"subject":"RE: [archive-crawler] Heritrix 1.5 memory consumption","postDate":"1130946087","msgId":2304,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDA2NzhEQjE5NjhFQUM3NDA5Q0MzRDBBQjdBMTFCODRBNzg1NjI1QHNrYXJmdXIuYm9rLmxvY2FsPg==","inReplyToHeader":"PDQzNjhEOEFGLjIwNjA5MDlAbWV0YWNhcnRhLmNvbT4="},"prevInTopic":2303,"nextInTopic":0,"prevInTime":2303,"nextInTime":2305,"topicId":2303,"numMessagesInTopic":2,"msgSnippet":"I don t think it is correct to extand the memory usage in a linear fashion like that. I m currently running a crawl that has completed 5.3 million documents","rawEmail":"Return-Path: &lt;kris@...&gt;\r\nX-Sender: kris@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 77355 invoked from network); 2 Nov 2005 15:42:44 -0000\r\nReceived: from unknown (66.218.66.166)\n  by m11.grp.scd.yahoo.com with QMQP; 2 Nov 2005 15:42:44 -0000\r\nReceived: from unknown (HELO ia00524.archive.org) (207.241.224.171)\n  by mta5.grp.scd.yahoo.com with SMTP; 2 Nov 2005 15:42:41 -0000\r\nReceived: (qmail 11963 invoked by uid 100); 2 Nov 2005 15:39:08 -0000\r\nReceived: from forritun-4.bok.hi.is (HELO forritun4) (kris@...@130.208.152.83)\n  by mail-dev.archive.org with SMTP; 2 Nov 2005 15:39:08 -0000\r\nTo: &lt;archive-crawler@yahoogroups.com&gt;\r\nDate: Wed, 2 Nov 2005 15:41:27 -0000\r\nMessage-ID: &lt;0678DB1968EAC7409CC3D0AB7A11B84A785625@...&gt;\r\nMIME-Version: 1.0\r\nContent-Type: multipart/mixed;\n\tboundary=&quot;----=_NextPart_000_0000_01C5DFC3.E4864A30&quot;\r\nX-Priority: 3 (Normal)\r\nX-MSMail-Priority: Normal\r\nX-Mailer: Microsoft Outlook, Build 10.0.4510\r\nImportance: Normal\r\nIn-Reply-To: &lt;4368D8AF.2060909@...&gt;\r\nX-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180\r\nX-eGroups-Msg-Info: 1:5:0:0\r\nFrom: &quot;Kristinn Sigurdsson&quot; &lt;kris@...&gt;\r\nSubject: RE: [archive-crawler] Heritrix 1.5 memory consumption\r\nX-Yahoo-Group-Post: member; u=163406187; y=XoRQL8LEw356CcwJ6512z8geQFDzGGowV3wR6efELZWyk5EE\r\nX-Yahoo-Profile: kristsi25\r\n\r\n\r\n------=_NextPart_000_0000_01C5DFC3.E4864A30\r\nContent-Type: multipart/alternative;\n\tboundary=&quot;----=_NextPart_001_0001_01C5DFC3.E4864A30&quot;\r\n\r\n\r\n------=_NextPart_001_0001_01C5DFC3.E4864A30\r\nContent-Type: text/plain;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nI don&#39;t think it is correct to extand the memory usage in a linear fashion\n=\r\nlike that. I&#39;m currently running a crawl that has completed 5.3 million\ndoc=\r\numents with 8.2 million discovered. The JVM has a max heap size of 1.5\nGB, =\r\nbut at the moment the memory usage is hanging around the 1 GB level.\n \nTher=\r\ne is a certain amount of overhead for each host, especially active\nhosts. H=\r\nowever, there is not a direct linear correlation between the amount\nof memo=\r\nry used and the number of discovered URIs. I&#39;ve attached a zipped\nversion o=\r\nf the progress-statistics.log for the above mentioned job, so that\nyou can =\r\nsee how the memory usage has been in relation to the URIs being\ncrawled.\n \n=\r\nI expect to crawl upwards of 30 million URIs using no more memory. True,\nI&#39;=\r\nve probably already discovered most of the hosts that I&#39;ll be crawling, so\n=\r\nthat limits the memory usage. Unless you are doing a VERY broad crawl, 2.5\n=\r\nmillion documents should be well within Heritrix&#39;s capabilities. You are\nho=\r\nwever, (even for small jobs) going to need more then 200MB. The basic\noverh=\r\nead is considerable, and I would not suggest running Heritrix without\nat le=\r\nast 512MB heap. For your purposes you&#39;ll probably do well with 1GB\nsystem m=\r\nemory, assigning 2/3 to 3/4 of it to the java heap. \n \n- Kris\n\n-----Origina=\r\nl Message-----\nFrom: archive-crawler@yahoogroups.com\n[mailto:archive-crawle=\r\nr@yahoogroups.com] On Behalf Of Karl Wright\nSent: 2. n=F3vember 2005 15:18\n=\r\nTo: archive-crawler@yahoogroups.com\nSubject: [archive-crawler] Heritrix 1.5=\r\n memory consumption\n\n\nHi all,\nI downloaded and set up the 1.5 version of He=\r\nritrix from svn, on the \nhopes that its memory performance was significantl=\r\ny better than the \nolder 1.3 version we had been using before.\n\nOur problem=\r\n, in a nutshell, was that Heritrix would run out of memory \neventually, no =\r\nmatter how much we gave the JVM.  Our larger tasks \ntherefore could not be =\r\naccomplished with Heritrix.\n\nMichael Stack recommended that we migrate from=\r\n Heritrix 1.3 to Heritrix \n1.5, and this was done.  However, I am finding o=\r\nnly marginally better \nmemory consumption numbers with Heritrix 1.5.  For a=\r\n task that is \npartway completed that has 320,000 scanned documents and 660=\r\n,000 queued \ndocuments, the base memory consumption seems to be about 200Mb=\r\n. \nExtending this to 2.5 million documents (our current task) will require =\r\n\nmore than 1.6GB of JVM memory, which is better than Heritrix 1.3 but not \n=\r\nby much.\n\nWe are using the default profile, with only minor changes.\n\nAny f=\r\nurther advice?  Am I missing something?\n\nKarl\n\n\n\nSPONSORED LINKS \nComputer\n=\r\n&lt;http://groups.yahoo.com/gads?t=3Dms&k=3DComputer+internet+security&w1=3DCo=\r\nmputer+\ninternet+security&w2=3DComputer+internet+business&w3=3DComputer+int=\r\nernet+access&\nw4=3DComputer+internet+privacy+securities&w5=3DComputer+inter=\r\nnet+help&w6=3DCompute\nr+internet+connection&c=3D6&s=3D198&.sig=3DV04yaONvhR=\r\niZX9V-9vaMcA&gt; internet\nsecurity \tComputer\n&lt;http://groups.yahoo.com/gads?t=\r\n=3Dms&k=3DComputer+internet+business&w1=3DComputer+\ninternet+security&w2=3D=\r\nComputer+internet+business&w3=3DComputer+internet+access&\nw4=3DComputer+int=\r\nernet+privacy+securities&w5=3DComputer+internet+help&w6=3DCompute\nr+interne=\r\nt+connection&c=3D6&s=3D198&.sig=3DQEM5QXY5E4yokvfp8I9OxA&gt; internet\nbusiness=\r\n \tComputer\n&lt;http://groups.yahoo.com/gads?t=3Dms&k=3DComputer+internet+acces=\r\ns&w1=3DComputer+in\nternet+security&w2=3DComputer+internet+business&w3=3DCom=\r\nputer+internet+access&w4\n=3DComputer+internet+privacy+securities&w5=3DCompu=\r\nter+internet+help&w6=3DComputer+\ninternet+connection&c=3D6&s=3D198&.sig=3DG=\r\nvFjo1UJpzPMTQeQeWH-9Q&gt; internet access\n\nComputer\n&lt;http://groups.yahoo.com/g=\r\nads?t=3Dms&k=3DComputer+internet+privacy+securities&w1\n=3DComputer+internet=\r\n+security&w2=3DComputer+internet+business&w3=3DComputer+intern\net+access&w4=\r\n=3DComputer+internet+privacy+securities&w5=3DComputer+internet+help&\nw6=3DC=\r\nomputer+internet+connection&c=3D6&s=3D198&.sig=3D2cAxh4C_HeZYnGK5pWGQjg&gt;\nin=\r\nternet privacy securities \tComputer\n&lt;http://groups.yahoo.com/gads?t=3Dms&k=\r\n=3DComputer+internet+help&w1=3DComputer+inte\nrnet+security&w2=3DComputer+in=\r\nternet+business&w3=3DComputer+internet+access&w4=3DC\nomputer+internet+priva=\r\ncy+securities&w5=3DComputer+internet+help&w6=3DComputer+in\nternet+connectio=\r\nn&c=3D6&s=3D198&.sig=3DXyuTAshDdmCMqHSTUW6r1Q&gt; internet help\nComputer\n&lt;http=\r\n://groups.yahoo.com/gads?t=3Dms&k=3DComputer+internet+connection&w1=3DCompu=\r\nte\nr+internet+security&w2=3DComputer+internet+business&w3=3DComputer+intern=\r\net+acces\ns&w4=3DComputer+internet+privacy+securities&w5=3DComputer+internet=\r\n+help&w6=3DCompu\nter+internet+connection&c=3D6&s=3D198&.sig=3DPWZ1Hrcj8Yl7b=\r\nPjnNBOESg&gt; internet\nconnection \t\n\n  _____  \n\nYAHOO! GROUPS LINKS \n\n\n\t\n*\t Vi=\r\nsit your group &quot;archive-crawler\n&lt;http://groups.yahoo.com/group/archive-craw=\r\nler&gt; &quot; on the web.\n  \n\n*\t To unsubscribe from this group, send an email to:=\r\n\n archive-crawler-unsubscribe@yahoogroups.com\n&lt;mailto:archive-crawler-unsub=\r\nscribe@yahoogroups.com?subject=3DUnsubscribe&gt; \n  \n\n*\t Your use of Yahoo! Gr=\r\noups is subject to the Yahoo! Terms of Service\n&lt;http://docs.yahoo.com/info/=\r\nterms/&gt; . \n\n\n  _____  \n\n\n\r\n------=_NextPart_001_0001_01C5DFC3.E4864A30\r\nContent-Type: text/html;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot;&gt;\n&lt;HTML&gt;&lt;HEAD&gt;=\r\n&lt;TITLE&gt;Message&lt;/TITLE&gt;\n&lt;META http-equiv=3DContent-Type content=3D&quot;text/html=\r\n; charset=3Diso-8859-1&quot;&gt;\n&lt;META content=3D&quot;MSHTML 6.00.2900.2769&quot; name=3DGEN=\r\nERATOR&gt;&lt;/HEAD&gt;\n&lt;BODY&gt;\n&lt;DIV&gt;&lt;SPAN class=3D555073215-02112005&gt;&lt;FONT face=3DAr=\r\nial color=3D#0000ff size=3D2&gt;I \ndon&#39;t think it is correct to extand the mem=\r\nory usage in a linear fashion like \nthat. I&#39;m currently running a crawl tha=\r\nt has completed 5.3 million documents \nwith 8.2 million discovered. The JVM=\r\n has a max heap size of 1.5 GB, but at the \nmoment the memory usage is hang=\r\ning around the 1 GB level.&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=3D555073215=\r\n-02112005&gt;&lt;FONT face=3DArial color=3D#0000ff \nsize=3D2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&nbsp;=\r\n&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=3D555073215-02112005&gt;&lt;FONT face=3DArial color=3D#00=\r\n00ff size=3D2&gt;There \nis a certain amount of overhead for each host, especia=\r\nlly active hosts. However, \nthere is not a direct linear correlation betwee=\r\nn the amount of memory used and \nthe number of discovered URIs. I&#39;ve attach=\r\ned a zipped version of the \nprogress-statistics.log for the above mentioned=\r\n job, so that you can see how the \nmemory usage has been in relation to the=\r\n URIs being crawled.&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=3D555073215-02112=\r\n005&gt;&lt;FONT face=3DArial color=3D#0000ff \nsize=3D2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&nbsp;&lt;/DIV&gt;=\r\n\n&lt;DIV&gt;&lt;SPAN class=3D555073215-02112005&gt;&lt;FONT face=3DArial color=3D#0000ff s=\r\nize=3D2&gt;I \nexpect to crawl upwards of 30 million URIs using no more memory.=\r\n True, I&#39;ve \nprobably already discovered most of the hosts that I&#39;ll be cra=\r\nwling, so that \nlimits the memory usage. Unless you are doing a VERY broad =\r\ncrawl, 2.5 million \ndocuments should be well within Heritrix&#39;s capabilities=\r\n. You are however, (even \nfor small jobs) going to need more then 200MB. Th=\r\ne basic overhead is \nconsiderable, and I would not suggest running Heritrix=\r\n without at least 512MB \nheap. For your purposes you&#39;ll probably do well wi=\r\nth 1GB system memory, \nassigning 2/3 to 3/4 of it to the java heap. &lt;/FONT&gt;=\r\n&lt;/SPAN&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=3D555073215-02112005&gt;&lt;FONT face=3DArial colo=\r\nr=3D#0000ff \nsize=3D2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=3D5550732=\r\n15-02112005&gt;&lt;FONT face=3DArial color=3D#0000ff size=3D2&gt;- \nKris&lt;/FONT&gt;&lt;/SPA=\r\nN&gt;&lt;/DIV&gt;\n&lt;BLOCKQUOTE \nstyle=3D&quot;PADDING-LEFT: 5px; MARGIN-LEFT: 5px; BORDER-=\r\nLEFT: #0000ff 2px solid; MARGIN-RIGHT: 0px&quot;&gt;\n  &lt;DIV&gt;&lt;/DIV&gt;\n  &lt;DIV class=3DO=\r\nutlookMessageHeader lang=3Den-us dir=3Dltr align=3Dleft&gt;&lt;FONT \n  face=3DTah=\r\noma size=3D2&gt;-----Original Message-----&lt;BR&gt;&lt;B&gt;From:&lt;/B&gt; \n  archive-crawler@=\r\nyahoogroups.com [mailto:archive-crawler@yahoogroups.com] &lt;B&gt;On \n  Behalf Of=\r\n &lt;/B&gt;Karl Wright&lt;BR&gt;&lt;B&gt;Sent:&lt;/B&gt; 2. n=F3vember 2005 15:18&lt;BR&gt;&lt;B&gt;To:&lt;/B&gt; \n  =\r\narchive-crawler@yahoogroups.com&lt;BR&gt;&lt;B&gt;Subject:&lt;/B&gt; [archive-crawler] Heritr=\r\nix \n  1.5 memory consumption&lt;BR&gt;&lt;BR&gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;TT&gt;Hi all,&lt;BR&gt;I downloade=\r\nd and set \n  up the 1.5 version of Heritrix from svn, on the &lt;BR&gt;hopes that=\r\n its memory \n  performance was significantly better than the &lt;BR&gt;older 1.3 =\r\nversion we had \n  been using before.&lt;BR&gt;&lt;BR&gt;Our problem, in a nutshell, was=\r\n that Heritrix would \n  run out of memory &lt;BR&gt;eventually, no matter how muc=\r\nh we gave the JVM.&nbsp; \n  Our larger tasks &lt;BR&gt;therefore could not be acc=\r\nomplished with \n  Heritrix.&lt;BR&gt;&lt;BR&gt;Michael Stack recommended that we migrat=\r\ne from Heritrix 1.3 \n  to Heritrix &lt;BR&gt;1.5, and this was done.&nbsp; Howeve=\r\nr, I am finding only \n  marginally better &lt;BR&gt;memory consumption numbers wi=\r\nth Heritrix 1.5.&nbsp; For \n  a task that is &lt;BR&gt;partway completed that has=\r\n 320,000 scanned documents and \n  660,000 queued &lt;BR&gt;documents, the base me=\r\nmory consumption seems to be about \n  200Mb. &lt;BR&gt;Extending this to 2.5 mill=\r\nion documents (our current task) will \n  require &lt;BR&gt;more than 1.6GB of JVM=\r\n memory, which is better than Heritrix 1.3 \n  but not &lt;BR&gt;by much.&lt;BR&gt;&lt;BR&gt;W=\r\ne are using the default profile, with only minor \n  changes.&lt;BR&gt;&lt;BR&gt;Any fur=\r\nther advice?&nbsp; Am I missing \n  something?&lt;BR&gt;&lt;BR&gt;Karl&lt;BR&gt;&lt;/TT&gt;&lt;/BODY&gt;&lt;/=\r\nHTML&gt;\n\r\n------=_NextPart_001_0001_01C5DFC3.E4864A30--\r\n\n\r\n------=_NextPart_000_0000_01C5DFC3.E4864A30\r\nContent-Type: application/x-zip-compressed;\n\tname=&quot;progress-statistics.zip&quot;\r\nContent-Disposition: attachment;\n\tfilename=&quot;progress-statistics.zip&quot;\r\n\r\n[ Attachment content not displayed ]\r\n------=_NextPart_000_0000_01C5DFC3.E4864A30--\r\n\n"}}