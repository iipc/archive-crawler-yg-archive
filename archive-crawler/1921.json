{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":214587980,"authorName":"Christian Kohlschuetter","from":"Christian Kohlschuetter &lt;ck-heritrix@...&gt;","replyTo":"LIST","senderId":"p_k1x3iSVav_9kP_K34N4g408VBK-Ct330fDf3DFuaDRkZRbvR2XIQhhC0fNJdEDMiPyPSprH-1WBLHr-YplvQXBjyAle-YXKcUoiQ32Jzep4gkvSJQiLw","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] Re: TextUtils getMatcher ThreadLocal-ized","postDate":"1118151666","msgId":1921,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDIwMDUwNjA3MTU0MS4wNjE4MC5jay1oZXJpdHJpeEBuZXdzY2x1Yi5kZT4=","inReplyToHeader":"PDIwMDUwNjA3MTIyNC41NjI5NS5jay1oZXJpdHJpeEBuZXdzY2x1Yi5kZT4=","referencesHeader":"PEUxRGRYY1YtMDAwNHNFLTdPQHNjOC1wci1jdnMxLnNvdXJjZWZvcmdlLm5ldD4gPDQyQTRGOUQyLjgwNTA4MDFAYXJjaGl2ZS5vcmc+IDwyMDA1MDYwNzEyMjQuNTYyOTUuY2staGVyaXRyaXhAbmV3c2NsdWIuZGU+"},"prevInTopic":1920,"nextInTopic":0,"prevInTime":1920,"nextInTime":1922,"topicId":1906,"numMessagesInTopic":5,"msgSnippet":"Additional notes: 1. TextUtils.returnMatcher(Matcher) should always be called in a finally clause to ensure that the Matcher comes back to the lending.","rawEmail":"Return-Path: &lt;ck-heritrix@...&gt;\r\nX-Sender: ck-heritrix@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 82598 invoked from network); 7 Jun 2005 13:42:13 -0000\r\nReceived: from unknown (66.218.66.218)\n  by m24.grp.scd.yahoo.com with QMQP; 7 Jun 2005 13:42:13 -0000\r\nReceived: from unknown (HELO mail.newsclub.de) (130.75.2.42)\n  by mta3.grp.scd.yahoo.com with SMTP; 7 Jun 2005 13:42:13 -0000\r\nReceived: (qmail 11749 invoked by uid 2002); 7 Jun 2005 13:41:06 -0000\r\nReceived: from ck-heritrix@... by nhf3.rrzn.uni-hannover.de by uid 207 with qmail-scanner-1.21 \n (clamscan: 0.67. spamassassin: 2.63.  Clear:RC:0(130.75.152.171):SA:0(-2.6/5.0):. \n Processed in 0.85708 secs); 07 Jun 2005 13:41:06 -0000\r\nX-Spam-Status: No, hits=-2.6 required=5.0\r\nReceived: from pc171.kbs.uni-hannover.de (HELO mail.newsclub.de) (webmail@...@130.75.152.171)\n  by nhf3.rrzn.uni-hannover.de with RC4-MD5 encrypted SMTP; 7 Jun 2005 13:41:04 -0000\r\nOrganization: NewsClub\r\nTo: archive-crawler@yahoogroups.com\r\nDate: Tue, 7 Jun 2005 15:41:06 +0200\r\nUser-Agent: KMail/1.8\r\nCc: Gordon Mohr &lt;gojomo@...&gt;\r\nReferences: &lt;E1DdXcV-0004sE-7O@...&gt; &lt;42A4F9D2.8050801@...&gt; &lt;200506071224.56295.ck-heritrix@...&gt;\r\nIn-Reply-To: &lt;200506071224.56295.ck-heritrix@...&gt;\r\nMIME-Version: 1.0\r\nContent-Type: text/plain;\n  charset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nContent-Disposition: inline\r\nMessage-Id: &lt;200506071541.06180.ck-heritrix@...&gt;\r\nX-eGroups-Msg-Info: 1:12:0\r\nFrom: Christian Kohlschuetter &lt;ck-heritrix@...&gt;\r\nSubject: Re: [archive-crawler] Re: TextUtils getMatcher ThreadLocal-ized\r\nX-Yahoo-Group-Post: member; u=214587980\r\n\r\nAdditional notes:\n\n1. TextUtils.returnMatcher(Matcher) should always be cal=\r\nled in a &quot;finally&quot; \nclause to ensure that the Matcher comes back to the len=\r\nding. Example:\n\nMatcher m =3D TextUtils.borrowMatcher(MY_PATTERN, s);\ntry {=\r\n\n   // do something nasty with IOExceptions etc.\n} finally {\n  TextUtils.re=\r\nturnMatcher(m);\n}\n\n2. I have found several fragments in Heritrix where a Ma=\r\ntcher is retrieved \nusing TextUtils.getMatcher just to check whether it mat=\r\nches or just to \nreplace it by a string. In these cases, a call to TextUtil=\r\ns.matches or \nTextUtils.replaceAll would be better (there is no need to cha=\r\nnge code to use \nfor borrow/returnMatcher)\n\n3. There are still code fragmen=\r\nts in Heritrix which do not make use of the \nTextUtils methods.\n\n4. TextUti=\r\nls.matches, split, replaceAll and replaceFirst should take Pattern \nas well=\r\n as String objects as pattern arguments. In the latter case, the \npattern S=\r\ntring could be &quot;interned&quot; using a simple mapping table \n(HashMap&lt;String,Pat=\r\ntern&gt;).\n\n5. The proposed returnMatcher method won&#39;t compile. Here&#39;s the cor=\r\nrect one:\n    public static void returnMatcher(final Matcher m) {\n        a=\r\nssert (((Map) TL_MATCHER_MAP.get()).put(m.pattern(), m) =3D=3D null);\n    }=\r\n\n-- \nChristian Kohlsch=FCtter\nmailto: ck -at- NewsClub.de\n\n"}}