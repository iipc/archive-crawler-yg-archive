{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"e5He9JT_vpmZlEzBSthcJtX9WgmRQUrluXLhAyr2huYCRpNz9Wo8ZngzFl-z6577hLR-PfSXt_ARHKn_QKt8g1lOzhDvuXM","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] SSL certificate problem and integration of heritrix3","postDate":"1288305721","msgId":6790,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDRDQzlGQzM5LjYwMDAyMDRAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PEFBTkxrVGltTlJlank0X0dHbXY0dHpSbzFDQW1XMEt6bUpwWVIxN3ZacXRYaUBtYWlsLmdtYWlsLmNvbT4=","referencesHeader":"PEFBTkxrVGltTlJlank0X0dHbXY0dHpSbzFDQW1XMEt6bUpwWVIxN3ZacXRYaUBtYWlsLmdtYWlsLmNvbT4="},"prevInTopic":6787,"nextInTopic":6793,"prevInTime":6788,"nextInTime":6791,"topicId":6784,"numMessagesInTopic":5,"msgSnippet":"Hi, Adam. I m sorry for the difficulty making an HTTPS connection to the H3 web interface. In our usual usage/testing, we re using either a web browser (which","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 85664 invoked from network); 28 Oct 2010 22:42:01 -0000\r\nX-Received: from unknown (66.196.94.105)\n  by m15.grp.re1.yahoo.com with QMQP; 28 Oct 2010 22:42:01 -0000\r\nX-Received: from unknown (HELO relay01.pair.com) (209.68.5.15)\n  by mta1.grp.re1.yahoo.com with SMTP; 28 Oct 2010 22:42:01 -0000\r\nX-Received: (qmail 88188 invoked from network); 28 Oct 2010 22:42:00 -0000\r\nX-Received: from 208.70.27.190 (HELO silverbook.local) (208.70.27.190)\n  by relay01.pair.com with SMTP; 28 Oct 2010 22:42:00 -0000\r\nX-pair-Authenticated: 208.70.27.190\r\nMessage-ID: &lt;4CC9FC39.6000204@...&gt;\r\nDate: Thu, 28 Oct 2010 15:42:01 -0700\r\nUser-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.11) Gecko/20101013 Thunderbird/3.1.5\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nCc: =?UTF-8?B?QWRhbSBCcm9rZcWh?= &lt;adam.brokes@...&gt;\r\nReferences: &lt;AANLkTimNRejy4_GGmv4tzRo1CAmW0KzmJpYR17vZqtXi@...&gt;\r\nIn-Reply-To: &lt;AANLkTimNRejy4_GGmv4tzRo1CAmW0KzmJpYR17vZqtXi@...&gt;\r\nContent-Type: text/plain; charset=UTF-8; format=flowed\r\nContent-Transfer-Encoding: 8bit\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] SSL certificate problem and integration of\n heritrix3\r\nX-Yahoo-Group-Post: member; u=137285340; y=heLLUhQKbvdeaGiW9uuvSQDIl8qK5v3ds6-9CKNYmI21\r\nX-Yahoo-Profile: gojomo\r\n\r\nHi, Adam.\n\nI&#39;m sorry for the difficulty making an HTTPS connection to the H3 web \ninterface.\n\nIn our usual usage/testing, we&#39;re using either a web browser (which once \nyou &#39;add exception&#39; doesn&#39;t care about the declared hostname/CN in the \nserver&#39;s cert), or &#39;curl&#39; with the &#39;-k&#39; (--insecure) option (which also \ndoesn&#39;t care about any of the cert details, just that any cert is \nprovided). So, we&#39;ve not seen a similar problem before.\n\nIt appears the HttpClient library is insisting that even after a \n(self-signed) cert is locally added -- similar to a browser&#39;s &#39;add \nexception&#39; -- it still must declare the proper destination hostname.\n\nThere might be a way to coax it to be more trusting, but looking at how \nwe did it in Heritrix for its outbound HTTPS requests -- see \nConfigurableX509TrustManager and HeritrixSSLProtocolSocketFactory -- it \nlooks a bit involved. (I suspect some other Java HTTP library is better \nfor such casual untrusted use, but can&#39;t recommend any particular one \noffhand.)\n\nBut, it looks like in the future we can give our ad-hoc self-signed \ncertificate better &#39;CN&#39; or &#39;SAN&#39; values so that connects to &#39;localhost&#39; \nmay succeed. So we&#39;ll investigate that.\n\nIn the meantime, I think you can get the same effect by replacing the \ncert we auto-created with one that will work better for your purposes.\n\nMore specifically:\n\n(1) Go to the directory where the auto-generated &#39;adhoc.keystore&#39; exists \nand delete it.\n\n(2) Make sure the &#39;keytool&#39; from your JDK is findable on your path\n\n(3) Run:\n\n% keytool -keystore adhoc.keystore -storepass password -keypass password \n-alias adhoc -genky -keyalg &quot;RSA&quot; -dname &quot;CN=localhost&quot;\n\n(4) Relaunch Heritrix; it will now use this cert instead.\n\n(5) Follow the same instructions on that Groovy page to save the cert \nvia the browser, install in a client keystore, and use in your code.\n\nNow, the expected &#39;localhost&#39; value should appear (instead of our \nprevious placeholder CN value, &#39;heritrix ad-hoc https certificate&#39;) -- \nand I don&#39;t think you&#39;ll get the same error.\n\nPlease let me know if this works.\n\nRegarding your other question about best practices and docs for the H3 \nweb-remote REST interface, see:\n\nhttps://webarchive.jira.com/wiki/display/Heritrix/Heritrix+3.0+API+Guide\n\nIt&#39;s quite easy to use from the command-line via something like &#39;curl&#39;. \nJMX is gone from H3.\n\nHope this helps,\n\n- Gordon @ IA\n\nOn 10/27/10 1:01 AM, Adam Brokeš wrote:\n&gt;\n&gt;\n&gt; Hallo,\n&gt;\n&gt; I am trying to use REST connection to heritrix 3 engine in my\n&gt; groovy/grails application and I have encounter strange problem which I\n&gt; am not sure how to solve.\n&gt;\n&gt; In the application the REST Client plugin is installed, which is nothing\n&gt; else than HTTPBuilder class wrapper. Used without any modification it\n&gt; throw Untrusted certificate exception.\n&gt; After reading documentation on\n&gt; http://groovy.codehaus.org/modules/http-builder/doc/ssl.html I figure\n&gt; out that I need manually add heritrix certificate to keystore. I have:\n&gt;\n&gt;    1. exported certificate (chrome, firefox)\n&gt;    2. added certificate to trustore with java keytool\n&gt;    3. copied trustore file to my application directory\n&gt;    4. inserted this code to application:\n&gt;\n&gt; withRest(uri: &quot;https://localhost:8443/engine&quot;) {\n&gt;             def keyStore = KeyStore.getInstance(KeyStore.defaultType)\n&gt;\n&gt;             getClass().getResource(&quot;/truststore.jks&quot;).withInputStream {\n&gt;                 keyStore.load(it, &quot;password&quot;.toCharArray())\n&gt;             }\n&gt;\n&gt;             client.connectionManager.schemeRegistry.register(\n&gt;                     new Scheme(&quot;https&quot;, new SSLSocketFactory(keyStore),\n&gt; 443))\n&gt;             [rest: client]\n&gt;             auth.basic &quot;admin&quot;, &quot;admin&quot;\n&gt;             def response = post(createpath: &quot;restJob&quot;, action: &quot;create&quot;)\n&gt; }\n&gt;\n&gt; after execution this I always get this exception:\n&gt;\n&gt; javax.net.ssl.SSLException: hostname in certificate didn&#39;t match:\n&gt; &lt;localhost&gt; != &lt;heritrix ad-hoc https certificate&gt;\n&gt;\n&gt; I tried few other combinations:\n&gt;\n&gt;     * install heritrix on other host than localhost\n&gt;     * give heritrix3 -s parameter at start to use other than default\n&gt;       keystore, password\n&gt;\n&gt;\n&gt; Nothing helped me and honestly I am not big expert in certificates, so I\n&gt; run out of ideas and time earmarked for that.\n&gt;\n&gt; What is best practice to use REST from my application?\n&gt;\n&gt; And aside all of that, I will probably need more tight integration of\n&gt; Heritrix3 with my groovy app (it will be basically simpler\n&gt; NetarchiveSuite), I am going to discuss that in other mail, just to get\n&gt; the right direction: is there any documentation on that? I need to do\n&gt; basic crawler stuff, like starting jobs, monitoring jobs and getting\n&gt; information about finished jobs. I like the script console idea, could I\n&gt; communicate with that console from outside? In heritrix 1, the JMX is\n&gt; used extensively, is there still need for that in H3? Well, there are so\n&gt; many possibilities to explore, but I will be delighted if someone with\n&gt; deep knowledge will point the direction.\n&gt;\n&gt; Thank you very much and have nice day.\n&gt;\n&gt; Best regards,\n&gt;\n&gt; Adam Brokes\n&gt; --\n&gt; Adam Brokeš\n&gt; http://www.brokes.net\n&gt; adam.brokes@... &lt;mailto:adam.brokes@...&gt;\n&gt; 42799740\n&gt;\n&gt;\n&gt;\n&gt; \n\n"}}