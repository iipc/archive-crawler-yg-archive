{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":168599281,"authorName":"Michael Stack","from":"Michael Stack &lt;stack@...&gt;","profile":"stackarchiveorg","replyTo":"LIST","senderId":"h-Swr5Pw9QqYuV793th5oc1osZWB_erSeNGfpev71sYQsFPus9QpeQLLSifcZF8UScKjTalFETTZqZAfaikcxcJvcSv5ARpW","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] referer header","postDate":"1107301232","msgId":1457,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQyMDAxMzcwLjkwOTAxMDRAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PDYuMS4yLjAuMC4yMDA1MDEzMDEwNDUzMy4wNDlkZGVjMEAyMDYuMTYzLjEwMy40Pg==","referencesHeader":"PDYuMS4yLjAuMC4yMDA1MDEzMDEwNDUzMy4wNDlkZGVjMEAyMDYuMTYzLjEwMy40Pg=="},"prevInTopic":1451,"nextInTopic":1459,"prevInTime":1456,"nextInTime":1458,"topicId":1451,"numMessagesInTopic":3,"msgSnippet":"... Would be great if you could confirm that you are indeed getting better results. ... Can you cite the section in rfc2616 where it says this please Dave (I ","rawEmail":"Return-Path: &lt;stack@...&gt;\r\nX-Sender: stack@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 39235 invoked from network); 1 Feb 2005 17:42:01 -0000\r\nReceived: from unknown (66.218.66.218)\n  by m23.grp.scd.yahoo.com with QMQP; 1 Feb 2005 17:42:01 -0000\r\nReceived: from unknown (HELO dns.duboce.net) (63.203.238.114)\n  by mta3.grp.scd.yahoo.com with SMTP; 1 Feb 2005 17:42:01 -0000\r\nReceived: from [192.168.1.125] ([192.168.1.125])\n\t(authenticated)\n\tby dns-eth1.duboce.net (8.10.2/8.10.2) with ESMTP id j11GpeE13086\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Tue, 1 Feb 2005 08:51:41 -0800\r\nMessage-ID: &lt;42001370.9090104@...&gt;\r\nDate: Wed, 02 Feb 2005 00:40:32 +0100\r\nUser-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.5) Gecko/20050105 Debian/1.7.5-1\r\nX-Accept-Language: us, en\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;6.1.2.0.0.20050130104533.049ddec0@206.163.103.4&gt;\r\nIn-Reply-To: &lt;6.1.2.0.0.20050130104533.049ddec0@206.163.103.4&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Remote-IP: 63.203.238.114\r\nFrom: Michael Stack &lt;stack@...&gt;\r\nSubject: Re: [archive-crawler] referer header\r\nX-Yahoo-Group-Post: member; u=168599281\r\nX-Yahoo-Profile: stackarchiveorg\r\n\r\nDave Skinner wrote:\n\n&gt; I&#39;ve noticed I&#39;m getting different (and I hope better) crawl results \n&gt; since\n&gt; I put the following code into FetchHTTP.java\n\nWould be great if you could confirm that you are indeed getting better \nresults.\n\n&gt;\n&gt;          method.setRequestHeader(&quot;User-Agent&quot;, userAgent);\n&gt;          method.setRequestHeader(&quot;From&quot;, order.getFrom(curi));\n&gt; /////////////////dave skinner\n&gt;          // rfc 2616 says no referer header if referer is https and \n&gt; the url\n&gt; is not\n\nCan you cite the section in rfc2616 where it says this please Dave (I \nwas unable to find where it said this).\n\n&gt;          String via = curi.flattenVia() ;\n&gt;          if ( ! via.equals(&quot;&quot;) && via.startsWith(&quot;http:&quot;) )\n&gt;              method.setRequestHeader(&quot;Referer&quot;, via) ;b\n\n&gt; /////////////////end dave skinner\n&gt;          // Set retry handler.\n&gt;          method.getParams().setParameter(HttpMethodParams.RETRY_HANDLER,\n&gt;              new HeritrixHttpMethodRetryHandler());\n&gt;\n&gt; This is working find for me but I&#39;m sure someone can supply a case \n&gt; where it\n&gt; should not be done*sigh*.  So I suppose it should possibly be wrapped \n&gt; with\n&gt; a parameter check.\n\n\n&gt;\n&gt; However, maybe instead of a parameter check what should be done is to \n&gt; check\n&gt; that there is no referer or referrer header in ATTR_ACCEPT_HEADERS.  If\n&gt; there is, suppress the automatic one, otherwise always output it.\n&gt;\n&gt; I&#39;d be happy to code either (or both) of the above modifications and \n&gt; test them.\n\nBeing able to supply the &#39;referer&#39; [sic] header makes sense to me.   A \nquick googling has it that spiders don&#39;t often supply this header -- or \nif they do, its often with malicious intent to fill logs with spammed \nlinks -- but a referer is also useful to remote servers/administrators \nwhere the crawler is tripping over bad links.\n\nA patch that disabled this feature by default but that allowed you to \nturn it on using an expert setting would be much appreciated. Unless for \nsure you can confirm adding Referer gets you better crawl results, lets \nleave it off by default till we can build a case that on should be the \ndefault.  I don&#39;t think you need worry about clashing with \nATTR_ACCEPT_HEADER content. If operator wants to add a Referer header to \nthe ATTR_ACCEPT_HEADER list, they can disable the automatic adding of \nreferer feature.\n\nThanks Dave.\n(Here&#39;s an issue to cover the work: \nhttps://sourceforge.net/tracker/?group_id=73833&atid=539102&func=detail&aid=1114133).\nSt.Ack\n\n&gt;\n&gt;\n&gt; ------------------------------------------------------------------------\n&gt; *Yahoo! Groups Links*\n&gt;\n&gt;     * To visit your group on the web, go to:\n&gt;       http://groups.yahoo.com/group/archive-crawler/\n&gt;        \n&gt;     * To unsubscribe from this group, send an email to:\n&gt;       archive-crawler-unsubscribe@yahoogroups.com\n&gt;       &lt;mailto:archive-crawler-unsubscribe@yahoogroups.com?subject=Unsubscribe&gt;\n&gt;        \n&gt;     * Your use of Yahoo! Groups is subject to the Yahoo! Terms of\n&gt;       Service &lt;http://docs.yahoo.com/info/terms/&gt;.\n&gt;\n&gt;\n\n\n"}}