{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":361563137,"authorName":"goblin_cz","from":"&quot;goblin_cz&quot; &lt;adam.brokes@...&gt;","profile":"goblin_cz","replyTo":"LIST","senderId":"xdiNL7eavH6t8iTdyFPnJqQW6Evz34zLBBs6awf_XbdlAuhy9Ue4zxcQadsvlHiyHR3-ZJ7LOeGESbtvg_8bkZyVT8y_iQCocRQ","spamInfo":{"isSpam":false,"reason":"6"},"subject":"74 millions docs - Out Of Memory","postDate":"1228344539","msgId":5593,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PGdoNzJjcis4M3U3QGVHcm91cHMuY29tPg=="},"prevInTopic":0,"nextInTopic":5594,"prevInTime":5592,"nextInTime":5594,"topicId":5593,"numMessagesInTopic":3,"msgSnippet":"Hi, the Czech crawl again :) . I started with default profile and set some specific rules (100MB limit etc.) and run the crawl again. You can find the","rawEmail":"Return-Path: &lt;adam.brokes@...&gt;\r\nX-Sender: adam.brokes@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 51624 invoked from network); 3 Dec 2008 22:48:59 -0000\r\nX-Received: from unknown (66.218.67.94)\n  by m55.grp.scd.yahoo.com with QMQP; 3 Dec 2008 22:48:59 -0000\r\nX-Received: from unknown (HELO n18c.bullet.sp1.yahoo.com) (69.147.64.129)\n  by mta15.grp.scd.yahoo.com with SMTP; 3 Dec 2008 22:48:59 -0000\r\nX-Received: from [69.147.65.151] by n18.bullet.sp1.yahoo.com with NNFMP; 03 Dec 2008 22:48:59 -0000\r\nX-Received: from [66.218.66.90] by t5.bullet.mail.sp1.yahoo.com with NNFMP; 03 Dec 2008 22:48:59 -0000\r\nDate: Wed, 03 Dec 2008 22:48:59 -0000\r\nTo: archive-crawler@yahoogroups.com\r\nMessage-ID: &lt;gh72cr+83u7@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: &quot;goblin_cz&quot; &lt;adam.brokes@...&gt;\r\nSubject: 74 millions docs - Out Of Memory\r\nX-Yahoo-Group-Post: member; u=361563137; y=pbar3cBWhi8Lx44_Lt6RhoWsCru18-lGPY9VgpwY3S9rowgf\r\nX-Yahoo-Profile: goblin_cz\r\n\r\nHi,\n\nthe Czech crawl again :) . I started with default profile and set some=\r\n\nspecific rules (100MB limit etc.) and run the crawl again. You can\nfind th=\r\ne order.xml here:\n\nhttp://raptor.webarchiv.cz/heritrix/order.xml\n\nTech spec=\r\n:\nHeritrix 1.14.2\n8 core Xeon\n8GB RAM\n64bit sun java\n3GB java heap\nDebian 4=\r\n.1\n\nEverything goes without any serious trouble. The only exception that\nwa=\r\ns thrown was:\n\njava.lang.IllegalArgumentException: Size exceeds Integer.MAX=\r\n_VALUE\nStacktrace: java.lang.IllegalArgumentException: Size exceeds\nInteger=\r\n.MAX_VALUE\n\tat sun.nio.ch.FileChannelImpl.map(FileChannelImpl.java:707)\n\tat=\r\n\norg.archive.io.GenericReplayCharSequence.getReadOnlyMemoryMappedBuffer(Gen=\r\nericReplayCharSequence.java:277)\n\tat\norg.archive.io.GenericReplayCharSequen=\r\nce.decodeToFile(GenericReplayCharSequence.java:219)\n\tat\norg.archive.io.Gene=\r\nricReplayCharSequence.(GenericReplayCharSequence.java:164)\n\tat\norg.archive.=\r\nio.RecordingOutputStream.getReplayCharSequence(RecordingOutputStream.java:5=\r\n59)\n\tat\norg.archive.io.RecordingOutputStream.getReplayCharSequence(Recordin=\r\ngOutputStream.java:515)\n\tat\norg.archive.io.RecordingInputStream.getReplayCh=\r\narSequence(RecordingInputStream.java:314)\n\tat\norg.archive.util.HttpRecorder=\r\n.getReplayCharSequence(HttpRecorder.java:295)\n\tat\norg.archive.crawler.extra=\r\nctor.ExtractorHTML.extract(ExtractorHTML.java:540)\n\tat\norg.archive.crawler.=\r\nextractor.Extractor.innerProcess(Extractor.java:67)\n\tat org.archive.crawler=\r\n.framework.Processor.process(Processor.java:112)\n\tat\norg.archive.crawler.fr=\r\namework.ToeThread.processCrawlUri(ToeThread.java:302)\n\tat org.archive.crawl=\r\ner.framework.ToeThread.run(ToeThread.java:151)\n\nThis happened on few pages =\r\n=96 for example\nhttp://dermoporadkyne.cz/poradenstvi.pdf and I guess it is =\r\ncaused by\nnever ending scripts.\n\nAfter six days of crawling (I had 74 milli=\r\nons of documents and 4 TB of\ndata) happened something much more serious. He=\r\nritrix threw about 150\nexceptions and paused itself.\nAll exceptions look li=\r\nke this:\nSerious error occured trying to process &#39;CrawlURI\nhttp://www.sperk=\r\ny.vltava.cz/produkt-sperky.esp?product-id=3D860134354&seo-hint:product-name=\r\n=3DZlat%C4%82%CB%9D%20prsten%20Danfil%20DF1565&category-id=3D17543\nLLL\nhttp=\r\n://www.sperky.vltava.cz/DANFIL/vyrobce=3D1001130574/?category-id=3D16706\nin=\r\n Scheduler&#39;\n[ToeThread #132:\nhttp://www.sperky.vltava.cz/produkt-sperky.esp=\r\n?product-id=3D860134354&seo-hint:product-name=3DZlat%C4%82%CB%9D%20prsten%2=\r\n0Danfil%20DF1565&category-id=3D17543\n CrawlURI\nhttp://www.sperky.vltava.cz/=\r\nprodukt-sperky.esp?product-id=3D860134354&seo-hint:product-name=3DZlat%C4%8=\r\n2%CB%9D%20prsten%20Danfil%20DF1565&category-id=3D17543\nLLL\nhttp://www.sperk=\r\ny.vltava.cz/DANFIL/vyrobce=3D1001130574/?category-id=3D16706\n   0 attempts\n=\r\n    in processor: Scheduler\n    ACTIVE for 1h44m26s863ms\n    step: ABOUT_TO=\r\n_BEGIN_PROCESSOR for 1h44m5s663ms\n    java.lang.Thread.getStackTrace(Thread=\r\n.java:1436)\n    org.archive.crawler.framework.ToeThread.reportTo(ToeThread.=\r\njava:514)\n    org.archive.crawler.framework.ToeThread.reportTo(ToeThread.ja=\r\nva:592)\n    org.archive.util.DevUtils.extraInfo(DevUtils.java:65)\n   \norg.a=\r\nrchive.crawler.framework.ToeThread.seriousError(ToeThread.java:230)\n   \norg=\r\n.archive.crawler.framework.ToeThread.processCrawlUri(ToeThread.java:325)\n  =\r\n  org.archive.crawler.framework.ToeThread.run(ToeThread.java:151)\n]\n       =\r\n    timestamp  discovered      queued   downloaded      \ndoc/s(avg)  KB/s(a=\r\nvg)   dl-failures   busy-thread   mem-use-KB \nheap-size-KB   congestion   m=\r\nax-depth   avg-depth\n2008-11-30T19:49:37Z   226231290   147999609     74002=\r\n484        \n0(121.9)    0(6828)        293362           197      2339025   =\r\n   \n2831488     7,213.49      320897         104\n (in thread &#39;ToeThread #13=\r\n2:\nhttp://www.sperky.vltava.cz/produkt-sperky.esp?product-id=3D860134354&se=\r\no-hint:product-name=3DZlat%C4%82%CB%9D%20prsten%20Danfil%20DF1565&category-=\r\nid=3D17543&#39;;\nin processor &#39;Scheduler&#39;)\n\njava.lang.OutOfMemoryError: Java he=\r\nap space\nStacktrace: java.lang.OutOfMemoryError: Java heap space\n\tat java.l=\r\nang.Class.getDeclaredFields0(Native Method)\n\tat java.lang.Class.privateGetD=\r\neclaredFields(Class.java:2291)\n\tat java.lang.Class.getDeclaredField(Class.j=\r\nava:1880)\n\tat java.io.ObjectStreamClass.getDeclaredSUID(ObjectStreamClass.j=\r\nava:1610)\n\tat java.io.ObjectStreamClass.access$700(ObjectStreamClass.java:5=\r\n2)\n\tat java.io.ObjectStreamClass$2.run(ObjectStreamClass.java:425)\n\tat java=\r\n.security.AccessController.doPrivileged(Native Method)\n\tat java.io.ObjectSt=\r\nreamClass.(ObjectStreamClass.java:413)\n\tat java.io.ObjectStreamClass.lookup=\r\n(ObjectStreamClass.java:310)\n\tat java.io.ObjectOutputStream.writeObject0(Ob=\r\njectOutputStream.java:1106)\n\tat\njava.io.ObjectOutputStream.defaultWriteFiel=\r\nds(ObjectOutputStream.java:1509)\n\tat\njava.io.ObjectOutputStream.writeSerial=\r\nData(ObjectOutputStream.java:1474)\n\tat\njava.io.ObjectOutputStream.writeOrdi=\r\nnaryObject(ObjectOutputStream.java:1392)\n\tat java.io.ObjectOutputStream.wri=\r\nteObject0(ObjectOutputStream.java:1150)\n\tat java.io.ObjectOutputStream.writ=\r\neObject(ObjectOutputStream.java:326)\n\tat\ncom.sleepycat.bind.serial.SerialBi=\r\nnding.objectToEntry(SerialBinding.java:171)\n\tat com.sleepycat.collections.D=\r\nataView.useValue(DataView.java:548)\n\tat com.sleepycat.collections.DataCurso=\r\nr.initForPut(DataCursor.java:824)\n\tat com.sleepycat.collections.DataCursor.=\r\nput(DataCursor.java:758)\n\tat\ncom.sleepycat.collections.StoredContainer.putK=\r\neyValue(StoredContainer.java:319)\n\tat com.sleepycat.collections.StoredMap.p=\r\nut(StoredMap.java:257)\n\tat org.archive.util.CachedBdbMap.expungeStaleEntry(=\r\nCachedBdbMap.java:562)\n\tat\norg.archive.util.CachedBdbMap.expungeStaleEntrie=\r\ns(CachedBdbMap.java:533)\n\tat org.archive.util.CachedBdbMap.get(CachedBdbMap=\r\n.java:358)\n\tat\norg.archive.crawler.datamodel.ServerCache.getHostFor(ServerC=\r\nache.java:146)\n\tat\norg.archive.crawler.datamodel.ServerCache.getHostFor(Ser=\r\nverCache.java:175)\n\tat\norg.archive.crawler.framework.WriterPoolProcessor.ge=\r\ntHostAddress(WriterPoolProcessor.java:344)\n\tat\norg.archive.crawler.writer.A=\r\nRCWriterProcessor.innerProcess(ARCWriterProcessor.java:132)\n\tat org.archive=\r\n.crawler.framework.Processor.process(Processor.java:112)\n\tat\norg.archive.cr=\r\nawler.framework.ToeThread.processCrawlUri(ToeThread.java:302)\n\tat org.archi=\r\nve.crawler.framework.ToeThread.run(ToeThread.java:151)\n\nWhen I resume the c=\r\nrawl, only new exceptions are thrown and the crawl\nis getting back to the p=\r\naused state.\nI&#39;ve searched and browsed this mailing list and there are a lo=\r\nt of\ntopics about OOM, but I am not 100% sure, which one can be exactly the=\r\n\nsame situation and actual.\n\nCan I modify the crawl to be able resume it? \n=\r\nIf not, how to crawl it again without storing already downloaded data?\n(che=\r\nckpoint and recovery?)\nWhat can I do to avoid this situation?\n\nThank you,\n\n=\r\nBest regards\n\nAdam\n\n\n\n"}}