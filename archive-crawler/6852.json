{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":140025715,"authorName":"progre55","from":"&quot;progre55&quot; &lt;ikromchik@...&gt;","profile":"progre55","replyTo":"LIST","senderId":"NHvvlEqC_kDhtjdNQq6TPsNxCTBSL9KHJJDW3ykijRxhQOIfZkZ7IeceP3uUdS1SvP-_G3I6MPnx6rnEAhCExgo4VqiCSd0","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: Custom SeedModule (database)","postDate":"1291339743","msgId":6852,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PGlkOWg0dis4Y2p0QGVHcm91cHMuY29tPg==","inReplyToHeader":"PDRDRjgyQTdCLjkwNjA2MDlAYXJjaGl2ZS5vcmc+"},"prevInTopic":6851,"nextInTopic":0,"prevInTime":6851,"nextInTime":6853,"topicId":6846,"numMessagesInTopic":3,"msgSnippet":"Hi Gordon, Thanks a lot for the reply. Great hint! I guess I ll write a custom Action script, smth like ActionDatabase, that will poll a given database table","rawEmail":"Return-Path: &lt;ikromchik@...&gt;\r\nX-Sender: ikromchik@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 60479 invoked from network); 3 Dec 2010 01:29:03 -0000\r\nX-Received: from unknown (98.137.34.45)\n  by m6.grp.sp2.yahoo.com with QMQP; 3 Dec 2010 01:29:03 -0000\r\nX-Received: from unknown (HELO n43d.bullet.mail.sp1.yahoo.com) (66.163.169.157)\n  by mta2.grp.sp2.yahoo.com with SMTP; 3 Dec 2010 01:29:03 -0000\r\nX-Received: from [69.147.65.148] by n43.bullet.mail.sp1.yahoo.com with NNFMP; 03 Dec 2010 01:29:03 -0000\r\nX-Received: from [98.137.34.72] by t11.bullet.mail.sp1.yahoo.com with NNFMP; 03 Dec 2010 01:29:03 -0000\r\nDate: Fri, 03 Dec 2010 01:29:03 -0000\r\nTo: archive-crawler@yahoogroups.com\r\nMessage-ID: &lt;id9h4v+8cjt@...&gt;\r\nIn-Reply-To: &lt;4CF82A7B.9060609@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: &quot;progre55&quot; &lt;ikromchik@...&gt;\r\nSubject: Re: Custom SeedModule (database)\r\nX-Yahoo-Group-Post: member; u=140025715; y=7Yi6Eq0y9lAQ_m0TXdcxFNQqBoaZmcShJw__ikDW8o1RYb3-\r\nX-Yahoo-Profile: progre55\r\n\r\nHi Gordon,\n\nThanks a lot for the reply.\nGreat hint! I guess I&#39;ll write a cu=\r\nstom Action script, smth like ActionDatabase, that will poll a given databa=\r\nse table in a given time interval.\n\nThanks so much, appreciate!\n\n--- In arc=\r\nhive-crawler@yahoogroups.com, Gordon Mohr &lt;gojomo@...&gt; wrote:\n&gt;\n&gt; On 12/2/1=\r\n0 5:28 AM, progre55 wrote:\n&gt; &gt; Hi guys.\n&gt; &gt;\n&gt; &gt; Using heritrix 3.1.1. I wan=\r\nt heritrix to fetch the seeds from a\n&gt; &gt; database table, and have implement=\r\ned a custom SeedModule that does\n&gt; &gt; it, and replaced the TextSeedModule wi=\r\nth the custom module. A couple\n&gt; &gt; of questions though. First off, I havent=\r\n really scrutinized the\n&gt; &gt; heritrix source/documentation, but as I got it =\r\nfrom the logs, the\n&gt; &gt; SeedModule has been addressed just once, in the begi=\r\nnning of a crawl,\n&gt; &gt; saying announceSeeds(). Is it possible to somehow man=\r\nually call the\n&gt; &gt; announceSeeds() method? It would even be better if I cou=\r\nld call it in\n&gt; &gt; a given interval, to see if there are new seeds in the da=\r\ntabase.\n&gt; &gt; Secondly, when a job is first run, if no seeds are available in=\r\n the\n&gt; &gt; database, the job finishes (or pauses before finishing) right away=\r\n.\n&gt; &gt; Any suggestions on how I could pause the job and from time to time\n&gt; =\r\n&gt; poll the database to see if new seeds available? Thanks in advance\n&gt; &gt; an=\r\nd highly appreciate any suggestions.\n&gt; \n&gt; We hadn&#39;t considered a SeedModule=\r\n that adds seeds in a automatic \n&gt; continuing fashion, but it shouldn&#39;t be =\r\ntoo hard to achieve that effect, \n&gt; either as part of a custom SeedModule o=\r\nr some other set of \n&gt; configuration/scripts/classes.\n&gt; \n&gt; Take a look firs=\r\nt at the ActionDirectory mechanism:\n&gt; \n&gt; https://webarchive.jira.com/wiki/d=\r\nisplay/Heritrix/Action+Directory\n&gt; \n&gt; Note that you can drop a &quot;[name-of-yo=\r\nur-choice].seeds&quot; file into the \n&gt; &#39;action&#39; directory of a crawl, and short=\r\nly thereafter the crawl will \n&gt; notice that new file, scan it as if it were=\r\n a seeds-source at the \n&gt; crawl&#39;s start, enqueueing any new URIs as appropr=\r\niate.\n&gt; \n&gt; So you could certainly have a separate process, in a language of=\r\n your \n&gt; choosing, polling your database and occasionally dropping new seed=\r\ns into \n&gt; the crawl via that mechanism. (And, via the other options with \n&gt;=\r\n properly-formatted files -- &#39;.schedule&#39;, &#39;.include&#39;, &#39;.force&#39; etc. -- \n&gt; h=\r\nave other effects on the internal lists of discovered/queued URIs.)\n&gt; \n&gt; If=\r\n you wanted or needed this process to be done inside the JVM, the \n&gt; Action=\r\nDirectory class/bean would be a good model to study for how new \n&gt; features=\r\n can be loosely-coupled with the existing crawl components. \n&gt; Simply by be=\r\ning optionally declared inside the configuration, the \n&gt; ActionDirectory be=\r\nan can receive references to the other crawl \n&gt; components of interest to i=\r\nt, and start its own polling cycle, and then \n&gt; mutate the crawl when circu=\r\nmstances warrant.\n&gt; \n&gt; (You could make a custom SeedModule that did this po=\r\nll-and-enqueue \n&gt; cycle, in addition to its special role at startup, but it=\r\n&#39;d be just as \n&gt; easy and perhaps cleaner to have it as a separate componen=\r\nt not doing \n&gt; double-duty.)\n&gt; \n&gt; - Gordon @ IA\n&gt;\n\n\n\n"}}