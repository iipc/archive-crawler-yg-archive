{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":325624130,"authorName":"Noah Levitt","from":"Noah Levitt &lt;nlevitt@...&gt;","profile":"nlevitt","replyTo":"LIST","senderId":"mjPYHSqY6zru8xFQDUDprGMzseQyrAZ9k-CBtILo5K1tsDZNeObNpKXt3DnxBt-Jl7YZ5xRSaqVO0qB4Du7k6Ue37w4tCcXT","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] Allowing for parallel requests per host","postDate":"1453148166","msgId":8788,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PENBQS16NzArQzNxVEM4aGZQVEE2Slo3LXBWUVVGcXE1QVdNdFp3SG93N3NZZ3VUZWJzQUBtYWlsLmdtYWlsLmNvbT4=","inReplyToHeader":"PDE0MjEzNDczODI3OTguZDU1ZWQ5OGVATm9kZW1haWxlcj4=","referencesHeader":"PDE0MjEzNDczODI3OTguZDU1ZWQ5OGVATm9kZW1haWxlcj4="},"prevInTopic":8787,"nextInTopic":8789,"prevInTime":8787,"nextInTime":8789,"topicId":8655,"numMessagesInTopic":4,"msgSnippet":"Hello Tom, I tried using parallelQueues just now, and it works for me. To fully convince myself that it was working, I ran a crawl with 1 seed, removed the","rawEmail":"Return-Path: &lt;nlevitt@...&gt;\r\nX-Sender: nlevitt@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 13098 invoked by uid 102); 18 Jan 2016 20:16:10 -0000\r\nX-Received: from unknown (HELO mtaq4.grp.bf1.yahoo.com) (10.193.84.143)\n  by m2.grp.bf1.yahoo.com with SMTP; 18 Jan 2016 20:16:10 -0000\r\nX-Received: (qmail 30537 invoked from network); 18 Jan 2016 20:16:10 -0000\r\nX-Received: from unknown (HELO mta1004.groups.mail.ne1.yahoo.com) (98.138.100.119)\n  by mtaq4.grp.bf1.yahoo.com with SMTP; 18 Jan 2016 20:16:10 -0000\r\nX-Original-Return-Path: &lt;nlevitt@...&gt;\r\nX-Received-SPF: pass (domain of archive.org designates 207.241.224.6 as permitted sender)\r\nX-YMailISG: tcAa7ScWLDvvNbBz6unsaPUkMeRXXsg8F1N07h.a4tAHfUI1\n rcByFduKM1DjAbCCKRZNuAfCe098qyWuTQ8XCtkmBH3xuNJ7WwhtxaDAM3s8\n HRexCWQiC_gJ8ssJNRrZvGWM70Il0Zms1zJJs97yy2ZOKovfQtSi4dODO_cB\n uqQavMGmAUdDXIlhH9ncQOTNuDgGNybl.qXhcBxd3o5Ntti8W8UTBQUWpQDP\n kgNPvO.rk.79H7OiKxgSDY9c4iKnM9zXOrfb3jglQZPx4VvHqAit.iuHiwE1\n vmo_p.JdO4ROiD99CFni6.cf9szfg0CmFuWZyY_UM2GVd9eVRbs3.vom.FQm\n Me6WxyWwF.Gk9mP1ZxUWN0A0a.8dffHubCPRz9a7muGp9pN4Wtq_m1W32a7a\n N7VaxOFErrG9w5Sp52Cpsz2QHOLnuQm0HGhPTP3nmfCZ65LFOwAa9DcThMlz\n 4IfBAHCVzD8GHV74qqPxnPrwLiUAi7bsehcyzLxWfrVnd_q5_ipuNS_1sL5P\n OJCnHKoE7TGDDw3N_AFPD_pUsNX01oYH6j5rJnaHs6MKpVXyvcayeI8Nd._g\n 8u4TCg3Yechb2nObtvvNFvtPwqiHDlq2sCyp6IjZkZkzuES.pWkoWF3VRsh6\n dJe27R37bb2y.txlfgshGMDVFRXyMum..Ska_76ObvMfL0iVAwDwsWPe5.Ty\n 5XOQm1kjMA2OrieN1iDM_.DR1M0TEPygtDR2Inw0I3enb7ffQgqTfHwBCq_T\n t1ge3EVLCcbmyv_tv9fw.1H8f1Y9CIM6lW0PV9vxxISl.qxWBRrCRJTVHmPS\n vIBEm_7ujIQIxzTaBewxHM6_C6uf76B2mbmdjcK_Lh3RhRcxJxU2XE1Rwavy\n HyvXuWAV2.CCaKh3q3JvC9GwfThZs4uaPRc0PST.H7Juor2WCO_L6bl1zWO3\n s91PPRXE3kFSYRLM5bWMxpmlncRSBJ8Z8gHArdmhAA6BS96pQA4OMiXPoOYu\n DMr9kj9ee742AYAso1nmc7Wy61qZEIcb4B2m8M2Cu.Ag8FDTGA2NL2ifY118\n XYok8r65uOSXtgST0D2jyFZIuLkLvoZDqLS_hC2bEvbgbqUYScFJOgyR97T_\n LWWaTgxlxSPg20tIY5zzThpG6.emT7rmq3XsqVsHUYc3SyMEEBkoyM3AZsem\n COXkT.PcdWQ_E5t.qlCFb5Ntpfzad7_exVH1PlW5KvdBYhDo.MDykrpCfYT0\n wmKbl7Bu3RhfGW33Ds7jyytbdG2GRTsDc7z4p1valS6mrn7Khhor7RqMPW8D\n sdQb7nvpxMxYxb.PsmbwyNHHJ6ci.VlKNpYVRx5EB3co4rcZMEAreMvxMCMl\n hBCENAnnOMWQ0cQJd3auFIakPQUEzYYvZ8PzdngTldj93gHBXUridoRTwV5Y\n D5wyx.rbcOtm97tGhiTuUil62iWFYHUCU18BF_dKLxk4mpbnGdHmqkxT1BXF\n ckbnCIvgbmtQKWVX_XeDK7sG0eMILQECcJtDv5cdxIExIwK0YqDI43lfSMgy\n qX2EzAsVFBkUAE_AeZqgk1fBGjcTITstDWtq3.kNP.oknWa89Zj_Ry45\r\nAuthentication-Results: mta1004.groups.mail.ne1.yahoo.com  from=archive.org; domainkeys=neutral (no sig);  from=archive.org; dkim=neutral (no sig)\r\nX-Received: from 127.0.0.1  (EHLO mail.archive.org) (207.241.224.6)\n  by mta1004.groups.mail.ne1.yahoo.com with SMTP; Mon, 18 Jan 2016 20:16:09 +0000\r\nX-Received: from mail.archive.org (localhost [127.0.0.1])\n\tby mail.archive.org (Postfix) with ESMTP id A6E0DD4F1\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Mon, 18 Jan 2016 20:16:08 +0000 (UTC)\r\nX-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on mail.archive.org\r\nX-Spam-Level: \r\nX-Spam-Status: No, score=-1.0 required=5.0 tests=ALL_TRUSTED,SHORTCIRCUIT\n\tautolearn=disabled version=3.4.0\r\nX-Received: from mail-wm0-f45.google.com (mail-wm0-f45.google.com [74.125.82.45])\n\t(using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))\n\t(No client certificate requested)\n\t(Authenticated sender: nlevitt@...)\n\tby mail.archive.org (Postfix) with ESMTPSA id 559D7D4E9\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Mon, 18 Jan 2016 20:16:08 +0000 (UTC)\r\nX-Received: by mail-wm0-f45.google.com with SMTP id n5so80986330wmn.0\n        for &lt;archive-crawler@yahoogroups.com&gt;; Mon, 18 Jan 2016 12:16:08 -0800 (PST)\r\nX-Gm-Message-State: AG10YOSFu9Er4+piXvfD+9ip+Z0mDV/IKML5fpl2kZrSnx8mPTj7NkOxOjPtto7x+CrnyVr/4KPGNs3vzYX6IA==\r\nMIME-Version: 1.0\r\nX-Received: by 10.28.55.76 with SMTP id e73mr15897892wma.53.1453148166553;\n Mon, 18 Jan 2016 12:16:06 -0800 (PST)\r\nX-Received: by 10.28.138.205 with HTTP; Mon, 18 Jan 2016 12:16:06 -0800 (PST)\r\nIn-Reply-To: &lt;1421347382798.d55ed98e@Nodemailer&gt;\r\nReferences: &lt;1421347382798.d55ed98e@Nodemailer&gt;\r\nDate: Mon, 18 Jan 2016 12:16:06 -0800\r\nX-Gmail-Original-Message-ID: &lt;CAA-z70+C3qTC8hfPTA6JZ7-pVQUFqq5AWMtZwHow7sYguTebsA@...&gt;\r\nMessage-ID: &lt;CAA-z70+C3qTC8hfPTA6JZ7-pVQUFqq5AWMtZwHow7sYguTebsA@...&gt;\r\nTo: &quot;archive-crawler@yahoogroups.com&quot; &lt;archive-crawler@yahoogroups.com&gt;\r\nContent-Type: text/plain; charset=UTF-8\r\nContent-Transfer-Encoding: quoted-printable\r\nSubject: Re: [archive-crawler] Allowing for parallel requests per host\r\nX-Yahoo-Group-Post: member; u=325624130; y=Oz3G3fMRw2LhuSDPXDZO8SOy0xe7DbeqovSX0PmBaIfF0w\r\nX-Yahoo-Profile: nlevitt\r\nFrom: Noah Levitt &lt;nlevitt@...&gt;\r\n\r\nHello Tom,\n\nI tried using parallelQueues just now, and it works for me. To =\r\nfully\nconvince myself that it was working, I ran a crawl with 1 seed,\nremov=\r\ned the TransclusionDecideRule, set maxDelayMs to a small value\n(500), and s=\r\net parallelQueues to a large value (100). A few seconds\nafter starting the =\r\ncrawl, I witnessed many busy toe threads crawling\nthe same domain.\n\nIn addi=\r\ntion there&#39;s an obscure implementation detail that might be\ntripping you up=\r\n. It&#39;s mentioned in the javadoc:\n&quot;Base subqueue on first path-segment, if a=\r\nny. (Means unbalanced\nsubqueues, but consistency for most-common case where=\r\n fanout can be at\nfirst segment, and it&#39;s beneficial to keep similar URIs i=\r\nn same\nqueue.)&quot;\nhttp://builds.archive.org/javadoc/heritrix-3.2.0/org/archiv=\r\ne/crawler/frontier/URIAuthorityBasedQueueAssignmentPolicy.html#bucketBasis(=\r\norg.archive.net.UURI)\nPretty sure this means that with parallelQueues enabl=\r\ned, all urls with\nthe same first path segment end up in the same queue. May=\r\nbe all the\nurls discovered from your seed have the same first path segment =\r\nor\nsomething. (I think this behavior ought to at least be configurable,\npul=\r\nl requests welcome...)\n\nNoah\n\n\nOn Thu, Jan 15, 2015 at 10:43 AM, &#39;Tom Arnfe=\r\nld&#39; tom@...\n[archive-crawler] &lt;archive-crawler@yahoogroups.com&gt; wrot=\r\ne:\n&gt;\n&gt;\n&gt; Hi,\n&gt;\n&gt; I&#39;ve been trying to figure out how to enable parallel requ=\r\nests to the same\n&gt; authority in heritrix 3 (currently using the default que=\r\nue mechanism\n&gt; (SURT)).\n&gt;\n&gt; I noticed there&#39;s a parallelQueues parameter to=\r\n the\n&gt; URIAuthorityBasedQueueAssignmentPolicy bean which the\n&gt; SURTAuthorit=\r\nyBasedQueueAssignmentPolicy policy extends from but setting that\n&gt; doesn&#39;t =\r\nseem to make a difference.\n&gt;\n&gt; The max toe threads is way higher than the n=\r\number of parallel queue and only\n&gt; 1 thread seems to be active at any one t=\r\nime.\n&gt;\n&gt; Perhaps I need to look into a different assignment policy, perhaps=\r\n one based\n&gt; on hashing?\n&gt; https://github.com/alard/heritrix-utils/blob/mas=\r\nter/src/org/archiveteam/crawler/frontier/HashingQueueAssignmentPolicy.java\n=\r\n&gt;\n&gt; Any advice would be great!\n&gt;\n&gt; Tom.\n&gt;\n&gt;\n&gt;\n&gt; \n\n"}}