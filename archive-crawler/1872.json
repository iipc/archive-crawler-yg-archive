{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137477665,"authorName":"Igor Ranitovic","from":"Igor Ranitovic &lt;igor@...&gt;","profile":"iranitovic","replyTo":"LIST","senderId":"K10jm5v57fwMXnMyAQbNP63nnkG7fPsaL98ceaeOEHgn1izk538mxv1G467uuhkItudimV9HQj2PdSeNznUhLXverprti8rz","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] Re: very busy IO when running 1.4","postDate":"1116886231","msgId":1872,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQyOTI1NEQ3LjMwMzA0MDVAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGQ2bDVraCtpamdhQGVHcm91cHMuY29tPg==","referencesHeader":"PGQ2bDVraCtpamdhQGVHcm91cHMuY29tPg=="},"prevInTopic":1871,"nextInTopic":0,"prevInTime":1871,"nextInTime":1873,"topicId":1843,"numMessagesInTopic":11,"msgSnippet":"Hi Joe, ... While the boys are taking look at the issue, you can recover the crawl (adjusting memory) in order to reach desired 10 million documents. Take look","rawEmail":"Return-Path: &lt;igor@...&gt;\r\nX-Sender: igor@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 18748 invoked from network); 23 May 2005 22:16:47 -0000\r\nReceived: from unknown (66.218.66.216)\n  by m30.grp.scd.yahoo.com with QMQP; 23 May 2005 22:16:47 -0000\r\nReceived: from unknown (HELO ia00524.archive.org) (207.241.224.172)\n  by mta1.grp.scd.yahoo.com with SMTP; 23 May 2005 22:16:47 -0000\r\nReceived: (qmail 28434 invoked by uid 100); 23 May 2005 22:16:41 -0000\r\nReceived: from pauk.archive.org (HELO ?207.241.238.153?) (igor@...@207.241.238.153)\n  by mail-dev.archive.org with SMTP; 23 May 2005 22:16:41 -0000\r\nMessage-ID: &lt;429254D7.3030405@...&gt;\r\nDate: Mon, 23 May 2005 15:10:31 -0700\r\nUser-Agent: Mozilla Thunderbird 0.7.3 (Windows/20040803)\r\nX-Accept-Language: en-us, en\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;d6l5kh+ijga@...&gt;\r\nIn-Reply-To: &lt;d6l5kh+ijga@...&gt;\r\nContent-Type: text/plain; charset=us-ascii; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-Spam-DCC: : \r\nX-Spam-Checker-Version: SpamAssassin 2.63 (2004-01-11) on ia00524.archive.org\r\nX-Spam-Level: \r\nX-Spam-Status: No, hits=-64.7 required=7.0 tests=AWL,USER_IN_WHITELIST \n\tautolearn=no version=2.63\r\nX-eGroups-Msg-Info: 1:12:0\r\nFrom: Igor Ranitovic &lt;igor@...&gt;\r\nSubject: Re: [archive-crawler] Re: very busy IO when running 1.4\r\nX-Yahoo-Group-Post: member; u=137477665\r\nX-Yahoo-Profile: iranitovic\r\n\r\nHi Joe,\n\n&gt; The goal of this crawl is to collect more than 10 million documents. \n&gt; It is current at 8.5 million mark. I&#39;ll make the memory change next \n&gt; time when we schedule a crawl.\n\nWhile the boys are taking look at the issue, you can recover the crawl (adjusting memory) in order \nto reach desired 10 million documents. Take look at \nhttp://crawler.archive.org/articles/user_manual.html#recover\n\nThe recovery process will take some time, though.\n\nTake care,\ni.\n\n&gt; \n&gt; \n&gt;&gt;Yours,\n&gt;&gt;St.Ack\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;&gt;Thanks,\n&gt;&gt;&gt;\n&gt;&gt;&gt;-joe\n&gt;&gt;&gt;\n&gt;&gt;&gt;--- In archive-crawler@yahoogroups.com, &quot;joehung302&quot; \n&gt; \n&gt; &lt;joe.hung@c...&gt;\n&gt; \n&gt;&gt;&gt;wrote:\n&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;Here is a snapshot of top:\n&gt;&gt;&gt;&gt; 16:22:13  up 56 days,  4:03,  1 user,  load average: 2.79, \n&gt; \n&gt; 2.64,\n&gt; \n&gt;&gt;&gt;&gt;2.49\n&gt;&gt;&gt;&gt;288 processes: 287 sleeping, 1 running, 0 zombie, 0 stopped\n&gt;&gt;&gt;&gt;CPU states:  cpu    user    nice  system    irq  softirq \n&gt;&gt;&gt;\n&gt;&gt;&gt;iowait   \n&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;idle\n&gt;&gt;&gt;&gt;           total    0.0%   13.8%    1.0%   0.2%     0.1%   \n&gt; \n&gt; 48.9%  \n&gt; \n&gt;&gt;&gt;&gt;35.8%\n&gt;&gt;&gt;&gt;           cpu00    0.0%   11.8%    1.0%   0.2%     0.2%   \n&gt; \n&gt; 25.6%  \n&gt; \n&gt;&gt;&gt;&gt;61.1%\n&gt;&gt;&gt;&gt;           cpu01    0.0%   14.2%    1.2%   0.0%     0.0%   \n&gt; \n&gt; 24.8%  \n&gt; \n&gt;&gt;&gt;&gt;59.7%\n&gt;&gt;&gt;&gt;           cpu02    0.0%   12.6%    0.8%   0.2%     0.2%   \n&gt; \n&gt; 74.1%  \n&gt; \n&gt;&gt;&gt;&gt;12.0%\n&gt;&gt;&gt;&gt;           cpu03    0.2%   16.6%    1.0%   0.4%     0.0%   \n&gt; \n&gt; 71.1%  \n&gt; \n&gt;&gt;&gt;&gt;10.6%\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;The machine has 2GB memory and I started heritrix with -\n&gt; \n&gt; Xmx1200m.\n&gt; \n&gt;&gt;&gt;I\n&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;have another program (tomcat) which I started with -Xmx800m. \n&gt; \n&gt; But\n&gt; \n&gt;&gt;&gt;&gt;tomcat is mostly idle.\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;Here is a few lines of vmstat 2:\n&gt;&gt;&gt;&gt;procs                      memory      swap          io    \n&gt;&gt;&gt;&gt;system         cpu\n&gt;&gt;&gt;&gt; r  b   swpd   free   buff  cache   si   so    bi    bo   \n&gt; \n&gt; in    cs\n&gt; \n&gt;&gt;&gt;&gt;us sy wa id\n&gt;&gt;&gt;&gt; 1  2 2096600  17632  35160 662456    0    1     0     1    \n&gt; \n&gt; 0    \n&gt; \n&gt;&gt;&gt;1 \n&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;2  0  1  1\n&gt;&gt;&gt;&gt; 2  2 2096856  17312  35088 664776    0 1286  3552  1286 2254 \n&gt;&gt;&gt;\n&gt;&gt;&gt;2258\n&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;21  2 45 31\n&gt;&gt;&gt;&gt; 1  2 2096712  20756  34980 663256   34 1464  3866  5194 1720 \n&gt;&gt;&gt;\n&gt;&gt;&gt;1657\n&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;42  2 39 17\n&gt;&gt;&gt;&gt; 3  2 2096636  17660  34916 667060   18  580  3824   580 1547 \n&gt;&gt;&gt;\n&gt;&gt;&gt;1740\n&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;29  2 47 22\n&gt;&gt;&gt;&gt; 0  2 2096440  17704  34836 667772  484  940  3586  4286 1149 \n&gt;&gt;&gt;\n&gt;&gt;&gt;1220 \n&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;8  1 51 40\n&gt;&gt;&gt;&gt; 1  2 2096448  17396  34656 670040   80 1334  3996  1334 1653 \n&gt;&gt;&gt;\n&gt;&gt;&gt;1839\n&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;25  2 51 23\n&gt;&gt;&gt;&gt; 0  1 2096456  17612  34772 670804   10 1166  4028  1166 1381 \n&gt;&gt;&gt;\n&gt;&gt;&gt;1367\n&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;23  1 50 26\n&gt;&gt;&gt;&gt; 1  4 2096456  17828  34908 673088    4 1466  3850  2836 2326 \n&gt;&gt;&gt;\n&gt;&gt;&gt;2264\n&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;15  2 57 26\n&gt;&gt;&gt;&gt; 0  2 2096456  17396  35020 675380  212 1466  3852  1466 2321 \n&gt;&gt;&gt;\n&gt;&gt;&gt;2351\n&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;21  1 50 28\n&gt;&gt;&gt;&gt; 2  1 2096460  17504  35120 676540  402 1730  3912  4776 2384 \n&gt;&gt;&gt;\n&gt;&gt;&gt;2875\n&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;17  2 54 27\n&gt;&gt;&gt;&gt; 2  2 2096460  17504  35228 677884  356 1462  2614  3296 1921 \n&gt;&gt;&gt;\n&gt;&gt;&gt;2748\n&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;22  3 57 18\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;Let me try the hold-queues parameter and see how it works.\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;Thanks,\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;-joe\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;--- In archive-crawler@yahoogroups.com, &quot;Gordon Mohr (Internet\n&gt;&gt;&gt;&gt;Archive)&quot; &lt;gojomo@a...&gt; wrote:\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;Memory use (and traffic to disk) is more a function of the\n&gt;&gt;&gt;&gt;&gt;number of hosts/queues that have been discovered or active,\n&gt;&gt;&gt;&gt;&gt;than of the total number of URLs discovered or crawled. So\n&gt;&gt;&gt;&gt;&gt;any &#39;broader&#39; crawls will strain resources more than\n&gt;&gt;&gt;&gt;&gt;&#39;narrower&#39; ones with a smaller or fixed number of hosts\n&gt;&gt;&gt;&gt;&gt;of interest.\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;Your machine may be swapping heavily. Things to check:\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;  - Does &#39;top&#39; show swap in use?\n&gt;&gt;&gt;&gt;&gt;  - How does your configured max heap and current heap size\n&gt;&gt;&gt;&gt;&gt;    compare with RAM? (Max heap should be 25% or more smaller\n&gt;&gt;&gt;&gt;&gt;  - Do the &#39;si&#39; and &#39;so&#39; columns in &#39;vmstat 2&#39;\n&gt;&gt;&gt;&gt;&gt;    (sample every 2 seconds) show activity?\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;Separately from OS virtual memory, the new BDB/soft-reference\n&gt;&gt;&gt;&gt;&gt;mechanism for &#39;paging&#39; per-host/per-queue data out when not \n&gt; \n&gt; in\n&gt; \n&gt;&gt;&gt;&gt;&gt;immediate use could theoretically reach some excessive IO \n&gt; \n&gt; states\n&gt; \n&gt;&gt;&gt;&gt;&gt;in low-memory conditions. This would be more likely if you\n&gt;&gt;&gt;\n&gt;&gt;&gt;weren&#39;t\n&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;using the &#39;hold-queues&#39; setting and were instead round-\n&gt; \n&gt; robinning\n&gt; \n&gt;&gt;&gt;&gt;&gt;among all queues in a big crawl.\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;- Gordon @ IA\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;joehung302 wrote:\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;I started a crawl about a week ago (using 1.4 broad scope \n&gt; \n&gt; and\n&gt; \n&gt;&gt;&gt;&gt;the\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;default BdbFrontier). So far I&#39;ve collected &gt;7 million docs\n&gt;&gt;&gt;\n&gt;&gt;&gt;but\n&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;IO is\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;consistently at &gt;50% using top. Sometimes even higher at \n&gt; \n&gt; 90+%.\n&gt; \n&gt;&gt;&gt;&gt;&gt;&gt;Here is what&#39;s interesting...even if I pause the crawl, IO \n&gt; \n&gt; is\n&gt; \n&gt;&gt;&gt;&gt;still\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;busy. The number never dropped.\n&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;I&#39;m running on a dual Xeon with a direct attached SCSI \n&gt; \n&gt; array,\n&gt; \n&gt;&gt;&gt;&gt;using\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;Sun&#39;s JDK 1.4.2. -Xmx1200.\n&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;I&#39;ve done a 7 million docs crawl using 1.0.4 before on the\n&gt;&gt;&gt;\n&gt;&gt;&gt;same\n&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;hardware (using domainscope though). From what I remember \n&gt; \n&gt; the\n&gt; \n&gt;&gt;&gt;&gt;disk IO\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;was at around 5%.\n&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;Is it becuase of BdbFrontier? Any hints?\n&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;Thanks,\n&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;-joe\n&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;Yahoo! Groups Links\n&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;-----------------------------------------------------------------\n&gt; \n&gt; -------\n&gt; \n&gt;&gt;&gt;*Yahoo! Groups Links*\n&gt;&gt;&gt;\n&gt;&gt;&gt;    * To visit your group on the web, go to:\n&gt;&gt;&gt;      http://groups.yahoo.com/group/archive-crawler/\n&gt;&gt;&gt;       \n&gt;&gt;&gt;    * To unsubscribe from this group, send an email to:\n&gt;&gt;&gt;      archive-crawler-unsubscribe@yahoogroups.com\n&gt;&gt;&gt;      &lt;mailto:archive-crawler-unsubscribe@yahoogroups.com?\n&gt; \n&gt; subject=Unsubscribe&gt;\n&gt; \n&gt;&gt;&gt;       \n&gt;&gt;&gt;    * Your use of Yahoo! Groups is subject to the Yahoo! Terms of\n&gt;&gt;&gt;      Service &lt;http://docs.yahoo.com/info/terms/&gt;.\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt;  \n&gt; Yahoo! Groups Links\n&gt; \n&gt; \n&gt; \n&gt;  \n&gt; \n&gt; \n\n\n"}}