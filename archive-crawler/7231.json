{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":140025715,"authorName":"progre55","from":"&quot;progre55&quot; &lt;ikromchik@...&gt;","profile":"progre55","replyTo":"LIST","senderId":"80RTNy7Pj8dnuA89PIuCJcF84qpUvqdD9Txphmu5mu8XQwOFATHVcZpOOIZOPsj7K4Q1kEU1wEE09ilYQ-8ly2TN1fuCqGM","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: Loading cookies from a file on H3","postDate":"1311773054","msgId":7231,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PGowcDNodiszbjQ2QGVHcm91cHMuY29tPg==","inReplyToHeader":"PDRFMkYxODFELjkwMTAyMDlAYXJjaGl2ZS5vcmc+"},"prevInTopic":7230,"nextInTopic":7232,"prevInTime":7230,"nextInTime":7232,"topicId":7227,"numMessagesInTopic":7,"msgSnippet":"Hi Noah, Thanks for the quick fix! I ve tested loading cookies from a file, and they get sent, and after the job is finished/terminated, they re dumped into a","rawEmail":"Return-Path: &lt;ikromchik@...&gt;\r\nX-Sender: ikromchik@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 14366 invoked from network); 27 Jul 2011 13:24:16 -0000\r\nX-Received: from unknown (66.196.94.106)\n  by m14.grp.re1.yahoo.com with QMQP; 27 Jul 2011 13:24:16 -0000\r\nX-Received: from unknown (HELO ng19-ip1.bullet.mail.ne1.yahoo.com) (98.138.215.111)\n  by mta2.grp.re1.yahoo.com with SMTP; 27 Jul 2011 13:24:16 -0000\r\nX-Received: from [98.138.217.180] by ng19.bullet.mail.ne1.yahoo.com with NNFMP; 27 Jul 2011 13:24:15 -0000\r\nX-Received: from [69.147.65.172] by tg5.bullet.mail.ne1.yahoo.com with NNFMP; 27 Jul 2011 13:24:15 -0000\r\nX-Received: from [98.137.34.32] by t14.bullet.mail.sp1.yahoo.com with NNFMP; 27 Jul 2011 13:24:15 -0000\r\nDate: Wed, 27 Jul 2011 13:24:14 -0000\r\nTo: archive-crawler@yahoogroups.com\r\nMessage-ID: &lt;j0p3hv+3n46@...&gt;\r\nIn-Reply-To: &lt;4E2F181D.9010209@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nFrom: &quot;progre55&quot; &lt;ikromchik@...&gt;\r\nSubject: Re: Loading cookies from a file on H3\r\nX-Yahoo-Group-Post: member; u=140025715; y=LaLBsHYdUglQx4y6g1ezF0T6wpmcMlGgzDzBfpvzaC5_sNQ7\r\nX-Yahoo-Profile: progre55\r\n\r\nHi Noah,\n\nThanks for the quick fix!\nI&#39;ve tested loading cookies from a file=\r\n, and they get sent, and after the job is finished/terminated, they&#39;re dump=\r\ned into a file, too. So I suppose everything works now.\n\nBut now I was more=\r\n interested in setting cookies dynamically, in the code, not using the conf=\r\nig files, as I have integrated heritrix into my application. So I have a cu=\r\nstom SeedModule, which basically reads seeds from a database and schedules =\r\nthem with heritrix. Because the seeds could have active cookies bound to th=\r\nem, I dynamically try to add the cookies into the cookieStore. For that, I =\r\nhave autowired the AbstractCookieStore, and before I add the seed, I put th=\r\ne cookie that comes with it into the store:\ngetCookieStore().getCookiesMap(=\r\n).put(cookie.getSortKey(), cookie);\n\nHowever, it doesn&#39;t get sent and I was=\r\n wondering why..\n\nWould really appreciate any comments and/or suggestions! =\r\nOr at least let me know how I can debug it.\n\nprogre55\n\n--- In archive-crawl=\r\ner@yahoogroups.com, Noah Levitt &lt;nlevitt@...&gt; wrote:\n&gt;\n&gt; Hello progre55,\n&gt; =\r\n\n&gt; Thanks for reporting this issue. It should be fixed now, along with rela=\r\nted problems. It would appear that the cookie loading/saving functionality =\r\nhad never even been tried. :( https://webarchive.jira.com/browse/HER-1914\n&gt;=\r\n \n&gt; Also while looking at this issue it became apparent that cookies were n=\r\not being sent at all, in both h1 and h3, since a commit in February. That s=\r\nhould be fixed now as well in svn. https://webarchive.jira.com/browse/HER-1=\r\n913\n&gt; \n&gt; You&#39;ll want to get the latest code from svn (or the latest snapsho=\r\nt from the build box). If you can confirm that cookie handling works as exp=\r\nected after these changes, that would be very helpful.\n&gt; \n&gt; Noah\n&gt; \n&gt; \n&gt; On=\r\n 2011-07-26 05:22 , progre55 wrote:\n&gt; &gt; Hi guys,\n&gt; &gt;\n&gt; &gt; I&#39;ve been playing =\r\naround with H3, and noticed that loading cookies from a file doesn&#39;t really=\r\n work. When tried analyzing the code, I found out that the loadCookies() me=\r\nthod reads the file, but doesn&#39;t store the cookies read. Here is the method=\r\n in original form, and as you can see, Cookie objects are created, but not =\r\nput into the SortedMap:\n&gt; &gt;\n&gt; &gt;      public static void loadCookies(String =\r\ncookiesFile,\n&gt; &gt;              SortedMap&lt;String,Cookie&gt;  result) {\n&gt; &gt;\n&gt; &gt;  =\r\n        // Do nothing if cookiesFile is not specified.\n&gt; &gt;          if (coo=\r\nkiesFile =3D=3D null || cookiesFile.length()&lt;=3D 0) {\n&gt; &gt;              retu=\r\nrn;\n&gt; &gt;          }\n&gt; &gt;          RandomAccessFile raf =3D null;\n&gt; &gt;         =\r\n try {\n&gt; &gt;              raf =3D new RandomAccessFile(cookiesFile, &quot;r&quot;);\n&gt; &gt;=\r\n              String[] cookieParts;\n&gt; &gt;              String line;\n&gt; &gt;      =\r\n        Cookie cookie =3D null;\n&gt; &gt;              while ((line =3D raf.readL=\r\nine()) !=3D null) {\n&gt; &gt;                  // Line that starts with # is comm=\r\nented line, therefore skip it.\n&gt; &gt;                  if (!line.startsWith(&quot;#=\r\n&quot;)) {\n&gt; &gt;                      cookieParts =3D line.split(&quot;&#92;&#92;t&quot;);\n&gt; &gt;      =\r\n                if (cookieParts.length =3D=3D 7) {\n&gt; &gt;                     =\r\n     // Create cookie with not expiration date (-1 value).\n&gt; &gt;             =\r\n             // TODO: add this as an option.\n&gt; &gt;                          c=\r\nookie =3D new Cookie(cookieParts[0], cookieParts[5],\n&gt; &gt;                   =\r\n               cookieParts[6], cookieParts[2], -1, Boolean\n&gt; &gt;             =\r\n                             .valueOf(cookieParts[3]).booleanValue());\n&gt; &gt;\n=\r\n&gt; &gt;                          if (cookieParts[1].toLowerCase().equals(&quot;true&quot;=\r\n)) {\n&gt; &gt;                              cookie.setDomainAttributeSpecified(tr=\r\nue);\n&gt; &gt;                          } else {\n&gt; &gt;                             =\r\n cookie.setDomainAttributeSpecified(false);\n&gt; &gt;                          }\n=\r\n&gt; &gt;\n&gt; &gt;                          LOGGER.fine(&quot;Adding cookie: &quot;\n&gt; &gt;         =\r\n                                 + cookie.toExternalForm());\n&gt; &gt;           =\r\n           }\n&gt; &gt;                  }\n&gt; &gt;              }\n&gt; &gt;          } catch=\r\n (FileNotFoundException e) {\n&gt; &gt;              LOGGER.log(Level.WARNING,&quot;Cou=\r\nld not find file: &quot; + cookiesFile, e);\n&gt; &gt;          } catch (IOException e)=\r\n {\n&gt; &gt;              LOGGER.log(Level.WARNING,e.getMessage(), e);\n&gt; &gt;       =\r\n   } finally {\n&gt; &gt;              ArchiveUtils.closeQuietly(raf);\n&gt; &gt;        =\r\n  }\n&gt; &gt;      }\n&gt; &gt;\n&gt; &gt; Or am I missing something here? I have just checked =\r\nout heritrix 3 from this svn url https://archive-crawler.svn.sourceforge.ne=\r\nt/svnroot/archive-crawler/trunk/heritrix3/ and hope it&#39;s the right place.\n&gt;=\r\n &gt;\n&gt; &gt; Regards,\n&gt; &gt; progre55\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; ------------------------------=\r\n------\n&gt; &gt;\n&gt; &gt; Yahoo! Groups Links\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt;\n\n\n\n"}}