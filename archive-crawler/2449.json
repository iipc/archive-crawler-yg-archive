{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":168599281,"authorName":"stack","from":"stack &lt;stack@...&gt;","profile":"stackarchiveorg","replyTo":"LIST","senderId":"6nDoWwiXrNsfQvQC3v_mlCiiLaPHBiP491-E3PtSJZgFWFTu3_IZwzLpM6F2VdQF5-P3WuarjkDfxxF91nRo5Q","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] InitialTasks and FinalTasks","postDate":"1135042853","msgId":2449,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQzQTc2MTI1LjkwODAzMDdAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGRvNjhxcStwZzhxQGVHcm91cHMuY29tPg==","referencesHeader":"PGRvNjhxcStwZzhxQGVHcm91cHMuY29tPg=="},"prevInTopic":2448,"nextInTopic":2451,"prevInTime":2448,"nextInTime":2450,"topicId":2444,"numMessagesInTopic":7,"msgSnippet":"... Currently the only safe way to abort/stop a job is, as you ve figured, a call to requestCrawlStop. There is no way to abort at initialTask time currently.","rawEmail":"Return-Path: &lt;stack@...&gt;\r\nX-Sender: stack@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 56767 invoked from network); 20 Dec 2005 01:54:27 -0000\r\nReceived: from unknown (66.218.66.166)\n  by m35.grp.scd.yahoo.com with QMQP; 20 Dec 2005 01:54:27 -0000\r\nReceived: from unknown (HELO dns.duboce.net) (63.203.238.114)\n  by mta5.grp.scd.yahoo.com with SMTP; 20 Dec 2005 01:54:27 -0000\r\nReceived: from [192.168.1.105] ([192.168.1.105])\n\t(authenticated)\n\tby dns-eth1.duboce.net (8.10.2/8.10.2) with ESMTP id jBK0ZMN17961;\n\tMon, 19 Dec 2005 16:35:23 -0800\r\nMessage-ID: &lt;43A76125.9080307@...&gt;\r\nDate: Mon, 19 Dec 2005 17:40:53 -0800\r\nUser-Agent: Thunderbird 1.5 (Macintosh/20051025)\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;do68qq+pg8q@...&gt;\r\nIn-Reply-To: &lt;do68qq+pg8q@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Msg-Info: 2:12:4:0\r\nFrom: stack &lt;stack@...&gt;\r\nSubject: Re: [archive-crawler] InitialTasks and FinalTasks\r\nX-Yahoo-Group-Post: member; u=168599281; y=Ud7JQfAZXFIdp7EXJxeMjj7FtMw9fTELqDuf-Y1EbSCDyI63ZxZaDPVh\r\nX-Yahoo-Profile: stackarchiveorg\r\n\r\ntizo_trico wrote:\n&gt; Hi,\n&gt; \n&gt; I am using Heritrix with some processors that I implemented. In those\n&gt; processors, and depending of internal states, I would like to have the\n&gt; possibility to abort a job in methods such as initialTask and\n&gt; innerProcess.\n\nCurrently the only safe way to abort/stop a job is, as you&#39;ve figured, a \ncall to requestCrawlStop.\n\nThere is no way to abort at initialTask time currently.  What would you \nsuggest?  Should we throw an abort exception? If an abort is thrown, \nyou&#39;d probably want to call the finalTask on all processors that were \nsuccessfully initialized.\n\nFor processor inner tasks, requestCrawlStop is probably the way to go.\n\nPerhaps of use, see how the precondition enforcer can skip to the end of \nthe processing chain:\n\nhttp://crawler.archive.org/xref/org/archive/crawler/prefetch/PreconditionEnforcer.html#206\n\nYou might add a processor whose only role was to skip to the end of the \nchain until preventing work being done in the interrim between sending \nof the requestCrawlStop and crawler actually going down.\n\n&gt; \n&gt; At this moment, the only way that I could do that, is calling\n&gt; requestCrawlStop from the controller. It worked considerably fine when\n&gt; I was testing with one processor: the web interface only says\n&gt; &quot;Abnormal program termination&quot; or something like that, and I could see\n&gt; the errors on an external log, and that was fine for me.\n&gt; \n&gt; When I started to try with two processors, I realized that if I call\n&gt; requestCrawlStop in the initialTasks of one processor, the\n&gt; initialTasks of the other is excecuted anyway, and also the two\n&gt; finalTasks (I don&#39;t know why, but when I called requestCrawlStop using\n&gt; only one of my processors, its finalTasks seemed like it was not\n&gt; excecuted).\n&gt; \n&gt; Anyway, I read some code of the controller, and obviously the method\n&gt; requestCrawlStop is not the ideal to use in initialTasks for this\n&gt; porpouse.\n&gt; \n&gt; So I have the following questions:\n&gt; \n&gt; - What would the best way to stop a job in the method initialTask of a\n&gt; processor?\n&gt; \n&gt; - And in the method innerProcess?\n&gt; \n&gt; - If requestCrawlStop was used, should CrawlController and any other\n&gt; class be changed to handle it in a proper manner?\n&gt; \n\nCalling requestCrawlStop from initialTask doesn&#39;t work?  Because its \nexpecting crawl to be setup before its invoked?\n\nYours,\nSt.Ack\n\n&gt; Thanks very much,\n&gt; \n&gt; tizo\n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; SPONSORED LINKS\n&gt; Computer internet security \n&gt; &lt;http://groups.yahoo.com/gads?t=ms&k=Computer+internet+security&w1=Computer+internet+security&w2=Computer+internet+business&w3=Computer+internet+access&w4=Computer+internet+privacy+securities&w5=Computer+internet+help&c=5&s=164&.sig=i0mxSmuqqFFe3BrjThENoA&gt; \n&gt; \tComputer internet business \n&gt; &lt;http://groups.yahoo.com/gads?t=ms&k=Computer+internet+business&w1=Computer+internet+security&w2=Computer+internet+business&w3=Computer+internet+access&w4=Computer+internet+privacy+securities&w5=Computer+internet+help&c=5&s=164&.sig=kmDyW-ptkQj6I5S4gG69AA&gt; \n&gt; \tComputer internet access \n&gt; &lt;http://groups.yahoo.com/gads?t=ms&k=Computer+internet+access&w1=Computer+internet+security&w2=Computer+internet+business&w3=Computer+internet+access&w4=Computer+internet+privacy+securities&w5=Computer+internet+help&c=5&s=164&.sig=Ta-eZ3s36l3o1MvufztxDA&gt; \n&gt; \n&gt; Computer internet privacy securities \n&gt; &lt;http://groups.yahoo.com/gads?t=ms&k=Computer+internet+privacy+securities&w1=Computer+internet+security&w2=Computer+internet+business&w3=Computer+internet+access&w4=Computer+internet+privacy+securities&w5=Computer+internet+help&c=5&s=164&.sig=uuqya_mMImRC6lLPDsK2yQ&gt; \n&gt; \tComputer internet help \n&gt; &lt;http://groups.yahoo.com/gads?t=ms&k=Computer+internet+help&w1=Computer+internet+security&w2=Computer+internet+business&w3=Computer+internet+access&w4=Computer+internet+privacy+securities&w5=Computer+internet+help&c=5&s=164&.sig=84G6glsO_UlIoE2IlCHAsw&gt; \n&gt; \n&gt; \n&gt; \n&gt; ------------------------------------------------------------------------\n&gt; YAHOO! GROUPS LINKS\n&gt; \n&gt;     *  Visit your group &quot;archive-crawler\n&gt;       &lt;http://groups.yahoo.com/group/archive-crawler&gt;&quot; on the web.\n&gt;        \n&gt;     *  To unsubscribe from this group, send an email to:\n&gt;        archive-crawler-unsubscribe@yahoogroups.com\n&gt;       &lt;mailto:archive-crawler-unsubscribe@yahoogroups.com?subject=Unsubscribe&gt;\n&gt;        \n&gt;     *  Your use of Yahoo! Groups is subject to the Yahoo! Terms of\n&gt;       Service &lt;http://docs.yahoo.com/info/terms/&gt;. \n&gt; \n&gt; \n&gt; ------------------------------------------------------------------------\n&gt; \n\n\n"}}