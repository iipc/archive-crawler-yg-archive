{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":354174125,"authorName":"matthewyau12","from":"&quot;matthewyau12&quot; &lt;matthewyau12@...&gt;","profile":"matthewyau12","replyTo":"LIST","senderId":"bkAE-iw3zAZVJ-vxHsh_0sCvlERxnqOHw8zvNHO2v4PLCziiBoNqJQnHA6Z16OdR1rPCQSNWzUf039h9L0GY4Vq0punIObBRPiNlFqMYM6QR","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: Database Processor in Heritrix","postDate":"1268840770","msgId":6436,"canDelete":false,"contentTrasformed":false,"systemMessage":true,"headers":{"messageIdInHeader":"PGhucXRnMithdTk0QGVHcm91cHMuY29tPg==","inReplyToHeader":"PGc0M2dkYStxanBjQGVHcm91cHMuY29tPg=="},"prevInTopic":5335,"nextInTopic":6438,"prevInTime":6435,"nextInTime":6437,"topicId":5313,"numMessagesInTopic":9,"msgSnippet":"hihi, I am trying to do something similar with your work and inserting content information into a mysql database. I am able to see the JDBC setting in user","rawEmail":"Return-Path: &lt;matthewyau12@...&gt;\r\nReceived: (qmail 88818 invoked from network); 17 Mar 2010 16:07:20 -0000\r\nReceived: from unknown (98.137.34.44)\n  by m11.grp.re1.yahoo.com with QMQP; 17 Mar 2010 16:07:20 -0000\r\nReceived: from unknown (HELO n42b.bullet.mail.sp1.yahoo.com) (66.163.168.156)\n  by mta1.grp.sp2.yahoo.com with SMTP; 17 Mar 2010 16:07:20 -0000\r\nDKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoogroups.com; s=lima; t=1268841972; bh=Cp7mm4x0QD2FXRSM/gLkk1P2EdpcSvs8Dh4MqWRctUQ=; h=Received:Received:X-Sender:X-Apparently-To:X-Received:X-Received:X-Received:X-Received:X-Received:Date:To:Message-ID:In-Reply-To:User-Agent:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Mailer:X-Yahoo-Newman-Property:X-Originating-IP:X-eGroups-Msg-Info:X-Yahoo-Post-IP:From:Subject:X-Yahoo-Group-Post:X-Yahoo-Profile:X-YGroups-SubInfo:Sender:X-eGroups-Approved-By:X-eGroups-Auth; b=U0XSuLX1LPFKr2kGBqDhXgPlEWR+YNjHjo1fYOouyT3/kPk/6bqt59Hq/5c/jaSRzdz2kKGte1ROr1Lc2EJ0CZOIWEo+bn++klwplvZc0n5IfF8d0FVuzaKRjw9WlY1G\r\nReceived: from [69.147.65.174] by n42.bullet.mail.sp1.yahoo.com with NNFMP; 17 Mar 2010 16:06:12 -0000\r\nReceived: from [98.137.35.12] by t12.bullet.mail.sp1.yahoo.com with NNFMP; 17 Mar 2010 16:06:12 -0000\r\nX-Sender: matthewyau12@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 94316 invoked from network); 17 Mar 2010 15:49:44 -0000\r\nX-Received: from unknown (98.137.34.44)\n  by m2.grp.sp2.yahoo.com with QMQP; 17 Mar 2010 15:49:44 -0000\r\nX-Received: from unknown (HELO n43d.bullet.mail.sp1.yahoo.com) (66.163.169.157)\n  by mta1.grp.sp2.yahoo.com with SMTP; 17 Mar 2010 15:49:44 -0000\r\nX-Received: from [69.147.65.149] by n43.bullet.mail.sp1.yahoo.com with NNFMP; 17 Mar 2010 15:46:11 -0000\r\nX-Received: from [98.137.34.184] by t9.bullet.mail.sp1.yahoo.com with NNFMP; 17 Mar 2010 15:46:11 -0000\r\nDate: Wed, 17 Mar 2010 15:46:10 -0000\r\nTo: archive-crawler@yahoogroups.com\r\nMessage-ID: &lt;hnqtg2+au94@...&gt;\r\nIn-Reply-To: &lt;g43gda+qjpc@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: &quot;matthewyau12&quot; &lt;matthewyau12@...&gt;\r\nSubject: Re: Database Processor in Heritrix\r\nX-Yahoo-Group-Post: member; u=354174125; y=MaE5yze-s5oiE_yYnPFT_Xxij_DkG3UdgKTu11tjcNgPXkanCGRN\r\nX-Yahoo-Profile: matthewyau12\r\nX-eGroups-Approved-By: stearcorg &lt;steve@...&gt; via web; 17 Mar 2010 16:06:12 -0000\r\n\r\nhihi,\n\nI am trying to do something similar with your work and inserting con=\r\ntent information into a mysql database. I am able to see the JDBC setting i=\r\nn user interface. However, I can not insert the content into database, and =\r\nI have placed the mysql-connector-java-5.0.8-bin.jar to the library in &#92;her=\r\nitrix-1.14.3&#92;lib. I can not find any error message in the heritrix windows =\r\nbut some warning message (org.arhive.rawler.settings.CrawlerSettingsSAXHand=\r\nler$SimpleElementHandler endElement Unknown attribute &#39;com.mysql.jdbc.Drive=\r\nr&#39; in file:../order.xml&#39; line: 234, column: 76\n\nAttached please find a java=\r\n file.\n\nThx\nMat\n\npackage org.archive.crawler.writer;\n\nimport org.archive.cr=\r\nawler.datamodel.CoreAttributeConstants;\nimport org.archive.crawler.datamode=\r\nl.CrawlURI;\nimport org.archive.crawler.framework.Processor;\nimport org.arch=\r\nive.crawler.settings.SimpleType;\nimport org.archive.io.RecordingInputStream=\r\n;\nimport org.archive.io.ReplayInputStream;\nimport org.archive.net.UURI;\n\n\n\n=\r\nimport java.io.ByteArrayOutputStream;\nimport java.io.IOException;\nimport ja=\r\nva.sql.*;\nimport java.util.logging.Logger ;\nimport javax.management.Attribu=\r\nteNotFoundException;\n\n/**\n* Processor module that writes the results of suc=\r\ncessful fetches to\n* Database via JDBC.\n*/\npublic class JDBCWriterProcessor=\r\n \nextends Processor implements CoreAttributeConstants {\n\nprivate static fin=\r\nal long serialVersionUID =3D 111407556238389168L;\n\n/**\n* Key to use asking =\r\nsettings for JDBC driver.\n*/\npublic static final String ATTR_JDBC_DRIVER =\r\n=3D &quot;com.mysql.jdbc.Driver&quot;;\n\n/**\n* Key to use asking settings for JDBC URL=\r\n.\n*/\npublic static final String ATTR_JDBC_URL =3D &quot;jdbc:mysql://localhost/&quot;=\r\n;\n\n// Key to use asking database name\npublic static final String ATTR_JDBC_=\r\nDBNAME =3D &quot;northwind&quot;;\n\n// Key to use asking table name\npublic static fina=\r\nl String ATTR_JDBC_TBNAME =3D &quot;testing&quot;;\n\n/**\n* Key to use asking settings =\r\nfor username.\n*/\npublic static final String ATTR_JDBC_USERNAME =3D &quot;root&quot;;\n=\r\n\n/**\n* Key to use asking settings for passwd.\n*/\npublic static final String=\r\n ATTR_JDBC_PASSWD =3D &quot;zxc&quot;;\n\n/**\n* Logger.\n*/\nprivate static final Logger =\r\nlogger =3D\nLogger.getLogger(JDBCWriterProcessor.class.getName());\n\n/**\n* @p=\r\naram name Name of this processor.\n*/\npublic JDBCWriterProcessor(String name=\r\n) {\n//for adding attributes to heritrix processor, appears in WebUI&#92;\n//be s=\r\nure to define variables in the format up above first.\nsuper(name, &quot;JDBCWrit=\r\ner processor. &quot; +\n&quot;A writer that writes each URL to database via jdbc &quot;);\na=\r\nddElementToDefinition(new SimpleType(ATTR_JDBC_DRIVER,\n&quot;jdbc driver name&quot;, =\r\n&quot;com.mysql.jdbc.Driver&quot;));\naddElementToDefinition(new SimpleType(ATTR_JDBC_=\r\nURL,\n&quot;jdbc url in this form:jdbc:databasetype://URL_to_db:port/&quot;, &quot;&quot;));\n//t=\r\nhe last / is necessary after port b/c the full URL of a jdbc is\n//jdbc:data=\r\nbasetype://URL_to_db:port/db_name\naddElementToDefinition(new SimpleType(ATT=\r\nR_JDBC_DBNAME,\n&quot;database name&quot;, &quot;&quot;));\naddElementToDefinition(new SimpleType=\r\n(ATTR_JDBC_TBNAME,\n&quot;table name&quot;, &quot;&quot;));\naddElementToDefinition(new SimpleTyp=\r\ne(ATTR_JDBC_USERNAME,\n&quot;username&quot;, &quot;&quot;));\naddElementToDefinition(new SimpleTy=\r\npe(ATTR_JDBC_PASSWD,\n&quot;password&quot;, &quot;&quot;));\n}\n\nprotected void innerProcess(Crawl=\r\nURI curi) {\nif (!curi.isSuccess()) {\nreturn;\n}\nUURI uuri =3D curi.getUURI()=\r\n; // Current URI.\n\n// Only http and https schemes are supported.\nString sch=\r\neme =3D uuri.getScheme();\nif (!&quot;http&quot;.equalsIgnoreCase(scheme)\n&& !&quot;https&quot;.=\r\nequalsIgnoreCase(scheme)) {\nreturn;\n}\n\n//Only xml file will store in databa=\r\nse, change this expression to accept different content types\nString content=\r\ntype =3D curi.getContentType();\nif (null =3D=3D contenttype ||\n!&quot;applicatio=\r\nn/xml&quot;.equalsIgnoreCase(contenttype)) {\nreturn;\n}\n\nRecordingInputStream rec=\r\nis =3D\ncuri.getHttpRecorder().getRecordedInput();\nif (0L =3D=3D recis.getRe=\r\nsponseContentLength()) {\nreturn;\n}\n\ntry {\nwriteToDatabase(curi); //calls th=\r\ne function write to database\n} catch (IOException e) {\nlogger.warning(e.get=\r\nLocalizedMessage());\n}\n}\n\n/**\n* write into database\n*\n* @param curi the cur=\r\ni that recorded the contents\n* of the resource\n* @throws java.io.IOExceptio=\r\nn when something error;\n*/\nprivate void writeToDatabase(CrawlURI curi) thro=\r\nws IOException {\nReplayInputStream replayis =3D\ncuri.getHttpRecorder().getR=\r\necordedInput().getContentReplayInputStream();\nByteArrayOutputStream sConten=\r\nt =3D new ByteArrayOutputStream();\n\ntry {\nreplayis.readContentTo(sContent);=\r\n\n} finally {\nreplayis.close();\n}\n\nConnection conn =3D null;\nPreparedStateme=\r\nnt stmt =3D null;\n//calls a function getAttrValue to set each variable from=\r\n webUI settings\nString driver =3D getAttrValue(ATTR_JDBC_DRIVER);\nString UR=\r\nL =3D getAttrValue(ATTR_JDBC_URL);\nString db =3D getAttrValue(ATTR_JDBC_DBN=\r\nAME);\nString table =3D getAttrValue(ATTR_JDBC_TBNAME);\nString user =3D getA=\r\nttrValue(ATTR_JDBC_USERNAME);\nString pass =3D getAttrValue(ATTR_JDBC_PASSWD=\r\n);\n\nSystem.out.println(driver+&quot; &quot;+URL+&quot; &quot;+db+&quot; &quot;+table+&quot; &quot;+user+&quot; &quot;+pass);\n=\r\ntry {// ERROR OCCURS HERE DUE TO INABILITY TO SEE THE DRIVER\nClass.forName(=\r\ndriver); //loads the JDBC driver.\n} catch (Exception e) {\n//handle error\nSy=\r\nstem.out.println(&quot;Failed to load JDBC Driver.&quot;);\nlogger.warning(e.getLocali=\r\nzedMessage());\n}\ntry {\nconn =3D DriverManager.getConnection(URL+db,user,pas=\r\ns);\n//insert into table section, change if column names are\n//different\n//N=\r\note this assumes you already made the table with these columns\n\nstmt =3D co=\r\nnn.prepareStatement(&quot;INSERT INTO&quot;+table+&quot;(site,url,content,creation_date) V=\r\nALUES(?,?,?,NOW())&quot;);\nstmt.setString(1, curi.getUURI().getHost()); //contai=\r\nns host\n//address\nstmt.setString(2, curi.getUURI().getURI()); //contains\n//=\r\nURL of content\nstmt.setString(3, sContent.toString()); //contains actual\n//=\r\ncontent of the page\nstmt.executeUpdate();\nstmt.close();\nconn.close();\n} cat=\r\nch (SQLException ex) {\nlogger.warning(curi.getUURI().getURI() + &quot;--&gt;&quot; +\nex.=\r\ngetLocalizedMessage());\nSystem.out.println(&quot;SQLException: &quot; + ex.getMessage=\r\n());\nSystem.out.println(&quot;SQLState: &quot; + ex.getSQLState());\nSystem.out.printl=\r\nn(&quot;VendorError: &quot; + ex.getErrorCode());\n} finally {\n/*\n* close any jdbc ins=\r\ntances here that weren&#39;t\n* explicitly closed during normal code path, so\n* =\r\nthat we don&#39;t &#39;leak&#39; resources...\n*/\nif (stmt !=3D null) {\ntry {\nstmt.close=\r\n();\n} catch (SQLException sqlex) {\n// ignore -- as we can&#39;t do anything abo=\r\nut it here\n}\nstmt =3D null;\n}\nif (conn !=3D null) {\ntry {\nconn.close();\n} c=\r\natch (SQLException sqlex) {\n// ignore -- as we can&#39;t do anything about it h=\r\nere\n}\nconn =3D null;\n}\n}\n} //function writeToDB ends\n\npublic String getAttr=\r\nValue(String settingvalue) {\n//function gets and sets the attribute values =\r\nentered in webUI,\n//other similar functions with different return types can=\r\n be used\n//if needed.\nString varname =3D null;\ntry {\nvarname =3D ((String) =\r\ngetAttribute(settingvalue));\n} catch (AttributeNotFoundException e) {\nlogge=\r\nr.warning(e.getLocalizedMessage());\n} finally { return varname; }\n}\n}// end=\r\n of class\n\n\n--- In archive-crawler@yahoogroups.com, &quot;lpeterus&quot; &lt;lpeterus@..=\r\n.&gt; wrote:\n&gt;\n&gt; I finally managed to get this to work. Turns out the driver w=\r\nasn&#39;t the\n&gt; problem at all. Placing the jar file in lib folder does include=\r\n it in\n&gt; the classpath properly. Thanks for pointing that out. \n&gt; What was =\r\nwrong is the way the processor access variables for input in\n&gt; the webUI. I=\r\n fixed that and everything works.\n&gt; I&#39;m posting the final version of the co=\r\nde here if anyone else is doing\n&gt; something similar. \n&gt; \n&gt; - Shawn\n&gt; \n&gt; pac=\r\nkage org.archive.crawler.writer;\n&gt; \n&gt; import org.archive.crawler.datamodel.=\r\nCoreAttributeConstants;\n&gt; import org.archive.crawler.datamodel.CrawlURI;\n&gt; =\r\nimport org.archive.crawler.framework.Processor;\n&gt; import org.archive.crawle=\r\nr.settings.SimpleType;\n&gt; import org.archive.io.RecordingInputStream;\n&gt; impo=\r\nrt org.archive.io.ReplayInputStream;\n&gt; import org.archive.net.UURI;\n&gt; \n&gt; im=\r\nport java.io.ByteArrayOutputStream;\n&gt; import java.io.IOException;\n&gt; import =\r\njava.sql.*;\n&gt; import java.util.logging.Logger ;\n&gt; import javax.management.A=\r\nttributeNotFoundException;\n&gt; \n&gt; /**\n&gt;  * Processor module that writes the r=\r\nesults of successful fetches to\n&gt;  * Database via JDBC.\n&gt;  */\n&gt; public clas=\r\ns JDBCWriterProcessor\n&gt;         extends Processor implements CoreAttributeC=\r\nonstants {\n&gt; \n&gt;     private static final long serialVersionUID =3D 11140755=\r\n6238389168L;\n&gt; \n&gt;     /**\n&gt;      * Key to use asking settings for JDBC driv=\r\ner.\n&gt;      */\n&gt;     public static final String ATTR_JDBC_DRIVER =3D &quot;JDBC D=\r\nriver&quot;;\n&gt; \n&gt;     /**\n&gt;      * Key to use asking settings for JDBC URL.\n&gt;   =\r\n   */\n&gt;     public static final String ATTR_JDBC_URL =3D &quot;JDBC URL&quot;;\n&gt;     =\r\n\n&gt;     //  Key to use asking database name\n&gt;     public static final String=\r\n ATTR_JDBC_DBNAME =3D &quot;database&quot;;\n&gt; \n&gt;     // Key to use asking table name\n=\r\n&gt;     public static final String ATTR_JDBC_TBNAME =3D &quot;table&quot;;\n&gt; \n&gt;     /**=\r\n\n&gt;      * Key to use asking settings for username.\n&gt;      */\n&gt;     public s=\r\ntatic final String ATTR_JDBC_USERNAME =3D &quot;username&quot;;\n&gt; \n&gt;     /**\n&gt;      *=\r\n Key to use asking settings for passwd.\n&gt;      */\n&gt;     public static final=\r\n String ATTR_JDBC_PASSWD =3D &quot;password&quot;;\n&gt; \n&gt;     /**\n&gt;      * Logger.\n&gt;   =\r\n   */\n&gt;     private static final Logger logger =3D\n&gt;             Logger.get=\r\nLogger(JDBCWriterProcessor.class.getName());\n&gt; \n&gt;     /**\n&gt;      * @param n=\r\name Name of this processor.\n&gt;      */\n&gt;     public JDBCWriterProcessor(Stri=\r\nng name) {\n&gt; \t//for adding attributes to heritrix processor, appears in Web=\r\nUI&#92;\n&gt; \t//be sure to define variables in the format up above first.\n&gt;       =\r\n  super(name, &quot;JDBCWriter processor. &quot; +\n&gt;                 &quot;A writer that w=\r\nrites each URL to database via jdbc &quot;);\n&gt;         addElementToDefinition(ne=\r\nw SimpleType(ATTR_JDBC_DRIVER,\n&gt;                 &quot;jdbc driver name&quot;, &quot;com.m=\r\nysql.jdbc.Driver&quot;));\n&gt;         addElementToDefinition(new SimpleType(ATTR_J=\r\nDBC_URL,\n&gt;                 &quot;jdbc url in this form:\n&gt; jdbc:databasetype://UR=\r\nL_to_db:port/&quot;, &quot;&quot;));\n&gt; \t//the last / is necessary after port b/c the full =\r\nURL of a jdbc is\n&gt; jdbc:databasetype://URL_to_db:port/db_name\n&gt; \taddElement=\r\nToDefinition(new SimpleType(ATTR_JDBC_DBNAME,\n&gt; \t\t&quot;database name&quot;, &quot;&quot;));\n&gt; =\r\n\taddElementToDefinition(new SimpleType(ATTR_JDBC_TBNAME,\n&gt; \t\t&quot;table name&quot;, =\r\n&quot;&quot;));\n&gt;         addElementToDefinition(new SimpleType(ATTR_JDBC_USERNAME,\n&gt;=\r\n                 &quot;username&quot;, &quot;&quot;));\n&gt;         addElementToDefinition(new Sim=\r\npleType(ATTR_JDBC_PASSWD,\n&gt;                 &quot;password&quot;, &quot;&quot;));\n&gt;     }\n&gt; \n&gt; =\r\n    protected void innerProcess(CrawlURI curi) {\n&gt;         if (!curi.isSucc=\r\ness()) {\n&gt;             return;\n&gt;         }\n&gt;         UURI uuri =3D curi.get=\r\nUURI(); // Current URI.\n&gt; \n&gt;         // Only http and https schemes are sup=\r\nported.\n&gt;         String scheme =3D uuri.getScheme();\n&gt;         if (!&quot;http&quot;=\r\n.equalsIgnoreCase(scheme)\n&gt;                 && !&quot;https&quot;.equalsIgnoreCase(sc=\r\nheme)) {\n&gt;             return;\n&gt;         }\n&gt; \n&gt;         //Only xml file wil=\r\nl store in database, change this expression\n&gt; to accept different content t=\r\nypes\n&gt;         String contenttype =3D curi.getContentType();\n&gt;         if (=\r\nnull =3D=3D contenttype ||\n&gt; !&quot;application/xml&quot;.equalsIgnoreCase(contenttyp=\r\ne)) {\n&gt;             return;\n&gt;         }\n&gt; \n&gt;         RecordingInputStream r=\r\necis =3D\n&gt; curi.getHttpRecorder().getRecordedInput();\n&gt;         if (0L =3D=\r\n=3D recis.getResponseContentLength()) {\n&gt;             return;\n&gt;         }\n&gt;=\r\n \n&gt;         try {\n&gt;             writeToDatabase(curi); //calls the function=\r\n write to database\n&gt;         } catch (IOException e) {\n&gt;             logger=\r\n.warning(e.getLocalizedMessage());\n&gt;         }\n&gt;     }\n&gt; \n&gt;     /**\n&gt;      =\r\n* write into database\n&gt;      *\n&gt;      * @param curi the curi that recorded =\r\nthe contents\n&gt;      *             of the resource\n&gt;      * @throws java.io.=\r\nIOException when something error;\n&gt;      */\n&gt;     private void writeToDatab=\r\nase(CrawlURI curi) throws IOException {\n&gt;         ReplayInputStream replayi=\r\ns =3D\n&gt; curi.getHttpRecorder().getRecordedInput().getContentReplayInputStre=\r\nam();\n&gt;         ByteArrayOutputStream sContent =3D new ByteArrayOutputStrea=\r\nm(); \n&gt; \n&gt;         try {\n&gt;             replayis.readContentTo(sContent);\n&gt; =\r\n        } finally {\n&gt;             replayis.close();\n&gt;         }\n&gt; \n&gt;       =\r\n  Connection conn =3D null;\n&gt;         PreparedStatement stmt =3D null;\n&gt; \t/=\r\n/calls a function getAttrValue to set each variable from webUI settings\n&gt; \t=\r\nString driver =3D getAttrValue(ATTR_JDBC_DRIVER);\n&gt; \tString URL =3D getAttr=\r\nValue(ATTR_JDBC_URL);\n&gt; \tString db =3D getAttrValue(ATTR_JDBC_DBNAME);\n&gt; \tS=\r\ntring table =3D getAttrValue(ATTR_JDBC_TBNAME);\n&gt; \tString user =3D getAttrV=\r\nalue(ATTR_JDBC_USERNAME);\n&gt; \tString pass =3D getAttrValue(ATTR_JDBC_PASSWD)=\r\n;\n&gt; \n&gt; \tSystem.out.println(driver+&quot; &quot;+URL+&quot; &quot;+db+&quot; &quot;+table+&quot; &quot;+user+&quot; &quot;+pas=\r\ns);\n&gt;         try {// ERROR OCCURS HERE DUE TO INABILITY TO SEE THE DRIVER\n=\r\n&gt;             Class.forName(driver); //loads the JDBC driver. \n&gt; \t}  catch =\r\n(Exception e) {\n&gt; \t\t//handle error\n&gt; \t\tSystem.out.println(&quot;Failed to load J=\r\nDBC Driver.&quot;);\n&gt; \t\tlogger.warning(e.getLocalizedMessage());\t\n&gt; \t   }\n&gt; \ttry=\r\n {\n&gt;            conn =3D DriverManager.getConnection(URL+db,user,pass);\n&gt;  =\r\n          //insert into table section, change if column names are\n&gt; differe=\r\nnt\n&gt; \t   //Note this assumes you already made the table with these columns\n=\r\n&gt;                                                  \n&gt;              stmt =3D=\r\n conn.prepareStatement(&quot;INSERT INTO\n&gt; &quot;+table+&quot;(site,url,content,creation_d=\r\nate) VALUES(?,?,?,NOW())&quot;);\n&gt; \t     stmt.setString(1, curi.getUURI().getHos=\r\nt()); //contains host\n&gt; address\t\n&gt;              stmt.setString(2, curi.getU=\r\nURI().getURI());  //contains\n&gt; URL of content\n&gt;  \t     stmt.setString(3, sC=\r\nontent.toString()); //contains actual\n&gt; content of the page\n&gt;              =\r\nstmt.executeUpdate();\n&gt; \t     stmt.close(); \n&gt;              conn.close();\n&gt;=\r\n          }  catch (SQLException ex) {\n&gt; \t\t logger.warning(curi.getUURI().g=\r\netURI() + &quot;--&gt;&quot; +\n&gt; ex.getLocalizedMessage());\n&gt; \t         System.out.print=\r\nln(&quot;SQLException: &quot; + ex.getMessage());\n&gt; \t         System.out.println(&quot;SQL=\r\nState: &quot; + ex.getSQLState());\n&gt; \t         System.out.println(&quot;VendorError: =\r\n&quot; + ex.getErrorCode());\n&gt; \t    } finally {\n&gt; \t\t/*\n&gt; \t\t* close any jdbc inst=\r\nances here that weren&#39;t\n&gt; \t\t* explicitly closed during normal code path, so=\r\n\n&gt; \t\t* that we don&#39;t &#39;leak&#39; resources...\n&gt;                 */\n&gt;            =\r\n \tif (stmt !=3D null) {\n&gt;               \t  try {\n&gt;                 \tstmt.cl=\r\nose();\n&gt;               \t  } catch (SQLException sqlex) {\n&gt;               \t =\r\n     // ignore -- as we can&#39;t do anything about it here\n&gt;               \t  =\r\n  }\n&gt;               \t  stmt =3D null;\n&gt;             \t}\n&gt;            \tif (co=\r\nnn !=3D null) {\n&gt;           \t    try {\n&gt;                \t    \tconn.close();=\r\n\n&gt;                     } catch (SQLException sqlex) {\n&gt;               \t    =\r\n // ignore -- as we can&#39;t do anything about it here\n&gt;               \t      =\r\n}\n&gt;               \t    conn =3D null;\n&gt; \t\t}\n&gt;               }\n&gt;       } //f=\r\nunction writeToDB ends\n&gt;     \n&gt;     public String getAttrValue(String setti=\r\nngvalue) { \n&gt;     //function gets and sets the attribute values entered in =\r\nwebUI, \n&gt;     //other similar functions with different return types can be =\r\nused\n&gt; if needed.\n&gt; \tString varname =3D null;\n&gt; \ttry {\n&gt;  \t  varname =3D ((=\r\nString) getAttribute(settingvalue));\n&gt; \t}  catch (AttributeNotFoundExceptio=\r\nn e) {\n&gt; \t\t logger.warning(e.getLocalizedMessage());\n&gt; \t   } finally { retu=\r\nrn varname; }\n&gt;     } \n&gt; }// end of class\n&gt; \n&gt; \n&gt; &gt; --- In archive-crawler@=\r\nyahoogroups.com, Gordon Mohr &lt;gojomo@&gt; wrote:\n&gt; &gt; &gt;\n&gt; &gt; &gt; Our launch script=\r\n (bin/heritrix) builds its own CLASSPATH so any \n&gt; &gt; &gt; attempts to set an a=\r\nlternate CLASSPATH before running our script may\n&gt; &gt; not \n&gt; &gt; &gt; have the in=\r\ntended effect. It automatically builds a CLASSPATH\n&gt; &gt; containing \n&gt; &gt; &gt; ev=\r\nery JAR it finds in the &#39;lib&#39; directory -- you may want to try \n&gt; &gt; &gt; dropp=\r\ning your other JAR there.\n&gt; &gt; &gt; \n&gt; &gt; &gt; But, it&#39;s impossible to tell for sur=\r\ne what&#39;s happening in your\n&gt; &gt; situation \n&gt; &gt; &gt; without seeing the errors.\n=\r\n&gt; &gt; &gt; \n&gt; &gt; &gt; - Gordon @ IA\n&gt; &gt; &gt; \n&gt; &gt; &gt; lpeterus wrote:\n&gt; &gt; &gt; &gt; --- In arch=\r\nive-crawler@yahoogroups.com, &quot;lpeterus&quot; &lt;lpeterus@&gt;\n&gt; wrote:\n&gt; &gt; &gt; &gt;&gt; --- I=\r\nn archive-crawler@yahoogroups.com, Gordon Mohr &lt;gojomo@&gt;\n&gt; wrote:\n&gt; &gt; &gt; &gt;&gt;&gt;=\r\n lpeterus wrote:\n&gt; &gt; &gt; &gt;&gt;&gt;&gt; Hi!\n&gt; &gt; &gt; &gt;&gt;&gt;&gt;\n&gt; &gt; &gt; &gt;&gt;&gt;&gt; I made a processor fo=\r\nr inserting content information into a mysql\n&gt; &gt; &gt; &gt;&gt;&gt;&gt; database. I include=\r\nd the name in processor.options and placed the\n&gt; &gt; &gt; &gt;&gt;&gt;&gt; .java file into t=\r\nhe writer folder in the source. Then built\n&gt; &gt; heritrix\n&gt; &gt; &gt; &gt;&gt;&gt;&gt; using Ma=\r\nven. The new processor does show up on the webUI but the\n&gt; &gt; &gt; &gt;&gt;&gt;&gt; process=\r\nor doesn&#39;t work correctly when I do a crawl. I get\n&gt; toethread\n&gt; &gt; &gt; &gt;&gt;&gt;&gt; e=\r\nrrors, am I doing this wrong? Thanks.\n&gt; &gt; &gt; &gt;&gt;&gt; Without knowing the error, =\r\nit&#39;s impossible to tell. If it&#39;s not \n&gt; &gt; &gt; &gt;&gt;&gt; something like &#39;class not f=\r\nound&#39;, and the crawl launched\n&gt; before the \n&gt; &gt; &gt; &gt;&gt;&gt; error occurred, it&#39;s =\r\nprobably a bug in your code.\n&gt; &gt; &gt; &gt;&gt;&gt;\n&gt; &gt; &gt; &gt;&gt;&gt; - Gordon @ IA\n&gt; &gt; &gt; &gt;&gt;&gt;\n&gt; =\r\n&gt; &gt; &gt;&gt; I actually modified the code seen in this article. I&#39;m not sure\n&gt; &gt; =\r\nif its\n&gt; &gt; &gt; &gt;&gt; not up to date with heritrix 1.14 or something I changed. F=\r\nor the\n&gt; &gt; most\n&gt; &gt; &gt; &gt;&gt; part I just altered it to accept xml rather than h=\r\ntml and got\n&gt; rid of\n&gt; &gt; &gt; &gt;&gt; the strip tag function and where it was used.=\r\n \n&gt; &gt; &gt; &gt;&gt; http://tech.groups.yahoo.com/group/archive-crawler/message/4538\n=\r\n&gt; &gt; &gt; &gt;&gt;\n&gt; &gt; &gt; &gt; \n&gt; &gt; &gt; &gt; Ok, I believe its not recognizing the driver. I&#39;m=\r\n using the mysql\n&gt; &gt; &gt; &gt; supported JDBC driver thats wrapped in a jar file.=\r\n Its manual\n&gt; says to\n&gt; &gt; &gt; &gt; add the path to jar file into CLASSPATH like =\r\nthis:\n&gt; &gt; &gt; &gt; export set\n&gt; &gt; CLASSPATH=3D/path/mysql-connector-java-[ver]-b=\r\nin.jar:$CLASSPATH\n&gt; &gt; &gt; &gt; Since I don&#39;t have admin rights on the system, I&#39;=\r\nm using the Java\n&gt; &gt; &gt; &gt; thats extracted/installed in my home directory. Wh=\r\nen I run a\n&gt; script to\n&gt; &gt; &gt; &gt; use the driver after exporting, it sees the =\r\ndriver and works. When I\n&gt; &gt; &gt; &gt; use it in heritrix, it doesn&#39;t work becaus=\r\ne the errors get caught by\n&gt; &gt; &gt; &gt; exceptions. \n&gt; &gt; &gt; &gt; Is it possible that=\r\n adding it to CLASSPATH doesn&#39;t allow the Java\n&gt; &gt; &gt; &gt; program (which I set=\r\n JAVA_HOME to when running Heritrix) to see\n&gt; where\n&gt; &gt; &gt; &gt; the driver is?\n=\r\n&gt; &gt; &gt; &gt; \n&gt; &gt; &gt; &gt; \n&gt; &gt; &gt; &gt; \n&gt; &gt; &gt; &gt; ------------------------------------\n&gt; &gt;=\r\n &gt; &gt; \n&gt; &gt; &gt; &gt; Yahoo! Groups Links\n&gt; &gt; &gt; &gt; \n&gt; &gt; &gt; &gt; \n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt;\n&gt;\n\n\n\n"}}