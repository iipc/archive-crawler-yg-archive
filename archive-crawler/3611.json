{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"0ZnVGmK-jutZm7kWwpQw-fotRLan1sHTk_2wjQ-68_SuIHCBOx5U7Gq43VO82IiyiQJ60qCRwICD7s5mIsEuIqT3iJc0rL4","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] Re: heritrix stuck","postDate":"1166820603","msgId":3611,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ1OEM0NEZCLjMwNTA2MDNAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PDQ1OEMyNEI3LjEwOTA1MDhAYXJjaGl2ZS5vcmc+","referencesHeader":"PGVtZzk2OCsxZGRiQGVHcm91cHMuY29tPiA8NDU4QzI0QjcuMTA5MDUwOEBhcmNoaXZlLm9yZz4="},"prevInTopic":3610,"nextInTopic":3613,"prevInTime":3610,"nextInTime":3612,"topicId":3603,"numMessagesInTopic":9,"msgSnippet":"In addition to St.Ack s questions: * Are you on Windows by chance? (Linux/Unix won t object to deleting an open file.) * Can you closely examine","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 49981 invoked from network); 22 Dec 2006 20:51:35 -0000\r\nReceived: from unknown (66.218.67.35)\n  by m41.grp.scd.yahoo.com with QMQP; 22 Dec 2006 20:51:35 -0000\r\nReceived: from unknown (HELO relay00.pair.com) (209.68.5.9)\n  by mta9.grp.scd.yahoo.com with SMTP; 22 Dec 2006 20:51:35 -0000\r\nReceived: (qmail 54239 invoked from network); 22 Dec 2006 20:49:58 -0000\r\nReceived: from 24.5.65.77 (HELO ?192.168.0.15?) (24.5.65.77)\n  by relay00.pair.com with SMTP; 22 Dec 2006 20:49:58 -0000\r\nX-pair-Authenticated: 24.5.65.77\r\nMessage-ID: &lt;458C44FB.3050603@...&gt;\r\nDate: Fri, 22 Dec 2006 12:50:03 -0800\r\nUser-Agent: Thunderbird 1.5.0.9 (Windows/20061207)\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;emg968+1ddb@...&gt; &lt;458C24B7.1090508@...&gt;\r\nIn-Reply-To: &lt;458C24B7.1090508@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Msg-Info: 1:0:0:0\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] Re: heritrix stuck\r\nX-Yahoo-Group-Post: member; u=137285340; y=cSsEeTlAWxbi7_VAp7a3-vCNUVD0Yw0qxDkcq4bLu4i0\r\nX-Yahoo-Profile: gojomo\r\n\r\nIn addition to St.Ack&#39;s questions:\n\n* Are you on Windows by chance? (Linux/Unix won&#39;t object to deleting an \nopen file.)\n\n* Can you closely examine heritrix_out.log and/or the Alerts for any \nexceptions before the delete that might have prevented a proper close?\n\n- Gordon @ IA\n\n\nMichael Stack wrote:\n&gt; Regards your first mail, did you do anything custom to the FetchHTTP (or \n&gt; FetchDNS)?  These are usually responsible for closing the \n&gt; RecordingInputStream (RIS).  There is a RIS per thread.  Its opened and \n&gt; closed in the fetcher per trip down along the processing chain.  In the \n&gt; past the close would sometimes fail but this was addressed a while back \n&gt; (You are using a recent Heritrix?).  \n&gt; \n&gt; Heritrix is embedded into your WAR or does your WAR run a remote \n&gt; Heritrix instance?  Does crawling usually work well?  Its just the odd \n&gt; time it goes awry?\n&gt; \n&gt; Your second mail &#39;seems&#39; to describe a different phenomenon.  After \n&gt; fetchers are finished, extractors go to work and get a character stream \n&gt; on the fetchers&#39; download (A ReplayCharSequence).   If we determine it a \n&gt; multi-byte stream, we first convert downloaded bytes to a CharSequence \n&gt; writing the encoding to a temporary file -- the one with the UTF-16BE \n&gt; suffix -- and its this file we pass back to the extractor to run its \n&gt; character-based regexes across.  When an extractor is done, its supposed \n&gt; to clean up the temporary file.  The delete is failing silently?  Just \n&gt; before the delete, there is a log (&#39;...because of...&#39;).  Whats it say in \n&gt; your case?\n&gt; \n&gt; Thanks,\n&gt; St.Ack\n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; blah_1977 wrote:\n&gt;&gt;\n&gt;&gt; After digging around a bit trying to debug this problem, I think the\n&gt;&gt; root cause is in the class\n&gt;&gt; ReplayCharSequenceFactory.MultiByteReplayCharSequence at the method\n&gt;&gt;\n&gt;&gt; private void deleteFile(File fileToDelete, final Exception e) {\n&gt;&gt; if (e != null) {\n&gt;&gt; // Log why the delete to help with debug of\n&gt;&gt; java.io.FileNotFoundException:\n&gt;&gt; // ....tt53http.ris.UTF-16BE.\n&gt;&gt; logger.severe(&quot;Deleting &quot; + fileToDelete + &quot; because of &quot;\n&gt;&gt; + e.toString());\n&gt;&gt; }\n&gt;&gt; if (fileToDelete != null && fileToDelete.exists()) {\n&gt;&gt; fileToDelete.delete();\n&gt;&gt; }\n&gt;&gt; }\n&gt;&gt;\n&gt;&gt; The last line &quot;fileToDelete.delete()&quot; seems to always return false\n&gt;&gt; when invoked from ExtractorHTML, indicating that the file cannot be\n&gt;&gt; deleted (perhaps due to a stream still being open on it). This then\n&gt;&gt; snowballs into the error seen in my previous post.\n&gt;&gt; Has anyone any idea on what&#39;s causing this, and how to fix?\n&gt;&gt; Thanks much in advance.\n&gt;&gt;\n&gt;&gt; --- In archive-crawler@yahoogroups.com \n&gt;&gt; &lt;mailto:archive-crawler%40yahoogroups.com&gt;, &quot;blah_1977&quot; &lt;hwangs@...&gt; \n&gt;&gt; wrote:\n&gt;&gt; &gt;\n&gt;&gt; &gt; I&#39;ve written a little web app running on tomcat, which uses heritrix\n&gt;&gt; &gt; to crawl specific sites. Lately, I&#39;ve been running into the following\n&gt;&gt; &gt; error messages on the command line, after which it seems like the\n&gt;&gt; &gt; whole application becomes &quot;stuck&quot;. i.e., no more progress being made\n&gt;&gt; &gt; on the crawl. Here are the error messages:\n&gt;&gt; &gt;\n&gt;&gt; &gt; INFO HttpMethodDirector:434 - I/O exception caught when processing\n&gt;&gt; &gt; request: RIS already open for ToeThread #35:\n&gt;&gt; &gt;\n&gt;&gt; http://www.pcrecruiter.net/pcrbin/reg5.exe?i1=WEBGUEST&i2=532335723616234&i3=DETAIL&hash=508826133&i5=&i6=12%2f21%2f2006%207:12:23%20PM&i7=Senior%20software%20engineer%20%20-%20Content%20%26%20Syndication&i8=&i9=&i10=J.Job_Title%20Desc&pcr-id=P4SAo2E%2fQbHmzBnzOGfIEYm775gf6WWf7H%2fBydd2pvkAJ%2fXKJ%2bHqhT0Ky%2b49HifRK6eix7A8nL6t%0d%0abj8hq%2b%2fiNyiM \n&gt;&gt; &lt;http://www.pcrecruiter.net/pcrbin/reg5.exe?i1=WEBGUEST&i2=532335723616234&i3=DETAIL&hash=508826133&i5=&i6=12%2f21%2f2006%207:12:23%20PM&i7=Senior%20software%20engineer%20%20-%20Content%20%26%20Syndication&i8=&i9=&i10=J.Job_Title%20Desc&pcr-id=P4SAo2E%2fQbHmzBnzOGfIEYm775gf6WWf7H%2fBydd2pvkAJ%2fXKJ%2bHqhT0Ky%2b49HifRK6eix7A8nL6t%0d%0abj8hq%2b%2fiNyiM&gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt; [ToeThread #35:\n&gt;&gt; &gt;\n&gt;&gt; http://www.pcrecruiter.net/pcrbin/reg5.exe?i1=WEBGUEST&i2=532335723616234&i3=DETAIL&hash=508826133&i5=&i6=12%2f21%2f2006%207:12:23%20PM&i7=Senior%20software%20engineer%20%20-%20Content%20%26%20Syndication&i8=&i9=&i10=J.Job_Title%20Desc&pcr-id=P4SAo2E%2fQbHmzBnzOGfIEYm775gf6WWf7H%2fBydd2pvkAJ%2fXKJ%2bHqhT0Ky%2b49HifRK6eix7A8nL6t%0d%0abj8hq%2b%2fiNyiM \n&gt;&gt; &lt;http://www.pcrecruiter.net/pcrbin/reg5.exe?i1=WEBGUEST&i2=532335723616234&i3=DETAIL&hash=508826133&i5=&i6=12%2f21%2f2006%207:12:23%20PM&i7=Senior%20software%20engineer%20%20-%20Content%20%26%20Syndication&i8=&i9=&i10=J.Job_Title%20Desc&pcr-id=P4SAo2E%2fQbHmzBnzOGfIEYm775gf6WWf7H%2fBydd2pvkAJ%2fXKJ%2bHqhT0Ky%2b49HifRK6eix7A8nL6t%0d%0abj8hq%2b%2fiNyiM&gt;]\n&gt;&gt; &gt; 19:14:03,516 INFO HttpMethodDirector:440 - Retrying request\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt; Has anybody seen anything like this before? Thanks much in advance.\n&gt;&gt; &gt;\n&gt;&gt;\n&gt; \n&gt; \n\n"}}