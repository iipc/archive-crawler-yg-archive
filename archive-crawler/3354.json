{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":168599281,"authorName":"Michael Stack","from":"Michael Stack &lt;stack@...&gt;","profile":"stackarchiveorg","replyTo":"LIST","senderId":"JRA5laEYXr8eBm6vkEdl15Q2AaZaSF30ZCm2IAOVf7MCtFqHsCCK3JpI94w-s2EQ2TKSXP7j5g8Zivj8Wte5hhB3srk9sLRr","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] Unable to setup bdb environment on checkpoint recover","postDate":"1159304008","msgId":3354,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ1MTk5MzQ4LjYwMTA1MDlAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PDIwMDYwOTI2MjAzMzExLkdCMjg1NjJAZHV2ZWwuaXIuaWl0LmVkdT4=","referencesHeader":"PDIwMDYwOTI2MTgzNTEwLkdBMjY5MDJAZHV2ZWwuaXIuaWl0LmVkdT4gPDQ1MTk4OTMzLjIwNDA2MDdAYXJjaGl2ZS5vcmc+IDwyMDA2MDkyNjIwMzMxMS5HQjI4NTYyQGR1dmVsLmlyLmlpdC5lZHU+"},"prevInTopic":3353,"nextInTopic":0,"prevInTime":3353,"nextInTime":3355,"topicId":3347,"numMessagesInTopic":4,"msgSnippet":"... True. We should allow adding to alreadySeen from JMX? St.Ack","rawEmail":"Return-Path: &lt;stack@...&gt;\r\nX-Sender: stack@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 49017 invoked from network); 26 Sep 2006 20:52:43 -0000\r\nReceived: from unknown (66.218.67.34)\n  by m23.grp.scd.yahoo.com with QMQP; 26 Sep 2006 20:52:43 -0000\r\nReceived: from unknown (HELO dns.duboce.net) (63.203.238.114)\n  by mta8.grp.scd.yahoo.com with SMTP; 26 Sep 2006 20:52:43 -0000\r\nReceived: by dns.duboce.net (Postfix, from userid 1008)\n\tid 7205AC334; Tue, 26 Sep 2006 12:31:57 -0700 (PDT)\r\nReceived: from [192.168.1.10] (debord.duboce.net [192.168.1.10])\n\tby dns.duboce.net (Postfix) with ESMTP id 2073CC2BE;\n\tTue, 26 Sep 2006 12:31:52 -0700 (PDT)\r\nMessage-ID: &lt;45199348.6010509@...&gt;\r\nDate: Tue, 26 Sep 2006 13:53:28 -0700\r\nUser-Agent: Mozilla/5.0 (X11; U; Linux i686 (x86_64); en-US; rv:1.8.1b2) Gecko/20060823 SeaMonkey/1.1a\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;20060926183510.GA26902@...&gt; &lt;45198933.2040607@...&gt; &lt;20060926203311.GB28562@...&gt;\r\nIn-Reply-To: &lt;20060926203311.GB28562@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on dns.duboce.net\r\nX-Spam-Level: \r\nX-Spam-Status: No, score=-5.0 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 \n\tautolearn=ham version=3.0.3\r\nX-eGroups-Msg-Info: 1:0:0:0\r\nFrom: Michael Stack &lt;stack@...&gt;\r\nSubject: Re: [archive-crawler] Unable to setup bdb environment on checkpoint\n recover\r\nX-Yahoo-Group-Post: member; u=168599281; y=QNDvBSWsZmv7arD1O6fhCaaoR9vpLapJIVYNrbNLUXYnL6jiLlgF58xU\r\nX-Yahoo-Profile: stackarchiveorg\r\n\r\nEric wrote:\n&gt; Yes, there&#39;s a &quot;valid&quot; file in the checkpoint directory.  It&#39;s\n&gt; definitely the exact same version of heritrix and JE.  As far as\n&gt; restoring my state, I don&#39;t think importUris takes care of everything\n&gt; I want.  If I do what we&#39;re discussing:  use an older checkpoint, then\n&gt; run the most recent recovery log through importUris.  It will\n&gt; definitely do the job of adding all the URI&#39;s that were discovered\n&gt; since that older checkpoint, but it doesn&#39;t do the job of marking the\n&gt; ones that were actually crawled since last checkpoint in the already\n&gt; seen list.  For that, it seems like I&#39;d have to write some code.\n&gt;   \nTrue.\n\nWe should allow adding to alreadySeen from JMX?\n\nSt.Ack\n\n&gt; thanks,\n&gt; eric\n&gt;\n&gt; On Tue, Sep 26, 2006 at 01:10:27PM -0700, Michael Stack wrote:\n&gt;   \n&gt;&gt; Eric wrote:\n&gt;&gt;     \n&gt;&gt;&gt; I just went to recover from a checkpoint (all in 1.8) and got the\n&gt;&gt;&gt; following error.  Not sure why this happened...there&#39;s no errors in\n&gt;&gt;&gt; the log where this checkpoint was built.  \n&gt;&gt;&gt;       \n&gt;&gt; There is a &#39;valid&#39; checkpoint file in the checkpoint directory?\n&gt;&gt;\n&gt;&gt;     \n&gt;&gt;&gt; Since this checkpoint is a\n&gt;&gt;&gt; recover of a recover of a recover, I can&#39;t just use the recovery log\n&gt;&gt;&gt; unless I went and concatenated all of them together (right?).  \n&gt;&gt;&gt;       \n&gt;&gt; Yes.\n&gt;&gt;\n&gt;&gt;     \n&gt;&gt;&gt; Any\n&gt;&gt;&gt; other ideas on how I might recover from this situation?  The only\n&gt;&gt;&gt; thing I can think of is to recover from one of my older checkpoints,\n&gt;&gt;&gt; then write some JMX or code to run through the current recovery log\n&gt;&gt;&gt; and delete those from the frontier / mark them seen.\n&gt;&gt;&gt;   \n&gt;&gt;&gt;       \n&gt;&gt; I haven&#39;t tried what you propose but it sounds like it should work.  The \n&gt;&gt; JMX importURIs can take as input a recovery log so you shouldn&#39;t have to \n&gt;&gt; write code -- or what are you thinking? I don&#39;t follow why you need to \n&gt;&gt; mark recovery items as &#39;seen&#39;.  On checkpoint, we rotate off the log so \n&gt;&gt; can you just importUris from the recovery since last checkpoint?\n&gt;&gt;\n&gt;&gt;     \n&gt;&gt;&gt; 09/26/2006 18:02:40 +0000 SEVERE org.archive.crawler.framework.CrawlController initialize On crawl: amazon_reviews_top100_then_all Unable to setup bdb environment.\n&gt;&gt;&gt; java.lang.ClassCastException: com.sleepycat.je.tree.LN incompatible with com.sleepycat.je.tree.FileSummaryLN\n&gt;&gt;&gt;   \n&gt;&gt;&gt;       \n&gt;&gt; For sure you are not recovering a checkpoint written with another \n&gt;&gt; version of Heritrix (and bdbje)?\n&gt;&gt;\n&gt;&gt; St.Ack\n&gt;&gt;\n&gt;&gt;     \n&gt;&gt;&gt;         at com.sleepycat.je.cleaner.UtilizationProfile.populateCache(UtilizationProfile.java:918)\n&gt;&gt;&gt;         at com.sleepycat.je.recovery.RecoveryManager.recover(RecoveryManager.java:189)\n&gt;&gt;&gt;         at com.sleepycat.je.dbi.EnvironmentImpl.&lt;init&gt;(EnvironmentImpl.java:276)\n&gt;&gt;&gt;         at com.sleepycat.je.dbi.DbEnvPool.getEnvironment(DbEnvPool.java:102)\n&gt;&gt;&gt;         at com.sleepycat.je.dbi.DbEnvPool.getEnvironment(DbEnvPool.java:54)\n&gt;&gt;&gt;         at com.sleepycat.je.Environment.&lt;init&gt;(Environment.java:80)\n&gt;&gt;&gt;         at org.archive.crawler.framework.CrawlController.setupBdb(CrawlController.java:481)\n&gt;&gt;&gt;         at org.archive.crawler.framework.CrawlController.initialize(CrawlController.java:385)\n&gt;&gt;&gt;         at org.archive.crawler.admin.CrawlJob.setupForCrawlStart(CrawlJob.java:828)\n&gt;&gt;&gt;         at org.archive.crawler.admin.CrawlJobHandler.startNextJobInternal(CrawlJobHandler.java:1135)\n&gt;&gt;&gt;         at org.archive.crawler.admin.CrawlJobHandler$3.run(CrawlJobHandler.java:1118)\n&gt;&gt;&gt;         at java.lang.Thread.run(Thread.java:797)\n&gt;&gt;&gt; org.archive.crawler.framework.exceptions.InitializationException: On crawl: amazon_reviews_top100_then_all Unable to setup bdb environ\n&gt;&gt;&gt; ment.\n&gt;&gt;&gt;         at org.archive.crawler.framework.CrawlController.initialize(CrawlController.java:397)\n&gt;&gt;&gt;         at org.archive.crawler.admin.CrawlJob.setupForCrawlStart(CrawlJob.java:828)\n&gt;&gt;&gt;         at org.archive.crawler.admin.CrawlJobHandler.startNextJobInternal(CrawlJobHandler.java:1135)\n&gt;&gt;&gt;         at org.archive.crawler.admin.CrawlJobHandler$3.run(CrawlJobHandler.java:1118)\n&gt;&gt;&gt;         at java.lang.Thread.run(Thread.java:797)\n&gt;&gt;&gt; Caused by: java.lang.ClassCastException: com.sleepycat.je.tree.LN incompatible with com.sleepycat.je.tree.FileSummaryLN\n&gt;&gt;&gt;         at com.sleepycat.je.cleaner.UtilizationProfile.populateCache(UtilizationProfile.java:918)\n&gt;&gt;&gt;         at com.sleepycat.je.recovery.RecoveryManager.recover(RecoveryManager.java:189)\n&gt;&gt;&gt;         at com.sleepycat.je.dbi.EnvironmentImpl.&lt;init&gt;(EnvironmentImpl.java:276)\n&gt;&gt;&gt;         at com.sleepycat.je.dbi.DbEnvPool.getEnvironment(DbEnvPool.java:102)\n&gt;&gt;&gt;         at com.sleepycat.je.dbi.DbEnvPool.getEnvironment(DbEnvPool.java:54)\n&gt;&gt;&gt;         at com.sleepycat.je.Environment.&lt;init&gt;(Environment.java:80)\n&gt;&gt;&gt;         at org.archive.crawler.framework.CrawlController.setupBdb(CrawlController.java:481)\n&gt;&gt;&gt;         at org.archive.crawler.framework.CrawlController.initialize(CrawlController.java:385)\n&gt;&gt;&gt;         ... 4 more\n&gt;&gt;&gt;\n&gt;&gt;&gt;   \n&gt;&gt;&gt;       \n&gt;&gt;\n&gt;&gt;  \n&gt;&gt; Yahoo! Groups Links\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;     \n&gt;\n&gt;   \n\n\n"}}