{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":505466336,"authorName":"Romain Noel","from":"Romain Noel &lt;tereo27@...&gt;","profile":"tereo27","replyTo":"LIST","senderId":"MbAcJQFAGK27CzUC4Ni9sSXCzG0Y1sona-heWBBbfWYanj0VGnKWh7NaC5xXlM5dliNrsoPegoXhl34TQf_fwuJsMjdPjA","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] Candidate precedence","postDate":"1381846587","msgId":8373,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PERGQjNGQjk3LTY4NDAtNEIzRS1CMTdGLUExMUMzQTEyRjI4REBnbWFpbC5jb20+","inReplyToHeader":"PENBQS16NzBKRWRaTmJMeEpfTW5mOF9xTHUzUGctMVdDN1diKzBNRTRmWUhqRzhEYU4xQUBtYWlsLmdtYWlsLmNvbT4=","referencesHeader":"PDI4MTJBNDM0LTMyRjgtNDUwNy05NzgyLTc0NEZBRUQ2NjY2REBnbWFpbC5jb20+IDxDQUEtejcwSkVkWk5iTHhKX01uZjhfcUx1M1BnLTFXQzdXYiswTUU0ZllIakc4RGFOMUFAbWFpbC5nbWFpbC5jb20+"},"prevInTopic":8344,"nextInTopic":0,"prevInTime":8372,"nextInTime":8374,"topicId":8343,"numMessagesInTopic":3,"msgSnippet":"Hello Noah, Thank you for your answer The other solution is to manage the frontier in order to add Candidate CrawlURI to the pending queue when i want. I can","rawEmail":"Return-Path: &lt;tereo27@...&gt;\r\nX-Sender: tereo27@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 20929 invoked by uid 102); 15 Oct 2013 14:16:30 -0000\r\nX-Received: from unknown (HELO mtaq4.grp.bf1.yahoo.com) (10.193.84.143)\n  by m10.grp.bf1.yahoo.com with SMTP; 15 Oct 2013 14:16:30 -0000\r\nX-Received: (qmail 8892 invoked from network); 15 Oct 2013 14:16:30 -0000\r\nX-Received: from unknown (HELO mail-wg0-f45.google.com) (74.125.82.45)\n  by mtaq4.grp.bf1.yahoo.com with SMTP; 15 Oct 2013 14:16:30 -0000\r\nX-Received: by mail-wg0-f45.google.com with SMTP id z12so6768641wgg.0\n        for &lt;archive-crawler@yahoogroups.com&gt;; Tue, 15 Oct 2013 07:16:29 -0700 (PDT)\r\nX-Received: by 10.180.37.227 with SMTP id b3mr19708989wik.24.1381846589465;\n        Tue, 15 Oct 2013 07:16:29 -0700 (PDT)\r\nReturn-Path: &lt;tereo27@...&gt;\r\nX-Received: from [10.134.150.52] ([213.144.202.121])\n        by mx.google.com with ESMTPSA id mw9sm835532wib.0.2013.10.15.07.16.28\n        for &lt;archive-crawler@yahoogroups.com&gt;\n        (version=TLSv1 cipher=RC4-SHA bits=128/128);\n        Tue, 15 Oct 2013 07:16:28 -0700 (PDT)\r\nMime-Version: 1.0 (Apple Message framework v1283)\r\nContent-Type: multipart/alternative; boundary=&quot;Apple-Mail=_5B68FC9E-8F5D-4898-94E8-8B66293CB3C4&quot;\r\nDate: Tue, 15 Oct 2013 16:16:27 +0200\r\nIn-Reply-To: &lt;CAA-z70JEdZNbLxJ_Mnf8_qLu3Pg-1WC7Wb+0ME4fYHjG8DaN1A@...&gt;\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;2812A434-32F8-4507-9782-744FAED6666D@...&gt; &lt;CAA-z70JEdZNbLxJ_Mnf8_qLu3Pg-1WC7Wb+0ME4fYHjG8DaN1A@...&gt;\r\nMessage-Id: &lt;DFB3FB97-6840-4B3E-B17F-A11C3A12F28D@...&gt;\r\nX-Mailer: Apple Mail (2.1283)\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Romain Noel &lt;tereo27@...&gt;\r\nSubject: Re: [archive-crawler] Candidate precedence\r\nX-Yahoo-Group-Post: member; u=505466336; y=X5kLZDMZC87x-IVqh3nAl0ptYsUbDbaRDte8XxHki1yzblPca7wfU4aB5CWullwKCeYJEXnaCaUW8ic\r\nX-Yahoo-Profile: tereo27\r\n\r\n\r\n--Apple-Mail=_5B68FC9E-8F5D-4898-94E8-8B66293CB3C4\r\nContent-Transfer-Encoding: quoted-printable\r\nContent-Type: text/plain;\n\tcharset=windows-1252\r\n\r\nHello Noah,\nThank you for your answer\n\nThe other solution is to manage the =\r\nfrontier in order to add Candidate CrawlURI to the &quot;pending&quot; queue when i w=\r\nant. \nI can rerank candidates without considering their precedence; \n\nI cha=\r\nnged the pending uris&#39; queue in the BdbFrontier (initOtherQueues method). \n=\r\nI also need to overload the candidate Queue...but i don&#39;t find where this q=\r\nueue is created and how i can deal with it.\nCan you help me please ?\n\nRomai=\r\nn \n\nLe 18 sept. 2013 =E0 19:03, Noah Levitt a =E9crit :\n\n&gt; Hello Romain,\n&gt; =\r\n\n&gt; I&#39;m not sure I understand why you have to sleep. If your precedence\n&gt; ca=\r\nlculating thing (which I guess runs outside heritrix?) only responds\n&gt; when=\r\n it has the answer then you wouldn&#39;t need any messy sleeping. But\n&gt; in any =\r\ncase sleeping only affects one ToeThread. Processing of other\n&gt; urls contin=\r\nues in parallel. It sounds like you want processing of that\n&gt; same url to c=\r\nontinue in parallel, but that&#39;s not how heritrix works.\n&gt; Each processor ru=\r\nns in sequence. The one thing you can do to get more\n&gt; than one url from th=\r\ne same host to be processed in parallel, is set\n&gt; the value of parallelQueu=\r\nes on your queueAssignmentPolicy to something\n&gt; greater than 1. You should =\r\nbe conservative with that setting though\n&gt; because it lets heritrix violate=\r\n its usual politeness rules.\n&gt; \n&gt; Noah\n&gt; \n&gt; On Wed, Sep 18, 2013 at 1:56 AM=\r\n, Romain Noel &lt;tereo27@...&gt; wrote:\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; Hello,\n&gt; &gt;\n&gt; &gt; I want =\r\nto assign a precedence score for each URI according to information of\n&gt; &gt; i=\r\nts parent.\n&gt; &gt; The WARC of the parent need to be process and so it takes fe=\r\nw seconds to\n&gt; &gt; extract the needed information. That&#39;s why heritrix has to=\r\n wait before\n&gt; &gt; adding the candidate URI to the frontier.\n&gt; &gt;\n&gt; &gt; I try a =\r\nThread.sleep() into my precedence method but all heritrix stops.\n&gt; &gt; In fac=\r\nt i just want to subscribe my method to an event, or to wait x\n&gt; &gt; seconds,=\r\n before adding my new candidate to the frontier but meanwhile, i\n&gt; &gt; want t=\r\nhat heritrix keep crawling enqueued URI.\n&gt; &gt; Where and how can I do that ?\n=\r\n&gt; &gt; Maybe, it should be better to add all candidate URI without precedence,=\r\n and\n&gt; &gt; to re-order the candidate list into the frontier ? (where exactly =\r\n?)\n&gt; &gt;\n&gt; &gt; Thank&#39;s a lot\n&gt; &gt;\n&gt; &gt; Romain\n&gt; &gt; -- -- --\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; \n&gt; \n\n\r\n--Apple-Mail=_5B68FC9E-8F5D-4898-94E8-8B66293CB3C4\r\nContent-Transfer-Encoding: quoted-printable\r\nContent-Type: text/html;\n\tcharset=windows-1252\r\n\r\n&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body style=3D&quot;word-wrap: break-word; -webkit-nbsp-mode:=\r\n space; -webkit-line-break: after-white-space; &quot;&gt;&lt;div&gt;Hello Noah,&lt;/div&gt;&lt;div=\r\n&gt;Thank you for your answer&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The other solution is t=\r\no manage the frontier in order to add Candidate CrawlURI to the &quot;pending&quot; q=\r\nueue when i want.&nbsp;&lt;/div&gt;&lt;div&gt;I can rerank candidates without consideri=\r\nng their precedence;&nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I changed the pending u=\r\nris&#39; queue in the BdbFrontier (initOtherQueues method).&nbsp;&lt;/div&gt;&lt;div&gt;I a=\r\nlso need to overload the candidate Queue...but i don&#39;t find where this queu=\r\ne is created and how i can deal with it.&lt;/div&gt;&lt;div&gt;Can you help me please ?=\r\n&lt;/div&gt;&lt;div&gt;&lt;div apple-content-edited=3D&quot;true&quot;&gt;&lt;div style=3D&quot;word-wrap: brea=\r\nk-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; &quot;&gt;=\r\n&lt;span class=3D&quot;Apple-style-span&quot; style=3D&quot;border-collapse: separate; font-f=\r\namily: Helvetica; font-variant: normal; font-weight: normal; letter-spacing=\r\n: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-i=\r\nndent: 0px; text-transform: none; white-space: normal; widows: 2; word-spac=\r\ning: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-s=\r\npacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-ad=\r\njust: auto; -webkit-text-stroke-width: 0px; font-size: medium; &quot;&gt;&lt;div style=\r\n=3D&quot;word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: af=\r\nter-white-space; &quot;&gt;&lt;span class=3D&quot;Apple-style-span&quot; style=3D&quot;border-collaps=\r\ne: separate; font-family: Helvetica; font-variant: normal; font-weight: nor=\r\nmal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -=\r\nwebkit-auto; text-indent: 0px; text-transform: none; white-space: normal; w=\r\nidows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webki=\r\nt-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -=\r\nwebkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: m=\r\nedium; &quot;&gt;&lt;div style=3D&quot;word-wrap: break-word; -webkit-nbsp-mode: space; -we=\r\nbkit-line-break: after-white-space; &quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=3D&quot;word-wrap: br=\r\neak-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; =\r\n&quot;&gt;Romain&nbsp;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;br&gt;&lt;div&gt;&lt;div&gt;Le 18 s=\r\nept. 2013 =E0 19:03, Noah Levitt a =E9crit :&lt;/div&gt;&lt;br class=3D&quot;Apple-interc=\r\nhange-newline&quot;&gt;&lt;blockquote type=3D&quot;cite&quot;&gt;\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;div style=3D&quot;backgr=\r\nound-color: #fff;&quot;&gt;\n&lt;span style=3D&quot;display:none&quot;&gt;&nbsp;&lt;/span&gt;\n\n\n\n    &lt;div =\r\nid=3D&quot;ygrp-text&quot;&gt;&lt;p&gt;Hello Romain,&lt;br&gt;\n&lt;br&gt;\nI&#39;m not sure I understand why yo=\r\nu have to sleep. If your precedence&lt;br&gt;\ncalculating thing (which I guess ru=\r\nns outside heritrix?) only responds&lt;br&gt;\nwhen it has the answer then you wou=\r\nldn&#39;t need any messy sleeping. But&lt;br&gt;\nin any case sleeping only affects on=\r\ne ToeThread. Processing of other&lt;br&gt;\nurls continues in parallel. It sounds =\r\nlike you want processing of that&lt;br&gt;\nsame url to continue in parallel, but =\r\nthat&#39;s not how heritrix works.&lt;br&gt;\nEach processor runs in sequence. The one=\r\n thing you can do to get more&lt;br&gt;\nthan one url from the same host to be pro=\r\ncessed in parallel, is set&lt;br&gt;\nthe value of parallelQueues on your queueAss=\r\nignmentPolicy to something&lt;br&gt;\ngreater than 1. You should be conservative w=\r\nith that setting though&lt;br&gt;\nbecause it lets heritrix violate its usual poli=\r\nteness rules.&lt;br&gt;\n&lt;br&gt;\nNoah&lt;br&gt;\n&lt;br&gt;\nOn Wed, Sep 18, 2013 at 1:56 AM, Romai=\r\nn Noel &lt;&lt;a href=3D&quot;mailto:tereo27@...&quot;&gt;tereo27@...&lt;/a&gt;&gt; w=\r\nrote:&lt;br&gt;\n&gt;&lt;br&gt;\n&gt;&lt;br&gt;\n&gt; Hello,&lt;br&gt;\n&gt;&lt;br&gt;\n&gt; I want to assign =\r\na precedence score for each URI according to information of&lt;br&gt;\n&gt; its pa=\r\nrent.&lt;br&gt;\n&gt; The WARC of the parent need to be process and so it takes fe=\r\nw seconds to&lt;br&gt;\n&gt; extract the needed information. That&#39;s why heritrix h=\r\nas to wait before&lt;br&gt;\n&gt; adding the candidate URI to the frontier.&lt;br&gt;\n&g=\r\nt;&lt;br&gt;\n&gt; I try a Thread.sleep() into my precedence method but all heritr=\r\nix stops.&lt;br&gt;\n&gt; In fact i just want to subscribe my method to an event, =\r\nor to wait x&lt;br&gt;\n&gt; seconds, before adding my new candidate to the fronti=\r\ner but meanwhile, i&lt;br&gt;\n&gt; want that heritrix keep crawling enqueued URI.=\r\n&lt;br&gt;\n&gt; Where and how can I do that ?&lt;br&gt;\n&gt; Maybe, it should be better=\r\n to add all candidate URI without precedence, and&lt;br&gt;\n&gt; to re-order the =\r\ncandidate list into the frontier ? (where exactly ?)&lt;br&gt;\n&gt;&lt;br&gt;\n&gt; Than=\r\nk&#39;s a lot&lt;br&gt;\n&gt;&lt;br&gt;\n&gt; Romain&lt;br&gt;\n&gt; -- -- --&lt;br&gt;\n&gt;&lt;br&gt;\n&gt;&lt;br&gt;\n=\r\n&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&lt;/p&gt;\n\n    &lt;/div&gt;\n     \n\n    \n\n&lt;/div&gt;\n\n\n\n&lt;!-- end group e=\r\nmail --&gt;\n\n&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;\r\n--Apple-Mail=_5B68FC9E-8F5D-4898-94E8-8B66293CB3C4--\r\n\n"}}