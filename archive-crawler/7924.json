{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":548507781,"authorName":"Henrik Ranthin","from":"Henrik Ranthin &lt;Henrik.Ranthin@...&gt;","replyTo":"LIST","senderId":"E6XBmm_iDh-uouuATwyhWYUoNFWbd3kZj-mQ8aVofoESTHzvxHcwdoiw7W2kqHt_g3tuvZUVKZwr3Y75Al7EGRPMI4suR2fXOw5iir0YjXw8","spamInfo":{"isSpam":false,"reason":"3"},"subject":"RE: [archive-crawler] Usage of QuotaEnforcer","postDate":"1358771250","msgId":7924,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDFBMTJBOUM1MTBBMTI0NEQ4MERDNDYzMEU3OTVCODU1MTdBRkM3QkVAbWFpbHN0b3JlMS5hcHB0dXMubG9jYWw+","inReplyToHeader":"PDUwRjlDQkQ5LjgwMDAzMDFAYXJjaGl2ZS5vcmc+","referencesHeader":"PDFBMTJBOUM1MTBBMTI0NEQ4MERDNDYzMEU3OTVCODU1MTdBRkJGNjhAbWFpbHN0b3JlMS5hcHB0dXMubG9jYWw+IDw1MEVGMEI5Mi43MDkwNDAyQGFyY2hpdmUub3JnPiA8MUExMkE5QzUxMEExMjQ0RDgwREM0NjMwRTc5NUI4NTUxN0FGQzNCREBtYWlsc3RvcmUxLmFwcHR1cy5sb2NhbD4gPDUwRjdBNTlDLjgwODA5MDNAYXJjaGl2ZS5vcmc+IDwxQTEyQTlDNTEwQTEyNDREODBEQzQ2MzBFNzk1Qjg1NTE3QUZDNEVGQG1haWxzdG9yZTEuYXBwdHVzLmxvY2FsPiA8NTBGOUNCRDkuODAwMDMwMUBhcmNoaXZlLm9yZz4="},"prevInTopic":7922,"nextInTopic":0,"prevInTime":7923,"nextInTime":7925,"topicId":7900,"numMessagesInTopic":7,"msgSnippet":"It s the only line in crawl.log that references the hostname. I ll look into the DNS handling. Regards, Henrik ... From: archive-crawler@yahoogroups.com","rawEmail":"Return-Path: &lt;Henrik.Ranthin@...&gt;\r\nX-Sender: Henrik.Ranthin@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 87427 invoked from network); 21 Jan 2013 12:27:32 -0000\r\nX-Received: from unknown (10.193.84.131)\n  by m2.grp.bf1.yahoo.com with QMQP; 21 Jan 2013 12:27:32 -0000\r\nX-Received: from unknown (HELO mail.apptus.com) (212.247.86.71)\n  by mta4.grp.bf1.yahoo.com with SMTP; 21 Jan 2013 12:27:31 -0000\r\nX-Received: from MAILFRONT2.apptus.local (192.168.8.203) by mail.apptus.com\n (192.168.99.70) with Microsoft SMTP Server (TLS) id 14.1.438.0; Mon, 21 Jan\n 2013 13:27:45 +0100\r\nX-Received: from MAILSTORE1.apptus.local ([fe80::5d45:60ab:5875:3167]) by\n mailfront2.apptus.local ([::1]) with mapi id 14.01.0438.000; Mon, 21 Jan 2013\n 13:27:31 +0100\r\nTo: &quot;archive-crawler@yahoogroups.com&quot; &lt;archive-crawler@yahoogroups.com&gt;\r\nThread-Topic: [archive-crawler] Usage of QuotaEnforcer\r\nThread-Index: Ac3uSzjWsExRVlVkQSmuTvZ0+pOnAQBDqGgAARqzoJAALW2AAAA4QCtwABm9wYAAg+tU4A==\r\nDate: Mon, 21 Jan 2013 12:27:30 +0000\r\nMessage-ID: &lt;1A12A9C510A1244D80DC4630E795B85517AFC7BE@...&gt;\r\nReferences: &lt;1A12A9C510A1244D80DC4630E795B85517AFBF68@...&gt;\n &lt;50EF0B92.7090402@...&gt;\n &lt;1A12A9C510A1244D80DC4630E795B85517AFC3BD@...&gt;\n &lt;50F7A59C.8080903@...&gt;\n &lt;1A12A9C510A1244D80DC4630E795B85517AFC4EF@...&gt;\n &lt;50F9CBD9.8000301@...&gt;\r\nIn-Reply-To: &lt;50F9CBD9.8000301@...&gt;\r\nAccept-Language: en-US, sv-SE\r\nContent-Language: en-US\r\nX-MS-Has-Attach:\r\nX-MS-TNEF-Correlator:\r\nContent-Type: text/plain; charset=&quot;us-ascii&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nMIME-Version: 1.0\r\nReturn-Path: Henrik.Ranthin@...\r\nX-eGroups-Msg-Info: 2:3:4:0:0\r\nFrom: Henrik Ranthin &lt;Henrik.Ranthin@...&gt;\r\nSubject: RE: [archive-crawler] Usage of QuotaEnforcer\r\nX-Yahoo-Group-Post: member; u=548507781\r\n\r\nIt&#39;s the only line in crawl.log that references the hostname. I&#39;ll look int=\r\no the DNS handling.\n\nRegards, Henrik\n\n\n-----Original Message-----\nFrom: arc=\r\nhive-crawler@yahoogroups.com [mailto:archive-crawler@yahoogroups.com] On Be=\r\nhalf Of Gordon Mohr\nSent: den 18 januari 2013 23:25\nTo: archive-crawler@yah=\r\noogroups.com\nSubject: Re: [archive-crawler] Usage of QuotaEnforcer\n\nThat cr=\r\nawl.log line indicates several things:\n\n(1) The &#39;0&#39; status code means the D=\r\nNS lookup never succeeded, and the &quot;30t&quot; annotation indicates the URI was t=\r\nried 30 times without success before generating this log line.\n\nYou will wa=\r\nnt to look into how the crawling machine is set to resolve\nhostnames: what =\r\nlocal or remote DNS servers are consulted, and whether these may be throttl=\r\ning lookups or aggressively caching failures (either of which might explain=\r\n why a seed succeeds alone but in a large crawl seems &#39;randomly&#39; to fail).\n=\r\n\n(2) The &quot;Q:hostMaxFetchSuccesses&quot; annotation means the URI was judged over=\r\n that quota. This is hard for me to interpret. It should only be applied if=\r\n in fact there were over 100 other successes for the same hostname.\n\nAre th=\r\nere no other lines in the crawl.log at all referencing the hostname &quot;www.el=\r\nectricaldesigndrafting.com&quot; (both http and dns)?\n\nIt&#39;s possible that the su=\r\nccess-accounting is miscounting the failures... \nbut even then I&#39;d expect m=\r\nore than one line (reporting 30 tries) in order for the wrong-count to exce=\r\ned 100.\n\nStill, if there&#39;s a problem here, it&#39;s secondary to the indication=\r\n that DNS lookup for this host is sometimes failing entirely and repeatedly=\r\n.\n\n- Gordon\n\nOn 1/18/13 2:02 AM, Henrik Ranthin wrote:\n&gt; [Attachment(s) &lt;#T=\r\nopText&gt; from Henrik Ranthin included below]\n&gt;\n&gt; Hi!\n&gt;\n&gt; I had some non-vali=\r\nd URIs in the seeds list. However, I removed these \n&gt; and I ran the job aga=\r\nin. And I still got the same behavior.\n&gt;\n&gt; The only settings I changed is t=\r\nhe number of threads and the \n&gt; quotaenforcer.  I have attached the job con=\r\nfiguration, maybe someone \n&gt; can have a quick look.\n&gt;\n&gt; Below is an example=\r\n of a seed that hasn&#39;t been crawled.\n&gt;\n&gt;  From seeds-report.txt:\n&gt;\n&gt; 0 NOTC=\r\nRAWLED http://www.electricaldesigndrafting.com/\n&gt;\n&gt;  From crawl.log:\n&gt;\n&gt; 20=\r\n13-01-17T12:35:30.607Z     0          -\n&gt; dns:www.electricaldesigndrafting.=\r\ncom P \n&gt; http://www.electricaldesigndrafting.com/ unknown #114 - - - \n&gt; Q:h=\r\nostMaxFetchSuccesses,30t\n&gt;\n&gt; I if feed the crawler with just that single se=\r\ned, it gets crawled as \n&gt; expected.\n&gt;\n&gt; Could the problems be dns-related? =\r\nDns lookup failures or similar?\n&gt;\n&gt; I also tried to change the dns config a=\r\ns below:\n&gt;\n&gt; &lt;bean id=3D&quot;fetchDns&quot; class=3D&quot;org.archive.modules.fetcher.Fet=\r\nchDNS&quot;&gt;\n&gt;\n&gt;    &lt;property name=3D&quot;acceptNonDnsResolves&quot; value=3D&quot;true&quot; /&gt;\n&gt;\n=\r\n&gt; But it didn&#39;t help.\n&gt;\n&gt; Regards,\n&gt;\n&gt; Henrik\n&gt;\n&gt; *From:*archive-crawler@ya=\r\nhoogroups.com\n&gt; [mailto:archive-crawler@yahoogroups.com] *On Behalf Of *Gor=\r\ndon Mohr\n&gt; *Sent:* den 17 januari 2013 08:18\n&gt; *To:* archive-crawler@yahoog=\r\nroups.com\n&gt; *Cc:* Henrik Ranthin\n&gt; *Subject:* Re: [archive-crawler] Usage o=\r\nf QuotaEnforcer\n&gt;\n&gt; Are you sure the seeds that are NOTCRAWLED are valid, r=\r\nesponding URIs?\n&gt;\n&gt;  From your screenshot, 200 threads in a 800MB heap migh=\r\nt be a bit \n&gt; much, though without other errors/alerts, that&#39;s probably not=\r\n the \n&gt; problem you&#39;re hitting.\n&gt;\n&gt; I notice that in the screenshot, the la=\r\nrgest number of queues (24,730) \n&gt; are in the &#39;RETIRED&#39; state. That indicat=\r\nes that they&#39;ve hit a limit \n&gt; for crawling, either the queueTotalBudget or=\r\n something that the \n&gt; QuotaEnforcer saw and used the &#39;force-retire&#39; option=\r\n to enforce.\n&gt;\n&gt; Did you change any of the other &#39;budget&#39;-related settings?=\r\n\n&gt;\n&gt; Also, your crawl-report shows over 24K &#39;URI failures&#39;. These may \n&gt; ap=\r\npear in the crawl-log with a status code; do they? What&#39;s a \n&gt; representati=\r\nve line for a seed that you expect would be collected but isn&#39;t?\n&gt;\n&gt; - Gord=\r\non\n&gt;\n&gt; On 1/16/13 1:04 AM, Henrik Ranthin wrote:\n&gt;  &gt; Hi!\n&gt;  &gt;\n&gt;  &gt; The sta=\r\ntus is set to NONCRAWLED in the seeds report.\n&gt;  &gt;\n&gt;  &gt; I tried to run the =\r\njob again and after a while it seems like the \n&gt; threads are starving. The =\r\ncrawling runs fast in the beginning and \n&gt; after a while it&#39;s just getting =\r\nslower and slower until it finally stops.\n&gt;  &gt; From the job page in the Her=\r\nitrix UI:\n&gt;  &gt; 200 threads: 200 ABOUT_TO_GET_URI; 200 noActiveProcessor  &gt; =\r\n &gt; I \n&gt; also attached a screenshot of the job page.\n&gt;  &gt;\n&gt;  &gt; I checked the=\r\n logs and reports and in the uri-errors.log and I have \n&gt; about 700 items s=\r\nimilar to the line below but with different uri:\n&gt;  &gt; 2013-01-11T12:03:49.7=\r\n28Z http://ablemove.net/ &quot;http scheme specific \n&gt; part is too short: //&quot; ht=\r\ntp://  &gt; But I don&#39;t know if that could \n&gt; contribute?\n&gt;  &gt;\n&gt;  &gt; From crawl=\r\n-report.log:\n&gt;  &gt; #######################################################\n&gt;=\r\n  &gt; crawl name: basic\n&gt;  &gt; crawl status: Finished\n&gt;  &gt; duration: 7h15m20s36=\r\n4ms\n&gt;  &gt;\n&gt;  &gt; seeds crawled: 235\n&gt;  &gt; seeds uncrawled: 23946\n&gt;  &gt;\n&gt;  &gt; host=\r\ns visited: 24828\n&gt;  &gt;\n&gt;  &gt; URIs processed: 40636\n&gt;  &gt; URI successes: 14043\n=\r\n&gt;  &gt; URI failures: 24734\n&gt;  &gt; URI disregards: 1859\n&gt;  &gt;\n&gt;  &gt; novel URIs: 14=\r\n043\n&gt;  &gt;\n&gt;  &gt; total crawled bytes: 764213072 (729 MiB)  &gt; novel crawled byt=\r\nes: \n&gt; 764213072 (729 MiB)  &gt;  &gt; URIs/sec: 0.54  &gt; KB/sec: 28  &gt; \n&gt; #######=\r\n################################################\n&gt;  &gt;\n&gt;  &gt;\n&gt;  &gt; Regards,\n&gt; =\r\n &gt; Henrik\n&gt;  &gt;\n&gt;  &gt;\n&gt;  &gt;\n&gt;  &gt; -----Original Message-----\n&gt;  &gt; From: archive=\r\n-crawler@yahoogroups.com \n&gt; &lt;mailto:archive-crawler%40yahoogroups.com&gt;\n&gt; [m=\r\nailto:archive-crawler@yahoogroups.com\n&gt; &lt;mailto:archive-crawler%40yahoogrou=\r\nps.com&gt;] On Behalf Of Noah Levitt  \n&gt; &gt; Sent: den 10 januari 2013 19:42  &gt; =\r\nTo: \n&gt; archive-crawler@yahoogroups.com \n&gt; &lt;mailto:archive-crawler%40yahoogr=\r\noups.com&gt;\n&gt;  &gt; Cc: Henrik Ranthin\n&gt;  &gt; Subject: Re: [archive-crawler] Usage=\r\n of QuotaEnforcer  &gt;  &gt; Hello \n&gt; Henrik,  &gt;  &gt; In my brief test, QuotaEnfor=\r\ncer configured as you \n&gt; describe worked fine for me and didn&#39;t prevent any=\r\n seeds from being \n&gt; crawled. Maybe some other part of your configuration i=\r\ns responsible? \n&gt; What&#39;s the fetch status in the seeds report of the uncraw=\r\nled seeds? \n&gt; Anything else in the logs?\n&gt;  &gt;\n&gt;  &gt; Noah\n&gt;  &gt;\n&gt;  &gt; On 2013-0=\r\n1-09 01:57 , Henrik Ranthin wrote:\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt; Hi!\n&gt;  &gt;&gt;\n&gt;  &gt;&gt; I want=\r\n to limit the number of documents per site and I tried using \n&gt; the QuotaEn=\r\nforcer to do so (I&#39;m using Heritrix 3.1.1).\n&gt;  &gt;&gt;\n&gt;  &gt;&gt; At first it seemed =\r\nto work and in the hosts report it looks like \n&gt; that the correct number of=\r\n documents has been crawled for each host.\n&gt;  &gt;&gt;\n&gt;  &gt;&gt; However, when I chec=\r\nked the status a few hours later the job had \n&gt; finished and most of the se=\r\neds had not been crawled.\n&gt;  &gt;&gt;\n&gt;  &gt;&gt; From the job log:\n&gt;  &gt;&gt;\n&gt;  &gt;&gt; 2013-01=\r\n-08T20:38:06.740Z INFO FINISHED 20130108131240  &gt;&gt;  &gt;&gt; \n&gt; 2013-01-08T20:38:=\r\n04.739Z INFO EMPTY 20130108131240  &gt;&gt;  &gt;&gt; \n&gt; 2013-01-08T20:38:04.739Z INFO =\r\nSTOPPING 20130108131240  &gt;&gt;  &gt;&gt; \n&gt; 2013-01-08T13:12:58.056Z INFO RUNNING 20=\r\n130108131240  &gt;&gt;  &gt;&gt; Am I \n&gt; using the correct configuration for QuotaEnfor=\r\ncer? And is this the \n&gt; prescribed way to limit the number of documents per=\r\n site?\n&gt;  &gt;&gt;\n&gt;  &gt;&gt; Below is the configuration I changed for QuotaEnforcer (=\r\nother \n&gt; configuration is just default):\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;=\r\n&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;=\r\n  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;=\r\n&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt; Regards=\r\n,\n&gt;  &gt;&gt;\n&gt;  &gt;&gt; Henrik\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;\n&gt;  &gt;\n&gt;  &gt; ---------------=\r\n---------------------\n&gt;  &gt;\n&gt;  &gt; Yahoo! Groups Links\n&gt;  &gt;\n&gt;  &gt;\n&gt;  &gt;\n&gt;  &gt;\n&gt;  =\r\n&gt;\n&gt;  &gt; ------------------------------------\n&gt;  &gt;\n&gt;  &gt; Yahoo! Groups Links\n&gt;=\r\n  &gt;\n&gt;  &gt;\n&gt;  &gt;\n&gt;\n&gt;\n&gt; Attachment(s) from Henrik Ranthin\n&gt;\n&gt; 1 of 1 File(s)\n&gt;\n=\r\n&gt; crawler-beans.cxml\n&gt; &lt;http://xa.yimg.com/kq/groups/8759867/53518656/name/=\r\ncrawler-beans%2Ecx\n&gt; ml&gt;\n&gt;\n&gt; \n\n\n------------------------------------\n\nYahoo=\r\n! Groups Links\n\n\n\n\n"}}