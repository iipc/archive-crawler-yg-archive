{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr (archive.org)","from":"&quot;Gordon Mohr (archive.org)&quot; &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"6fspv0qIfQDjhyunwjZoRpUh3Ry4UIlSZiTWdbeIa0nTQr5YEL3VBvKM5dFLxER-gVyDSwIGBeM_HEeDJmO-0roAivPdWMI0uHgAGruI4TmEJniL1gAT","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Scope Qs Re: [archive-crawler] Re: Large crawl experience (like, 500M links)","postDate":"1135299731","msgId":2461,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQzQUI0QzkzLjMwMDA0MDNAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGRvZjNsNSs1MzVxQGVHcm91cHMuY29tPg==","referencesHeader":"PGRvZjNsNSs1MzVxQGVHcm91cHMuY29tPg=="},"prevInTopic":2458,"nextInTopic":2463,"prevInTime":2460,"nextInTime":2462,"topicId":2391,"numMessagesInTopic":12,"msgSnippet":"... Yes. ... Yes, though some notes to keep in mind: - when adding URIs with the JMX importUris, the scope rules are not applied immediately: even URIs that","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 46673 invoked from network); 23 Dec 2005 01:02:17 -0000\r\nReceived: from unknown (66.218.66.166)\n  by m23.grp.scd.yahoo.com with QMQP; 23 Dec 2005 01:02:17 -0000\r\nReceived: from unknown (HELO ia00524.archive.org) (207.241.224.171)\n  by mta5.grp.scd.yahoo.com with SMTP; 23 Dec 2005 01:02:17 -0000\r\nReceived: (qmail 11034 invoked by uid 100); 23 Dec 2005 00:57:43 -0000\r\nReceived: from adsl-71-130-102-78.dsl.pltn13.pacbell.net (HELO ?192.168.1.10?) (gojomo@...@71.130.102.78)\n  by mail-dev.archive.org with SMTP; 23 Dec 2005 00:57:43 -0000\r\nMessage-ID: &lt;43AB4C93.3000403@...&gt;\r\nDate: Thu, 22 Dec 2005 17:02:11 -0800\r\nUser-Agent: Mozilla Thunderbird 1.0.7-1.1.fc3 (X11/20050929)\r\nX-Accept-Language: en-us, en\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;dof3l5+535q@...&gt;\r\nIn-Reply-To: &lt;dof3l5+535q@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-Spam-DCC: : \r\nX-Spam-Checker-Version: SpamAssassin 2.63 (2004-01-11) on ia00524.archive.org\r\nX-Spam-Level: \r\nX-Spam-Status: No, hits=-78.4 required=7.0 tests=AWL,USER_IN_WHITELIST \n\tautolearn=no version=2.63\r\nX-eGroups-Msg-Info: 2:12:4:0\r\nFrom: &quot;Gordon Mohr (archive.org)&quot; &lt;gojomo@...&gt;\r\nSubject: Scope Qs Re: [archive-crawler] Re: Large crawl experience (like,\n 500M links)\r\nX-Yahoo-Group-Post: member; u=137285340; y=HqiqmlSOep7sAaKgqqXSgUFKS-Nu2hDBIGulSBCULda4\r\nX-Yahoo-Profile: gojomo\r\n\r\njoehung302 wrote:\n&gt; Follow up questions on SurtPrefixScope:\n&gt; \n&gt; I&#39;m confused about the relationship between seeds and \n&gt; SurtPrefixScope.\n&gt; \n&gt; Let&#39;s say I have a SurtScope for crawling .edu sites. something like \n&gt; this:\n&gt; \n&gt; +http://(edu,\n&gt; \n&gt; Then I supply a bunch of regular URLs in seeds.txt.\n&gt; \n&gt; The crawler starts, go through URLs in seeds.txt, filter out \n&gt; anything except *.edu. Start crawling happily.\n\nYes.\n\n&gt; Then I use JMX client to add a bunch of new URLs into the crawler. I \n&gt; assume it will filter out non-edu sites again and schedule new URLs \n&gt; to crawl. \n\nYes, though some notes to keep in mind:\n  - when adding URIs with the JMX importUris, the scope rules are not\n    applied immediately: even URIs that would not pass the existing scope\n    rules can be scheduled in the frontier. However, if you&#39;ve retained the\n    default &quot;Preselector&quot; processor, which rechecks URI scope when it is\n    released from the frontier, they may be rejected at that point.\n  - if you flag the URIs as new seeds, and you&#39;ve set the scope to be\n    derived from, adding new seeds will be alter your current seeds.txt\n    and should expand the effective scope.\n    (HOWEVER, looking at the code right now, it looks like this might\n    be broken in SurtPrefixScope, although it works as intended in the\n    SurtPrefixedDecideRule used to effect SURT-based scopes in\n    DecidingScope.)\n  - You can import URIs using the same format as the recovery log uses,\n    with a &#39;hopsPath&#39; (the string of letters describing how the URI\n    was discovered) and &#39;via&#39; (immediately preceding URI). (This may\n    effect further scoping decisions, and is relevant to one of your\n    questions below.)\n\n&gt; My question is, once those new URLs gets downloaded, \n&gt; \n&gt; - How does heritrix decide whether to download links extracted from \n&gt; newly-added URLs? \n\nEvery URI that is discovered by the Extractor processors gets queued up\ninside the originating URI as it continues its processing. The &quot;LinksScoper&quot;\nprocessor then tests each discovered URI against the configured crawl scope:\nif the scope accepts the URI, it survives to be scheduled into the frontier\nin a future step (the &quot;FrontierScheduler&quot; processor). If the scope rejects\nthe URI, it is discarded.\n\n(As noted above, the &quot;Preselector&quot; also redundantly rechecks scope\nwhen the URI comes out of the frontier -- in case the scope has changed.\nIf your scope never changes, you could leave Preselector out; if your scope\nrarely changes, you could uncheck the &#39;enabled&#39; option on the Preselector so\nit&#39;s normally skipped -- but then if you do change scope, remember to enable\nthe rechecking.)\n\n&gt; - How does max-link-hop and max-trans-hop parameters in the \n&gt; SurtPrefixScope comes into play w.r.t those extracted links?\n\nThe &#39;hopsPath&#39; chain is the important determinant of how these\nmaximums are applied. If there are more &#39;L&#39; hops in the chain than\n&#39;max-link-hops&#39;, a URI is ruled-out, even if it would otherwise\nbe in scope.\n\nIn contrast, the &#39;max-trans-hops&#39; indicates how much of a &#39;free ride&#39;\ngiven to URIs that are &#39;transcluded&#39; -- meaning referred to as necessary\ninside a purely in-scope page, as with an IMG or FRAME SRC. As long as\nthe number of &#39;transitive hops&#39; (&#39;P&#39;recondition/&#39;R&#39;eferral/&#39;E&#39;mbed/\n&#39;X&#39;speculative-embed) at the *end* of the &#39;hopsPath&#39; doesn&#39;t exceed the\n&#39;max-trans-hops&#39;, the URI will be ruled-in, even if it otherwise would\nnot be in scope.\n\nSo for example a hopsPath of &#39;LLXLEE&#39; has *2* trans-hops at the end.\nIf you were crawling &#39;*.edu&#39;, but a URI with &#39;LLXLEE&#39; hops-path was\non a &#39;.com&#39; host, it would still be included if your &#39;max-trans-hops&#39;\nwas 2 or higher, but discarded if your &#39;max-trans-hops&#39; was 1 or 0.\n\nHope this helps clear things up.\n\nIf you are trying new scopes, the otherthing to look into is the\nDecidingScope. It &#39;unwraps&#39; some of the things bundled together in the\nclassic scopes to be separate reorderable &#39;DecideRules&#39;, applied in\nsequence. As a result, you can gain even finer control over what&#39;s\nincluded and what isn&#39;t.\n\n- Gordon @ IA\n\n\n\n\n&gt; Thanks,\n&gt; -joe\n&gt; \n&gt; \n&gt; --- In archive-crawler@yahoogroups.com, &quot;joehung302&quot; &lt;joe.hung@c...&gt; \n&gt; wrote:\n&gt; \n&gt;&gt;Thanks a lot for the insight.\n&gt;&gt;\n&gt;&gt;I&#39;ll change to use 32bit JVM immediately.\n&gt;&gt;\n&gt;&gt;I&#39;m using the BloomUriUniqFilter already.\n&gt;&gt;\n&gt;&gt;I&#39;ll do some reading on SurtPrefixScope and see if I can do \n&gt;&gt;something to get rid of domain scope.\n&gt;&gt;\n&gt;&gt;Will keep you guys posted (or, keep bugging you guys).\n&gt;&gt;\n&gt;&gt;cheers,\n&gt;&gt;-joe\n&gt;&gt;\n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt;  \n&gt; Yahoo! Groups Links\n&gt; \n&gt; \n&gt; \n&gt;  \n&gt; \n&gt; \n\n\n"}}