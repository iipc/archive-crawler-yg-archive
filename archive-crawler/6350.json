{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":432736498,"authorName":"bertrand.dechoux","from":"&quot;bertrand.dechoux&quot; &lt;bertrand.dechoux@...&gt;","profile":"bertrand.dechoux","replyTo":"LIST","senderId":"HGor3ghOr6f-y9e--pHD55E2-Tc1yqZqUcIHKzJUCTVwcsuezZavV3TfXlsba3ZpFYd7ZNqZ4nUaKWq9YGqP5P_eeC08hhif0EHdfr3l6YJsUTdpdzo","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: H3 and custom HDFSWriterProcessor : questions about checkpoint and terminate","postDate":"1265128240","msgId":6350,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PGhrOWp2ZythZW0yQGVHcm91cHMuY29tPg==","inReplyToHeader":"PDRCNjdCOTg3LjUwMjAyQGFyY2hpdmUub3JnPg=="},"prevInTopic":6348,"nextInTopic":6351,"prevInTime":6349,"nextInTime":6351,"topicId":6345,"numMessagesInTopic":9,"msgSnippet":"Hi, I have indeed noticed that HDFSWriterProcessor is an outside contribution. About the broken link, I am not sure which one you are talking about. The one at","rawEmail":"Return-Path: &lt;bertrand.dechoux@...&gt;\r\nX-Sender: bertrand.dechoux@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 32483 invoked from network); 2 Feb 2010 16:30:54 -0000\r\nX-Received: from unknown (98.137.34.44)\n  by m2.grp.sp2.yahoo.com with QMQP; 2 Feb 2010 16:30:54 -0000\r\nX-Received: from unknown (HELO n44d.bullet.mail.sp1.yahoo.com) (66.163.169.158)\n  by mta1.grp.sp2.yahoo.com with SMTP; 2 Feb 2010 16:30:54 -0000\r\nX-Received: from [69.147.65.149] by n44.bullet.mail.sp1.yahoo.com with NNFMP; 02 Feb 2010 16:30:41 -0000\r\nX-Received: from [98.137.35.12] by t9.bullet.mail.sp1.yahoo.com with NNFMP; 02 Feb 2010 16:30:41 -0000\r\nDate: Tue, 02 Feb 2010 16:30:40 -0000\r\nTo: archive-crawler@yahoogroups.com\r\nMessage-ID: &lt;hk9jvg+aem2@...&gt;\r\nIn-Reply-To: &lt;4B67B987.50202@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: &quot;bertrand.dechoux&quot; &lt;bertrand.dechoux@...&gt;\r\nSubject: Re: H3 and custom HDFSWriterProcessor : questions about checkpoint and terminate\r\nX-Yahoo-Group-Post: member; u=432736498; y=zKAnz4hxvdbyW_C7KUTP69ONykRQNcLTnUoy07u__W8eaXRbjck5nWGMZg\r\nX-Yahoo-Profile: bertrand.dechoux\r\n\r\nHi,\n\nI have indeed noticed that HDFSWriterProcessor is an outside contribut=\r\nion. About the broken link, I am not sure which one you are talking about. =\r\nThe one at http://crawler.archive.org/ works fine (with a redirection, gran=\r\nted).\n\nLike I said, I have no issue with the checkpointing. (The base class=\r\nes from H3 do everything fine). However, the terminate action did not work.=\r\n\n\nMy previous guess was correct (about the toe being blocked by the outputS=\r\ntream) so I hacked my way out. Basically, my subclass of CrawlController se=\r\nnds a special event before cleaning the toe-pool and my writerProcessor clo=\r\nses the pool when receiving the event.\n\nI have nothing to commit really to =\r\nH3 but I would recommend using more events : inside the frontier, the contr=\r\noller or both. An event before calling interrupt on all the toes was really=\r\n helpful in my case.\n\nBertrand\n\n \n\n--- In archive-crawler@yahoogroups.com, =\r\nGordon Mohr &lt;gojomo@...&gt; wrote:\n&gt;\n&gt; The HDFSWriterProcessor is an outside c=\r\nontribution, and in fact it \n&gt; appears the link from our news page to downl=\r\noad it is broken. (Do you \n&gt; have a working link?)\n&gt; \n&gt; We don&#39;t currently =\r\nuse it but I&#39;d like to help make sure it can be \n&gt; ported to H3 and work wi=\r\nth checkpointing.\n&gt; \n&gt; Seeing the whole stack might help narrow down the so=\r\nurce of the error.\n&gt; \n&gt; Am I correct in assuming that you have no errors wh=\r\nen terminating a \n&gt; crawl that hasn&#39;t been checkpointed?\n&gt; \n&gt; - Gordon @ IA=\r\n\n&gt; \n&gt; bertrand.dechoux wrote:\n&gt; &gt; Hi,\n&gt; &gt; \n&gt; &gt; I am using the version 3 of =\r\nheritrix and the latest version of hadoop (0.20). I have adapted the HDFSWr=\r\niterProcessor with regard to the changes done in Heritrix 3. And I also hav=\r\ne modified the information written in hadoop but that&#39;s a side story.\n&gt; &gt; \n=\r\n&gt; &gt; When I create a checkpoint, everything &quot;works fine&quot; i.e. the buffer(s) =\r\n-if any- are flushed and the file(s) closed. But when I terminate the crawl=\r\n job, I get a java.io.InterruptedIOException inside the DFSClient class (an=\r\n hadoop class).\n&gt; &gt; \n&gt; &gt; My &quot;educated guess&quot; would be that a few toes (thre=\r\nads) are waiting on the outputStream and that they are interupted when the =\r\nfrontier cleans the toes.\n&gt; &gt; \n&gt; &gt; Is that something you have already exper=\r\nienced? How would you fix it? Has anyone tried the original HDFSWriterProce=\r\nssor and experienced the same error?\n&gt; &gt; \n&gt; &gt; Thanks in advance\n&gt; &gt; \n&gt; &gt; Be=\r\nrtrand\n&gt; &gt; \n&gt; &gt; \n&gt; &gt; \n&gt; &gt; ------------------------------------\n&gt; &gt; \n&gt; &gt; Yah=\r\noo! Groups Links\n&gt; &gt; \n&gt; &gt; \n&gt; &gt;\n&gt;\n\n\n\n"}}