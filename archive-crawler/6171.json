{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"U2QxSvwUNho4Sq15u-xN9TmidkWWZ5FaSuCOKEjgQDzx9nhyOYtZRbbI8V7cL0r3JP9pYBHwaTRbVp_xTTRkg6V8eVoe7xw","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: [archive-crawler] Re: (subject edited) Recrawling In Heritrix3.0.0-RC1","postDate":"1259092053","msgId":6171,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDRCMEMzODU1LjQwOTA2MDRAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PDQ2MzczNS45NTg3Mi5xbUB3ZWI0MzEzNC5tYWlsLnNwMS55YWhvby5jb20+","referencesHeader":"PDQ2MzczNS45NTg3Mi5xbUB3ZWI0MzEzNC5tYWlsLnNwMS55YWhvby5jb20+"},"prevInTopic":6170,"nextInTopic":0,"prevInTime":6170,"nextInTime":6172,"topicId":6140,"numMessagesInTopic":6,"msgSnippet":"I see two potential issues in your order: - There s no FetchHistoryProcessor, which is still necessary to collect deduplication-relevant information and insert","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 85066 invoked from network); 24 Nov 2009 19:47:47 -0000\r\nX-Received: from unknown (66.196.94.106)\n  by m13.grp.re1.yahoo.com with QMQP; 24 Nov 2009 19:47:47 -0000\r\nX-Received: from unknown (HELO relay01.pair.com) (209.68.5.15)\n  by mta2.grp.re1.yahoo.com with SMTP; 24 Nov 2009 19:47:47 -0000\r\nX-Received: (qmail 88152 invoked from network); 24 Nov 2009 19:47:32 -0000\r\nX-Received: from 70.137.163.132 (HELO ?10.0.13.17?) (70.137.163.132)\n  by relay01.pair.com with SMTP; 24 Nov 2009 19:47:32 -0000\r\nX-pair-Authenticated: 70.137.163.132\r\nMessage-ID: &lt;4B0C3855.4090604@...&gt;\r\nDate: Tue, 24 Nov 2009 11:47:33 -0800\r\nUser-Agent: Thunderbird 2.0.0.23 (Windows/20090812)\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;463735.95872.qm@...&gt;\r\nIn-Reply-To: &lt;463735.95872.qm@...&gt;\r\nContent-Type: text/plain; charset=UTF-8; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] Re: (subject edited) Recrawling In Heritrix3.0.0-RC1\r\nX-Yahoo-Group-Post: member; u=137285340; y=_qNWCNP7FMfdf0tFhbPk_99Lj8Pq-26Rd3vClX8Nra8g\r\nX-Yahoo-Profile: gojomo\r\n\r\nI see two potential issues in your order:\n\n- There&#39;s no FetchHistoryProcessor, which is still necessary to collect \ndeduplication-relevant information and insert it into the CrawlURI where \nother processors expect it to be.\n\n- You define *3* BdbModules in total, 2 of which use the same directory. \n  I&#39;m surprised that doesn&#39;t cause any logged errors; I would expect \nsomething to conflict when two beans both try to begin an environment in \nthe same place. (But even without errors, it&#39;s unnecessary: two \nprocessors can be pointed to a single BdbModule, by using the same \nreference-by-name, and that&#39;s a better way to set things up.\n\nHope this helps,\n\n- Gordon @ IA\n\n\nPranay Pandey wrote:\n&gt; Hello Matt and Gordon,\n&gt; \n&gt; Following Gordon&#39;s advice and assuming HER-1706 to be fixed, I am using \n&gt; only two of the persistProcessors: load and store.\n&gt; As suggested, I am using the same BdbModule/&#39;history&#39; dir for both the \n&gt; processors.\n&gt; However I don&#39;t see any deduplication happening. Neither I am getting \n&gt; any exception or error to look into. I am using heritrix-3.0.0-RC1\n&gt; This is my config file. Have I missed something?\n&gt; http://cs.odu.edu/~pramo_p/crawler-beans.cxml\n&gt; \n&gt; wud appreciate any help on this.\n&gt; \n&gt; Thanks,\n&gt; Pranay\n&gt; \n&gt; --- On *Fri, 11/13/09, Matthew Warhaftig /&lt;mwarhaftig@...&gt;/* wrote:\n&gt; \n&gt; \n&gt;     From: Matthew Warhaftig &lt;mwarhaftig@...&gt;\n&gt;     Subject: Re: [archive-crawler] Recrawling In Heritrix3\n&gt;     To: archive-crawler@yahoogroups.com\n&gt;     Date: Friday, November 13, 2009, 9:04 PM\n&gt; \n&gt;      \n&gt; \n&gt;     Good advice, thank you Gordon.  Adding the recrawl processors to the\n&gt;     chain bean and pointing PersistLoadProcesso r directly to my\n&gt;     existing history (no preload) got the recrawl working.\n&gt; \n&gt; \n&gt;     Thanks,\n&gt;     Matt\n&gt; \n&gt; \n&gt;     On Nov 10, 2009, at 5:33 PM, Gordon Mohr wrote:\n&gt; \n&gt;&gt;      \n&gt;&gt;\n&gt;&gt;     Your setup looks generally correct. Are you perhaps forgetting to\n&gt;&gt;     both\n&gt;&gt;     declare the beans by name, *and* insert them by &lt;ref&gt; into the\n&gt;&gt;     &lt;list&gt; of\n&gt;&gt;     the chain bean?\n&gt;&gt;\n&gt;&gt;     Some other comments that may help in configuring these features in H3:\n&gt;&gt;\n&gt;&gt;     Matthew Warhaftig wrote:\n&gt;&gt;     &gt; In H3 I am trying to setup crawl jobs that\n&gt;&gt;     &gt; use FetchHistoryProcess or/PersistStoreP rocessor/\n&gt;&gt;     PersistLoadProce ssor to\n&gt;&gt;     &gt; discard duplicate content. I can get H1 to recrawl correctly but\n&gt;&gt;     the\n&gt;&gt;     &gt; same technique is not storing a history and finding duplicates\n&gt;&gt;     for me in\n&gt;&gt;     &gt; H3 (my job setup is based on these\n&gt;&gt;     &gt; postings: https://webarchive. jira.com/ wiki/display/ Heritrix/\n&gt;&gt;     Feature+Notes+ -+1.12.0\n&gt;&gt;     &lt;https://webarchive.jira.com/wiki/display/Heritrix/Feature+Notes+-+1.12.0&gt;\n&gt;&gt;     & http://tech. groups.yahoo. com/group/ archive-crawler/\n&gt;&gt;     message/5920\n&gt;&gt;     &lt;http://tech.groups.yahoo.com/group/archive-crawler/message/5920&gt;).\n&gt;&gt;     &gt;\n&gt;&gt;     &gt; For the storing job I added the following to the default\n&gt;&gt;     &gt; H3 crawler-beans. cxml file. In the Fetch Chain just after\n&gt;&gt;     &gt; the &quot;fetchHttp&quot; bean:\n&gt;&gt;     &gt;&gt; &lt;bean id=&quot;fetchHistoryPro cessor&quot;\n&gt;&gt;     &gt;&gt; class=&quot;org.archive. modules.recrawl. FetchHistoryProc essor&quot; &gt;\n&gt;&gt;     &lt;property\n&gt;&gt;     &gt;&gt; name=&quot;historyLength &quot; value=&quot;30&quot; /&gt; &lt;/bean&gt;\n&gt;&gt;     &gt;&gt;\n&gt;&gt;     &gt;&gt; &lt;bean id=&quot;persistStorePro cessor&quot;\n&gt;&gt;     &gt;&gt; class=&quot;org.archive. modules.recrawl. PersistStoreProc essor&quot; &gt;\n&gt;&gt;     &lt;/bean&gt;\n&gt;&gt;\n&gt;&gt;     Unrelated to your issues, in the near future it will be better to put\n&gt;&gt;     the persistStoreProcess or as the first in the &#39;dispositionChain&#39;\n&gt;&gt;     rather\n&gt;&gt;     than the last position of the &#39;fetchChain&#39; . Essentially, the\n&gt;&gt;     dispositionChain&#39; s activities will be atomic with regard to\n&gt;&gt;     checkpointing -- any URI that starts the dispositionChain will\n&gt;&gt;     finish it\n&gt;&gt;     before a checkpoint is stored -- but the fetchChain&#39;s activities\n&gt;&gt;     will not.\n&gt;&gt;\n&gt;&gt;     Also unrelated but good to know: H3&#39;s configuration makes it much\n&gt;&gt;     easier\n&gt;&gt;     for different components to optionally use separate BDB\n&gt;&gt;     environments on\n&gt;&gt;     disk. Two reasons one might want to do so: (1) distribute the IO\n&gt;&gt;     costs\n&gt;&gt;     over different disks; (2) keep distinct data separate on disk for\n&gt;&gt;     backup/migration- to-new-jobs, as with the difference between\n&gt;&gt;     queues/stateof the running crawl, and URI history for deduplication\n&gt;&gt;     purposes.\n&gt;&gt;\n&gt;&gt;     For example, you could declare...\n&gt;&gt;\n&gt;&gt;     &lt;bean id=&quot;persistStoreBdb &quot; class=&quot;org.archive. bdb.BdbModule&quot;\n&gt;&gt;     autowire-candidate= &quot;false&quot;&gt;\n&gt;&gt;     &lt;property name=&quot;dir&quot; value=&quot;history&quot; /&gt;\n&gt;&gt;     &lt;/bean&gt;\n&gt;&gt;\n&gt;&gt;     &lt;bean id=&quot;persistStorePro cessor&quot;\n&gt;&gt;     class=&quot;org.archive. modules.recrawl. PersistStoreProc essor&quot;&gt;\n&gt;&gt;     &lt;property name=&quot;bdbModule&quot; &gt;\n&gt;&gt;     &lt;ref bean=&quot;persistStoreB db&quot;/&gt;\n&gt;&gt;     &lt;/property&gt;\n&gt;&gt;     &lt;/bean&gt;\n&gt;&gt;\n&gt;&gt;     ...and then persistent URI history will collect in a &#39;history&#39;\n&gt;&gt;     directory\n&gt;&gt;     (which could be a full path to anywhere convenient) rather than being\n&gt;&gt;     mixed-in with other crawler state.\n&gt;&gt;\n&gt;&gt;     (The reason for the &#39;autowire-candidate =&quot;false&quot;&#39; is to prevent this\n&gt;&gt;     BdbModule from being a competitor to the default for all the objects\n&gt;&gt;     that expect one distinguished instance to be available for\n&gt;&gt;     autowiring.)\n&gt;&gt;\n&gt;&gt;     &gt; Then for another job to use this stored history I added the\n&gt;&gt;     following to\n&gt;&gt;     &gt; the default H3 crawler-bean. cxml file. In the Fetch Chain just\n&gt;&gt;     after the\n&gt;&gt;     &gt; &quot;preconditions&quot; bean:\n&gt;&gt;     &gt;&gt; &lt;bean id=&quot;persistLoadProc essor&quot;\n&gt;&gt;     &gt;&gt; class=&quot;org.archive. modules.recrawl. PersistLoadProce ssor&quot;&gt;\n&gt;&gt;     &lt;property\n&gt;&gt;     &gt;&gt; name=&quot;preloadSource &quot;\n&gt;&gt;     &gt;&gt; value=&quot;/Users/ mattwarhaftig/ Documents/ heritrix-\n&gt;&gt;     3.0.0-SNAPSHOT/ jobs/basic/ state&quot;\n&gt;&gt;     &gt;&gt; /&gt; &lt;/bean&gt;\n&gt;&gt;     &gt; And just after the &quot;fetchHttp&quot; bean:\n&gt;&gt;     &gt;&gt; &lt;bean id=&quot;fetchHistoryPro cessor&quot;\n&gt;&gt;     &gt;&gt; class=&quot;org.archive. modules.recrawl. FetchHistoryProc essor&quot; &gt;\n&gt;&gt;     &lt;property\n&gt;&gt;     &gt;&gt; name=&quot;historyLength &quot; value=&quot;30&quot; /&gt; &lt;/bean&gt;\n&gt;&gt;\n&gt;&gt;     Note that &#39;preloadSource&#39; causes the processor to scan the named\n&gt;&gt;     log or\n&gt;&gt;     directory, and copy all its contents into its current history\n&gt;&gt;     database.\n&gt;&gt;     If using this, make sure you&#39;re not pointing to the same path it&#39;s\n&gt;&gt;     currently\n&gt;&gt;\n&gt;&gt;     You could also skip the &#39;preload&#39; and directly point the\n&gt;&gt;     PersistLoadProcesso r to an existing history store:\n&gt;&gt;\n&gt;&gt;     &lt;bean id=&quot;persistLoadBdb&quot; class=&quot;org.archive. bdb.BdbModule&quot;\n&gt;&gt;     autowire-candidate= &quot;false&quot;&gt;\n&gt;&gt;     &lt;property name=&quot;dir&quot;\n&gt;&gt;     value=&quot;/Users/ mattwarhaftig/ Documents/ heritrix- 3.0.0-SNAPSHOT/\n&gt;&gt;     jobs/basic/ state&quot;/&gt;\n&gt;&gt;     &lt;/bean&gt;\n&gt;&gt;\n&gt;&gt;     &lt;bean id=&quot;persistLoadProc essor&quot;\n&gt;&gt;     class=&quot;org.archive. modules.recrawl. PersistLoadProce ssor&quot;&gt;\n&gt;&gt;     &lt;property name=&quot;bdbModule&quot; &gt;\n&gt;&gt;     &lt;ref bean=&quot;persistLoadBd b&quot;/&gt;\n&gt;&gt;     &lt;/property&gt;\n&gt;&gt;     &lt;/bean&gt;\n&gt;&gt;\n&gt;&gt;     (Except for the &#39;preload&#39;, if specified, the PersistLoadProcesso r\n&gt;&gt;     only\n&gt;&gt;     reads from its given BdbModule/environme nt, so you could reuse a\n&gt;&gt;     prior\n&gt;&gt;     crawl&#39;s persist-store target without damaging it.)\n&gt;&gt;\n&gt;&gt;     There&#39;s currently a problem with having both a PersistLoadProcesso\n&gt;&gt;     r and\n&gt;&gt;     PersistStoreProcess or in the same crawl using the same\n&gt;&gt;     BdbModule/directory [HER-1706], but that should work by the time\n&gt;&gt;     of the\n&gt;&gt;     H3 official release.\n&gt;&gt;\n&gt;&gt;     Hope this helps,\n&gt;&gt;\n&gt;&gt;     - Gordon @ IA\n&gt;&gt;\n&gt;&gt;     &gt; Am I declaring these beans correctly?\n&gt;&gt;     &gt;\n&gt;&gt;     &gt; Thanks,\n&gt;&gt;     &gt; Matt\n&gt;&gt;     &gt;\n&gt;&gt;     &gt;\n&gt;&gt;     &gt;\n&gt;&gt;\n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n\n"}}