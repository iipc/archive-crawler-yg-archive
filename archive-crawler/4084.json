{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":191387937,"authorName":"pandae667","from":"&quot;pandae667&quot; &lt;aaron667@...&gt;","profile":"pandae667","replyTo":"LIST","senderId":"quBwJyGyIDUlM2Arnby7AN_thr0Dd1IIX13BQV0XWqSptUAK0YGtFZfmF7wXZm3riy-2ug-vO20y080S5DOcYoKFjLu3","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: questions about heritrix memory consumption","postDate":"1176272589","msgId":4084,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PGV2aHVzZCtycmo5QGVHcm91cHMuY29tPg==","inReplyToHeader":"PDQ2MUMzMjU1LjkwMjAxMDZAYXJjaGl2ZS5vcmc+"},"prevInTopic":4082,"nextInTopic":4085,"prevInTime":4083,"nextInTime":4085,"topicId":4079,"numMessagesInTopic":8,"msgSnippet":"Hi Gordon, thanks for your quick reply. (1) I think it might be true, that jmap -histo doesn t force a GC. I ll look into this and try if things change after","rawEmail":"Return-Path: &lt;aaron667@...&gt;\r\nX-Sender: aaron667@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 38363 invoked from network); 11 Apr 2007 06:24:22 -0000\r\nReceived: from unknown (66.218.67.36)\n  by m27.grp.scd.yahoo.com with QMQP; 11 Apr 2007 06:24:22 -0000\r\nReceived: from unknown (HELO n20.bullet.sp1.yahoo.com) (69.147.64.217)\n  by mta10.grp.scd.yahoo.com with SMTP; 11 Apr 2007 06:24:22 -0000\r\nReceived: from [216.252.122.218] by n20.bullet.sp1.yahoo.com with NNFMP; 11 Apr 2007 06:23:09 -0000\r\nReceived: from [66.218.69.5] by t3.bullet.sp1.yahoo.com with NNFMP; 11 Apr 2007 06:23:09 -0000\r\nReceived: from [66.218.66.80] by t5.bullet.scd.yahoo.com with NNFMP; 11 Apr 2007 06:23:09 -0000\r\nDate: Wed, 11 Apr 2007 06:23:09 -0000\r\nTo: archive-crawler@yahoogroups.com\r\nMessage-ID: &lt;evhusd+rrj9@...&gt;\r\nIn-Reply-To: &lt;461C3255.9020106@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:6:0:0\r\nFrom: &quot;pandae667&quot; &lt;aaron667@...&gt;\r\nSubject: Re: questions about heritrix memory consumption\r\nX-Yahoo-Group-Post: member; u=191387937; y=WHV1SQ52qwCiLHAu-2x6eSB9TALHe3oaRbKNCf2-yhCTbHyU\r\nX-Yahoo-Profile: pandae667\r\n\r\nHi Gordon,\n\nthanks for your quick reply.\n(1) I think it might be true, that=\r\n &#39;jmap -histo&#39; doesn&#39;t force a GC.\nI&#39;ll look into this and try if things ch=\r\nange after a forced GC.\n(2) The last 50 jobs all are in the &quot;Finished&quot; stat=\r\ne, so I&#39;d presume\neverything finished just fine. (This machine only does &quot;s=\r\nmall&quot; jobs)\n\nThe main reason why I&#39;m mentioning all this is that my machine=\r\ns\nrunning the big crawls tend to &quot;die&quot; after about a week.\nOr to be more co=\r\nrrect, they run fine for one week. Then their task is\neither finished - or =\r\nI finish it via JMX. Now I enqueue the next job\nwhich runs OOME within 1 or=\r\n 2 days.\n\nAfter the first job has finished heritrix remains in a state of 4=\r\n.5GB\nof 5GB heap used -  so I think it seems reasonable to believe that\nsom=\r\nething from the previous job still remains in-memory.\n\nI&#39;m not sure why thi=\r\ns happens - if this is either a real memory leak\nor just the GC going nuts.=\r\n\n\nI have to admit that I still don&#39;t understand all of heritrix\ninternals, =\r\nbut I found this blog entry\n(http://blogs.oracle.com/charleslamb/2007/02/22=\r\n) interesting\nconcerning java BDB and OOME issues. Not sure if it applies t=\r\no\nheritrix as I&#39;, not sure if we have one or multiple environments.\n\nRegard=\r\ns\n  Olaf Freyer\n\n--- In archive-crawler@yahoogroups.com, Gordon Mohr &lt;gojom=\r\no@...&gt; wrote:\n&gt;\n&gt; Two possibilities come to mind:\n&gt; \n&gt; (1) I don&#39;t think &#39;j=\r\nmap -histo&#39; forces a GC first. And, its output\nseems \n&gt; peculiar given the =\r\nwebUI figures: it&#39;s showing over 1GB of byte arrays \n&gt; (&quot;[B&quot;), though the w=\r\nebUi reports only ~400MB heap in use. So I think\nthe \n&gt; &#39;jmap -histo&#39; figur=\r\nes contain dead objects. Maybe a forced GC would\ngive \n&gt; more sensible figu=\r\nres.\n&gt; \n&gt; (2) The crawl didn&#39;t finish completely or cleanly. It&#39;s not \n&gt; pa=\r\nused-at-finish waiting for a possible resume with more URIs, is it?\n&gt; \n&gt; - =\r\nGordon @ IA\n&gt; \n&gt; pandae667 wrote:\n&gt; &gt; Dear IA-Team,\n&gt; &gt; \n&gt; &gt; whilest analys=\r\ning the results of a previous crawl I decided to also\n&gt; &gt; take a closer loo=\r\nk at heritrix. To be more specific a closer look at\n&gt; &gt; the state heritrix =\r\nwas in after finishing the job.\n&gt; &gt; (basically heritrix-1.12 with some mino=\r\nr patches running under\njava 1.6)\n&gt; &gt; \n&gt; &gt; The webUI showed me the followin=\r\ng stats:\n&gt; &gt; \n&gt; &gt; Memory\n&gt; &gt; 402591 KB used\n&gt; &gt; 950456 KB current heap\n&gt; &gt; =\r\n3063488 KB max heap\n&gt; &gt; \n&gt; &gt; Now this is quite a lot memory being used whil=\r\ne sitting there idle.\n&gt; &gt; So I wondered what is eating up all my precious m=\r\nemory and this is\n&gt; &gt; what jmap -histo &lt;pid&gt; was able to tell me:\n&gt; &gt; \n&gt; &gt; =\r\nnum   #instances    #bytes  class name\n&gt; &gt; --------------------------------=\r\n------\n&gt; &gt;   1:   7716610   1352335640  [B\n&gt; &gt;   2:   5202265   208090600  =\r\ncom.sleepycat.je.tree.LN\n&gt; &gt;   3:     78155    81900656  [[B\n&gt; &gt;   4:     7=\r\n8149    81900152  [Lcom.sleepycat.je.tree.Node;\n&gt; &gt;   5:    469864    72832=\r\n376  [C\n&gt; &gt;   6:     24169    25050392  [J\n&gt; &gt;   7:    421191    20217168  =\r\njava.util.Hashtable$Entry\n&gt; &gt;   8:    467772    18710880  java.lang.String\n=\r\n&gt; &gt;   9:     75246    12641328  com.sleepycat.je.tree.BIN\n&gt; &gt;  10:    25968=\r\n7    12464976  org.archive.crawler.admin.SeedRecord\n&gt; &gt;  ...\n&gt; &gt;  ...\n&gt; &gt;  =\r\n...\n&gt; &gt; \n&gt; &gt; So what I&#39;m asking myself is: why do I still see about 5 milli=\r\non\n&gt; &gt; instances of com.sleepycat.je.tree.LN in memory whilest sitting ther=\r\ne\n&gt; &gt; idle and the last job having finished about 3 days ago ?\n&gt; &gt; \n&gt; &gt; Any=\r\none able to share some insights with me?\n&gt; &gt; \n&gt; &gt; Regards\n&gt; &gt;   Olaf Freyer=\r\n\n&gt; &gt; \n&gt; &gt; \n&gt; &gt; \n&gt; &gt;  \n&gt; &gt; Yahoo! Groups Links\n&gt; &gt; \n&gt; &gt; \n&gt; &gt;\n&gt;\n\n\n\n"}}