{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":168599281,"authorName":"Michael Stack","from":"Michael Stack &lt;stack@...&gt;","profile":"stackarchiveorg","replyTo":"LIST","senderId":"_-XY1Rv8j3Arvwp56sjwNFtjDhqMSuDfEhNafJRNAc5KKGbZESaQ3S-7isOukEI86tcXPvV92DRpH-79inwXuU_Xt7wtIn_i","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] Re: HeritrixProtocolSocketFactory","postDate":"1147401179","msgId":2858,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ0NjNGM0RCLjUwNjA2MDBAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGU0MHFycStuMzUzQGVHcm91cHMuY29tPg==","referencesHeader":"PGU0MHFycStuMzUzQGVHcm91cHMuY29tPg=="},"prevInTopic":2857,"nextInTopic":2863,"prevInTime":2857,"nextInTime":2859,"topicId":2846,"numMessagesInTopic":8,"msgSnippet":"... Thanks for finding the bug and trying to figure this out. I suspect the culprit is here: ","rawEmail":"Return-Path: &lt;stack@...&gt;\r\nX-Sender: stack@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 32786 invoked from network); 12 May 2006 02:32:10 -0000\r\nReceived: from unknown (66.218.67.34)\n  by m23.grp.scd.yahoo.com with QMQP; 12 May 2006 02:32:10 -0000\r\nReceived: from unknown (HELO dns.duboce.net) (63.203.238.114)\n  by mta8.grp.scd.yahoo.com with SMTP; 12 May 2006 02:32:10 -0000\r\nReceived: from [192.168.1.105] ([192.168.1.105])\n\tby dns-eth1.duboce.net (8.10.2/8.10.2) with ESMTP id k4C1JRw02743;\n\tThu, 11 May 2006 18:19:27 -0700\r\nMessage-ID: &lt;4463F3DB.5060600@...&gt;\r\nDate: Thu, 11 May 2006 19:32:59 -0700\r\nUser-Agent: Mozilla/5.0 (Macintosh; U; PPC Mac OS X Mach-O; en-US; rv:1.8.0.1) Gecko/20060127 SeaMonkey/1.0\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;e40qrq+n353@...&gt;\r\nIn-Reply-To: &lt;e40qrq+n353@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: Michael Stack &lt;stack@...&gt;\r\nSubject: Re: [archive-crawler] Re: HeritrixProtocolSocketFactory\r\nX-Yahoo-Group-Post: member; u=168599281; y=WxAPkajfFZBCMZBzHAu7-PaD4LVHntS0vmQnpKKYi4J_ibHstlKGDBUP\r\nX-Yahoo-Profile: stackarchiveorg\r\n\r\ntizo_trico wrote:\n&gt; St.Ack,\n&gt;\n&gt; Here is the deal:\n&gt;\n&gt; I have tested multiple instances with &#39;/local-instances.jsp&#39; page\n&gt; (Heritrix 1.8), and not our wrapper, but the problem is exactly the\n&gt; same!!!\n\nThanks for finding the bug and trying to figure this out.\n\nI suspect the culprit is here:\n\nhttp://crawler.archive.org/xref/org/archive/crawler/fetcher/FetchHTTP.html#1011\n\n... that we can only register one ProtocolSocketFactory with httpclient.\n\nINST_A from your illustration below registers first with INST_A&#39;s \nServerCache.  When INST_B starts, it registers a new \nHeritrixProtocolSocketFactory with a ServerCache from a different \nCrawlController -- one that hasn&#39;t been populated with the server thats \nbeing looked up.\n\nI&#39;d guess this is the problem. I don&#39;t have the httpclient src to hand \nand have to head out... Suggestions for how to fix welcome.  I&#39;ll take a \nlook in the morning.\n\nGood luck Tizo,\nSt.Ack\n&gt;\n&gt; Steps to reproduce the problem:\n&gt;\n&gt; - Start Heritrix\n&gt; - Create another Heritrix instance in &#39;/local-instances.jsp&#39; page.\n&gt; Let&#39;s call the instantces INST_A and INST_B.\n&gt; - Make a long job in INST_A; i.e: a job with a lot of pages to\n&gt; download. (Do not create this job before creating INST_B, because\n&gt; otherwise, this job is taken by INST_B too).\n&gt; - Make a short job in INST_B.\n&gt; (Both jobs, are created with the default settings, changing the domain\n&gt; to DomainScope and the writer to MirrorWriterProcessor).\n&gt; - Start the crawling in INST_A.\n&gt; - Start the crawling in INST_B.\n&gt;\n&gt; While only INST_A is crawling, all is OK: the pages are downloading\n&gt; correctly and there are neither alerts nor errors in logs. As soon as\n&gt; INST_B starts to crawling, an error appears in local-errors.log of the\n&gt; long job (INST_A):\n&gt;\n&gt; 2006-05-12T01:15:52.540Z    -2          -\n&gt; http://www.elpais.com.uy/edicion/deportes PL\n&gt; http://www.elpais.com.uy/robots.txt no-type #050 - - - le:IOException@HTTP\n&gt; java.io.IOException: Failed to get host www.elpais.com.uy address\n&gt; from ServerCache\n&gt;       at\n&gt; org.archive.crawler.fetcher.HeritrixProtocolSocketFactory.getHostAddress(HeritrixProtocolSocketFactory.java:172)\n&gt;       at\n&gt; org.archive.crawler.fetcher.HeritrixProtocolSocketFactory.createSocket(HeritrixProtocolSocketFactory.java:134)\n&gt;       at\n&gt; org.apache.commons.httpclient.HttpConnection.open(HttpConnection.java:707)\n&gt;       at\n&gt; org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:382)\n&gt;       at\n&gt; org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:168)\n&gt;       at\n&gt; org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:396)\n&gt;       at\n&gt; org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:324)\n&gt;       at \n&gt; org.archive.crawler.fetcher.FetchHTTP.innerProcess(FetchHTTP.java:408)\n&gt;       at \n&gt; org.archive.crawler.framework.Processor.process(Processor.java:103)\n&gt;       at\n&gt; org.archive.crawler.framework.ToeThread.processCrawlUri(ToeThread.java:306)\n&gt;       at org.archive.crawler.framework.ToeThread.run(ToeThread.java:153)\n&gt;\n&gt; And in the web, the job stay in the same percentage of done; no more\n&gt; pages are downloaded. INST_B, runs the short job correctly, downloads\n&gt; all the pages, and finishes it, and neither alerts nor\n&gt; errors appears.\n&gt;\n&gt; After about five minutes, the long job (INST_A) terminates with 12\n&gt; alerts!!! The only difference between alerts, are the page that is\n&gt; trying to download. The same alerts can be seen in runtime-errors.log,\n&gt; and are like the following:\n&gt;\n&gt; 2006-05-12T01:30:52.548Z    -5          -\n&gt; http://www.elpais.com.uy/edicion/deportes PL\n&gt; http://www.elpais.com.uy/robots.txt no-type #013 - - -\n&gt; err=java.lang.NullPointerException,2t\n&gt; java.lang.NullPointerException\n&gt;       at\n&gt; org.archive.crawler.datamodel.ServerCache.getHostFor(ServerCache.java:145)\n&gt;       at\n&gt; org.archive.crawler.fetcher.HeritrixProtocolSocketFactory.getHostAddress(HeritrixProtocolSocketFactory.java:166)\n&gt;       at\n&gt; org.archive.crawler.fetcher.HeritrixProtocolSocketFactory.createSocket(HeritrixProtocolSocketFactory.java:134)\n&gt;       at\n&gt; org.apache.commons.httpclient.HttpConnection.open(HttpConnection.java:707)\n&gt;       at\n&gt; org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:382)\n&gt;       at\n&gt; org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:168)\n&gt;       at\n&gt; org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:396)\n&gt;       at\n&gt; org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:324)\n&gt;       at \n&gt; org.archive.crawler.fetcher.FetchHTTP.innerProcess(FetchHTTP.java:408)\n&gt;       at \n&gt; org.archive.crawler.framework.Processor.process(Processor.java:103)\n&gt;       at\n&gt; org.archive.crawler.framework.ToeThread.processCrawlUri(ToeThread.java:306)\n&gt;       at org.archive.crawler.framework.ToeThread.run(ToeThread.java:153)\n&gt;\n&gt;\n&gt; It seems to me, that something static or singleton, is causing the\n&gt; trouble, as it happens when the INST_B starts crawling.\n&gt;\n&gt; Thanks very much,\n&gt;\n&gt; tizo\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; SPONSORED LINKS\n&gt; Computer security \n&gt; &lt;http://groups.yahoo.com/gads?t=ms&k=Computer+security&w1=Computer+security&w2=Computer+training&c=2&s=46&.sig=BHmcxBg5sKfN9-gcWnJWDg&gt; \n&gt; \tComputer training \n&gt; &lt;http://groups.yahoo.com/gads?t=ms&k=Computer+training&w1=Computer+security&w2=Computer+training&c=2&s=46&.sig=v0JjJWA4s7mLnWQWdFxuTQ&gt; \n&gt;\n&gt;\n&gt;\n&gt; ------------------------------------------------------------------------\n&gt; YAHOO! GROUPS LINKS\n&gt;\n&gt;     *  Visit your group &quot;archive-crawler\n&gt;       &lt;http://groups.yahoo.com/group/archive-crawler&gt;&quot; on the web.\n&gt;        \n&gt;     *  To unsubscribe from this group, send an email to:\n&gt;        archive-crawler-unsubscribe@yahoogroups.com\n&gt;       &lt;mailto:archive-crawler-unsubscribe@yahoogroups.com?subject=Unsubscribe&gt;\n&gt;        \n&gt;     *  Your use of Yahoo! Groups is subject to the Yahoo! Terms of\n&gt;       Service &lt;http://docs.yahoo.com/info/terms/&gt;.\n&gt;\n&gt;\n&gt; ------------------------------------------------------------------------\n&gt;\n\n\n"}}