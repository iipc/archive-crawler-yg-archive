{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":326182941,"authorName":"seanoc5","from":"&quot;seanoc5&quot; &lt;seanoc5@...&gt;","profile":"seanoc5","replyTo":"LIST","senderId":"L1pKlHHSpwE7PCpd4MfiN6M36Yo8ddf2FBNwgTdnDX_rWLZUaR6tHVpoAXDJqf7dNxaoT6TlcJI43welaaAoXvTo8ZU","spamInfo":{"isSpam":false,"reason":"6"},"subject":"WARCRecord and getting body/content/payload(?)","postDate":"1316628728","msgId":7325,"canDelete":false,"contentTrasformed":false,"systemMessage":true,"headers":{"messageIdInHeader":"PGo1ZDlkbytvMHFzQGVHcm91cHMuY29tPg=="},"prevInTopic":0,"nextInTopic":7326,"prevInTime":7324,"nextInTime":7326,"topicId":7325,"numMessagesInTopic":4,"msgSnippet":"Hi all, I am just starting with Heritrix 3.1 snapshot. I seem to be missing something obvious as I can _almost_ walk the WARC file records and get the content.","rawEmail":"Return-Path: &lt;seanoc5@...&gt;\r\nReceived: (qmail 56983 invoked from network); 21 Sep 2011 18:30:28 -0000\r\nReceived: from unknown (98.137.34.46)\n  by m8.grp.sp2.yahoo.com with QMQP; 21 Sep 2011 18:30:28 -0000\r\nReceived: from unknown (HELO ng10-ip2.bullet.mail.bf1.yahoo.com) (98.139.165.78)\n  by mta3.grp.sp2.yahoo.com with SMTP; 21 Sep 2011 18:30:28 -0000\r\nDKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoogroups.com; s=lima; t=1316629828; bh=khC1wla3Ife2AmPqRViP03TsJsfMmDPKslQIYf/1nco=; h=Received:Received:Received:X-Sender:X-Apparently-To:X-Received:X-Received:X-Received:X-Received:X-Received:X-Received:Date:To:Message-ID:User-Agent:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Mailer:X-Yahoo-Newman-Property:X-Originating-IP:X-eGroups-Msg-Info:X-Yahoo-Post-IP:From:Subject:X-Yahoo-Group-Post:X-Yahoo-Profile:X-YGroups-SubInfo:Sender:X-eGroups-Approved-By:X-eGroups-Auth; b=Kxrd3/Wyj+e8e6ZgCf/cfUZUU6EfiPbOnNZ0yD4jRRw4/spnL+713rpUbgRpauyGnWGN7dWHdr11v/xsS935aXFPYnriFSag6R9JtEUIh1bduXuzwOhQn/OqwZwMzshp\r\nReceived: from [98.139.164.124] by ng10.bullet.mail.bf1.yahoo.com with NNFMP; 21 Sep 2011 18:30:28 -0000\r\nReceived: from [69.147.65.150] by tg5.bullet.mail.bf1.yahoo.com with NNFMP; 21 Sep 2011 18:30:28 -0000\r\nReceived: from [98.137.34.155] by t7.bullet.mail.sp1.yahoo.com with NNFMP; 21 Sep 2011 18:30:28 -0000\r\nX-Sender: seanoc5@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 31927 invoked from network); 21 Sep 2011 18:12:11 -0000\r\nX-Received: from unknown (98.137.35.161)\n  by m14.grp.sp2.yahoo.com with QMQP; 21 Sep 2011 18:12:11 -0000\r\nX-Received: from unknown (HELO n4-vm6.bullet.mail.sp2.yahoo.com) (67.195.135.100)\n  by mta5.grp.sp2.yahoo.com with SMTP; 21 Sep 2011 18:12:11 -0000\r\nX-Received: from [67.195.134.49] by n4.bullet.mail.sp2.yahoo.com with NNFMP; 21 Sep 2011 18:12:10 -0000\r\nX-Received: from [69.147.65.174] by t2.bullet.mail.sp2.yahoo.com with NNFMP; 21 Sep 2011 18:12:10 -0000\r\nX-Received: from [98.137.34.73] by t12.bullet.mail.sp1.yahoo.com with NNFMP; 21 Sep 2011 18:12:10 -0000\r\nDate: Wed, 21 Sep 2011 18:12:08 -0000\r\nTo: archive-crawler@yahoogroups.com\r\nMessage-ID: &lt;j5d9do+o0qs@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: &quot;seanoc5&quot; &lt;seanoc5@...&gt;\r\nSubject: WARCRecord and getting body/content/payload(?)\r\nX-Yahoo-Group-Post: member; u=326182941; y=RnADFGVhBX7ONoncf0a1tEDLHdMpfuqPn-WCG7k3dtX4Pg\r\nX-Yahoo-Profile: seanoc5\r\nX-eGroups-Approved-By: nlevitt &lt;nlevitt@...&gt; via web; 21 Sep 2011 18:30:25 -0000\r\n\r\nHi all,\nI am just starting with Heritrix 3.1 snapshot. I seem to be missing=\r\n something obvious as I can _almost_ walk the WARC file records and get the=\r\n content. Can anyone point me in the right direction? I&#39;ve looked at yousee=\r\nr, and that seems to be working with ARC files. I&#39;ve also looked at the han=\r\nzo-warc-tools, but the python gets me a bit confused. \n\nHere is a small gro=\r\novy script I&#39;m using. I think I am using WARCRecord.read(byte[]) incorrectl=\r\ny, but seem to have a mental block on the right way to go forward. \n\n\n-----=\r\n---------- Groovy 1.8 script below --------------\nimport org.archive.io.Arc=\r\nhiveReaderFactory\nimport org.archive.io.ArchiveRecordHeader\nimport org.arch=\r\nive.io.arc.ARCRecord\nimport org.archive.io.warc.WARCReader\nimport org.archi=\r\nve.io.warc.WARCRecord\nimport org.slf4j.Logger\nimport org.slf4j.LoggerFactor=\r\ny\n\nfinal int BUFFER_SIZE =3D 4096    // drop this and just use a length val=\r\nue?\n\nLogger log =3D LoggerFactory.getLogger(&#39;ReadWarc.class&#39;);\n\nString arcP=\r\nath =3D &#39;/home/sean/Downloads/heritrix-3.1.0-SNAPSHOT/jobs/oconeco/20110920=\r\n192806/warcs/WEB-20110920192825823-00000-20490~sdrserver~8443.warc.gz&#39;\n\nWAR=\r\nCReader reader =3D ArchiveReaderFactory.get(arcPath)\nlog.debug &quot;Compressed:=\r\n &quot; + reader.isCompressed()\n\nreader.eachWithIndex { WARCRecord rec, int i -&gt;=\r\n\n    ArchiveRecordHeader header =3D rec.getHeader()\n    // is there a bette=\r\nr way to get this?\n    String type =3D header.getHeaderValue(&#39;WARC-Type&#39;)\n =\r\n   // todo -- for WARC records, how do I get to actual &#39;body&#39;, say the html=\r\n page content, skipping over the headers?\n    long headerOffset =3D header.=\r\ngetOffset()                \n    // todo -- why is this -1 (always)?\n    int=\r\n headerContentBegin =3D header.getContentBegin()     \n    long headerLength=\r\n =3D header.getLength()\n    if(type.equalsIgnoreCase(&#39;response&#39;)){\n        =\r\nbyte[] b =3D new byte[BUFFER_SIZE]    // should be something calculated? \n =\r\n       // todo -- what is the right approach here?\n        int lr =3D rec.r=\r\nead(b)                        \n        // does this give me anything? (anot=\r\nher) position, digestStr, eor,... any of these helpful??\n        def recPro=\r\nps =3D rec.getProperties()          \n\n        // just indenting content so =\r\nreading log output is easier\n        String foo =3D new String(b)?.replaceA=\r\nll(&#39;&#92;n&#39;, &#39;&#92;n&#92;t&#92;t&#39;)      \n        log.info &quot;$i) Mime Type: $type--${header.g=\r\netMimetype()} -- Content Begin: ${headerContentBegin} -- offset:$headerOffs=\r\net -- length:$headerLength &#92;n Content(ish):$foo!&quot;\n    } else {\n        // a=\r\nssuming nothing useful to me unless it&#39;s a &quot;response&quot; \n        log.debug &quot;M=\r\nime Type: $type/${header.getMimetype()} &quot;      \n    }\n}\n--------------- Gro=\r\novy 1.8 script above --------------\nThanks,\n\nSean\n\n\n\n"}}