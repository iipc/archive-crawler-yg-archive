{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":251760126,"authorName":"tizo_trico","from":"&quot;tizo_trico&quot; &lt;tizone@...&gt;","profile":"tizo_trico","replyTo":"LIST","senderId":"IGCiOCGFyMfWnjzCzlPCbmgopML8PD1QsLTOvY3wkYugdYAnwjlgkOAdm-qIDvuZvBQpPM4P-bImfpepprE0y6IgU_FPsQ","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: InitialTasks and FinalTasks","postDate":"1135089288","msgId":2451,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PGRvOTRxOCtidjlzQGVHcm91cHMuY29tPg==","inReplyToHeader":"PDQzQTc2MTI1LjkwODAzMDdAYXJjaGl2ZS5vcmc+"},"prevInTopic":2449,"nextInTopic":2456,"prevInTime":2450,"nextInTime":2452,"topicId":2444,"numMessagesInTopic":7,"msgSnippet":"Ack, I have made more tests (I am still using ver. 1.4), and calling requestCrawlStop from a process initialTasks, is somewhat erratic. As a example, when","rawEmail":"Return-Path: &lt;tizone@...&gt;\r\nX-Sender: tizone@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 69131 invoked from network); 20 Dec 2005 14:34:53 -0000\r\nReceived: from unknown (66.218.66.167)\n  by m31.grp.scd.yahoo.com with QMQP; 20 Dec 2005 14:34:53 -0000\r\nReceived: from unknown (HELO n1a.bullet.scd.yahoo.com) (66.94.237.35)\n  by mta6.grp.scd.yahoo.com with SMTP; 20 Dec 2005 14:34:52 -0000\r\nComment: DomainKeys? See http://antispam.yahoo.com/domainkeys\r\nReceived: from [66.218.69.1] by n1.bullet.scd.yahoo.com with NNFMP; 20 Dec 2005 14:34:50 -0000\r\nReceived: from [66.218.66.68] by mailer1.bullet.scd.yahoo.com with NNFMP; 20 Dec 2005 14:34:50 -0000\r\nDate: Tue, 20 Dec 2005 14:34:48 -0000\r\nTo: archive-crawler@yahoogroups.com\r\nMessage-ID: &lt;do94q8+bv9s@...&gt;\r\nIn-Reply-To: &lt;43A76125.9080307@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: &quot;tizo_trico&quot; &lt;tizone@...&gt;\r\nSubject: Re: InitialTasks and FinalTasks\r\nX-Yahoo-Group-Post: member; u=251760126; y=At2te9-nRVIaLDTN-nIZ2_rOggIbuWt6Fi6gRrl5QdEyDNfVlQ\r\nX-Yahoo-Profile: tizo_trico\r\n\r\nAck,\n\nI have made more tests (I am still using ver. 1.4), and calling\nreque=\r\nstCrawlStop from a process initialTasks, is somewhat erratic. As\na example,=\r\n when calling from an initialTask of FetcherHTTP process,\nthe finalTasks ar=\r\ne called for all the process (for some process, the\nfinalTasks is called BE=\r\nFORE it&#39;s initialTasks). \n\nIn the other hand, calling requestCrawlStop from=\r\n MirrorWriter\ninitialTasks, don&#39;t make the finalTasks to be called.\n\nI thin=\r\nk that this behaviour, is due to that CrawlScope, was not\nimplemented think=\r\ning that requestCrawlStop could be called from a\nprocessor initialTasks. As=\r\n you say, it seems that CrawlScope expects\ncrawl to be setup before request=\r\nCrawlStop is invoked.\n\nIn my opinion, it would be nice that the processors&#39;=\r\ns initialTask,\ncould throw an abort exception, and that CrawlController in =\r\nthis case,\ndoes not continue calling initialTasks, and call only finalTasks=\r\n of\nthe processors that were succefully initialized. What do you think?\n\nAn=\r\nyway, in the meantime, I have made a trick (that is not elegant, but\nworks)=\r\n that if a processor initialTasks have an error, it register it,\nmaking the=\r\n requestCrawlStop begin called when the first method\ninnerProcess from my p=\r\nrocessors begins.\n\nThanks in advanced,\n\ntizo\n\n\n--- In archive-crawler@yahoo=\r\ngroups.com, stack &lt;stack@a...&gt; wrote:\n&gt;\n&gt; tizo_trico wrote:\n&gt; &gt; Hi,\n&gt; &gt; \n&gt; =\r\n&gt; I am using Heritrix with some processors that I implemented. In those\n&gt; &gt;=\r\n processors, and depending of internal states, I would like to have the\n&gt; &gt;=\r\n possibility to abort a job in methods such as initialTask and\n&gt; &gt; innerPro=\r\ncess.\n&gt; \n&gt; Currently the only safe way to abort/stop a job is, as you&#39;ve\nfi=\r\ngured, a \n&gt; call to requestCrawlStop.\n&gt; \n&gt; There is no way to abort at init=\r\nialTask time currently.  What would you \n&gt; suggest?  Should we throw an abo=\r\nrt exception? If an abort is thrown, \n&gt; you&#39;d probably want to call the fin=\r\nalTask on all processors that were \n&gt; successfully initialized.\n&gt; \n&gt; For pr=\r\nocessor inner tasks, requestCrawlStop is probably the way to go.\n&gt; \n&gt; Perha=\r\nps of use, see how the precondition enforcer can skip to the\nend of \n&gt; the =\r\nprocessing chain:\n&gt; \n&gt;\nhttp://crawler.archive.org/xref/org/archive/crawler/=\r\nprefetch/PreconditionEnforcer.html#206\n&gt; \n&gt; You might add a processor whose=\r\n only role was to skip to the end of the \n&gt; chain until preventing work bei=\r\nng done in the interrim between sending \n&gt; of the requestCrawlStop and craw=\r\nler actually going down.\n&gt; \n&gt; &gt; \n&gt; &gt; At this moment, the only way that I co=\r\nuld do that, is calling\n&gt; &gt; requestCrawlStop from the controller. It worked=\r\n considerably fine when\n&gt; &gt; I was testing with one processor: the web inter=\r\nface only says\n&gt; &gt; &quot;Abnormal program termination&quot; or something like that, a=\r\nnd I could see\n&gt; &gt; the errors on an external log, and that was fine for me.=\r\n\n&gt; &gt; \n&gt; &gt; When I started to try with two processors, I realized that if I c=\r\nall\n&gt; &gt; requestCrawlStop in the initialTasks of one processor, the\n&gt; &gt; init=\r\nialTasks of the other is excecuted anyway, and also the two\n&gt; &gt; finalTasks =\r\n(I don&#39;t know why, but when I called requestCrawlStop using\n&gt; &gt; only one of=\r\n my processors, its finalTasks seemed like it was not\n&gt; &gt; excecuted).\n&gt; &gt; \n=\r\n&gt; &gt; Anyway, I read some code of the controller, and obviously the method\n&gt; =\r\n&gt; requestCrawlStop is not the ideal to use in initialTasks for this\n&gt; &gt; por=\r\npouse.\n&gt; &gt; \n&gt; &gt; So I have the following questions:\n&gt; &gt; \n&gt; &gt; - What would th=\r\ne best way to stop a job in the method initialTask of a\n&gt; &gt; processor?\n&gt; &gt; =\r\n\n&gt; &gt; - And in the method innerProcess?\n&gt; &gt; \n&gt; &gt; - If requestCrawlStop was u=\r\nsed, should CrawlController and any other\n&gt; &gt; class be changed to handle it=\r\n in a proper manner?\n&gt; &gt; \n&gt; \n&gt; Calling requestCrawlStop from initialTask do=\r\nesn&#39;t work?  Because its \n&gt; expecting crawl to be setup before its invoked?=\r\n\n&gt; \n&gt; Yours,\n&gt; St.Ack\n&gt; \n&gt; &gt; Thanks very much,\n&gt; &gt; \n&gt; &gt; tizo\n&gt; &gt; \n&gt; &gt; \n&gt; &gt; =\r\n\n&gt; &gt; \n&gt; &gt; \n&gt; &gt; \n&gt; &gt; SPONSORED LINKS\n&gt; &gt; Computer internet security \n&gt; &gt;\n&lt;ht=\r\ntp://groups.yahoo.com/gads?t=3Dms&k=3DComputer+internet+security&w1=3DCompu=\r\nter+internet+security&w2=3DComputer+internet+business&w3=3DComputer+interne=\r\nt+access&w4=3DComputer+internet+privacy+securities&w5=3DComputer+internet+h=\r\nelp&c=3D5&s=3D164&.sig=3Di0mxSmuqqFFe3BrjThENoA&gt;\n\n&gt; &gt; \tComputer internet bu=\r\nsiness \n&gt; &gt;\n&lt;http://groups.yahoo.com/gads?t=3Dms&k=3DComputer+internet+busi=\r\nness&w1=3DComputer+internet+security&w2=3DComputer+internet+business&w3=3DC=\r\nomputer+internet+access&w4=3DComputer+internet+privacy+securities&w5=3DComp=\r\nuter+internet+help&c=3D5&s=3D164&.sig=3DkmDyW-ptkQj6I5S4gG69AA&gt;\n\n&gt; &gt; \tCompu=\r\nter internet access \n&gt; &gt;\n&lt;http://groups.yahoo.com/gads?t=3Dms&k=3DComputer+=\r\ninternet+access&w1=3DComputer+internet+security&w2=3DComputer+internet+busi=\r\nness&w3=3DComputer+internet+access&w4=3DComputer+internet+privacy+securitie=\r\ns&w5=3DComputer+internet+help&c=3D5&s=3D164&.sig=3DTa-eZ3s36l3o1MvufztxDA&gt;\n=\r\n\n&gt; &gt; \n&gt; &gt; Computer internet privacy securities \n&gt; &gt;\n&lt;http://groups.yahoo.co=\r\nm/gads?t=3Dms&k=3DComputer+internet+privacy+securities&w1=3DComputer+intern=\r\net+security&w2=3DComputer+internet+business&w3=3DComputer+internet+access&w=\r\n4=3DComputer+internet+privacy+securities&w5=3DComputer+internet+help&c=3D5&=\r\ns=3D164&.sig=3Duuqya_mMImRC6lLPDsK2yQ&gt;\n\n&gt; &gt; \tComputer internet help \n&gt; &gt;\n&lt;h=\r\nttp://groups.yahoo.com/gads?t=3Dms&k=3DComputer+internet+help&w1=3DComputer=\r\n+internet+security&w2=3DComputer+internet+business&w3=3DComputer+internet+a=\r\nccess&w4=3DComputer+internet+privacy+securities&w5=3DComputer+internet+help=\r\n&c=3D5&s=3D164&.sig=3D84G6glsO_UlIoE2IlCHAsw&gt;\n\n&gt; &gt; \n&gt; &gt; \n&gt; &gt; \n&gt; &gt;\n---------=\r\n---------------------------------------------------------------\n&gt; &gt; YAHOO! =\r\nGROUPS LINKS\n&gt; &gt; \n&gt; &gt;     *  Visit your group &quot;archive-crawler\n&gt; &gt;       &lt;h=\r\nttp://groups.yahoo.com/group/archive-crawler&gt;&quot; on the web.\n&gt; &gt;        \n&gt; &gt; =\r\n    *  To unsubscribe from this group, send an email to:\n&gt; &gt;        archive=\r\n-crawler-unsubscribe@yahoogroups.com\n&gt; &gt;      \n&lt;mailto:archive-crawler-unsu=\r\nbscribe@yahoogroups.com?subject=3DUnsubscribe&gt;\n&gt; &gt;        \n&gt; &gt;     *  Your =\r\nuse of Yahoo! Groups is subject to the Yahoo! Terms of\n&gt; &gt;       Service &lt;h=\r\nttp://docs.yahoo.com/info/terms/&gt;. \n&gt; &gt; \n&gt; &gt; \n&gt; &gt;\n-------------------------=\r\n-----------------------------------------------\n&gt; &gt;\n&gt;\n\n\n\n\n\n"}}