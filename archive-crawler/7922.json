{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"HR0TFy1jB9pk47M_w25aJ2l-69iyDHJ0D0Q5Twcby9xIX3DxXbrev7OOZG_dwQF2MIn0SuXHfsQ2KpNm1kul7GF7wA6uQSk","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: [archive-crawler] Usage of QuotaEnforcer [1 Attachment]","postDate":"1358547929","msgId":7922,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDUwRjlDQkQ5LjgwMDAzMDFAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PDFBMTJBOUM1MTBBMTI0NEQ4MERDNDYzMEU3OTVCODU1MTdBRkM0RUZAbWFpbHN0b3JlMS5hcHB0dXMubG9jYWw+","referencesHeader":"PDFBMTJBOUM1MTBBMTI0NEQ4MERDNDYzMEU3OTVCODU1MTdBRkJGNjhAbWFpbHN0b3JlMS5hcHB0dXMubG9jYWw+IDw1MEVGMEI5Mi43MDkwNDAyQGFyY2hpdmUub3JnPiA8MUExMkE5QzUxMEExMjQ0RDgwREM0NjMwRTc5NUI4NTUxN0FGQzNCREBtYWlsc3RvcmUxLmFwcHR1cy5sb2NhbD4gPDUwRjdBNTlDLjgwODA5MDNAYXJjaGl2ZS5vcmc+IDwxQTEyQTlDNTEwQTEyNDREODBEQzQ2MzBFNzk1Qjg1NTE3QUZDNEVGQG1haWxzdG9yZTEuYXBwdHVzLmxvY2FsPg=="},"prevInTopic":7920,"nextInTopic":7924,"prevInTime":7921,"nextInTime":7923,"topicId":7900,"numMessagesInTopic":7,"msgSnippet":"That crawl.log line indicates several things: (1) The 0 status code means the DNS lookup never succeeded, and the 30t annotation indicates the URI was","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 69854 invoked from network); 18 Jan 2013 22:25:42 -0000\r\nX-Received: from unknown (10.193.84.150)\n  by m4.grp.bf1.yahoo.com with QMQP; 18 Jan 2013 22:25:42 -0000\r\nX-Received: from unknown (HELO relay03.pair.com) (209.68.5.17)\n  by mta2.grp.bf1.yahoo.com with SMTP; 18 Jan 2013 22:25:42 -0000\r\nX-Received: (qmail 47039 invoked by uid 0); 18 Jan 2013 22:25:29 -0000\r\nX-Received: from 70.36.143.102 (HELO silverbook.local) (70.36.143.102)\n  by relay03.pair.com with SMTP; 18 Jan 2013 22:25:29 -0000\r\nX-pair-Authenticated: 70.36.143.102\r\nMessage-ID: &lt;50F9CBD9.8000301@...&gt;\r\nDate: Fri, 18 Jan 2013 14:25:29 -0800\r\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:17.0) Gecko/20130107 Thunderbird/17.0.2\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;1A12A9C510A1244D80DC4630E795B85517AFBF68@...&gt; &lt;50EF0B92.7090402@...&gt; &lt;1A12A9C510A1244D80DC4630E795B85517AFC3BD@...&gt; &lt;50F7A59C.8080903@...&gt; &lt;1A12A9C510A1244D80DC4630E795B85517AFC4EF@...&gt;\r\nIn-Reply-To: &lt;1A12A9C510A1244D80DC4630E795B85517AFC4EF@...&gt;\r\nContent-Type: text/plain; charset=windows-1252; format=flowed\r\nContent-Transfer-Encoding: 8bit\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] Usage of QuotaEnforcer [1 Attachment]\r\nX-Yahoo-Group-Post: member; u=137285340; y=VPBeyyd_020_09wJ9l_U3kO40A4BoSEwjLp_Zcp9XpaT\r\nX-Yahoo-Profile: gojomo\r\n\r\nThat crawl.log line indicates several things:\n\n(1) The &#39;0&#39; status code means the DNS lookup never succeeded, and the \n&quot;30t&quot; annotation indicates the URI was tried 30 times without success \nbefore generating this log line.\n\nYou will want to look into how the crawling machine is set to resolve \nhostnames: what local or remote DNS servers are consulted, and whether \nthese may be throttling lookups or aggressively caching failures (either \nof which might explain why a seed succeeds alone but in a large crawl \nseems &#39;randomly&#39; to fail).\n\n(2) The &quot;Q:hostMaxFetchSuccesses&quot; annotation means the URI was judged \nover that quota. This is hard for me to interpret. It should only be \napplied if in fact there were over 100 other successes for the same \nhostname.\n\nAre there no other lines in the crawl.log at all referencing the \nhostname &quot;www.electricaldesigndrafting.com&quot; (both http and dns)?\n\nIt&#39;s possible that the success-accounting is miscounting the failures... \nbut even then I&#39;d expect more than one line (reporting 30 tries) in \norder for the wrong-count to exceed 100.\n\nStill, if there&#39;s a problem here, it&#39;s secondary to the indication that \nDNS lookup for this host is sometimes failing entirely and repeatedly.\n\n- Gordon\n\nOn 1/18/13 2:02 AM, Henrik Ranthin wrote:\n&gt; [Attachment(s) &lt;#TopText&gt; from Henrik Ranthin included below]\n&gt;\n&gt; Hi!\n&gt;\n&gt; I had some non-valid URIs in the seeds list. However, I removed these\n&gt; and I ran the job again. And I still got the same behavior.\n&gt;\n&gt; The only settings I changed is the number of threads and the\n&gt; quotaenforcer.  I have attached the job configuration, maybe someone can\n&gt; have a quick look.\n&gt;\n&gt; Below is an example of a seed that hasn�t been crawled.\n&gt;\n&gt;  From seeds-report.txt:\n&gt;\n&gt; 0 NOTCRAWLED http://www.electricaldesigndrafting.com/\n&gt;\n&gt;  From crawl.log:\n&gt;\n&gt; 2013-01-17T12:35:30.607Z     0          -\n&gt; dns:www.electricaldesigndrafting.com P\n&gt; http://www.electricaldesigndrafting.com/ unknown #114 - - -\n&gt; Q:hostMaxFetchSuccesses,30t\n&gt;\n&gt; I if feed the crawler with just that single seed, it gets crawled as\n&gt; expected.\n&gt;\n&gt; Could the problems be dns-related? Dns lookup failures or similar?\n&gt;\n&gt; I also tried to change the dns config as below:\n&gt;\n&gt; &lt;bean id=&quot;fetchDns&quot; class=&quot;org.archive.modules.fetcher.FetchDNS&quot;&gt;\n&gt;\n&gt;    &lt;property name=&quot;acceptNonDnsResolves&quot; value=&quot;true&quot; /&gt;\n&gt;\n&gt; But it didn�t help.\n&gt;\n&gt; Regards,\n&gt;\n&gt; Henrik\n&gt;\n&gt; *From:*archive-crawler@yahoogroups.com\n&gt; [mailto:archive-crawler@yahoogroups.com] *On Behalf Of *Gordon Mohr\n&gt; *Sent:* den 17 januari 2013 08:18\n&gt; *To:* archive-crawler@yahoogroups.com\n&gt; *Cc:* Henrik Ranthin\n&gt; *Subject:* Re: [archive-crawler] Usage of QuotaEnforcer\n&gt;\n&gt; Are you sure the seeds that are NOTCRAWLED are valid, responding URIs?\n&gt;\n&gt;  From your screenshot, 200 threads in a 800MB heap might be a bit much,\n&gt; though without other errors/alerts, that&#39;s probably not the problem\n&gt; you&#39;re hitting.\n&gt;\n&gt; I notice that in the screenshot, the largest number of queues (24,730)\n&gt; are in the &#39;RETIRED&#39; state. That indicates that they&#39;ve hit a limit for\n&gt; crawling, either the queueTotalBudget or something that the\n&gt; QuotaEnforcer saw and used the &#39;force-retire&#39; option to enforce.\n&gt;\n&gt; Did you change any of the other &#39;budget&#39;-related settings?\n&gt;\n&gt; Also, your crawl-report shows over 24K &#39;URI failures&#39;. These may appear\n&gt; in the crawl-log with a status code; do they? What&#39;s a representative\n&gt; line for a seed that you expect would be collected but isn&#39;t?\n&gt;\n&gt; - Gordon\n&gt;\n&gt; On 1/16/13 1:04 AM, Henrik Ranthin wrote:\n&gt;  &gt; Hi!\n&gt;  &gt;\n&gt;  &gt; The status is set to NONCRAWLED in the seeds report.\n&gt;  &gt;\n&gt;  &gt; I tried to run the job again and after a while it seems like the\n&gt; threads are starving. The crawling runs fast in the beginning and after\n&gt; a while it&#39;s just getting slower and slower until it finally stops.\n&gt;  &gt; From the job page in the Heritrix UI:\n&gt;  &gt; 200 threads: 200 ABOUT_TO_GET_URI; 200 noActiveProcessor\n&gt;  &gt;\n&gt;  &gt; I also attached a screenshot of the job page.\n&gt;  &gt;\n&gt;  &gt; I checked the logs and reports and in the uri-errors.log and I have\n&gt; about 700 items similar to the line below but with different uri:\n&gt;  &gt; 2013-01-11T12:03:49.728Z http://ablemove.net/ &quot;http scheme specific\n&gt; part is too short: //&quot; http://\n&gt;  &gt; But I don&#39;t know if that could contribute?\n&gt;  &gt;\n&gt;  &gt; From crawl-report.log:\n&gt;  &gt; #######################################################\n&gt;  &gt; crawl name: basic\n&gt;  &gt; crawl status: Finished\n&gt;  &gt; duration: 7h15m20s364ms\n&gt;  &gt;\n&gt;  &gt; seeds crawled: 235\n&gt;  &gt; seeds uncrawled: 23946\n&gt;  &gt;\n&gt;  &gt; hosts visited: 24828\n&gt;  &gt;\n&gt;  &gt; URIs processed: 40636\n&gt;  &gt; URI successes: 14043\n&gt;  &gt; URI failures: 24734\n&gt;  &gt; URI disregards: 1859\n&gt;  &gt;\n&gt;  &gt; novel URIs: 14043\n&gt;  &gt;\n&gt;  &gt; total crawled bytes: 764213072 (729 MiB)\n&gt;  &gt; novel crawled bytes: 764213072 (729 MiB)\n&gt;  &gt;\n&gt;  &gt; URIs/sec: 0.54\n&gt;  &gt; KB/sec: 28\n&gt;  &gt; #######################################################\n&gt;  &gt;\n&gt;  &gt;\n&gt;  &gt; Regards,\n&gt;  &gt; Henrik\n&gt;  &gt;\n&gt;  &gt;\n&gt;  &gt;\n&gt;  &gt; -----Original Message-----\n&gt;  &gt; From: archive-crawler@yahoogroups.com\n&gt; &lt;mailto:archive-crawler%40yahoogroups.com&gt;\n&gt; [mailto:archive-crawler@yahoogroups.com\n&gt; &lt;mailto:archive-crawler%40yahoogroups.com&gt;] On Behalf Of Noah Levitt\n&gt;  &gt; Sent: den 10 januari 2013 19:42\n&gt;  &gt; To: archive-crawler@yahoogroups.com\n&gt; &lt;mailto:archive-crawler%40yahoogroups.com&gt;\n&gt;  &gt; Cc: Henrik Ranthin\n&gt;  &gt; Subject: Re: [archive-crawler] Usage of QuotaEnforcer\n&gt;  &gt;\n&gt;  &gt; Hello Henrik,\n&gt;  &gt;\n&gt;  &gt; In my brief test, QuotaEnforcer configured as you describe worked\n&gt; fine for me and didn&#39;t prevent any seeds from being crawled. Maybe some\n&gt; other part of your configuration is responsible? What&#39;s the fetch status\n&gt; in the seeds report of the uncrawled seeds? Anything else in the logs?\n&gt;  &gt;\n&gt;  &gt; Noah\n&gt;  &gt;\n&gt;  &gt; On 2013-01-09 01:57 , Henrik Ranthin wrote:\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt; Hi!\n&gt;  &gt;&gt;\n&gt;  &gt;&gt; I want to limit the number of documents per site and I tried using\n&gt; the QuotaEnforcer to do so (I&#39;m using Heritrix 3.1.1).\n&gt;  &gt;&gt;\n&gt;  &gt;&gt; At first it seemed to work and in the hosts report it looks like\n&gt; that the correct number of documents has been crawled for each host.\n&gt;  &gt;&gt;\n&gt;  &gt;&gt; However, when I checked the status a few hours later the job had\n&gt; finished and most of the seeds had not been crawled.\n&gt;  &gt;&gt;\n&gt;  &gt;&gt; From the job log:\n&gt;  &gt;&gt;\n&gt;  &gt;&gt; 2013-01-08T20:38:06.740Z INFO FINISHED 20130108131240\n&gt;  &gt;&gt;\n&gt;  &gt;&gt; 2013-01-08T20:38:04.739Z INFO EMPTY 20130108131240\n&gt;  &gt;&gt;\n&gt;  &gt;&gt; 2013-01-08T20:38:04.739Z INFO STOPPING 20130108131240\n&gt;  &gt;&gt;\n&gt;  &gt;&gt; 2013-01-08T13:12:58.056Z INFO RUNNING 20130108131240\n&gt;  &gt;&gt;\n&gt;  &gt;&gt; Am I using the correct configuration for QuotaEnforcer? And is this\n&gt; the prescribed way to limit the number of documents per site?\n&gt;  &gt;&gt;\n&gt;  &gt;&gt; Below is the configuration I changed for QuotaEnforcer (other\n&gt; configuration is just default):\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt; Regards,\n&gt;  &gt;&gt;\n&gt;  &gt;&gt; Henrik\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;&gt;\n&gt;  &gt;\n&gt;  &gt;\n&gt;  &gt; ------------------------------------\n&gt;  &gt;\n&gt;  &gt; Yahoo! Groups Links\n&gt;  &gt;\n&gt;  &gt;\n&gt;  &gt;\n&gt;  &gt;\n&gt;  &gt;\n&gt;  &gt; ------------------------------------\n&gt;  &gt;\n&gt;  &gt; Yahoo! Groups Links\n&gt;  &gt;\n&gt;  &gt;\n&gt;  &gt;\n&gt;\n&gt;\n&gt; Attachment(s) from Henrik Ranthin\n&gt;\n&gt; 1 of 1 File(s)\n&gt;\n&gt; crawler-beans.cxml\n&gt; &lt;http://xa.yimg.com/kq/groups/8759867/53518656/name/crawler-beans%2Ecxml&gt;\n&gt;\n&gt; \n\n"}}