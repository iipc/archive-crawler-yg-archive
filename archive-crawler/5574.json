{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":328973242,"authorName":"Holger Lausen","from":"Holger Lausen &lt;holger.lausen@...&gt;","profile":"hlausen","replyTo":"LIST","senderId":"8DaPAE8fQxiPxFAgitElzpsQK2dvjXEnEf9LdYNQ3zvNxeb6kmbDfqK5m83gGVuO4JuvN6PyO44fu245ai63BQ11p1Q8k8zr5NYTQAuWlQ","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] TooManyOpenFiles with 1M seed and 300 ToeThreads","postDate":"1226552626","msgId":5574,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ5MUJCNTMyLjYwNTA0MDFAc2Vla2RhLmNvbT4=","inReplyToHeader":"PDQ5MUIxRDIwLjQwNzAzMDBAdW1icmljaC5uZXQ+","referencesHeader":"PDQ5MUIxRDIwLjQwNzAzMDBAdW1icmljaC5uZXQ+"},"prevInTopic":5573,"nextInTopic":5578,"prevInTime":5573,"nextInTime":5575,"topicId":5572,"numMessagesInTopic":5,"msgSnippet":"Hi Jürgen, you are probably right, the machines hosting our current crawl has only about 1300 open files, but we had a TMOF problem before because of a ","rawEmail":"Return-Path: &lt;holger.lausen@...&gt;\r\nX-Sender: holger.lausen@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 55184 invoked from network); 13 Nov 2008 05:03:49 -0000\r\nX-Received: from unknown (66.218.67.95)\n  by m36.grp.scd.yahoo.com with QMQP; 13 Nov 2008 05:03:49 -0000\r\nX-Received: from unknown (HELO mx.inode.at) (62.99.145.13)\n  by mta16.grp.scd.yahoo.com with SMTP; 13 Nov 2008 05:03:48 -0000\r\nX-Received: from [85.124.22.177] (port=3431 helo=[192.168.178.106])\n\tby smartmx-11.inode.at with esmtpsa (TLS-1.0:DHE_RSA_AES_256_CBC_SHA:32)\n\t(Exim 4.50)\n\tid 1L0UMt-0002Yz-U8\n\tfor archive-crawler@yahoogroups.com; Thu, 13 Nov 2008 06:03:48 +0100\r\nMessage-ID: &lt;491BB532.6050401@...&gt;\r\nDate: Thu, 13 Nov 2008 06:03:46 +0100\r\nUser-Agent: Thunderbird 2.0.0.17 (X11/20080925)\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;491B1D20.4070300@...&gt;\r\nIn-Reply-To: &lt;491B1D20.4070300@...&gt;\r\nX-Enigmail-Version: 0.95.0\r\nContent-Type: text/plain; charset=UTF-8\r\nContent-Transfer-Encoding: 8bit\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Holger Lausen &lt;holger.lausen@...&gt;\r\nSubject: Re: [archive-crawler] TooManyOpenFiles with 1M seed and 300 ToeThreads\r\nX-Yahoo-Group-Post: member; u=328973242; y=90BAgNKKZnPeOT31clMiEW4-gWza_RKJxquuPglxkbND8Q\r\nX-Yahoo-Profile: hlausen\r\n\r\nHi Jürgen,\n\nyou are probably right, the machines hosting our current crawl has only\nabout 1300 open files, but we had a TMOF problem before because of a\nself-written processor.\n\nTo find out what goes wrong use lsof. (Will point you to the names of\nthe files that are not properly closed)\n\n32k seems not much, our machines usually run with a limit of 300k.\n\ngreetings\n  Holger\n\n\nJuergen Umbrich wrote:\n&gt;\n&gt; Hi all,\n&gt;\n&gt; we had a TMOF-Excetpion while we tried to run a crawl with 300\n&gt; ToeThreads, 1M seed URIs, and a\n&gt; #ulimit -l = 32768. (global sheet attached)\n&gt; The execption happens just at the beginning, when the URIs from the seed\n&gt; list were parsed and loaded and the crawler started.\n&gt; The crawl.log contains 458 entries, with 380 dns - lookups.\n&gt; All the other log files are empty.\n&gt;\n&gt; I think with a ulimit of 32768 this should not happen! Or am I wrong?\n&gt;\n&gt; Best juergen\n&gt;\n&gt; alerts.log:\n&gt; ----------------------------------------------------------\n&gt;\n&gt; org.archive.modules.fetcher.FetchDNS storeDNSRecord\n&gt; SEVERE: Failed store of DNS Record for dns:breakers.typepad.com (in\n&gt; thread &#39;ToeThread #88: dns:breakers.typepad.com&#39;; in processor &#39;DNS&#39;)\n&gt; java.io.FileNotFoundException:\n&gt; /home/heritrix/heritrix-2.0.1/jobs/active-BenchmarkCrawl-20081026023802/scratch/tt88http.ris\n&gt;\n&gt; (Too many open files)\n&gt; at java.io.FileOutputStream.open(Native Method)\n&gt; at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:179)\n&gt; at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:70)\n&gt; at\n&gt; org.archive.io.RecordingOutputStream.open(RecordingOutputStream.java:207)\n&gt; at\n&gt; org.archive.io.RecordingOutputStream.open(RecordingOutputStream.java:173)\n&gt; at\n&gt; org.archive.io.RecordingInputStream.open(RecordingInputStream.java:92)\n&gt; at org.archive.util.Recorder.inputWrap(Recorder.java:150)\n&gt; at org.archive.modules.fetcher.FetchDNS.recordDNS(FetchDNS.java:270)\n&gt; at\n&gt; org.archive.modules.fetcher.FetchDNS.storeDNSRecord(FetchDNS.java:215)\n&gt; at org.archive.modules.fetcher.FetchDNS.innerProcess(FetchDNS.java:170)\n&gt; at org.archive.modules.Processor.innerProcessResult(Processor.java:157)\n&gt; at org.archive.modules.Processor.process(Processor.java:123)\n&gt; at\n&gt; org.archive.crawler.framework.ToeThread.processCrawlUri(ToeThread.java:310)\n&gt; at org.archive.crawler.framework.ToeThread.run(ToeThread.java:157)\n&gt; 26-Oct-2008 04:00:49 org.archive.modules.fetcher.FetchDNS storeDNSRecord\n&gt; SEVERE: Failed store of DNS Record for dns:depts.drew.edu (in thread\n&gt; &#39;ToeThread #88: dns:depts.drew.edu&#39;; in processor &#39;DNS&#39;)\n&gt; java.io.IOException: RIS already open for ToeThread #88:\n&gt; dns:depts.drew.edu\n&gt; at\n&gt; org.archive.io.RecordingInputStream.open(RecordingInputStream.java:88)\n&gt; at org.archive.util.Recorder.inputWrap(Recorder.java:150)\n&gt; at org.archive.modules.fetcher.FetchDNS.recordDNS(FetchDNS.java:270)\n&gt; at\n&gt; org.archive.modules.fetcher.FetchDNS.storeDNSRecord(FetchDNS.java:215)\n&gt; at org.archive.modules.fetcher.FetchDNS.innerProcess(FetchDNS.java:170)\n&gt; at org.archive.modules.Processor.innerProcessResult(Processor.java:157)\n&gt; at org.archive.modules.Processor.process(Processor.java:123)\n&gt; at\n&gt; org.archive.crawler.framework.ToeThread.processCrawlUri(ToeThread.java:310)\n&gt; at org.archive.crawler.framework.ToeThread.run(ToeThread.java:157)\n&gt;\n&gt;  \n\n\n-- \nHolger Lausen\nseekda OG\nMuseumstr. 21/302, 6020 Innsbruck, Austria\nTel: +43 1 2365084, Fax: +43 1 2365084-99\nRegistration Number: FN296905\nRegistration Court: Innsbruck\nWeb: http://seekda.com\nJabber/Mail: holger.lausen@... \n\n\n"}}