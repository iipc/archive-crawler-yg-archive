{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":212342429,"authorName":"Pranay Pandey","from":"Pranay Pandey &lt;sspranay@...&gt;","profile":"sspranay","replyTo":"LIST","senderId":"hYhmI09Wfbe7_sdWp7BrHaUdQbqf2wo20BZSQXJguhdy7qgbeU8MJM4DKTG7xIVcNcIus7oirzhnfs44_O6iCOghT5tuaZQq4g","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: (subject edited) Recrawling In Heritrix3.0.0-RC1","postDate":"1259076971","msgId":6169,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ2MzczNS45NTg3Mi5xbUB3ZWI0MzEzNC5tYWlsLnNwMS55YWhvby5jb20+","inReplyToHeader":"PDZERkU5NkJBLTA1MjktNDExRC05QzU0LTY2NERBMUFGMTVDN0BnbWFpbC5jb20+"},"prevInTopic":6151,"nextInTopic":6170,"prevInTime":6168,"nextInTime":6170,"topicId":6140,"numMessagesInTopic":6,"msgSnippet":"Hello Matt and Gordon, Following Gordon s advice and assuming HER-1706 to be fixed, I am using only two of the persistProcessors: load and store. As suggested,","rawEmail":"Return-Path: &lt;sspranay@...&gt;\r\nX-Sender: sspranay@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 39712 invoked from network); 24 Nov 2009 15:36:11 -0000\r\nX-Received: from unknown (98.137.34.44)\n  by m14.grp.re1.yahoo.com with QMQP; 24 Nov 2009 15:36:11 -0000\r\nX-Received: from unknown (HELO web43134.mail.sp1.yahoo.com) (216.252.121.64)\n  by mta1.grp.sp2.yahoo.com with SMTP; 24 Nov 2009 15:36:11 -0000\r\nX-Received: (qmail 97299 invoked by uid 60001); 24 Nov 2009 15:36:11 -0000\r\nMessage-ID: &lt;463735.95872.qm@...&gt;\r\nX-YMail-OSG: hqAaAzgVM1kvKwvfarrhBkvrap7ijYKf2l.xEtAiQVHSQHUNDpj4tdTmqxyexn4mHten0zZsW7RHIPUfq0R8VadpfQv5tm3dgQjGoILtQAmLxbhv5m4wzGTtVXtStPCsK3faCgyGD7jOd7382mgorTslUanXCKdxVsDeSo1zgpJ_GG3E_PvI7hNL.6jM3K0p2s55toni73r1WB2QB_.KOXaOxvGxD848_b27xwPjWkno8pSd82eQQoi.XnOab1A5LNfmZKdFv1AzPtzXs5O7qKZCbhXJS5SL0h4rtOcVVsy7tpk8byD9bYPW39SEcFbL52jTeenJJPyxcp.tRw0lisUMbxEE82JPvBJqggJyDPKeABxwu5km\r\nX-Received: from [204.194.77.3] by web43134.mail.sp1.yahoo.com via HTTP; Tue, 24 Nov 2009 07:36:11 PST\r\nX-Mailer: YahooMailClassic/8.1.6 YahooMailWebService/0.8.100.260964\r\nDate: Tue, 24 Nov 2009 07:36:11 -0800 (PST)\r\nTo: archive-crawler@yahoogroups.com\r\nIn-Reply-To: &lt;6DFE96BA-0529-411D-9C54-664DA1AF15C7@...&gt;\r\nMIME-Version: 1.0\r\nContent-Type: multipart/alternative; boundary=&quot;0-1915573619-1259076971=:95872&quot;\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Pranay Pandey &lt;sspranay@...&gt;\r\nSubject: Re: (subject edited) Recrawling In Heritrix3.0.0-RC1\r\nX-Yahoo-Group-Post: member; u=212342429; y=8NCxsjvDoocAQ2kIsiZPTzaw3wNnHtYU5UIPq5t8g710fVU\r\nX-Yahoo-Profile: sspranay\r\n\r\n\r\n--0-1915573619-1259076971=:95872\r\nContent-Type: text/plain; charset=utf-8\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n\n\nHello Matt and Gordon,\n\nFollowing Gordon&#39;s advice and assuming HER-1706 t=\r\no be fixed, I am using only two of the persistProcessors: load and store.\nA=\r\ns suggested, I am using the same BdbModule/&#39;history&#39; dir for both the proce=\r\nssors. \nHowever I don&#39;t see any deduplication happening. Neither I am getti=\r\nng any exception or error to look into. I am using heritrix-3.0.0-RC1\nThis =\r\nis my config file. Have I missed something?\nhttp://cs.odu.edu/~pramo_p/craw=\r\nler-beans.cxml\n\nwud appreciate any help on this.\n\nThanks,\nPranay\n\n--- On Fr=\r\ni, 11/13/09, Matthew Warhaftig &lt;mwarhaftig@...&gt; wrote:\n\nFrom: Matthew=\r\n Warhaftig &lt;mwarhaftig@...&gt;\nSubject: Re: [archive-crawler] Recrawling=\r\n In Heritrix3\nTo: archive-crawler@yahoogroups.com\nDate: Friday, November 13=\r\n, 2009, 9:04 PM\n\n\n\n\n\n\n\n=C2=A0\n\n\n\n  \n\n\n    \n      \n      \n      Good advice,=\r\n thank you Gordon. =C2=A0Adding the recrawl processors to the chain bean an=\r\nd pointing PersistLoadProcesso r directly to my existing history (no preloa=\r\nd) got the recrawl working.\nThanks,Matt\n\n\nOn Nov 10, 2009, at 5:33 PM, Gord=\r\non Mohr wrote:\n\n\n\n\n\n=C2=A0\n\n\n\n    Your setup looks generally correct. Are y=\r\nou perhaps forgetting to both \n\ndeclare the beans by name, *and* insert the=\r\nm by &lt;ref&gt; into the &lt;list&gt; of \n\nthe chain bean?\n\n\n\nSome other comments that=\r\n may help in configuring these features in H3:\n\n\n\nMatthew Warhaftig wrote:\n=\r\n\n&gt; In H3 I am trying to setup crawl jobs that \n\n&gt; use FetchHistoryProcess o=\r\nr/PersistStoreP rocessor/ PersistLoadProce ssor to \n\n&gt; discard duplicate co=\r\nntent.  I can get H1 to recrawl correctly but the \n\n&gt; same technique is not=\r\n storing a history and finding duplicates for me in \n\n&gt; H3 (my job setup is=\r\n based on these \n\n&gt; postings: https://webarchive. jira.com/ wiki/display/ H=\r\neritrix/ Feature+Notes+ -+1.12.0 & http://tech. groups.yahoo. com/group/ ar=\r\nchive-crawler/ message/5920).\n\n&gt; \n\n&gt; For the storing job I added the follow=\r\ning to the default \n\n&gt; H3 crawler-beans. cxml file.  In the Fetch Chain jus=\r\nt after \n\n&gt; the &quot;fetchHttp&quot; bean:\n\n&gt;&gt; &lt;bean id=3D&quot;fetchHistoryPro cessor&quot; \n=\r\n\n&gt;&gt; class=3D&quot;org.archive. modules.recrawl. FetchHistoryProc essor&quot; &gt; &lt;prope=\r\nrty \n\n&gt;&gt; name=3D&quot;historyLength &quot; value=3D&quot;30&quot; /&gt; &lt;/bean&gt;\n\n&gt;&gt;\n\n&gt;&gt; &lt;bean id=\r\n=3D&quot;persistStorePro cessor&quot; \n\n&gt;&gt; class=3D&quot;org.archive. modules.recrawl. Per=\r\nsistStoreProc essor&quot; &gt; &lt;/bean&gt;\n\n\n\nUnrelated to your issues, in the near fut=\r\nure it will be better to put \n\nthe persistStoreProcess or as the first in t=\r\nhe &#39;dispositionChain&#39; rather \n\nthan the last position of the &#39;fetchChain&#39; .=\r\n Essentially, the \n\ndispositionChain&#39; s activities will be atomic with rega=\r\nrd to \n\ncheckpointing -- any URI that starts the dispositionChain will fini=\r\nsh it \n\nbefore a checkpoint is stored -- but the fetchChain&#39;s activities wi=\r\nll not.\n\n\n\nAlso unrelated but good to know: H3&#39;s configuration makes it muc=\r\nh easier \n\nfor different components to optionally use separate BDB environm=\r\nents on \n\ndisk. Two reasons one might want to do so: (1) distribute the IO =\r\ncosts \n\nover different disks; (2) keep distinct data separate on disk for \n=\r\n\nbackup/migration- to-new-jobs, as with the difference between \n\nqueues/sta=\r\nteof the running crawl, and URI history for deduplication \n\npurposes.\n\n\n\nFo=\r\nr example, you could declare...\n\n\n\n&lt;bean id=3D&quot;persistStoreBdb &quot; class=3D&quot;o=\r\nrg.archive. bdb.BdbModule&quot; \n\nautowire-candidate=3D &quot;false&quot;&gt;\n\n   &lt;property n=\r\name=3D&quot;dir&quot; value=3D&quot;history&quot; /&gt;\n\n&lt;/bean&gt;\n\n\n\n&lt;bean id=3D&quot;persistStorePro ce=\r\nssor&quot; \n\nclass=3D&quot;org.archive. modules.recrawl. PersistStoreProc essor&quot;&gt;\n\n  =\r\n &lt;property name=3D&quot;bdbModule&quot; &gt;\n\n     &lt;ref bean=3D&quot;persistStoreB db&quot;/&gt;\n\n   =\r\n&lt;/property&gt;\n\n  &lt;/bean&gt;\n\n\n\n...and then persistent URI history will collect i=\r\nn a &#39;history&#39; directory \n\n(which could be a full path to anywhere convenien=\r\nt) rather than being \n\nmixed-in with other crawler state.\n\n\n\n(The reason fo=\r\nr the &#39;autowire-candidate =3D&quot;false&quot;&#39; is to prevent this \n\nBdbModule from b=\r\neing a competitor to the default for all the objects \n\nthat expect one dist=\r\ninguished instance to be available for autowiring.)\n\n\n\n&gt; Then for another j=\r\nob to use this stored history I added the following to \n\n&gt; the default H3 c=\r\nrawler-bean. cxml file. In the Fetch Chain just after the \n\n&gt; &quot;precondition=\r\ns&quot; bean:\n\n&gt;&gt; &lt;bean id=3D&quot;persistLoadProc essor&quot; \n\n&gt;&gt; class=3D&quot;org.archive. =\r\nmodules.recrawl. PersistLoadProce ssor&quot;&gt; &lt;property \n\n&gt;&gt; name=3D&quot;preloadSour=\r\nce &quot; \n\n&gt;&gt; value=3D&quot;/Users/ mattwarhaftig/ Documents/ heritrix- 3.0.0-SNAPSH=\r\nOT/ jobs/basic/ state&quot; \n\n&gt;&gt; /&gt; &lt;/bean&gt;\n\n&gt; And just after the &quot;fetchHttp&quot; be=\r\nan:\n\n&gt;&gt; &lt;bean id=3D&quot;fetchHistoryPro cessor&quot; \n\n&gt;&gt; class=3D&quot;org.archive. modu=\r\nles.recrawl. FetchHistoryProc essor&quot; &gt; &lt;property \n\n&gt;&gt; name=3D&quot;historyLength=\r\n &quot; value=3D&quot;30&quot; /&gt; &lt;/bean&gt;\n\n\n\nNote that &#39;preloadSource&#39; causes the processo=\r\nr to scan the named log or \n\ndirectory, and copy all its contents into its =\r\ncurrent history database. \n\nIf using this, make sure you&#39;re not pointing to=\r\n the same path it&#39;s \n\ncurrently\n\n\n\nYou could also skip the &#39;preload&#39; and di=\r\nrectly point the \n\nPersistLoadProcesso r to an existing history store:\n\n\n\n&lt;=\r\nbean id=3D&quot;persistLoadBdb&quot; class=3D&quot;org.archive. bdb.BdbModule&quot; \n\nautowire-=\r\ncandidate=3D &quot;false&quot;&gt;\n\n   &lt;property name=3D&quot;dir&quot; \n\nvalue=3D&quot;/Users/ mattwar=\r\nhaftig/ Documents/ heritrix- 3.0.0-SNAPSHOT/ jobs/basic/ state&quot;/&gt;\n\n&lt;/bean&gt;\n=\r\n\n\n\n&lt;bean id=3D&quot;persistLoadProc essor&quot;\n\n  class=3D&quot;org.archive. modules.recr=\r\nawl. PersistLoadProce ssor&quot;&gt;\n\n  &lt;property name=3D&quot;bdbModule&quot; &gt;\n\n     &lt;ref b=\r\nean=3D&quot;persistLoadBd b&quot;/&gt;\n\n   &lt;/property&gt;\n\n&lt;/bean&gt;\n\n\n\n(Except for the &#39;prel=\r\noad&#39;, if specified, the PersistLoadProcesso r only \n\nreads from its given B=\r\ndbModule/environme nt, so you could reuse a prior \n\ncrawl&#39;s persist-store t=\r\narget without damaging it.)\n\n\n\nThere&#39;s currently a problem with having both=\r\n a PersistLoadProcesso r and \n\nPersistStoreProcess or in the same crawl usi=\r\nng the same \n\nBdbModule/directory [HER-1706], but that should work by the t=\r\nime of the \n\nH3 official release.\n\n\n\nHope this helps,\n\n\n\n- Gordon @ IA\n\n\n\n&gt;=\r\n Am I declaring these beans correctly?\n\n&gt; \n\n&gt; Thanks,\n\n&gt; Matt\n\n&gt; \n\n&gt; \n\n&gt; \n\n=\r\n\n\n    \n     \n\n    \n\n\n\n\n\n\n\n\n\n\n    \n     \n\n    \n    \n\n\n \n\n\n\n  \n\n\n\n\n\n\n      \r\n--0-1915573619-1259076971=:95872\r\nContent-Type: text/html; charset=utf-8\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;table cellspacing=3D&quot;0&quot; cellpadding=3D&quot;0&quot; border=3D&quot;0&quot; &gt;&lt;tr&gt;&lt;td valign=3D&quot;=\r\ntop&quot; style=3D&quot;font: inherit;&quot;&gt;&lt;br&gt;&lt;br&gt;Hello Matt and Gordon,&lt;br&gt;&lt;br&gt;Followi=\r\nng Gordon&#39;s advice and assuming HER-1706 to be fixed, I am using only two o=\r\nf the persistProcessors: load and store.&lt;br&gt;As suggested, I am using the sa=\r\nme BdbModule/&#39;history&#39; dir for both the processors. &lt;br&gt;However I don&#39;t see=\r\n any deduplication happening. Neither I am getting any exception or error t=\r\no look into. I am using heritrix-3.0.0-RC1&lt;br&gt;This is my config file. Have =\r\nI missed something?&lt;br&gt;http://cs.odu.edu/~pramo_p/crawler-beans.cxml&lt;br&gt;&lt;br=\r\n&gt;wud appreciate any help on this.&lt;br&gt;&lt;br&gt;Thanks,&lt;br&gt;Pranay&lt;br&gt;&lt;br&gt;--- On &lt;b=\r\n&gt;Fri, 11/13/09, Matthew Warhaftig &lt;i&gt;&lt;mwarhaftig@...&gt;&lt;/i&gt;&lt;/b&gt; w=\r\nrote:&lt;br&gt;&lt;blockquote style=3D&quot;border-left: 2px solid rgb(16, 16, 255); marg=\r\nin-left: 5px; padding-left: 5px;&quot;&gt;&lt;br&gt;From: Matthew Warhaftig &lt;mwarhafti=\r\ng@...&gt;&lt;br&gt;Subject: Re: [archive-crawler] Recrawling In Heritrix3&lt;b=\r\nr&gt;To:\n archive-crawler@yahoogroups.com&lt;br&gt;Date: Friday, November 13, 2009, =\r\n9:04 PM&lt;br&gt;&lt;br&gt;&lt;div id=3D&quot;yiv1763872681&quot;&gt;\n\n\n\n\n\n&lt;span style=3D&quot;display: none=\r\n;&quot;&gt;&nbsp;&lt;/span&gt;\n\n\n\n    &lt;div id=3D&quot;ygrp-text&quot;&gt;\n      \n      \n      &lt;p&gt;&lt;font=\r\n class=3D&quot;Apple-style-span&quot; size=3D&quot;3&quot;&gt;&lt;span class=3D&quot;Apple-style-span&quot; sty=\r\nle=3D&quot;font-size: 12px;&quot;&gt;Good advice, thank you Gordon. &nbsp;Adding the rec=\r\nrawl processors to the chain bean and pointing PersistLoadProcesso r &lt;/span=\r\n&gt;&lt;/font&gt;&lt;span class=3D&quot;Apple-style-span&quot;&gt;&lt;font class=3D&quot;Apple-style-span&quot; s=\r\nize=3D&quot;3&quot;&gt;&lt;span class=3D&quot;Apple-style-span&quot; style=3D&quot;font-size: 12px;&quot;&gt;direc=\r\ntly to my existing history (no preload) got the recrawl working.&lt;/span&gt;&lt;/fo=\r\nnt&gt;&lt;/span&gt;&lt;/p&gt;&lt;div&gt;&lt;span class=3D&quot;Apple-style-span&quot;&gt;&lt;font class=3D&quot;Apple-st=\r\nyle-span&quot; size=3D&quot;3&quot;&gt;&lt;span class=3D&quot;Apple-style-span&quot; style=3D&quot;font-size: 1=\r\n2px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span class=3D&quot;Apple-style-span&quot;&gt;=\r\n&lt;font class=3D&quot;Apple-style-span&quot; size=3D&quot;3&quot;&gt;&lt;span class=3D&quot;Apple-style-span=\r\n&quot; style=3D&quot;font-size: 12px;&quot;&gt;Thanks,&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span c=\r\nlass=3D&quot;Apple-style-span&quot;&gt;&lt;font class=3D&quot;Apple-style-span&quot; size=3D&quot;2&quot;&gt;&lt;span=\r\n class=3D&quot;Apple-style-span&quot; style=3D&quot;font-size: 10px;&quot;&gt;&lt;font class=3D&quot;Apple=\r\n-style-span&quot; size=3D&quot;3&quot;&gt;&lt;span\n class=3D&quot;Apple-style-span&quot; style=3D&quot;font-siz=\r\ne: 12px;&quot;&gt;Matt&lt;/span&gt;&lt;/font&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/d=\r\niv&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;On Nov 10, 2009, at 5:33 PM, Gordon Mohr wrote:&lt;=\r\n/div&gt;&lt;br class=3D&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote type=3D&quot;cite&quot;&gt;\n\n\n\n=\r\n&lt;div style=3D&quot;background-color: rgb(255, 255, 255);&quot;&gt;\n&lt;span&gt;&nbsp;&lt;/span&gt;\n\n=\r\n\n\n    &lt;div id=3D&quot;ygrp-text&quot;&gt;&lt;p&gt;Your setup looks generally correct. Are you =\r\nperhaps forgetting to both &lt;br&gt;\ndeclare the beans by name, *and* insert the=\r\nm by &lt;ref&gt; into the &lt;list&gt; of &lt;br&gt;\nthe chain bean?&lt;br&gt;\n&lt;br&gt;\nSom=\r\ne other comments that may help in configuring these features in H3:&lt;br&gt;\n&lt;br=\r\n&gt;\nMatthew Warhaftig wrote:&lt;br&gt;\n&gt; In H3 I am trying to setup crawl jobs t=\r\nhat &lt;br&gt;\n&gt; use FetchHistoryProcess or/PersistStoreP rocessor/ PersistLoa=\r\ndProce ssor to &lt;br&gt;\n&gt; discard duplicate content.  I can get H1 to recraw=\r\nl correctly but the &lt;br&gt;\n&gt; same technique is not storing a history and f=\r\ninding duplicates for me in &lt;br&gt;\n&gt; H3 (my job setup is based on these &lt;b=\r\nr&gt;\n&gt; postings: &lt;a rel=3D&quot;nofollow&quot; target=3D&quot;_blank&quot; href=3D&quot;https://web=\r\narchive.jira.com/wiki/display/Heritrix/Feature+Notes+-+1.12.0&quot;&gt;https://weba=\r\nrchive. jira.com/ wiki/display/ Heritrix/ Feature+Notes+ -+1.12.0&lt;/a&gt; &amp;=\r\n &lt;a rel=3D&quot;nofollow&quot; target=3D&quot;_blank&quot; href=3D&quot;http://tech.groups.yahoo.com=\r\n/group/archive-crawler/message/5920&quot;&gt;http://tech. groups.yahoo. com/group/ =\r\narchive-crawler/ message/5920&lt;/a&gt;).&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; For the storing job =\r\nI added the following to the default &lt;br&gt;\n&gt; H3 crawler-beans. cxml file.=\r\n  In the Fetch Chain just after &lt;br&gt;\n&gt; the &quot;fetchHttp&quot; bean:&lt;br&gt;\n&gt;&gt=\r\n; &lt;bean id=3D&quot;fetchHistoryPro cessor&quot; &lt;br&gt;\n&gt;&gt; class=3D&quot;org.archive=\r\n. modules.recrawl. FetchHistoryProc essor&quot; &gt; &lt;property &lt;br&gt;\n&gt;&gt; =\r\nname=3D&quot;historyLength &quot; value=3D&quot;30&quot; /&gt; &lt;/bean&gt;&lt;br&gt;\n&gt;&gt;&lt;br&gt;\n&=\r\ngt;&gt; &lt;bean id=3D&quot;persistStorePro cessor&quot; &lt;br&gt;\n&gt;&gt; class=3D&quot;org.a=\r\nrchive. modules.recrawl. PersistStoreProc essor&quot; &gt; &lt;/bean&gt;&lt;br&gt;\n&lt;br=\r\n&gt;\nUnrelated to your issues, in the near future it will be better to put &lt;br=\r\n&gt;\nthe persistStoreProcess or as the first in the &#39;dispositionChain&#39; rather =\r\n&lt;br&gt;\nthan the last position of the &#39;fetchChain&#39; . Essentially, the &lt;br&gt;\ndis=\r\npositionChain&#39; s activities will be atomic with regard to &lt;br&gt;\ncheckpointin=\r\ng -- any URI that starts the dispositionChain will finish it &lt;br&gt;\nbefore a =\r\ncheckpoint is stored -- but the fetchChain&#39;s activities will not.&lt;br&gt;\n&lt;br&gt;\n=\r\nAlso unrelated but good to know: H3&#39;s configuration makes it much easier &lt;b=\r\nr&gt;\nfor different components to optionally use separate BDB environments on =\r\n&lt;br&gt;\ndisk. Two reasons one might want to do so: (1) distribute the IO costs=\r\n &lt;br&gt;\nover different disks; (2) keep distinct data separate on disk for &lt;br=\r\n&gt;\nbackup/migration- to-new-jobs, as with the difference between &lt;br&gt;\nqueues=\r\n/stateof the running crawl, and URI history for deduplication &lt;br&gt;\npurposes=\r\n.&lt;br&gt;\n&lt;br&gt;\nFor example, you could declare...&lt;br&gt;\n&lt;br&gt;\n&lt;bean id=3D&quot;persis=\r\ntStoreBdb &quot; class=3D&quot;org.archive. bdb.BdbModule&quot; &lt;br&gt;\nautowire-candidate=3D=\r\n &quot;false&quot;&gt;&lt;br&gt;\n   &lt;property name=3D&quot;dir&quot; value=3D&quot;history&quot; /&gt;&lt;br&gt;\n&=\r\nlt;/bean&gt;&lt;br&gt;\n&lt;br&gt;\n&lt;bean id=3D&quot;persistStorePro cessor&quot; &lt;br&gt;\nclass=3D&quot;=\r\norg.archive. modules.recrawl. PersistStoreProc essor&quot;&gt;&lt;br&gt;\n   &lt;proper=\r\nty name=3D&quot;bdbModule&quot; &gt;&lt;br&gt;\n     &lt;ref bean=3D&quot;persistStoreB db&quot;/&gt;&lt;=\r\nbr&gt;\n   &lt;/property&gt;&lt;br&gt;\n  &lt;/bean&gt;&lt;br&gt;\n&lt;br&gt;\n...and then persisten=\r\nt URI history will collect in a &#39;history&#39; directory &lt;br&gt;\n(which could be a =\r\nfull path to anywhere convenient) rather than being &lt;br&gt;\nmixed-in with othe=\r\nr crawler state.&lt;br&gt;\n&lt;br&gt;\n(The reason for the &#39;autowire-candidate =3D&quot;false=\r\n&quot;&#39; is to prevent this &lt;br&gt;\nBdbModule from being a competitor to the default=\r\n for all the objects &lt;br&gt;\nthat expect one distinguished instance to be avai=\r\nlable for autowiring.)&lt;br&gt;\n&lt;br&gt;\n&gt; Then for another job to use this store=\r\nd history I added the following to &lt;br&gt;\n&gt; the default H3 crawler-bean. c=\r\nxml file. In the Fetch Chain just after the &lt;br&gt;\n&gt; &quot;preconditions&quot; bean:=\r\n&lt;br&gt;\n&gt;&gt; &lt;bean id=3D&quot;persistLoadProc essor&quot; &lt;br&gt;\n&gt;&gt; class=3D&quot;=\r\norg.archive. modules.recrawl. PersistLoadProce ssor&quot;&gt; &lt;property &lt;br&gt;\n=\r\n&gt;&gt; name=3D&quot;preloadSource &quot; &lt;br&gt;\n&gt;&gt; value=3D&quot;/Users/ mattwarhaft=\r\nig/ Documents/ heritrix- 3.0.0-SNAPSHOT/ jobs/basic/ state&quot; &lt;br&gt;\n&gt;&gt; /=\r\n&gt; &lt;/bean&gt;&lt;br&gt;\n&gt; And just after the &quot;fetchHttp&quot; bean:&lt;br&gt;\n&gt;&g=\r\nt; &lt;bean id=3D&quot;fetchHistoryPro cessor&quot; &lt;br&gt;\n&gt;&gt; class=3D&quot;org.archiv=\r\ne. modules.recrawl. FetchHistoryProc essor&quot; &gt; &lt;property &lt;br&gt;\n&gt;&gt;=\r\n name=3D&quot;historyLength &quot; value=3D&quot;30&quot; /&gt; &lt;/bean&gt;&lt;br&gt;\n&lt;br&gt;\nNote tha=\r\nt &#39;preloadSource&#39; causes the processor to scan the named log or &lt;br&gt;\ndirect=\r\nory, and copy all its contents into its current history database. &lt;br&gt;\nIf u=\r\nsing this, make sure you&#39;re not pointing to the same path it&#39;s &lt;br&gt;\ncurrent=\r\nly&lt;br&gt;\n&lt;br&gt;\nYou could also skip the &#39;preload&#39; and directly point the &lt;br&gt;\nP=\r\nersistLoadProcesso r to an existing history store:&lt;br&gt;\n&lt;br&gt;\n&lt;bean id=3D&quot;=\r\npersistLoadBdb&quot; class=3D&quot;org.archive. bdb.BdbModule&quot; &lt;br&gt;\nautowire-candidat=\r\ne=3D &quot;false&quot;&gt;&lt;br&gt;\n   &lt;property name=3D&quot;dir&quot; &lt;br&gt;\nvalue=3D&quot;/Users/ mat=\r\ntwarhaftig/ Documents/ heritrix- 3.0.0-SNAPSHOT/ jobs/basic/ state&quot;/&gt;&lt;br=\r\n&gt;\n&lt;/bean&gt;&lt;br&gt;\n&lt;br&gt;\n&lt;bean id=3D&quot;persistLoadProc essor&quot;&lt;br&gt;\n  class=\r\n=3D&quot;org.archive. modules.recrawl. PersistLoadProce ssor&quot;&gt;&lt;br&gt;\n  &lt;prop=\r\nerty name=3D&quot;bdbModule&quot; &gt;&lt;br&gt;\n     &lt;ref bean=3D&quot;persistLoadBd b&quot;/&gt;=\r\n&lt;br&gt;\n   &lt;/property&gt;&lt;br&gt;\n&lt;/bean&gt;&lt;br&gt;\n&lt;br&gt;\n(Except for the &#39;prelo=\r\nad&#39;, if specified, the PersistLoadProcesso r only &lt;br&gt;\nreads from its given=\r\n BdbModule/environme nt, so you could reuse a prior &lt;br&gt;\ncrawl&#39;s persist-st=\r\nore target without damaging it.)&lt;br&gt;\n&lt;br&gt;\nThere&#39;s currently a problem with =\r\nhaving both a PersistLoadProcesso r and &lt;br&gt;\nPersistStoreProcess or in the =\r\nsame crawl using the same &lt;br&gt;\nBdbModule/directory [HER-1706], but that sho=\r\nuld work by the time of the &lt;br&gt;\nH3 official release.&lt;br&gt;\n&lt;br&gt;\nHope this he=\r\nlps,&lt;br&gt;\n&lt;br&gt;\n- Gordon @ IA&lt;br&gt;\n&lt;br&gt;\n&gt; Am I declaring these beans correc=\r\ntly?&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; Thanks,&lt;br&gt;\n&gt; Matt&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;br&gt;\n&gt; =\r\n&lt;br&gt;\n&lt;/p&gt;\n\n    &lt;/div&gt;\n     \n\n    \n\n&lt;/div&gt;\n\n\n\n\n\n&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div=\r\n&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n\n    &lt;/div&gt;\n     \n\n\n\n \n\n\n&lt;/div&gt;&lt;/blockquote&gt;&lt;/td&gt;=\r\n&lt;/tr&gt;&lt;/table&gt;&lt;br&gt;\n\n      \r\n--0-1915573619-1259076971=:95872--\r\n\n"}}