{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":191387937,"authorName":"pandae667","from":"&quot;pandae667&quot; &lt;aaron667@...&gt;","profile":"pandae667","replyTo":"LIST","senderId":"1WHtcnMF9ThK0ebtyIUQNnyD0Oj6iPVa-jq9SyPnrFnrCpgMxOYisSUFnXPXTd33Yqw9Kuwl2hoNVARCfkxoCW97JhHL","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: extracting HTTP headers from WARC response records","postDate":"1174555533","msgId":3942,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PGV0dGkyZCsxMDBxaEBlR3JvdXBzLmNvbT4=","inReplyToHeader":"PDQ2MDE4MDI2LjUwMzAzMDRAYXJjaGl2ZS5vcmc+"},"prevInTopic":3939,"nextInTopic":3944,"prevInTime":3940,"nextInTime":3943,"topicId":3937,"numMessagesInTopic":4,"msgSnippet":"... Yes, thats what I ment. Sorry for confusing things. ... accordingly ... parse of ... This is what my current ugly solution does. But I have to admit I m ","rawEmail":"Return-Path: &lt;aaron667@...&gt;\r\nX-Sender: aaron667@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 42724 invoked from network); 22 Mar 2007 09:25:41 -0000\r\nReceived: from unknown (66.218.66.166)\n  by m50.grp.scd.yahoo.com with QMQP; 22 Mar 2007 09:25:41 -0000\r\nReceived: from unknown (HELO n24c.bullet.sp1.yahoo.com) (209.131.38.236)\n  by mta5.grp.scd.yahoo.com with SMTP; 22 Mar 2007 09:25:41 -0000\r\nReceived: from [216.252.122.219] by n24.bullet.sp1.yahoo.com with NNFMP; 22 Mar 2007 09:25:35 -0000\r\nReceived: from [66.218.69.2] by t4.bullet.sp1.yahoo.com with NNFMP; 22 Mar 2007 09:25:35 -0000\r\nReceived: from [66.218.66.85] by t2.bullet.scd.yahoo.com with NNFMP; 22 Mar 2007 09:25:35 -0000\r\nDate: Thu, 22 Mar 2007 09:25:33 -0000\r\nTo: archive-crawler@yahoogroups.com\r\nMessage-ID: &lt;etti2d+100qh@...&gt;\r\nIn-Reply-To: &lt;46018026.5030304@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:6:0:0\r\nFrom: &quot;pandae667&quot; &lt;aaron667@...&gt;\r\nSubject: Re: extracting HTTP headers from WARC response records\r\nX-Yahoo-Group-Post: member; u=191387937; y=aqEbW56ZF8RFlq6hPE79RI0OqbLiz_7vrNE72ilSMRQPvene\r\nX-Yahoo-Profile: pandae667\r\n\r\n--- In archive-crawler@yahoogroups.com, Michael Stack &lt;stack@...&gt; wrote:\n&gt;\n=\r\n&gt; pandae667 wrote:\n&gt; &gt;\n&gt; &gt; Dear IA-Team,\n&gt; &gt;\n&gt; &gt; as requested in [HER-1103]=\r\n I want/need an easy way to retrieve HTTP\n&gt; &gt; headers from WARC records (si=\r\nmilar to how its done for ARC records).\n&gt; &gt;\n&gt; &gt; I&#39;ve allready spent some ti=\r\nme with this issue and now need some\n&gt; &gt; feedback to decide upon a &quot;clean&quot; =\r\nsolution (as I wouldn&#39;t consider my\n&gt; &gt; current solution &quot;final&quot; yet).\n&gt; &gt;\n=\r\n&gt; &gt; Here is my current approach, feel free to add comments:\n&gt; &gt; - I basical=\r\nly moved all of the HTTP-Header parsing code from\n&gt; &gt; ARCReader into Archiv=\r\neReader (this includes modifing read() to handle\n&gt; &gt; the presence of a http=\r\nHeaderStream like it was done in ARCReader)\n&gt; &gt;\n&gt; \n&gt; I assume you mean ARCR=\r\necord in the above Olaf?\n&gt; \n\n\nYes, thats what I ment. Sorry for confusing t=\r\nhings.\n\n\n\n\n&gt; \n&gt; &gt; - extend ArchiveReader with abstract method\n&gt; &gt; recordCon=\r\ntainsParsableHeader() which I basically use to make sure I\n&gt; &gt; don&#39;t try to=\r\n parse http headers when there are none\n&gt; &gt;\n&gt; \n&gt; \n&gt; \n&gt; \n&gt; We could go the A=\r\nRC route and internal to WARCRecords, they figure \n&gt; themselves whether the=\r\ny have http headers or not and respond\naccordingly \n&gt; when asked.   We coul=\r\nd move the http header processing up into \n&gt; ArchiveReader so its generally=\r\n available.  We would need to be careful \n&gt; the additions  do not clash wit=\r\nh the existing ArchiveReader headers \n&gt; which contain for ARCs the parsed m=\r\netadata line and for WARCs a\nparse of \n&gt; the &#39;mime&#39; headers.\n\n\nThis is what=\r\n my current ugly solution does. But I have to admit I&#39;m\nnot happy with it..=\r\n.\n\n\n\n\n&gt; \n&gt; But I think that route is going to get ugly quick in the WARC wo=\r\nrld \n&gt; where we have a variety of possible record types instead of just one=\r\n.  \n&gt; It will be unclean having each WARC record mark whether or not it has=\r\n \n&gt; http headers.\n\n\nI have to agree with you on this.\n\n\n\n\n&gt; \n&gt; Plus, it wou=\r\nld be sweet if we could make the processing of headers more \n&gt; generic than=\r\n just http response headers.  For example, the WARC\nrequest, \n&gt; if http, wi=\r\nll contain http request headers as might the most basic WARC \n&gt; metadata ty=\r\npe if written as key, colon, then value.\n&gt; \n&gt; What you think of our making =\r\na decorator that a WARCReader applied to \n&gt; WARCRecords if it judged the re=\r\ncord contained headers? The WARCReader \n&gt; would look at record type and the=\r\n record&#39;s content-type and then\npick an \n&gt; appropriate decorator (Or would =\r\n&#39;parser&#39; be a better term than\n&#39;decorator&#39;?)\n&gt; \n\n\nI like the general idea -=\r\n but I have to admit I currently don&#39;t know\nhow to implement it.\nIf you cou=\r\nld propose an API/Interface I might be able to do some\nfurther work on it. =\r\n(as this http header [and record metadata] parsing\nis a feature I really ne=\r\ned.)\n\n\n\n\n&gt; &gt; - change getContentBegin to behave for WARC response records l=\r\nike it\n&gt; &gt; does for ARC records (it points after the http headers but befor=\r\ne the\n&gt; &gt; http payload)\n&gt; &gt;\n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; getContentBegin needs cleanup.=\r\n It currently means something different \n&gt; for ARCs and WARCs.\n\nTrue. But I=\r\n think this is only a minor issue - maybe annoying, but\nsomething that simp=\r\nly &quot;should be fixed sometime in the future&quot;...\n\n\n\n\n&gt; \n&gt; Thanks for looking =\r\ninto this Olaf,\n&gt; St.Ack\n\n\nIts always a pleasure helping out - and fun digg=\r\ning my way through\nheritrixs code.\n\nRegards\n  Olaf Freyer\n\n&gt; \n&gt; \n&gt; &gt; Any id=\r\neas/thoughts are welcome.\n&gt; &gt; If the IA-Team dislikes such heavy modificati=\r\nons of the current\n&gt; &gt; readers/records I could also just write my own\n&gt; &gt; H=\r\nttpHeaderParsingWARCReader... But I think extending the allready\n&gt; &gt; exista=\r\nnt code would be a better approach.\n&gt; &gt;\n&gt; &gt; Regards\n&gt; &gt; Olaf Freyer\n&gt; &gt;\n&gt; &gt;=\r\n\n&gt;\n\n\n\n"}}