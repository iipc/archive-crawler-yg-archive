{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"Ey4AIbMZzE9cvmMRqBoPQaMoouW6TWSq0tT-uzNmWvHj_xl41hkQtMgoXAFYyymzt35RuhNBqBjeiDXEQto8UtpcoSwXSzI","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] SurtPrefixedDecideRule - need a little starter help","postDate":"1204768600","msgId":5040,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ3Q0Y0RjU4LjUwMTA1MDdAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PDQ3Q0YyNTg2LjgwNzA2MDJAZW1vcnkuZWR1Pg==","referencesHeader":"PDQ3Q0RDMkNGLjYwNTA2MDFAZW1vcnkuZWR1PiA8NDdDRjIwQTMuNzAwMDAwOUBlbW9yeS5lZHU+IDw0N0NGMjU4Ni44MDcwNjAyQGVtb3J5LmVkdT4="},"prevInTopic":5039,"nextInTopic":5041,"prevInTime":5039,"nextInTime":5041,"topicId":5036,"numMessagesInTopic":6,"msgSnippet":"Typically (and in the rule progression you ve shown), SURT prefixes are used to rule things in, but not out. The general operation of your rules in plain","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 30625 invoked from network); 6 Mar 2008 01:56:49 -0000\r\nX-Received: from unknown (66.218.67.95)\n  by m45.grp.scd.yahoo.com with QMQP; 6 Mar 2008 01:56:49 -0000\r\nX-Received: from unknown (HELO relay00.pair.com) (209.68.5.9)\n  by mta16.grp.scd.yahoo.com with SMTP; 6 Mar 2008 01:56:48 -0000\r\nX-Received: (qmail 4919 invoked from network); 6 Mar 2008 01:56:39 -0000\r\nX-Received: from unknown (HELO ?192.168.1.28?) (unknown)\n  by unknown with SMTP; 6 Mar 2008 01:56:39 -0000\r\nX-pair-Authenticated: 71.204.189.79\r\nMessage-ID: &lt;47CF4F58.5010507@...&gt;\r\nDate: Wed, 05 Mar 2008 17:56:40 -0800\r\nUser-Agent: Thunderbird 2.0.0.12 (Windows/20080213)\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;47CDC2CF.6050601@...&gt; &lt;47CF20A3.7000009@...&gt; &lt;47CF2586.8070602@...&gt;\r\nIn-Reply-To: &lt;47CF2586.8070602@...&gt;\r\nContent-Type: text/plain; charset=windows-1252; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] SurtPrefixedDecideRule - need a little starter\n help\r\nX-Yahoo-Group-Post: member; u=137285340; y=RoffuCessAiRUdo8_QAF-i8mkLN74hUCySK8flovmpi9\r\nX-Yahoo-Profile: gojomo\r\n\r\nTypically (and in the rule progression you&#39;ve shown), SURT prefixes are \nused to rule things in, but not out.\n\nThe general operation of your rules in plain english is:\n\n  - mark everything as REJECT\n  - if fits in SURT, mark as ACCEPT\n  - if too many hops, mark as REJECT\n  - if transcluded (see below), mark as ACCEPT\n  - if a pathologically repetitive path, REJECT\n  - if an excessively long path, REJECT\n  - if a prerequisite of another URI, ACCEPT\n\nThey are applied in order, and the last decision to be applied wins.\n\nObviously, the two URIs you give as examples of unwanted inclusion don&#39;t \nfit within your SURT prefix -- so they are not ACCEPTed by that rule, \nand indeed must have a REJECT decision when at step 2.\n\nA later step must be ACCEPTing them. As they don&#39;t look like \nprerequisites, it&#39;s the &#39;transclusion&#39; step.\n\nFor our purposes, URIs get &#39;transcluded&#39; if they appear likely to be \nnecessary to render collected pages, even if they are off the primary \nscope. The TransclusionDecideRule makes this determination based on the \nway the link was discovered -- its &#39;hop type&#39;.\n\nThree kinds of hop types get transclusion treatment:\n\n&#39;embeds&#39; (&#39;E&#39;): things like an IMG, FRAME, SCRIPT, or STYLE SRC\n\n&#39;redirects&#39; (&#39;R&#39;): things like a server redirect or meta refresh\n\n&#39;speculative&#39; (&#39;X&#39;): possible links found inside Javascript or rich \nmedia that may be necessary to render the original page, even without a \nuser navigation click\n\nBy looking at the crawl.log lines for the URIs collected, you will see \n-- right after the URI itself -- a string of letters like &#39;LLE&#39; which \nindicates the hops-from-seed to reach that URI. Further, right after \nthat &#39;hops-path&#39; you will see another URI, which was the place the \ncurrent URI was discovered.\n\nYou can tighten whether such URIs are included by reducing the counts in \nthe TransclusionDecideRule&#39;s settings. Or, you can discard the rule \nentirely.\n\nBe aware, though, that this increases the likelihood your collection \nwill have gaps where pages refer to offsite resources. On some sites, \nthis might be no harm at all; others may extensively use offsite \nresources and look very bad unless they are also collected.\n\nLooking at your seed...\n\n   http://www.georgiaencyclopedia.org/nge/about/Index.jsp\n\n...I see that it uses graphics from...\n\n   http://www.georgiaencyclopedia.org/graphics/\n\nThis /graphics/ directory would *not* be accepted by your SURT prefix...\n\n   http://(org,georgiaencyclopedia,www,)/nge/about/\n\n...so it is only the &#39;transclusion&#39; which is currently getting them. \n(You could also expand your prefix to include the whole site, or add an \nextra prefix to include the /graphics/ directory.)\n\nHope this helps,\n\n- Gordon @ IA\n\n\nMicah Wedemeyer wrote:\n&gt; (Sorry for spamming, but I wanted to head off the inevitable reply...)\n&gt; \n&gt; I looked deeper and found the notes about starting each SURT prefix line\n&gt; with a &quot;+&quot;  This didn&#39;t seem to have any effect on the scoping, but it\n&gt; did get rid of the non-LDH errors.\n&gt; \n&gt; Also, before anyone asks, here are a few of the URLs that were\n&gt; (erroneously) crawled.  Let me know if I&#39;m wrong about that:\n&gt; \n&gt; http://www.technicalcollegesystemofgeorgia.org/\n&gt; http://gov.georgia.gov/02/gov/home/0,2218,78006749,00.html\n&gt; \n&gt; Obviously, I think these should be excluded by the surt prefix:\n&gt; http://(org,georgiaencyclopedia,www,)/nge/about/\n&gt; \n&gt; Thanks,\n&gt; Micah\n&gt; \n&gt; Micah Wedemeyer wrote:\n&gt;&gt;\n&gt;&gt; Still having trouble here...\n&gt;&gt;\n&gt;&gt; I&#39;ve tried adding the SURT prefixes to the seeds file, and it doesn&#39;t\n&gt;&gt; seem to limit the crawl scope. In addition, I see the following in the\n&gt;&gt; heritrix output log:\n&gt;&gt;\n&gt;&gt; Mar 5, 2008 5:29:54 PM org.archive.modules.seeds.SeedFileIterator transform\n&gt;&gt; INFO: line in seed file ignored: gnu.inet.encoding.IDNAException:\n&gt;&gt; Contains non-LDH characters. (org,georgiaencyclopedia,www,)\n&gt;&gt; org.apache.commons.httpclient.URIException:\n&gt;&gt; gnu.inet.encoding.IDNAException: Contains non-LDH characters.\n&gt;&gt; (org,georgiaencyclopedia,www,)\n&gt;&gt;\n&gt;&gt; Here is a snippet of my global.sheet:\n&gt;&gt;\n&gt;&gt; root:scope:rules=list, org.archive.modules.deciderules.DecideRule\n&gt;&gt; root:scope:rules:0=object, org.archive.modules.deciderules.RejectDecideRule\n&gt;&gt; root:scope:rules:1=object,\n&gt;&gt; org.archive.modules.deciderules.surt.SurtPrefixedDecideRule\n&gt;&gt; root:scope:rules:1:rebuild-on-reconfig=boolean, true\n&gt;&gt; root:scope:rules:1:seeds-as-surt-prefixes=boolean, true\n&gt;&gt; root:scope:rules:2=object,\n&gt;&gt; org.archive.modules.deciderules.TooManyHopsDecideRule\n&gt;&gt; root:scope:rules:3=object,\n&gt;&gt; org.archive.modules.deciderules.TransclusionDecideRule\n&gt;&gt; root:scope:rules:4=object,\n&gt;&gt; org.archive.modules.deciderules.PathologicalPathDecideRule\n&gt;&gt; root:scope:rules:5=object,\n&gt;&gt; org.archive.modules.deciderules.TooManyPathSegmentsDecideRule\n&gt;&gt; root:scope:rules:6=object,\n&gt;&gt; org.archive.modules.deciderules.PrerequisiteAcceptDecideRule\n&gt;&gt;\n&gt;&gt; The contents of the seeds file are as follows:\n&gt;&gt;\n&gt;&gt; http://www.georgiaencyclopedia.org/nge/about/Index.jsp\n&gt;&gt; &lt;http://www.georgiaencyclopedia.org/nge/about/Index.jsp&gt;\n&gt;&gt; http://(org,georgiaencyclopedia,www,)/nge/about/\n&gt;&gt;\n&gt;&gt; I&#39;ve also tried the SURTS_SOURCE_FILE, but it (seems to) try to infer\n&gt;&gt; the surt prefix, and I want to specify it exactly.\n&gt;&gt;\n&gt;&gt; What am I doing wrong?\n&gt;&gt;\n&gt;&gt; Thanks,\n&gt;&gt; Micah\n&gt;&gt;\n&gt;&gt; Micah Wedemeyer wrote:\n&gt;&gt;&gt;\n&gt;&gt;&gt; I&#39;d like to be able to crawl with the following 4 filters:\n&gt;&gt;&gt;\n&gt;&gt;&gt; 1 - Crawl by path (ie. http://sub.example.com/foo/\n&gt;&gt; &lt;http://sub.example.com/foo/&gt;\n&gt;&gt;&gt; &lt;http://sub.example.com/foo/ &lt;http://sub.example.com/foo/&gt;&gt; )\n&gt;&gt;&gt; 2 - Crawl by host (ie. http://sub.example.com &lt;http://sub.example.com&gt;\n&gt;&gt; &lt;http://sub.example.com &lt;http://sub.example.com&gt;&gt; )\n&gt;&gt;&gt; 3 - Crawl by domain (ie. http://*.example.com &lt;http://*.example.com&gt;\n&gt;&gt; &lt;http://*.example.com &lt;http://*.example.com&gt;&gt; )\n&gt;&gt;&gt; 4 - Free (crawl whatever you find)\n&gt;&gt;&gt;\n&gt;&gt;&gt; Now, it seems that the SurtPrefixedDecideRule should be able to handle\n&gt;&gt;&gt; all these cases. I&#39;m just unclear on how to go from a seed to the\n&gt;&gt;&gt; correct surt prefix.\n&gt;&gt;&gt;\n&gt;&gt;&gt; Assume we have a seed of: http://sub.example.com/foo/index.html\n&gt;&gt; &lt;http://sub.example.com/foo/index.html&gt;\n&gt;&gt;&gt; &lt;http://sub.example.com/foo/index.html\n&gt;&gt; &lt;http://sub.example.com/foo/index.html&gt;&gt;\n&gt;&gt;&gt; Its surt form would be: http://(com, example, sub,)/foo/index.html\n&gt;&gt;&gt;\n&gt;&gt;&gt; Are these surt prefixes correct for their respective cases?:\n&gt;&gt;&gt;\n&gt;&gt;&gt; 1 - http://(com, example, sub,)/foo/\n&gt;&gt;&gt; 2 - http://(com, example, sub,\n&gt;&gt;&gt; 3 - http://(com, example\n&gt;&gt;&gt; 4 - http://\n&gt;&gt;&gt;\n&gt;&gt;&gt; Please tell me if I have something wrong there.\n&gt;&gt;&gt;\n&gt;&gt;&gt; Assuming I understand that correctly, I&#39;m unclear on how to configure\n&gt;&gt;&gt; the SurtPrefixedDecideRule module. Specifically, how can I specify a\n&gt;&gt;&gt; particular surt prefix? I&#39;m assuming that the prefix inferred from the\n&gt;&gt;&gt; seed is the most restrictive (ie. it will always be case 1 in my list\n&gt;&gt;&gt; above). So, I would like to be able to explicitly set the prefix set.\n&gt;&gt;&gt; I notice there&#39;s an option to do this from a file, but can it also be\n&gt;&gt;&gt; done programmatically? Can I specify it directly?\n&gt;&gt;&gt;\n&gt;&gt;&gt; Alternately, it looks like I could add the specific surt prefix to the\n&gt;&gt;&gt; seed file, and then set SEEDS_AS_SURT_PREFIXES to true. However, the\n&gt;&gt;&gt; surt prefix in the seeds file would not be a valid URI. Is that a\n&gt;&gt;&gt; problem, to have invalid URIs in the seeds file?\n&gt;&gt;&gt;\n&gt;&gt;&gt; To sum up, the basic questions are this: do I understand surt prefixes\n&gt;&gt;&gt; correctly, and if so, how do I explicitly specify the desired prefiexs\n&gt;&gt;&gt; to the SurtPrefixedDecideRule?\n&gt;&gt;&gt;\n&gt;&gt;&gt; Thanks,\n&gt;&gt;&gt; Micah\n&gt; \n&gt; \n&gt;  \n&gt; Yahoo! Groups Links\n&gt; \n&gt; \n&gt; \n\n"}}