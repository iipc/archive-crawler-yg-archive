{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":168599281,"authorName":"Michael Stack","from":"Michael Stack &lt;stack@...&gt;","replyTo":"LIST","senderId":"toRWDTQV4N-m2BpnN3khgAow-RrrhwHmr-eo8Yf614gInkaWHMp72plrGrnde4fRoQvW-eppijr9tcI4gH_HDaAdjN-GkhJg","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] Does Heritrix support Unicode?","postDate":"1085591162","msgId":453,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQwQjRDRTdBLjEwODA1MDNAYXJjaGl2ZS5vcmc+"},"prevInTopic":451,"nextInTopic":454,"prevInTime":452,"nextInTime":454,"topicId":431,"numMessagesInTopic":6,"msgSnippet":"... Adding a charset attribute to the seed seems a little flakey (Does the attribute apply to that seed only, should it be used for pages discovered off this","rawEmail":"Return-Path: &lt;stack@...&gt;\r\nX-Sender: stack@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 99068 invoked from network); 26 May 2004 17:12:45 -0000\r\nReceived: from unknown (66.218.66.172)\n  by m25.grp.scd.yahoo.com with QMQP; 26 May 2004 17:12:45 -0000\r\nReceived: from unknown (HELO ia00524.archive.org) (209.237.232.202)\n  by mta4.grp.scd.yahoo.com with SMTP; 26 May 2004 17:12:45 -0000\r\nReceived: (qmail 27222 invoked by uid 100); 26 May 2004 17:05:32 -0000\r\nReceived: from b116-dyn-60.archive.org (HELO archive.org) (stack@...@209.237.240.60)\n  by mail-dev.archive.org with SMTP; 26 May 2004 17:05:32 -0000\r\nMessage-ID: &lt;40B4CE7A.1080503@...&gt;\r\nDate: Wed, 26 May 2004 10:06:02 -0700\r\nUser-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.5) Gecko/20031107 Debian/1.5-3\r\nX-Accept-Language: en\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nContent-Type: text/plain; charset=GB2312\r\nContent-Transfer-Encoding: 7bit\r\nX-Spam-DCC: : \r\nX-Spam-Checker-Version: SpamAssassin 2.63 (2004-01-11) on ia00524.archive.org\r\nX-Spam-Level: \r\nX-Spam-Status: No, hits=0.5 required=6.0 tests=AWL,HTML_MESSAGE autolearn=ham \n\tversion=2.63\r\nX-eGroups-Remote-IP: 209.237.232.202\r\nFrom: Michael Stack &lt;stack@...&gt;\r\nSubject: Re: [archive-crawler] Does Heritrix support Unicode?\r\nX-Yahoo-Group-Post: member; u=168599281\r\n\r\nzhousp wrote:\n\n&gt;hi,Michael Stack,\n&gt;\n&gt;how about try to add some properties to the seed url?\n&gt;For example, when add a seed url, I tell the hetrilex that this site\n&gt;is Chinese sites. Then hetrilex will use zh-cn as her default encode?\n&gt;  \n&gt;\nAdding a charset attribute to the seed seems a little flakey (Does the\nattribute apply to that seed only, should it be used for pages\ndiscovered off this original seed, etc.). I&#39;d rather go to the root\ncause of the problem, our non-respect for the html page charset.\n\n&gt;I have try another opensource crawler which named &quot;JSpider&quot; and it can\n&gt;encode the url correctly. But I like hetrilex  because we are more actively\n&gt;than JSpider group.\n&gt;\n&gt;  \n&gt;\nThanks for the pointer to JSpider. I took a quick look at it and cannot\nsee how it is that it works where Heritrix doesn&#39;t. The downloadable src\nalways ignores charset whether html header or HTML HEAD META tag (It\nuses java&#39;s URLConnection then reads the stream a line at a time looking\nfor URLs).\n\nSt.Ack\n\n&gt;ansi zhou\n&gt;\n&gt;\t\n&gt;\n&gt;======= 2004-05-22 08:23:32 =======\n&gt;\n&gt;  \n&gt;\n&gt;&gt;There&#39;s a few things going on here. If the character encoding is not\n&gt;&gt;specified in the http header but in the HTML HEAD META Content-Type tag,\n&gt;&gt;our HTML extractors don&#39;t see it and all is treated as single-byte\n&gt;&gt;content (The issue &quot;[ 913687 ] Make extractors interrogate for charset&quot;\n&gt;&gt;covers fixing this). Heritrix currently only respects encodings\n&gt;&gt;specified in the http-header content-type line (Also in the mix is, as\n&gt;&gt;far as I know, there is no sanctioned way of representing multibyte\n&gt;&gt;characters in an URI. You can URI encode the bytes but theres no means\n&gt;&gt;for passing the charset used encoding).\n&gt;&gt;\n&gt;&gt;The site www.anfeed.com is returning an http-header whose content-type\n&gt;&gt;looks like this:\n&gt;&gt;\n&gt;&gt;Content-Type: text/html\n&gt;&gt;\n&gt;&gt;This means that all page processing will be done as though the content\n&gt;&gt;were single-byte.\n&gt;&gt;\n&gt;&gt;The pages themselves indeed specify the encoding using headers like the\n&gt;&gt;following:\n&gt;&gt;\n&gt;&gt;&lt;meta http-equiv=&quot;Content-Language&quot; content=&quot;zh-cn&quot;&gt;\n&gt;&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=gb2312&quot;&gt;\n&gt;&gt;\n&gt;&gt;If we fixed our extractors so they read the page with the correct\n&gt;&gt;encoding, we&#39;d have some hope of extracting the URIs unmangled. Even\n&gt;&gt;then, while in the page, before we pass the URI to the frontier queue,\n&gt;&gt;we should URI escape the multibyte characters using the charset of the\n&gt;&gt;page they came from (This seems to be what mozilla is doing at least --\n&gt;&gt;I&#39;d have to look closer).\n&gt;&gt;\n&gt;&gt;I&#39;ve made a new issue to cover this last item -- &quot;Encode multibyte URIs\n&gt;&gt;using page charset before queuing&quot; -- to ensure heritrix carries URIs\n&gt;&gt;encoded with their source page encoding.\n&gt;&gt;\n&gt;&gt;Thanks for reporting the below,\n&gt;&gt;Yours,\n&gt;&gt;St.Ack\n&gt;&gt;\n&gt;&gt;zhousp wrote:\n&gt;&gt;\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;hi,everyone\n&gt;&gt;&gt;\n&gt;&gt;&gt;I found when the url contains some unicode char,Heritrix give some error messages in the log file.\n&gt;&gt;&gt;\n&gt;&gt;&gt;--------------------log start-------------------------------\n&gt;&gt;&gt;20040521013203062 http://www.anfeed.com/ &quot;Failed parse of class.asp?typeid=????&quot; class.asp?typeid=????\n&gt;&gt;&gt;20040521013203062 http://www.anfeed.com/ &quot;Failed parse of class.asp?typeid=????&quot; class.asp?typeid=????\n&gt;&gt;&gt;20040521013203062 http://www.anfeed.com/ &quot;Failed parse of class.asp?typeid=????&quot; class.asp?typeid=????\n&gt;&gt;&gt;20040521013203062 http://www.anfeed.com/ &quot;Failed parse of class.asp?typeid=????&quot; class.asp?typeid=????\n&gt;&gt;&gt;20040521013203062 http://www.anfeed.com/ &quot;Failed parse of class.asp?typeid=????&quot; class.asp?typeid=????\n&gt;&gt;&gt;20040521013203062 http://www.anfeed.com/ &quot;Failed parse of class.asp?typeid=????&quot; class.asp?typeid=????\n&gt;&gt;&gt;20040521013203062 http://www.anfeed.com/ &quot;Failed parse of class.asp?typeid=????&quot; class.asp?typeid=????\n&gt;&gt;&gt;20040521013203062 http://www.anfeed.com/ &quot;Failed parse of class.asp?typeid=????&quot; class.asp?typeid=????\n&gt;&gt;&gt;20040521013203062 http://www.anfeed.com/ &quot;Failed parse of class.asp?typeid=????&quot; class.asp?typeid=????\n&gt;&gt;&gt;20040521013203062 http://www.anfeed.com/ &quot;Failed parse of class.asp?typeid=????&quot; class.asp?typeid=????\n&gt;&gt;&gt;20040521013203062 http://www.anfeed.com/ &quot;Failed parse of class.asp?typeid=????&quot; class.asp?typeid=????\n&gt;&gt;&gt;20040521013203062 http://www.anfeed.com/ &quot;Failed parse of class.asp?typeid=????&quot; class.asp?typeid=????\n&gt;&gt;&gt;20040521013203062 http://www.anfeed.com/ &quot;Failed parse of class.asp?typeid=????&quot; class.asp?typeid=????\n&gt;&gt;&gt;-----------------------------------------------------------\n&gt;&gt;&gt;\n&gt;&gt;&gt;The &quot;????&quot; in the url are some Chinese words.\n&gt;&gt;&gt;\n&gt;&gt;&gt;ansi zhou\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;Yahoo! Groups Links\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; \n&gt;&gt;&gt;\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;Yahoo! Groups Links\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;    \n&gt;&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; \n&gt;Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n&gt; \n&gt;\n&gt;  \n&gt;\n\n\n\n"}}