{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":168599281,"authorName":"stack","from":"stack &lt;stack@...&gt;","replyTo":"LIST","senderId":"LrZk7UZOrzt5ZIwGQ5txIJTKcN56BYSLlcFXnq1VaKm3uzsCEqF8x3W5zFJhD2vomR_HsZsER_svz_xQGQbIjg","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] Re: Reading the files in Arc files","postDate":"1091458433","msgId":734,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQxMEU1NTgxLjMwMTAwMDhAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PDIwMDQwODAyMDgwNzM2LjYwNTg3LnFtYWlsQHdlYjkwMDEwLm1haWwuc2NkLnlhaG9vLmNvbT4=","referencesHeader":"PDIwMDQwODAyMDgwNzM2LjYwNTg3LnFtYWlsQHdlYjkwMDEwLm1haWwuc2NkLnlhaG9vLmNvbT4="},"prevInTopic":732,"nextInTopic":735,"prevInTime":733,"nextInTime":735,"topicId":727,"numMessagesInTopic":11,"msgSnippet":"... The av_* programs, they are not freely available. You could use the bin/arcreader to extract any of the listed files by passing an offset, field 3 from the","rawEmail":"Return-Path: &lt;stack@...&gt;\r\nX-Sender: stack@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 32470 invoked from network); 2 Aug 2004 14:53:46 -0000\r\nReceived: from unknown (66.218.66.218)\n  by m18.grp.scd.yahoo.com with QMQP; 2 Aug 2004 14:53:46 -0000\r\nReceived: from unknown (HELO dns.duboce.net) (63.203.238.114)\n  by mta3.grp.scd.yahoo.com with SMTP; 2 Aug 2004 14:53:46 -0000\r\nReceived: from archive.org ([192.168.1.105])\n\t(authenticated)\n\tby dns-eth1.duboce.net (8.10.2/8.10.2) with ESMTP id i72EDuA18855\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Mon, 2 Aug 2004 07:13:56 -0700\r\nMessage-ID: &lt;410E5581.3010008@...&gt;\r\nDate: Mon, 02 Aug 2004 07:53:53 -0700\r\nUser-Agent: Mozilla/5.0 (Macintosh; U; PPC Mac OS X Mach-O; en-US; rv:1.7b) Gecko/20040421\r\nX-Accept-Language: en-us, en\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;20040802080736.60587.qmail@...&gt;\r\nIn-Reply-To: &lt;20040802080736.60587.qmail@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Remote-IP: 63.203.238.114\r\nFrom: stack &lt;stack@...&gt;\r\nSubject: Re: [archive-crawler] Re: Reading the files in Arc files\r\nX-Yahoo-Group-Post: member; u=168599281\r\n\r\nYousef Ourabi wrote:\n\n&gt;Hi,\n&gt;I have a question about the arcwriter in heretix/bin.\n&gt;when I passin an arc.gz file here is what I get.\n&gt;\n&gt;http://mx.dir.yahoo.com/Zonas_geograficas/Paises/Puerto_Rico/Municipios/San_Juan/Ciudades/San_Juan/\n&gt;20040802075300 1203789 9489 text/html 216.136.232.200\n&gt;http://personals.sfgate.com/Images/icon_poweredby.gif\n&gt;20040802075311 1414203 905 image/gif 67.72.16.92\n&gt;\n&gt;\n&gt;Now so its says there are this files in the arc file.\n&gt;Are the av_* programs on the IA&#39;s site the ones to use\n&gt;to actually read the contents of those files?\n&gt;  \n&gt;\nThe av_* programs, they are not freely available.\n\nYou could use the bin/arcreader to extract any of the listed files by \npassing an offset, field 3 from the above listing.\n\nFirst do:\n\n    % ./bin/arcreader --help\n\nto see how to use arcreader from command-line.\n\nThen do:\n\n    % ./bin/arcreader --offset=1414203 ARC_FILE_NAME\n\nto extract the second of the items listed above.\n\nSt.Ack\n\n&gt;Thank you very much for your time.\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;--- stack &lt;stack@...&gt; wrote:\n&gt;\n&gt;  \n&gt;\n&gt;&gt;Good stuff.  See comments below.\n&gt;&gt;\n&gt;&gt;nhckbdk wrote:\n&gt;&gt;\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;Hi,\n&gt;&gt;&gt;\n&gt;&gt;&gt;...\n&gt;&gt;&gt;\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;&gt;pools of ARC writers and sockets for receiving data\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;to be written to \n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;ARC files.\n&gt;&gt;&gt; \n&gt;&gt;&gt;\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;The socket implementation won&#39;t work with SSL.  I&#39;d\n&gt;&gt;call it a deadend.\n&gt;&gt;\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt; - ARCInputStream features a handy readAll()\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;method returning a byte\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;[]\n&gt;&gt;&gt;   with the complete object.\n&gt;&gt;&gt; \n&gt;&gt;&gt;\n&gt;&gt;&gt;The reading seems to be better optimized in the IA\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;package\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;(though we haven&#39;t tried to measure the difference\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;in performance).\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt; \n&gt;&gt;&gt;\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;No real profiling has been done on ARCReader (I&#39;d\n&gt;&gt;say both are dogs \n&gt;&gt;compared to the av tools or Tom Emerson&#39;s libarc:\n&gt;&gt;smile).\n&gt;&gt;\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;Traversing an entire file is not directly supported\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;in the DK package,\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;but the ExtractCDX class implements a traversal for\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;its own purposes.\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt; \n&gt;&gt;&gt;\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;FYI: The ARCReader#main default output is now as\n&gt;&gt;pseudo-CDX using the \n&gt;&gt;following template: &#39;CDX b e a m s c V (or v if\n&gt;&gt;uncompressed) n g&#39;.  The \n&gt;&gt;hash is SHA-1, the form of hash recently added by\n&gt;&gt;Gordon to crawl.log \n&gt;&gt;output.  Calculating the hash slows the reader\n&gt;&gt;(Later, when the hash is \n&gt;&gt;added to the ARC itself, having the reader calculate\n&gt;&gt;the hash would be \n&gt;&gt;something you&#39;d turn or off; you&#39;d turn it on when\n&gt;&gt;you want to validate \n&gt;&gt;the ARC content).  Missing are outputting normalized\n&gt;&gt;versions of the \n&gt;&gt;original URL and the special Alexa hash that is made\n&gt;&gt;up of some \n&gt;&gt;combination of document attributes rather just a\n&gt;&gt;straight hash of the \n&gt;&gt;content.\n&gt;&gt;\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;We would like to see at some point of time a\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;package that combines\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;the best features of both the DK and the IA\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;package. Ideally this \n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;package should:\n&gt;&gt;&gt; - Be a small, closed enitity.\n&gt;&gt;&gt; - Be able to mimic the most important Alexa\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;tools.\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt; - Support both .arc and .arc.gz.\n&gt;&gt;&gt; - Provide efficient and convenient access to a\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;single object\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;   given a file and an offset.\n&gt;&gt;&gt; - Provide efficient and convenient traversal of\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;archives.\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt; - Provide convenient writing of ARC (and .arc.gz)\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;files.\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;   (Large-scale efficient writing may be left out\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;- this is more of\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;    a harvester issue).\n&gt;&gt;&gt;\n&gt;&gt;&gt; \n&gt;&gt;&gt;\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;All of the above sounds good.  Would be good to\n&gt;&gt;break the reading and \n&gt;&gt;writing of ARCs out of the crawler and have it\n&gt;&gt;instead include a jar.\n&gt;&gt;\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;First step\n&gt;&gt;&gt;----------\n&gt;&gt;&gt;\n&gt;&gt;&gt;As a first step, we are developing a version of the\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;DK package\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;that still provides all functionalities of the\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;package but builds on \n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;top\n&gt;&gt;&gt;of the IA package. The replacement for\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;ARCInputStream is called\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;ShareableARCRecord and should have the following\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;public members:\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;public class ShareableARCRecord{\n&gt;&gt;&gt;   public ShareableARCRecord(ARCRecord record,File\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;file);\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;   public File getFile();\n&gt;&gt;&gt;   public ARCRecordMetaData getMetaData();\n&gt;&gt;&gt;   public byte[] readAll() throws IOException;\n&gt;&gt;&gt;   public InputStream getObjectAsInputStream()\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;throws IOException;\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;}\n&gt;&gt;&gt;\n&gt;&gt;&gt;The File is just the name of the file in which the\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;record was found.\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;This is useful for indexing information.\n&gt;&gt;&gt;As the class name indicates, the two latter methods\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;may be called\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;any number of times without &quot;interference&quot;.\n&gt;&gt;&gt;\n&gt;&gt;&gt; \n&gt;&gt;&gt;\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;Should we add the arc file name to ARCRecord\n&gt;&gt;metadata?   (Not \n&gt;&gt;full-path,  just the name)?\n&gt;&gt;\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;In order to support CDX extraction we need to\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;extend the package\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;with more explicit support for batch jobs (i.e.\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;&quot;convenient ARC file \n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;traversal).\n&gt;&gt;&gt;This should be implemented through a class with the\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;following public \n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;members:\n&gt;&gt;&gt;\n&gt;&gt;&gt;public class ARCBatchData {\n&gt;&gt;&gt;\tpublic static ARCBatchData fromArcs(File[]\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;arcFiles);\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;\tpublic ARCReadingException[] run(ARCBatchJob job);\n&gt;&gt;&gt;\tpublic ARCReadingException[] run(ARCBatchJob[]\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;jobs);\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;}\n&gt;&gt;&gt;\n&gt;&gt;&gt;The class will do its best to read past any\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;&quot;damages&quot; of the given\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;ARC files and process as many records as it can\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;find. Problems \n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;encountered\n&gt;&gt;&gt;on the way (e.g. EOF within a record) are encoded\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;in the \n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;ARCReadingException\n&gt;&gt;&gt;class. In particular, the following code prints out\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;an error report\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;for the ARC file &quot;foo.arc&quot;:\n&gt;&gt;&gt;\n&gt;&gt;&gt; \n&gt;&gt;&gt;\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;ARCReader needs to be made more robust here.  It\n&gt;&gt;fails the ARC read \n&gt;&gt;currently whenever it hits a parse error.  It should\n&gt;&gt;instead try and \n&gt;&gt;move on to the next record in the file.\n&gt;&gt;\n&gt;&gt;Above is good stuff.\n&gt;&gt;St.Ack\n&gt;&gt;\n&gt;&gt;    \n&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;Yahoo! Groups Links\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; \n&gt;&gt;&gt;\n&gt;&gt;&gt;      \n&gt;&gt;&gt;\n&gt;&gt;    \n&gt;&gt;\n&gt;\n&gt;\n&gt;\n&gt;\t\t\n&gt;__________________________________\n&gt;Do you Yahoo!?\n&gt;Yahoo! Mail - 50x more storage than other providers!\n&gt;http://promotions.yahoo.com/new_mail\n&gt;\n&gt;\n&gt;\n&gt; \n&gt;Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n&gt; \n&gt;\n&gt;  \n&gt;\n\n\n"}}