{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"z9xdZfVx0ew7G4Lct6DYm-h1BI5ZmkpU1IFwQMVjhURgBF6h0K_9Hk1N4GyAw-hM2GrNhI8P8x1cE3XSw5KZWMP71NtYQRI","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] ReplayInputStream: problem getting first KB","postDate":"1118702763","msgId":1945,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQyQUUwQ0FCLjkwMTA0MDJAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGQ4ZXVjcSttZWFmQGVHcm91cHMuY29tPg==","referencesHeader":"PGQ4ZXVjcSttZWFmQGVHcm91cHMuY29tPg=="},"prevInTopic":1942,"nextInTopic":0,"prevInTime":1944,"nextInTime":1946,"topicId":1942,"numMessagesInTopic":2,"msgSnippet":"... By reading until you get a -1, you re going all the way to the end of the file. By passing the same buffer in on each loop, with no offset, you re always","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 74381 invoked from network); 13 Jun 2005 22:46:10 -0000\r\nReceived: from unknown (66.218.66.167)\n  by m28.grp.scd.yahoo.com with QMQP; 13 Jun 2005 22:46:10 -0000\r\nReceived: from unknown (HELO ia00524.archive.org) (207.241.224.172)\n  by mta6.grp.scd.yahoo.com with SMTP; 13 Jun 2005 22:46:10 -0000\r\nReceived: (qmail 23732 invoked by uid 100); 13 Jun 2005 22:46:03 -0000\r\nReceived: from unknown (HELO ?192.168.2.5?) (gojomo@...@207.241.237.3)\n  by mail-dev.archive.org with SMTP; 13 Jun 2005 22:46:03 -0000\r\nMessage-ID: &lt;42AE0CAB.9010402@...&gt;\r\nDate: Mon, 13 Jun 2005 15:46:03 -0700\r\nUser-Agent: Mozilla Thunderbird 1.0.2-1.3.2 (X11/20050324)\r\nX-Accept-Language: en-us, en\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;d8eucq+meaf@...&gt;\r\nIn-Reply-To: &lt;d8eucq+meaf@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-Spam-DCC: : \r\nX-Spam-Checker-Version: SpamAssassin 2.63 (2004-01-11) on ia00524.archive.org\r\nX-Spam-Level: \r\nX-Spam-Status: No, hits=-65.9 required=7.0 tests=AWL,USER_IN_WHITELIST \n\tautolearn=no version=2.63\r\nX-eGroups-Msg-Info: 1:12:0\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] ReplayInputStream: problem getting first KB\r\nX-Yahoo-Group-Post: member; u=137285340; y=w-h4bBXSqZnWizmPnr5OjFNDFQkgWOpwYCRSFyXootDp\r\nX-Yahoo-Profile: gojomo\r\n\r\nhc696_9 wrote:\n&gt; Hi\n&gt; I&#39;ve got a problem when I trie to get the first kilobyte from a \n&gt; ReplayInput Stream. The problem is: when the File is smaller then 1KB \n&gt; I&#39;ll get the hold file, if the file is bigger then 1KB I get a part \n&gt; of the file. The problem is, this part is NOT the beginning of the \n&gt; file! It&#39;s something between the beginning and the end of the file.\n&gt; What&#39;s wrong?\n&gt; \n&gt; //FYI: CrawlURI curi\n&gt; ReplayInputStream ris = curi.getHttpRecorder().getRecordedInput()\n&gt;                                .getContentReplayInputStream();\n&gt; byte[] buffer = new byte [1024];\n&gt; while (ris.read (buffer) != -1) {}\n&gt; ris.close();\n&gt; \n&gt; At the moment I&#39;m using verry old Versions of RecordingInputStream \n&gt; and RecordingOutputStream:\n&gt; \n&gt; - RecordingInputStream v 1.24\n&gt; - RecordingOutputStream v 1.17\n&gt; \n&gt; Was that a problem of this classes or did I something wrong?\n\nBy reading until you get a -1, you&#39;re going all the way to\nthe end of the file. By passing the same buffer in on each loop,\nwith no offset, you&#39;re always writing whatever does come\nback starting at index 0 in the buffer. (Each read() will\nreturn from 0 to 1024 bytes on each call.)\n\nYou should keep track of the exact number of bytes returned\nby the read(); if you need exactly 1K keep asking until you get\n1K or -1, writing into non-overlapping parts of your buffer.\n\n- Gordon @ IA\n\n"}}