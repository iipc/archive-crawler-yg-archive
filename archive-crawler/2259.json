{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"zZmzXH_SEc8MfV6qG9hUNvuSsAJbFxfkWf8kpFSbmxQnejuMLiRWNFOEzMFYGDqAOUEVcGXQlalKvy6Po9NuEeXLiQflJZM","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] budgetting","postDate":"1129841305","msgId":2259,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQzNTgwMjk5LjIwNDA4MDFAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PDA2NzhEQjE5NjhFQUM3NDA5Q0MzRDBBQjdBMTFCODRBNzg1NjAyQHNrYXJmdXIuYm9rLmxvY2FsPg==","referencesHeader":"PDA2NzhEQjE5NjhFQUM3NDA5Q0MzRDBBQjdBMTFCODRBNzg1NjAyQHNrYXJmdXIuYm9rLmxvY2FsPg=="},"prevInTopic":2250,"nextInTopic":0,"prevInTime":2258,"nextInTime":2260,"topicId":2249,"numMessagesInTopic":3,"msgSnippet":"... I like this idea, but there are some kinks that need to be worked out. Currently, the cost fills in one byte s worth of a CrawlURI s key in the","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 15991 invoked from network); 20 Oct 2005 20:48:32 -0000\r\nReceived: from unknown (66.218.66.166)\n  by m24.grp.scd.yahoo.com with QMQP; 20 Oct 2005 20:48:32 -0000\r\nReceived: from unknown (HELO ia00524.archive.org) (207.241.224.171)\n  by mta5.grp.scd.yahoo.com with SMTP; 20 Oct 2005 20:48:32 -0000\r\nReceived: (qmail 28289 invoked by uid 100); 20 Oct 2005 20:46:39 -0000\r\nReceived: from adsl-71-130-102-78.dsl.pltn13.pacbell.net (HELO ?192.168.1.10?) (gojomo@...@71.130.102.78)\n  by mail-dev.archive.org with SMTP; 20 Oct 2005 20:46:39 -0000\r\nMessage-ID: &lt;43580299.2040801@...&gt;\r\nDate: Thu, 20 Oct 2005 13:48:25 -0700\r\nUser-Agent: Mozilla Thunderbird 1.0.6-1.1.fc3 (X11/20050720)\r\nX-Accept-Language: en-us, en\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;0678DB1968EAC7409CC3D0AB7A11B84A785602@...&gt;\r\nIn-Reply-To: &lt;0678DB1968EAC7409CC3D0AB7A11B84A785602@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 8bit\r\nX-Spam-DCC: : \r\nX-Spam-Checker-Version: SpamAssassin 2.63 (2004-01-11) on ia00524.archive.org\r\nX-Spam-Level: \r\nX-Spam-Status: No, hits=-68.6 required=7.0 tests=AWL,USER_IN_WHITELIST \n\tautolearn=no version=2.63\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] budgetting\r\nX-Yahoo-Group-Post: member; u=137285340; y=GXMygxjeso-bZITabbszHGJFFA-k2T5YEVNP6Bg4aAvK\r\nX-Yahoo-Profile: gojomo\r\n\r\nKristinn Sigurdsson wrote:\n&gt; Regarding the issue of queue budgets. It occurs to me that there might be a\n&gt; better way to handle this and give operators some flexibility.\n&gt;  \n&gt; Like Bjarne suggests, move the wq.expend call to when the CrawlURI has\n&gt; finished being processed. But also move the actual cost calculation out into\n&gt; the processing chain by adding a BudgetCostEvaluator (possibly more then\n&gt; one) that can be further configured.\n&gt;  \n&gt; This not only allows more flexibility to the existing cost assignment\n&gt; policies (since they currently don&#39;t have any settable parameters, it&#39;s just\n&gt; a choice between the fixed policies) but it also makes it very simple to add\n&gt; customized policies without messing with the BdbFrontier in any way. It also\n&gt; makes it easier for other frontiers to implement budgeting.\n\nI like this idea, but there are some kinks that need to be worked out.\n\nCurrently, the cost fills in one byte&#39;s worth of a CrawlURI&#39;s key\nin the BerkeleyDB-backed work queue where it waits for processing.\n\nThis allows higher-cost URIs to sort behind lower-cost URIs, when\nthey otherwise have the same explicit scheduling priority, even\nbefore any fetching. It also makes it awkward to have costs larger t\nhan 255.\n\nThis follows from the queue budgetting system&#39;s original purpose,\nof biasing the crawler to spend less time on URI paths which are\nmore likely to be junk/chaff -- and thus assigned a higher &#39;cost&#39;.)\n\nThere&#39;s also the tension between that original purpose and the\nnew proposed purposes -- since you can only have one &#39;cost&#39;, and\neach of these uses requires a different definition. For example,\nif you want both a &#39;maximum bytes&#39; and a &#39;maximum documents&#39;\nlimit, you could use the current (single-valued) cost mechanism\nfor either, but not both.\n\nThat suggests that some generic expandable set of constraints that\ncan be mixed-and-matched would be ideal -- if all give the OK, a URI\nwill be scheduled or fetched. Otherwise, they could cause the URI\nto be discarded, deferred, or simply held to the side as appropriate.\nPerhaps even the existing &#39;per-hostname&#39;  or &#39;per-IP&#39; or\n&#39;per-time-interval&#39; constraints, which are also deeply ingrained\nwith the queueing system, could be recast into a new common\nsystem. But, designing and implementing such a generic system would\nbe a big job.\n\nFor doing something simple in the current case, I think the main\nissues are:\n  - can the 1-byte cost-in-key issue be sidestepped?\n  - is it ok to have &#39;before&#39; and &#39;after&#39; costs that might\n    differ significantly?\n  - is it sufficiently useful to only have one kind of &#39;cost&#39; at\n    a time, foreclosing the other potential uses?\n\n- Gordon\n\n&gt; - Kris\n&gt; \n&gt; -----Original Message-----\n&gt; From: archive-crawler@yahoogroups.com\n&gt; [mailto:archive-crawler@yahoogroups.com] On Behalf Of Bjarne Andersen\n&gt; Sent: 19. oktï¿½ber 2005 07:16\n&gt; To: archive-crawler@yahoogroups.com\n&gt; Subject: [archive-crawler] budgetting\n&gt; \n&gt; \n&gt; Hi.\n&gt; \n&gt; I have 2 issues about budgetting\n&gt; \n&gt; 1. Would it be problematic to move: &quot;wq.expend(getCost(curi))&quot;;\n&gt;     from WorkQueueFrontier.noteAboutToEmit(..)\n&gt;     to WorkQueueFrontier.finished(..) - just below: &quot;if (curi.isSuccess())\n&gt; {&quot;\n&gt; \n&gt; 2. should WorkQueue.refund() not just always refund this.lastCost() ?\n&gt; \n&gt; best\n&gt; \n\n"}}