{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":325624130,"authorName":"Noah Levitt","from":"Noah Levitt &lt;nlevitt@...&gt;","profile":"nlevitt","replyTo":"LIST","senderId":"ZKeXohfqzdG3SspqFUtcco3EVRaTnPDwvgZCoxF3AJWkU5DWvw6g6aichlsSCOFhSZlmx7VIzYIbvUxKXXzaGMxCvcDUAEIP","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] Heritrix cannot download Non-English text from an English website","postDate":"1388788265","msgId":8449,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PENBQS16NzBKZ1h5NE1SVDlveHQwY0o5SmZMZXFLdW1xLUMxbkZjSm1uYmFRY201Nm9vd0BtYWlsLmdtYWlsLmNvbT4=","inReplyToHeader":"PDEzODg3NTc1MTMuMjc0ODYuWWFob29NYWlsTmVvQHdlYjEyMjkwMi5tYWlsLm5lMS55YWhvby5jb20+","referencesHeader":"PDEzODcxOTc2MzAuMzg0MDcuWWFob29NYWlsTmVvQHdlYjEyMjkwMS5tYWlsLm5lMS55YWhvby5jb20+CTxDQUEtejcwS3dvVFg4WVp4enpqQ2dZck0raD1HSHVfUXlfclNibW9Yc0EzNmNyPTdjeVFAbWFpbC5nbWFpbC5jb20+CTwxMzg3MjY3NjUyLjM5NjAyLllhaG9vTWFpbE5lb0B3ZWIxMjI5MDIubWFpbC5uZTEueWFob28uY29tPgk8Q0FBLXo3MExLRDF6MmNzSzQrbUpIWG9YK2tKNk90WE44OTBSdnZYeVU5UUx3TUIxYlhRQG1haWwuZ21haWwuY29tPgk8MTM4NzMwMzk4NC42NTAwMi5ZYWhvb01haWxOZW9Ad2ViMTIyOTA2Lm1haWwubmUxLnlhaG9vLmNvbT4JPDEzODg3NTc1MTMuMjc0ODYuWWFob29NYWlsTmVvQHdlYjEyMjkwMi5tYWlsLm5lMS55YWhvby5jb20+"},"prevInTopic":8446,"nextInTopic":8452,"prevInTime":8448,"nextInTime":8450,"topicId":8428,"numMessagesInTopic":8,"msgSnippet":"Arin, Not sure what you re doing with that stuff after the code block you pasted here, but this line looks suspicious: arcRecordContent = content.toString(); ","rawEmail":"Return-Path: &lt;nlevitt@...&gt;\r\nX-Sender: nlevitt@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 73984 invoked by uid 102); 3 Jan 2014 22:31:07 -0000\r\nX-Received: from unknown (HELO mtaq2.grp.bf1.yahoo.com) (10.193.84.33)\n  by m8.grp.bf1.yahoo.com with SMTP; 3 Jan 2014 22:31:07 -0000\r\nX-Received: (qmail 8782 invoked from network); 3 Jan 2014 22:31:06 -0000\r\nX-Received: from unknown (HELO mail.archive.org) (207.241.224.6)\n  by mtaq2.grp.bf1.yahoo.com with SMTP; 3 Jan 2014 22:31:06 -0000\r\nX-Received: from localhost (localhost [127.0.0.1])\n\tby mail.archive.org (Postfix) with ESMTP id A6CD0A6202C\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Fri,  3 Jan 2014 14:31:06 -0800 (PST)\r\nX-Received: from mail.archive.org ([127.0.0.1])\n\tby localhost (mail.archive.org [127.0.0.1]) (amavisd-new, port 10024)\n\twith LMTP id bs0dDaQ6SXOl for &lt;archive-crawler@yahoogroups.com&gt;;\n\tFri,  3 Jan 2014 14:31:06 -0800 (PST)\r\nX-Received: from mail-oa0-f45.google.com (mail-oa0-f45.google.com [209.85.219.45])\n\tby mail.archive.org (Postfix) with ESMTPSA id D3C7777D841\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Fri,  3 Jan 2014 14:31:05 -0800 (PST)\r\nX-Received: by mail-oa0-f45.google.com with SMTP id g12so1188394oah.4\n        for &lt;archive-crawler@yahoogroups.com&gt;; Fri, 03 Jan 2014 14:31:05 -0800 (PST)\r\nX-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;\n        d=1e100.net; s=20130820;\n        h=mime-version:in-reply-to:references:date:message-id:subject:from:to\n         :content-type:content-transfer-encoding;\n        bh=qYLVrdZFOeoB3iG4o7GobNFc/VPnH512q4y633rzrbk=;\n        b=PQ40pP/tnUVnJo6XuYTkhPVioMp6mddX4lyt9yoA7skq45hDjdfm70WcdjREEbmRLz\n         KYinIGVND7W3wAqKUZ50VvgLaByFvKsl1JQAGIUqZ9KSyfWrW1QbbCj/iXjb9DUgD930\n         rNZHG+6RgQwm/W5gqdbH6lOAmw15PjcDCX93iOEsrrhS5lWxF1yRY3yKwniG8EmU7AXz\n         XzYWbQ/hFiH6AGTdanNatXRpSgeI+CpQNuUfh51EW4NULITWd78LQ6gjJXny3js/cRIH\n         5U9OxMvbvdP9VFJyIjZZGrgXDit/NMUepdwz/w8cZGihR7u8dDLL5mYGNwTg7PA83fcU\n         WGyw==\r\nMIME-Version: 1.0\r\nX-Received: by 10.60.84.138 with SMTP id z10mr60251358oey.4.1388788265138;\n Fri, 03 Jan 2014 14:31:05 -0800 (PST)\r\nX-Received: by 10.76.166.137 with HTTP; Fri, 3 Jan 2014 14:31:05 -0800 (PST)\r\nIn-Reply-To: &lt;1388757513.27486.YahooMailNeo@...&gt;\r\nReferences: &lt;1387197630.38407.YahooMailNeo@...&gt;\n\t&lt;CAA-z70KwoTX8YZxzzjCgYrM+h=GHu_Qy_rSbmoXsA36cr=7cyQ@...&gt;\n\t&lt;1387267652.39602.YahooMailNeo@...&gt;\n\t&lt;CAA-z70LKD1z2csK4+mJHXoX+kJ6OtXN890RvvXyU9QLwMB1bXQ@...&gt;\n\t&lt;1387303984.65002.YahooMailNeo@...&gt;\n\t&lt;1388757513.27486.YahooMailNeo@...&gt;\r\nDate: Fri, 3 Jan 2014 14:31:05 -0800\r\nMessage-ID: &lt;CAA-z70JgXy4MRT9oxt0cJ9JfLeqKumq-C1nFcJmnbaQcm56oow@...&gt;\r\nTo: &quot;archive-crawler@yahoogroups.com&quot; &lt;archive-crawler@yahoogroups.com&gt;\r\nContent-Type: text/plain; charset=UTF-8\r\nContent-Transfer-Encoding: quoted-printable\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Noah Levitt &lt;nlevitt@...&gt;\r\nSubject: Re: [archive-crawler] Heritrix cannot download Non-English text from\n an English website\r\nX-Yahoo-Group-Post: member; u=325624130; y=SPuXv4uooRS721yFXB0zzAjb_ewh4zh1zo2hM4ZbTAZltg\r\nX-Yahoo-Profile: nlevitt\r\n\r\nArin,\n\nNot sure what you&#39;re doing with that stuff after the code block you\n=\r\npasted here, but this line looks suspicious:\n\narcRecordContent =3D content.=\r\ntoString();\n\nBest to keep everything in raw bytes all the way through. No n=\r\need to\nconvert to string.\n\nNoah\n\nOn Fri, Jan 3, 2014 at 5:58 AM, Arin Patel=\r\n Itha &lt;iarinpatel@...&gt; wrote:\n&gt;\n&gt;\n&gt; Hi Noah,\n&gt;\n&gt; Need your help in va=\r\nlidating the way I am currently reading the records from\n&gt; my Arc file. I a=\r\nssume this is the root cause why the character encoding is\n&gt; not preserved =\r\nwhen the data is stored into database\n&gt;\n&gt; public static String storeArc(ARC=\r\nReader reader) {\n&gt;\n&gt;  String arcRecordContent =3D &quot;&quot;;\n&gt;  reader.setParseHtt=\r\npHeaders(true);\n&gt;  Iterator&lt;ArchiveRecord&gt; iterator =3D reader.iterator();\n=\r\n&gt;\n&gt;  /**\n&gt;   * Skip the header record of Arc file\n&gt;   */\n&gt;  if(iterator.has=\r\nNext())\n&gt;   iterator.next();\n&gt;  while(iterator.hasNext()) {\n&gt;\n&gt;     ARCReco=\r\nrd record =3D (ARCRecord) iterator.next();\n&gt;     ARCRecordMetaData header =\r\n=3D record.getMetaData();\n&gt;     record.skipHttpHeader();\n&gt;     ByteArrayOut=\r\nputStream baos =3D new ByteArrayOutputStream();\n&gt;     record.dump(baos);\n&gt; =\r\n    byte[] content =3D baos.toByteArray();\n&gt;     arcRecordContent =3D conte=\r\nnt.toString();\n&gt;    }\n&gt; }\n&gt;\n&gt; After the thread:\n&gt; http://groups.yahoo.com/n=\r\neo/groups/archive-crawler/conversations/topics/3984\n&gt; , it appears that the=\r\n issue is with the code that is underlined above.\n&gt;\n&gt; Please advise.\n&gt;\n&gt; ~A=\r\nrin\n&gt;\n&gt;\n&gt;\n&gt; On Tuesday, December 17, 2013 11:43 PM, Arin Patel Itha\n&gt; &lt;iari=\r\nnpatel@...&gt; wrote:\n&gt; Hey Noah,\n&gt; You are correct, it&#39;s the issue with=\r\n my file editor. TextPad is translating\n&gt; all the Japanese characters into =\r\n?. When I open the Arc file in Notepad I am\n&gt; able to see the right data. I=\r\n did not think about it since the Arc data that\n&gt; was loaded into my databa=\r\nse also missing the original Japanese text.\n&gt; In my programs, I am using or=\r\ng.archive.io.arc.ARCReader,\n&gt; org.archive.io.arc.ARCRecord and other classe=\r\ns to load the records from Arc\n&gt; file and store it into my database. The da=\r\ntabase has UTF-8 encoding settings\n&gt; but still there is an information loss=\r\n.\n&gt; I will investigate more on this and let you know for further assistance=\r\n.\n&gt; Thanks for your help so far.\n&gt; ~Ravi\n&gt;\n&gt;\n&gt; On Tuesday, December 17, 201=\r\n3 10:17 PM, Noah Levitt &lt;nlevitt@...&gt;\n&gt; wrote:\n&gt;\n&gt; Arin,\n&gt;\n&gt; I trie=\r\nd crawling that page and writing to arc, and it worked fine. Is it\n&gt; possib=\r\nle the file got mangled by your text editor or something? If not,\n&gt; maybe y=\r\nou can try the latest build from\n&gt; http://builds.archive.org/maven2/org/arc=\r\nhive/heritrix/heritrix/3.2.0-SNAPSHOT/.\n&gt; If the problem persists you might=\r\n want to debug it yourself since I can&#39;t\n&gt; seem to reproduce it.\n&gt;\n&gt; Noah\n&gt;=\r\n\n&gt;\n&gt;\n&gt;\n&gt; On Tue, Dec 17, 2013 at 12:07 AM, Arin Patel Itha &lt;iarinpatel@yaho=\r\no.com&gt;\n&gt; wrote:\n&gt;\n&gt; [Attachment(s) from Arin Patel Itha included below]\n&gt;\n&gt;=\r\n Noah,\n&gt;\n&gt; Thanks for responding.\n&gt;\n&gt; The URL: http://en.wikipedia.org/wiki=\r\n/H%C5%8Dch%C5%8Dd%C5%8D\n&gt;\n&gt; ARC file is attached for your review.\n&gt;\n&gt; ~Arin=\r\n\n&gt;\n&gt;\n&gt; On Tuesday, December 17, 2013 12:42 PM, Noah Levitt &lt;nlevitt@archive=\r\n.org&gt;\n&gt; wrote:\n&gt;\n&gt; Hello Arin,\n&gt;\n&gt; Can you share the url of the site and/or=\r\n your arc file?\n&gt;\n&gt; Noah\n&gt;\n&gt;\n&gt; On Mon, Dec 16, 2013 at 4:40 AM, Arin Patel =\r\nItha &lt;iarinpatel@...&gt;\n&gt; wrote:\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; All,\n&gt; My Heritrix job canno=\r\nt download Japanese characters from a website.\n&gt; These three characters =E5=\r\n=BA=96=E4=B8=81=E9=81=93 are downloaded as ??? in my Arc file. Rest of the\n=\r\n&gt; content i.e. English language text was downloaded properly.\n&gt; In the arc =\r\nfile, the header record contains the below values:\n&gt; Content-Type: text/htm=\r\nl; charset=3DUTF-8\n&gt; The seed I tried to run against contains couple of non=\r\n-English\n&gt; words/characters.\n&gt; I am using Heritrix 3.1, so please assist ho=\r\nw I can fix this issue.\n&gt; Thanks,\n&gt; Arin Patel.\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;=\r\n\n&gt; \n\n"}}