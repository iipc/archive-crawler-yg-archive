{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":95792214,"authorName":"Christoph Buescher","from":"Christoph Buescher &lt;sterntaufe@...&gt;","profile":"christoph_buescher","replyTo":"LIST","senderId":"EszMU7aIuevvfFguvCilyGK0MRpu31yKcgKS8taNLmc37jd7m2fWL6NvDNlDJGx2XoroLjJgG47XBjdvtD_PRUSUAyEY-Ao5M3-8Fus","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Question about ArchiveReader Iterator","postDate":"1196848563","msgId":4763,"canDelete":false,"contentTrasformed":false,"systemMessage":true,"headers":{"messageIdInHeader":"PDQ3NTY3NUIzLjgwODAxMDhAZ214LmRlPg=="},"prevInTopic":0,"nextInTopic":4776,"prevInTime":4762,"nextInTime":4764,"topicId":4763,"numMessagesInTopic":7,"msgSnippet":"Hi, I m new to Heritrix and currently using version 1.12.1. I successfully crawled my first few webpages and want to use the ArchiveReader to further process","rawEmail":"Return-Path: &lt;sterntaufe@...&gt;\r\nReceived: (qmail 78012 invoked from network); 5 Dec 2007 18:04:53 -0000\r\nReceived: from unknown (66.218.67.97)\n  by m46.grp.scd.yahoo.com with QMQP; 5 Dec 2007 18:04:53 -0000\r\nReceived: from unknown (HELO n31c.bullet.scd.yahoo.com) (66.94.237.8)\n  by mta18.grp.scd.yahoo.com with SMTP; 5 Dec 2007 18:04:53 -0000\r\nReceived: from [209.73.164.83] by n31.bullet.scd.yahoo.com with NNFMP; 05 Dec 2007 18:04:53 -0000\r\nReceived: from [66.218.66.84] by t7.bullet.scd.yahoo.com with NNFMP; 05 Dec 2007 18:04:53 -0000\r\nX-Sender: sterntaufe@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 50876 invoked from network); 5 Dec 2007 09:56:04 -0000\r\nX-Received: from unknown (66.218.67.95)\n  by m56.grp.scd.yahoo.com with QMQP; 5 Dec 2007 09:56:04 -0000\r\nX-Received: from unknown (HELO mail-gw-01.neofonie.de) (81.17.210.143)\n  by mta16.grp.scd.yahoo.com with SMTP; 5 Dec 2007 09:56:04 -0000\r\nX-Received: from [172.27.27.76] (helo=perseus.exchange.neofonie.de)\n\tby mail-gw-01.neofonie.de with esmtp (Exim 4.63)\n\t(envelope-from &lt;sterntaufe@...&gt;)\n\tid 1Izqz5-00015o-Fx\n\tfor archive-crawler@yahoogroups.com; Wed, 05 Dec 2007 10:56:03 +0100\r\nX-Received: from [172.23.100.36] ([172.23.100.36]) by perseus.exchange.neofonie.de with Microsoft SMTPSVC(6.0.3790.1830);\n\t Wed, 5 Dec 2007 10:56:03 +0100\r\nMessage-ID: &lt;475675B3.8080108@...&gt;\r\nDate: Wed, 05 Dec 2007 10:56:03 +0100\r\nUser-Agent: Thunderbird 2.0.0.9 (X11/20071114)\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nContent-Type: text/plain; charset=ISO-8859-15\r\nContent-Transfer-Encoding: 7bit\r\nX-OriginalArrivalTime: 05 Dec 2007 09:56:03.0341 (UTC) FILETIME=[0BEC43D0:01C83725]\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Christoph Buescher &lt;sterntaufe@...&gt;\r\nReply-To: Christoph Buescher &lt;sterntaufe@...&gt;\r\nSubject: Question about ArchiveReader Iterator\r\nX-Yahoo-Group-Post: member; u=95792214; y=nmpdQP9PCrn38AeNUidLh6Ohdev2Jnt4vgSP3mb-4G-11NK2tRvzybezlGYz\r\nX-Yahoo-Profile: christoph_buescher\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Approved-By: gojomo &lt;gojomo@...&gt; via web; 05 Dec 2007 18:04:51 -0000\r\n\r\nHi,\n\nI&#39;m new to Heritrix and currently using version 1.12.1. I successfully crawled\nmy first few webpages and want to use the ArchiveReader to further process the\nresults in my Java program.\n\nI stumbled across some irritating behaviour of the ArchiveReader.iterator, that\nI would like to ask about. First, I thought that calling the hasNext() method on\nthe ArchiveRecordIterator without advancing the iterator by calling the next()\nmethod should alway work. This seems to be true for a freshly created\nReader/Iterator, but after getting the first record, calling hasNext() more than\nonce gives the following Runtime exception:\n\njava.lang.RuntimeException: Failed i/o: Negative seek offset\n\tat\norg.archive.io.GzippedInputStream.moveToNextGzipMember(GzippedInputStream.java:301)\n\tat org.archive.io.GzippedInputStream$1.hasNext(GzippedInputStream.java:228)\n\tat\norg.archive.io.arc.ARCReaderFactory$CompressedARCReader$1.innerHasNext(ARCReaderFactory.java:399)\n\tat\norg.archive.io.ArchiveReader$ArchiveRecordIterator.hasNext(ArchiveReader.java:485)\n\n\nHere&#39;s the unit test, using a zipped Arc-File:\n\npublic void testArchReaderIteratorHasNext() throws Exception {\n\t\tString inputFile =\n&quot;src/test/resources/arcFiles/CRAWL-20071130161712-00001-graz.arc.gz&quot;;\n\t\tArchiveReader reader = ArchiveReaderFactory.get(new File(inputFile));\n\t\tIterator&lt;ArchiveRecord&gt; arcRecordIterator = reader.iterator();\n\t\tif (arcRecordIterator.hasNext()) {\n\t\t\t// this seems to work\n\t\t\tfor (int i=0; i&lt;100; i++) {\n\t\t\t\tarcRecordIterator.hasNext();\n\t\t\t}\n\t\t\t// here I still get the first record\n\t\t\tArchiveRecord r = arcRecordIterator.next();\n\t\t\tassertNotNull(r);\n\t\t\tr.dump();\n\t\t}\n\t\tarcRecordIterator.hasNext();\n\t\tfor (int i=0; i&lt;100; i++) {\n\t\t\tarcRecordIterator.hasNext();\n\t\t}\n\t}\n\n\nAt the moment it seems to me, that the only safe way using the iterator is to\nensure that a hasNext() is always followed by exactly one next() call that reads\nthe following record.\nIs this true or am I missing something? I&#39;m just asking because for me this\nwasn&#39;t the intuitive behaviour of an iterator and I couldn&#39;t find anything about\nthis in the Docs or the Wiki so far.\n\nThanks for any hints,\n\nChristoph\n\n\n"}}