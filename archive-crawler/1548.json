{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":163406187,"authorName":"Kristinn Sigurdsson","from":"&quot;Kristinn Sigurdsson&quot; &lt;kris@...&gt;","profile":"kristsi25","replyTo":"LIST","senderId":"6RhKgfULXpsXvoxQ9a571opYT7A13FKssxkyi7oL20vsc7vOQeMR0UzAMR1E6oMffK2lSZD9FdD1IokAm5h3kxvtBhGLtnlJds0y1MfrrQ","spamInfo":{"isSpam":false,"reason":"0"},"subject":"RE: [archive-crawler] RFE: New queue assignment policy","postDate":"1108387880","msgId":1548,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDA2NzhEQjE5NjhFQUM3NDA5Q0MzRDBBQjdBMTFCODRBMDZFQzVFQHNrYXJmdXIuYm9rLmxvY2FsPg==","inReplyToHeader":"PDIwMDUwMjE0MTQxNC41MDM0OS5jay1oZXJpdHJpeEBuZXdzY2x1Yi5kZT4="},"prevInTopic":1545,"nextInTopic":1549,"prevInTime":1547,"nextInTime":1549,"topicId":1545,"numMessagesInTopic":13,"msgSnippet":"Hey Christian, I ve got a quick question for you: just how many hosts/ips are you crawling?? I ve conducted crawls over about 1000-1200 domains (maybe a total","rawEmail":"Return-Path: &lt;kris@...&gt;\r\nX-Sender: kris@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 83634 invoked from network); 14 Feb 2005 13:31:42 -0000\r\nReceived: from unknown (66.218.66.216)\n  by m16.grp.scd.yahoo.com with QMQP; 14 Feb 2005 13:31:42 -0000\r\nReceived: from unknown (HELO ia00524.archive.org) (207.241.224.172)\n  by mta1.grp.scd.yahoo.com with SMTP; 14 Feb 2005 13:31:42 -0000\r\nReceived: (qmail 13943 invoked by uid 100); 14 Feb 2005 13:15:03 -0000\r\nReceived: from forritun-4.bok.hi.is (HELO forritun4) (kris@...@130.208.152.83)\n  by mail-dev.archive.org with SMTP; 14 Feb 2005 13:15:03 -0000\r\nTo: &lt;archive-crawler@yahoogroups.com&gt;\r\nDate: Mon, 14 Feb 2005 13:31:20 -0000\r\nMessage-ID: &lt;0678DB1968EAC7409CC3D0AB7A11B84A06EC5E@...&gt;\r\nMIME-Version: 1.0\r\nContent-Type: multipart/alternative;\n\tboundary=&quot;----=_NextPart_000_0000_01C51299.79AC2BF0&quot;\r\nX-Priority: 3 (Normal)\r\nX-MSMail-Priority: Normal\r\nX-Mailer: Microsoft Outlook, Build 10.0.4510\r\nIn-Reply-To: &lt;200502141414.50349.ck-heritrix@...&gt;\r\nImportance: Normal\r\nX-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441\r\nX-Spam-DCC: : \r\nX-Spam-Checker-Version: SpamAssassin 2.63 (2004-01-11) on ia00524.archive.org\r\nX-Spam-Level: *\r\nX-Spam-Status: No, hits=1.0 required=6.5 tests=AWL,HTML_30_40,\n\tHTML_FONTCOLOR_BLUE,HTML_MESSAGE,HTML_RELAYING_FRAME,\n\tHTML_TAG_EXISTS_TBODY autolearn=no version=2.63\r\nX-eGroups-Remote-IP: 207.241.224.172\r\nFrom: &quot;Kristinn Sigurdsson&quot; &lt;kris@...&gt;\r\nSubject: RE: [archive-crawler] RFE: New queue assignment policy\r\nX-Yahoo-Group-Post: member; u=163406187\r\nX-Yahoo-Profile: kristsi25\r\n\r\n\r\n------=_NextPart_000_0000_01C51299.79AC2BF0\r\nContent-Type: text/plain;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nHey Christian,\n \nI&#39;ve got a quick question for you: just how many hosts/ips=\r\n are you\ncrawling??\n \nI&#39;ve conducted crawls over about 1000-1200 domains (m=\r\naybe a total of\nten-fifty times that many hosts once you count offsite imag=\r\nes etc.) that\ncovered well over a million documents (as many as 5 million i=\r\nn fact). And\nthis was with the much less efficient HostQueuesFrontier.\n \nI&#39;=\r\nve also tested the BDBFrontier (with 1GB of heap) running on 11 thousand\ndo=\r\nmains (and quite a few more hosts in total) without running into any\nproble=\r\nms. That crawl collected over 2 million documents before I shut it\ndown.\n \n=\r\nSo, I&#39;m a little surprised by the this. Are you running a strict broad\ncraw=\r\nl? The only way I could see the number of hosts become an issue within\nthe =\r\nfirst 1 million documents would be in a very broad oriented crawl...?\n \n- K=\r\nris\n\n-----Original Message-----\nFrom: Christian Kohlschuetter [mailto:ck-he=\r\nritrix@...] \nSent: 14. febr=FAar 2005 13:15\nTo: archive-crawler@yah=\r\noogroups.com\nSubject: [archive-crawler] RFE: New queue assignment policy\n\n\n=\r\nHi,\n\nhere&#39;s another feature which I would like to contribute.\n\nCurrently, I=\r\n am performing broad crawls using BroadScope/BdbFrontier.\nHowever, \ndue to =\r\nthe number of host- or IP-keyed queues, an OutOfMemoryError occurs \nvery qu=\r\nickly after starting the crawl. One reason for this is the RAM-based \nbookk=\r\neeping of subqueues -- the more queues, the more heap.\n\nI have evaded this =\r\nby writing a BucketQueueAssignmentPolicy class, which \nproduces a _fixed_ n=\r\number of subqueues (&quot;buckets&quot;), not one per host or per \nIP. The queue key =\r\nis computed by hashing the hostname (or the IP, if \navailable) modulo N (a =\r\nfixed number, such as 1000).\n\nThis way, I was able to increase the number o=\r\nf fetched pages from ca.\n400,000 \nto 1,000,000. For some other reason, I st=\r\nill get OOMEs, but I think that is \ncaused by a different problem -- the nu=\r\nmber of queues did not grow over the \nspecified limit.\n\nFurthermore, I have=\r\n modified AbstractFrontier to be able to choose arbitrary\n\nqueue assignment=\r\n policies and replaced the current &quot;ip-politness&quot; option by\na \nselectbox.\n\n=\r\nThe patch against CVS HEAD is attached.\n\nGreetings,\n-- \nChristian Kohlsch=\r\n=FCtter\nmailto: ck -at- NewsClub.de\n\n\nYahoo! Groups Sponsor\t\n\nADVERTISEMENT=\r\n\n\n\n \n&lt;http://us.ard.yahoo.com/SIG=3D129nutg3o/M=3D298184.6018725.7038619.30=\r\n01176/D=3Dgr\noups/S=3D1705004924:HM/EXP=3D1108473411/A=3D2532114/R=3D2/SIG=\r\n=3D12kjtm1j2/*http://clk.\natdmt.com/NFX/go/yhxxxnfx0020000014nfx/direct/01/=\r\n&time=3D1108387011109580&gt; \n \n&lt;http://us.adserver.yahoo.com/l?M=3D298184.601=\r\n8725.7038619.3001176/D=3Dgroups/S=3D\n:HM/A=3D2532114/rand=3D874636998&gt; \t\n\n\n=\r\n  _____  \n\nYahoo! Groups Links\n\n\n*\tTo visit your group on the web, go to:\nh=\r\nttp://groups.yahoo.com/group/archive-crawler/\n  \n\n*\tTo unsubscribe from thi=\r\ns group, send an email to:\narchive-crawler-unsubscribe@yahoogroups.com\n&lt;mai=\r\nlto:archive-crawler-unsubscribe@yahoogroups.com?subject=3DUnsubscribe&gt; \n  \n=\r\n\n*\tYour use of Yahoo! Groups is subject to the Yahoo! Terms of Service\n&lt;htt=\r\np://docs.yahoo.com/info/terms/&gt; . \n\n\n\r\n------=_NextPart_000_0000_01C51299.79AC2BF0\r\nContent-Type: text/html;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot;&gt;\n&lt;HTML&gt;&lt;HEAD&gt;=\r\n&lt;TITLE&gt;Message&lt;/TITLE&gt;\n&lt;META http-equiv=3DContent-Type content=3D&quot;text/html=\r\n; charset=3Diso-8859-1&quot;&gt;\n&lt;META content=3D&quot;MSHTML 6.00.2800.1476&quot; name=3DGEN=\r\nERATOR&gt;&lt;/HEAD&gt;\n&lt;BODY&gt;\n&lt;DIV&gt;&lt;SPAN class=3D781142513-14022005&gt;&lt;FONT face=3DAr=\r\nial color=3D#0000ff size=3D2&gt;Hey \nChristian,&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN=\r\n class=3D781142513-14022005&gt;&lt;FONT face=3DArial color=3D#0000ff \nsize=3D2&gt;&lt;/=\r\nFONT&gt;&lt;/SPAN&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=3D781142513-14022005&gt;&lt;FONT face=\r\n=3DArial color=3D#0000ff size=3D2&gt;I&#39;ve \ngot a quick question for you: just =\r\nhow many hosts/ips are you \ncrawling??&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=\r\n=3D781142513-14022005&gt;&lt;FONT face=3DArial color=3D#0000ff \nsize=3D2&gt;&lt;/FONT&gt;&lt;=\r\n/SPAN&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=3D781142513-14022005&gt;&lt;FONT face=3DArial=\r\n color=3D#0000ff size=3D2&gt;I&#39;ve \nconducted crawls over about 1000-1200 domai=\r\nns (maybe a total of \nten-fifty&nbsp;times that many hosts once you count o=\r\nffsite images etc.) that \ncovered well over a million documents (as many as=\r\n 5 million in fact). And this \nwas with the much less efficient HostQueuesF=\r\nrontier.&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=3D781142513-14022005&gt;&lt;FONT fa=\r\nce=3DArial color=3D#0000ff \nsize=3D2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN =\r\nclass=3D781142513-14022005&gt;&lt;FONT face=3DArial color=3D#0000ff size=3D2&gt;I&#39;ve=\r\n \nalso tested the BDBFrontier (with 1GB of heap) running on 11 thousand dom=\r\nains \n(and quite a few more hosts in total) without running into any proble=\r\nms. That \ncrawl collected over 2 million documents before I shut it \ndown.&lt;=\r\n/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=3D781142513-14022005&gt;&lt;FONT face=3DAria=\r\nl color=3D#0000ff \nsize=3D2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=3D7=\r\n81142513-14022005&gt;&lt;FONT face=3DArial color=3D#0000ff size=3D2&gt;So, \nI&#39;m a li=\r\nttle surprised by the this. Are you running a strict broad crawl? The \nonly=\r\n way I could see the number of hosts become an issue within the first 1 \nmi=\r\nllion documents would be in a very broad oriented \ncrawl...?&lt;/FONT&gt;&lt;/SPAN&gt;&lt;=\r\n/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=3D781142513-14022005&gt;&lt;FONT face=3DArial color=3D#000=\r\n0ff \nsize=3D2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=3D781142513-14022=\r\n005&gt;&lt;FONT face=3DArial color=3D#0000ff size=3D2&gt;- \nKris&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;=\r\n\n&lt;BLOCKQUOTE \nstyle=3D&quot;PADDING-LEFT: 5px; MARGIN-LEFT: 5px; BORDER-LEFT: #0=\r\n000ff 2px solid; MARGIN-RIGHT: 0px&quot;&gt;\n  &lt;DIV&gt;&lt;/DIV&gt;\n  &lt;DIV class=3DOutlookMe=\r\nssageHeader lang=3Den-us dir=3Dltr align=3Dleft&gt;&lt;FONT \n  face=3DTahoma size=\r\n=3D2&gt;-----Original Message-----&lt;BR&gt;&lt;B&gt;From:&lt;/B&gt; Christian \n  Kohlschuetter =\r\n[mailto:ck-heritrix@...] &lt;BR&gt;&lt;B&gt;Sent:&lt;/B&gt; 14. febr=FAar \n  2005 13:=\r\n15&lt;BR&gt;&lt;B&gt;To:&lt;/B&gt; archive-crawler@yahoogroups.com&lt;BR&gt;&lt;B&gt;Subject:&lt;/B&gt; \n  [arc=\r\nhive-crawler] RFE: New queue assignment \n  policy&lt;BR&gt;&lt;BR&gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;TT&gt;H=\r\ni,&lt;BR&gt;&lt;BR&gt;here&#39;s another feature which I would \n  like to contribute.&lt;BR&gt;&lt;B=\r\nR&gt;Currently, I am performing broad crawls using \n  BroadScope/BdbFrontier. =\r\nHowever, &lt;BR&gt;due to the number of host- or IP-keyed \n  queues, an OutOfMemo=\r\nryError occurs &lt;BR&gt;very quickly after starting the crawl. \n  One reason for=\r\n this is the RAM-based &lt;BR&gt;bookkeeping of subqueues -- the more \n  queues, =\r\nthe more heap.&lt;BR&gt;&lt;BR&gt;I have evaded this by writing a \n  BucketQueueAssignm=\r\nentPolicy class, which &lt;BR&gt;produces a _fixed_ number of \n  subqueues (&quot;buck=\r\nets&quot;), not one per host or per &lt;BR&gt;IP. The queue key is \n  computed by hash=\r\ning the hostname (or the IP, if &lt;BR&gt;available) modulo N (a \n  fixed number,=\r\n such as 1000).&lt;BR&gt;&lt;BR&gt;This way, I was able to increase the \n  number of fe=\r\ntched pages from ca. 400,000 &lt;BR&gt;to 1,000,000. For some other \n  reason, I =\r\nstill get OOMEs, but I think that is &lt;BR&gt;caused by a different \n  problem -=\r\n- the number of queues did not grow over the &lt;BR&gt;specified \n  limit.&lt;BR&gt;&lt;BR=\r\n&gt;Furthermore, I have modified AbstractFrontier to be able to \n  choose arbi=\r\ntrary &lt;BR&gt;queue assignment policies and replaced the current \n  &quot;ip-politne=\r\nss&quot; option by a &lt;BR&gt;selectbox.&lt;BR&gt;&lt;BR&gt;The patch against CVS HEAD is \n  atta=\r\nched.&lt;BR&gt;&lt;BR&gt;Greetings,&lt;BR&gt;-- &lt;BR&gt;Christian Kohlsch=FCtter&lt;BR&gt;mailto: ck \n =\r\n -at- NewsClub.de&lt;BR&gt;&lt;/TT&gt;&lt;BR&gt;&lt;/BODY&gt;&lt;/HTML&gt;\n\r\n------=_NextPart_000_0000_01C51299.79AC2BF0--\r\n\n"}}