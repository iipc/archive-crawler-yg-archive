{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":212342429,"authorName":"Pranay Pandey","from":"Pranay Pandey &lt;sspranay@...&gt;","profile":"sspranay","replyTo":"LIST","senderId":"7jYGK8JnOBtq59kNJzNqcefcZJSmL9axYPFzWKH0raT2Rzb8zr0ayvn0pVYDp_rowAnQdxZCZW0QuS7I9lidi_kmhs8EYptIEg","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] Re: (subject edited) Recrawling In Heritrix3.0.0-RC1","postDate":"1259077375","msgId":6170,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDM1MjYzMC45ODU0Ni5xbUB3ZWI0MzEzNi5tYWlsLnNwMS55YWhvby5jb20+","inReplyToHeader":"PDQ2MzczNS45NTg3Mi5xbUB3ZWI0MzEzNC5tYWlsLnNwMS55YWhvby5jb20+"},"prevInTopic":6169,"nextInTopic":6171,"prevInTime":6169,"nextInTime":6171,"topicId":6140,"numMessagesInTopic":6,"msgSnippet":"sorry about the broken link sent before. http://cs.odu.edu/~pramo_p/crawler-beans.cxml ... From: Pranay Pandey  Subject: [archive-crawler]","rawEmail":"Return-Path: &lt;sspranay@...&gt;\r\nX-Sender: sspranay@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 48066 invoked from network); 24 Nov 2009 15:43:18 -0000\r\nX-Received: from unknown (66.196.94.107)\n  by m13.grp.re1.yahoo.com with QMQP; 24 Nov 2009 15:43:18 -0000\r\nX-Received: from unknown (HELO web43136.mail.sp1.yahoo.com) (216.252.121.66)\n  by mta3.grp.re1.yahoo.com with SMTP; 24 Nov 2009 15:43:17 -0000\r\nX-Received: (qmail 99186 invoked by uid 60001); 24 Nov 2009 15:42:56 -0000\r\nMessage-ID: &lt;352630.98546.qm@...&gt;\r\nX-YMail-OSG: VajmwowVM1lErhIudyDg03QiIUzfLnLq5tjv00.Jvupe6csP.pta40ZS\r\nX-Received: from [204.194.77.3] by web43136.mail.sp1.yahoo.com via HTTP; Tue, 24 Nov 2009 07:42:55 PST\r\nX-Mailer: YahooMailClassic/8.1.6 YahooMailWebService/0.8.100.260964\r\nDate: Tue, 24 Nov 2009 07:42:55 -0800 (PST)\r\nTo: archive-crawler@yahoogroups.com\r\nIn-Reply-To: &lt;463735.95872.qm@...&gt;\r\nMIME-Version: 1.0\r\nContent-Type: multipart/alternative; boundary=&quot;0-1304137568-1259077375=:98546&quot;\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Pranay Pandey &lt;sspranay@...&gt;\r\nSubject: Re: [archive-crawler] Re: (subject edited) Recrawling In Heritrix3.0.0-RC1\r\nX-Yahoo-Group-Post: member; u=212342429; y=1d1jGfXLJqtHTpNlFiCUtf7p2RNnC8lRKTa6TRPVuIQYdp4\r\nX-Yahoo-Profile: sspranay\r\n\r\n\r\n--0-1304137568-1259077375=:98546\r\nContent-Type: text/plain; charset=utf-8\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n\n\nsorry about the broken link sent before.\nhttp://cs.odu.edu/~pramo_p/crawl=\r\ner-beans.cxml\n\n--- On Tue, 11/24/09, Pranay Pandey &lt;sspranay@...&gt; wro=\r\nte:\n\nFrom: Pranay Pandey &lt;sspranay@...&gt;\nSubject: [archive-crawler] Re=\r\n: (subject edited) Recrawling In Heritrix3.0.0-RC1\nTo: archive-crawler@yaho=\r\nogroups.com\nDate: Tuesday, November 24, 2009, 10:36 AM\n\n\n\n\n\n\n\n=C2=A0\n\n\n\n  \n=\r\n\n\n    \n      \n      \n      \n\nHello Matt and Gordon,\n\nFollowing Gordon&#39;s adv=\r\nice and assuming HER-1706 to be fixed, I am using only two of the persistPr=\r\nocessors: load and store.\nAs suggested, I am using the same BdbModule/&#39;hist=\r\nory&#39; dir for both the processors. \nHowever I don&#39;t see any deduplication ha=\r\nppening. Neither I am getting any exception or error to look into. I am usi=\r\nng heritrix-3.0. 0-RC1\nThis is my config file. Have I missed something?\nhtt=\r\np://cs.odu. edu/~pramo_ p/crawler- beans.cxml\n\nwud appreciate any help on t=\r\nhis.\n\nThanks,\nPranay\n\n--- On Fri, 11/13/09, Matthew Warhaftig &lt;mwarhaftig@g=\r\nmail. com&gt; wrote:\n\nFrom: Matthew Warhaftig &lt;mwarhaftig@gmail. com&gt;\nSubject:=\r\n Re: [archive-crawler] Recrawling In Heritrix3\nTo:\n archive-crawler@ yahoog=\r\nroups. com\nDate: Friday, November 13, 2009, 9:04 PM\n\n\n\n\n\n\n\n=C2=A0\n\n\n\n    \n =\r\n     \n      \n      Good advice, thank you Gordon. =C2=A0Adding the recrawl =\r\nprocessors to the chain bean and pointing PersistLoadProcesso r directly to=\r\n my existing history (no preload) got the recrawl working.\nThanks,Matt\n\n\nOn=\r\n Nov 10, 2009, at 5:33 PM, Gordon Mohr wrote:\n\n\n\n\n\n=C2=A0\n\n\n\n    Your setup=\r\n looks generally correct. Are you perhaps forgetting to both \n\ndeclare the =\r\nbeans by name, *and* insert them by &lt;ref&gt; into the &lt;list&gt; of \n\nthe chain be=\r\nan?\n\n\n\nSome other comments that may help in configuring these features in H=\r\n3:\n\n\n\nMatthew Warhaftig wrote:\n\n&gt; In H3 I am trying to setup crawl jobs tha=\r\nt \n\n&gt; use FetchHistoryProcess or/PersistStoreP rocessor/ PersistLoadProce s=\r\nsor to \n\n&gt; discard duplicate content.  I can get H1 to recrawl correctly bu=\r\nt the \n\n&gt; same technique is not storing a history and finding duplicates fo=\r\nr me in \n\n&gt; H3 (my job setup is based on these \n\n&gt; postings: https://webarc=\r\nhive. jira.com/ wiki/display/ Heritrix/ Feature+Notes+ -+1.12.0 & http://te=\r\nch. groups.yahoo. com/group/ archive-crawler/ message/5920).\n\n&gt; \n\n&gt; For the=\r\n storing job I added the following to the default \n\n&gt; H3 crawler-beans. cxm=\r\nl file.  In the Fetch Chain just after \n\n&gt; the &quot;fetchHttp&quot; bean:\n\n&gt;&gt; &lt;bean =\r\nid=3D&quot;fetchHistoryPro cessor&quot; \n\n&gt;&gt; class=3D&quot;org.archive. modules.recrawl. F=\r\netchHistoryProc essor&quot; &gt; &lt;property \n\n&gt;&gt; name=3D&quot;historyLength &quot; value=3D&quot;30=\r\n&quot; /&gt; &lt;/bean&gt;\n\n&gt;&gt;\n\n&gt;&gt; &lt;bean id=3D&quot;persistStorePro cessor&quot; \n\n&gt;&gt; class=3D&quot;org.=\r\narchive. modules.recrawl. PersistStoreProc essor&quot; &gt; &lt;/bean&gt;\n\n\n\nUnrelated to=\r\n your issues, in the near future it will be better to put \n\nthe persistStor=\r\neProcess or as the first in the &#39;dispositionChain&#39; rather \n\nthan the last p=\r\nosition of the &#39;fetchChain&#39; . Essentially, the \n\ndispositionChain&#39; s activi=\r\nties will be atomic with regard to \n\ncheckpointing -- any URI that starts t=\r\nhe dispositionChain will finish it \n\nbefore a checkpoint is stored -- but t=\r\nhe fetchChain&#39;s activities will not.\n\n\n\nAlso unrelated but good to know: H3=\r\n&#39;s configuration makes it much easier \n\nfor different components to optiona=\r\nlly use separate BDB environments on \n\ndisk. Two reasons one might want to =\r\ndo so: (1) distribute the IO costs \n\nover different disks; (2) keep distinc=\r\nt data separate on disk for \n\nbackup/migration- to-new-jobs, as with the di=\r\nfference between \n\nqueues/stateof the running crawl, and URI history for de=\r\nduplication \n\npurposes.\n\n\n\nFor example, you could declare...\n\n\n\n&lt;bean id=3D=\r\n&quot;persistStoreBdb &quot; class=3D&quot;org.archive. bdb.BdbModule&quot; \n\nautowire-candidat=\r\ne=3D &quot;false&quot;&gt;\n\n   &lt;property name=3D&quot;dir&quot; value=3D&quot;history&quot; /&gt;\n\n&lt;/bean&gt;\n\n\n\n&lt;=\r\nbean id=3D&quot;persistStorePro cessor&quot; \n\nclass=3D&quot;org.archive. modules.recrawl.=\r\n PersistStoreProc essor&quot;&gt;\n\n   &lt;property name=3D&quot;bdbModule&quot; &gt;\n\n     &lt;ref bea=\r\nn=3D&quot;persistStoreB db&quot;/&gt;\n\n   &lt;/property&gt;\n\n  &lt;/bean&gt;\n\n\n\n...and then persiste=\r\nnt URI history will collect in a &#39;history&#39; directory \n\n(which could be a fu=\r\nll path to anywhere convenient) rather than being \n\nmixed-in with other cra=\r\nwler state.\n\n\n\n(The reason for the &#39;autowire-candidate =3D&quot;false&quot;&#39; is to pr=\r\nevent this \n\nBdbModule from being a competitor to the default for all the o=\r\nbjects \n\nthat expect one distinguished instance to be available for autowir=\r\ning.)\n\n\n\n&gt; Then for another job to use this stored history I added the foll=\r\nowing to \n\n&gt; the default H3 crawler-bean. cxml file. In the Fetch Chain jus=\r\nt after the \n\n&gt; &quot;preconditions&quot; bean:\n\n&gt;&gt; &lt;bean id=3D&quot;persistLoadProc essor=\r\n&quot; \n\n&gt;&gt; class=3D&quot;org.archive. modules.recrawl. PersistLoadProce ssor&quot;&gt; &lt;prop=\r\nerty \n\n&gt;&gt; name=3D&quot;preloadSource &quot; \n\n&gt;&gt; value=3D&quot;/Users/ mattwarhaftig/ Docu=\r\nments/ heritrix- 3.0.0-SNAPSHOT/ jobs/basic/ state&quot; \n\n&gt;&gt; /&gt; &lt;/bean&gt;\n\n&gt; And =\r\njust after the &quot;fetchHttp&quot; bean:\n\n&gt;&gt; &lt;bean id=3D&quot;fetchHistoryPro cessor&quot; \n\n=\r\n&gt;&gt; class=3D&quot;org.archive. modules.recrawl. FetchHistoryProc essor&quot; &gt; &lt;proper=\r\nty \n\n&gt;&gt; name=3D&quot;historyLength &quot; value=3D&quot;30&quot; /&gt; &lt;/bean&gt;\n\n\n\nNote that &#39;prelo=\r\nadSource&#39; causes the processor to scan the named log or \n\ndirectory, and co=\r\npy all its contents into its current history database. \n\nIf using this, mak=\r\ne sure you&#39;re not pointing to the same path it&#39;s \n\ncurrently\n\n\n\nYou could a=\r\nlso skip the &#39;preload&#39; and directly point the \n\nPersistLoadProcesso r to an=\r\n existing history store:\n\n\n\n&lt;bean id=3D&quot;persistLoadBdb&quot; class=3D&quot;org.archiv=\r\ne. bdb.BdbModule&quot; \n\nautowire-candidate=3D &quot;false&quot;&gt;\n\n   &lt;property name=3D&quot;di=\r\nr&quot; \n\nvalue=3D&quot;/Users/ mattwarhaftig/ Documents/ heritrix- 3.0.0-SNAPSHOT/ j=\r\nobs/basic/ state&quot;/&gt;\n\n&lt;/bean&gt;\n\n\n\n&lt;bean id=3D&quot;persistLoadProc essor&quot;\n\n  class=\r\n=3D&quot;org.archive. modules.recrawl. PersistLoadProce ssor&quot;&gt;\n\n  &lt;property name=\r\n=3D&quot;bdbModule&quot; &gt;\n\n     &lt;ref bean=3D&quot;persistLoadBd b&quot;/&gt;\n\n   &lt;/property&gt;\n\n&lt;/b=\r\nean&gt;\n\n\n\n(Except for the &#39;preload&#39;, if specified, the PersistLoadProcesso r =\r\nonly \n\nreads from its given BdbModule/environme nt, so you could reuse a pr=\r\nior \n\ncrawl&#39;s persist-store target without damaging it.)\n\n\n\nThere&#39;s current=\r\nly a problem with having both a PersistLoadProcesso r and \n\nPersistStorePro=\r\ncess or in the same crawl using the same \n\nBdbModule/directory [HER-1706], =\r\nbut that should work by the time of the \n\nH3 official release.\n\n\n\nHope this=\r\n helps,\n\n\n\n- Gordon @ IA\n\n\n\n&gt; Am I declaring these beans correctly?\n\n&gt; \n\n&gt; =\r\nThanks,\n\n&gt; Matt\n\n&gt; \n\n&gt; \n\n&gt; \n\n\n\n    \n     \n\n    \n\n\n\n\n\n\n\n\n\n\n    \n     \n\n\n\n \n\n=\r\n\n\n\n\n      \n\n    \n     \n\n    \n    \n\n\n \n\n\n\n  \n\n\n\n\n\n\n      \r\n--0-1304137568-1259077375=:98546\r\nContent-Type: text/html; charset=utf-8\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;table cellspacing=3D&quot;0&quot; cellpadding=3D&quot;0&quot; border=3D&quot;0&quot; &gt;&lt;tr&gt;&lt;td valign=3D&quot;=\r\ntop&quot; style=3D&quot;font: inherit;&quot;&gt;&lt;br&gt;&lt;br&gt;sorry about the broken link sent befo=\r\nre.&lt;br&gt;&lt;a target=3D&quot;_blank&quot; href=3D&quot;http://cs.odu.edu/%7Epramo_p/crawler-be=\r\nans.cxml&quot;&gt;&lt;span class=3D&quot;yshortcuts&quot; id=3D&quot;lw_1259077322_0&quot;&gt;http://cs.odu.e=\r\ndu/~pramo_p/crawler-beans.cxml&lt;/span&gt;&lt;/a&gt;&lt;br&gt;&lt;br&gt;--- On &lt;b&gt;Tue, 11/24/09, P=\r\nranay Pandey &lt;i&gt;&lt;sspranay@...&gt;&lt;/i&gt;&lt;/b&gt; wrote:&lt;br&gt;&lt;blockquote st=\r\nyle=3D&quot;border-left: 2px solid rgb(16, 16, 255); margin-left: 5px; padding-l=\r\neft: 5px;&quot;&gt;&lt;br&gt;From: Pranay Pandey &lt;sspranay@...&gt;&lt;br&gt;Subject: [=\r\narchive-crawler] Re: (subject edited) Recrawling In Heritrix3.0.0-RC1&lt;br&gt;To=\r\n: archive-crawler@yahoogroups.com&lt;br&gt;Date: Tuesday, November 24, 2009, 10:3=\r\n6 AM&lt;br&gt;&lt;br&gt;&lt;div id=3D&quot;yiv789680562&quot;&gt;\n\n\n\n\n\n&lt;span style=3D&quot;display: none;&quot;&gt;&=\r\nnbsp;&lt;/span&gt;\n\n\n\n    &lt;div id=3D&quot;ygrp-text&quot;&gt;\n      \n      \n      &lt;p&gt;&lt;table bo=\r\nrder=3D&quot;0&quot; cellpadding=3D&quot;0&quot; cellspacing=3D&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td style=3D&quot;font=\r\n-family: inherit; font-style: inherit; font-variant: inherit; font-weight: =\r\ninherit; font-size: inherit; line-height: inherit; font-size-adjust: inheri=\r\nt; font-stretch: inherit; -x-system-font: none;&quot; valign=3D&quot;top&quot;&gt;&lt;br&gt;&lt;br&gt;Hel=\r\nlo Matt and Gordon,&lt;br&gt;&lt;br&gt;Following Gordon&#39;s advice and assuming HER-1706 =\r\nto be fixed, I am using only two of the persistProcessors: load and store.&lt;=\r\nbr&gt;As suggested, I am using the same BdbModule/&#39;history&#39; dir for both the p=\r\nrocessors. &lt;br&gt;However I don&#39;t see any deduplication happening. Neither I a=\r\nm getting any exception or error to look into. I am using heritrix-3.0. 0-R=\r\nC1&lt;br&gt;This is my config file. Have I missed something?&lt;br&gt;http://cs.odu. ed=\r\nu/~pramo_ p/crawler- beans.cxml&lt;br&gt;&lt;br&gt;wud appreciate any help on this.&lt;br&gt;=\r\n&lt;br&gt;Thanks,&lt;br&gt;Pranay&lt;br&gt;&lt;br&gt;--- On &lt;b&gt;Fri, 11/13/09, Matthew Warhaftig &lt;i&gt;=\r\n&lt;mwarhaftig@gmail. com&gt;&lt;/i&gt;&lt;/b&gt; wrote:&lt;br&gt;&lt;blockquote\n style=3D&quot;borde=\r\nr-left: 2px solid rgb(16, 16, 255);&quot;&gt;&lt;br&gt;From: Matthew Warhaftig &lt;mwarha=\r\nftig@gmail. com&gt;&lt;br&gt;Subject: Re: [archive-crawler] Recrawling In Heritri=\r\nx3&lt;br&gt;To:\n archive-crawler@ yahoogroups. com&lt;br&gt;Date: Friday, November 13, =\r\n2009, 9:04 PM&lt;br&gt;&lt;br&gt;&lt;div id=3D&quot;yiv1763872681&quot;&gt;\n\n\n\n\n\n&lt;span&gt;&nbsp;&lt;/span&gt;\n\n\n=\r\n\n    &lt;div id=3D&quot;ygrp-text&quot;&gt;\n      \n      \n      &lt;p&gt;&lt;font class=3D&quot;Apple-sty=\r\nle-span&quot; size=3D&quot;3&quot;&gt;&lt;span class=3D&quot;Apple-style-span&quot; style=3D&quot;font-size: 12=\r\npx;&quot;&gt;Good advice, thank you Gordon. &nbsp;Adding the recrawl processors to =\r\nthe chain bean and pointing PersistLoadProcesso r &lt;/span&gt;&lt;/font&gt;&lt;span class=\r\n=3D&quot;Apple-style-span&quot;&gt;&lt;font class=3D&quot;Apple-style-span&quot; size=3D&quot;3&quot;&gt;&lt;span cla=\r\nss=3D&quot;Apple-style-span&quot; style=3D&quot;font-size: 12px;&quot;&gt;directly to my existing =\r\nhistory (no preload) got the recrawl working.&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;div&gt;=\r\n&lt;span class=3D&quot;Apple-style-span&quot;&gt;&lt;font class=3D&quot;Apple-style-span&quot; size=3D&quot;3=\r\n&quot;&gt;&lt;span class=3D&quot;Apple-style-span&quot; style=3D&quot;font-size: 12px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/=\r\nfont&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span class=3D&quot;Apple-style-span&quot;&gt;&lt;font class=3D&quot;Appl=\r\ne-style-span&quot; size=3D&quot;3&quot;&gt;&lt;span class=3D&quot;Apple-style-span&quot; style=3D&quot;font-siz=\r\ne: 12px;&quot;&gt;Thanks,&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span class=3D&quot;Apple-style=\r\n-span&quot;&gt;&lt;font class=3D&quot;Apple-style-span&quot; size=3D&quot;2&quot;&gt;&lt;span class=3D&quot;Apple-sty=\r\nle-span&quot; style=3D&quot;font-size: 10px;&quot;&gt;&lt;font class=3D&quot;Apple-style-span&quot; size=\r\n=3D&quot;3&quot;&gt;&lt;span\n class=3D&quot;Apple-style-span&quot; style=3D&quot;font-size: 12px;&quot;&gt;Matt&lt;/s=\r\npan&gt;&lt;/font&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;=\r\n&lt;div&gt;&lt;div&gt;On Nov 10, 2009, at 5:33 PM, Gordon Mohr wrote:&lt;/div&gt;&lt;br class=3D=\r\n&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote type=3D&quot;cite&quot;&gt;\n\n\n\n&lt;div style=3D&quot;bac=\r\nkground-color: rgb(255, 255, 255);&quot;&gt;\n&lt;span&gt;&nbsp;&lt;/span&gt;\n\n\n\n    &lt;div id=3D&quot;=\r\nygrp-text&quot;&gt;&lt;p&gt;Your setup looks generally correct. Are you perhaps forgettin=\r\ng to both &lt;br&gt;\ndeclare the beans by name, *and* insert them by &lt;ref&gt; =\r\ninto the &lt;list&gt; of &lt;br&gt;\nthe chain bean?&lt;br&gt;\n&lt;br&gt;\nSome other comments =\r\nthat may help in configuring these features in H3:&lt;br&gt;\n&lt;br&gt;\nMatthew Warhaft=\r\nig wrote:&lt;br&gt;\n&gt; In H3 I am trying to setup crawl jobs that &lt;br&gt;\n&gt; use=\r\n FetchHistoryProcess or/PersistStoreP rocessor/ PersistLoadProce ssor to &lt;b=\r\nr&gt;\n&gt; discard duplicate content.  I can get H1 to recrawl correctly but t=\r\nhe &lt;br&gt;\n&gt; same technique is not storing a history and finding duplicates=\r\n for me in &lt;br&gt;\n&gt; H3 (my job setup is based on these &lt;br&gt;\n&gt; postings:=\r\n &lt;a rel=3D&quot;nofollow&quot; target=3D&quot;_blank&quot; href=3D&quot;https://webarchive.jira.com/=\r\nwiki/display/Heritrix/Feature+Notes+-+1.12.0&quot;&gt;https://webarchive. jira.com/=\r\n wiki/display/ Heritrix/ Feature+Notes+ -+1.12.0&lt;/a&gt; &amp; &lt;a rel=3D&quot;nofoll=\r\now&quot; target=3D&quot;_blank&quot; href=3D&quot;http://tech.groups.yahoo.com/group/archive-cr=\r\nawler/message/5920&quot;&gt;http://tech. groups.yahoo. com/group/ archive-crawler/ =\r\nmessage/5920&lt;/a&gt;).&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; For the storing job I added the follo=\r\nwing to the default &lt;br&gt;\n&gt; H3 crawler-beans. cxml file.  In the Fetch Ch=\r\nain just after &lt;br&gt;\n&gt; the &quot;fetchHttp&quot; bean:&lt;br&gt;\n&gt;&gt; &lt;bean id=3D&quot;=\r\nfetchHistoryPro cessor&quot; &lt;br&gt;\n&gt;&gt; class=3D&quot;org.archive. modules.recrawl=\r\n. FetchHistoryProc essor&quot; &gt; &lt;property &lt;br&gt;\n&gt;&gt; name=3D&quot;historyLe=\r\nngth &quot; value=3D&quot;30&quot; /&gt; &lt;/bean&gt;&lt;br&gt;\n&gt;&gt;&lt;br&gt;\n&gt;&gt; &lt;bean =\r\nid=3D&quot;persistStorePro cessor&quot; &lt;br&gt;\n&gt;&gt; class=3D&quot;org.archive. modules.r=\r\necrawl. PersistStoreProc essor&quot; &gt; &lt;/bean&gt;&lt;br&gt;\n&lt;br&gt;\nUnrelated to yo=\r\nur issues, in the near future it will be better to put &lt;br&gt;\nthe persistStor=\r\neProcess or as the first in the &#39;dispositionChain&#39; rather &lt;br&gt;\nthan the las=\r\nt position of the &#39;fetchChain&#39; . Essentially, the &lt;br&gt;\ndispositionChain&#39; s =\r\nactivities will be atomic with regard to &lt;br&gt;\ncheckpointing -- any URI that=\r\n starts the dispositionChain will finish it &lt;br&gt;\nbefore a checkpoint is sto=\r\nred -- but the fetchChain&#39;s activities will not.&lt;br&gt;\n&lt;br&gt;\nAlso unrelated bu=\r\nt good to know: H3&#39;s configuration makes it much easier &lt;br&gt;\nfor different =\r\ncomponents to optionally use separate BDB environments on &lt;br&gt;\ndisk. Two re=\r\nasons one might want to do so: (1) distribute the IO costs &lt;br&gt;\nover differ=\r\nent disks; (2) keep distinct data separate on disk for &lt;br&gt;\nbackup/migratio=\r\nn- to-new-jobs, as with the difference between &lt;br&gt;\nqueues/stateof the runn=\r\ning crawl, and URI history for deduplication &lt;br&gt;\npurposes.&lt;br&gt;\n&lt;br&gt;\nFor ex=\r\nample, you could declare...&lt;br&gt;\n&lt;br&gt;\n&lt;bean id=3D&quot;persistStoreBdb &quot; class=\r\n=3D&quot;org.archive. bdb.BdbModule&quot; &lt;br&gt;\nautowire-candidate=3D &quot;false&quot;&gt;&lt;br&gt;\n=\r\n   &lt;property name=3D&quot;dir&quot; value=3D&quot;history&quot; /&gt;&lt;br&gt;\n&lt;/bean&gt;&lt;br&gt;\n=\r\n&lt;br&gt;\n&lt;bean id=3D&quot;persistStorePro cessor&quot; &lt;br&gt;\nclass=3D&quot;org.archive. modu=\r\nles.recrawl. PersistStoreProc essor&quot;&gt;&lt;br&gt;\n   &lt;property name=3D&quot;bdbMod=\r\nule&quot; &gt;&lt;br&gt;\n     &lt;ref bean=3D&quot;persistStoreB db&quot;/&gt;&lt;br&gt;\n   &lt;/prope=\r\nrty&gt;&lt;br&gt;\n  &lt;/bean&gt;&lt;br&gt;\n&lt;br&gt;\n...and then persistent URI history wil=\r\nl collect in a &#39;history&#39; directory &lt;br&gt;\n(which could be a full path to anyw=\r\nhere convenient) rather than being &lt;br&gt;\nmixed-in with other crawler state.&lt;=\r\nbr&gt;\n&lt;br&gt;\n(The reason for the &#39;autowire-candidate =3D&quot;false&quot;&#39; is to prevent =\r\nthis &lt;br&gt;\nBdbModule from being a competitor to the default for all the obje=\r\ncts &lt;br&gt;\nthat expect one distinguished instance to be available for autowir=\r\ning.)&lt;br&gt;\n&lt;br&gt;\n&gt; Then for another job to use this stored history I added=\r\n the following to &lt;br&gt;\n&gt; the default H3 crawler-bean. cxml file. In the =\r\nFetch Chain just after the &lt;br&gt;\n&gt; &quot;preconditions&quot; bean:&lt;br&gt;\n&gt;&gt; &lt=\r\n;bean id=3D&quot;persistLoadProc essor&quot; &lt;br&gt;\n&gt;&gt; class=3D&quot;org.archive. modu=\r\nles.recrawl. PersistLoadProce ssor&quot;&gt; &lt;property &lt;br&gt;\n&gt;&gt; name=3D&quot;=\r\npreloadSource &quot; &lt;br&gt;\n&gt;&gt; value=3D&quot;/Users/ mattwarhaftig/ Documents/ he=\r\nritrix- 3.0.0-SNAPSHOT/ jobs/basic/ state&quot; &lt;br&gt;\n&gt;&gt; /&gt; &lt;/bean&gt=\r\n;&lt;br&gt;\n&gt; And just after the &quot;fetchHttp&quot; bean:&lt;br&gt;\n&gt;&gt; &lt;bean id=3D=\r\n&quot;fetchHistoryPro cessor&quot; &lt;br&gt;\n&gt;&gt; class=3D&quot;org.archive. modules.recraw=\r\nl. FetchHistoryProc essor&quot; &gt; &lt;property &lt;br&gt;\n&gt;&gt; name=3D&quot;historyL=\r\nength &quot; value=3D&quot;30&quot; /&gt; &lt;/bean&gt;&lt;br&gt;\n&lt;br&gt;\nNote that &#39;preloadSource&#39;=\r\n causes the processor to scan the named log or &lt;br&gt;\ndirectory, and copy all=\r\n its contents into its current history database. &lt;br&gt;\nIf using this, make s=\r\nure you&#39;re not pointing to the same path it&#39;s &lt;br&gt;\ncurrently&lt;br&gt;\n&lt;br&gt;\nYou c=\r\nould also skip the &#39;preload&#39; and directly point the &lt;br&gt;\nPersistLoadProcess=\r\no r to an existing history store:&lt;br&gt;\n&lt;br&gt;\n&lt;bean id=3D&quot;persistLoadBdb&quot; c=\r\nlass=3D&quot;org.archive. bdb.BdbModule&quot; &lt;br&gt;\nautowire-candidate=3D &quot;false&quot;&gt;&lt;=\r\nbr&gt;\n   &lt;property name=3D&quot;dir&quot; &lt;br&gt;\nvalue=3D&quot;/Users/ mattwarhaftig/ Docum=\r\nents/ heritrix- 3.0.0-SNAPSHOT/ jobs/basic/ state&quot;/&gt;&lt;br&gt;\n&lt;/bean&gt;&lt;b=\r\nr&gt;\n&lt;br&gt;\n&lt;bean id=3D&quot;persistLoadProc essor&quot;&lt;br&gt;\n  class=3D&quot;org.archive. m=\r\nodules.recrawl. PersistLoadProce ssor&quot;&gt;&lt;br&gt;\n  &lt;property name=3D&quot;bdbMo=\r\ndule&quot; &gt;&lt;br&gt;\n     &lt;ref bean=3D&quot;persistLoadBd b&quot;/&gt;&lt;br&gt;\n   &lt;/prope=\r\nrty&gt;&lt;br&gt;\n&lt;/bean&gt;&lt;br&gt;\n&lt;br&gt;\n(Except for the &#39;preload&#39;, if specified,=\r\n the PersistLoadProcesso r only &lt;br&gt;\nreads from its given BdbModule/environ=\r\nme nt, so you could reuse a prior &lt;br&gt;\ncrawl&#39;s persist-store target without=\r\n damaging it.)&lt;br&gt;\n&lt;br&gt;\nThere&#39;s currently a problem with having both a Pers=\r\nistLoadProcesso r and &lt;br&gt;\nPersistStoreProcess or in the same crawl using t=\r\nhe same &lt;br&gt;\nBdbModule/directory [HER-1706], but that should work by the ti=\r\nme of the &lt;br&gt;\nH3 official release.&lt;br&gt;\n&lt;br&gt;\nHope this helps,&lt;br&gt;\n&lt;br&gt;\n- Go=\r\nrdon @ IA&lt;br&gt;\n&lt;br&gt;\n&gt; Am I declaring these beans correctly?&lt;br&gt;\n&gt; &lt;br&gt;=\r\n\n&gt; Thanks,&lt;br&gt;\n&gt; Matt&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;br&gt;\n&lt;/p&gt;\n\n    &lt;/d=\r\niv&gt;\n     \n\n    \n\n&lt;/div&gt;\n\n\n\n\n\n&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div=\r\n&gt;&lt;/div&gt;\n\n    &lt;/div&gt;\n     \n\n\n\n \n\n\n&lt;/div&gt;&lt;/blockquote&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/tab=\r\nle&gt;&lt;br&gt;\n\n      &lt;/p&gt;\n\n    &lt;/div&gt;\n     \n\n\n\n \n\n\n&lt;/div&gt;&lt;/blockquote&gt;&lt;/td&gt;&lt;/tr&gt;&lt;=\r\n/table&gt;&lt;br&gt;\n\n      \r\n--0-1304137568-1259077375=:98546--\r\n\n"}}