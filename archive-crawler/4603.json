{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":202034705,"authorName":"Michael Stack","from":"Michael Stack &lt;stack@...&gt;","profile":"stackarchiveorg","replyTo":"LIST","senderId":"T7cu9rz1xFFAKC8Rs3tIA8yZ8joNwaAWtQKZG9i5VOTpEHGaHIKu65FG33e3V3CcD6GM0W3289-Y1e1QuvYlsE0orWD4ufQ","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] Crawl pausing itself","postDate":"1192550822","msgId":4603,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ3MTRFMUE2LjMwMTAxMDJAZHVib2NlLm5ldD4=","inReplyToHeader":"PDQ3MTQ2RjhCLjQwNjAzMDJAYXJjaGl2ZS5vcmc+","referencesHeader":"PDQ3MTNENjAyLjEwMTAxMDdAcGVyc2FpLmNvbT4gPDQ3MTNENzUxLjkwOTA5MDlAZHVib2NlLm5ldD4gPDQ3MTNFMkY4LjEwNTAwMDJAcGVyc2FpLmNvbT4gPDQ3MTNFN0E2LjMwNzA3MDdAZHVib2NlLm5ldD4gPDQ3MTNFQjQ0LjMwMDAyMDFAcGVyc2FpLmNvbT4gPDQ3MTQ2RjhCLjQwNjAzMDJAYXJjaGl2ZS5vcmc+"},"prevInTopic":4601,"nextInTopic":4604,"prevInTime":4602,"nextInTime":4604,"topicId":4596,"numMessagesInTopic":8,"msgSnippet":"Paul Pedersen who has been crawling up on EC2 with some success says he uses defaults and a heap of 256M. St.Ack","rawEmail":"Return-Path: &lt;stack@...&gt;\r\nX-Sender: stack@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 93661 invoked from network); 16 Oct 2007 16:08:16 -0000\r\nReceived: from unknown (66.218.67.97)\n  by m44.grp.scd.yahoo.com with QMQP; 16 Oct 2007 16:08:16 -0000\r\nReceived: from unknown (HELO dns.duboce.net) (63.203.238.117)\n  by mta18.grp.scd.yahoo.com with SMTP; 16 Oct 2007 16:08:16 -0000\r\nReceived: by dns.duboce.net (Postfix, from userid 1008)\n\tid E5318C3F2; Tue, 16 Oct 2007 09:06:02 -0700 (PDT)\r\nX-Spam-Checker-Version: SpamAssassin 3.1.4 (2006-07-26) on dns.duboce.net\r\nX-Spam-Level: \r\nX-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham \n\tversion=3.1.4\r\nReceived: from durruti.desk.hq.powerset.com (durruti.desk.hq.powerset.com [208.76.47.67])\n\tby dns.duboce.net (Postfix) with ESMTP id D6E49C1CE\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Tue, 16 Oct 2007 09:05:58 -0700 (PDT)\r\nMessage-ID: &lt;4714E1A6.3010102@...&gt;\r\nDate: Tue, 16 Oct 2007 09:07:02 -0700\r\nUser-Agent: Thunderbird 2.0.0.6 (Macintosh/20070728)\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;4713D602.1010107@...&gt; &lt;4713D751.9090909@...&gt; &lt;4713E2F8.1050002@...&gt; &lt;4713E7A6.3070707@...&gt; &lt;4713EB44.3000201@...&gt; &lt;47146F8B.4060302@...&gt;\r\nIn-Reply-To: &lt;47146F8B.4060302@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Michael Stack &lt;stack@...&gt;\r\nSubject: Re: [archive-crawler] Crawl pausing itself\r\nX-Yahoo-Group-Post: member; u=202034705; y=lk7s50nNHodY1UxsFVgOKuMuaLCb8vVGNyRt5xywJIL8-kpyPuJpM8yD\r\nX-Yahoo-Profile: stackarchiveorg\r\n\r\nPaul Pedersen who has been crawling up on EC2 with some success says he \nuses defaults and a heap of 256M.\nSt.Ack\n\n\n\n\nIgor Ranitovic wrote:\n&gt;\n&gt; Hi Ted,\n&gt;\n&gt; I would just like to add that by default bdb cache can take up to 60% of\n&gt; assigned heep size. So, changing bdb-cache-percent from default 0 to\n&gt; something like 20-35 can help with the OOMs.\n&gt;\n&gt; Take care,\n&gt; i.\n&gt;\n&gt; &gt; Interesting. It seems that we were using the JVM&#39;s default maximum heap\n&gt; &gt; size, which is the lesser of 1/4 the system memory and 1GB, so in EC2,\n&gt; &gt; about 450MB. We&#39;re going to bring the max ToeThread count from 50 down\n&gt; &gt; to 30 and give it some more memory, and see what happens.\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; -Ted\n&gt; &gt;\n&gt; &gt; Michael Stack wrote:\n&gt; &gt;&gt; If a &#39;serious errors&#39; such as an OOME, it&#39;ll trigger a pause (See\n&gt; &gt;&gt; \n&gt; http://crawler.archive.org/xref/org/archive/crawler/framework/ToeThread.html#211 \n&gt; &lt;http://crawler.archive.org/xref/org/archive/crawler/framework/ToeThread.html#211&gt; \n&gt;\n&gt; &gt;&gt; \n&gt; &lt;http://crawler.archive.org/xref/org/archive/crawler/framework/ToeThread.html#211 \n&gt; &lt;http://crawler.archive.org/xref/org/archive/crawler/framework/ToeThread.html#211&gt;&gt; \n&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt; and line 173).\n&gt; &gt;&gt;\n&gt; &gt;&gt; Does the OOME, as far as you can detemine, have an obvious cause (rare\n&gt; &gt;&gt; but sometimes the case)? You have a maximum of 1.75G up on EC2, IIRC.\n&gt; &gt;&gt; Have you set your heap a good bit less than this? You might also try\n&gt; &gt;&gt; running with less toe threads.\n&gt; &gt;&gt;\n&gt; &gt;&gt; St.Ack\n&gt; &gt;&gt;\n&gt; &gt;&gt; Ted Dziuba wrote:\n&gt; &gt;&gt;&gt; Ah, yes, I am seeing OOMEs in ToeThread&#39;s run method. If all ToeTheads\n&gt; &gt;&gt;&gt; throw exceptions, does the crawl pause?\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; Ted\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; Michael Stack wrote:\n&gt; &gt;&gt;&gt;&gt; Anything on the consoles about OOMEs? Are the disks full?\n&gt; &gt;&gt;&gt;&gt; St.Ack\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt; Ted Dziuba wrote:\n&gt; &gt;&gt;&gt;&gt;&gt; We have a few Heritrix instances set up in Amazon EC2 crawling a\n&gt; &gt;&gt;&gt; fairly\n&gt; &gt;&gt;&gt;&gt;&gt; small amount of data. We are seeing the crawl pause itself as it\n&gt; &gt;&gt; goes,\n&gt; &gt;&gt;&gt;&gt;&gt; with no indication as to why in the crawl log. What could cause\n&gt; &gt;&gt; this?\n&gt; &gt;&gt;&gt;&gt;&gt; Thanks for any pointers.\n&gt; &gt;&gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt;&gt; Ted\n&gt; &gt;&gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; Yahoo! Groups Links\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt;\n&gt;  \n\n\n"}}