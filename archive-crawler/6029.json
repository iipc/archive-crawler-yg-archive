{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"diOU93gKqjh1leftQSFKFlrlPNyMBAuzKh7xofDJa54EtzmcdBDTlSfNLQi63PWCwl1f1uYhrVkEeKz-e7uVCadni5y8bvo","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] ServerCache lookup stuck","postDate":"1252919451","msgId":6029,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDRBQUUwODlCLjUwMzA4MDRAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PDYxNzA2Ljk4LjIzNC44Ni4xNjcuMTI1Mjg2ODU1Ni5zcXVpcnJlbEBtYWlsLmFyY2hpdmUub3JnPg==","referencesHeader":"PGg4aXBmcytsaHBwQGVHcm91cHMuY29tPiA8NjE3MDYuOTguMjM0Ljg2LjE2Ny4xMjUyODY4NTU2LnNxdWlycmVsQG1haWwuYXJjaGl2ZS5vcmc+"},"prevInTopic":6028,"nextInTopic":6030,"prevInTime":6028,"nextInTime":6030,"topicId":6026,"numMessagesInTopic":15,"msgSnippet":"The CachedBdbMap somewhat recently (since last official release) underwent some major refactoring to improve concurrency. The test coverage is reasonable and","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 91951 invoked from network); 14 Sep 2009 09:11:13 -0000\r\nX-Received: from unknown (98.137.34.46)\n  by m8.grp.re1.yahoo.com with QMQP; 14 Sep 2009 09:11:13 -0000\r\nX-Received: from unknown (HELO hnrelay2.coxhn.net) (24.234.4.246)\n  by mta3.grp.sp2.yahoo.com with SMTP; 14 Sep 2009 09:11:13 -0000\r\nX-Received: from caesarslv1-auth.coxhn.net (24-234-116-34.ptp.lvcm.net [24.234.116.34])\n\tby hnrelay2.coxhn.net (Postfix) with ESMTP id CB8872F86F\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Mon, 14 Sep 2009 02:10:51 -0700 (PDT)\r\nX-Received: from [70.165.145.250] (helo=[70.165.145.250])\n\tby caesarslv1-auth.coxhn.net with esmtp (Exim 3.34 #1)\n\tid 1Mn7aF-0002ql-00\n\tfor archive-crawler@yahoogroups.com; Mon, 14 Sep 2009 02:10:51 -0700\r\nMessage-ID: &lt;4AAE089B.5030804@...&gt;\r\nDate: Mon, 14 Sep 2009 02:10:51 -0700\r\nUser-Agent: Thunderbird 2.0.0.23 (Windows/20090812)\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;h8ipfs+lhpp@...&gt; &lt;61706.98.234.86.167.1252868556.squirrel@...&gt;\r\nIn-Reply-To: &lt;61706.98.234.86.167.1252868556.squirrel@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] ServerCache lookup stuck\r\nX-Yahoo-Group-Post: member; u=137285340; y=MBvM_9T9jeKoCmEosrx8UZkTO4GqSQHvpFgAofdzO-4f\r\nX-Yahoo-Profile: gojomo\r\n\r\nThe CachedBdbMap somewhat recently (since last official release) \nunderwent some major refactoring to improve concurrency. The test \ncoverage is reasonable and the code has been through some volume tests \nwithout showing problems, but this might be a new bug triggered by that \ncode.\n\nIf you pause the crawl, I presume only that one thread remains active. \nIs that right?\n\nIs the CPU busy with only that thread active? I&#39;m still considering the \nother stacks you forwarded in a subsequent message; can you collect even \nmore samples to get a sense of which branches are always being taken in \nthe relevant methods?\n\nThe CachedBdbMap depends on some some garbage-collection-related \ntrickery that might not be reliable in all JVMs. Can you say what \nJVM/host OS you&#39;re using?\n\n- Gordon @ IA\n\nigor@... wrote:\n&gt; I got a stuck thread that is disrupting the crawl.\n&gt; \n&gt; Heritrix verion:\n&gt; 1.15.4 (checked out on 9/9/2009)\n&gt; \n&gt; Java env:\n&gt; Linux 2.6.18-128.1.10.el5PAE #1 SMP Thu May 7 11:14:31 EDT 2009 i686 i686\n&gt; i386 GNU/Linux\n&gt; java version &quot;1.6.0_10&quot;\n&gt; Java(TM) SE Runtime Environment (build 1.6.0_10-b33)\n&gt; Java HotSpot(TM) Server VM (build 11.0-b15, mixed mode)\n&gt; JAVA_OPTS=-Xmx512m\n&gt; \n&gt; Sleepycat:\n&gt; je-3.3.82.jar\n&gt; \n&gt; Here is the thread dump:\n&gt; ToeThread #19: http://newyork.craigslist.org/mnh/tix/1371733715.html\n&gt;  CrawlURI http://newyork.craigslist.org/mnh/tix/1371733715.html      1\n&gt; attempts\n&gt;     in processor: Preprocessor\n&gt;     ACTIVE for 16h25m22s108ms\n&gt;     step: ABOUT_TO_BEGIN_PROCESSOR for 16h25m22s108ms\n&gt;     org.archive.util.CachedBdbMap$SoftEntry.getPhantom(CachedBdbMap.java:1625)\n&gt;     org.archive.util.CachedBdbMap$SoftEntry.isCleared(CachedBdbMap.java:1632)\n&gt;     org.archive.util.CachedBdbMap$SoftEntry.startExpunge(CachedBdbMap.java:1693)\n&gt;     org.archive.util.CachedBdbMap.isExpunged(CachedBdbMap.java:490)\n&gt;     org.archive.util.CachedBdbMap._getMem(CachedBdbMap.java:698)\n&gt;     org.archive.util.CachedBdbMap.get(CachedBdbMap.java:627)\n&gt;     org.archive.crawler.datamodel.ServerCache.getServerFor(ServerCache.java:99)\n&gt;     org.archive.crawler.datamodel.ServerCache.getServerFor(ServerCache.java:124)\n&gt;     org.archive.crawler.prefetch.PreconditionEnforcer.considerDnsPreconditions(PreconditionEnforcer.java:227)\n&gt;     org.archive.crawler.prefetch.PreconditionEnforcer.innerProcess(PreconditionEnforcer.java:111)\n&gt;     org.archive.crawler.framework.Processor.process(Processor.java:112)\n&gt;     org.archive.crawler.framework.ToeThread.processCrawlUri(ToeThread.java:302)\n&gt;     org.archive.crawler.framework.ToeThread.run(ToeThread.java:151)\n&gt; \n&gt; i.\n&gt; \n&gt; \n&gt; \n&gt; \n&gt; ------------------------------------\n&gt; \n&gt; Yahoo! Groups Links\n&gt; \n&gt; \n&gt; \n\n"}}