{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":168599281,"authorName":"stack","from":"stack &lt;stack@...&gt;","replyTo":"LIST","senderId":"R271372LDflOO_-sqMyB0vtnHbe-OX-80KHpbxoyCWnridU8OvgS6Xnd9XT2lqzmWPKJn8Pa9COPbvBHN0opxQ","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] Re: Hello. I&#39;m japanese Heritrix Tester.","postDate":"1089672799","msgId":616,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQwRjMxNjVGLjEwMDAxMDdAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PDE2NjI3LjM5ODAuODYwODM5LjM4NTYyMEB0aXBoYXJlcy5iYXNpc3RlY2gubmV0Pg==","referencesHeader":"PEUxQmp4bmotMDAwNFk4LTAwQHNjOC1zZi13ZWI0LnNvdXJjZWZvcmdlLm5ldD4JPDQwRjJFNDk1LjMwMTAxMDVAYXJjaGl2ZS5vcmc+IDwxNjYyNy4zOTgwLjg2MDgzOS4zODU2MjBAdGlwaGFyZXMuYmFzaXN0ZWNoLm5ldD4="},"prevInTopic":615,"nextInTopic":617,"prevInTime":615,"nextInTime":617,"topicId":610,"numMessagesInTopic":10,"msgSnippet":"Makes sense to me. The metatags are not being read by extractors currently, as you guess below.  There is an RFE to address this. As heritrix currently works,","rawEmail":"Return-Path: &lt;stack@...&gt;\r\nX-Sender: stack@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 64756 invoked from network); 12 Jul 2004 22:59:44 -0000\r\nReceived: from unknown (66.218.66.218)\n  by m10.grp.scd.yahoo.com with QMQP; 12 Jul 2004 22:59:44 -0000\r\nReceived: from unknown (HELO ia00524.archive.org) (209.237.232.202)\n  by mta3.grp.scd.yahoo.com with SMTP; 12 Jul 2004 22:59:44 -0000\r\nReceived: (qmail 26611 invoked by uid 100); 12 Jul 2004 22:50:50 -0000\r\nReceived: from unknown (HELO ?209.237.240.13?) (stack@...@209.237.240.13)\n  by mail-dev.archive.org with SMTP; 12 Jul 2004 22:50:50 -0000\r\nMessage-ID: &lt;40F3165F.1000107@...&gt;\r\nDate: Mon, 12 Jul 2004 15:53:19 -0700\r\nUser-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7) Gecko/20040704 Debian/1.7-4\r\nX-Accept-Language: en\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;E1Bjxnj-0004Y8-00@...&gt;\t&lt;40F2E495.3010105@...&gt; &lt;16627.3980.860839.385620@...&gt;\r\nIn-Reply-To: &lt;16627.3980.860839.385620@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-Spam-DCC: : \r\nX-Spam-Checker-Version: SpamAssassin 2.63 (2004-01-11) on ia00524.archive.org\r\nX-Spam-Level: \r\nX-Spam-Status: No, hits=1.0 required=6.0 tests=AWL,BANG_BOSS,HTML_MESSAGE \n\tautolearn=ham version=2.63\r\nX-eGroups-Remote-IP: 209.237.232.202\r\nFrom: stack &lt;stack@...&gt;\r\nSubject: Re: [archive-crawler] Re: Hello. I&#39;m japanese Heritrix Tester.\r\nX-Yahoo-Group-Post: member; u=168599281\r\n\r\nMakes sense to me.\n\nThe metatags are not being read by extractors currently, as you guess \nbelow.  There is an RFE to address this.\n\nAs heritrix currently works, if no charset, or if a problem getting the \ncharset -- say its a charset name the JVM doesn&#39;t recognize (x-sjis) -- \nthen we default to single-byte.   Would make sense that it be possible \nto specify the default to use, especially if default is multibyte.\n\nWhat about letting the default be the JVMs file encoding (System \nproperty file.encoding?).  Wouldn&#39;t this be EUC_JP/Shift_JIS on japanese \nmachines?\n\nSt.Ack\n\n\nTom Emerson wrote:\n\n&gt;I&#39;ve been thinking about this some more (don&#39;t tell my boss!), and\n&gt;I think I understand what may be going on based on a reading of the\n&gt;code. Consider this scenario:\n&gt;\n&gt;1) You are crawling a Japanese(*) site.\n&gt;\n&gt;2) The pages are returned with &quot;Content-Type: text/html&quot;. Note that\n&gt;   no charset is specified in the HTTP response header.\n&gt;\n&gt;3) The pages display just fine in a Japanese(*) browser, but that is\n&gt;   to be expected because it has probably been configured to use a\n&gt;   Japanese encoding by default.\n&gt;\n&gt;(*) Japanese is used here, but the same is true for Chinese or Korean\n&gt;or pretty much any other multibyte language..\n&gt;\n&gt;Here&#39;s the problem:\n&gt;\n&gt;The Content-Type does *not* specify the encoding (charset) of the\n&gt;content. This means that the call to getResponseCharSet() will return\n&gt;null, and isMultibyteEncoding in ReplayCharSequenceFactory will return\n&gt;false. At this point no transcoding is done from the document\n&gt;character set into Unicode (the JVM&#39;s character set) and it is\n&gt;possible that the Extractors will get confused, as described in the\n&gt;Wiki. Consider:\n&gt;\n&gt;(0) tree% wget -S -O test.html http://jajatom.moo.jp/Top.html\n&gt;--18:14:36--  http://jajatom.moo.jp/Top.html\n&gt;           =&gt; `test.html&#39;\n&gt;Resolving jajatom.moo.jp... done.\n&gt;Connecting to jajatom.moo.jp[202.3.141.232]:80... connected.\n&gt;HTTP request sent, awaiting response... \n&gt; 1 HTTP/1.1 200 OK\n&gt; 2 Date: Mon, 12 Jul 2004 22:14:37 GMT\n&gt; 3 Server: Apache/1.3.29 (Unix) PHP/4.2.4-dev\n&gt; 4 Last-Modified: Sun, 27 Jun 2004 04:38:00 GMT\n&gt; 5 ETag: &quot;116fb4-3498-40de4f28&quot;\n&gt; 6 Accept-Ranges: bytes\n&gt; 7 Content-Length: 13464\n&gt; 8 Keep-Alive: timeout=1, max=100\n&gt; 9 Connection: Keep-Alive\n&gt;10 Content-Type: text/html\n&gt;\n&gt;    0K .......... ...                                        100%   17.44 KB/s\n&gt;\n&gt;18:14:37 (19.34 KB/s) - `test.html&#39; saved [13464/13464]\n&gt;\n&gt;The file has an http-equiv metatag in its header, however, that\n&gt;specifies the charset:\n&gt;\n&gt;&lt;META Http-Equiv=&quot;Content-Type&quot; Content=&quot;text/html; charset=x-sjis&quot;&gt;\n&gt;\n&gt;It does not look like the metatag is being processed, so the charset\n&gt;is never being set.\n&gt;\n&gt;In this particular case even if the HTTP response header had included\n&gt;the charset, the ReplayCharSequenceFactory would not identify it as\n&gt;multibyte because &#39;x-sjis&#39; is not one of the recognized character\n&gt;sets.\n&gt;\n&gt;I can envison adding a parameter to the crawler that allows you to\n&gt;define the &quot;default&quot; character set used for pages that don&#39;t specify\n&gt;them in their HTTP Content-Type response header. Lynx has an option\n&gt;for this called -assume-charset.\n&gt;\n&gt;Ideally the ReplayCharSequenceFactory would look for the http-equiv\n&gt;and make its decision based on the data there. Even then it would be\n&gt;useful to be able to specify the &#39;default&#39;.\n&gt;\n&gt;Does any of this make sense?\n&gt;\n&gt;    -tree\n&gt;\n&gt;  \n&gt;\n\n\n"}}