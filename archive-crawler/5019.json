{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":25272071,"authorName":"Sean Timm","from":"Sean Timm &lt;timmsc@...&gt;","profile":"timmscgroups","replyTo":"LIST","senderId":"aAGLEgomlehf__mmfEDHLNlvtVn8TNPE2NlTkmnFCBtaPVqN1fmrOHHdYqcd2WzrmNVccjoHIRVylPxgCDNAUIs","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] Change request for Heritrix 2.0","postDate":"1204228982","msgId":5019,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ3QzcxMzc2LjIwODAzMDZAYW9sLmNvbT4=","inReplyToHeader":"PDE0ODUyNS44MjAwMS5xbUB3ZWI1NDYwNy5tYWlsLnJlMi55YWhvby5jb20+","referencesHeader":"PDE0ODUyNS44MjAwMS5xbUB3ZWI1NDYwNy5tYWlsLnJlMi55YWhvby5jb20+"},"prevInTopic":5018,"nextInTopic":5020,"prevInTime":5018,"nextInTime":5020,"topicId":5015,"numMessagesInTopic":9,"msgSnippet":"... *(Throwable ","rawEmail":"Return-Path: &lt;Timmsc@...&gt;\r\nX-Sender: Timmsc@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 52032 invoked from network); 28 Feb 2008 20:03:55 -0000\r\nX-Received: from unknown (66.218.67.96)\n  by m43.grp.scd.yahoo.com with QMQP; 28 Feb 2008 20:03:55 -0000\r\nX-Received: from unknown (HELO imo-d03.mx.aol.com) (205.188.157.35)\n  by mta17.grp.scd.yahoo.com with SMTP; 28 Feb 2008 20:03:55 -0000\r\nX-Received: from Timmsc@...\n\tby imo-d03.mx.aol.com (mail_out_v38_r9.3.) id r.c92.233710d6 (34952)\n\t for &lt;archive-crawler@yahoogroups.com&gt;; Thu, 28 Feb 2008 15:03:02 -0500 (EST)\r\nX-Received: from [10.181.176.98] ([10.181.176.98]) by cia-da06.mx.aol.com (v121.4) with ESMTP id MAILCIADA061-888847c7137657; Thu, 28 Feb 2008 15:03:02 -0500\r\nMessage-ID: &lt;47C71376.2080306@...&gt;\r\nDate: Thu, 28 Feb 2008 15:03:02 -0500\r\nUser-Agent: Thunderbird 2.0.0.12 (Windows/20080213)\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;148525.82001.qm@...&gt;\r\nIn-Reply-To: &lt;148525.82001.qm@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-AOL-IP: 10.181.176.98\r\nX-Mailer: Unknown (No Version)\r\nX-Spam-Flag: NO\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Sean Timm &lt;timmsc@...&gt;\r\nSubject: Re: [archive-crawler] Change request for Heritrix 2.0\r\nX-Yahoo-Group-Post: member; u=25272071; y=yJbwb2sFWN6HAKhp7QD_S5-stCvF6vay1eiwuCMCbMHQ9eEbTkAe\r\nX-Yahoo-Profile: timmscgroups\r\n\r\nIt should expose the description.  From the Javadoc:\n\n    |*RuntimeException\n    &lt;http://java.sun.com/j2se/1.5.0/docs/api/java/lang/RuntimeException.html#RuntimeException%28java.lang.Throwable%29&gt;*(Throwable\n    &lt;http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Throwable.html&gt; cause)|\n\n              Constructs a new runtime exception with the specified\n    cause and a detail message of (cause==null ? null :\n    cause.toString()) (which typically contains the class and detail\n    message of cause).\n\nIf an additional description needs to be added,\n\n    |*RuntimeException\n    &lt;http://java.sun.com/j2se/1.5.0/docs/api/java/lang/RuntimeException.html#RuntimeException%28java.lang.String,%20java.lang.Throwable%29&gt;*(String\n    &lt;http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html&gt; message,\n    Throwable\n    &lt;http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Throwable.html&gt; cause)|\n\n              Constructs a new runtime exception with the specified\n    detail message and cause.\n\ncan be used.\n\n-Sean\n\nMathew Nik Foscarini wrote:\n&gt; Correct, that will expose the stack trace for the wrapped exception, \n&gt; but it still doesn&#39;t expose the description.\n&gt;\n&gt; Here is a sample log generated by using &quot;throw new RuntimeException( e )&quot;\n&gt;\n&gt; 2008-02-28T19:15:08.656Z    -5      18428 http://www.abc.com/ - - text/html #002 20080228191507974+447 sha1:3SLSHIHACO4E3RJCBEHHX5WDZJKCD6RS - err=java.lang.RuntimeException,3t\n&gt;  java.lang.RuntimeException: java.lang.NullPointerException\n&gt;    at centipede.writer.Scripts3DWriterProcessor.innerProcess(Scripts3DWriterProcessor.java:266)\n&gt;     at org.archive.crawler.framework.Processor.process(Processor.java:112)\n&gt;   at\n&gt;  org.archive.crawler.framework.ToeThread.processCrawlUri(ToeThread.java:302)\n&gt;     at org.archive.crawler.framework.ToeThread.run(ToeThread.java:151)\n&gt; Caused by: java.lang.NullPointerException\n&gt;  at centipede.writer.Scripts3DWriterProcessor.innerProcess(Scripts3DWriterProcessor.java:217)\n&gt;     ... 3 more\n&gt; This is an improvement, but I would also like to see the localized \n&gt; message there.\n&gt;\n&gt; For example; &quot;throw new RuntimeException( &quot;Hello world&quot; )&quot;\n&gt;\n&gt; You will not find the text &quot;Hello world&quot; in the error logs.\n&gt;\n&gt; I need the stack trace, but when I get to the code I don&#39;t know why.\n&gt;\n&gt; Think of IOException(s) for example. Was it an opening error, read \n&gt; error, or eof?\n&gt;\n&gt; ----- Original Message ----\n&gt; From: Gordon Mohr &lt;gojomo@...&gt;\n&gt; To: archive-crawler@yahoogroups.com\n&gt; Sent: Thursday, February 28, 2008 2:28:29 PM\n&gt; Subject: Re: [archive-crawler] Change request for Heritrix 2.0\n&gt;\n&gt; Good idea!\n&gt;\n&gt; To contribute patches, opening a JIRA issue is the best first step:\n&gt; describe the need, attach the patch, and assign the issue a high\n&gt; priority to help it be noticed in our reviews of open issues. Mentioning\n&gt; the matter here is also welcome.\n&gt;\n&gt; Regarding the proposed change:\n&gt;\n&gt; Might using the RuntimeException constructor that wraps another\n&gt; exception (the &#39;cause&#39;), effectively retain the original message and \n&gt; stack?\n&gt;\n&gt; For example:\n&gt;\n&gt; catch( NullPointerExceptio n e ) {\n&gt; // do some stuff\n&gt; throw new RuntimeException( e );\n&gt; }\n&gt;\n&gt; (Not sure this will cause the Heritrix log to capture the original\n&gt; message, but it might.)\n&gt;\n&gt; - Gordon @ IA\n&gt;\n&gt; nfoscarini wrote:\n&gt; &gt; Hi,\n&gt; &gt;\n&gt; &gt; I would like to make a change request to some of the source code in\n&gt; &gt; Heritrix 2.0, but I&#39;m not sure how to do this. Do I open a Jira issue,\n&gt; &gt; or is there a way to submit code to CVS for the developers to review?\n&gt; &gt;\n&gt; &gt; Anyway, here is my change request.\n&gt; &gt;\n&gt; &gt; Description:\n&gt; &gt;\n&gt; &gt; Developers creating add-ons sometimes need to throw exceptions to\n&gt; &gt; report to Heritrix that a recoverable exception has happen. Heritrix\n&gt; &gt; then logs this error into the &quot;runtime-errors. log&quot; has an -5 code on\n&gt; &gt; the URI.\n&gt; &gt;\n&gt; &gt; I would like to change the description that is logged, because it\n&gt; &gt; contains the exception stack trace, but not the exception description.\n&gt; &gt;\n&gt; &gt; For example; If I catch an exception like &quot;null pointer&quot;, and can not\n&gt; &gt; handle the exception. I&#39;ll wrap the exception, and throw a\n&gt; &gt; RuntimeException. Like this.\n&gt; &gt;\n&gt; &gt; catch( NullPointerExceptio n e )\n&gt; &gt; {\n&gt; &gt; // do some stuff\n&gt; &gt; throw new RuntimeException( e.getLocalizedMessa ge() );\n&gt; &gt; }\n&gt; &gt;\n&gt; &gt; Afterwards, when reviewing the &quot;runtime-errors. log&quot; the entry would\n&gt; &gt; look something like this.\n&gt; &gt;\n&gt; &gt; 2008-02-28T18: 46:08.473Z -5 18428 http://www.abc. com/ \n&gt; &lt;http://www.abc.com/&gt; - -\n&gt; &gt; text/html #002 20080228184607809+ 440\n&gt; &gt; sha1:3SLSHIHACO4E3R JCBEHHX5WDZJKCD6 RS - err=java.lang. \n&gt; RuntimeException ,3t\n&gt; &gt; java.lang.RuntimeEx ception\n&gt; &gt; at\n&gt; &gt; centipede.writer. Scripts3DWriterP rocessor. innerProcess( \n&gt; Scripts3DWriterP rocessor. java:266)\n&gt; &gt; at org.archive. crawler.framewor k.Processor. process(Processo \n&gt; r.java:112)\n&gt; &gt; at\n&gt; &gt; org.archive. crawler.framewor k.ToeThread. processCrawlUri( \n&gt; ToeThread. java:302)\n&gt; &gt; at org.archive. crawler.framewor k.ToeThread. run(ToeThread. java:151)\n&gt; &gt;\n&gt; &gt; Change effects:\n&gt; &gt; org.archive. crawler.framewor k.recoverablePro blem(Throwable e)\n&gt; &gt;\n&gt; &gt; My problem with this log entry is that it doesn&#39;t describe the cause\n&gt; &gt; of the exception. If your library doesn&#39;t contain debug information,\n&gt; &gt; then the stack trace won&#39;t provide where the problem happened.\n&gt; &gt;\n&gt; &gt; So I recommend using e.getLocalizedMessa ge() in the log file, along\n&gt; &gt; with the stack trace.\n&gt; &gt;\n&gt; &gt; Current source code:\n&gt; &gt;\n&gt; &gt; private void recoverableProblem( Throwable e) {\n&gt; &gt; Object previousStep = step;\n&gt; &gt; setStep(STEP_ HANDLING_ RUNTIME_EXCEPTIO N);\n&gt; &gt; e.printStackTrace( System.err) ;\n&gt; &gt; currentCuri. setFetchStatus( S_RUNTIME_ EXCEPTION) ;\n&gt; &gt; // store exception temporarily for logging\n&gt; &gt; currentCuri. getAnnotations( ).add(&quot;err= &quot;+e.getClass( ).getName( ));\n&gt; &gt; currentCuri. getData() .put(A_RUNTIME_ EXCEPTION, e);\n&gt; &gt; String message = &quot;Problem &quot; + e +\n&gt; &gt; &quot; occured when trying to process &#39;&quot;\n&gt; &gt; + currentCuri. toString( )\n&gt; &gt; + &quot;&#39; at step &quot; + previousStep\n&gt; &gt; + &quot; in &quot; + currentProcessorNam e +&quot;&#92;n&quot;;\n&gt; &gt; logger.log(Level. SEVERE, message.toString( ), e);\n&gt; &gt; }\n&gt; &gt;\n&gt; &gt; Desired change:\n&gt; &gt;\n&gt; &gt; private void recoverableProblem( Throwable e) {\n&gt; &gt; Object previousStep = step;\n&gt; &gt; setStep(STEP_ HANDLING_ RUNTIME_EXCEPTIO N);\n&gt; &gt; e.printStackTrace( System.err) ;\n&gt; &gt; currentCuri. setFetchStatus( S_RUNTIME_ EXCEPTION) ;\n&gt; &gt; // store exception temporarily for logging\n&gt; &gt; currentCuri. getAnnotations( ).add(&quot;err= &quot;+e.getClass( ).getName( ));\n&gt; &gt; currentCuri. getData() .put(A_RUNTIME_ EXCEPTION, e);\n&gt; &gt; String message = &quot;Problem &quot; + e.getLocalizedMessa ge() +\n&gt; &gt; &quot; occured when trying to process &#39;&quot;\n&gt; &gt; + currentCuri. toString( )\n&gt; &gt; + &quot;&#39; at step &quot; + previousStep\n&gt; &gt; + &quot; in &quot; + currentProcessorNam e +&quot;&#92;n&quot;;\n&gt; &gt; logger.log(Level. SEVERE, message.toString( ), e);\n&gt; &gt; }\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; Yahoo! Groups Links\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt;\n&gt;\n&gt;\n&gt; ------------------------------------------------------------------------\n&gt; Never miss a thing. Make Yahoo your homepage. \n&gt; &lt;http://us.rd.yahoo.com/evt=51438/*http://www.yahoo.com/r/hs&gt;  \n\n"}}