{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":251760126,"authorName":"tizo_trico","from":"&quot;tizo_trico&quot; &lt;tizone@...&gt;","profile":"tizo_trico","replyTo":"LIST","senderId":"wy8MK70vArY8HR8s2w9Af3NL9pvU2IBzu6gsnweC0KERfP0Zp3kUhKnHGGoUHVBlEs6A32vSaQ07ERaD9orML7tj0c0Z9Q","spamInfo":{"isSpam":false,"reason":"6"},"subject":"persistent alist","postDate":"1171326418","msgId":3809,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PGVxcjBraSs3ZG91QGVHcm91cHMuY29tPg=="},"prevInTopic":0,"nextInTopic":0,"prevInTime":3808,"nextInTime":3810,"topicId":3809,"numMessagesInTopic":1,"msgSnippet":"Hi there, Using Heritrix 1.10.2. I have to modify CrawlURI for a specific need, that maybe is interesting to someone else, or maybe to future versions. I","rawEmail":"Return-Path: &lt;tizone@...&gt;\r\nX-Sender: tizone@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 93764 invoked from network); 13 Feb 2007 00:27:05 -0000\r\nReceived: from unknown (66.218.67.36)\n  by m38.grp.scd.yahoo.com with QMQP; 13 Feb 2007 00:27:05 -0000\r\nReceived: from unknown (HELO n13c.bullet.sp1.yahoo.com) (69.147.64.114)\n  by mta10.grp.scd.yahoo.com with SMTP; 13 Feb 2007 00:27:05 -0000\r\nReceived: from [216.252.122.219] by n13.bullet.sp1.yahoo.com with NNFMP; 13 Feb 2007 00:27:01 -0000\r\nReceived: from [66.218.69.2] by t4.bullet.sp1.yahoo.com with NNFMP; 13 Feb 2007 00:27:00 -0000\r\nReceived: from [66.218.66.83] by t2.bullet.scd.yahoo.com with NNFMP; 13 Feb 2007 00:27:00 -0000\r\nDate: Tue, 13 Feb 2007 00:26:58 -0000\r\nTo: archive-crawler@yahoogroups.com\r\nMessage-ID: &lt;eqr0ki+7dou@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:6:0:0\r\nFrom: &quot;tizo_trico&quot; &lt;tizone@...&gt;\r\nSubject: persistent alist\r\nX-Yahoo-Group-Post: member; u=251760126; y=elm0HOIVLa4k4kylpgwRUIkkwsFo-dr1WXaxrJEjJht--GgLcQ\r\nX-Yahoo-Profile: tizo_trico\r\n\r\nHi there,\n\nUsing Heritrix 1.10.2.\n\nI have to modify CrawlURI for a specific=\r\n need, that maybe is\ninteresting to someone else, or maybe to future versio=\r\nns.\n\nI needed to persist across processings some attributes from CrawlURI\na=\r\nlist, that did not have a fixed key name; instead, their key names\nwere a f=\r\nixed string, concatenated with an arbitrary integer.\n\nTo achieve this goal,=\r\n I modify CrawlURI class, adding a static regular\nexpression, a static meth=\r\nod to set it, and modifying the method\ngetPersistentAList. All attributes f=\r\nrom alist, of which key names\nmatch with the RE, also persist across proces=\r\nsings.\n\nHere is the code (modifications are between lines):\n\n  .\n  .\npublic=\r\n class CrawlURI extends CandidateURI\nimplements FetchStatusCodes {\n  .\n  .\n=\r\n//_________________________________________________________________________=\r\n____\n// the alist members which keys match the following regular expression=\r\n,\n// persist across URI processings.\n\tprivate static String alistRegularExp=\r\nressionPersistent =3D null;\n//_____________________________________________=\r\n________________________________\n  .\n  .\n    protected AList getPersistentA=\r\nList() {\n  .\n  .\n        if(heritableKeys!=3Dnull) {\n            newAList.c=\r\nopyKeysFrom(heritableKeys.iterator(), getAList());\n        }\n//____________=\r\n_________________________________________________________________\n// loop b=\r\netween members of alist, and add those that its key match \n// with persiste=\r\nnt RE, to the persistent alist.\n\n\t\tif (alistRegularExpressionPersistent !=\r\n=3D null &&\n\t\t\t\t!alistRegularExpressionPersistent.equals(&quot;&quot;))\n\t\t{\n\t\t\tIterat=\r\nor lKeysIterator =3D getAList().getKeys();\n\t\t\t\n\t\t\twhile (lKeysIterator.hasN=\r\next())\n\t\t\t{\n\t\t\t\tString key =3D (String)lKeysIterator.next();\n\t\t\t\t\n\t\t\t\tif (k=\r\ney.matches(alistRegularExpressionPersistent))\n\t\t\t\t{\n\t\t\t\t\tnewAList.putObject=\r\n(key, getAList().getObject(key));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n//________________________=\r\n_____________________________________________________\n        return newALi=\r\nst;\n    }\n  .\n  .\n//_______________________________________________________=\r\n______________________\n// set the RE for those alist members that must pers=\r\nist across URI\nprocessings.\n\n\tpublic static void setREPersistentMembers(Str=\r\ning regularExpression)\n\t{\n\t\talistRegularExpressionPersistent =3D regularExp=\r\nression;\n\t}\n\n//____________________________________________________________=\r\n_________________\n  .\n  .\n}\n\nIt is no so elegant, but it works.\n\nAnother ap=\r\nproach could be that the method to put attributes in\nCandidateURI class, ha=\r\nd a boolean parameter to indicate if the\nattribute should persist accross p=\r\nrocessings.\n\ntizo\n\n\n\n"}}