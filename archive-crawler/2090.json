{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":168599281,"authorName":"stack","from":"stack &lt;stack@...&gt;","profile":"stackarchiveorg","replyTo":"LIST","senderId":"IQxdG6frEHTWMOnFxP3jds3E9EFS5UYUf8PzdbKn6QqIRqHd24FnqcxFsQ5J5OHMn39Koc3HpTPy0i7RkIYUDA","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] Slowdown in LinkScoper?","postDate":"1123527047","msgId":2090,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQyRjdBOTg3LjYwODAwMDlAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PDQyRjIxMEVDLjUwMjA5MDZAY252aS5jb20+","referencesHeader":"PGRjbGdjNCtyM292QGVHcm91cHMuY29tPiA8NDJFRTRDODUuOTA0MDAwOEBjbnZpLmNvbT4gPDQyRUU3MUQ1LjYwODA4MDJAYXJjaGl2ZS5vcmc+IDw0MkYyMTBFQy41MDIwOTA2QGNudmkuY29tPg=="},"prevInTopic":2089,"nextInTopic":2091,"prevInTime":2089,"nextInTime":2091,"topicId":2062,"numMessagesInTopic":10,"msgSnippet":"... So, after changing your scope, did you see that we re spending less time in LinkScoper or was there no noticeable change (I d expect big difference between","rawEmail":"Return-Path: &lt;stack@...&gt;\r\nX-Sender: stack@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 32712 invoked from network); 8 Aug 2005 19:00:25 -0000\r\nReceived: from unknown (66.218.66.167)\n  by m31.grp.scd.yahoo.com with QMQP; 8 Aug 2005 19:00:25 -0000\r\nReceived: from unknown (HELO ia00524.archive.org) (207.241.224.172)\n  by mta6.grp.scd.yahoo.com with SMTP; 8 Aug 2005 19:00:25 -0000\r\nReceived: (qmail 6717 invoked by uid 100); 8 Aug 2005 19:00:15 -0000\r\nReceived: from adsl-71-130-102-78.dsl.pltn13.pacbell.net (HELO ?192.168.1.8?) (stack@...@71.130.102.78)\n  by mail-dev.archive.org with SMTP; 8 Aug 2005 19:00:15 -0000\r\nMessage-ID: &lt;42F7A987.6080009@...&gt;\r\nDate: Mon, 08 Aug 2005 11:50:47 -0700\r\nUser-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.8) Gecko/20050513 Debian/1.7.8-1\r\nX-Accept-Language: en\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;dclgc4+r3ov@...&gt; &lt;42EE4C85.9040008@...&gt; &lt;42EE71D5.6080802@...&gt; &lt;42F210EC.5020906@...&gt;\r\nIn-Reply-To: &lt;42F210EC.5020906@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-Spam-DCC: : \r\nX-Spam-Checker-Version: SpamAssassin 2.63 (2004-01-11) on ia00524.archive.org\r\nX-Spam-Level: \r\nX-Spam-Status: No, hits=-86.9 required=7.0 tests=AWL,USER_IN_WHITELIST \n\tautolearn=no version=2.63\r\nX-eGroups-Msg-Info: 1:12:0\r\nFrom: stack &lt;stack@...&gt;\r\nSubject: Re: [archive-crawler] Slowdown in LinkScoper?\r\nX-Yahoo-Group-Post: member; u=168599281; y=j0_0S7ZEeViHFcNDPJfJrU5Qmt9fZEpE7P656ab56Vlw-IFvCyqJE62j\r\nX-Yahoo-Profile: stackarchiveorg\r\n\r\nRyan Gran wrote:\n\n&gt; ...\n&gt; &gt; (2) What Scope are you using? The legacy scopes (host/path/domain)\n&gt; &gt; are really inefficient, doing a linear probe through all &#39;seeds&#39;\n&gt; &gt; to determine if a new URI is in scope. (If using a custom scope,\n&gt; &gt; some other bottleneck could be the cause.) Some thread stacks from\n&gt; &gt; the overly-aged LinksScoper threads could point to the cause.\n&gt; &gt;\n&gt; &gt;\n&gt; Since I received this email, I started new crawls using \n&gt; SurtPrefixScope and\n&gt; DomainSensitiveFrontier.  I also went ahead and upgraded to the latest\n&gt; HEAD, as\n&gt; of about 2 days ago:  1.5.0-200508021001  Previously, I was using\n&gt; DomainScope.\n\nSo, after changing your scope, did you see that we&#39;re spending less time \nin LinkScoper or was there no noticeable change (I&#39;d expect big \ndifference between DSF and SurtPrefixScope)?\n\n&gt;\n&gt; The problem doesn&#39;t appear related to any specific URLS -- it appears to\n&gt; be system-wide.\n&gt; I actually started 3 seperate crawls using 3 different sets of seeds\n&gt; (10k each).  Each crawl\n&gt; ran on an identically configured machine with identical order.xmls.  As\n&gt; a matter of fact,\n&gt; for the first 29 hours or so, all of the crawls were running fine and\n&gt; averaging about\n&gt; 5.0 documents/second (bandwidth limited at the moment).  \n\nHow many total documents downloaded (5.0 * 29 * 3600 = 1/2 million \ndocs)/discovered?  If so, thats low.  You shouldn&#39;t be using CPU as you \ndescribe below -- not by our experience (Unless you are swapping?).\n\n&gt; This morning I\n&gt; see that across\n&gt; all 3 machines, the averages have started to drop off, bandwidth usage\n&gt; has become very\n&gt; spikey (was basically pegged at 100% at the start of the crawl), and\n&gt; perhaps most\n&gt; telling, the load averages on all machines have spiked.  I was running a\n&gt; load average of\n&gt; about 1.5 for the first 24-25 hours (last time I looked), now I&#39;m up to\n&gt; a load average of\n&gt; ~25.0 (varies a bit my machine).  There&#39;s literally no other activity on\n&gt; these machines,\n&gt; the logs are being stored to the local disk, but the archives themselves\n&gt; are being written\n&gt; across NFS.  \n\nAnd the bdb logs -- the content of the &#39;state&#39; directory?  Are these \nbeing written across NFS?  Whats I/O loading like on these machines?\n\n&gt; Each machine is writing to a different NFS directory.\n&gt;\n&gt; Using regex from http://www.dreamersrealm.net/~tree/blog/?cat=6 \n&gt; &lt;http://www.dreamersrealm.net/%7Etree/blog/?cat=6&gt; to focus on\n&gt; text/html content.  Using counter-mode: count-per-domain with a\n&gt; max-docs: value\n&gt; of 500.\n\n\n&gt;\n&gt; Also using all Apple OS/X Server -- perhaps that&#39;s the issue, I realize\n&gt; Linux is the\n&gt; primary target.\n&gt;\n&gt; You mentioned thread stacks -- I saw talk of jprofiler in the Developer\n&gt; Docs -- is\n&gt; there a command line option or web UI option to dump the stacks?  Glad\n&gt; to provide\n&gt; whatever I can to help troubleshoot, but I&#39;m also not a Java guy, so I\n&gt; know my limits,\n&gt; and when to ask for help.  Help! =)\n&gt;\nSmile.\n\nLooks like you&#39;ve figured how to do thread stack dumps (The alternative \nis sending the launching java process a SIGQUIT.  The stack trace will \nshow in heritrix_out.log).\n\nSt.Ack\n\n&gt; ------------------------------------------------------------------------\n&gt; YAHOO! GROUPS LINKS\n&gt;\n&gt;     *  Visit your group &quot;archive-crawler\n&gt;       &lt;http://groups.yahoo.com/group/archive-crawler&gt;&quot; on the web.\n&gt;        \n&gt;     *  To unsubscribe from this group, send an email to:\n&gt;        archive-crawler-unsubscribe@yahoogroups.com\n&gt;       &lt;mailto:archive-crawler-unsubscribe@yahoogroups.com?subject=Unsubscribe&gt;\n&gt;        \n&gt;     *  Your use of Yahoo! Groups is subject to the Yahoo! Terms of\n&gt;       Service &lt;http://docs.yahoo.com/info/terms/&gt;.\n&gt;\n&gt;\n&gt; ------------------------------------------------------------------------\n&gt;\n\n\n"}}