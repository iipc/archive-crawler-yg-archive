{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"It7Kn9dYXlt_oJd-n9DpFEVwDe0BAkw17mrbMvI9mQh4kIVMl7-HG53SiCL7YFzDo_rT1imtsfmwCXX_fqIdn6RFiiIribU","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: [archive-crawler] heritrix/2.0.2 freezing","postDate":"1357005130","msgId":7882,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDUwRTI0MTRBLjgwMDA2MDhAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PDI0Qjk4MzVFNEM4MDE5NDRCMjBCRjYyMEM4NEJCMERFMEI2OTc3QTZAZXhtYncwMi5hc3VyaXRlLmFkLmFzdS5lZHU+","referencesHeader":"PDI0Qjk4MzVFNEM4MDE5NDRCMjBCRjYyMEM4NEJCMERFMEI2OTc3QTZAZXhtYncwMi5hc3VyaXRlLmFkLmFzdS5lZHU+"},"prevInTopic":7881,"nextInTopic":0,"prevInTime":7881,"nextInTime":7883,"topicId":7880,"numMessagesInTopic":3,"msgSnippet":"Hi, Marvin - I would definitely recommend either Heritrix 3.1.1 (latest official Heritrix 3.x release) or Heritrix 1.14.4 (latest Heritrix 1.x release) over","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 92273 invoked from network); 1 Jan 2013 01:52:13 -0000\r\nX-Received: from unknown (98.137.35.162)\n  by m10.grp.sp2.yahoo.com with QMQP; 1 Jan 2013 01:52:13 -0000\r\nX-Received: from unknown (HELO relay03.pair.com) (209.68.5.17)\n  by mta6.grp.sp2.yahoo.com with SMTP; 1 Jan 2013 01:52:12 -0000\r\nX-Received: (qmail 90973 invoked by uid 0); 1 Jan 2013 01:52:11 -0000\r\nX-Received: from 70.36.143.102 (HELO silverbook.local) (70.36.143.102)\n  by relay03.pair.com with SMTP; 1 Jan 2013 01:52:11 -0000\r\nX-pair-Authenticated: 70.36.143.102\r\nMessage-ID: &lt;50E2414A.8000608@...&gt;\r\nDate: Mon, 31 Dec 2012 17:52:10 -0800\r\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:17.0) Gecko/17.0 Thunderbird/17.0\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nCc: Marvin Simkin &lt;marvin.simkin@...&gt;\r\nReferences: &lt;24B9835E4C801944B20BF620C84BB0DE0B6977A6@...&gt;\r\nIn-Reply-To: &lt;24B9835E4C801944B20BF620C84BB0DE0B6977A6@...&gt;\r\nContent-Type: text/plain; charset=windows-1252; format=flowed\r\nContent-Transfer-Encoding: 8bit\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] heritrix/2.0.2 freezing\r\nX-Yahoo-Group-Post: member; u=137285340; y=w5DaSCQUxRqWmQbMQ2sfix8rWjGNjHMoWuUeGNLZKttk\r\nX-Yahoo-Profile: gojomo\r\n\r\nHi, Marvin -\n\nI would definitely recommend either Heritrix 3.1.1 (latest official \nHeritrix 3.x release) or Heritrix 1.14.4 (latest Heritrix 1.x release) \nover anything Heritrix 2.x.\n\n(Soon after Heritrix 2 was minimally usable, we wanted to make a \nnon-backward-compatible change to the way crawls were modularly \nconfigured and managed, mainly related to adopting the Spring \n&#39;container&#39; approach. We called that change version 3, and all new \nfunctional development has been focused there. Few Heritrix users ever \nadopted 2.x versions, so generally now 1.x is still an OK choice if \nyou&#39;re used to it and it does what you need, or 3.x is a good choice if \nyou&#39;re starting anew or ready to transition forward.)\n\nI don&#39;t know of any specific H2.0.2 issues that could explain what \nyou&#39;ve seen, but we&#39;d want to reproduce the problem with one of the \nother versions (preferably H3) before trying detailed diagnosis.\n\nMoving to either H1 or H3 will require rebuilding your configuration. \nOur usual recommendation is to start with the default/model \nconfiguration and make your adjustments, one-by-one, as needed.\n\nOther thoughts on a situation like yours:\n\n� your machine appears to have 2GiB RAM; you generally won&#39;t want to use \na Java heap size any more than 60-75% of that total, as Java heap \nusage/GC and even a little swapping don&#39;t mix well. (This alone might be \nenough to explain your long pauses of total unresponsiveness.)\n\n� usually the in-interface &#39;threads&#39; report gives good hints what a \ncrawl is up to, if its progress seems problematic... and if the web UI \nis unresponsive (indicating something very wrong) a JVM-level threads \nstack dump (using the SIGQUIT signal or the &#39;jstack&#39; utility) may \nprovide similar insight\n\n� a JRE of 1.6.0_u20 vintage is quite old (April 2010) and missing many \nfixed, including high-priority security fixes (latest 1.6.0 version from \nOracle is 1.6.0_u38). I strongly recommend using the latest Oracle JDK \nversions (such as 1.6.0_38 or 1.7.0_10) if at all possible. (Using the \nJDK rather than the JRE ensures some extra debugging tools are around if \nthings go wrong; non-Sun/Oracle OpenJDK distributions have sometimes had \nlingering bugs and had less testing than the mainline.)\n\n� if there are errors Heritrix knows about at the app level, they&#39;ll \nusually appear as &#39;alerts&#39; or WARNING/SEVERE log items in &#39;heritrix_out.log&#39;\n\n� if crawling thousands of hostnames, where many are names that don&#39;t \nresolve or aren&#39;t running HTTP servers, the retry-timeouts can sometimes \nbe an issue (all worker ToeThreads waiting for a 20-second-plus timeout, \nrepeatedly). I don&#39;t think that&#39;s the main issue here but if your seed \nlist has a lot of &quot;maybe once-upon-a-time webservers&quot; hostnames, it \ncould be a factor you eventually run into.\n\nMy main recommendation is: try H3, on a recent Oracle JDK, with a heap \naround 1.4GiB, and see what happens.\n\nHope this helps,\n\n- Gordon\n\nOn 12/28/12 8:50 AM, Marvin Simkin wrote:\n&gt; Hi everyone. I&#39;ve been away from Heritrix for a couple years but just\n&gt; got asked to run it again against our web. I launched it with just\n&gt; over 51,000 seeds, all of them using http (not https). It ran fine\n&gt; for a few days but now it is freezing for long periods of time before\n&gt; it starts going again. (Minutes or hours... it has currently been\n&gt; stuck for an hour. There isn&#39;t anything specific I&#39;ve done to restart\n&gt; it before... it just mysteriously comes back to life.) I&#39;m hoping for\n&gt; some ideas how to debug / improve this.\n&gt;\n&gt; I see the heritrix version 2 line seems to have been dropped (is this\n&gt; why?) and versions 1 and 3 are being maintained. 3 seems still\n&gt; experimental / in progress? Do I need to redo my configs so I can\n&gt; switch to version 1?\n&gt;\n&gt; Tech details (ask me what else you need)\n&gt;\n&gt; Linux 2.6.18-128.1.16.el5.xs5.5.0.54xen running as a Virtual Machine\n&gt;\n&gt; Heritrix started with JAVA_OPTS=&quot;-Xmx3584M&quot; (the most memory I could\n&gt; request before getting errors)\n&gt;\n&gt; JAVA_HOME=/usr/local/data/msimkin/java/jre1.6.0_20/\n&gt;\n&gt; $ cat /proc/swaps Filename\t\t\t\tType\t\tSize\tUsed\tPriority\n&gt; /dev/mapper/VolGroup00-LogVol01         partition\t4161528\t2754248\t-1\n&gt;\n&gt; $ df -h . Filesystem            Size  Used Avail Use% Mounted on\n&gt; 192.168.70.100:/vol/infosec 2.0T  842G  1.1T  44% /usr/local/data\n&gt;\n&gt; The &quot;top&quot; command reports (partial output)\n&gt;\n&gt; top - 09:16:21 up 143 days,  9:05,  5 users,  load average: 1.00,\n&gt; 1.03, 1.21 Tasks:  98 total,   2 running,  95 sleeping,   0 stopped,\n&gt; 1 zombie Cpu(s):  0.0%us,  0.2%sy,  0.0%ni, 50.2%id, 49.6%wa,\n&gt; 0.0%hi,  0.0%si,  0.0%st Mem:   2097152k total,  2088640k used,\n&gt; 8512k free,      336k buffers Swap:  4161528k total,  2561512k used,\n&gt; 1600016k free,    10120k cached\n&gt;\n&gt; PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND\n&gt; 8150 msimkin   15   0 3860m 1.6g 4752 S  0.0 78.8   1235:01 java\n&gt;\n&gt; I interpret this to mean there is (virtual) memory available, and\n&gt; heritrix is not trying to do anything that would use CPU. So what\n&gt; does it want?\n&gt;\n&gt; When frozen, crawl.log shows no new entries, nor does\n&gt; heritrix_out.log or any other logfiles, not even\n&gt; progress-statistics.log. They all stop at about the same minute and\n&gt; second. The web interface is also unresponsive, limiting diagnosis\n&gt; there.\n&gt;\n&gt; runtime-errors.log shows mostly complaints about character sets, and\n&gt; has no entries since 4 days ago.\n&gt;\n&gt; About 3 minutes before the latest freeze, nonfatal-errors.log shows\n&gt; the following burst of timeouts. (I am running with 20 threads.)\n&gt;\n&gt; 2012-12-28T15:28:19.419Z    -2          -\n&gt; http://seamonkey.ed.asu.edu/swa/discussion/message117.html LLLLL\n&gt; http://wings.buffalo.edu/anthropology/Documents/lootbib.shtml unknown\n&gt; #016 - - - java.net.SocketTimeoutException: connect timed out:\n&gt; timeout set at 20000ms. 2012-12-28T15:28:19.588Z    -2          -\n&gt; http://robots.asu.edu/index.php/Special:WhatLinksHere/MediaWiki_talk:Print.css\n&gt; ELL\n&gt; http://robots.asu.edu/index.php?title=MediaWiki_talk:Print.css&action=edit&redlink=1\n&gt; unknown #014 - - - java.net.SocketTimeoutException: connect timed\n&gt; out: timeout set at 20000ms. 2012-12-28T15:28:44.575Z    -2\n&gt; -\n&gt; http://asusrl.eas.asu.edu/srlab/Research/roboticscamp/2009/mazevideo/mazevideo.html\n&gt; LLLLL http://venus.eas.asu.edu/roboticscamp/2009/Closing/index.html\n&gt; unknown #009 - - - java.net.SocketTimeoutException: connect timed\n&gt; out: timeout set at 20000ms. 2012-12-28T15:28:44.733Z    -2\n&gt; - http://shumway.physics.asu.edu/codes/doc/pi/SimulationInfo_8cc.html\n&gt; LLLLLL http://shumway.physics.asu.edu/codes/doc/pi/files.html unknown\n&gt; #004 - - - java.net.SocketTimeoutException: connect timed out:\n&gt; timeout set at 20000ms. 2012-12-28T15:28:44.937Z    -2          -\n&gt; http://engineering.asu.edu/printpdf/people/967169 RRLRLLLLLL\n&gt; http://search.asu.edu/search?q=cache:u8ZQ3tgsqaYJ:engineering.asu.edu/people/967169%20psp&output=xml_no_dtd&ie=UTF-8&client=asu_frontend&proxystylesheet=asu_frontend&access=p&oe=ISO-8859-1\n&gt; unknown #003 - - - java.net.SocketTimeoutException: connect timed\n&gt; out: timeout set at 20000ms.\n&gt;\n&gt; I have configured some sites to be crawled more slowly because of\n&gt; complaints about load. However if heritrix had nothing to do but wait\n&gt; for some configured pauses to expire, I would expect the web\n&gt; interface at least to be responsive.\n&gt;\n&gt; Ideas? Thanks!!!\n&gt;\n&gt; ------------------------------------- Marvin Simkin Information\n&gt; Security Architect University Technology Office Arizona State\n&gt; University https://webapp4.asu.edu/directory/person/379120\n&gt;\n&gt;\n&gt; ------------------------------------\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n\n"}}