{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":140025715,"authorName":"progre55","from":"&quot;progre55&quot; &lt;ikromchik@...&gt;","profile":"progre55","replyTo":"LIST","senderId":"5KWkDTTSjwh1ELT5lVwX8rUhIAfpRB5Gd5W7D0oMW-z13UXdjpiZieZnWPYitUhq27lOF2GHwr-mLNUk7Rr9E7xv2tbrw9M","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: Loading cookies from a file on H3","postDate":"1311859321","msgId":7240,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PGowcm5wcCt0OHZwQGVHcm91cHMuY29tPg==","inReplyToHeader":"PDRFMzA1NzIxLjcwMjA1QGFyY2hpdmUub3JnPg=="},"prevInTopic":7232,"nextInTopic":0,"prevInTime":7239,"nextInTime":7241,"topicId":7227,"numMessagesInTopic":7,"msgSnippet":"Hi Noah, Thanks for the clue, I got it working finally =) Apparently I was setting my cookies with the security flag, and trying to crawl non-ssl pages. Now","rawEmail":"Return-Path: &lt;ikromchik@...&gt;\r\nX-Sender: ikromchik@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 82549 invoked from network); 28 Jul 2011 13:22:01 -0000\r\nX-Received: from unknown (98.137.34.44)\n  by m6.grp.sp2.yahoo.com with QMQP; 28 Jul 2011 13:22:01 -0000\r\nX-Received: from unknown (HELO n42b.bullet.mail.sp1.yahoo.com) (66.163.168.156)\n  by mta1.grp.sp2.yahoo.com with SMTP; 28 Jul 2011 13:22:01 -0000\r\nX-Received: from [69.147.65.150] by n42.bullet.mail.sp1.yahoo.com with NNFMP; 28 Jul 2011 13:22:01 -0000\r\nX-Received: from [98.137.34.51] by t7.bullet.mail.sp1.yahoo.com with NNFMP; 28 Jul 2011 13:22:01 -0000\r\nDate: Thu, 28 Jul 2011 13:22:01 -0000\r\nTo: archive-crawler@yahoogroups.com\r\nMessage-ID: &lt;j0rnpp+t8vp@...&gt;\r\nIn-Reply-To: &lt;4E305721.70205@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: &quot;progre55&quot; &lt;ikromchik@...&gt;\r\nSubject: Re: Loading cookies from a file on H3\r\nX-Yahoo-Group-Post: member; u=140025715; y=fjjp95nwbdSEtm2hES_Zbv-DKi6nCd1W8Z5Oj2HlDqKaF7Cf\r\nX-Yahoo-Profile: progre55\r\n\r\nHi Noah,\n\nThanks for the clue, I got it working finally =3D) Apparently I w=\r\nas setting my cookies with the &quot;security&quot; flag, and trying to crawl non-ssl=\r\n pages.\n\nNow it would be awesome if I could get the credentials working. So=\r\n far, no luck setting html-form-creds for ft.com\n\nRegards,\nprogre55\n\n--- In=\r\n archive-crawler@yahoogroups.com, Noah Levitt &lt;nlevitt@...&gt; wrote:\n&gt;\n&gt; Hi p=\r\nrogre55,\n&gt; \n&gt; Thanks for confirming the fix.\n&gt; \n&gt; Adding cookies in a custo=\r\nm SeedModule the way you describe sounds like it should work. If you use an=\r\n IDE you might try stepping through CookieSpecBase.match(String, int, Strin=\r\ng, boolean, SortedMap) to see what&#39;s happening when it comes time to send t=\r\nhe cookie.\n&gt; \n&gt; Noah\n&gt; \n&gt; On 2011-07-27 06:24 , progre55 wrote:\n&gt; &gt; Hi Noah=\r\n,\n&gt; &gt;\n&gt; &gt; Thanks for the quick fix!\n&gt; &gt; I&#39;ve tested loading cookies from a =\r\nfile, and they get sent, and after the job is finished/terminated, they&#39;re =\r\ndumped into a file, too. So I suppose everything works now.\n&gt; &gt;\n&gt; &gt; But now=\r\n I was more interested in setting cookies dynamically, in the code, not usi=\r\nng the config files, as I have integrated heritrix into my application. So =\r\nI have a custom SeedModule, which basically reads seeds from a database and=\r\n schedules them with heritrix. Because the seeds could have active cookies =\r\nbound to them, I dynamically try to add the cookies into the cookieStore. F=\r\nor that, I have autowired the AbstractCookieStore, and before I add the see=\r\nd, I put the cookie that comes with it into the store:\n&gt; &gt; getCookieStore()=\r\n.getCookiesMap().put(cookie.getSortKey(), cookie);\n&gt; &gt;\n&gt; &gt; However, it does=\r\nn&#39;t get sent and I was wondering why..\n&gt; &gt;\n&gt; &gt; Would really appreciate any =\r\ncomments and/or suggestions! Or at least let me know how I can debug it.\n&gt; =\r\n&gt;\n&gt; &gt; progre55\n&gt; &gt;\n&gt; &gt; --- In archive-crawler@yahoogroups.com, Noah Levitt&lt;=\r\nnlevitt@&gt;  wrote:\n&gt; &gt;&gt;\n&gt; &gt;&gt; Hello progre55,\n&gt; &gt;&gt;\n&gt; &gt;&gt; Thanks for reporting =\r\nthis issue. It should be fixed now, along with related problems. It would a=\r\nppear that the cookie loading/saving functionality had never even been trie=\r\nd. :( https://webarchive.jira.com/browse/HER-1914\n&gt; &gt;&gt;\n&gt; &gt;&gt; Also while look=\r\ning at this issue it became apparent that cookies were not being sent at al=\r\nl, in both h1 and h3, since a commit in February. That should be fixed now =\r\nas well in svn. https://webarchive.jira.com/browse/HER-1913\n&gt; &gt;&gt;\n&gt; &gt;&gt; You&#39;l=\r\nl want to get the latest code from svn (or the latest snapshot from the bui=\r\nld box). If you can confirm that cookie handling works as expected after th=\r\nese changes, that would be very helpful.\n&gt; &gt;&gt;\n&gt; &gt;&gt; Noah\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt; On 2=\r\n011-07-26 05:22 , progre55 wrote:\n&gt; &gt;&gt;&gt; Hi guys,\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; I&#39;ve been play=\r\ning around with H3, and noticed that loading cookies from a file doesn&#39;t re=\r\nally work. When tried analyzing the code, I found out that the loadCookies(=\r\n) method reads the file, but doesn&#39;t store the cookies read. Here is the me=\r\nthod in original form, and as you can see, Cookie objects are created, but =\r\nnot put into the SortedMap:\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt;       public static void loadCookie=\r\ns(String cookiesFile,\n&gt; &gt;&gt;&gt;               SortedMap&lt;String,Cookie&gt;   result=\r\n) {\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt;           // Do nothing if cookiesFile is not specified.\n&gt; =\r\n&gt;&gt;&gt;           if (cookiesFile =3D=3D null || cookiesFile.length()&lt;=3D 0) {\n=\r\n&gt; &gt;&gt;&gt;               return;\n&gt; &gt;&gt;&gt;           }\n&gt; &gt;&gt;&gt;           RandomAccessF=\r\nile raf =3D null;\n&gt; &gt;&gt;&gt;           try {\n&gt; &gt;&gt;&gt;               raf =3D new Ran=\r\ndomAccessFile(cookiesFile, &quot;r&quot;);\n&gt; &gt;&gt;&gt;               String[] cookieParts;\n=\r\n&gt; &gt;&gt;&gt;               String line;\n&gt; &gt;&gt;&gt;               Cookie cookie =3D null=\r\n;\n&gt; &gt;&gt;&gt;               while ((line =3D raf.readLine()) !=3D null) {\n&gt; &gt;&gt;&gt;  =\r\n                 // Line that starts with # is commented line, therefore sk=\r\nip it.\n&gt; &gt;&gt;&gt;                   if (!line.startsWith(&quot;#&quot;)) {\n&gt; &gt;&gt;&gt;          =\r\n             cookieParts =3D line.split(&quot;&#92;&#92;t&quot;);\n&gt; &gt;&gt;&gt;                      =\r\n if (cookieParts.length =3D=3D 7) {\n&gt; &gt;&gt;&gt;                           // Crea=\r\nte cookie with not expiration date (-1 value).\n&gt; &gt;&gt;&gt;                       =\r\n    // TODO: add this as an option.\n&gt; &gt;&gt;&gt;                           cookie =\r\n=3D new Cookie(cookieParts[0], cookieParts[5],\n&gt; &gt;&gt;&gt;                       =\r\n            cookieParts[6], cookieParts[2], -1, Boolean\n&gt; &gt;&gt;&gt;              =\r\n                             .valueOf(cookieParts[3]).booleanValue());\n&gt; &gt;&gt;=\r\n&gt;\n&gt; &gt;&gt;&gt;                           if (cookieParts[1].toLowerCase().equals(&quot;=\r\ntrue&quot;)) {\n&gt; &gt;&gt;&gt;                               cookie.setDomainAttributeSpec=\r\nified(true);\n&gt; &gt;&gt;&gt;                           } else {\n&gt; &gt;&gt;&gt;                =\r\n               cookie.setDomainAttributeSpecified(false);\n&gt; &gt;&gt;&gt;            =\r\n               }\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt;                           LOGGER.fine(&quot;Adding =\r\ncookie: &quot;\n&gt; &gt;&gt;&gt;                                           + cookie.toExtern=\r\nalForm());\n&gt; &gt;&gt;&gt;                       }\n&gt; &gt;&gt;&gt;                   }\n&gt; &gt;&gt;&gt;   =\r\n            }\n&gt; &gt;&gt;&gt;           } catch (FileNotFoundException e) {\n&gt; &gt;&gt;&gt;    =\r\n           LOGGER.log(Level.WARNING,&quot;Could not find file: &quot; + cookiesFile, =\r\ne);\n&gt; &gt;&gt;&gt;           } catch (IOException e) {\n&gt; &gt;&gt;&gt;               LOGGER.lo=\r\ng(Level.WARNING,e.getMessage(), e);\n&gt; &gt;&gt;&gt;           } finally {\n&gt; &gt;&gt;&gt;      =\r\n         ArchiveUtils.closeQuietly(raf);\n&gt; &gt;&gt;&gt;           }\n&gt; &gt;&gt;&gt;       }\n&gt; =\r\n&gt;&gt;&gt;\n&gt; &gt;&gt;&gt; Or am I missing something here? I have just checked out heritrix =\r\n3 from this svn url https://archive-crawler.svn.sourceforge.net/svnroot/arc=\r\nhive-crawler/trunk/heritrix3/ and hope it&#39;s the right place.\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; Re=\r\ngards,\n&gt; &gt;&gt;&gt; progre55\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; -----------------------------=\r\n-------\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; Yahoo! Groups Links\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n=\r\n&gt; &gt;\n&gt; &gt; ------------------------------------\n&gt; &gt;\n&gt; &gt; Yahoo! Groups Links\n&gt; =\r\n&gt;\n&gt; &gt;\n&gt; &gt;\n&gt;\n\n\n\n"}}