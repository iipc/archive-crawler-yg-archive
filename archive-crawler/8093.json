{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":473207283,"authorName":"Kristinn Sigur√∞sson","from":"=?iso-8859-1?Q?Kristinn_Sigur=F0sson?= &lt;kristinn@...&gt;","profile":"kristsi25","replyTo":"LIST","senderId":"t1szNRalisYbLNs377wEjJKTvtZAVt66vUoeg6Zft6EBG4R6tOyJdRrEUnC1daHrVslNQe3F_mTmHpYZrwDNhRh8EmXpxDLXFdcINgXZUrdZbcQAsnnXjPu30ceWp2pu7BMmeEcWbmAV","spamInfo":{"isSpam":false,"reason":"12"},"subject":"RE: [archive-crawler] Extractors communicating with CandidateChain processors...","postDate":"1368626561","msgId":8093,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PEU0ODZEOTNFMzcyRDhDNDI4MkU4REYwNzgzOTJGMTJEOTkwNzNDQGJsaWtpLmJva2hsYWRhLmxvY2FsPg==","inReplyToHeader":"PDUxOTE5Q0MzLjMwNDA1MDJAYXJjaGl2ZS5vcmc+","referencesHeader":"PEU0ODZEOTNFMzcyRDhDNDI4MkU4REYwNzgzOTJGMTJEOThFMjM5QGJsaWtpLmJva2hsYWRhLmxvY2FsPiA8QjNGOEU4NUItODAxQy00MDVGLThBOTctQzVFMjdDMjk2OUMxQGFyY2hpdmUub3JnPiA8Q0FBLXo3MEtXdjlCOF9VaGtzRD1GZ2tXQ3RYWVNUekVFWlhZanBjSEc4SjNzNTJ0UmNnQG1haWwuZ21haWwuY29tPiA8NkU5NDE1MzctRDAyOS00RDNELTk0NTctNjFDRTQwQjg2NTQzQGFyY2hpdmUub3JnPiA8RTQ4NkQ5M0UzNzJEOEM0MjgyRThERjA3ODM5MkYxMkQ5OEVDNUVAYmxpa2kuYm9raGxhZGEubG9jYWw+IDw1MTkxOUNDMy4zMDQwNTAyQGFyY2hpdmUub3JnPg=="},"prevInTopic":8085,"nextInTopic":0,"prevInTime":8092,"nextInTime":8094,"topicId":8073,"numMessagesInTopic":8,"msgSnippet":"Yes, I had noticed the outCandidates but its purpose (as opposed to outLinks) was unclear and not documented. Seeing as almost all Links become CrawlURIs it","rawEmail":"Return-Path: &lt;kristinn@...&gt;\r\nX-Sender: kristinn@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 19634 invoked by uid 102); 15 May 2013 14:03:10 -0000\r\nX-Received: from unknown (HELO mtaq5.grp.bf1.yahoo.com) (10.193.84.36)\n  by m9.grp.bf1.yahoo.com with SMTP; 15 May 2013 14:03:10 -0000\r\nX-Received: (qmail 4693 invoked from network); 15 May 2013 14:03:09 -0000\r\nX-Received: from unknown (HELO vala.bok.hi.is) (130.208.186.10)\n  by mtaq5.grp.bf1.yahoo.com with SMTP; 15 May 2013 14:03:09 -0000\r\nX-Received: from bliki.bokhlada.local (bliki.bok.hi.is [130.208.186.6])\n\tby vala.bok.hi.is (8.13.8/8.13.8) with ESMTP id r4FE32Tu006996\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Wed, 15 May 2013 14:03:03 GMT\r\nX-Received: from BLIKI.bokhlada.local ([2002:82d0:ba06::82d0:ba06]) by\n bliki.bokhlada.local ([2002:82d0:ba06::82d0:ba06]) with mapi id\n 14.01.0438.000; Wed, 15 May 2013 14:02:41 +0000\r\nTo: &quot;archive-crawler@yahoogroups.com&quot; &lt;archive-crawler@yahoogroups.com&gt;\r\nThread-Topic: [archive-crawler] Extractors communicating with CandidateChain\n processors...\r\nThread-Index: Ac5NnW3rN0O2rBlOSxGtxBx1B8TMgAADkBoAAAIu8oAAAsPOgACLkTxQABaRW4AASm+40A==\r\nDate: Wed, 15 May 2013 14:02:41 +0000\r\nMessage-ID: &lt;E486D93E372D8C4282E8DF078392F12D99073C@...&gt;\r\nReferences: &lt;E486D93E372D8C4282E8DF078392F12D98E239@...&gt;\n &lt;B3F8E85B-801C-405F-8A97-C5E27C2969C1@...&gt;\n &lt;CAA-z70KWv9B8_UhksD=FgkWCtXYSTzEEZXYjpcHG8J3s52tRcg@...&gt;\n &lt;6E941537-D029-4D3D-9457-61CE40B86543@...&gt;\n &lt;E486D93E372D8C4282E8DF078392F12D98EC5E@...&gt;\n &lt;51919CC3.3040502@...&gt;\r\nIn-Reply-To: &lt;51919CC3.3040502@...&gt;\r\nAccept-Language: en-US, is-IS\r\nContent-Language: en-US\r\nX-MS-Has-Attach: \r\nX-MS-TNEF-Correlator: \r\nContent-Type: text/plain; charset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nMIME-Version: 1.0\r\nX-Spam-Status: No, score=0.0 required=4.6 tests=none autolearn=disabled\n\tversion=3.3.1\r\nX-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on gleipnir.rhi.hi.is\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: =?iso-8859-1?Q?Kristinn_Sigur=F0sson?= &lt;kristinn@...&gt;\r\nSubject: RE: [archive-crawler] Extractors communicating with CandidateChain\n processors...\r\nX-Yahoo-Group-Post: member; u=473207283; y=Pz3I3vsqf1aUzpkofUJkwIHExQi2Bz0Kg5Kb5z0ffSV44MJV\r\nX-Yahoo-Profile: kristsi25\r\n\r\nYes, I had noticed the outCandidates but its purpose (as opposed to outLink=\r\ns) was unclear and not documented.\n\nSeeing as almost all Links become Crawl=\r\nURIs it seems obvious that we should just do away with the Link class.\n\nI o=\r\npened a ticket on that (HER-2039) and assigned it to myself (my first HER t=\r\nicket in nearly six years :) and sketched out how this could be done on a b=\r\nranch in my fork of H3 (https://github.com/kris-sigur/heritrix3/tree/HER-20=\r\n39).\n\nThe CrawlURI, despite the length of its class, does not contain much =\r\ndata when first created. And since most Links become CrawlURI anyway this s=\r\nhouldn&#39;t have any effect on memory use and might actually help a bit with p=\r\nerformance since we aren&#39;t needlessly creating an intermediate object.\n\nInt=\r\nerestingly, some of the extractor code wound up marginally cleaner (but tha=\r\nt could have been accomplished anyway be creating better helper methods).\n\n=\r\nIt compiles and passes the unit tests. A test crawl didn&#39;t turn up anything=\r\n funny. But given how much code it affects, I&#39;m not recommending it for inc=\r\nlusion unless someone has time to vet it.\n\nThe helper methods could also st=\r\nand additional scrutiny. I went for minimal changes, but I think there is m=\r\nore that could be done to clean up exactly how out links are created.\n\nLast=\r\nly, given the impact on the codebase, this may not be the right time for su=\r\nch refactoring.\n\n- Kris\n\n\n-------------------------------------------------=\r\n------------------------\nLandsb=F3kasafn =CDslands - H=E1sk=F3lab=F3kasafn =\r\n| Arngr=EDmsg=F6tu 3 - 107 Reykjav=EDk\nS=EDmi/Tel: +354 5255600 | www.lands=\r\nbokasafn.is\n---------------------------------------------------------------=\r\n----------\nfyrirvari/disclaimer - http://fyrirvari.landsbokasafn.is\n&gt; -----=\r\nOriginal Message-----\n&gt; From: archive-crawler@yahoogroups.com [mailto:archi=\r\nve-\n&gt; crawler@yahoogroups.com] On Behalf Of Gordon Mohr\n&gt; Sent: 14. ma=ED 2=\r\n013 02:09\n&gt; To: archive-crawler@yahoogroups.com\n&gt; Subject: Re: [archive-cra=\r\nwler] Extractors communicating with\n&gt; CandidateChain processors...\n&gt;\n&gt;\n&gt;\n&gt; =\r\nAnother option: some refactoring recently done in HER-2031 allows\n&gt; earlier=\r\n processors to add configured CrawlURIs directly to the\n&gt; triggering/origin=\r\n CrawlURI&#39;s outCandidates (rather than just a Link\n&gt; in outLinks which is l=\r\nater turned into a full CrawlURI).\n&gt;\n&gt; For example, this new possibility is=\r\n used in\n&gt; FormLoginProcessor.createFormSubmissionAttempt.\n&gt;\n&gt; The original=\r\n Link/CrawlURI split was intended to defer creating the\n&gt; larger CrawlURIs =\r\nunless definitely needed, and until after an\n&gt; alternate base-URI for derel=\r\nativization might be set. It might not be\n&gt; important to maintain the separ=\r\nate representations, especially if\n&gt; CrawlURI could be slimmed a bit, since=\r\n now every Link does become a\n&gt; CrawlURI before scoping. OTOH, maybe a sepa=\r\nrate thinner\n&gt; representation of a Link is still helpful. (I&#39;d need to thin=\r\nk a bunch\n&gt; more to have a strong opinion on whether unification would be\n&gt;=\r\n worthwhile...)\n&gt;\n&gt; - Gordon\n&gt;\n&gt; On 5/13/13 8:26 AM, Kristinn Sigur=F0sson =\r\nwrote:\n&gt; &gt; Yes, adding a data map to Link would really solve this quite\n&gt; t=\r\nhoroughly.\n&gt; &gt;\n&gt; &gt; I sketched out how it might work in my H3 fork. See\n&gt; &gt; =\r\nhttps://github.com/kris-\n&gt; sigur/heritrix3/commit/7c5b2ceb005ea9ba02cd0a6\n&gt;=\r\n &gt; 57578514c3caee080\n&gt; &gt;\n&gt; &gt; - Kris\n&gt; &gt;\n&gt; &gt; P.S. Its seems really odd that =\r\nLink and CrawlURI do not belong to\n&gt; the same package. Would have made this=\r\n easier.\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; ------------------------------------------------------=\r\n----\n&gt; &gt; Landsb=F3kasafn =CDslands - H=E1sk=F3lab=F3kasafn | Arngr=EDmsg=F6=\r\ntu 3 - 107\n&gt; &gt; Reykjav=EDk\n&gt; &gt; S=EDmi/Tel: +354 5255600 | www.landsbokasafn=\r\n.is\n&gt; &gt; ----------------------------------------------------------\n&gt; &gt; fyri=\r\nrvari/disclaimer - http://fyrirvari.landsbokasafn.is\n&gt; &gt;&gt; -----Original Mes=\r\nsage-----\n&gt; &gt;&gt; From: archive-crawler@yahoogroups.com\n&gt; &gt;&gt; &lt;mailto:archive-c=\r\nrawler%40yahoogroups.com&gt;  [mailto:archive-\n&gt; &gt;&gt; crawler@yahoogroups.com &lt;m=\r\nailto:crawler%40yahoogroups.com&gt; ] On\n&gt; &gt;&gt; Behalf Of Adam Miller\n&gt; &gt;&gt; Sent:=\r\n 10. ma=ED 2013 20:47\n&gt; &gt;&gt; To: archive-crawler@yahoogroups.com\n&gt; &gt;&gt; &lt;mailto=\r\n:archive-crawler%40yahoogroups.com&gt;\n&gt; &gt;&gt; Subject: Re: [archive-crawler] Ext=\r\nractors communicating with\n&gt; &gt;&gt; CandidateChain processors...\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt;=\r\n\n&gt; &gt;&gt; That sounds very useful to me. It&#39;s better than abusing the\n&gt; context=\r\n\n&gt; &gt;&gt; field for every possible case where someone would want to tag\n&gt; &gt;&gt; so=\r\nmething onto a URI\n&gt; &gt;&gt;\n&gt; &gt;&gt; ~Adam\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt; On May 10, 2013, at =\r\n12:27 PM, Noah Levitt &lt;nlevitt@...\n&gt; &gt;&gt; &lt;mailto:nlevitt%40archive.o=\r\nrg&gt; &gt;\n&gt; &gt;&gt; wrote:\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt; It sounds like we have two use c=\r\nases for adding a &quot;flexible\n&gt; dynamic\n&gt; &gt;&gt; attributes list&quot; like CrawlURI.d=\r\nata to\n&gt; &gt;&gt; org.archive.modules.extractor.Link\n&gt; &gt;&gt; . Would be very cheap f=\r\nor the common case where it&#39;s not used.\n&gt; &gt;&gt; Would you guys agree that that=\r\n&#39;s the preferred solution?\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt; Noah\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt; On Fri, =\r\nMay 10, 2013 at 11:25 AM, Adam Miller &lt;adam@...\n&gt; &gt;&gt; &lt;mailto:adam%4=\r\n0archive.org&gt; &gt; wrote:\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt; I have used a custom ViaCon=\r\ntext, to annotate a URL for later\n&gt; &gt;&gt; detection in the processor chain. Th=\r\nis required creating a custom\n&gt; &gt;&gt; decide rule to check the context.\n&gt; &gt;&gt;\n&gt;=\r\n &gt;&gt; An example of this can be seen here:\n&gt; &gt;&gt; https://github.com/adam-\n&gt; &gt;&gt;=\r\n miller/ExternalBrowserExtractorHTML\n&gt; &gt;&gt;\n&gt; &gt;&gt; Decide Rule: https://github.=\r\ncom/adam-\n&gt; &gt;&gt;\n&gt; miller/ExternalBrowserExtractorHTML/blob/master/src/main/j=\r\nava/org/arc\n&gt; &gt;&gt; hive/modules/deciderules/ViaContextMatchesRegexDecideRule.=\r\njava\n&gt; &gt;&gt;\n&gt; &gt;&gt; An example from ExternalBrowserExtractorHtml.java which gets=\r\n\n&gt; &gt;&gt; &#39;processLink()&#39; from ExtractorHtml\n&gt; &gt;&gt;\n&gt; &gt;&gt; processLink(curi,json.ge=\r\ntString(&quot;url&quot;),&quot;=3DBROWSER_MISC&quot;.toString\n&gt; &gt;&gt; ());\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt; ~Adam Mi=\r\nller\n&gt; &gt;&gt;\n&gt; &gt;&gt; On May 10, 2013, at 9:43 AM, Kristinn Sigur=F0sson\n&gt; &gt;&gt; &lt;kri=\r\nstinn@... &lt;mailto:kristinn%40landsbokasafn.is&gt; &gt;\n&gt; wrote:\n&gt; &gt;&gt;=\r\n\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt; I have an extractor that needs to be able to mark up e=\r\nxtracted\n&gt; URLs\n&gt; &gt;&gt; so that a processor in the candidates chain knows how =\r\nto handle\n&gt; them.\n&gt; &gt;&gt;\n&gt; &gt;&gt; The only options I see is to have the extractor=\r\n create a CrawlURI\n&gt; &gt;&gt; itself and add it to the OutCandidates list rather =\r\nthan OutLinks\n&gt; or\n&gt; &gt;&gt; write all the markup into the parent curi&#39;s data ma=\r\np and retrieve\n&gt; it\n&gt; &gt;&gt; using the curi.getFullVia() once in the candidate =\r\nchain.\n&gt; &gt;&gt;\n&gt; &gt;&gt; The latter option feels like a royal hack and the former a=\r\nlso\n&gt; feels a\n&gt; &gt;&gt; bit iffy, so I&#39;m asking if there a recommended or establ=\r\nished way\n&gt; of\n&gt; &gt;&gt; doing this?\n&gt; &gt;&gt;\n&gt; &gt;&gt; Best,\n&gt; &gt;&gt; Kris\n&gt; &gt;&gt;\n&gt; &gt;&gt; -------=\r\n------------------------------------------\n&gt; &gt;&gt; ---------\n&gt; &gt;&gt;\n&gt; &gt;&gt; Landsb=\r\n=F3kasafn =CDslands - H=E1sk=F3lab=F3kasafn | Arngr=EDmsg=F6tu 3 - 107\n&gt; &gt;&gt;=\r\n Reykjav=EDk\n&gt; &gt;&gt; S=EDmi/Tel: +354 5255600 &lt;tel:%2B354%205255600&gt; |\n&gt; www.l=\r\nandsbokasafn.is\n&gt; &gt;&gt; &lt;http://www.landsbokasafn.is/&gt;\n&gt; &gt;&gt; ------------------=\r\n-------------------------------\n&gt; &gt;&gt; ---------\n&gt; &gt;&gt;\n&gt; &gt;&gt; fyrirvari/disclaim=\r\ner -\n&gt; &gt;&gt; http://fyrirvari.landsbokasafn.is\n&gt; &gt;&gt; &lt;http://fyrirvari.landsbok=\r\nasafn.is/&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; --=\r\n----------------------------------\n&gt; &gt;\n&gt; &gt; Yahoo! Groups Links\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n=\r\n&gt;\n&gt;\n&gt; \n\n"}}