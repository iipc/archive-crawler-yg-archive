{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"lSN8Gb-SSa8Fmv9ehOPHfgPMAM6YaXt4zbTnJ7ThzGuWQZmny5zklVjTfEPKqut0Ax7erRRBmu-0OMlCZhIazERVe7t87Ws","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] Bandwidth Utilization","postDate":"1287423981","msgId":6775,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDRDQkM4N0VELjUwOTAyMDlAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PDRDQkM1MDlELjMwMTAxMDNAYmliYWxleC5vcmc+","referencesHeader":"PDRDQkFFRTNELjIwODAyMDRAYmliYWxleC5vcmc+IDw0Q0JCQjZGMi42MDYwMzA1QGFyY2hpdmUub3JnPiA8NENCQzUwOUQuMzAxMDEwM0BiaWJhbGV4Lm9yZz4="},"prevInTopic":6774,"nextInTopic":6776,"prevInTime":6774,"nextInTime":6776,"topicId":6771,"numMessagesInTopic":5,"msgSnippet":"... Yes -- chiefly in the RAM dimension. Even with nothing else running on the machines, you d probably want to use an object heap of no more than about 750MB","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 55736 invoked from network); 18 Oct 2010 17:46:23 -0000\r\nX-Received: from unknown (66.196.94.105)\n  by m11.grp.re1.yahoo.com with QMQP; 18 Oct 2010 17:46:23 -0000\r\nX-Received: from unknown (HELO relay01.pair.com) (209.68.5.15)\n  by mta1.grp.re1.yahoo.com with SMTP; 18 Oct 2010 17:46:23 -0000\r\nX-Received: (qmail 17290 invoked from network); 18 Oct 2010 17:46:22 -0000\r\nX-Received: from 67.188.34.83 (HELO silverbook.local) (67.188.34.83)\n  by relay01.pair.com with SMTP; 18 Oct 2010 17:46:22 -0000\r\nX-pair-Authenticated: 67.188.34.83\r\nMessage-ID: &lt;4CBC87ED.5090209@...&gt;\r\nDate: Mon, 18 Oct 2010 10:46:21 -0700\r\nUser-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.9) Gecko/20100915 Thunderbird/3.1.4\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nCc: Youssef Eldakar &lt;youssef.eldakar@...&gt;\r\nReferences: &lt;4CBAEE3D.2080204@...&gt; &lt;4CBBB6F2.6060305@...&gt; &lt;4CBC509D.3010103@...&gt;\r\nIn-Reply-To: &lt;4CBC509D.3010103@...&gt;\r\nContent-Type: text/plain; charset=windows-1252; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] Bandwidth Utilization\r\nX-Yahoo-Group-Post: member; u=137285340; y=A-Ne1p1XHBlzX9pmRqRNETbUUEzqXznWEWi_t2eQ8jLf\r\nX-Yahoo-Profile: gojomo\r\n\r\nOn 10/18/10 6:50 AM, Youssef Eldakar wrote:\n&gt; Thanks, Gordon, for such an extensive reply. Will go through the list\n&gt; and post back.\n&gt;\n&gt; The machines we have been running this on are Intel Core2 Duos (2 cores)\n&gt; @ 2.20 GHz, and each has only a gigabyte of RAM. I guess we have been\n&gt; setting the parameters a bit too high for that type of hardware\n&gt; configuration, right?\n\nYes -- chiefly in the RAM dimension. Even with nothing else running on \nthe machines, you&#39;d probably want to use an object heap of no more than \nabout 750MB (&quot;-Xmx750m&quot; as a JVM parameter), leaving ~20% for the JVM&#39;s \nnative overhead. (We tend to use ~1700m heap on 2GB machines, and ~3GB \non 4GB machines, though these are just &quot;OK from experience&quot; rather than \nrigorously-deduced. The real goal is to avoid any swapping.)\n\n From the object heap, by default up to 60% off-the-top gets used by the \nBerkeleyDB-JE cache. This can be reduced, but as it provides the \nspillover storage for all crawler queues and the already-seen URI set, \nit&#39;s good to leave it with the default unless you swap in a different \nset (UriUniqFilter).\n\nWith the remaining heap, a small bit becomes fixed overhead of a running \ncrawl, and the rest is available for worker threads as they process URIs \nin turn. Even though most URIs should take much less RAM to process, I \nprefer there to be ~3MB-~10MB of object heap space, after the BDB cache, \nper ToeThread. So you may want to run with ~30-~100 threads rather than \n300 on your current configuration. (With your  current RAM limit I \nwouldn&#39;t increase the &quot;recorder-in-buffer-bytes&quot; very much, but \nsomething between than the H1 default of 64K, and the H3 default of \n512K, may still help a little if disk IO to &#39;scratch&#39; is at all a \nbottleneck.)\n\nAlso: Java objects take more space in a 64bit JVM than in a 32bit JVM. \n(One old estimate I heard was that for a typical app the same object mix \nmight take 40% more space in a 64bit JVM: so a 700MB 64bit heap is \neffectively only as roomy as a 500MB 32bit heap.) A feature of the very \nlatest JVMs -- &#39;CompressedOops&#39; -- is supposed to help, but AFAIK it can \nstill make sense to prefer a 32bit OS/JVM if your machine has 2GB or \nless of RAM (and maybe 4GB or less).\n\n From your order.xml, it seemed you have at least 4 independent disks -- \n/0 /1 /2/ /3 -- which is very much like the IA configuration (even \nthough more would help). Spreading the IO out as evenly as possible -- \nthe main sources of IO in the crawler are writing to the W/ARC \ndirectories, a lesser amount of reading/writing to the &#39;scratch&#39; and \n&#39;state&#39; directories, and a little writing to the &#39;logs&#39; directory -- helps.\n\nBest of luck and let me know any other questions,\n\n- Gordon @ IA\n\n"}}