{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":163406187,"authorName":"kristsi25","from":"&quot;kristsi25&quot; &lt;kris@...&gt;","profile":"kristsi25","replyTo":"LIST","senderId":"V1Z3Fh0rMIFrJ65L-vEzbm1ST7ox7bSl9l2uzQAEXO4OCsgvV_mICHTqjate3iBRQaMrQ9CRMPB5MfSIJQMimkY8YDid","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: H3: Changing queue budgets in sheet overlays during a crawl","postDate":"1281520640","msgId":6668,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PGkzdHM2MCtrY2pzQGVHcm91cHMuY29tPg==","inReplyToHeader":"PDRDNjFFOUIzLjIwNTAwMDhAYXJjaGl2ZS5vcmc+"},"prevInTopic":6667,"nextInTopic":0,"prevInTime":6667,"nextInTime":6669,"topicId":6660,"numMessagesInTopic":3,"msgSnippet":"... Neither one of these seems to precisely address the issue. Perhaps the reconsiderRetiredQueues() could include refreshing the queue budget values? Or just","rawEmail":"Return-Path: &lt;kris@...&gt;\r\nX-Sender: kris@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 91935 invoked from network); 11 Aug 2010 09:57:35 -0000\r\nX-Received: from unknown (98.137.34.44)\n  by m3.grp.sp2.yahoo.com with QMQP; 11 Aug 2010 09:57:35 -0000\r\nX-Received: from unknown (HELO n38b.bullet.mail.sp1.yahoo.com) (66.163.168.152)\n  by mta1.grp.sp2.yahoo.com with SMTP; 11 Aug 2010 09:57:35 -0000\r\nX-Received: from [69.147.65.171] by n38.bullet.mail.sp1.yahoo.com with NNFMP; 11 Aug 2010 09:57:22 -0000\r\nX-Received: from [98.137.34.35] by t13.bullet.mail.sp1.yahoo.com with NNFMP; 11 Aug 2010 09:57:22 -0000\r\nDate: Wed, 11 Aug 2010 09:57:20 -0000\r\nTo: archive-crawler@yahoogroups.com\r\nMessage-ID: &lt;i3ts60+kcjs@...&gt;\r\nIn-Reply-To: &lt;4C61E9B3.2050008@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nFrom: &quot;kristsi25&quot; &lt;kris@...&gt;\r\nSubject: Re: H3: Changing queue budgets in sheet overlays during a crawl\r\nX-Yahoo-Group-Post: member; u=163406187; y=pCypL_GUWvA_w33TxmULy9fCeT5LUYYEq_0n4McNkgq1bzZ7\r\nX-Yahoo-Profile: kristsi25\r\n\r\n\n\n&gt; There are some issues with the &#39;liveness&#39; of mid-crawl \n&gt; budget/retire=\r\nment- status changes; the current approach doesn&#39;t \n&gt; necessarily compare v=\r\nalues at the right times. Not yet sure of the best fix, but the issue is on=\r\n my radar.\n&gt; Some related JIRA issues are:\n&gt; \n&gt; https://webarchive.jira.com=\r\n/browse/HER-1768\n&gt; https://webarchive.jira.com/browse/HER-747\n\nNeither one =\r\nof these seems to precisely address the issue. Perhaps the\nreconsiderRetire=\r\ndQueues() could include refreshing the queue budget values?\nOr just add a r=\r\neapplyQueueBudgets() method to the frontier so  that an operator can at lea=\r\nst deal with these occurances?\n\n&gt; \n&gt; &gt; The reason this needed to be done wa=\r\ns because some urls with the &quot;protocol&quot;\n&gt; prefix &#39;p://&#39; got erroneously add=\r\ned to the crawl.\n&gt; &gt;\n&gt; &gt; The baseline queue budget is very limited but a sh=\r\neet overlay is \n&gt; &gt; used to remove limits for http://(is, and https://(is, =\r\nalong with a \n&gt; &gt; few select others. When the p:// urls came up they lowere=\r\nd the \n&gt; &gt; budget again as they did not match the association. (Perhaps the=\r\n \n&gt; &gt; SurtAuthorityQueueAssignmentPolicy should hang on to the protocol \n&gt; =\r\n&gt; part in the queue name?)\n&gt; &gt;\n&gt; &gt; This issue has also got me wondering if =\r\nit would be possible to have \n&gt; &gt; such\n&gt; associations that applied to all p=\r\nrotocols? Indeed, it would seem more \n&gt; logical to me for that to be the no=\r\nrm.\n&gt; \n&gt; The fact that groupings-into-queues and qroupings-for-overlay-sett=\r\nings \n&gt; are not identical can lead to problems in a number of places -- mos=\r\nt \n&gt; acutely here\n&gt; -- because the whole queue is treated according to the =\r\noverlay \n&gt; settings of the most recent URI used for settings-context, and (=\r\ndue to \n&gt; the above issue) the queue-comparisons may linger beyond when the=\r\ny should.\n\nI&#39;m thinking that the SurtAuthorityQueueAssignmentPolicy should =\r\nkeep the protocol as part of the queue name. I know that leads to issues as=\r\n the queue name needs to be safe for filenames, but that seeems surmountabl=\r\ne.\n\n&gt; Addressing the above &#39;liveness&#39; issue might help a bit; the budget \n&gt;=\r\n would self-correct as soon as the next &#39;real&#39; URI&#39;s settings are considere=\r\nd.\n&gt; \n&gt; Also, ensuring different (especially unknown) protocol URIs don&#39;t l=\r\nand \n&gt; in the same http(s) queue would reduce the triggering situations for=\r\n \n&gt; settings divergence.\n&gt; \n&gt; A protocol-agnostic overlay, as you suggest, =\r\nis worth considering but \n&gt; I&#39;ll have to think more about the implementatio=\r\nn details. Another \n&gt; possibility might be overlays that are addressed at q=\r\nueue-groupings, \n&gt; rather than just SURT prefixes, for precision with regar=\r\nd to queue/frontier values.\n&gt; \n&gt; Can you file an issue highlighting this &quot;p=\r\n://&quot; issue and how it \n&gt; essentially clobbered the desired queue settings f=\r\nor real URIs?\n\nDone. https://webarchive.jira.com/browse/HER-1806\n\n- Kris\n\n\n=\r\n\n"}}