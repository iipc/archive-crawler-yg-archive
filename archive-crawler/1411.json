{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr (@Internet Archive)","from":"&quot;Gordon Mohr (@Internet Archive)&quot; &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"ZWKfT9wDenfddk_qDODnkBD1aXf6FzzNKBOkNifoM2H3FMauK4sQYngpFUwkas8QoktkmR3lvR7cuIJH4gySnL5-1RauEM4qHtwHuN0lRA5Od2Pxi6DBm4M-bzwz","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] 1.3.0 threads in postselector","postDate":"1106551666","msgId":1411,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQxRjRBMzcyLjYwOTA2MDRAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGNzc2gwMStkNG4wQGVHcm91cHMuY29tPg==","referencesHeader":"PGNzc2gwMStkNG4wQGVHcm91cHMuY29tPg=="},"prevInTopic":1407,"nextInTopic":1412,"prevInTime":1410,"nextInTime":1412,"topicId":1402,"numMessagesInTopic":6,"msgSnippet":"Something does sound amiss. After checking the logs for suspicious output, Stack s suggestion of looking at a Java thread dump is always the best way to get a","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 86585 invoked from network); 24 Jan 2005 07:28:39 -0000\r\nReceived: from unknown (66.218.66.218)\n  by m22.grp.scd.yahoo.com with QMQP; 24 Jan 2005 07:28:39 -0000\r\nReceived: from unknown (HELO ia00524.archive.org) (207.241.224.172)\n  by mta3.grp.scd.yahoo.com with SMTP; 24 Jan 2005 07:28:39 -0000\r\nReceived: (qmail 6579 invoked by uid 100); 24 Jan 2005 07:12:28 -0000\r\nReceived: from adsl-66-124-227-241.dsl.snfc21.pacbell.net (HELO ?10.0.10.13?) (gojomo@...@66.124.227.241)\n  by mail-dev.archive.org with SMTP; 24 Jan 2005 07:12:28 -0000\r\nMessage-ID: &lt;41F4A372.6090604@...&gt;\r\nDate: Sun, 23 Jan 2005 23:27:46 -0800\r\nUser-Agent: Mozilla Thunderbird 1.0 (X11/20041206)\r\nX-Accept-Language: en-us, en\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;cssh01+d4n0@...&gt;\r\nIn-Reply-To: &lt;cssh01+d4n0@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-Spam-DCC: : \r\nX-Spam-Checker-Version: SpamAssassin 2.63 (2004-01-11) on ia00524.archive.org\r\nX-Spam-Level: *\r\nX-Spam-Status: No, hits=1.9 required=6.5 tests=AWL,RCVD_IN_DYNABLOCK,\n\tRCVD_IN_SORBS autolearn=no version=2.63\r\nX-eGroups-Remote-IP: 207.241.224.172\r\nFrom: &quot;Gordon Mohr (@Internet Archive)&quot; &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] 1.3.0 threads in postselector\r\nX-Yahoo-Group-Post: member; u=137285340\r\nX-Yahoo-Profile: gojomo\r\n\r\nSomething does sound amiss.\n\nAfter checking the logs for suspicious output, Stack&#39;s suggestion of looking\nat a Java thread dump is always the best way to get a better idea of where\na misbehaving Java app is spending its time (or hung).\n\nHowever, since you say you&#39;ve got a large seed list, what kind of\nCrawlScope are you using?\n\nThe original options (PathScope, HostScope, and the default DomainScope)\nall do an iteration through the entire seed-list-derived list of\nacceptable URL-patterns to decide if a newly-discovered URL can be\nruled in. With a 75K seed list, that inefficiency really hurts, and\nthe stack dump may show most of your threads in *Scope checking.\n\nThe newer, non-default SurtPrefixScope can more-or-less simulate all\nthose original scopes, much more efficiently. A binary search through a\nsorted list of acceptable &#39;surt&#39; prefixes rules URLs in or out with\nfar fewer comparisons.\n\n&#39;Surts&#39; are URLs that have had their domain name reordered for more\nconvenient sorting/matching, given the hierarchical nature of the\nURL-space. For example:\n\n    http://www.archive.org\n\n...becomes...\n\n    http://(org,archive,www,)\n\nYou can hand-craft surts if you&#39;d like, but you can also just let your\nseed list URLs implicitly define the acceptable surt prefixes for\ndiscovered URLs -- the &#39;import-seeds-as-surts&#39; option on SurtPrefixScope,\nenabled by default. (You can also dump the created surts to a file to\nsee what&#39;s being used behind the scenes.)\n\nMore info is in the documentation at...\n\n   http://crawler.archive.org/articles/user_manual.html#scopes\n\n...and the linked Wiki pages for more details about surts.\n\n- Gordon @ IA\n\ngsellek wrote:\n&gt; \n&gt; Hello,\n&gt; \n&gt; I&#39;m a newbie testing out heritrix for a new project.  I have used \n&gt; 1.2.0 but found the OOM errors to be a bit of a roadblock.  So, I \n&gt; have downloaded and compiled 1.3.0 and am using the bdb.  This seems \n&gt; to have eliminated my oom errors, but performance is very poor.\n&gt; \n&gt; I have loaded up 75,000 seeds into my seed list (after setting up \n&gt; the job but before running it).  The box is a dual 3.06 P4 w/ 2 GB \n&gt; of ram.  I have tested this on SUSE Ent 9 and RHES 3.0 w/ java 1.4.  \n&gt; I seem to be crawling about 5-10 pages per second w/ 100 threads.  \n&gt; What&#39;s wierd though is that my CPU and disk are not maxed out.  It \n&gt; looks like there&#39;s plenty of resources to spare, but I can&#39;t get it \n&gt; to crawl faster.  Decreasing or increasing the threads makes it \n&gt; worse.  There is plenty of bandwidth available too.\n&gt; \n&gt; Anyway, I noticed that most of the threads are sitting in the \n&gt; postselector in a ABOUT_TO_BEGIN_PROCESSOR state.  Is this normal?  \n&gt; Is this my bottleneck?\n&gt; \n&gt; Any help and/or advice would be great.\n&gt; \n&gt; Thanks,\n&gt; Greg\n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt;  \n&gt; Yahoo! Groups Links\n&gt; \n&gt; \n&gt; \n&gt;  \n&gt; \n&gt; \n&gt; \n\n\n"}}