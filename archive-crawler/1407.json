{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":168599281,"authorName":"stack","from":"stack &lt;stack@...&gt;","profile":"stackarchiveorg","replyTo":"LIST","senderId":"5aQHVetWsU4xOY5ey4pPvlRsBaWR_wtg5yfYsMGaYFE_d2To6M-1ec1R3K8GF6dAYjYW1gGh5a6E6MuoMMfIVA","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] 1.3.0 threads in postselector","postDate":"1106442197","msgId":1407,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQxRjJGN0Q1LjUwMzA1MDRAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGNzc2gwMStkNG4wQGVHcm91cHMuY29tPg==","referencesHeader":"PGNzc2gwMStkNG4wQGVHcm91cHMuY29tPg=="},"prevInTopic":1405,"nextInTopic":1411,"prevInTime":1406,"nextInTime":1408,"topicId":1402,"numMessagesInTopic":6,"msgSnippet":"... Yeah.  We ve seen what you describe above where we re bottlenecked and don t max out CPU/i/o (See this report where we played with number of threads and","rawEmail":"Return-Path: &lt;stack@...&gt;\r\nX-Sender: stack@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 98968 invoked from network); 23 Jan 2005 01:00:52 -0000\r\nReceived: from unknown (66.218.66.218)\n  by m24.grp.scd.yahoo.com with QMQP; 23 Jan 2005 01:00:52 -0000\r\nReceived: from unknown (HELO dns.duboce.net) (63.203.238.114)\n  by mta3.grp.scd.yahoo.com with SMTP; 23 Jan 2005 01:00:51 -0000\r\nReceived: from archive.org ([192.168.1.105])\n\t(authenticated)\n\tby dns-eth1.duboce.net (8.10.2/8.10.2) with ESMTP id j0N0BbR00331\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Sat, 22 Jan 2005 16:12:02 -0800\r\nMessage-ID: &lt;41F2F7D5.5030504@...&gt;\r\nDate: Sat, 22 Jan 2005 17:03:17 -0800\r\nUser-Agent: Mozilla/5.0 (Macintosh; U; PPC Mac OS X Mach-O; en-US; rv:1.7b) Gecko/20040421\r\nX-Accept-Language: en-us, en\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;cssh01+d4n0@...&gt;\r\nIn-Reply-To: &lt;cssh01+d4n0@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Remote-IP: 63.203.238.114\r\nFrom: stack &lt;stack@...&gt;\r\nSubject: Re: [archive-crawler] 1.3.0 threads in postselector\r\nX-Yahoo-Group-Post: member; u=168599281\r\nX-Yahoo-Profile: stackarchiveorg\r\n\r\ngsellek wrote:\n\n&gt;\n&gt; Hello,\n&gt;\n&gt; I&#39;m a newbie testing out heritrix for a new project.  I have used\n&gt; 1.2.0 but found the OOM errors to be a bit of a roadblock.  So, I\n&gt; have downloaded and compiled 1.3.0 and am using the bdb.  This seems\n&gt; to have eliminated my oom errors, but performance is very poor.\n&gt;\n&gt; I have loaded up 75,000 seeds into my seed list (after setting up\n&gt; the job but before running it).  The box is a dual 3.06 P4 w/ 2 GB\n&gt; of ram.  I have tested this on SUSE Ent 9 and RHES 3.0 w/ java 1.4. \n&gt; I seem to be crawling about 5-10 pages per second w/ 100 threads. \n&gt; What&#39;s wierd though is that my CPU and disk are not maxed out.  It\n&gt; looks like there&#39;s plenty of resources to spare, but I can&#39;t get it\n&gt; to crawl faster.  Decreasing or increasing the threads makes it\n&gt; worse.  There is plenty of bandwidth available too.\n&gt;\n&gt; Anyway, I noticed that most of the threads are sitting in the\n&gt; postselector in a ABOUT_TO_BEGIN_PROCESSOR state.  Is this normal? \n&gt; Is this my bottleneck?\n\nYeah.  We&#39;ve seen what you describe above where we&#39;re bottlenecked and \ndon&#39;t max out CPU/i/o (See this report where we played with number of \nthreads and ARC Writers: \nhttp://crawler.archive.org/cgi-bin/wiki.pl?ThreadsFrontierWriterComparisons).  \nLast time we took a close look -- \nhttp://crawler.archive.org/cgi-bin/wiki.pl?BroadCrawlProfilingReport -- \nthe Frontier was different and Heritrix tended to bottleneck on the \nFrontier (Postselector is trying to add newly-discovered URLs to the \nFrontier).  I&#39;m guessing something similar is going on exacerbated by \nthe large number of seeds you&#39;re using to start your crawl.\n\nYou might try a crawl using less seeds.\n\n(We can also bottleneck on the writing of ARCs if insufficent CPU to \nkeep up with the gzipping.  This doesn&#39;t seem to be your problem.)\n\nIf you have a moment, it&#39;d be interesting to get a couple of thread \ndumps from the application when its bound up. A thread dump will give a \nmore precise picture of where threads are hung up than the UI thread \nreport.   To get a thread dump, do a &#39;% kill -SIGQUIT PID&#39; where PID is \nthe first java process in a tree view of the java process if \nlinuxthreads -- i.e. a process shows per java thread -- or if NPTL, the \nPID of the java process.  The thread dumps should show in \nheritrix_out.log.  Just send the whole thing over.\n\nThanks for the above,\nSt.Ack\n\n\n&gt;\n&gt; Any help and/or advice would be great.\n&gt;\n&gt; Thanks,\n&gt; Greg\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; ------------------------------------------------------------------------\n&gt; *Yahoo! Groups Links*\n&gt;\n&gt;     * To visit your group on the web, go to:\n&gt;       http://groups.yahoo.com/group/archive-crawler/\n&gt;        \n&gt;     * To unsubscribe from this group, send an email to:\n&gt;       archive-crawler-unsubscribe@yahoogroups.com\n&gt;       &lt;mailto:archive-crawler-unsubscribe@yahoogroups.com?subject=Unsubscribe&gt;\n&gt;        \n&gt;     * Your use of Yahoo! Groups is subject to the Yahoo! Terms of\n&gt;       Service &lt;http://docs.yahoo.com/info/terms/&gt;.\n&gt;\n&gt;\n\n\n"}}