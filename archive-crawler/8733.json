{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"xqcMQGmTVQGW9XGTDTfRrvH7TNrodoaDnQBz2g6QlgFVgWxd8i8cyR67Hxd1lurTredfd0bL_CY2-KZ-cHJUQoZbOacrOwk","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] Thread three-way deadlock on wakeQueues","postDate":"1439488952","msgId":8733,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDU1Q0NEQkI4LjcwMTA2MDhAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PG1xaHJmbysxc2E5anJ1QFlhaG9vR3JvdXBzLmNvbT4=","referencesHeader":"PG1xaHJmbysxc2E5anJ1QFlhaG9vR3JvdXBzLmNvbT4="},"prevInTopic":8732,"nextInTopic":0,"prevInTime":8732,"nextInTime":8734,"topicId":8732,"numMessagesInTopic":2,"msgSnippet":"Are you sure it s a true deadlock, and not some other pathologically slow state? If three threads are blocked at the exact same spot, it d be useful to know","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 11809 invoked by uid 102); 13 Aug 2015 18:02:34 -0000\r\nX-Received: from unknown (HELO mtaq2.grp.bf1.yahoo.com) (10.193.84.33)\n  by m16.grp.bf1.yahoo.com with SMTP; 13 Aug 2015 18:02:34 -0000\r\nX-Received: (qmail 5061 invoked from network); 13 Aug 2015 18:02:34 -0000\r\nX-Received: from unknown (HELO mta1004.groups.mail.bf1.yahoo.com) (98.139.245.163)\n  by mtaq2.grp.bf1.yahoo.com with SMTP; 13 Aug 2015 18:02:34 -0000\r\nX-Original-Return-Path: &lt;gojomo@...&gt;\r\nX-Received-SPF: softfail (transitioning domain of archive.org does not designate 209.68.5.15 as permitted sender)\r\nX-YMailISG: mZ9irYkWLDvG0AqQuM72zqyfKks1NbRS_GT2NbOUKT9HbGY.\n _2dy7TrnwVZMrN2HZ5Uq6fBeSTEetHF2ShbI_FzX.A2NXP.m5D8.02XRNsYF\n Dm5bkKZYPKdlVCpAs_05q6IWBR6Ac.bkoXGER8oSCupExJ23MdKR45KzdMkx\n iU8hEpuy8_Q5Ot1uQ0azVniLzm6DpNApLhDv9ltfnWX5NUWl64yq2KRdcOMC\n E7jwx2DrP7TU8m50S6wpw_O44Cr9PCQV8900dAAfbGlm1QP1wcmoKnl6bMj1\n 3i0xG.IJiIcJLcSJYkTwebeIXtx4Zkq_j0eLnsfZAbq9hvNRfahp.r4z4HbL\n zOWCcTi2jA9mY7fcnEONb.vAbPiFxlADEI_h0bMDoDrN5JMrfXUY0lM9QXsV\n 0CXstwpz306r_mihHaccrqRcBngjmJezpFK5FSNG6XGPJmA.yRWKdgWkXJP.\n XRLENG9C1jaxgVYAif990oipxNBWNSJTcjYo1Nj2z_kvfg_LN9qUtWiWsYMK\n ByF0r.OGVVnxxxaGUxEbxR2rQiYYTLXEOyr0eIj2kul0dqCrWnQvPKGQfc5S\n rLT2XP5ptfPBsx3kyOojBwjLZfLRqFAGUrLMY2RwcH6Bp96r0irJwxH6enPM\n EUmE1KK6OPB0W4pJeaq2Bk2U_iUS3vtvzq6FDssXU5V1lM0IXhlrSNciCKfE\n ZkylWwKBKvPeGnDfAhobHqsvnut78gbIePXsA4UWCzHbtLnCirll7qR5bV1d\n 37FFjML37BKemnVeUXqbjVyz6DC6TpMsqsH8kJt3meJEwYI175WmY8quZi7C\n UzA03tbCmkYXNmUYVKTx6vs06B0bCYFiNPR_hYu.8PiBzuEA1gs0orWk5tle\n o6ee4iR7QUf_rXK1ZoK2BSnJCd5HPGzWmRrJiEDUuFjGoi8nrgv0QY4BWdRs\n _iiyqEiHxOoG2hale9HQ5vq4ih1y7m8r1ZoaIGpLG0Cb7dJm8UljzXSBhnai\n P1hC5OpQnCbmV0Us6kXZnY2EQCfj_ckhTlZw4fiY6ER7MgrIaxWTg.E5DKlv\n Gow.pbGtHIQLV_qTIdJkQ7DFxAtuxnd16xZ1ZTDh.06.mJtEUeYq3mFwvSif\n sDRV19opzpPm.2KQsXmZrb96VxNsP7oxzCBMd9dLXgBEuk0RpsWMRRDXduFj\n B67xdr6u2DQRghTTgXWKk00.GQk.2Upyx3y5i7H.tu9gNOOV2xJAhRdEoeIo\n CIEyTBDcFuYHXOXnGm1kvH0YJVWGugZRAY5MmyEz_UsPEHKr2aOjFNEi9BH6\n 8kkRKGnCA4qUSEHMJaezONSLyw--\r\nAuthentication-Results: mta1004.groups.mail.bf1.yahoo.com  from=archive.org; domainkeys=neutral (no sig);  from=archive.org; dkim=neutral (no sig)\r\nX-Received: from 127.0.0.1  (HELO relay01.pair.com) (209.68.5.15)\n  by mta1004.groups.mail.bf1.yahoo.com with SMTP; Thu, 13 Aug 2015 18:02:34 +0000\r\nX-Received: (qmail 93557 invoked by uid 0); 13 Aug 2015 18:02:33 -0000\r\nX-Received: from 70.36.143.241 (HELO probook.local) (70.36.143.241)\n  by relay01.pair.com with SMTP; 13 Aug 2015 18:02:33 -0000\r\nX-pair-Authenticated: 70.36.143.241\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;mqhrfo+1sa9jru@...&gt;\r\nMessage-ID: &lt;55CCDBB8.7010608@...&gt;\r\nDate: Thu, 13 Aug 2015 11:02:32 -0700\r\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.10; rv:38.0)\n Gecko/20100101 Thunderbird/38.1.0\r\nMIME-Version: 1.0\r\nIn-Reply-To: &lt;mqhrfo+1sa9jru@...&gt;\r\nContent-Type: text/plain; charset=utf-8; format=flowed\r\nContent-Transfer-Encoding: 8bit\r\nSubject: Re: [archive-crawler] Thread three-way deadlock on wakeQueues\r\nX-Yahoo-Group-Post: member; u=137285340; y=mCXl6E1lElYUUyaABggZgjsy5Rza-DGyLuHAm0CCz5xB\r\nX-Yahoo-Profile: gojomo\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\n\r\nAre you sure it&#39;s a true deadlock, and not some other pathologically \nslow state?\n\nIf three threads are blocked at the exact same spot, it&#39;d be useful to \nknow what other thread holds the lock they all want.\n\nBut also, the thread you&#39;ve excerpted has only been in its current state \nfor &lt;8 seconds â€“ so doesn&#39;t appear to have been blocked for long.\n\n- Gordon\n\nOn 8/13/15 3:28 AM, anjackson@... [archive-crawler] wrote:\n&gt;\n&gt;\n&gt; Hi All,\n&gt;\n&gt; We&#39;ve ended up with a three-thread deadlock in a H3 crawl that turns up\n&gt; as we try to restart from a checkpoint.  Each thread is waiting for a\n&gt; lock held by one of the others, in a loop (see thread-dump below - all\n&gt; three threads are stuck at the same point - WorkQueueFrontier.java:882).\n&gt;\n&gt; [ToeThread #219:\n&gt;   -no CrawlURI-\n&gt;      WAITING for 7s856ms\n&gt;      step: ABOUT_TO_GET_URI for 7s856ms\n&gt; Java Thread State: BLOCKED\n&gt; Blocked/Waiting On: org.archive.bdb.BdbModule$2@1929f54f which is owned by ToeThread #94: (203)   org.archive.crawler.frontier.WorkQueueFrontier.wakeQueues(WorkQueueFrontier.java:882)\n&gt; ...\n&gt;\n&gt; The crawler was brought down by running out of file handles on the 11th\n&gt; of August. We are trying to restart based on checkpoint from the 9th.\n&gt;\n&gt; Any ideas?  I guess we&#39;ll just have to trash the queues and restart?\n&gt;\n&gt; Thanks,\n&gt; Andy Jackson (UK Web Archive)\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; \n\n"}}