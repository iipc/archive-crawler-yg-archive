{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"kHgxCdcBFff73fWftKoZdrUD4ULAH9J0mEwQpwMvM9fFNYutww_0lzsUv3KnM3_xZQx1nNOjh_sfz6PL9Za6NmBLX1FtAVc","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: [archive-crawler] Heritrix Crawl - All threads stuck in very long waiting state in Archiver","postDate":"1313202654","msgId":7278,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDRFNDVFMURFLjMwMTAyMDBAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGoyNGZ1ZSsyNzIxQGVHcm91cHMuY29tPg==","referencesHeader":"PGoyNGZ1ZSsyNzIxQGVHcm91cHMuY29tPg=="},"prevInTopic":7277,"nextInTopic":0,"prevInTime":7277,"nextInTime":7279,"topicId":7277,"numMessagesInTopic":2,"msgSnippet":"Are there any alerts or errors shown in the heritrix_out.log? Are any of the threads *not* in FairGenericObjectPool.borrowObject? (Usually, threads only wait","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 59150 invoked from network); 13 Aug 2011 02:31:01 -0000\r\nX-Received: from unknown (98.137.34.45)\n  by m8.grp.sp2.yahoo.com with QMQP; 13 Aug 2011 02:31:01 -0000\r\nX-Received: from unknown (HELO relay02.pair.com) (209.68.5.16)\n  by mta2.grp.sp2.yahoo.com with SMTP; 13 Aug 2011 02:31:01 -0000\r\nX-Received: (qmail 85380 invoked by uid 0); 13 Aug 2011 02:30:59 -0000\r\nX-Received: from 76.218.213.38 (HELO silverbook.local) (76.218.213.38)\n  by relay02.pair.com with SMTP; 13 Aug 2011 02:30:59 -0000\r\nX-pair-Authenticated: 76.218.213.38\r\nMessage-ID: &lt;4E45E1DE.3010200@...&gt;\r\nDate: Fri, 12 Aug 2011 19:30:54 -0700\r\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:5.0) Gecko/20110624 Thunderbird/5.0\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;j24fue+2721@...&gt;\r\nIn-Reply-To: &lt;j24fue+2721@...&gt;\r\nContent-Type: text/plain; charset=windows-1252; format=flowed\r\nContent-Transfer-Encoding: 8bit\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] Heritrix Crawl - All threads stuck in very\n long waiting state in Archiver\r\nX-Yahoo-Group-Post: member; u=137285340; y=eoGuitTDIHMYjri35GElI82s2Pti1rKSma9J3GxKPsyJ\r\nX-Yahoo-Profile: gojomo\r\n\r\nAre there any alerts or errors shown in the heritrix_out.log?\n\nAre any of the threads *not* in FairGenericObjectPool.borrowObject? \n(Usually, threads only wait there because other threads already have the \ncapped number of writers.)\n\nIf none, than previous borrow must not have returned properly. (Perhaps \na disk-full situation?) There should be evidence in the logs.\n\nIf a few threads are somewhere else � essentially past line 141 of \nARCWriterProcessor.write, holding the pooled writer instances � then \nwhatever they&#39;re doing (or waiting for themselves) is the culprit.\n\nThere shouldn&#39;t be anything they do that takes an unbounded amount of \ntime... but at times long ago, when JVM/linux threading was flakier, \nI&#39;ve seen threads hung indefinitely because a necessary signal was lost. \n(I doubt that&#39;s the case here, but when it was you could sometimes kick \nthe threads back to life by connecting with gdb or using other low-level \ntricks.)\n\n- Gordon\n\nOn 8/12/11 5:19 PM, vinoth_amaranathan wrote:\n&gt;\n&gt;\n&gt; Hi\n&gt;\n&gt; I ran heritrix 1.14.4 on a 64 bit JVM with heap of 16gb, i got the\n&gt; following rates. The crawl rate was good for 3.5 hours (120 avg) after\n&gt; that the crawl stopped completely and all threads are in waiting state\n&gt; for a long time.\n&gt;\n&gt; I got the following rates of crawl. It crawled 1.1 million urls in 3 .5\n&gt; hrs (No OOMs)\n&gt;\n&gt; timestamp discovered queued downloaded doc/s(avg) KB/s(avg) dl-failures\n&gt; busy-thread mem-use-KB heap-size-KB congestion max-depth avg-depth\n&gt;\n&gt; 2011-08-12T15:33:47Z 68098 60588 7612 126.92(126.87)14489(14489) 2 98\n&gt; 3353343 6432640 1.91 956 310\n&gt;\n&gt; 2011-08-12T15:34:47Z 137525 122730 14894 121.32(124.12)14670(14579) 2 99\n&gt; 996253 6492352 1.87 1756 619\n&gt;\n&gt; 2011-08-12T15:35:47Z 210561 189160 21509 110.27(119.49)13208(14122) 2 96\n&gt; 4455033 6495744 1.86 2590 960\n&gt;\n&gt; 2011-08-12T15:36:47Z 274720 245819 29010 125(120.88)15101(14367) 2 100\n&gt; 5456271 6497024 1.94 3405 1229\n&gt;\n&gt; 2011-08-12T15:37:47Z 340950 304999 36061 117.57(120.2)14646(14423) 2 99\n&gt; 1411327 6441472 1.81 4195 1548\n&gt;\n&gt; 2011-08-12T15:38:48Z 411730 368858 42963 114.98(119.34)13847(14327) 2\n&gt; 100 4523060 6491200 1.96 4931 1862\n&gt;\n&gt; 2011-08-12T15:39:48Z 483925 435355 48674 95.2(115.89)12925(14127) 2 99\n&gt; 4311643 6367808 1.94 5466 2176\n&gt;\n&gt; 2011-08-12T15:40:48Z 546863 490813 56150 124.58(116.98)15073(14245) 2 99\n&gt; 6165072 6440320 1.95 6236 2466\n&gt;\n&gt; 2011-08-12T15:41:48Z 615016 552346 62781 110.52(116.26)14668(14292) 2 99\n&gt; 1228053 6440448 1.84 6923 2775\n&gt;\n&gt; 2011-08-12T15:42:48Z 680394 610504 69998 120.28(116.66)15054(14368) 2 96\n&gt; 2494743 6440384 1.94 7722 3114\n&gt;\n&gt; -------\n&gt;\n&gt; 2011-08-12T18:06:50Z          7626048          6504711            1121482        68.07(121.35)8422(15037)                          2                      100          11252456            13016832                  1.94              98234              32523\n&gt;\n&gt; 2011-08-12T18:07:50Z          7626048          6504711            1121482                0(120.56)      0(14940)                          2                      100          11252732&\n&gt;   nbsp;          13016832                        2              98234              32523\n&gt;\n&gt; 2011-08-12T18:08:50Z          7626048          6504711            1121482                0(119.79)      0(14844)                          2                      100          11253005            13016832                        2              98234              32523\n&gt;\n&gt; 2011-08-12T18:09:50Z          7626048          6504711&n\n&gt;   bsp;          1121482                0(119.03)      0(14749)                          2                      100          11253278            13016832                        2              98234              32523\n&gt;\n&gt; 2011-08-12T18:10:50Z          7626048          6504711            1121482                0(118.27)      0(14656)                          2                      100          11253551          13016832\n&gt;   ;            2              98234              32523\n&gt;\n&gt; 2011-08-12T18:30:50Z          7626048          6504711            1121482                0(104.99)      0(13009)                          2                      100          11259014            13016832                        2              98234              32523\n&gt;\n&gt; 2011-08-12T18:31:50Z          7626048          6504711            1121482            &\n&gt;   nbsp;    0(104.4)      0(12937)                          2                      100          11261662            13016832                        2              98234              32523\n&gt;\n&gt; 2011-08-12T18:32:50Z          7626048          6504711            1121482                0(103.82)      0(12865)                          2                      100          11261938            13016832                        2\n&gt;   ; 98234              32523\n&gt;\n&gt; 2011-08-12T18:33:50Z          7626048          6504711            1121482                0(103.25)      0(12794)                          2                      100          11262211            13016832                        2              98234              32523\n&gt;\n&gt; 2011-08-12T18:34:50Z          7626048          6504711            1121482                0(102.68)      0(12724)          &n\n&gt;   bsp;              2                      100          11262484            13016832                        2              98234              32523\n&gt;\n&gt; after that the crawled stopped completely as you can see in red. But\n&gt; there are busy threads doing nothing but waiting for object lock to be\n&gt; released. 100 Total threads; 100 Active threads; ; *100 Archiver*\n&gt;\n&gt; Job being crawled: eBayMotors_PA\n&gt;\n&gt;   Number of toe threads in pool: 100 (100 active)\n&gt;\n&gt;       ToeThread #1\n&gt;\n&gt; [ToeThread #1:http://motors.shop.ebay.com/Aviation-Parts-/26435/i.html?Part%2520Type=Engines&rt=nc&LH_BIN=1&_dmpt=Motors_Aviation_Parts_Gear&_frs=1&_ipg=49&_mqf=0&_qfkw=1&_trksid=p4506.c0.m301  &lt;http://motors.shop.ebay.com/Aviation-Parts-/26435/i.html?Part%2520Type=Engines&rt=nc&LH_BIN=1&_dmpt=Motors_Aviation_Parts_Gear&_frs=1&_ipg=49&_mqf=0&_qfkw=1&_trksid=p4506.c0.m301&gt;\n&gt;\n&gt;   CrawlURIhttp://motors.shop.ebay.com/Aviation-Parts-/26435/i.html?Part%2520Type=Engines&rt=nc&LH_BIN=1&_dmpt=Motors_Aviation_Parts_Gear&_frs=1&_ipg=49&_mqf=0&_qfkw=1&_trksid=p4506.c0.m301  &lt;http://motors.shop.ebay.com/Aviation-Parts-/26435/i.html?Part%2520Type=Engines&rt=nc&LH_BIN=1&_dmpt=Motors_Aviation_Parts_Gear&_frs=1&_ipg=49&_mqf=0&_qfkw=1&_tr\n&gt;   ksid=p4506.c0.m301&gt;  LLLLLhttp://motors.shop.ebay.com/Aviation-Parts-/26435/i.html?Part%20Type=Engines&_trkparms=65%3A12%7C39%3A3%7C72%3A5433&rt=nc&_dmpt=Motors_Aviation_Parts_Gear&_frs=1&_ipg=49&_mqf=0&_qfkw=1&_trksid=p4506.c0.m245.l1514  &lt;http://motors.shop.ebay.com/Aviation-Parts-/26435/i.html?Part%20Type=Engines&_trkparms=65%3A12%7C39%3A3%7C72%3A5433&rt=nc&_dmpt=Motors_Aviation_Parts_Gear&_frs=1&_ipg=49&_mqf=0&_qfkw=1&_trksid=p4506.c0.m245.l1514&gt;        0 attempts\n&gt;\n&gt;         in processor: Archiver\n&gt;\n&gt;         ACTIVE for 15m55s92ms\n&gt;\n&gt;         step: ABOUT_TO_BEGIN_PROCESSOR for 15m54s180ms\n&gt;\n&gt;         java.lang.Object.wait(Native Method)\n&gt;\n&gt;         org.apache.commons.pool.impl.FairGenericObjectPool.borrowObject(FairGenericObjectPool.java:240)\n&gt;\n&gt;         org.archive.io.WriterPool.borrowFile(WriterPool.java:139)\n&gt;\n&gt;         org.archive.crawler.writer.ARCWriterProcessor.write(ARCWriterProcessor.java:141)\n&gt;\n&gt;         org.archive.crawler.writer.ARCWriterProcessor.innerProcess(ARCWriterProcessor.java:125)\n&gt;\n&gt;         org.archive.crawler.framework.Processor.process(Processor.java:109)\n&gt;\n&gt; There are still active queues with an average of 32523 work items to\n&gt; process. I suspect the bottle neck @ archiver here. The CPU shot up to\n&gt; 92% when the crawl was busy but when it fell down to zero the CPU is\n&gt; less than 1% and the JVM heap is at 10GB used out of 16gb.\n&gt;\n&gt; Frontier report &lt;http://10.254.50.168:9090/reports/frontier.jsp&gt;\n&gt; 201 queues: 149 active (100 in-process; 49 ready; 0 snoozed); 51\n&gt; inactive; 0 retired; 1 exhausted\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; \n\n"}}