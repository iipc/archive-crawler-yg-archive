{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"H-nKD_McMG61w_I0-PuQEAlS4ug6E0MOssYzL2cTUpxh0cUaaLMYMjbX3HN5suvvT5wlt0UJgv5lt1h57BS36GCN2nga7E8","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: [archive-crawler] Re: H3: Crawl progress halted, ConcurrantModificationException","postDate":"1282171044","msgId":6685,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDRDNkM2MEE0LjEwNjA3MDVAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGk0MXZ1ays2bTZqQGVHcm91cHMuY29tPg==","referencesHeader":"PGk0MXZ1ays2bTZqQGVHcm91cHMuY29tPg=="},"prevInTopic":6678,"nextInTopic":6687,"prevInTime":6684,"nextInTime":6686,"topicId":6676,"numMessagesInTopic":5,"msgSnippet":"Checkpoints should be much faster in H3 -- and definitely not trigger any ConcurrentModificationExceptions. If you can dig up representative deeper stacks from","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 23139 invoked from network); 18 Aug 2010 22:37:25 -0000\r\nX-Received: from unknown (66.196.94.107)\n  by m16.grp.re1.yahoo.com with QMQP; 18 Aug 2010 22:37:25 -0000\r\nX-Received: from unknown (HELO relay03.pair.com) (209.68.5.17)\n  by mta3.grp.re1.yahoo.com with SMTP; 18 Aug 2010 22:37:25 -0000\r\nX-Received: (qmail 52491 invoked from network); 18 Aug 2010 22:37:24 -0000\r\nX-Received: from 208.70.27.190 (HELO silverbook.local) (208.70.27.190)\n  by relay03.pair.com with SMTP; 18 Aug 2010 22:37:24 -0000\r\nX-pair-Authenticated: 208.70.27.190\r\nMessage-ID: &lt;4C6C60A4.1060705@...&gt;\r\nDate: Wed, 18 Aug 2010 15:37:24 -0700\r\nUser-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.8) Gecko/20100802 Thunderbird/3.1.2\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nCc: kristsi25 &lt;kris@...&gt;\r\nReferences: &lt;i41vuk+6m6j@...&gt;\r\nIn-Reply-To: &lt;i41vuk+6m6j@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] Re: H3: Crawl progress halted, ConcurrantModificationException\r\nX-Yahoo-Group-Post: member; u=137285340; y=FMbMbfaG_QP57iEUDo1Gp1R0s8Bw-lkVOSH925C669bd\r\nX-Yahoo-Profile: gojomo\r\n\r\nCheckpoints should be much faster in H3 -- and definitely not trigger \nany ConcurrentModificationExceptions. If you can dig up representative \ndeeper stacks from the exceptions in the _out.log, and attach to a new \nissue, I&#39;ll try to figure out what might have happened.\n\n- Gordon @ IA\n\nOn 8/12/10 4:26 PM, kristsi25 wrote:\n&gt; On further digging I&#39;ve concluded that the most likely culprit was a scheduled checkpoint. Seems like the threads are being stopped as the finish the fetch chain (extractorSwf is at the end and my custom processor can trigger the rest to be skipped) and the timing roughly fits.\n&gt;\n&gt; The ConcurrantModificationException is most likely unrelated.\n&gt;\n&gt; Still no idea as to WHY this occurred.\n&gt;\n&gt; - Kris\n&gt;\n&gt; --- In archive-crawler@yahoogroups.com, &quot;kristsi25&quot;&lt;kris@...&gt;  wrote:\n&gt;&gt;\n&gt;&gt; I observed the following exception in the job log about an hour into a large crawl using Heritrix 3.0.0:\n&gt;&gt;\n&gt;&gt; ---\n&gt;&gt;\n&gt;&gt; 2010-08-12T10:05:44.300Z SEVERE Problem java.util.ConcurrentModificationException occured when trying to process &#39;http://www.kerhraun.is/index.php?option=com_content&view=article&id=23:varnir-vie-innkeyrsluhlie&#39; at step ABOUT_TO_BEGIN_PROCESSOR in\n&gt;&gt;   (in thread &#39;ToeThread #68: http://www.kerhraun.is/index.php?option=com_content&view=article&id=23:varnir-vie-innkeyrsluhlie&#39;)\n&gt;&gt; 2010-08-12T10:05:44.301Z SEVERE Problem java.util.ConcurrentModificationException occured when trying to process &#39;http://www.heklaislandi.is/index.php?option=com_ahsshop&vara=594&Itemid=34&#39; at step ABOUT_TO_BEGIN_PROCESSOR in\n&gt;&gt;   (in thread &#39;ToeThread #18: http://www.heklaislandi.is/index.php?option=com_ahsshop&vara=594&Itemid=34&#39;)\n&gt;&gt; 2010-08-12T10:15:18.160Z SEVERE Problem java.util.ConcurrentModificationException occured when trying to process &#39;http://www.handtak.is/index.php?a=uview&user=106&brand=&&#39; at step ABOUT_TO_BEGIN_PROCESSOR in\n&gt;&gt;   (in thread &#39;ToeThread #46: http://www.handtak.is/index.php?a=uview&user=106&brand=&&#39;)\n&gt;&gt;\n&gt;&gt; ---\n&gt;&gt;\n&gt;&gt; This didn&#39;t seem to affect the crawl and I recalled seeing similar errors in another crawl that still runs well. I therefor allowed the crawl to continue normally.\n&gt;&gt;\n&gt;&gt; About 10 hours later however this crawl more or less ground to a halt. Of the 75 threads, only 2 were making progress with most of the others waiting to begin the extractorSwf and 10 waiting to begin a custom processor. Those threads appear deadlocked. ToeThread report snippet follows:\n&gt;&gt;\n&gt;&gt; ---\n&gt;&gt;\n&gt;&gt; [ToeThread #1: http://hvuttaklubburinn.hugi.is/spjall/viewtopic.php?p=13934\n&gt;&gt;   CrawlURI http://hvuttaklubburinn.hugi.is/spjall/viewtopic.php?p=13934 LLELLXL http://hvuttaklubburinn.hugi.is/spjall/viewtopic.php?t=1617    0 attempts\n&gt;&gt;      in processor: extractorSwf\n&gt;&gt;      ACTIVE for 1h27m29s413ms\n&gt;&gt;      step: ABOUT_TO_BEGIN_PROCESSOR for 1h27m29s296ms\n&gt;&gt; Java Thread State: WAITING\n&gt;&gt; Blocked/Waiting On: NONE\n&gt;&gt;      sun.misc.Unsafe.park(Native Method)\n&gt;&gt;      java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)\n&gt;&gt;      java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:811)\n&gt;&gt;      java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireShared(AbstractQueuedSynchronizer.java:941)\n&gt;&gt;      java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireShared(AbstractQueuedSynchronizer.java:1261)\n&gt;&gt;      java.util.concurrent.locks.ReentrantReadWriteLock$ReadLock.lock(ReentrantReadWriteLock.java:594)\n&gt;&gt;      org.archive.modules.DispositionChain.process(DispositionChain.java:54)\n&gt;&gt;      org.archive.crawler.framework.ToeThread.run(ToeThread.java:150)\n&gt;&gt; ]\n&gt;&gt; [ToeThread #2: http://www.byhistorie.dk/images/364_LU_header_lille.jpg\n&gt;&gt;   CrawlURI http://www.byhistorie.dk/images/364_LU_header_lille.jpg LLRE http://www.byhistorie.dk/    0 attempts\n&gt;&gt;      in processor: deduplicator\n&gt;&gt;      ACTIVE for 1h27m29s546ms\n&gt;&gt;      step: ABOUT_TO_BEGIN_PROCESSOR for 1h27m29s204ms\n&gt;&gt; Java Thread State: WAITING\n&gt;&gt; Blocked/Waiting On: NONE\n&gt;&gt;      sun.misc.Unsafe.park(Native Method)\n&gt;&gt;      java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)\n&gt;&gt;      java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:811)\n&gt;&gt;      java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireShared(AbstractQueuedSynchronizer.java:941)\n&gt;&gt;      java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireShared(AbstractQueuedSynchronizer.java:1261)\n&gt;&gt;      java.util.concurrent.locks.ReentrantReadWriteLock$ReadLock.lock(ReentrantReadWriteLock.java:594)\n&gt;&gt;      org.archive.modules.DispositionChain.process(DispositionChain.java:54)\n&gt;&gt;      org.archive.crawler.framework.ToeThread.run(ToeThread.java:150)\n&gt;&gt;\n&gt;&gt; ---\n&gt;&gt;\n&gt;&gt; These threads are representative of all the halted threads.\n&gt;&gt;\n&gt;&gt; Adding additional threads caused most of them to enter the same state, even after I disabled the SWF extractor.\n&gt;&gt;\n&gt;&gt; Other logs do not appear to contain any pertinent information.\n&gt;&gt;\n&gt;&gt; I doubt the crawl is recoverable but hints as to how this could be avoided in future crawls would be most welcome.\n&gt;&gt;\n&gt;&gt; - Kris\n&gt;&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; ------------------------------------\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n\n"}}