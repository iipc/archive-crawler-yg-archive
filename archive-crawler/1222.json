{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":168599281,"authorName":"stack","from":"stack &lt;stack@...&gt;","profile":"stackarchiveorg","replyTo":"LIST","senderId":"E9uGPI5TM2i6DCM9uyS1dyTANFLO9fjq1V-PkpJH5rgwBj3ET8uxTJTCZ6loIlQN-X6Ppc63npp1r6uS_GW8yw","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] Re: crawling the top 5 sports stories of the wpost","postDate":"1101320325","msgId":1222,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQxQTREMDg1LjEwNTAxMDJAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGNudGo0MStoN3U0QGVHcm91cHMuY29tPg==","referencesHeader":"PGNudGo0MStoN3U0QGVHcm91cHMuY29tPg=="},"prevInTopic":1214,"nextInTopic":1223,"prevInTime":1221,"nextInTime":1223,"topicId":1211,"numMessagesInTopic":11,"msgSnippet":"... I took a look.  Apart from the two JS-set cookies, TEST_P, and TEST_S, there are other interesting issues around WP login. The expiry date sent over by the","rawEmail":"Return-Path: &lt;stack@...&gt;\r\nX-Sender: stack@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 22461 invoked from network); 24 Nov 2004 18:25:34 -0000\r\nReceived: from unknown (66.218.66.166)\n  by m18.grp.scd.yahoo.com with QMQP; 24 Nov 2004 18:25:34 -0000\r\nReceived: from unknown (HELO ia00524.archive.org) (207.241.224.172)\n  by mta5.grp.scd.yahoo.com with SMTP; 24 Nov 2004 18:25:33 -0000\r\nReceived: (qmail 8929 invoked by uid 100); 24 Nov 2004 18:12:29 -0000\r\nReceived: from debord.archive.org (HELO ?207.241.238.140?) (stack@...@207.241.238.140)\n  by mail-dev.archive.org with SMTP; 24 Nov 2004 18:12:29 -0000\r\nMessage-ID: &lt;41A4D085.1050102@...&gt;\r\nDate: Wed, 24 Nov 2004 10:18:45 -0800\r\nUser-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.2) Gecko/20040820 Debian/1.7.2-4\r\nX-Accept-Language: en-us\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;cntj41+h7u4@...&gt;\r\nIn-Reply-To: &lt;cntj41+h7u4@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-Spam-DCC: : \r\nX-Spam-Checker-Version: SpamAssassin 2.63 (2004-01-11) on ia00524.archive.org\r\nX-Spam-Level: \r\nX-Spam-Status: No, hits=0.8 required=6.5 tests=AWL,CLICK_BELOW autolearn=no \n\tversion=2.63\r\nX-eGroups-Remote-IP: 207.241.224.172\r\nFrom: stack &lt;stack@...&gt;\r\nSubject: Re: [archive-crawler] Re: crawling the top 5 sports stories of the\n wpost\r\nX-Yahoo-Group-Post: member; u=168599281\r\nX-Yahoo-Profile: stackarchiveorg\r\n\r\nozimmels wrote:\n\n&gt;\n&gt; well - i have been workin on this for 2 weeks now.\n&gt; and .. nothing.\n&gt;\n&gt; to be honest - i&#39;m at the point where i&#39;m thinking of paying someone\n&gt; to descover how to do it.\n&gt;\n&gt; what ever i do - wpost always sends me to the registration page.\n&gt;\n&gt; i myself have written a prel crawler a couple of years ago and i used\n&gt; cookies from a mozilla cookie file.\n&gt;\n&gt; anyone interested in pursuing this ?\n&gt; maybe as a contract job ?\n&gt;\nI took a look.  Apart from the two JS-set cookies, TEST_P, and TEST_S, \nthere are other interesting issues around WP login.\n\nThe expiry date sent over by the washington post is beginning of the \nepoch.  The httpclient lib that underpins heritrix is choosing to treat \ncookies marked with this expiration date as &#39;expired&#39; which seems proper.\n\nHere are the set-cookie headers sent by the WP login page:\n\n1. Set-Cookie: TEST_P=; domain=.washingtonpost.com; expires=Thursday, \n01-Jan-1970 01:00:00 GMT; path=/\n2. Set-Cookie: TEST_S=; domain=.washingtonpost.com; expires=Thursday, \n01-Jan-1970 01:00:00 GMT; path=/\n3. Set-Cookie: \nUPROF=WU9CPTE5NjArRz1tYWxlK1pJUD05NDExNytVVD1leHBsaWNpdCtDPVVuaXRlZCBTdGF0ZXMrQj1QUk9GRVMrQj1FTkdOK0I9U09GVERFVitCPVNJWkVfMQ==; \ndomain=.washingtonpost.com; expires=Thursday, 01-Jan-1970 01:00:00 GMT; \npath=/\n4. Set-Cookie: UPDATED=1101314587; domain=.washingtonpost.com; \nexpires=Thursday, 01-Jan-1970 01:00:00 GMT; path=/\n5. Set-Cookie: wpniuser=stack@...; domain=.washingtonpost.com; \nexpires=Thursday, 01-Jan-1970 01:00:00 GMT; path=/\nNODATE,NODOMAIN BUT GETS RETURNED BY CRAWLER+++Set-Cookie: \nWebLogicSessionAc2=Bk6bKOkXvrj1aj0sF81Sd2RCmzF4j1B7g3t1ni1qSzcL3fdLrNd5!1390141459!-763422351; \npath=/+Set-Cookie: \nWPATC=A=1:D=3:C=2:E=JEBBH:S=8:S=245:B=7:B=29:B=78:B=100:VS=3; \ndomain=.washingtonpost.com; path=/\n6. Set-Cookie: \nWPATC=A=1:D=3:C=2:E=JEBBH:S=8:S=245:B=7:B=29:B=78:B=100:VS=3; \ndomain=.washingtonpost.com; expires=Saturday, 26-Jan-2008 02:29:46 GMT; \npath=/\n7. Set-Cookie: SESSIONREM=stack@...; domain=.washingtonpost.com; \npath=/\n\nHere is what the browser sends back when it goes against the \nwashingtonpost.com domain:\n\nCookie: \nUPROF=WU9CPTE5NjArRz1tYWxlK1pJUD05NDExNytVVD1leHBsaWNpdCtDPVVuaXRlZCBTdGF0ZXMrQj1QUk9GRVMrQj1FTkdOK0I9U09GVERFVitCPVNJWkVfMQ==; \nUPDATED=1101314409; SESSIONREM=stack@...; \nwpniuser=stack@...; \nWPATC=A=1:D=3:C=2:E=JEBBH:S=8:S=245:B=7:B=29:B=78:B=100:VS=3\n\nHere is what Heritrix sends back if its under the &#39;/ac&#39; path:\n\nCookie: SESSIONREM=stack@...; \nWPATC=A=1:D=3:C=2:E=JEBBH:S=8:S=245:B=7:B=29:B=78:B=100:VS=3\n\nHeritrix is missing the &#39;UPROF&#39;, &#39;UPDATED&#39;, and &#39;wpniuser&#39; cookie \nelements (Items 3., 4., and 5. above).  Notice that the expiration date \nset on these cookie elements is &#39;Thursday, 01-Jan-1970 01:00:00 GMT&#39;.  \nBrowsers seem to return cookies marked with this date as unexpired.  The \nhttpclient lib passes them over.\n\nThere&#39;s a configuration on the heritrix CookiePolicy to say whether \ncookie policy should be strict or browser compatible.   Heritrix has it \nset to browser compatible but looks like 1970 is a special date as far \nas browsers are concerned (Looking in httpclient lib source, there is no \nspecial handling for the 1970 date that I can see).  Anyone know \nanything about this?  Otherwise, time to look in browser src.\n\nI tried using the cookies file from the browser.  That got me further in \nthat the Heritrix &#39;cookie&#39; header looked more like the browsers but I&#39;m \nstill not getting in (Perhaps something to do with TEST_P and TEST_S).\nSt.Ack\n\n\n&gt; write to me.\n&gt; thanks.\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; --- In archive-crawler@yahoogroups.com, stack &lt;stack@a...&gt; wrote:\n&gt; &gt; ozimmels wrote:\n&gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt; i want to crawl the top 5 stories of wpost.com\n&gt; &gt; &gt;\n&gt; &gt; &gt; but of course wpost has login etc ...\n&gt; &gt; &gt;\n&gt; &gt; &gt; i&#39;ve tried using firefox cookie files\n&gt; &gt; &gt; and i&#39;ve tried to do a credentials login with heritrix.\n&gt; &gt; &gt; but alas i have failed\n&gt; &gt; &gt;\n&gt; &gt; &gt; anyone have a clue ?\n&gt; &gt; &gt;\n&gt; &gt; &gt; help .......\n&gt; &gt;\n&gt; &gt; You&#39;ll have to supply  more info. if we&#39;re to help.\n&gt; &gt;\n&gt; &gt; &lt;aside&gt;Does WPOST let crawlers get content (Is there a robots.txt on\n&gt; &gt; this site that bars crawler access?)  Does the online policy explicitly\n&gt; &gt; bar robots?  The NYT policy seems to allow crawler access if the\n&gt; &gt; downloads are for personal use only.  Perhaps WPOST is the same.&lt;/aside&gt;\n&gt; &gt;\n&gt; &gt; Back to debugging.  You can log in with your browser, right? \n&gt; &gt; Programmatic login by Heritrix is difficult to debug;  You could\n&gt; look in\n&gt; &gt; crawl logs to see whats happening on submission (Are you redirected, is\n&gt; &gt; it 200 on POST?) and in the ARC files to see what the login result\n&gt; pages\n&gt; &gt; you&#39;re getting back look like -- how do they compare to the browser\n&gt; &gt; pages?  You might try doing the login negotiation using CURL first --\n&gt; &gt; because it&#39;ll be easier to follow the login vagaries in a tool like\n&gt; CURL\n&gt; &gt; -- to learn more about how it works before trying the login in Heritrix.\n&gt; &gt;\n&gt; &gt; St.Ack\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt; *Yahoo! Groups Sponsor*\n&gt; &gt; &gt; ADVERTISEMENT\n&gt; &gt; &gt; click here\n&gt; &gt; &gt;\n&gt; &lt;http://us.ard.yahoo.com/SIG=129q2nfnt/M=298184.5584357.6650215.3001176/D=groups/S=1705004924:HM/EXP=1101238079/A=2434971/R=0/SIG=11eeoolb0/*http://www.netflix.com/Default?mqso=60185400&gt;\n&gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; ------------------------------------------------------------------------\n&gt; &gt; &gt; *Yahoo! Groups Links*\n&gt; &gt; &gt;\n&gt; &gt; &gt;     * To visit your group on the web, go to:\n&gt; &gt; &gt;       http://groups.yahoo.com/group/archive-crawler/\n&gt; &gt; &gt;       \n&gt; &gt; &gt;     * To unsubscribe from this group, send an email to:\n&gt; &gt; &gt;       archive-crawler-unsubscribe@yahoogroups.com\n&gt; &gt; &gt;     \n&gt; &lt;mailto:archive-crawler-unsubscribe@yahoogroups.com?subject=Unsubscribe&gt;\n&gt; &gt; &gt;       \n&gt; &gt; &gt;     * Your use of Yahoo! Groups is subject to the Yahoo! Terms of\n&gt; &gt; &gt;       Service &lt;http://docs.yahoo.com/info/terms/&gt;.\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; *Yahoo! Groups Sponsor*\n&gt; &lt;http://us.ard.yahoo.com/SIG=1296kmas5/M=296572.5585671.6651487.3001176/D=groups/S=1705004924:HM/EXP=1101242698/A=2343726/R=0/SIG=12ig9gfcv/*http://clk.atdmt.com/VON/go/yhxxxvon01900091von/direct/01/&time=1101156298212449&gt; \n&gt;\n&gt;\n&gt; Get unlimited calls to\n&gt;\n&gt; U.S./Canada\n&gt;\n&gt; &lt;http://us.ard.yahoo.com/SIG=1296kmas5/M=296572.5585671.6651487.3001176/D=groups/S=1705004924:HM/EXP=1101242698/A=2343726/R=1/SIG=12ig9gfcv/*http://clk.atdmt.com/VON/go/yhxxxvon01900091von/direct/01/&time=1101156298212449&gt; \n&gt;\n&gt;\n&gt;\n&gt; ------------------------------------------------------------------------\n&gt; *Yahoo! Groups Links*\n&gt;\n&gt;     * To visit your group on the web, go to:\n&gt;       http://groups.yahoo.com/group/archive-crawler/\n&gt;        \n&gt;     * To unsubscribe from this group, send an email to:\n&gt;       archive-crawler-unsubscribe@yahoogroups.com\n&gt;       &lt;mailto:archive-crawler-unsubscribe@yahoogroups.com?subject=Unsubscribe&gt;\n&gt;        \n&gt;     * Your use of Yahoo! Groups is subject to the Yahoo! Terms of\n&gt;       Service &lt;http://docs.yahoo.com/info/terms/&gt;.\n&gt;\n&gt;\n\n\n"}}