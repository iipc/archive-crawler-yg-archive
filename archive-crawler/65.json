{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"&quot;Gordon Mohr&quot; &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"R4yUrTxDbS95jBzlNj200zNjXd_ABWBcQ6bfMYgFDTE3KMzxV5uQTv4pQDlWIkjFr6sdDU9FMRQtrohnlt7Sq_epLgwfSGFrlw","spamInfo":{"isSpam":false,"reason":"0"},"subject":"For the list: Checkpointing (was Re: 10am Tomorrow @ Stata Labs?","postDate":"1054242989","msgId":65,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDAyNjMwMWMzMjYyNyRhNDU1NGVhMCQ0OGYwZWRkMUBXT1JLU1RBVElPTjIxPg=="},"prevInTopic":0,"nextInTopic":0,"prevInTime":64,"nextInTime":67,"topicId":65,"numMessagesInTopic":1,"msgSnippet":"Sometimes Raymie and I have had private exchanges about design issues that should really be copied to the archive-crawler discussion list. We ll try to direct","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 42343 invoked from network); 29 May 2003 21:17:15 -0000\r\nReceived: from unknown (66.218.66.217)\n  by m8.grp.scd.yahoo.com with QMQP; 29 May 2003 21:17:15 -0000\r\nReceived: from unknown (HELO mail.archive.org) (209.237.232.56)\n  by mta2.grp.scd.yahoo.com with SMTP; 29 May 2003 21:17:15 -0000\r\nReceived: from WORKSTATION21 (b116-dyn-72.archive.org [209.237.240.72])\n\tby mail.archive.org (8.12.8/8.10.2) with SMTP id h4TKTqlQ002273\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Thu, 29 May 2003 13:30:07 -0700\r\nMessage-ID: &lt;026301c32627$a4554ea0$48f0edd1@WORKSTATION21&gt;\r\nTo: &lt;archive-crawler@yahoogroups.com&gt;\r\nSubject: For the list: Checkpointing (was Re: 10am Tomorrow @ Stata Labs?\r\nDate: Thu, 29 May 2003 14:16:29 -0700\r\nMIME-Version: 1.0\r\nContent-Type: text/plain;\n\tcharset=&quot;Windows-1252&quot;\r\nContent-Transfer-Encoding: 7bit\r\nX-Priority: 3\r\nX-MSMail-Priority: Normal\r\nX-Mailer: Microsoft Outlook Express 6.00.2800.1158\r\nX-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165\r\nFrom: &quot;Gordon Mohr&quot; &lt;gojomo@...&gt;\r\nX-Yahoo-Group-Post: member; u=137285340\r\nX-Yahoo-Profile: gojomo\r\n\r\nSometimes Raymie and I have had private exchanges about design issues\nthat should really be copied to the archive-crawler discussion list.\n\nWe&#39;ll try to direct these to the list in the first place, but where\nwe don&#39;t, I&#39;ll occasionally be forwarding copies of the exchanges\nafterwards, with the prefix &quot;For the list:&quot;.\n\n- Gordon\n\n----- Original Message ----- \nFrom: &quot;Gordon Mohr&quot; &lt;gojomo@...&gt;\nTo: &quot;Raymie Stata&quot; &lt;raymie@...&gt;\nSent: Wednesday, May 21, 2003 11:09 AM\nSubject: Checkpointing (was Re: 10am Tomorrow @ Stata Labs?\n\n\n&gt; Ah, yes, you&#39;d mentioned it but I forgot.\n&gt;\n&gt; I agree there may be subtle but important differences\n&gt; between Processor modules depending on relative ordering,\n&gt; expecially with regard to fetching.\n&gt;\n&gt; With checkpointing, I&#39;m still struggling with a definition\n&gt; of how much state needs to be checkpointed, and with how\n&gt; much precision. I suspect none of the Processor steps\n&gt; need to be formally checkpointed; that it is only when the\n&gt; CrawlURI is re-interred that the checkpointable state of the\n&gt; system changes.\n&gt;\n&gt; To the extent that some of the postprocessing generates its\n&gt; own (logging/archival) output, I think that could be loosely\n&gt; correlated to checkpoints via a simple mechanism like a\n&gt; monotonically increasing &quot;checkpointLevel&quot; value, which is\n&gt; always stored alongside such subsidiary output.\n&gt;\n&gt; So a possible checkpointing strategy would then be:\n&gt;\n&gt; (1) Crawler receives request (or simply reaches configured\n&gt; time interval) for a checkpoint.\n&gt;\n&gt; (2) A checkpointLevel indicator is incremented in the\n&gt; Scheduler/Store/Selector. All new CrawlURIs emitted for\n&gt; processing are marked with this new level.\n&gt;\n&gt; (3) URISelector and HostCache temporarily refuse to process\n&gt; updates from CrawlURIs that have the new checkpointLevel,\n&gt; letting them queue up instead.\n&gt;\n&gt; (4) The URIStore has maintained a list of all CrawlURIs that\n&gt; are in mid-processing -- emitted but not yet re-interred. When\n&gt; the last of those CrawlURIs with the previous checkpointLevel\n&gt; are completed, the full state of the URIStore (and other crawler\n&gt; statistics) is duplicated or otherwise marked/protected for\n&gt; future recovery as a checkpoint. This includes the list of\n&gt; mid-processing next-checkpoint URIs. (The full state of the HostCache\n&gt; may be saved as well, but that&#39;s not strictly necessary, as most\n&gt; of it would likely need to be refreshed in a future resume\n&gt; anyway).\n&gt;\n&gt; (5) URISelector and HostCache then unlock themselves, processing\n&gt; the queued-up next-checkpoint CrawlURIs.\n&gt;\n&gt; (6) When a rollback/resume is later necessary, all info in\n&gt; subsidiary logs or archives with the later checkpoint level(s)\n&gt; can be put aside, and the crawler begun with the previous\n&gt; URIStore state. Those URIs that were known to be mid-processing\n&gt; at the time of the last checkpoint may be considered a special\n&gt; top-priority subgroup to be emitted before everything else\n&gt; (except their own prerequisites).\n&gt;\n&gt; The biggest potential problem I see with this approach is if\n&gt; a few mid-processing last-checkpoint CrawlURIs take very long\n&gt; to complete... leading to unmanageably large holding queues of\n&gt; next-checkpoint CrawlURIs, and more mixing of information from\n&gt; different checkpoints across the logs/archives than would be\n&gt; desireable.\n&gt;\n&gt; If fetching is the one step with the most unpredictable\n&gt; completion time, or serves as the threshold past which a\n&gt; CrawlURI&#39;s processing time is predictable and persistent\n&gt; state potentially volatile, then it could be just past\n&gt; the fetching stage that CrawlURIs are assigned to a s\n&gt; specific (last or next) checkpoint level.\n&gt;\n&gt; Is this roughly what you meant about the pre-fetcher/post-fetcher\n&gt; difference in stable state?\n&gt;\n&gt; How much is what I&#39;ve described above is analogous to what\n&gt; Mercator does?\n&gt;\n&gt; - Gordon\n&gt;\n&gt; ----- Original Message ----- \n&gt; From: &quot;Raymie Stata&quot; &lt;raymie@...&gt;\n&gt; To: &quot;Gordon Mohr&quot; &lt;gojomo@...&gt;\n&gt; Sent: Wednesday, May 21, 2003 12:33 AM\n&gt; Subject: Re: 10am Tomorrow @ Stata Labs?\n&gt;\n&gt;\n&gt; &gt; Hmm, I guess I failed to tell you that I&#39;m in Budapest at the WWW2003 conference.\n&gt; &gt;\n&gt; &gt; I participated in a web-graph workshop yesterday.  There&#39;s lots of demand for\n&gt; &gt; our data, I have some ideas for doing something about it.\n&gt; &gt;\n&gt; &gt; Anyway, we&#39;ll have to skip today.\n&gt; &gt;\n&gt; &gt; I looked at your document.  My only comment is that I think it&#39;s important to think about checkpointing.  In particular, it&#39;ll\nbe\n&gt; very convenient if there&#39;s no stable state to be checkpointed before the fetcher module.  Thus, perhaps the &quot;processing&quot; modules\n&gt; before and after the fetcher are slightly different, one supporting checkpointing.\n&gt; &gt;\n&gt; &gt; Raymie\n&gt; &gt;\n&gt;\n\n\n"}}