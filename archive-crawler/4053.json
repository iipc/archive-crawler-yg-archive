{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":90724651,"authorName":"John Lekashman","from":"John Lekashman &lt;lekash@...&gt;","profile":"lekash","replyTo":"LIST","senderId":"ije6Kop9_AVg125vZupe2MXwby4yjsdoOOz1Ofnrni-sC_tK12_jmD4kXecZ8zckL7NXIOipXZeJjI5swXt0f1EZQTCDhjH-sOU","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] Re: Distributed Crawling","postDate":"1175790940","msgId":4053,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ2MTUyNTVDLjgwMTA5MDZAYmF5YXJlYS5uZXQ+","inReplyToHeader":"PDQ2MTRDQjY2LjMwNjAxMDJAYXJjaGl2ZS5vcmc+","referencesHeader":"PGV2MWFnYitlZW5pQGVHcm91cHMuY29tPiA8NDYxNENCNjYuMzA2MDEwMkBhcmNoaXZlLm9yZz4="},"prevInTopic":4049,"nextInTopic":4076,"prevInTime":4052,"nextInTime":4054,"topicId":3834,"numMessagesInTopic":26,"msgSnippet":"Hi Igor, Yes, NASA actually did it the way the system was designed.  Funny you should pick that one.  I set up DNS there some decades ago, and the tone has","rawEmail":"Return-Path: &lt;lekash@...&gt;\r\nX-Sender: lekash@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 44372 invoked from network); 5 Apr 2007 16:40:21 -0000\r\nReceived: from unknown (66.218.66.71)\n  by m46.grp.scd.yahoo.com with QMQP; 5 Apr 2007 16:40:21 -0000\r\nReceived: from unknown (HELO postman.bayarea.net) (209.128.87.230)\n  by mta13.grp.scd.yahoo.com with SMTP; 5 Apr 2007 16:40:21 -0000\r\nReceived: from [192.168.0.104] (209-128-93-121.BAYAREA.NET [209.128.93.121])\n\t(authenticated bits=0)\n\tby postman.bayarea.net (8.12.9/8.12.9) with ESMTP id l35GZdLD006200\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Thu, 5 Apr 2007 09:35:43 -0700 (PDT)\n\t(envelope-from lekash@...)\r\nMessage-ID: &lt;4615255C.8010906@...&gt;\r\nDate: Thu, 05 Apr 2007 09:35:40 -0700\r\nUser-Agent: Mozilla/5.0 (Macintosh; U; PPC Mac OS X Mach-O; en-US; rv:1.7.12) Gecko/20050915\r\nX-Accept-Language: en-us, en\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;ev1agb+eeni@...&gt; &lt;4614CB66.3060102@...&gt;\r\nIn-Reply-To: &lt;4614CB66.3060102@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Msg-Info: 1:0:0:0\r\nFrom: John Lekashman &lt;lekash@...&gt;\r\nSubject: Re: [archive-crawler] Re: Distributed Crawling\r\nX-Yahoo-Group-Post: member; u=90724651; y=EcYO943a3RD1sMcZ75CjSHlr6I7o_4KmnuW-naW18EZh\r\nX-Yahoo-Profile: lekash\r\n\r\nHi Igor,\nYes, NASA actually did it the way the system was designed.  Funny you\nshould pick that one.  I set up DNS there some decades ago, and the tone \nhas stayed\nonce the web appeared.\n\nThe intent was:\n&lt;-- grow the namespace this way for actual systems\nGrow this way, after the / for content in the same place --&gt;\na.b.c.d/ foo.bar.bash/. . .\n\nWhat these weblog guys did is a hack that happens to work, for some stuff.\nAnd its becoming more prevalent.  Its not unlike NAT. \nAnnoying, useful in some cases, and overloaded, causing all manner of \nproblems.\nLike this one.  Requires human intervention, cause there is no easy\nway to tell a machine to detect it.\n\nSo, code has to adjust to deal with it.  Oh well.\nAnd it mostly appears it will have to be a top level case\nby case basis for some number of them.\n\nJohn\n\n\nIgor Ranitovic wrote:\n\n&gt; Hi Joe,\n&gt;\n&gt; I)\n&gt; ^((&#92;w&#92;w&#92;w,&#92;w*)|((au|uk),&#92;w*,&#92;w*)|[&#92;w,]{8})\n&gt; This one has been used with 6 machine crawls with focus on the\n&gt; Australian domain.\n&gt;\n&gt; II)\n&gt; ^((((au|uk),gov|fr,gouv|ca,gc|(int|org),un),&#92;w*)|(&#92;w&#92;w&#92;w,&#92;w*)|[&#92;w,]{0,7}&#92;w*)\n&gt; This one has been used with 6 machine crawls with focus on government\n&gt; sites from US, UK, CA, AU, FR and UN.\n&gt;\n&gt; III)\n&gt; ^(((&#92;w&#92;w&#92;w,|fr,(asso|com|gouv|nom|prd|presse|tm|aero|cci),|fr,)&#92;w*)|[&#92;w,]{4})\n&gt; This one has been used with 4 machine crawls with focus on the French\n&gt; domain. Notice that French domain has a few specific second top level\n&gt; domains.\n&gt;\n&gt; I think that these three patterns will give you a general idea on what\n&gt; has to be done for a World Wide broad crawl.\n&gt;\n&gt; As you are probably already aware, you will need to watch out for\n&gt; domains with a large number of subdomains.\n&gt;\n&gt; For example:\n&gt; 1) skyblog.com/skyrock.com will have about 2+ million subdomains; one\n&gt; for each user/blog. These subdomains are virtual hosts that are hosted\n&gt; from some number of machines. If you don&#39;t have a reduce pattern to\n&gt; force them all to a single machine you might hit them very hard (many\n&gt; connections from each crawler node). On the other hand, if you put them\n&gt; all on a single machine, 2+ million hosts will eventually starve\n&gt; anything else on that machine.\n&gt; I personally like to put them to a single machine and use\n&gt; force-queue-assignment in per host overrides to simulate IP politeness.\n&gt; You might not get as much content as you want but that can be increased\n&gt; via budgeting (see queue-total-budget and balance-replenish-amount \n&gt; options).\n&gt;\n&gt; 2) nasa.gov has about 3000+ subdomains, but notice that we do not have\n&gt; specific rule for it in the second reduce pattern from above. Majority\n&gt; of these NASA subdomains are not virtual hosts and they can handle a\n&gt; load -- our tax money at work :)\n&gt;\n&gt; Obviously there is no single solution that fits them all, but with\n&gt; reduce pattern, per host overrides, IP like politeness and budgeting you\n&gt; should be able to create a good generic configuration.\n&gt;\n&gt; Take care,\n&gt; i.\n&gt;\n&gt; &gt;&gt; I&#39;m sure better reduction patterns are possible depending on what\n&gt; &gt; you&#39;re\n&gt; &gt;&gt; crawling; I believe we&#39;ve used other variants of this for our 6-\n&gt; &gt; machine\n&gt; &gt;&gt; crawls.\n&gt; &gt;&gt;\n&gt; &gt;\n&gt; &gt; Could you share the one you used for the 6-machine crawls?\n&gt; &gt;\n&gt; &gt; Cheers,\n&gt; &gt; -Joe\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; Yahoo! Groups Links\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt;\n&gt;  \n\n\n"}}