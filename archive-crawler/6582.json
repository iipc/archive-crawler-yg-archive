{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":254719850,"authorName":"steve@archive.org","from":"&quot;steve@...&quot; &lt;steve@...&gt;","profile":"stearcorg","replyTo":"LIST","senderId":"hJVOs-ZYLFjn1CkwMgKGGSQ4c9pPYaxlIhRyiKElEac_8XpXqFkgamaRFYkkXzup2Du5iW8lu9rVK6GisXxLKfMWcSCwNNT5_N05gKKD","spamInfo":{"isSpam":false,"reason":"3"},"subject":"Re: [archive-crawler] Re: weird content-type in WARC","postDate":"1276810280","msgId":6582,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDRDMUE5NDI4LjgwNjA1MDVAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PFAtSVJDLUVYQkUwMTlwYktXWmYwMDAwMWUxYkBFWC5VQ09QLkVEVT4=","referencesHeader":"PGh2ZGphcCtrYmp0QGVHcm91cHMuY29tPgk8NEMxQTc3MzguNDA4MDEwNUBhcmNoaXZlLm9yZz4gPFAtSVJDLUVYQkUwMTlwYktXWmYwMDAwMWUxYkBFWC5VQ09QLkVEVT4="},"prevInTopic":6581,"nextInTopic":6584,"prevInTime":6581,"nextInTime":6583,"topicId":6219,"numMessagesInTopic":8,"msgSnippet":"heh, i meant alluded , not eluded . thanks for the further info Erik. now i see the problem. running H3/org.archive.io.ArchiveTest, i see that it gives","rawEmail":"Return-Path: &lt;steve@...&gt;\r\nX-Sender: steve@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 2586 invoked from network); 17 Jun 2010 21:31:22 -0000\r\nX-Received: from unknown (98.137.34.46)\n  by m14.grp.re1.yahoo.com with QMQP; 17 Jun 2010 21:31:22 -0000\r\nX-Received: from unknown (HELO mail.archive.org) (207.241.231.239)\n  by mta3.grp.sp2.yahoo.com with SMTP; 17 Jun 2010 21:31:22 -0000\r\nX-Received: from localhost (localhost [127.0.0.1])\n\tby mail.archive.org (Postfix) with ESMTP id 5E3572F00C\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Thu, 17 Jun 2010 14:31:21 -0700 (PDT)\r\nX-Received: from mail.archive.org ([127.0.0.1])\n\tby localhost (mail.archive.org [127.0.0.1]) (amavisd-new, port 10024)\n\twith LMTP id V1+KsCvRcha1 for &lt;archive-crawler@yahoogroups.com&gt;;\n\tThu, 17 Jun 2010 14:31:20 -0700 (PDT)\r\nX-Received: from SiznaxMBP.local (router300.sf.archive.org [208.70.27.190])\n\tby mail.archive.org (Postfix) with ESMTPSA id 4C3A83199F\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Thu, 17 Jun 2010 14:31:20 -0700 (PDT)\r\nMessage-ID: &lt;4C1A9428.8060505@...&gt;\r\nDate: Thu, 17 Jun 2010 14:31:20 -0700\r\nUser-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.1.9) Gecko/20100317 Thunderbird/3.0.4\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;hvdjap+kbjt@...&gt;\t&lt;4C1A7738.4080105@...&gt; &lt;P-IRC-EXBE019pbKWZf00001e1b@...&gt;\r\nIn-Reply-To: &lt;P-IRC-EXBE019pbKWZf00001e1b@...&gt;\r\nContent-Type: text/plain; charset=UTF-8; format=flowed\r\nContent-Transfer-Encoding: 8bit\r\nX-eGroups-Msg-Info: 2:3:4:0:0\r\nFrom: &quot;steve@...&quot; &lt;steve@...&gt;\r\nSubject: Re: [archive-crawler] Re: weird content-type in WARC\r\nX-Yahoo-Group-Post: member; u=254719850; y=jwC4X1a5aO5drq9Pa2VMlAshj8jRXxfPiumYglyzFFBK\r\nX-Yahoo-Profile: stearcorg\r\n\r\nheh, i meant &quot;alluded&quot;, not &quot;eluded&quot;.\n\nthanks for the further info Erik. now i see the problem. running\nH3/org.archive.io.ArchiveTest, i see that it gives &quot;text/html&quot;\nmimetype in CDX mode for an ARC, but for WARC it reports:\n\n   application/http; msgtype=response\n   application/http; msgtype=request\n   application/warc-fields\n\nso, i&#39;ve opened an issue for us to make sure that\nArchiveRecordHeader.getMimetype() gives payload-content-type for\nWARCs (for consistency), and to add a method which still gives\naccess to the WARC record container-content-type.\n\nhttps://webarchive.jira.com/browse/HER-1788\n\n\n/steve@...\n\n\n\n/steve@...\n\nOn 6/17/10 12:44 PM, Erik Hetzner wrote:\n&gt; At Thu, 17 Jun 2010 12:27:52 -0700,\n&gt; steve@... wrote:\n&gt;&gt;\n&gt;&gt; you want to examine the HTTP header Content-Type contained\n&gt;&gt; _within_ the WARC record, rather than the WARC header\n&gt;&gt; Content-Type.\n&gt;&gt;\n&gt;&gt; the crawl-report reports HTTP header Content-Type(s). WARC files\n&gt;&gt; also contain WARC header Content-Type(s) as eluded to by Erik.\n&gt;&gt; there will be a request, response, and metadata WARC record\n&gt;&gt; header for each target-URI, which also contain their own\n&gt;&gt; Content-Type field.\n&gt;&gt;\n&gt;&gt; e.g. for &quot;WARC-Target-URI: http://www.archive.org/&quot; the\n&gt;&gt; following &quot;Content-Type&quot; entries will be reported in a WARC\n&gt;&gt; record (with other selected fields):\n&gt;&gt;\n&gt;&gt; [â€¦]\n&gt;&gt;\n&gt;&gt; org.archive.io.ArchiveRecordHeader.getMimetype() should report\n&gt;&gt; the mimetype you&#39;re interested in.\n&gt;&gt;\n&gt;&gt; hope that helps.\n&gt;\n&gt; Hi Steve, all,\n&gt;\n&gt; Thanks for the very clear explanation of the issue, Steve.\n&gt;\n&gt; I just had another look at this because I will need to be parsing WARC\n&gt; records myself soon.\n&gt;\n&gt; I tested getMimetype - it seems to return the WARC Content-type rather\n&gt; than the body Content-Type.\n&gt;\n&gt; The WARCIndexer tool bundled with the open source wayback does,\n&gt; however, extract the MIME type from the actual response. It does this\n&gt; by parsing the HTTP headers itself. Here is a good starting place to\n&gt; see how to extract the HTTP headers from the WARC record:\n&gt;\n&gt;    https://archive-access.svn.sourceforge.net/svnroot/archive-access/trunk/archive-access/projects/wayback/wayback-core/src/main/java/org/archive/wayback/resourcestore/indexer/WARCRecordToSearchResultAdapter.java\n&gt;\n&gt; Hopefully the WARC/ARC API will be cleaned up soon; it is strange to\n&gt; have the same method (getMimetype) with completely different\n&gt; semantics.\n&gt;\n&gt; If you are only using WARCs, an alternative might be to use the WARC\n&gt; tools here:\n&gt;\n&gt;    http://law.dsi.unimi.it/index.php?option=com_content&task=view&id=35&Itemid=42\n&gt;\n&gt; Which contains code for parsing the HTTP response itself.\n&gt;\n&gt; best, Erik\n&gt;\n&gt;\n&gt;\n&gt; Sent from my free software system&lt;http://fsf.org/&gt;.\n\n"}}