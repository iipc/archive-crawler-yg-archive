{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":582247024,"authorName":"Colin Rosenthal","from":"Colin Rosenthal &lt;csr@...&gt;","replyTo":"LIST","senderId":"EvKymsRWaRjNE9iODyZ0DFP_KFnI5dRRxn5YG_NftpW-yZ7Bs9Pn5VD00wfW7XprMwL7TAHA6aPHf84j0mNok59W","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] Uris fail before DNS lookup","postDate":"1527773104","msgId":8917,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDVCMEZGN0IwLjEwMjA1MDhAa2IuZGs+","inReplyToHeader":"PDZhMDEwNzQ4YjU0MDQwYWFhNTBlMTE3YjU1MWEyZDg1QGxhbmRzYm9rYXNhZm4uaXM+","referencesHeader":"PDVCMEU5NDY4LjgwNTA2MDZAa2IuZGs+IDw2YTAxMDc0OGI1NDA0MGFhYTUwZTExN2I1NTFhMmQ4NUBsYW5kc2Jva2FzYWZuLmlzPg=="},"prevInTopic":8916,"nextInTopic":0,"prevInTime":8916,"nextInTime":8918,"topicId":8915,"numMessagesInTopic":3,"msgSnippet":"Hi Kris, In our case I m now pretty sure it s because of how we coded our queue assignment policy. We queue url s based on the seed that generated them, but we","rawEmail":"Return-Path: &lt;csr@...&gt;\r\nX-Sender: csr@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 55626 invoked by uid 102); 31 May 2018 13:25:07 -0000\r\nX-Received: from unknown (HELO mtaq1.grp.bf1.yahoo.com) (10.201.224.239)\n  by m17.grp.bf1.yahoo.com with SMTP; 31 May 2018 13:25:07 -0000\r\nX-Received: (qmail 31033 invoked from network); 31 May 2018 13:25:07 -0000\r\nX-Received: from unknown (HELO mta4001.groups.mail.bf1.yahoo.com) (10.201.194.219)\n  by mtaq1.grp.bf1.yahoo.com with SMTP; 31 May 2018 13:25:07 -0000\r\nX-Original-Return-Path: &lt;csr@...&gt;\r\nX-Received-SPF: pass (domain of kb.dk designates 89.104.206.43 as permitted sender)\r\nX-YMailISG: Yuzuf10WLDsClY2Tnb7YGXXFKse_to2GD9da3ACwF9fINFsZ\n PSUg3MnxtA9iBRrUQPPFRQM1CI7Puf1CU29AigxySVZsYlfOevkJDHTxHGQp\n cHZAJAXu.TXtSHkJgj4CUGnJU7ItFW2g8LS.xwLai5mz6og636tz7bavHtkz\n z5jOjQ6FxXj5Io_CKyOcSrFmvm6nWg.2y3fhM1lVMZ3IuDtF.aDStCEqrWeE\n 3Sj1_WK10cJ07TtIRSw8UczIwjPfbW4GoOgdPTRd4g_VhtD893bXpuwxzYLk\n I.9aDpKSwoseUs6cU4JMU1vIENuB3Z8AaiFnXh2Egro_RSmpvH7YYO1xYfCB\n _8SJSOT7YpCLcPGy3Jc0LvlL743nX7qtChnU5LzAuHHhW3JJjd7JvliuA866\n 7DJN9OPp0JR1HxZBjh91WtlhVWGgQ9t9OywrkeBTc_bzjh24bEzaEVtb3Qka\n XlC4VLW7wPyePmntfn28ZZwnRZFeVmIz1CtJRkeI_1Oy15hVUhbjZdndF7lo\n uFQN28bt6gmVOPF_97N0eFTwxB86VQowDueV7tBgmsIAXDz_a_3sPLgTRwwT\n lgzhq5khcQtvqHVUVdFSBFRQvXlBrX.Y4EA2cYdwqEWQaecszckHxPuwzW3B\n F.fv.MyaygbRqwkuI0FAQjy5VxQpa04k1QjV6YOCIXUcsMx3vHC1LNPzONvj\n tp158E6XhKZatLFnDgkGZlUApKSYiu5n2w_2CFto_Qo67YyQ7VRlZEXFVy5.\n oldLBAt0eHbUPtYKe3sqoA.hqJ3NPl0VLwX7Qdo2fWIfN.4e9bwXUZO1OSr6\n zDkKzHfOptRi12ToOzeuovAlq29igeN73zxOGj7RLKUzDBCXlMfClegsKLST\n J2pDkIMxWq4oDz1tNE7gS2nYdCEDI7FYGz6O_lrPS9fSFdbfXvbOoIBZ8Bly\n GO94TAKxdzlzX_tikV_zlI4QQMnCzRW0TzsLwW0q2_9ArIsv64OCJZ39yTLt\n c4ZEGfcHVBmQgtyTQXCFnQ8j79YYoDCOJ.EsGMJSVvWYmE_24y2NIkI9ZD14\n OjgEBIYK1zkTx0.v2fc75RkaEsjtIg0U2aKfJsMtK8Uu3rPMRBAu_dRhhXF8\n jKN04ElzF.e69Z5ErXMszknu._aGQITBb0ZOKvc6OBO8Nd54v4B74.Vrpi9h\n sjkmZxnRm1EY30eBWAd9LvHMKsX30SJjH2goh6sbGaJJDyIPToS1O5KdzoXT\n ZZIEyLXWHufiOq3x9kmieDoWwSMnZynGsX2epWG_zZvGD.vWx0ytClYF0Csx\n ZgNq03yJSPs3aofkliD_uQ6DoOqhZPPvQwYcklEUdPJp.ecoSzvnjK_MOZzl\n 81TztQxAa0c6TqW6gBayyUgv3lJ6gjQD19yaA0c2EN7jFKD.sHUwUPw86D28\n HM6QwCp_j4eBAHNhvXHcJT2yng--\r\nAuthentication-Results: mta4001.groups.mail.bf1.yahoo.com  from=kb.dk; domainkeys=neutral (no sig);  from=kb.dk; dkim=neutral (no sig)\r\nX-Received: from 127.0.0.1  (EHLO smtp-out12.electric.net) (89.104.206.43)\n  by mta4001.groups.mail.bf1.yahoo.com with SMTPS; Thu, 31 May 2018 13:25:06 +0000\r\nX-Received: from 1fONZg-0006vu-Tn by out12d.electric.net with emc1-ok (Exim 4.90_1)\n\t(envelope-from &lt;csr@...&gt;)\n\tid 1fONZg-0006xM-UU\n\tfor archive-crawler@yahoogroups.com; Thu, 31 May 2018 06:25:04 -0700\r\nX-Received: by emcmailer; Thu, 31 May 2018 06:25:04 -0700\r\nX-Received: from [130.226.226.11] (helo=post.kb.dk)\n\tby out12d.electric.net with esmtp (Exim 4.90_1)\n\t(envelope-from &lt;csr@...&gt;)\n\tid 1fONZg-0006vu-Tn\n\tfor archive-crawler@yahoogroups.com; Thu, 31 May 2018 06:25:04 -0700\r\nX-Received: from [172.18.100.202] (unknown [172.18.100.202])\n\tby post.kb.dk (Postfix) with ESMTP id 3038391F56\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Thu, 31 May 2018 15:25:04 +0200 (CEST)\r\nMessage-ID: &lt;5B0FF7B0.1020508@...&gt;\r\nDate: Thu, 31 May 2018 15:25:04 +0200\r\nUser-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:31.0) Gecko/20100101 Thunderbird/31.1.2\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;5B0E9468.8050606@...&gt; &lt;6a010748b54040aaa50e117b551a2d85@...&gt;\r\nIn-Reply-To: &lt;6a010748b54040aaa50e117b551a2d85@...&gt;\r\nContent-Type: text/plain; charset=utf-8; format=flowed\r\nContent-Transfer-Encoding: 8bit\r\nX-Outbound-IP: 130.226.226.11\r\nX-Env-From: csr@...\r\nX-Proto: esmtp\r\nX-Revdns: post-03.kb.dk\r\nX-HELO: post.kb.dk\r\nX-TLS: \r\nX-Authenticated_ID: \r\nX-PolicySMART: 10573177\r\nX-Virus-Status: Scanned by VirusSMART (c)\r\nX-Virus-Status: Scanned by VirusSMART (s)\r\nSubject: Re: [archive-crawler] Uris fail before DNS lookup\r\nX-Yahoo-Group-Post: member; u=582247024\r\nFrom: Colin Rosenthal &lt;csr@...&gt;\r\n\r\nHi Kris,\n\nIn our case I&#39;m now pretty sure it&#39;s because of how we coded our queue \nassignment policy. We queue url&#39;s based on the seed that generated them, \nbut we\nhad a separate rule that put dns: lookups on host-based queues. I tried \nchanging the rule by putting the dns: on the same queue as the rest of \nthe urls and suddenly\nall the &quot;-50&quot; disappeared. So this seems like some hidden side effect in \nhow Heritrix processes queues.\n\ncheers,\nColin\n\nOn 05/30/2018 02:48 PM, Kristinn Sigurðsson kristinn@... \n[archive-crawler] wrote:\n&gt; Hi Colin,\n&gt;\n&gt; Your e-mail prompted me to look at an ongoing, large-scale, crawl. I‘m seeing a few -50 in it as well. It isn‘t common (almost 1 in a million), but it is happening and ANY appearance of -50 on the crawl.log is a bug. So something is broken.\n&gt;\n&gt; I also observed, like you, a subsequent successful DNS lookup for the domain in question shortly after the -50.\n&gt;\n&gt; Additionally, I noticed, in my crawl.log, all the -50 URLs I checked had reached their max-retries. And looking at the other attempts for the same, I‘m seeing at least some -2 (HTTP connect failed).\n&gt;\n&gt; Possible theory, if a http connection fails just as/after the DNS needs to be refreshed, something goes ... off.\n&gt;\n&gt; I‘m using 3.3.0-LBS-2016-02 (3.3.0 built from master in May 2016). Maybe this has been addressed since?\n&gt;\n&gt; Best,\n&gt; Kris\n&gt;\n&gt; From: archive-crawler@yahoogroups.com &lt;archive-crawler@yahoogroups.com&gt;\n&gt; Sent: miðvikudagur, 30. maí 2018 12:09\n&gt; To: archive-crawler@yahoogroups.com\n&gt; Subject: [archive-crawler] Uris fail before DNS lookup\n&gt;\n&gt;\n&gt;\n&gt; Hi,\n&gt; We are seeing a _lot_ of crawl logs like this:\n&gt;\n&gt; 2018-05-28T19:22:23.105Z     1         64 dns:www.xn--rosenlwe-b5a.dk P http://www.xn--rosenlwe-b5a.dk/ text/dns #002 20180528192222134+444 sha1:CJXRA236UWFIT2QHPXM3QPSOWOLORKNX http://www.rosenlÃ¸we.dk content-size:64\n&gt;\n&gt; 2018-05-28T19:22:24.667Z   200         67 http://www.xn--rosenlwe-b5a.dk/robots.txt P http://www.xn--rosenlwe-b5a.dk/ text/plain #002 20180528192224133+522 sha1:5S2OB6LK7EHO74WNBNVLNE6ZBB5VRYTI http://www.rosenlÃ¸we.dk content-size:323\n&gt;\n&gt; 2018-05-28T19:22:25.795Z   301          0 http://www.xn--rosenlwe-b5a.dk/ - - text/html #002 20180528192225674+110 sha1:3I42H3S6NNFQ2MSVX7XZKYAYSCX5QBYJ http://www.rosenlÃ¸we.dk content-size:205,3t\n&gt;\n&gt; 2018-05-28T19:22:26.142Z     1         60 dns:xn--rosenlwe-b5a.dk RP https://xn--rosenlwe-b5a.dk/ text/dns #010 20180528192226123+17 sha1:VUK6KUIOFKW6BGFATFYJIJJWX4P7B7Z5 http://www.rosenlÃ¸we.dk content-size:60\n&gt;\n&gt; 2018-05-28T19:22:26.967Z   200         67 https://xn--rosenlwe-b5a.dk/robots.txt RP https://xn--rosenlwe-b5a.dk/ text/plain #002 20180528192226809+152 sha1:5S2OB6LK7EHO74WNBNVLNE6ZBB5VRYTI http://www.rosenlÃ¸we.dk content-size:323\n&gt;\n&gt; 2018-05-28T19:22:28.381Z   200      29008 https://xn--rosenlwe-b5a.dk/ R http://www.xn--rosenlwe-b5a.dk/ text/html #002 20180528192227974+157 sha1:CO73JM6ARPNRV62FICRAJ2X4OYPHJLQH http://www.rosenlÃ¸we.dk content-size:29258,3t\n&gt;\n&gt; 2018-05-28T19:22:29.188Z   200          0 http://www.xn--rosenlwe-b5a.dk/favicon.ico PI http://www.xn--rosenlwe-b5a.dk/robots.txt image/vnd.microsoft.icon #049 20180528192229118+34 sha1:3I42H3S6NNFQ2MSVX7XZKYAYSCX5QBYJ http://www.rosenlÃ¸we.dk content-size:150\n&gt;\n&gt; 2018-05-28T19:22:30.173Z   200          0 https://xn--rosenlwe-b5a.dk/favicon.ico RPI https://xn--rosenlwe-b5a.dk/robots.txt image/vnd.microsoft.icon #047 20180528192230118+50 sha1:3I42H3S6NNFQ2MSVX7XZKYAYSCX5QBYJ http://www.rosenlÃ¸we.dk content-size:150\n&gt;\n&gt; 2018-05-28T19:22:31.134Z   -50          - http://gmpg.org/xfn/11 RE https://xn--rosenlwe-b5a.dk/ unknown #001 - - http://www.rosenlÃ¸we.dk 3t\n&gt;\n&gt; 2018-05-28T19:22:31.229Z     1         48 dns:gmpg.org REP http://gmpg.org/xfn/11 text/dns #016 20180528192231121+107 sha1:GETU65EVO4KY2G4JKTHLSW6AW2HM66SK http://www.rosenlÃ¸we.dk content-size:48\n&gt;\n&gt; 2018-05-28T19:22:31.259Z   405         42 https://xn--rosenlwe-b5a.dk/xmlrpc.php RE https://xn--rosenlwe-b5a.dk/ text/plain #001 20180528192231138+119 sha1:QJ2RUVPQN37T3VVVCHHIUV4IWGVPF6BE http://www.rosenlÃ¸we.dk content-size:240\n&gt;\n&gt; 2018-05-28T19:22:32.125Z     1         48 dns:gmpg.org REP http://gmpg.org/xfn/11 text/dns #046 20180528192232123+1 sha1:BPAB7C3DRT53NUDXYI4ZZ2KDW6O36FM7 http://www.rosenlÃ¸we.dk content-size:48\n&gt;\n&gt; 2018-05-28T19:22:32.277Z   404      20722 https://xn--rosenlwe-b5a.dk/wp-content/themes/customizr/assets/front/js/vendors/html5.js RE https://xn--rosenlwe-b5a.dk/ text/html #045 20180528192232126+148 sha1:UD45D7XZWHG75FEKOJVUWEU3BVMLX7NI http://www.rosenlÃ¸we.dk content-size:21025\n&gt;\n&gt; 2018-05-28T19:22:33.121Z     1         48 dns:gmpg.org REP http://gmpg.org/xfn/11 text/dns #040 20180528192233118+1 sha1:YIVAC4GRRMNXRI4ZSA6QLWDOB5SCTTOK http://www.rosenlÃ¸we.dk content-size:48\n&gt;\n&gt; 2018-05-28T19:22:33.136Z   -50          - https://www.googletagmanager.com/gtag/js?id=UA-114080285-1 RE https://xn--rosenlwe-b5a.dk/ unknown #024 - - http://www.rosenlÃ¸we.dk 3t\n&gt;\n&gt; 2018-05-28T19:22:33.154Z   -50          - https://fonts.googleapis.com/ RE https://xn--rosenlwe-b5a.dk/ unknown #010 - - http://www.rosenlÃ¸we.dk 3t\n&gt;\n&gt; 2018-05-28T19:22:33.165Z     1         74 dns:www.googletagmanager.com REP https://www.googletagmanager.com/gtag/js?id=UA-114080285-1 text/dns #048 20180528192233127+37 sha1:HHC22NBJKPZT2QV7AQLVFLQHQZ7M3IJP http://www.rosenlÃ¸we.dk content-size:74\n&gt;\n&gt; 2018-05-28T19:22:33.170Z   -50          - https://s.w.org/ RE https://xn--rosenlwe-b5a.dk/ unknown #010 - - http://www.rosenlÃ¸we.dk 3t\n&gt;\n&gt; 2018-05-28T19:22:33.188Z     1         66 dns:fonts.googleapis.com REP https://fonts.googleapis.com/ text/dns #024 20180528192233150+37 sha1:PU4C5FTYSYCUXEQ6J6QOWT45ZVZU7WMJ http://www.rosenlÃ¸we.dk content-size:66\n&gt;\n&gt; 2018-05-28T19:22:33.195Z     1         46 dns:s.w.org REP https://s.w.org/ text/dns #048 20180528192233168+26 sha1:OTHEMNH5BDFNCEMNKB6DQ65HP7K3F3P2 http://www.rosenlÃ¸we.dk content-size:46\n&gt;\n&gt;\n&gt;\n&gt; Note that the &quot;-50&quot; uris precede the successful lookup of the corresponding dns: uri, and that the whole thing happens very rapidly. So under what circumstances will heritrix give up\n&gt;\n&gt; on a uri without even waiting a few seconds for the dns lookup?\n&gt;\n&gt;\n&gt;\n&gt; We are using a custom QueueAssignmentPolicy - is that likely to be relevant? Are there any unwritten constraints on QueueAssignmentPolicy-s - for example do dns lookups need to be in the\n&gt;\n&gt; same queue as the host they refer to?\n&gt;\n&gt;\n&gt;\n&gt; regards,\n&gt;\n&gt; --\n&gt;\n&gt; Colin Rosenthal PhD\n&gt;\n&gt; Senior IT Consultant\n&gt;\n&gt; Royal Danish Library (Aarhus)\n&gt;\n&gt;\n&gt; [cid:Logo_697e5c4d-8564-4613-9ee7-75e0d1766f10.png]\n&gt;               Fyrirvari / Disclaimer&lt;http://fyrirvari.landsbokasafn.is/&gt; | Leiddu hugann að umhverfinu áður en þú prentar út [cid:tree_c14bcf3c-c37b-4c43-bf41-0f7a76548775.png]  | [cid:fb_e671d796-2724-434e-bbe5-d0b1061d706c.png] &lt;https://www.facebook.com/Landsb%C3%B3kasafn-%C3%8Dslands-H%C3%A1sk%C3%B3lab%C3%B3kasafn-49834298059&gt;  [cid:tw_be2becce-96c1-4a01-a13d-14487c25aec6.png] &lt;https://twitter.com/Landsbokasafn&gt;  [cid:yt_00448cc9-19ed-4462-892c-a5e26244c6fd.png] &lt;https://www.youtube.com/channel/UCl3SsrPtMBkSdKirHno9DkQ&gt;  [cid:inst_c09ee869-260e-4a99-8f85-a4b6d2dfed84.png] &lt;https://www.instagram.com/landsbokasafn&gt;\n\n\n-- \nColin Rosenthal PhD\nSenior IT Consultant\nRoyal Danish Library (Aarhus)\n\n\n"}}