{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":363624086,"authorName":"Ko, Lauren","from":"&quot;Ko, Lauren&quot; &lt;lauren.ko@...&gt;","profile":"laurendko","replyTo":"LIST","senderId":"aNrYL5FEvtKtL5SvsWSKCO10c6d3ynAdgxPUvqTRsE1lXfsWip6rtmjzNqDQZHKS3IafsH94qcpKXsP_XZzGAoW4q7DrO80","spamInfo":{"isSpam":false,"reason":"0"},"subject":"RE: [archive-crawler] Umbra/RabbitMQ Problem","postDate":"1438213575","msgId":8729,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PENZMVBSMDEwMU1CMTAwMUQ0ODg2NUFFNUE2RTE2QzQ4QkJGRTQ4QzBAQ1kxUFIwMTAxTUIxMDAxLnByb2QuZXhjaGFuZ2VsYWJzLmNvbT4=","inReplyToHeader":"PDU1QTVDMzIwLjIwMDA2MDBAZ214LmRlPg==","referencesHeader":"PDU1OUE1ODJFLjMwMDAwMDlAZ214LmRlPgk8Q0FBLXo3MCtuTndDRnZBX3pfcV8zZ01vcHJSazNNTmR0M3dlU3FQS1BjZGtQUWpOODJBQG1haWwuZ21haWwuY29tPgk8NTU5QjRBM0EuNjAzMDYwOEBnbXguZGU+CTxDQUEtejcwSkxER3hvamNaNFF3S3NaRUpjY2Y5Z1d5c1RrUWpkcFZfaWdfZ21Cc01jNkFAbWFpbC5nbWFpbC5jb20+CTw1NTlDOUZCOC44MDkwMjA4QGdteC5kZT4gPENBQS16NzBLK2diMGtydkI1X29UcXFrZEJQR1Y1VG8tQz1pUGQtZmNOc0Q3WVExWlc0d0BtYWlsLmdtYWlsLmNvbT4sPDU1QTVDMzIwLjIwMDA2MDBAZ214LmRlPg=="},"prevInTopic":8725,"nextInTopic":8730,"prevInTime":8728,"nextInTime":8730,"topicId":8714,"numMessagesInTopic":11,"msgSnippet":"Hi Markus and Noah, After reading this thread and having been curious about Heritrix with Umbra, I installed RabbitMQ and Umbra and configured Heritrix with an","rawEmail":"Return-Path: &lt;Lauren.Ko@...&gt;\r\nX-Sender: Lauren.Ko@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 18746 invoked by uid 102); 29 Jul 2015 23:46:20 -0000\r\nX-Received: from unknown (HELO mtaq5.grp.bf1.yahoo.com) (10.193.84.36)\n  by m14.grp.bf1.yahoo.com with SMTP; 29 Jul 2015 23:46:20 -0000\r\nX-Received: (qmail 31089 invoked from network); 29 Jul 2015 23:46:20 -0000\r\nX-Received: from unknown (HELO mta1002.groups.mail.bf1.yahoo.com) (98.139.170.166)\n  by mtaq5.grp.bf1.yahoo.com with SMTP; 29 Jul 2015 23:46:20 -0000\r\nX-Original-Return-Path: &lt;Lauren.Ko@...&gt;\r\nX-Received-SPF: pass (domain of unt.edu designates 157.56.111.116 as permitted sender)\r\nX-YMailISG: PTTZWAEWLDv9zVn_jDtUXyhETFBK2B2RKnz4ykk9c2NZRM8_\n C6ivnIOQhGDg4oRh.KE6Aa5PNurNCzHfeso30noX3_p0ybUkWjY6px5ijEOe\n 3yhMSEpgOMPthrinsGiQQiGzst5zYPr8iu9AKRoWcr2bWnH80RlPKr4ATUVO\n 0k_aEIrEMp8WLHe8G6DdyQPZ6vZObQc36rPQ9yycSPGhOFYdTrE934uF2UJ8\n .lEmZBf.4ww6VW0N_xvPc9EHQblnB0_iLtOkanXtQlJLFE5SWCgsqBGx2BVc\n 6Xnrj8vsTVyb0wj6yf_9PjjRj8zMk0CiRA.GwI3f7XW4dkw1je8YTKuEZUmq\n gxtkf3txDtajwqclbd9j9WVMXLzWD05zHzP9gZQndhNT1BL775sdkKvHQi0c\n 8iMbznESkSbqKL3JsN5Deunv1G7F2_owJGMyj72x20ooFIJnbrW3ibrKp98r\n BLXcjaOM2583XXiLwooNcFKpDV0m7PUxMEsJ9sRiyvCyDGynev3MwvZWZWN.\n fDWg6ULj8tbMBMT5XXeq9ZpG.X8gp6naAyuiPBzTnmaGOOY4Yj3HOX21XOej\n XN9ScoFzQ9mTkLgN2FFUcR7AMxVNmH53ypxgGAFtEMuS33Rp0061ccZAsMsd\n nCNW3KY4LNrIAC2OPWnMKtdxRLvZBE114hzA_slYVGe5eNJquAo88fJZb76o\n uTtgThC1s7h0S8c1joUTyFyVkEkaEE8o2zHBq4hV8OFcH6VhcnfIXWDIZ6si\n DH1RS1o9hecrlpfaLswuXSP5iqSzgY0UHdIajUVMyxxFC6f8JSE4mDy7NeoU\n borjG1Zict9IfVd6GyCCu27YDbNhLm9blzPoG7MCPVXWhQMMQgsPuB6YwQ2N\n GXWyEIfeg11vETsPFn8xtE5mf2AN1ti.poVozEgT_nEHHYURx4NrH2i2l9on\n jKyguU6kq9EF.Lpz6duFVxZCWgwWYBeIXPgaKuurQAOchSQpedeeH75LmL_e\n NCMzdZO3DETvGL7isjtzXYr.8O_k9I_dyv_1in59ZVnGiV6z_aHL0aYE9Rzm\n Ob5vQVBwImwCRuAz2gzdAmibq7d9G8Cdddr4tqyqgFx6hWf.Rxq_j6RbmpF4\n eDAd.sQmxIVX19juHWIt17vV_uV9l4kIw6ii0kXfDD7FNYkjUmEcisUQ2kWH\n xs8CbCYfqRQ6pZ5zPs3FBUjCPwKr3Hj3.WAHjbaRvmecPRo1uQ0Vzy4aaMYD\n 3nJy.mONwVLmbRgwRSq8E58nu2O7nNHIR_GrJ7m4cvFFFOfqPdPSYACk3rnz\n wYxdn75_uEJtv379dWIZgh7IJneHySBXwTuw9HtCfhwqr0XxzuWf06VgAPYA\n MfDwmhbITLLKhQDRba59z.HuNWrsOWDGfB5a9yeQ50RzCvBZZ4gsN14Juneu\n lLJVjgelFgkm2ufvPwp4upaXRDiXLXRN90sgCwkYeZhvXm02DfayXGsc1zrd\n BQDGB04KZVWqII8Qq9x6p6koXinHvEAKZ9CjDvmbcY4xDcrm\r\nAuthentication-Results: mta1002.groups.mail.bf1.yahoo.com  from=unt.edu; domainkeys=neutral (no sig);  from=unt.edu; dkim=neutral (no sig)\r\nX-Received: from 127.0.0.1  (EHLO na01-bn1-obe.outbound.protection.outlook.com) (157.56.111.116)\n  by mta1002.groups.mail.bf1.yahoo.com with SMTPS; Wed, 29 Jul 2015 23:46:16 +0000\r\nX-Received: from CY1PR0101MB1001.prod.exchangelabs.com (10.160.224.151) by\n CY1PR0101MB1002.prod.exchangelabs.com (10.160.224.152) with Microsoft SMTP\n Server (TLS) id 15.1.225.19; Wed, 29 Jul 2015 23:46:15 +0000\r\nX-Received: from CY1PR0101MB1001.prod.exchangelabs.com ([10.160.224.151]) by\n CY1PR0101MB1001.prod.exchangelabs.com ([10.160.224.151]) with mapi id\n 15.01.0225.018; Wed, 29 Jul 2015 23:46:15 +0000\r\nTo: &quot;archive-crawler@yahoogroups.com&quot; &lt;archive-crawler@yahoogroups.com&gt;\r\nThread-Topic: [archive-crawler] Umbra/RabbitMQ Problem\r\nThread-Index: AQHQvnGUuqDBi8twSkuLwFa7k1kwlp3bzGMAgBdkthY=\r\nDate: Wed, 29 Jul 2015 23:46:15 +0000\r\nMessage-ID: &lt;CY1PR0101MB1001D48865AE5A6E16C48BBFE48C0@...&gt;\r\nReferences: &lt;559A582E.3000009@...&gt;\n\t&lt;CAA-z70+nNwCFvA_z_q_3gMoprRk3MNdt3weSqPKPcdkPQjN82A@...&gt;\n\t&lt;559B4A3A.6030608@...&gt;\n\t&lt;CAA-z70JLDGxojcZ4QwKsZEJccf9gWysTkQjdpV_ig_gmBsMc6A@...&gt;\n\t&lt;559C9FB8.8090208@...&gt;\n &lt;CAA-z70K+gb0krvB5_oTqqkdBPGV5To-C=iPd-fcNsD7YQ1ZW4w@...&gt;,&lt;55A5C320.2000600@...&gt;\r\nIn-Reply-To: &lt;55A5C320.2000600@...&gt;\r\nAccept-Language: en-US\r\nContent-Language: en-US\r\nX-MS-Has-Attach:\r\nX-MS-TNEF-Correlator:\r\nauthentication-results: yahoogroups.com; dkim=none (message not signed)\n header.d=none;\r\nx-microsoft-exchange-diagnostics: 1;CY1PR0101MB1002;5:zKH8dfG1gvZ3XcJi2avge0VIkaf320+T3e09WRVW/GEK9MhzteDSLW+jDE2tJ8IwxUCdIMGZFtVpFWdTn1MI0zeG1IBQWvcYyOIrFN1xasQ2bytwZy//TSCAs40PValU9qxkbObTE8I4jFGrBHfMHA==;24:HNCe6UAcErlcIw+D6fEBuvZfRwJDGs3jbdffPsUzLHqbQA8Ag+vDLRGDGEOm4GaVQTfdDcl7bcHSiYndT3wN4ifW123waiSkXpo+R599GHU=;20:wdp/+lau1FPvrxH/y+vRBqE00NwDq/lZ/wtY3EUJZoUVt46UGYdFUTQgLiiXu/lGRndzG0PJlZtYVH46hyjMMA==\r\nx-microsoft-antispam: UriScan:;BCL:0;PCL:0;RULEID:(42139001);SRVR:CY1PR0101MB1002;\r\ncy1pr0101mb1002: X-MS-Exchange-Organization-RulesExecuted\r\nx-microsoft-antispam-prvs: &lt;CY1PR0101MB1002BACE43D09B2B56B3713DE48C0@...&gt;\r\nx-exchange-antispam-report-test: UriScan:;\r\nx-exchange-antispam-report-cfa-test: BCL:0;PCL:0;RULEID:(5005006)(3002001);SRVR:CY1PR0101MB1002;BCL:0;PCL:0;RULEID:;SRVR:CY1PR0101MB1002;\r\nx-forefront-prvs: 0652EA5565\r\nx-forefront-antispam-report: SFV:NSPM;SFS:(10019020)(6009001)(24454002)(377424004)(377454003)(164054003)(2900100001)(77156002)(15975445007)(86362001)(76176999)(102836002)(50986999)(5001960100002)(87936001)(77096005)(107886002)(74316001)(89122001)(106116001)(54356999)(75432002)(2351001)(450100001)(88552001)(110136002)(5003600100002)(90282001)(33656002)(2656002)(19580405001)(2950100001)(46102003)(92566002)(93886004)(40100003)(19580395003)(62966003)(189998001)(66066001)(2501003)(5002640100001)(122556002)(5890100001);DIR:OUT;SFP:1102;SCL:1;SRVR:CY1PR0101MB1002;H:CY1PR0101MB1001.prod.exchangelabs.com;FPR:;SPF:None;MLV:sfv;LANG:en;\r\nContent-Type: text/plain; charset=&quot;Windows-1252&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nMIME-Version: 1.0\r\nX-OriginatorOrg: unt.edu\r\nX-MS-Exchange-CrossTenant-originalarrivaltime: 29 Jul 2015 23:46:15.0295\n (UTC)\r\nX-MS-Exchange-CrossTenant-fromentityheader: Hosted\r\nX-MS-Exchange-CrossTenant-id: 70de1992-07c6-480f-a318-a1afcba03983\r\nX-MS-Exchange-Transport-CrossTenantHeadersStamped: CY1PR0101MB1002\r\nSubject: RE: [archive-crawler] Umbra/RabbitMQ Problem\r\nX-Yahoo-Group-Post: member; u=363624086; y=1TRTapavIbt17XO1JdlGj_qnv0gkOGFA-wdgcdUQFJrC14yW\r\nX-Yahoo-Profile: laurendko\r\nFrom: &quot;Ko, Lauren&quot; &lt;lauren.ko@...&gt;\r\n\r\nHi Markus and Noah,\n\nAfter reading this thread and having been curious abou=\r\nt Heritrix with Umbra, I installed RabbitMQ and Umbra and configured Heritr=\r\nix with an AMQPPublishProcessor and an AMQPUrlReceiver as described. With  =\r\na fresh RabbitMQ with no queues and hadn&#39;t started Umbra yet, when I launch=\r\ned the job I got this error:\n\nJul 28, 2015 9:53:24 PM org.archive.crawler.f=\r\nrontier.AMQPUrlReceiver$StarterRestarter run\nSEVERE: problem starting AMQP =\r\nconsumer (will try again after 30 seconds) (in thread &#39;AMQPUrlReceiver-star=\r\nter-restarter&#39;)\njava.io.IOException\n\tat com.rabbitmq.client.impl.AMQChannel=\r\n.wrap(AMQChannel.java:106)\n\tat com.rabbitmq.client.impl.AMQChannel.wrap(AMQ=\r\nChannel.java:102)\n\tat com.rabbitmq.client.impl.AMQChannel.exnWrappingRpc(AM=\r\nQChannel.java:124)\n\tat com.rabbitmq.client.impl.ChannelN.queueBind(ChannelN=\r\n.java:825)\n\tat com.rabbitmq.client.impl.ChannelN.queueBind(ChannelN.java:84=\r\n0)\n\tat com.rabbitmq.client.impl.ChannelN.queueBind(ChannelN.java:61)\n\tat or=\r\ng.archive.crawler.frontier.AMQPUrlReceiver$StarterRestarter.run(AMQPUrlRece=\r\niver.java:128)\nCaused by: com.rabbitmq.client.ShutdownSignalException: chan=\r\nnel error; reason: {#method&lt;channel.close&gt;(reply-code=3D404, reply-text=3DN=\r\nOT_FOUND - no exchange &#39;umbra&#39; in vhost &#39;/&#39;, class-id=3D50, method-id=3D20)=\r\n, null, &quot;&quot;}\n\tat com.rabbitmq.utility.ValueOrException.getValue(ValueOrExcep=\r\ntion.java:67)\n\tat com.rabbitmq.utility.BlockingValueOrException.uninterrupt=\r\nibleGetValue(BlockingValueOrException.java:33)\n\tat com.rabbitmq.client.impl=\r\n.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:343)\n\tat com.r=\r\nabbitmq.client.impl.AMQChannel.privateRpc(AMQChannel.java:216)\n\tat com.rabb=\r\nitmq.client.impl.AMQChannel.exnWrappingRpc(AMQChannel.java:118)\n\t... 4 more=\r\n\nCaused by: com.rabbitmq.client.ShutdownSignalException: channel error; rea=\r\nson: {#method&lt;channel.close&gt;(reply-code=3D404, reply-text=3DNOT_FOUND - no =\r\nexchange &#39;umbra&#39; in vhost &#39;/&#39;, class-id=3D50, method-id=3D20), null, &quot;&quot;}\n\ta=\r\nt com.rabbitmq.client.impl.ChannelN.asyncShutdown(ChannelN.java:474)\n\tat co=\r\nm.rabbitmq.client.impl.ChannelN.processAsync(ChannelN.java:315)\n\tat com.rab=\r\nbitmq.client.impl.AMQChannel.handleCompleteInboundCommand(AMQChannel.java:1=\r\n44)\n\tat com.rabbitmq.client.impl.AMQChannel.handleFrame(AMQChannel.java:91)=\r\n\n\tat com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java=\r\n:551)\n\nbecause no &quot;umbra&quot; exchange existed at the time of trying to start t=\r\nhe consumer. These errors continue until the job is unpaused and the queue =\r\nis declared by the AMQPProducer publishing a message or when Umbra is start=\r\ned and declares the exchange. Should the exchange be declared in AMQPUrlRec=\r\neiver to prevent these errors being thrown in such cases?\n\nSecond, similar =\r\nto Markus, I would see sentToAMQP in the crawl log, but nothing was coming =\r\nback. Looking at RabbitMQ I noticed the messages were being sent from Herit=\r\nrix to the &quot;umbra&quot; exchange, but then they weren&#39;t going to the queue accor=\r\nding to the &quot;urls&quot; routing key given by Heritrix. Looking at the &quot;urls&quot; que=\r\nue that umbra had created, it didn&#39;t have a routing key affiliated with it.=\r\n When I assigned the &quot;urls&quot; queue a routing key of &quot;urls&quot;, things started w=\r\norking and Heritrix started getting URLs from Umbra.\n\nLauren Ko\nUNT Librari=\r\nes\n\n________________________________________\nFrom: archive-crawler@yahoogro=\r\nups.com [archive-crawler@yahoogroups.com]\nSent: Tuesday, July 14, 2015 9:19=\r\n PM\nTo: archive-crawler@yahoogroups.com\nSubject: Re: [archive-crawler] Umbr=\r\na/RabbitMQ Problem\n\nHi Noah,\n\nI noticed that the used amqp library is for t=\r\nhe rabbitmq version 3.2.1.\nI changed my rabbitmq to that version and now I =\r\ndont get these errors anymore.\n\nI see in my heritrix logs that the AmqpRece=\r\niver was started, is running and listening but I still get no answers from =\r\nRabbitMQ.\nStrange ... but now I think too that the problem might be anythin=\r\ng with rabbitmq. I didnt configure anything different to the default except=\r\n that I enabled the rabbitmq_management plugin\n\n\nCheers,\nMarkus\n\n\n\nAm 15.07=\r\n.2015 um 03:04 schrieb Noah Levitt nlevitt@...&lt;mailto:nlevitt@archi=\r\nve.org&gt; [archive-crawler]:\n\n\nHello Markus,\n\nSorry this slipped my mind unti=\r\nl now. I don&#39;t see anything wrong with\nyour configuration. Is it possible y=\r\nour rabbitmq is overloaded? I&#39;m\nnot sure what else to look at.\n\nNoah\n\nOn Tu=\r\ne, Jul 7, 2015 at 8:57 PM, &#39;Markus.Mirsberger&#39;\nmarkus.mirsberger@...&lt;mai=\r\nlto:markus.mirsberger@...&gt; [archive-crawler]\n&lt;archive-crawler@yahoogroup=\r\ns.com&gt;&lt;mailto:archive-crawler@yahoogroups.com&gt; wrote:\n&gt; [Attachment(s) from=\r\n Markus.Mirsberger included below]\n&gt;\n&gt; Hi Noah,\n&gt;\n&gt; I don&#39;t even have an ow=\r\nn rabbitmq config as it seemed to work out of the box\n&gt; with the default se=\r\nttings.\n&gt; I only activated the rabbitmq management plugin.\n&gt;\n&gt; I attached t=\r\nhe crawler-beans.cxml for the specific crawl.\n&gt;\n&gt;\n&gt; Thanks,\n&gt; Markus\n&gt;\n&gt;\n&gt; =\r\nAm 08.07.2015 um 03:40 schrieb Noah Levitt nlevitt@...&lt;mailto:nlevi=\r\ntt@...&gt;\n&gt; [archive-crawler]:\n&gt;\n&gt;\n&gt; Hello Markus,\n&gt;\n&gt; Not sure what&#39;=\r\ns going on. I looked at the code where your exception is\n&gt; coming from, and=\r\n googled your stack trace, but didn&#39;t find anything\n&gt; particularly helpful.=\r\n If you want to send your full crawler-beans.cxml I can\n&gt; take a look. Ther=\r\ne&#39;s nothing unusual in your rabbitmq configuration is\n&gt; there?\n&gt;\n&gt; Noah\n&gt;\n&gt;=\r\n\n&gt; On Mon, Jul 6, 2015 at 8:40 PM, &#39;Markus.Mirsberger&#39; markus.mirsberger@gm=\r\nx.de&lt;mailto:markus.mirsberger@...&gt;\n&gt; [archive-crawler] &lt;archive-crawler@=\r\nyahoogroups.com&gt;&lt;mailto:archive-crawler@yahoogroups.com&gt; wrote:\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;=\r\n Hi Noah,\n&gt;&gt;\n&gt;&gt; thanks for the help. I configured my two beans similar to y=\r\nours but the\n&gt;&gt; problem persists.\n&gt;&gt; It looks like there is a connection ti=\r\nmeout but the publisher can connect\n&gt;&gt; to the same Uri and send URLs to the=\r\n queue.\n&gt;&gt;\n&gt;&gt; thats my configuration:\n&gt;&gt;\n&gt;&gt; &lt;bean id=3D&quot;amqpPublishProcesso=\r\nr&quot;\n&gt;&gt; class=3D&quot;org.archive.modules.AMQPPublishProcessor&quot;&gt;\n&gt;&gt; &lt;property name=\r\n=3D&quot;amqpUri&quot;\n&gt;&gt; value=3D&quot;amqp://guest:guest@localhost:5672/%2f&quot;/&gt;\n&gt;&gt; &lt;prope=\r\nrty name=3D&quot;clientId&quot; value=3D&quot;myqueue&quot;/&gt;\n&gt;&gt; &lt;/bean&gt;\n&gt;&gt; &lt;bean id=3D&quot;amqpUrl=\r\nReceiver&quot;\n&gt;&gt; class=3D&quot;org.archive.crawler.frontier.AMQPUrlReceiver&quot;&gt;\n&gt;&gt; &lt;pr=\r\noperty name=3D&quot;queueName&quot; value=3D&quot;myqueue&quot;/&gt;\n&gt;&gt; &lt;property name=3D&quot;amqpUri&quot;=\r\n\n&gt;&gt; value=3D&quot;amqp://guest:guest@localhost:5672/%2f&quot;/&gt;\n&gt;&gt; &lt;/bean&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; a=\r\nnd here is the stack trace of the exception:\n&gt;&gt;\n&gt;&gt; 2015-07-07 03:19:14.660 =\r\nSEVERE thread-248399\n&gt;&gt; org.archive.crawler.frontier.AMQPUrlReceiver$Starte=\r\nrRestarter.run() problem\n&gt;&gt; starting AMQP consumer (will try again after 30=\r\n seconds)\n&gt;&gt; java.io.IOException\n&gt;&gt; at com.rabbitmq.client.impl.AMQChannel.=\r\nwrap(AMQChannel.java:106)\n&gt;&gt; at com.rabbitmq.client.impl.AMQChannel.wrap(AM=\r\nQChannel.java:102)\n&gt;&gt; at\n&gt;&gt; com.rabbitmq.client.impl.AMQConnection.start(AM=\r\nQConnection.java:378)\n&gt;&gt; at\n&gt;&gt; com.rabbitmq.client.ConnectionFactory.newCon=\r\nnection(ConnectionFactory.java:516)\n&gt;&gt; at\n&gt;&gt; com.rabbitmq.client.Connection=\r\nFactory.newConnection(ConnectionFactory.java:533)\n&gt;&gt; at\n&gt;&gt; org.archive.craw=\r\nler.frontier.AMQPUrlReceiver.connection(AMQPUrlReceiver.java:190)\n&gt;&gt; at\n&gt;&gt; =\r\norg.archive.crawler.frontier.AMQPUrlReceiver.channel(AMQPUrlReceiver.java:2=\r\n03)\n&gt;&gt; at\n&gt;&gt; org.archive.crawler.frontier.AMQPUrlReceiver$StarterRestarter.=\r\nrun(AMQPUrlReceiver.java:119)\n&gt;&gt; Caused by: com.rabbitmq.client.ShutdownSig=\r\nnalException: connection error;\n&gt;&gt; reason: java.net.SocketTimeoutException:=\r\n Timeout during Connection\n&gt;&gt; negotiation\n&gt;&gt; at\n&gt;&gt; com.rabbitmq.utility.Val=\r\nueOrException.getValue(ValueOrException.java:67)\n&gt;&gt; at\n&gt;&gt; com.rabbitmq.util=\r\nity.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrExcepti=\r\non.java:33)\n&gt;&gt; at\n&gt;&gt; com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinu=\r\nation.getReply(AMQChannel.java:343)\n&gt;&gt; at\n&gt;&gt; com.rabbitmq.client.impl.AMQCo=\r\nnnection.start(AMQConnection.java:321)\n&gt;&gt; ... 5 more\n&gt;&gt; Caused by: java.net=\r\n.SocketTimeoutException: Timeout during Connection\n&gt;&gt; negotiation\n&gt;&gt; at\n&gt;&gt; =\r\ncom.rabbitmq.client.impl.AMQConnection.handleSocketTimeout(AMQConnection.ja=\r\nva:584)\n&gt;&gt; at\n&gt;&gt; com.rabbitmq.client.impl.AMQConnection.access$500(AMQConne=\r\nction.java:63)\n&gt;&gt; at\n&gt;&gt; com.rabbitmq.client.impl.AMQConnection$MainLoop.run=\r\n(AMQConnection.java:559)\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; Thanks,\n&gt;&gt; Markus\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; Am 07.07.20=\r\n15 um 07:24 schrieb Noah Levitt nlevitt@...&lt;mailto:nlevitt@archive.=\r\norg&gt;\n&gt;&gt; [archive-crawler]:\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; Hello Markus,\n&gt;&gt;\n&gt;&gt; There is something =\r\nthat\n&gt;&gt; https://sbforge.org/display/NAS/Integrating+Umbra+And+Heritrix+3 ne=\r\nglects to\n&gt;&gt; mention that might explain the problem you&#39;re seeing. AMPQUrlR=\r\neceiver needs\n&gt;&gt; to be configured with a &quot;queueName&quot; that matches the clien=\r\ntId set on\n&gt;&gt; AMQPPublishProcessor.\n&gt;&gt;\n&gt;&gt; Here is an example of the relevan=\r\nt configuration from an archive-it crawl\n&gt;&gt; job. Our shouldProcessRule send=\r\ns only seeds to umbra. There are reasons for\n&gt;&gt; the particular way it works=\r\n which I can explain if anyone is wondering. :)\n&gt;&gt; But the important thing =\r\nto be aware of is that the shouldProcessRule can be\n&gt;&gt; used to limit the um=\r\nbra treatment to the urls of your choice.\n&gt;&gt;\n&gt;&gt; &lt;bean id=3D&quot;amqpUrlReceiver=\r\n&quot;\n&gt;&gt; class=3D&quot;org.archive.crawler.frontier.AMQPUrlReceiver&quot;&gt;\n&gt;&gt; &lt;property n=\r\name=3D&quot;queueName&quot;\n&gt;&gt; value=3D&quot;archiveit.prod.9876-20150704232858960&quot;/&gt;\n&gt;&gt; &lt;=\r\nproperty name=3D&quot;amqpUri&quot;\n&gt;&gt; value=3D&quot;amqp://guest:guest@localhost:5672/%2f=\r\n&quot;/&gt;\n&gt;&gt; &lt;/bean&gt;\n&gt;&gt;\n&gt;&gt; &lt;bean id=3D&quot;amqpPublishProcessor&quot;\n&gt;&gt; class=3D&quot;org.arch=\r\nive.modules.AMQPPublishProcessor&quot;&gt;\n&gt;&gt; &lt;property name=3D&quot;amqpUri&quot;\n&gt;&gt; value=\r\n=3D&quot;amqp://guest:guest@localhost:5672/%2f&quot;/&gt;\n&gt;&gt; &lt;property name=3D&quot;clientId&quot;=\r\n\n&gt;&gt; value=3D&quot;archiveit.prod.9876-20150704232858960&quot;/&gt;\n&gt;&gt; &lt;property name=3D&quot;=\r\nshouldProcessRule&quot;&gt;\n&gt;&gt; &lt;bean\n&gt;&gt; class=3D&quot;org.archive.modules.deciderules.Ex=\r\npressionDecideRule&quot;&gt;\n&gt;&gt; &lt;property name=3D&quot;decision&quot; value=3D&quot;REJECT&quot;/&gt;\n&gt;&gt; &lt;=\r\nproperty name=3D&quot;groovyExpression&quot;\n&gt;&gt; value=3D&quot;!(curi.via =3D=3D null && (c=\r\nuri.hasBeenLinkExtracted() ||\n&gt;&gt; (curi.getFetchStatus() &gt;=3D 300 && curi.ge=\r\ntFetchStatus() &lt;\n&gt;&gt; 400)))&quot;/&gt;\n&gt;&gt; &lt;/bean&gt;\n&gt;&gt; &lt;/property&gt;\n&gt;&gt; &lt;/bean&gt;\n&gt;&gt;\n&gt;&gt; If=\r\n the problem persists, please send the full stack trace.\n&gt;&gt;\n&gt;&gt; Noah\n&gt;&gt;\n&gt;&gt;\n&gt;=\r\n&gt; On Mon, Jul 6, 2015 at 3:27 AM, &#39;Markus.Mirsberger&#39;\n&gt;&gt; markus.mirsberger@=\r\ngmx.de&lt;mailto:markus.mirsberger@...&gt; [archive-crawler] &lt;archive-crawler@=\r\nyahoogroups.com&gt;&lt;mailto:archive-crawler@yahoogroups.com&gt;\n&gt;&gt; wrote:\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n=\r\n&gt;&gt;&gt;\n&gt;&gt;&gt; Hi,\n&gt;&gt;&gt;\n&gt;&gt;&gt; I am trying to crawl websites through Umbra / RabbitMQ =\r\nto get more URLs\n&gt;&gt;&gt; generated by JS.\n&gt;&gt;&gt; I set up everything as it is desc=\r\nribed here:\n&gt;&gt;&gt; https://sbforge.org/display/NAS/Integrating+Umbra+And+Herit=\r\nrix+3\n&gt;&gt;&gt;\n&gt;&gt;&gt; I can see in my crawl logs that the URLs are beeing sent to\n&gt;=\r\n&gt;&gt; Umbra/RabbitMQ because of the Status sentToAMQP\n&gt;&gt;&gt; I think this means t=\r\nhat so far my Requests are successfully sent .....I\n&gt;&gt;&gt; can see the request=\r\ns in the RabbitMQ Webadmin as well.\n&gt;&gt;&gt;\n&gt;&gt;&gt; The problem is that I can not s=\r\nee anything comming back from\n&gt;&gt;&gt; Umbra/RabbitMQ ..... the documentation sa=\r\nys that I should see URLs with the\n&gt;&gt;&gt; status received FromAMQP. This doesn=\r\nt happen but instead I get this in my\n&gt;&gt;&gt; job logs:\n&gt;&gt;&gt;\n&gt;&gt;&gt; SEVERE problem =\r\nstarting AMQP consumer (will try again after 30 seconds)\n&gt;&gt;&gt; (in thread &#39;AM=\r\nQPUrlReceiver-starter-restarter&#39;)\n&gt;&gt;&gt;\n&gt;&gt;&gt; My logfile from rabbitmq says thi=\r\ns:\n&gt;&gt;&gt;\n&gt;&gt;&gt; =3DINFO REPORT=3D=3D=3D=3D 6-Jul-2015::12:24:41 =3D=3D=3D\n&gt;&gt;&gt; ac=\r\ncepting AMQP connection &lt;0.15717.1733&gt; (127.0.0.1:45721 -&gt;\n&gt;&gt;&gt; 127.0.0.1:56=\r\n72)\n&gt;&gt;&gt;\n&gt;&gt;&gt; =3DINFO REPORT=3D=3D=3D=3D 6-Jul-2015::12:24:45 =3D=3D=3D\n&gt;&gt;&gt; a=\r\nccepting AMQP connection &lt;0.15762.1733&gt; (127.0.0.1:45724 -&gt;\n&gt;&gt;&gt; 127.0.0.1:5=\r\n672)\n&gt;&gt;&gt;\n&gt;&gt;&gt; =3DINFO REPORT=3D=3D=3D=3D 6-Jul-2015::12:25:21 =3D=3D=3D\n&gt;&gt;&gt; =\r\nclosing AMQP connection &lt;0.15762.1733&gt; (127.0.0.1:45724 -&gt;\n&gt;&gt;&gt; 127.0.0.1:56=\r\n72)\n&gt;&gt;&gt;\n&gt;&gt;&gt; =3DINFO REPORT=3D=3D=3D=3D 6-Jul-2015::12:25:21 =3D=3D=3D\n&gt;&gt;&gt; c=\r\nlosing AMQP connection &lt;0.15717.1733&gt; (127.0.0.1:45721 -&gt;\n&gt;&gt;&gt; 127.0.0.1:567=\r\n2)\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; As you can see rabbitmq is acception 2 connections from heri=\r\ntrix and when\n&gt;&gt;&gt; I finish the crawl both are closed.\n&gt;&gt;&gt; I think they are =\r\nused to send the URLs. After acception the connections\n&gt;&gt;&gt; and some seconds=\r\n the &quot;AMQP consumer&quot; problem occours and keeps comming every\n&gt;&gt;&gt; 30 seconds=\r\n as the AMQPUrlReceiver tries to start a consumer.\n&gt;&gt;&gt;\n&gt;&gt;&gt; Does anyone have=\r\n an idea what might be the problem? Did I miss anything\n&gt;&gt;&gt; which wasn&#39;t de=\r\nscribed in the howto above?\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; Thanks,\n&gt;&gt;&gt; Markus\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n=\r\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n\n\n\n"}}