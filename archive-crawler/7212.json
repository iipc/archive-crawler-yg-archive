{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":325624130,"authorName":"Noah Levitt","from":"Noah Levitt &lt;nlevitt@...&gt;","replyTo":"LIST","senderId":"B9GIuH1N0JQbACYakQRDhBp46j1Kfa1CZ4_hN6sWAPtvC99ANvaU5PqfbGKlhPauyMu4IonS7Cs3wkPcdcs1sWT_BybjTEft","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] MatchesFilePatternDecideRule in Heritrix 1.14.4","postDate":"1311097674","msgId":7212,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDRFMjVDMzRBLjYwNjA4MDNAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGl2dm5nZCt1YTNtQGVHcm91cHMuY29tPg==","referencesHeader":"PGl2dm5nZCt1YTNtQGVHcm91cHMuY29tPg=="},"prevInTopic":7211,"nextInTopic":0,"prevInTime":7211,"nextInTime":7213,"topicId":7211,"numMessagesInTopic":2,"msgSnippet":"Hello Nacho, Well, mimetype-report.txt reflects the mimetypes declared in the http response headers, whereas MatchesFilePatternDecideRule looks only at the","rawEmail":"Return-Path: &lt;nlevitt@...&gt;\r\nX-Sender: nlevitt@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 78149 invoked from network); 19 Jul 2011 17:47:58 -0000\r\nX-Received: from unknown (66.196.94.106)\n  by m17.grp.re1.yahoo.com with QMQP; 19 Jul 2011 17:47:58 -0000\r\nX-Received: from unknown (HELO mail.archive.org) (207.241.224.6)\n  by mta2.grp.re1.yahoo.com with SMTP; 19 Jul 2011 17:47:56 -0000\r\nX-Received: from localhost (localhost [127.0.0.1])\n\tby mail.archive.org (Postfix) with ESMTP id 0C8936840162;\n\tTue, 19 Jul 2011 10:47:54 -0700 (PDT)\r\nX-Received: from mail.archive.org ([127.0.0.1])\n\tby localhost (mail.archive.org [127.0.0.1]) (amavisd-new, port 10024)\n\twith LMTP id mwixRcfsMLJS; Tue, 19 Jul 2011 10:47:53 -0700 (PDT)\r\nX-Received: from Noah-Levitts-MacBook-Pro.local (76-192-161-105.lightspeed.sndgca.sbcglobal.net [76.192.161.105])\n\tby mail.archive.org (Postfix) with ESMTPSA id 456B36840154;\n\tTue, 19 Jul 2011 10:47:53 -0700 (PDT)\r\nMessage-ID: &lt;4E25C34A.6060803@...&gt;\r\nDate: Tue, 19 Jul 2011 10:47:54 -0700\r\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:5.0) Gecko/20110624 Thunderbird/5.0\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nCc: nch2012 &lt;knowledgeworksmadrid@...&gt;\r\nReferences: &lt;ivvngd+ua3m@...&gt;\r\nIn-Reply-To: &lt;ivvngd+ua3m@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nFrom: Noah Levitt &lt;nlevitt@...&gt;\r\nSubject: Re: [archive-crawler] MatchesFilePatternDecideRule in Heritrix 1.14.4\r\nX-Yahoo-Group-Post: member; u=325624130\r\n\r\nHello Nacho,\n\nWell, mimetype-report.txt reflects the mimetypes declared in the http response headers, whereas MatchesFilePatternDecideRule looks only at the urls. Any url, even if it doesn&#39;t end in .gif for example, could declare its mimetype as image/gif, and heritrix has no way of knowing that until it asks the server. So, there&#39;s not really a failsafe way to avoid fetching some images.\n\nBut you had the right idea putting a decide rule on your archiver. By the time the archiver runs, the url has been fetched, so a decision can be made whether to archive the url based on the mimetype. In H1 the rule could look like this:\n\n&lt;newObject name=&quot;rejectImages&quot; class=&quot;org.archive.crawler.deciderules.ContentTypeMatchesRegExpDecideRule&quot;&gt;\n   &lt;string name=&quot;decision&quot;&gt;REJECT&lt;/string&gt;\n   &lt;string name=&quot;regexp&quot;&gt;^image/.*$&lt;/string&gt;\n&lt;/newObject&gt;\n\nThe extra MatchesFilePatternDecideRules that you mentioned are at best redundant. You should keep the one in the scope and get rid of the rest, then add this new rule to the archiver, and you should be all set.\n\nNote that the images that are fetched will still be reported in mimetype-report.txt, but if you look inside your W/ARCs, you should find that they were not saved.\n\nNoah\n\n\nOn 2011-07-17 15:25 , nch2012 wrote:\n&gt; Hi,\n&gt; I am trying to filter out of my crawl any images. For this purpose I am using the MatchesFilePatternDecideRule, set to reject images (as predefined in Heritrix). I use the MatchesFilePatternDecideRule in scope, preselector, preprocessor, fetch processors, extractorHTTP, extractorHTML and archiver. But the rules seem unable to prevent the downloading and archiving of images (when I check &quot;mimetype-report.txt&quot; and the headers in the arc files I find evidence of images being downloaded and stored). When several rules are present I always place the MatchesFilePatternDecideRule last, so as to make its decision prevail.\n&gt; I started with the default configuration and added the MatchesFilePatternDecideRule rules.\n&gt;\n&gt; May be I am missing the obvious :(\n&gt; Any suggestions?\n&gt;\n&gt; Thanx.\n&gt; Nacho\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; ------------------------------------\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n\n"}}