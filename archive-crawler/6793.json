{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":361563137,"authorName":"Adam Broke≈°","from":"=?UTF-8?B?QWRhbSBCcm9rZcWh?= &lt;adam.brokes@...&gt;","profile":"goblin_cz","replyTo":"LIST","senderId":"hxTp8L37JQZgwz0hdeWBtAYKdDmFplTZoAaq5d0xQDv8UHZZf6BCmRyfST9TnwZexW1Z0PU2yUBFBS149rUPILcx1n118LMeBeddD91xexJfQ-GLXcv6xZFI8g","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] SSL certificate problem and integration of heritrix3","postDate":"1288449495","msgId":6793,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PEFBTkxrVGk9UzZaSGRrNEItdVlRX3kyVDBpTFoxcUs3WWJTTEtpRlpWVFdhUEBtYWlsLmdtYWlsLmNvbT4=","inReplyToHeader":"PDRDQzlGQzM5LjYwMDAyMDRAYXJjaGl2ZS5vcmc+","referencesHeader":"PEFBTkxrVGltTlJlank0X0dHbXY0dHpSbzFDQW1XMEt6bUpwWVIxN3ZacXRYaUBtYWlsLmdtYWlsLmNvbT4JPDRDQzlGQzM5LjYwMDAyMDRAYXJjaGl2ZS5vcmc+"},"prevInTopic":6790,"nextInTopic":6794,"prevInTime":6792,"nextInTime":6794,"topicId":6784,"numMessagesInTopic":5,"msgSnippet":"Hi Gordon, thank you! It is working now with no issues, I am just curious how could I monitor running jobs or send more specific commands to engine. Should I","rawEmail":"Return-Path: &lt;adam.brokes@...&gt;\r\nX-Sender: adam.brokes@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 7985 invoked from network); 30 Oct 2010 14:38:19 -0000\r\nX-Received: from unknown (98.137.34.44)\n  by m4.grp.sp2.yahoo.com with QMQP; 30 Oct 2010 14:38:19 -0000\r\nX-Received: from unknown (HELO mail-wy0-f170.google.com) (74.125.82.170)\n  by mta1.grp.sp2.yahoo.com with SMTP; 30 Oct 2010 14:38:18 -0000\r\nX-Received: by wyb35 with SMTP id 35so5690942wyb.15\n        for &lt;archive-crawler@yahoogroups.com&gt;; Sat, 30 Oct 2010 07:38:18 -0700 (PDT)\r\nMIME-Version: 1.0\r\nX-Received: by 10.227.68.206 with SMTP id w14mr13601540wbi.144.1288449496144;\n Sat, 30 Oct 2010 07:38:16 -0700 (PDT)\r\nX-Received: by 10.227.158.19 with HTTP; Sat, 30 Oct 2010 07:38:15 -0700 (PDT)\r\nIn-Reply-To: &lt;4CC9FC39.6000204@...&gt;\r\nReferences: &lt;AANLkTimNRejy4_GGmv4tzRo1CAmW0KzmJpYR17vZqtXi@...&gt;\n\t&lt;4CC9FC39.6000204@...&gt;\r\nDate: Sat, 30 Oct 2010 16:38:15 +0200\r\nMessage-ID: &lt;AANLkTi=S6ZHdk4B-uYQ_y2T0iLZ1qK7YbSLKiFZVTWaP@...&gt;\r\nTo: Gordon Mohr &lt;gojomo@...&gt;\r\nCc: archive-crawler@yahoogroups.com\r\nContent-Type: text/plain; charset=UTF-8\r\nContent-Transfer-Encoding: quoted-printable\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: =?UTF-8?B?QWRhbSBCcm9rZcWh?= &lt;adam.brokes@...&gt;\r\nReply-To: adam.brokes@...\r\nSubject: Re: [archive-crawler] SSL certificate problem and integration of heritrix3\r\nX-Yahoo-Group-Post: member; u=361563137; y=ON3j7Mezv5Xh5iDoi0yWrsUMoO7BB21uvpIQO0wOe3QdG3ft\r\nX-Yahoo-Profile: goblin_cz\r\n\r\nHi Gordon,\n\nthank you! It is working now with no issues, I am just curious =\r\nhow\ncould I monitor running jobs or send more specific commands to engine.\n=\r\nShould I use https://webarchive.jira.com/wiki/display/Heritrix/Heritrix+3.0=\r\n+API+Guide#Heritrix3.0APIGuide-ExecuteShellScriptinJob\nand send script comm=\r\nands to heritrix?\n\nBest regards,\n\nAdam\n--\nAdam Broke=C5=A1\nhttp://www.broke=\r\ns.net\nadam.brokes@...\n42799740\n\n\n\n2010/10/29 Gordon Mohr &lt;gojomo@arch=\r\nive.org&gt;:\n&gt; Hi, Adam.\n&gt;\n&gt; I&#39;m sorry for the difficulty making an HTTPS conn=\r\nection to the H3 web\n&gt; interface.\n&gt;\n&gt; In our usual usage/testing, we&#39;re usi=\r\nng either a web browser (which once you\n&gt; &#39;add exception&#39; doesn&#39;t care abou=\r\nt the declared hostname/CN in the server&#39;s\n&gt; cert), or &#39;curl&#39; with the &#39;-k&#39;=\r\n (--insecure) option (which also doesn&#39;t care\n&gt; about any of the cert detai=\r\nls, just that any cert is provided). So, we&#39;ve\n&gt; not seen a similar problem=\r\n before.\n&gt;\n&gt; It appears the HttpClient library is insisting that even after=\r\n a\n&gt; (self-signed) cert is locally added -- similar to a browser&#39;s &#39;add\n&gt; e=\r\nxception&#39; -- it still must declare the proper destination hostname.\n&gt;\n&gt; The=\r\nre might be a way to coax it to be more trusting, but looking at how we\n&gt; d=\r\nid it in Heritrix for its outbound HTTPS requests -- see\n&gt; ConfigurableX509=\r\nTrustManager and HeritrixSSLProtocolSocketFactory -- it\n&gt; looks a bit invol=\r\nved. (I suspect some other Java HTTP library is better for\n&gt; such casual un=\r\ntrusted use, but can&#39;t recommend any particular one offhand.)\n&gt;\n&gt; But, it l=\r\nooks like in the future we can give our ad-hoc self-signed\n&gt; certificate be=\r\ntter &#39;CN&#39; or &#39;SAN&#39; values so that connects to &#39;localhost&#39; may\n&gt; succeed. So=\r\n we&#39;ll investigate that.\n&gt;\n&gt; In the meantime, I think you can get the same =\r\neffect by replacing the cert\n&gt; we auto-created with one that will work bett=\r\ner for your purposes.\n&gt;\n&gt; More specifically:\n&gt;\n&gt; (1) Go to the directory wh=\r\nere the auto-generated &#39;adhoc.keystore&#39; exists and\n&gt; delete it.\n&gt;\n&gt; (2) Mak=\r\ne sure the &#39;keytool&#39; from your JDK is findable on your path\n&gt;\n&gt; (3) Run:\n&gt;\n=\r\n&gt; % keytool -keystore adhoc.keystore -storepass password -keypass password\n=\r\n&gt; -alias adhoc -genky -keyalg &quot;RSA&quot; -dname &quot;CN=3Dlocalhost&quot;\n&gt;\n&gt; (4) Relaunc=\r\nh Heritrix; it will now use this cert instead.\n&gt;\n&gt; (5) Follow the same inst=\r\nructions on that Groovy page to save the cert via\n&gt; the browser, install in=\r\n a client keystore, and use in your code.\n&gt;\n&gt; Now, the expected &#39;localhost&#39;=\r\n value should appear (instead of our previous\n&gt; placeholder CN value, &#39;heri=\r\ntrix ad-hoc https certificate&#39;) -- and I don&#39;t\n&gt; think you&#39;ll get the same =\r\nerror.\n&gt;\n&gt; Please let me know if this works.\n&gt;\n&gt; Regarding your other quest=\r\nion about best practices and docs for the H3\n&gt; web-remote REST interface, s=\r\nee:\n&gt;\n&gt; https://webarchive.jira.com/wiki/display/Heritrix/Heritrix+3.0+API+=\r\nGuide\n&gt;\n&gt; It&#39;s quite easy to use from the command-line via something like &#39;=\r\ncurl&#39;. JMX\n&gt; is gone from H3.\n&gt;\n&gt; Hope this helps,\n&gt;\n&gt; - Gordon @ IA\n&gt;\n&gt; On=\r\n 10/27/10 1:01 AM, Adam Broke=C5=A1 wrote:\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; Hallo,\n&gt;&gt;\n&gt;&gt; I am tryin=\r\ng to use REST connection to heritrix 3 engine in my\n&gt;&gt; groovy/grails applic=\r\nation and I have encounter strange problem which I\n&gt;&gt; am not sure how to so=\r\nlve.\n&gt;&gt;\n&gt;&gt; In the application the REST Client plugin is installed, which is=\r\n nothing\n&gt;&gt; else than HTTPBuilder class wrapper. Used without any modificat=\r\nion it\n&gt;&gt; throw Untrusted certificate exception.\n&gt;&gt; After reading documenta=\r\ntion on\n&gt;&gt; http://groovy.codehaus.org/modules/http-builder/doc/ssl.html I f=\r\nigure\n&gt;&gt; out that I need manually add heritrix certificate to keystore. I h=\r\nave:\n&gt;&gt;\n&gt;&gt; =C2=A0 1. exported certificate (chrome, firefox)\n&gt;&gt; =C2=A0 2. ad=\r\nded certificate to trustore with java keytool\n&gt;&gt; =C2=A0 3. copied trustore =\r\nfile to my application directory\n&gt;&gt; =C2=A0 4. inserted this code to applica=\r\ntion:\n&gt;&gt;\n&gt;&gt; withRest(uri: &quot;https://localhost:8443/engine&quot;) {\n&gt;&gt; =C2=A0 =C2=\r\n=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0def keyStore =3D KeyStore.getInstance(KeySto=\r\nre.defaultType)\n&gt;&gt;\n&gt;&gt; =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0getClass().g=\r\netResource(&quot;/truststore.jks&quot;).withInputStream {\n&gt;&gt; =C2=A0 =C2=A0 =C2=A0 =C2=\r\n=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0keyStore.load(it, &quot;password&quot;.toCharArray())\n=\r\n&gt;&gt; =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0}\n&gt;&gt;\n&gt;&gt; =C2=A0 =C2=A0 =C2=A0 =\r\n=C2=A0 =C2=A0 =C2=A0client.connectionManager.schemeRegistry.register(\n&gt;&gt; =\r\n=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0new Sc=\r\nheme(&quot;https&quot;, new SSLSocketFactory(keyStore),\n&gt;&gt; 443))\n&gt;&gt; =C2=A0 =C2=A0 =C2=\r\n=A0 =C2=A0 =C2=A0 =C2=A0[rest: client]\n&gt;&gt; =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=\r\n=A0 =C2=A0auth.basic &quot;admin&quot;, &quot;admin&quot;\n&gt;&gt; =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=\r\n =C2=A0def response =3D post(createpath: &quot;restJob&quot;, action: &quot;create&quot;)\n&gt;&gt; }\n=\r\n&gt;&gt;\n&gt;&gt; after execution this I always get this exception:\n&gt;&gt;\n&gt;&gt; javax.net.ssl=\r\n.SSLException: hostname in certificate didn&#39;t match:\n&gt;&gt; &lt;localhost&gt; !=3D &lt;h=\r\neritrix ad-hoc https certificate&gt;\n&gt;&gt;\n&gt;&gt; I tried few other combinations:\n&gt;&gt;\n=\r\n&gt;&gt; =C2=A0 =C2=A0* install heritrix on other host than localhost\n&gt;&gt; =C2=A0 =\r\n=C2=A0* give heritrix3 -s parameter at start to use other than default\n&gt;&gt; =\r\n=C2=A0 =C2=A0 =C2=A0keystore, password\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; Nothing helped me and hones=\r\ntly I am not big expert in certificates, so I\n&gt;&gt; run out of ideas and time =\r\nearmarked for that.\n&gt;&gt;\n&gt;&gt; What is best practice to use REST from my applica=\r\ntion?\n&gt;&gt;\n&gt;&gt; And aside all of that, I will probably need more tight integrat=\r\nion of\n&gt;&gt; Heritrix3 with my groovy app (it will be basically simpler\n&gt;&gt; Net=\r\narchiveSuite), I am going to discuss that in other mail, just to get\n&gt;&gt; the=\r\n right direction: is there any documentation on that? I need to do\n&gt;&gt; basic=\r\n crawler stuff, like starting jobs, monitoring jobs and getting\n&gt;&gt; informat=\r\nion about finished jobs. I like the script console idea, could I\n&gt;&gt; communi=\r\ncate with that console from outside? In heritrix 1, the JMX is\n&gt;&gt; used exte=\r\nnsively, is there still need for that in H3? Well, there are so\n&gt;&gt; many pos=\r\nsibilities to explore, but I will be delighted if someone with\n&gt;&gt; deep know=\r\nledge will point the direction.\n&gt;&gt;\n&gt;&gt; Thank you very much and have nice day=\r\n.\n&gt;&gt;\n&gt;&gt; Best regards,\n&gt;&gt;\n&gt;&gt; Adam Brokes\n&gt;&gt; --\n&gt;&gt; Adam Broke=C5=A1\n&gt;&gt; http:/=\r\n/www.brokes.net\n&gt;&gt; adam.brokes@... &lt;mailto:adam.brokes@...&gt;\n&gt;&gt; =\r\n42799740\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; \n&gt;\n\n"}}