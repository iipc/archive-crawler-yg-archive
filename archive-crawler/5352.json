{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"qTlnBmcpuHpQIMB69iSRd8DWImuiotc1BaRb5cUJnBLPITUGQam7Ma_wzLZie8fzrEdt6n2TTekgFZ_eAwb-fsGqZfTBa1Q","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] Re: &quot;Balanced&quot; crawl frontier","postDate":"1215477246","msgId":5352,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ4NzJCNUZFLjgwMTAwMDdAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGc0dDc4aStyazZqQGVHcm91cHMuY29tPg==","referencesHeader":"PGc0dDc4aStyazZqQGVHcm91cHMuY29tPg=="},"prevInTopic":5350,"nextInTopic":0,"prevInTime":5351,"nextInTime":5353,"topicId":5342,"numMessagesInTopic":5,"msgSnippet":"The force-queue-assignment option is available in both Heritrix 1.X and 2.0. Another option that may be appropriate is the TopmostAssignedSurt ","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 95790 invoked from network); 8 Jul 2008 00:34:07 -0000\r\nX-Received: from unknown (66.218.67.96)\n  by m48.grp.scd.yahoo.com with QMQP; 8 Jul 2008 00:34:07 -0000\r\nX-Received: from unknown (HELO relay01.pair.com) (209.68.5.15)\n  by mta17.grp.scd.yahoo.com with SMTP; 8 Jul 2008 00:34:07 -0000\r\nX-Received: (qmail 21864 invoked from network); 8 Jul 2008 00:34:03 -0000\r\nX-Received: from unknown (HELO ?192.168.1.15?) (unknown)\n  by unknown with SMTP; 8 Jul 2008 00:34:03 -0000\r\nX-pair-Authenticated: 67.180.197.118\r\nMessage-ID: &lt;4872B5FE.8010007@...&gt;\r\nDate: Mon, 07 Jul 2008 17:34:06 -0700\r\nUser-Agent: Thunderbird 2.0.0.14 (Windows/20080421)\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;g4t78i+rk6j@...&gt;\r\nIn-Reply-To: &lt;g4t78i+rk6j@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] Re: &quot;Balanced&quot; crawl frontier\r\nX-Yahoo-Group-Post: member; u=137285340; y=-hI5SexiJls9IV5b5RAWAgKIYIFQHgXL8BC6QZ1W0eTx\r\nX-Yahoo-Profile: gojomo\r\n\r\nThe &#39;force-queue-assignment&#39; option is available in both Heritrix 1.X \nand 2.0.\n\nAnother option that may be appropriate is the &quot;TopmostAssignedSurt&quot; \nQueueAssignmentPolicy. This puts URIs into queues based on the portion \nof their SURT form that is the &quot;topmost&quot; &quot;assigned&quot; domain.\n\nHere, &quot;topmost&quot; means closest to &quot;top-level-domains&quot;, like &quot;.COM&quot; and \n&quot;.US&quot;. (Equivalently, &#39;shortest number of domain-segments&quot;.)\n\n&quot;Assigned&quot; means a domain segment that can be assigned/owned/transferred \nfrom a domain registrar. This varies by top-level-domain: you can buy \n&quot;X.com&quot; or &quot;X.co.uk&quot;. Unfortunately, there is no simple rule covering \nall assigned-subdomain-levels; there is a list of rules compiled by the \nMozilla project available  via publicsuffix.org that is about 38K (with \ncomments).\n\nBut essentially, this means: all subdomains that fall under the same \npuchased/registered domain land in the same queue. That means if X.com \nhas 100 subdomains, and Y.com has only 1, they each still get 1 queue \ninside Heritrix. Since the queue is the unit of thread-assignment \nserialization/politeness, neither will get extra &#39;attention&#39; because of \nmany subdomains.\n\nOne thing to watch out for with either the &#39;force-queue-assignment&#39; or \nTopmostAssignedSurt approaches: a bad, unresponsive subdomain can hold \nup the entire queue. A failure-to-connect causes the crawler to go into \na slow-retry cycle, and no URIs deeper on the same queue are tried until \nthe topmost URI&#39;s retries are completely exhausted. With the default \nslow-retry of 15 minutes and retry count of 30, that could mean 7.5 \nhours of trying hopeless host A.X.com before the next URI on B.X.com is \ntried.\n\nSo once you start mapping multiple hostnames into a single queue, you \nmay want to decrease the slow-retry and total-retry count values.\n\n- Gordon @ IA\n\nKristinn Sigurdsson wrote:\n&gt; Yes, each sub-domain gets its own queue. If you are only crawling 20\n&gt; sites, a quick fix (at least if your using Heritrix 1.x) is to create\n&gt; an override for each domain and set the &quot;force-queue-assignment&quot; on\n&gt; the frontier to domain.name for each domain.\n&gt; \n&gt; The force-queue-assignment will override the usual queue assignment\n&gt; and each URI will be assigned to a queue with the supplied name. By\n&gt; setting this for a specific domain, you effectively lump it and any\n&gt; sub-domains into one queue.\n&gt; \n&gt; - Kris\n&gt; \n&gt; --- In archive-crawler@yahoogroups.com, &quot;nickbirren&quot; &lt;nickbirren@...&gt;\n&gt; wrote:\n&gt;&gt; My problem is that when I use 20 seeds (each for a different site),\n&gt;&gt; the ones that have many sub-domains seem to get more crawler\n&gt;&gt; &quot;attention&quot;. If I understand correctly, each sub-domain will have its\n&gt;&gt; own queue?\n&gt;&gt;\n&gt;&gt; --- In archive-crawler@yahoogroups.com, Noah Levitt &lt;nlevitt@&gt; wrote:\n&gt;&gt;&gt; Heritrix does a pretty good job of running in a &quot;balanced&quot; manner by \n&gt;&gt;&gt; default. The list of urls yet to be crawled (the frontier) is divided \n&gt;&gt;&gt; into queues by host, and there is a delay between fetches of each\n&gt;&gt; url in \n&gt;&gt;&gt; a single queue, so hosts/queues generally aren&#39;t starved out. Have\n&gt; you \n&gt;&gt;&gt; encountered this problem in a real crawl?\n&gt;&gt;&gt;\n&gt;&gt;&gt; Noah\n&gt;&gt;&gt;\n&gt;&gt;&gt; nickbirren wrote:\n&gt;&gt;&gt;&gt; Is there a way with Heritrix to define a job with many starting\n&gt;&gt;&gt;&gt; points, one per site, then have the job run in a &quot;balanced&quot;\n&gt; manner so\n&gt;&gt;&gt;&gt; that each site gets its share of bandwidth / processing. I&#39;m\n&gt; trying to\n&gt;&gt;&gt;&gt; &quot;avoid starvation&quot; of sites that do not have many links in them on\n&gt;&gt;&gt;&gt; each page by other sites who do, and if I&#39;m not mistaken, will &quot;take\n&gt;&gt;&gt;&gt; over&quot; the crawl frontier after a few iterations.\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; My other option is to run many crawl engines, one per site, but this\n&gt;&gt;&gt;&gt; seems cumbersome and is probably less scaleable.\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; Thanks,\n&gt;&gt;&gt;&gt; -Nick\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; ------------------------------------\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; Yahoo! Groups Links\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt; \n&gt; \n&gt; \n&gt; ------------------------------------\n&gt; \n&gt; Yahoo! Groups Links\n&gt; \n&gt; \n&gt; \n\n"}}