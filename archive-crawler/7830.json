{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"UnfenQWltBn1BSu_MWB1rvka3xBpB4plFTlYSPiBv4jlUeuoSRZBKYQr8WwlduRMX63BcosISip3bHeD_89c2Ei6mNkB02M","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] Best way to throttle down Heritrix for a period","postDate":"1351026624","msgId":7830,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDUwODcwN0MwLjcwNTA3MDdAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGs1czJkMCtwdXVhQGVHcm91cHMuY29tPg==","referencesHeader":"PGs1czJkMCtwdXVhQGVHcm91cHMuY29tPg=="},"prevInTopic":7826,"nextInTopic":7833,"prevInTime":7829,"nextInTime":7831,"topicId":7826,"numMessagesInTopic":4,"msgSnippet":"... If you re considering external scripting, you might also want to consider options at the OS level, or intervening network. That is, Heritrix wouldn t know","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 99107 invoked from network); 23 Oct 2012 21:10:26 -0000\r\nX-Received: from unknown (98.137.34.46)\n  by m7.grp.sp2.yahoo.com with QMQP; 23 Oct 2012 21:10:26 -0000\r\nX-Received: from unknown (HELO relay00.pair.com) (209.68.5.9)\n  by mta3.grp.sp2.yahoo.com with SMTP; 23 Oct 2012 21:10:26 -0000\r\nX-Received: (qmail 80427 invoked by uid 0); 23 Oct 2012 21:10:25 -0000\r\nX-Received: from 70.36.143.78 (HELO silverbook.local) (70.36.143.78)\n  by relay00.pair.com with SMTP; 23 Oct 2012 21:10:25 -0000\r\nX-pair-Authenticated: 70.36.143.78\r\nMessage-ID: &lt;508707C0.7050707@...&gt;\r\nDate: Tue, 23 Oct 2012 14:10:24 -0700\r\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:16.0) Gecko/20121010 Thunderbird/16.0.1\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;k5s2d0+puua@...&gt;\r\nIn-Reply-To: &lt;k5s2d0+puua@...&gt;\r\nContent-Type: text/plain; charset=windows-1252; format=flowed\r\nContent-Transfer-Encoding: 8bit\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] Best way to throttle down Heritrix for a period\r\nX-Yahoo-Group-Post: member; u=137285340; y=ky4sljUmKKMvcrX9qr01rALKtxlCCig0kguY2Q33UgN4\r\nX-Yahoo-Profile: gojomo\r\n\r\nOn 10/19/12 10:24 AM, juanmcc wrote:\n&gt; I would like to be able to control the bandwidth used by Heritrix\n&gt; during certain hours.\n&gt;\n&gt; So far, I have seen that I could use sheet overlays to increase the\n&gt; values of properties such as disposition.minDelayMs or\n&gt; disposition.maxPerHostBandwidthUsageKbSec, so that the politeness\n&gt; delay for all the URLs increases. With higher delays, the crawler\n&gt; will make less requests and thus this will control (indirectly) the\n&gt; bandwidth.\n&gt;\n&gt; I also have seen that I can use the scripting engine to manage sheet\n&gt; overlays, so I could write a script that uses the REST API and makes\n&gt; the changes when they are needed (without stopping the job).\n&gt;\n&gt; Although my approach does not seem to be complicated to implement\n&gt; (and I try to do it today), I would like to know what would be the\n&gt; potential problems and if there is a better way of doing that.\n&gt;\n&gt; Do you have any advice or have you done anything similar?\n\nIf you&#39;re considering external scripting, you might also want to \nconsider options at the OS level, or intervening network. That is, \nHeritrix wouldn&#39;t know any limits or time-of-day changes itself, but \nsome external system would change the maximum bandwidth that Heritrix \ncould use.\n\nSome things to consider in that realm:\n\n� on Linux OSes, look into &#39;iptables&#39; filtering for some local shaping \ncapabilities\n\n� alternatively, Heritrix can be configured to send all its requests \nthrough an outbound HTTP proxy. Many such proxies exist, and many have \nconfiguration options like total or per-origin-IP bandwidth limits\n\nThe bandwidth-throttling facilities inside Heritrix are relatively crude \nand less-often used. They keep raw totals of data transferred, overall \nor per-host, and when recent activity exceeds the preferred \nrate-since-crawl-start, Heritrix adds whatever delay is necessary to get \nunder the target.\n\nSo note that this means no particular *second* or even *range of \nseconds* is guaranteed to be under your target rates, just the long-term \naverage. (Individual requests in progress will transfer data as fast as \nthe OS/network-paths allow.) So if your concern is total or average \ntransferred data, the Heritrix settings may work well for you, but if \nthe concern is avoiding even temporary saturation inconveniencing \nnetwork neighbors, you&#39;ll want to use OS/network shaping mechanisms \ninstead.\n\nAs far as changing Heritrix configuration values by time-of-day, there&#39;s \nno built-in mechanism for doing that. Your suggestion of having an \nexternal script poke changes into the configuration values should work \n-- though note per above that because the bandwidth settings are \n*average-since-crawl-launch* rather than *recent-period-usage*, a simple \nalternation between values is unlikely to have the desired effect.\n\nAnother option would be to create a custom DecideRule (either in Java or \nusing the ScriptedDecideRule) that gives an ACCEPT decision based on the \ntime of day, and use that DecideRule via a  DecideRuleSheetAssociation \nto apply a certain overlay Sheet with different politeness delays. If \nyou want to go this way and the mention of these class names isn&#39;t \nenough to get you started, let me know.\n\nHope this helps,\n\n- Gordon\n\n\n\n\n\n\n\n\n&gt; Thanks,\n&gt;\n&gt; Juan Manuel Caicedo\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; ------------------------------------\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n\n"}}