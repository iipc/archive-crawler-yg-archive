{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"PaIMeJC44Y6UDO945ClLizK92L9WxxWMKD-74dHLunfVRPQwfZ-pUBMk4pySkehgn43OuapQxtFNh82cxgOQo6VnRPI3Wc0","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: [archive-crawler] Re: Heritrix performance (w.r.t crawl rates) low","postDate":"1310519726","msgId":7202,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDRFMUNGMUFFLjIwMTA1MDBAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGl2aXE4cCtrbGZlQGVHcm91cHMuY29tPg==","referencesHeader":"PGl2aXE4cCtrbGZlQGVHcm91cHMuY29tPg=="},"prevInTopic":7201,"nextInTopic":7204,"prevInTime":7201,"nextInTime":7203,"topicId":7198,"numMessagesInTopic":7,"msgSnippet":"Just for reference, what Heritrix version? Crawls do tend to slow as the frontier (especially the already-included /UriUniqFilter structure) gets larger. But,","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 30111 invoked from network); 13 Jul 2011 01:15:28 -0000\r\nX-Received: from unknown (98.137.34.45)\n  by m6.grp.sp2.yahoo.com with QMQP; 13 Jul 2011 01:15:28 -0000\r\nX-Received: from unknown (HELO relay02.pair.com) (209.68.5.16)\n  by mta2.grp.sp2.yahoo.com with SMTP; 13 Jul 2011 01:15:28 -0000\r\nX-Received: (qmail 55362 invoked by uid 0); 13 Jul 2011 01:15:27 -0000\r\nX-Received: from 208.70.27.190 (HELO silverbook.local) (208.70.27.190)\n  by relay02.pair.com with SMTP; 13 Jul 2011 01:15:27 -0000\r\nX-pair-Authenticated: 208.70.27.190\r\nMessage-ID: &lt;4E1CF1AE.2010500@...&gt;\r\nDate: Tue, 12 Jul 2011 18:15:26 -0700\r\nUser-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.18) Gecko/20110616 Thunderbird/3.1.11\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;iviq8p+klfe@...&gt;\r\nIn-Reply-To: &lt;iviq8p+klfe@...&gt;\r\nContent-Type: text/plain; charset=windows-1252; format=flowed\r\nContent-Transfer-Encoding: 8bit\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] Re: Heritrix performance (w.r.t crawl rates)\n low\r\nX-Yahoo-Group-Post: member; u=137285340; y=6pyUSgLeiG158sauYYMrlW3Bpv22DjVydXgJr7sVLx72\r\nX-Yahoo-Profile: gojomo\r\n\r\nJust for reference, what Heritrix version?\n\nCrawls do tend to slow as the frontier (especially the \n&#39;already-included&#39;/UriUniqFilter structure) gets larger.\n\nBut, the &#39;1&#39; value for congestion ratio suggests that the main issue is \nthat not enough queues are eligible (given politeness/retry-delay \npolicies) to keep all threads busy. This is common late in a crawl when \nonly a few queues � and quite possibly the slowest-responding sites � \nstill have URIs left to crawl.\n\nThe section of the FAQ I forwarded earlier about &#39;unexpectedly slow \ncrawling on an idle crawler&#39; will be relevant.\n\n- Gordon @ IA\n\nOn 7/12/11 5:52 PM, vinoth_amaranathan wrote:\n&gt;\n&gt;\n&gt; Also pls look at the snapshot of the crawl rates below. (using heritrix\n&gt; 1.14.4). As you see the avg docs/s drops nearly to 3.\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; --- In archive-crawler@yahoogroups.com, &quot;vinoth_amaranathan&quot;\n&gt; &lt;vinamar@...&gt; wrote:\n&gt;  &gt;\n&gt;  &gt; The unit of time is in secs.\n&gt;  &gt; FINE: ** Fetching\n&gt;  &gt; URI:http://tickets.stores.shop.ebay.com/_sl.html?_fintl=1&_sacat=1306&_t&#92;\n&gt;  &gt; rksid=p4748.c0.m390.l1513&_pgn=4from\n&gt;  &gt; Queue Completed**:\n&gt;  &gt;\n&gt;  &gt; this means the time it takes for a single thread to fetch from\n&gt;  &gt; readyClassQueues to add to inProcessQueues and return the CrawlURI for\n&gt;  &gt; processing by the thread.\n&gt;  &gt;\n&gt;  &gt; this is the snippet from the Toethread run() method\n&gt;  &gt; setStep(STEP_ABOUT_TO_GET_URI);\n&gt;  &gt; long fetchQueueStartTime = System.currentTimeMillis();\n&gt;  &gt; CrawlURI curi = controller.getFrontier().next();\n&gt;  &gt;\n&gt;  &gt; synchronized(this) {\n&gt;  &gt; continueCheck();\n&gt;  &gt; setCurrentCuri(curi);\n&gt;  &gt; }\n&gt;  &gt; long fetchQueueEndTime = System.currentTimeMillis();\n&gt;  &gt; activityLogger.fine(&quot;** Fetching\n&gt;  &gt; URI:&quot;+curi.toString()+&quot;from Queue Completed**:&#92;t\n&gt;  &gt; &quot;+((fetchQueueEndTime-fetchQueueStartTime)/1000));\n&gt;  &gt;\n&gt;  &gt;\n&gt;  &gt; thanks, -vinoth.\n&gt;  &gt; --- In archive-crawler@yahoogroups.com, Gordon Mohr gojomo@ wrote:\n&gt;  &gt; &gt;\n&gt;  &gt; &gt; Not sure how to read your table; what are the units of your time\n&gt;  &gt; column,\n&gt;  &gt; &gt; and what does &quot;from Queue Completed**:&quot; mean?\n&gt;  &gt; &gt;\n&gt;  &gt; &gt; If seconds, the 23/69 totals look suspiciously like about 1-3 times\n&gt;  &gt; the\n&gt;  &gt; &gt; default socket-timeout for a non-responsive host (20 seconds).\n&gt;  &gt; &gt;\n&gt;  &gt; &gt; Without adding extra logging code, you can deduce some similar data\n&gt;  &gt; from\n&gt;  &gt; &gt; the crawl.log -- the field that&#39;s of the form...\n&gt;  &gt; &gt;\n&gt;  &gt; &gt; #################+####\n&gt;  &gt; &gt;\n&gt;  &gt; &gt; ...is the timestamp when the network-fetching began, &#39;+&#39; the duration\n&gt;  &gt; of\n&gt;  &gt; &gt; the network fetch. Also, the leading date on the log line is the\n&gt;  &gt; instant\n&gt;  &gt; &gt; of logging, so (missing some pre-fetch time) you can get an idea of\n&gt;  &gt; the\n&gt;  &gt; &gt; bulk of processing time from those values.\n&gt;  &gt; &gt;\n&gt;  &gt; &gt; See also this FAQ entry if you&#39;re just generally wondering why\n&gt;  &gt; crawling\n&gt;  &gt; &gt; isn&#39;t going as fast as you might have hoped:\n&gt;  &gt; &gt;\n&gt;  &gt; &gt;\n&gt;  &gt; https://webarchive.jira.com/wiki/display/Heritrix/crawl+rate+considerati&#92;\n&gt;  &gt; ons\n&gt;  &gt; &gt;\n&gt;  &gt; &gt; If you want to dig deeper, it&#39;d be good to know:\n&gt;  &gt; &gt;\n&gt;  &gt; &gt; � what version of Heritrix?\n&gt;  &gt; &gt;\n&gt;  &gt; &gt; � what happens when you isolate the URIs that seem to be slow into\n&gt;  &gt; a\n&gt;  &gt; &gt; dedicated crawl for a closer look?\n&gt;  &gt; &gt;\n&gt;  &gt; &gt; - Gordon @ IA\n&gt;  &gt; &gt;\n&gt;  &gt; &gt; On 7/11/11 3:39 PM, vinoth_amaranathan wrote:\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; &gt; &gt; I tried to do some logging at the Toethread to find out where the\n&gt;  &gt; avg\n&gt;  &gt; &gt; &gt; amount of time is being spent per request. I found that the average\n&gt;  &gt; time\n&gt;  &gt; &gt; &gt; spent is more in fetching URIs from the BDB queues.\n&gt;  &gt; &gt; &gt; Its surprising to see that the time spent was on a max 69 secs for\n&gt;  &gt; one\n&gt;  &gt; &gt; &gt; work item. Am i missing something here ?\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; &gt; &gt; Attached is the spreadsheet obtained by logging at the toe thread\n&gt;  &gt; for\n&gt;  &gt; &gt; &gt; various stages of the processor chains.\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; http://f1.grp.yahoofs.com/v1/YHIbTnlqNMIkphI_1Uw9uR5sjGNdWq26uQgtCcOUUgO&#92;\n&gt;  &gt; QcPu9gSHrmrevR9YQQVwxLP6ed3gFht0pPP1ZomA0pmzula2o4f8l6gEptYc5Cxc/Heritri&#92;\n&gt;  &gt; xPerformance.xlsx\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; &gt; &gt; please look at the perf rates for a single thread below.\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; &gt; &gt; Process Vs time spend on each stage per thread\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; &gt; &gt; FINE: ** Total time spent on all processor chains for\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:(http://art.stores.shop.ebay.com/_sl.html?_pgn=3&_sacat=60436)**: 0\n&gt;  &gt; &gt; &gt; FINE: ** Total time spent on all processor chains for\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:(http://sports-cards.stores.shop.ebay.com/_sl.html?_sacat=2840)**:\n&gt;  &gt; 1\n&gt;  &gt; &gt; &gt; FINE: ** Fetching\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:http://art.stores.shop.ebay.com/_sl.html?_fintl=1&_sacat=60436&_trks&#92;\n&gt;  &gt; id=p4748.c0.m390.l1513&_pgn=4from\n&gt;  &gt; &gt; &gt; Queue Completed**: 69\n&gt;  &gt; &gt; &gt; FINE: ** Fetching\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:http://sports-cards.stores.shop.ebay.com/_sl.html?_sacat=27288from\n&gt;  &gt; &gt; &gt; Queue Completed**: 0\n&gt;  &gt; &gt; &gt; FINE: ** Total time spent on all processor chains for\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:(http://health-beauty.stores.shop.ebay.com/_sl.html?_sacat=67391)**:\n&gt;  &gt; 1\n&gt;  &gt; &gt; &gt; FINE: ** Fetching\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:http://health-beauty.stores.shop.ebay.com/_sl.html?_sacat=166718from\n&gt;  &gt; &gt; &gt; Queue Completed**: 69\n&gt;  &gt; &gt; &gt; FINE: ** Total time spent on Processor (LinksScoper)for\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:(http://travel.stores.shop.ebay.com/_sl.html?_pgn=7&_sacat=3253)**:\n&gt;  &gt; 0\n&gt;  &gt; &gt; &gt; FINE: ** Total time spent on Processor (ExtractorHTTP)for\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:(http://gift-certificates.shop.ebay.com/dcp/_W0QQ_kwZhomeQ20depotQQ_&#92;\n&gt;  &gt; ipcZ12QQ_sacatZ172008QQ_tccZ1QQ_trksidZp3910Q2ec0Q2em476)**:\n&gt;  &gt; &gt; &gt; 0\n&gt;  &gt; &gt; &gt; FINE: ** Total time spent on Processor (Updater)for\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:(http://stamps.stores.shop.ebay.com/_sl.html?_fintl=1&_sacat=676&_tr&#92;\n&gt;  &gt; ksid=p4748.c0.m390.l1513&_pgn=4)**:\n&gt;  &gt; &gt; &gt; 0\n&gt;  &gt; &gt; &gt; FINE: ** Total time spent on Processor (ExtractorHTTP)for\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:(http://pottery-glass.stores.shop.ebay.com/_sl.html?_fintl=1&_sacat=&#92;\n&gt;  &gt; 955&_trksid=p4748.c0.m390.l1513&_pgn=5)**:\n&gt;  &gt; &gt; &gt; 0\n&gt;  &gt; &gt; &gt; FINE: ** Total time spent on Processor (Preprocessor)for\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:(http://entertainment-memorabilia.stores.shop.ebay.com/_sl.html?_sac&#92;\n&gt;  &gt; at=32989)**:\n&gt;  &gt; &gt; &gt; 0\n&gt;  &gt; &gt; &gt; FINE: ** Total time spent on Processor (LinksScoper)for\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:(http://services.stores.shop.ebay.com/_sl.html?_fintl=1&_sacat=50338&#92;\n&gt;  &gt; &_trksid=p4748.c0.m390.l1513&_pgn=3)**:\n&gt;  &gt; &gt; &gt; 0\n&gt;  &gt; &gt; &gt; FINE: ** Total time spent on Processor (Preselector)for\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:(http://art.stores.shop.ebay.com/_sl.html?_fintl=1&_sacat=60436&_trk&#92;\n&gt;  &gt; sid=p4748.c0.m390.l1513&_pgn=4)**:\n&gt;  &gt; &gt; &gt; 0\n&gt;  &gt; &gt; &gt; FINE: ** Total time spent on Processor (Preselector)for\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:(http://sports-cards.stores.shop.ebay.com/_sl.html?_sacat=27288)**:\n&gt;  &gt; 0\n&gt;  &gt; &gt; &gt; FINE: ** Total time spent on Processor (LinksScoper)for\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:(http://crafts.shop.ebay.com/Crafts-/14339/i.html?_nkw=leather&_frs=&#92;\n&gt;  &gt; 1&_trksid=p3910.c0.m28)**:\n&gt;  &gt; &gt; &gt; 0\n&gt;  &gt; &gt; &gt; FINE: ** Total time spent on Processor (Preselector)for\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:(http://health-beauty.stores.shop.ebay.com/_sl.html?_sacat=166718)**&#92;\n&gt;  &gt; :\n&gt;  &gt; &gt; &gt; 0\n&gt;  &gt; &gt; &gt; FINE: ** Total time spent on all processor chains for\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:(http://everythingelse.stores.shop.ebay.com/_sl.html?_sacat=170595)*&#92;\n&gt;  &gt; *:\n&gt;  &gt; &gt; &gt; 1\n&gt;  &gt; &gt; &gt; FINE: ** Fetching\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:http://tickets.stores.shop.ebay.com/_sl.html?_fintl=1&_sacat=1306&_t&#92;\n&gt;  &gt; rksid=p4748.c0.m390.l1513&_pgn=4from\n&gt;  &gt; &gt; &gt; Queue Completed**: 23\n&gt;  &gt; &gt; &gt; FINE: ** Fetching\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:http://everythingelse.stores.shop.ebay.com/_sl.html?_sacat=170634fro&#92;\n&gt;  &gt; m Queue\n&gt;  &gt; &gt; &gt; Completed**: 69\n&gt;  &gt; &gt; &gt; FINE: ** Total time spent on Processor (Updater)for\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:(http://cgi.ebay.com/Breaker-Cobra-20x50-Binoculars-Coated-Lense-/32&#92;\n&gt;  &gt; 0723547463?pt=Binocular&hash=item4aac9cf547)**:\n&gt;  &gt; &gt; &gt; 0\n&gt;  &gt; &gt; &gt; FINE: ** Total time spent on all processor chains for\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:(http://pottery-glass.shop.ebay.com/dcp/_W0QQ_kwZdepressionQ20glassQ&#92;\n&gt;  &gt; Q_ipcZ12QQ_sacatZ870QQ_tccZ1QQ_trksidZp3910Q2ec0Q2em476)**:\n&gt;  &gt; &gt; &gt; 1\n&gt;  &gt; &gt; &gt; FINE: ** Total time spent on Processor (LinksScoper)for\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:(http://computers.stores.shop.ebay.com/_sl.html?_fintl=1&_sacat=1114&#92;\n&gt;  &gt; 22&_trksid=p4748.c0.m390.l1513&_pgn=6)**:\n&gt;  &gt; &gt; &gt; 1\n&gt;  &gt; &gt; &gt; FINE: ** Fetching\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:http://pottery-glass.shop.ebay.com/dcp/_W0QQ_kwZfentonQQ_ipcZ12QQ_sa&#92;\n&gt;  &gt; catZ870QQ_tccZ1QQ_trksidZp3910Q2ec0Q2em476from\n&gt;  &gt; &gt; &gt; Queue Completed**: 17\n&gt;  &gt; &gt; &gt; FINE: ** Total time spent on all processor chains for\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:(http://tickets.stores.shop.ebay.com/_sl.html?_pgn=3&_sacat=1306)**:\n&gt;  &gt; 1\n&gt;  &gt; &gt; &gt; FINE: ** Total time spent on all processor chains for\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:(http://music.stores.shop.ebay.com/_sl.html?_fintl=1&_sacat=1600&_tr&#92;\n&gt;  &gt; ksid=p4748.c0.m390.l1513&_pgn=7)**:\n&gt;  &gt; &gt; &gt; 0\n&gt;  &gt; &gt; &gt; FINE: ** Total time spent on Processor (Preprocessor)for\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:(http://sports-cards.stores.shop.ebay.com/_sl.html?_sacat=27288)**:\n&gt;  &gt; 0\n&gt;  &gt; &gt; &gt; FINE: ** Total time spent on Processor (DNS)for\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:(http://services.shop.ebay.com/eBay-Auction-Services-/50349/i.html?_&#92;\n&gt;  &gt; catref=1)**:\n&gt;  &gt; &gt; &gt; 0\n&gt;  &gt; &gt; &gt; FINE: ** Total time spent on Processor (Preprocessor)for\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:(http://art.stores.shop.ebay.com/_sl.html?_fintl=1&_sacat=60436&_trk&#92;\n&gt;  &gt; sid=p4748.c0.m390.l1513&_pgn=4)**:\n&gt;  &gt; &gt; &gt; 0\n&gt;  &gt; &gt; &gt; FINE: ** Total time spent on Processor (HTTP)for\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:(http://photography.stores.shop.ebay.com/_sl.html?_fintl=1&_sacat=16&#92;\n&gt;  &gt; 2485&_trksid=p4748.c0.m390.l1513&_pgn=3)**:\n&gt;  &gt; &gt; &gt; 1\n&gt;  &gt; &gt; &gt; FINE: ** Total time spent on Processor (DNS)for\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:(http://entertainment-memorabilia.stores.shop.ebay.com/_sl.html?_sac&#92;\n&gt;  &gt; at=32989)**:\n&gt;  &gt; &gt; &gt; 0\n&gt;  &gt; &gt; &gt; FINE: ** Fetching\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; URI:http://music.stores.shop.ebay.com/_sl.html?_pgn=7&_sacat=1600from\n&gt;  &gt; &gt; &gt; Queue Completed**: 2\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; &gt; &gt;\n&gt;  &gt; &gt;\n&gt;  &gt;\n&gt;\n&gt;\n&gt; \n\n"}}