{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"YTzdiwo6-vTdiHTwIZZjki83IPzLZDLoFEeSukdfHA0un8Sfxm6WYGdG7reuMqm0qONHHsA6MZYxdf3c-hwwt_Dm-tg7AM0","spamInfo":{"isSpam":false,"reason":"2"},"subject":"Re: [archive-crawler] encoding issue with ARCWriterProcessor?","postDate":"1175279168","msgId":3995,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ2MEQ1NjQwLjEwNzAwMDlAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PDQ2MENBRTI4LjIwNzAyMDdAZGVyaS5vcmc+","referencesHeader":"PDQ2MEMwMjg4LjEwMzA3MDJAZGVyaS5vcmc+IDw0NjBDMDQ1NC44MDIwMjAzQGFyY2hpdmUub3JnPiA8NDYwQzExMjQuNDA3MDYwM0BkZXJpLm9yZz4gPDQ2MENBRTI4LjIwNzAyMDdAZGVyaS5vcmc+"},"prevInTopic":3991,"nextInTopic":4154,"prevInTime":3994,"nextInTime":3996,"topicId":3984,"numMessagesInTopic":6,"msgSnippet":"Holger - Because of the way Heritrix records HTTP responses -- at the socket level, before any encoding is considered -- I am fairly confident that the ARC","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 69656 invoked from network); 30 Mar 2007 18:27:08 -0000\r\nReceived: from unknown (66.218.66.68)\n  by m43.grp.scd.yahoo.com with QMQP; 30 Mar 2007 18:27:08 -0000\r\nReceived: from unknown (HELO relay03.pair.com) (209.68.5.17)\n  by mta11.grp.scd.yahoo.com with SMTP; 30 Mar 2007 18:27:08 -0000\r\nReceived: (qmail 87434 invoked from network); 30 Mar 2007 18:26:06 -0000\r\nReceived: from 71.141.103.51 (HELO ?192.168.123.103?) (71.141.103.51)\n  by relay03.pair.com with SMTP; 30 Mar 2007 18:26:06 -0000\r\nX-pair-Authenticated: 71.141.103.51\r\nMessage-ID: &lt;460D5640.1070009@...&gt;\r\nDate: Fri, 30 Mar 2007 11:26:08 -0700\r\nUser-Agent: Thunderbird 1.5.0.10 (Windows/20070221)\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;460C0288.1030702@...&gt; &lt;460C0454.8020203@...&gt; &lt;460C1124.4070603@...&gt; &lt;460CAE28.2070207@...&gt;\r\nIn-Reply-To: &lt;460CAE28.2070207@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 8bit\r\nX-eGroups-Msg-Info: 2:2:2:0\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] encoding issue with ARCWriterProcessor?\r\nX-Yahoo-Group-Post: member; u=137285340; y=n5xoaMQHHAwhulFFhGPlwKsTw390KCnnlbuDBqC9aGcQ\r\nX-Yahoo-Profile: gojomo\r\n\r\nHolger -\n\nBecause of the way Heritrix &#39;records&#39; HTTP responses -- at the socket \nlevel, before any encoding is considered -- I am fairly confident that \nthe ARC written by Heritrix is identical to the bytes returned by the \noriginal target server.\n\nI suspect any apparent &#39;mangling&#39; you&#39;re seeing is a function of how \nyou&#39;re viewing the ARC -- most likely the final viewer step, but also \npossibly any other processing steps before viewing. (Decompression \nshould be safe, but any line-by-line reading/excerpting could have \ncaused a problem.)\n\nFor example, perhaps it is matter of your terminal program/window \ninsisting on 8859-1 encoding. Is that something you can adjust?\n\n(As Stack noted in his previous reply, I can get exactly the &#39;mangling&#39; \nyou report in Firefox by forcing it to use ISO-8859-1 encoding (under \nView -&gt; Character Encoding).\n\n(The change in Content-Length also suggests something affected the raw \ncontent between its download from the IIS server to its upload to your \nApache server, but I think that&#39;s a separate issue related to that \nprocess and not the original problem.)\n\nHope this helps,\n\n- Gordon @ IA\n\n\nHolger Lausen wrote:\n&gt; Hi,\n&gt; \n&gt; I did some more tests. I figured out using a browser I can obtain a\n&gt; correctly encoded document. I uploaded this to another server and ran\n&gt; heritrix against that one. In this way I ended up with a correct file.\n&gt; \n&gt; Here the headers of the Apache server I uploaded the document:\n&gt; HTTP/1.1 200 OK\n&gt; Date: Fri, 30 Mar 2007 06:34:39 GMT\n&gt; Server: Apache\n&gt; Last-Modified: Fri, 30 Mar 2007 06:32:33 GMT\n&gt; ETag: &quot;183d4-1e28-9590240&quot;\n&gt; Accept-Ranges: bytes\n&gt; Content-Length: 7720\n&gt; Keep-Alive: timeout=15, max=100\n&gt; Connection: Keep-Alive\n&gt; Content-Type: text/html\n&gt; \n&gt; And here the original one from the IIS.\n&gt; HTTP/1.1 200 OK\n&gt; Connection: keep-alive\n&gt; Date: Fri, 30 Mar 2007 06:21:37 GMT\n&gt; Server: Microsoft-IIS/6.0\n&gt; X-Powered-By: ASP.NET\n&gt; X-AspNet-Version: 1.1.4322\n&gt; Cache-Control: private, max-age=0\n&gt; Content-Type: text/html; charset=utf-8\n&gt; Content-Length: 8025\n&gt; \n&gt; Interesting enough the document size changed. I assume the IIS somehow\n&gt; does something to the charset which got fixed when I used firefox to\n&gt; download the document, but not when I ued heritrix. Any ideas?\n&gt; \n&gt; \n&gt; thanks for any hints\n&gt;   Holger\n&gt; \n&gt; PS: Original doc URL: http://www.atcomp.cz/webservices/dokumenty.asmx\n&gt;     corrected one: http://138.232.65.158/t.htm\n&gt; \n&gt; \n&gt; Holger Lausen wrote:\n&gt;&gt; Wow, that is quick!\n&gt;&gt;\n&gt;&gt; I tried various stuff, e.g.\n&gt;&gt;  cat IAH-20070329193940-00000-res.arc | grep &#39;seznam&#39;\n&gt;&gt; or\n&gt;&gt;  vi IAH-20070329193940-00000-res.arc\n&gt;&gt; (vi tells me on &quot;set encoding&quot; that the file is UTF8)\n&gt;&gt;\n&gt;&gt; I always get the mangling. I also tried\n&gt;&gt; wget http://www.atcomp.cz/webservices/dokumenty.asmx\n&gt;&gt; I end up with a similar mess.\n&gt;&gt;\n&gt;&gt; However if I use my windows machine to fetch the file and scp to\n&gt;&gt; transfer it to the debian machine, I can see all the chars correctly,\n&gt;&gt; this is why I suspect something is happening (or not happening) during\n&gt;&gt; the fetching or writing process... Can it be that the broswers (I used\n&gt;&gt; firefox) do some clever autofixing?\n&gt;&gt;\n&gt;&gt; BTW the locale installed on the debian machine is: &quot;de_DE.UTF-8 UTF-8&quot;\n&gt;&gt; (/etc/locale.gen). I also tried to install all available locales, but\n&gt;&gt; same result.\n&gt;&gt;\n&gt;&gt; thanks for the quick answer.\n&gt;&gt;\n&gt;&gt;  /holger\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; Michael Stack wrote:\n&gt;&gt;&gt; Tell us more.\n&gt;&gt;&gt;\n&gt;&gt;&gt; Heritrix writes the raw captured bytes untampered.\n&gt;&gt;&gt;\n&gt;&gt;&gt; What are you using to view the ARCWriterProcessor captures? The page\n&gt;&gt;&gt; you point to in the below does not explicitly state its encoding.\n&gt;&gt;&gt; Perhaps it needs this hint to rendor the pages properly? For example,\n&gt;&gt;&gt; if I force my browser to render the page using ISO-8859-1 rather than\n&gt;&gt;&gt; UTF-8, I see the mangling you reproduce below.\n&gt;&gt;&gt;\n&gt;&gt;&gt; St.Ack\n&gt;&gt;&gt;\n&gt;&gt;&gt; Holger Lausen wrote:\n&gt;&gt;&gt;&gt; Hi all,\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; using heritrix 1.2:\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; When using the org.archive.crawler.writer.ARCWriterProcessor in the\n&gt;&gt;&gt;&gt; default profile on e.g.\n&gt;&gt;&gt; http://www.atcomp.cz/webservices/dokumenty.asmx\n&gt;&gt;&gt; &lt;http://www.atcomp.cz/webservices/dokumenty.asmx&gt;\n&gt;&gt;&gt;&gt; (UTF-8) I end up with an archive file containing instead of:\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; Vrac� seznam koncov�ch\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; Vrací seznam koncových\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; I am not sure where start looking at the issue, can someone give me a\n&gt;&gt;&gt;&gt; pointer?\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; The servers char-set claim is correctly utf8, I am running a debian\n&gt;&gt;&gt;&gt; system....\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; thanks\n&gt;&gt;&gt;&gt; Holger\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt; \n\n"}}