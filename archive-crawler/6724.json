{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"1-siixSpuMFllIDDU5-RJST2F47wCbeR2rGuusYxAaNcTR_Qo3Q5BaGmbuCXtmOt0OgeML_GqUCWH_7fn1uAzJe-w_P8rCs","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: [archive-crawler] Storing Crawl Results in Alternate (non-FS) Store","postDate":"1284496034","msgId":6724,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDRDOEZEQUEyLjEwNDA0MDdAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PEFBTkxrVGk9YWJnRktrTE1FLXlPZWpYYzFFT2hWWmlKQUw5bzExb01IVzZWNEBtYWlsLmdtYWlsLmNvbT4=","referencesHeader":"PEFBTkxrVGk9YWJnRktrTE1FLXlPZWpYYzFFT2hWWmlKQUw5bzExb01IVzZWNEBtYWlsLmdtYWlsLmNvbT4="},"prevInTopic":6723,"nextInTopic":6726,"prevInTime":6723,"nextInTime":6725,"topicId":6723,"numMessagesInTopic":6,"msgSnippet":"Great questions! I know there s other interest in such writer alternatives, so I hope you can make whatever you come up with available to other users, or","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 57650 invoked from network); 14 Sep 2010 20:27:16 -0000\r\nX-Received: from unknown (98.137.34.45)\n  by m2.grp.sp2.yahoo.com with QMQP; 14 Sep 2010 20:27:16 -0000\r\nX-Received: from unknown (HELO relay00.pair.com) (209.68.5.9)\n  by mta2.grp.sp2.yahoo.com with SMTP; 14 Sep 2010 20:27:16 -0000\r\nX-Received: (qmail 67539 invoked from network); 14 Sep 2010 20:27:14 -0000\r\nX-Received: from 208.70.27.190 (HELO silverbook.local) (208.70.27.190)\n  by relay00.pair.com with SMTP; 14 Sep 2010 20:27:14 -0000\r\nX-pair-Authenticated: 208.70.27.190\r\nMessage-ID: &lt;4C8FDAA2.1040407@...&gt;\r\nDate: Tue, 14 Sep 2010 13:27:14 -0700\r\nUser-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.9) Gecko/20100825 Thunderbird/3.1.3\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nCc: Zach Bailey &lt;zach.bailey@...&gt;\r\nReferences: &lt;AANLkTi=abgFKkLME-yOejXc1EOhVZiJAL9o11oMHW6V4@...&gt;\r\nIn-Reply-To: &lt;AANLkTi=abgFKkLME-yOejXc1EOhVZiJAL9o11oMHW6V4@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] Storing Crawl Results in Alternate (non-FS)\n Store\r\nX-Yahoo-Group-Post: member; u=137285340; y=p9GW9VudWz3C3pZMvQQlfIBGFDywL9yxcSIzuWkU2Xjk\r\nX-Yahoo-Profile: gojomo\r\n\r\nGreat questions! I know there&#39;s other interest in such writer \nalternatives, so I hope you can make whatever you come up with available \nto other users, or donate it for possible inclusion in the official H3 \ndistribution!\n\nThere also has been previous work to create an HBaseWriter for Heritrix; \nit might already work in H3, or require only a little updating. I \nhaven&#39;t yet tried it myself. See:\n\nhttp://code.google.com/p/hbase-writer/\n\nOn to your questions, interspersed below:\n\nOn 9/14/10 12:39 PM, Zach Bailey wrote:\n&gt;\n&gt;\n&gt; Hi all,\n&gt;\n&gt; I wanted to run some questions by you and maybe get some pointers from\n&gt; the architects of heritrix hoping I could save a little time before\n&gt; attempting this.\n&gt;\n&gt; What I am hoping to do is develop a custom writer to store the results\n&gt; of my crawls in a distributed database, something like Riak, Cassandra,\n&gt; or HBase for the Heritrix 3.0 code base.\n&gt;\n&gt; I am very comfortable writing Java code and am very familiar with\n&gt; building applications using the Spring Framework so I&#39;m thinking this\n&gt; should be a relatively easy task to get a proof of concept/prototype\n&gt; working.\n&gt;\n&gt; Looking through the code I had some questions:\n&gt;\n&gt; 1.) It looks like I will wire in my custom code inside the\n&gt; DispositionChain, essentially replacing where the warcWriter bean is\n&gt; referenced.\n\nYes; you could also have both in place for testing. (I&#39;ve often run with \nboth our ARCWriterProcessor and WARCWriterProcessor while debugging \nthings.) One common gotcha when installing your own Processors, as edits \nto our model CXML, is that if you follow the pattern there you need to \nboth declare the bean with a name, then add the bean by name to the \nchain&#39;s ordered list. So: two edits, a short distance from each other, \nto have the intended effect.\n\n&gt; 2.) Looking at the WARCWriterProcessor it appears it uses a pooled\n&gt; approach. I&#39;m guessing this is for performance reasons. Assuming I&#39;m\n&gt; using a driver which already implements connection pooling, are there\n&gt; any other considerations I should think about while implementing my own\n&gt; Writer?\n\nThe existing pooling was motivated by the belief that having more than \none active open file at a time could increase throughput. That&#39;s \ndefinitely the case if the files are on independent disks; I&#39;m not as \nsure it helps to have more than one file open on the same disk. This has \nundergone some recent simplification (eliminating the dependency on \nApache commons-pool) in TRUNK that will appear in 3.0.1, and is likely \nto change more in the next month as some other novel policies for \ngrouping related site captures to different WARCs are added.\n\nSo I&#39;d say: keep an eye on TRUNK for ideas but don&#39;t assume anything in \nthe existing WARCWriterProcessor approach is optimal or locked-in-place.\n\nI would think writing to a remote distributed store might offer nice \nthroughput benefits by essentially fanning the IO out over many more \ndisks, whether you were writing WARCs into (eg) HDFS or individual \nrecords/content-bodies into (eg) HBase.\n\nThe least-straightforward part of the current Writer is the special-case \nhandling of deduced duplicates, from headers or content-hashes, to \nchange how (or whether) individual records are written. There might be \nan opportunity to factor that decisionmaking out of WARCWriterProcessor \nto be shared with other non-file or even non-WARC writers.\n\n&gt; 3.) Once I get my custom code developed, I assume all I need to do to\n&gt; make it available to heritrix is to jar it up and just drop it in\n&gt; $HERITRIX_HOME/lib - anything else I need to be aware of there?\n\nThat should be all. Then, as I&#39;m sure you know, you just name the \nclasses in your crawl-configuration CXML (Spring XML) bean-declarations.\n\nHope this helps and let me know any other questions!\n\n- Gordon @ IA\n\n"}}