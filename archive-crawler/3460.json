{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":187404531,"authorName":"astar_t","from":"&quot;astar_t&quot; &lt;astar_t@...&gt;","profile":"astar_t","replyTo":"LIST","senderId":"-EwPxIWagMbaS3BtZyhhxldBohcTDHcSUMzcfA8GNgDdzamicg6axrZ3lp3sBazIkQRA_qHMYz1VD9-ENez7mLX18uA","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: Beanshell script format (?)","postDate":"1161118572","msgId":3460,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PGVoM2cxYytucmpoQGVHcm91cHMuY29tPg==","inReplyToHeader":"PDQ1MzUzQTJELjUwNDA1MDdAYXJjaGl2ZS5vcmc+"},"prevInTopic":3459,"nextInTopic":3461,"prevInTime":3459,"nextInTime":3461,"topicId":3452,"numMessagesInTopic":4,"msgSnippet":"Thanks for the help, getPathFromSeed is the method I m after.  I ve decided instead though to not check the hop type and instead just go with file extension","rawEmail":"Return-Path: &lt;astar_t@...&gt;\r\nX-Sender: astar_t@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 93097 invoked from network); 17 Oct 2006 20:56:26 -0000\r\nReceived: from unknown (66.218.67.36)\n  by m41.grp.scd.yahoo.com with QMQP; 17 Oct 2006 20:56:25 -0000\r\nReceived: from unknown (HELO n17a.bullet.scd.yahoo.com) (66.94.237.46)\n  by mta10.grp.scd.yahoo.com with SMTP; 17 Oct 2006 20:56:22 -0000\r\nReceived: from [66.218.69.1] by n17.bullet.scd.yahoo.com with NNFMP; 17 Oct 2006 20:56:14 -0000\r\nReceived: from [66.218.66.73] by t1.bullet.scd.yahoo.com with NNFMP; 17 Oct 2006 20:56:13 -0000\r\nDate: Tue, 17 Oct 2006 20:56:12 -0000\r\nTo: archive-crawler@yahoogroups.com\r\nMessage-ID: &lt;eh3g1c+nrjh@...&gt;\r\nIn-Reply-To: &lt;45353A2D.5040507@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:6:0:0\r\nFrom: &quot;astar_t&quot; &lt;astar_t@...&gt;\r\nSubject: Re: Beanshell script format (?)\r\nX-Yahoo-Group-Post: member; u=187404531; y=rTngI3C-9ilfWicVfBzhUTez2bLQo5KxStU_VPBUvbmsgA\r\nX-Yahoo-Profile: astar_t\r\n\r\nThanks for the help, getPathFromSeed is the method I&#39;m after.  I&#39;ve \ndecide=\r\nd instead though to not check the hop type and instead just go \nwith file e=\r\nxtension for now, since I just want to capture all images, \nCSS and JS.\n\nSo=\r\n here&#39;s the script I came up with:\n\n//: allow_images.bsh\nimport org.archive=\r\n.crawler.datamodel.*;\nimport java.io.*;\nimport java.util.regex.*;\n\nprocess(=\r\nCrawlURI curi) { \n  if (curi.getFetchStatus() =3D=3D FetchStatusCodes.S_ROB=\r\nOTS_PRECLUDED)\n  {\n    Pattern pat =3D Pattern.compile(&quot;.*&#92;&#92;.(bmp|gif|jpe?g=\r\n|png|tiff?\n|css|js)$&quot;, Pattern.CASE_INSENSITIVE);\n    Matcher matcher =3D p=\r\nat.matcher(curi.getURIString().trim());\n    if (matcher.matches())\n      cu=\r\nri.setFetchStatus(FetchStatusCodes.S_UNATTEMPTED);\n  }  \n}\n\nOn my first tes=\r\nt run it seems to work like a charm.  Any suggestions \nwelcome. :)\n\n--- In =\r\narchive-crawler@yahoogroups.com, Michael Stack &lt;stack@...&gt; \nwrote:\n&gt;\n&gt; asta=\r\nr_t wrote:\n&gt; &gt;\n&gt; &gt; Okay, so I am getting closer now. I have managed to get =\r\na \nbeanshell\n&gt; &gt; script to modify the CrawlURI and ignore robots.txt using =\r\nthis:\n&gt; &gt;\n&gt; &gt; //---- allow_robots.bsh ---\n&gt; &gt;\n&gt; &gt; addClassPath( &quot;/home/heri=\r\ntrix/local/heritrix-1.10.1/lib&quot; );\n&gt; &gt; import *;\n&gt; &gt;\n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; &gt;\n&gt; &gt;=\r\n process(CrawlURI curi) {\n&gt; &gt; if (curi.getFetchStatus() =3D=3D FetchStatusC=\r\nodes.S_ROBOTS_PRECLUDED)\n&gt; &gt; curi.setFetchStatus(FetchStatusCodes.S_UNATTEM=\r\nPTED);\n&gt; &gt; }\n&gt; &gt; //:~\n&gt; &gt;\n&gt; &gt; Now this script will ignore all robots.txt. O=\r\nbviously not what I&#39;m\n&gt; &gt; trying to so next step is to check the last hop t=\r\nype of the \nCrawlURI to\n&gt; &gt; see if it is &#39;E&#39; or &#39;X&#39; or has file extension s=\r\nuch as bmp, gif, \njpe?g,\n&gt; &gt; png, etc.\n&gt; &gt;\n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; =\r\n\n&gt; \n&gt; Is CrawlURI#getPathFromSeed() what you are after?  (And perhaps \n&gt; Cr=\r\nawlURI#getUURI()#getPath()?)\n&gt; \n&gt; St.Ack\n&gt; \n&gt; \n&gt; &gt;\n&gt; &gt; Is there a method to=\r\n get last hop type of the CrawlURI ? I have \nlooked\n&gt; &gt; in the Javadoc and =\r\ncouldn&#39;t find one. I&#39;ll take another look and\n&gt; &gt; document my findings ....=\r\n..\n&gt; &gt;\n&gt; &gt; --- In archive-crawler@yahoogroups.com \n&gt; &gt; &lt;mailto:archive-craw=\r\nler%40yahoogroups.com&gt;, &quot;astar_t&quot; &lt;astar_t@&gt; \nwrote:\n&gt; &gt; &gt;\n&gt; &gt; &gt; Hi, I am w=\r\nondering how exactly to write a Beanshell script. I\n&gt; &gt; &gt; understand that a=\r\n process method is required that gets a passed \nin\n&gt; &gt; &gt; Crawl URI. Does th=\r\ne script require a main method or a specific \nclass\n&gt; &gt; &gt; name?\n&gt; &gt; &gt;\n&gt; &gt; &gt;=\r\n Specifically, I&#39;d like to place it between the Precondition \nenforcer\n&gt; &gt; =\r\n&gt; and the fetchers so I can allow specific folders to be ignored \nfrom\n&gt; &gt; =\r\n&gt; robots.txt. i.e. I&#39;d like to change the status of a CrawlURI \nfrom -\n&gt; &gt; =\r\n&gt; 9998 to an &quot;accept&quot; code only if it is in a specific path to \nall an\n&gt; &gt; =\r\n&gt; images folder that is in robots.txt to still be crawled.\n&gt; &gt; &gt;\n&gt; &gt; &gt; By c=\r\nhance does anyone have an example beanshell script that \nwould do\n&gt; &gt; &gt; thi=\r\ns?\n&gt; &gt; &gt;\n&gt; &gt; &gt; Thanks\n&gt; &gt; &gt; Adam T.\n&gt; &gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt;\n\n\n\n\n"}}