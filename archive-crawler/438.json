{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":168599281,"authorName":"Michael Stack","from":"Michael Stack &lt;stack@...&gt;","replyTo":"LIST","senderId":"2h-ToJafLferdv3bE-bCkpZcjU9ubfLWUOZH5aHIqTcZgRwTjpsMRJLDH9QJo7JBoEgz_JywQ9Bzc4QQoUAampytRijDUWI1","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] Does Heritrix support Unicode?","postDate":"1085185412","msgId":438,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQwQUU5RDg0LjcwNjAzMDJAYXJjaGl2ZS5vcmc+"},"prevInTopic":431,"nextInTopic":451,"prevInTime":437,"nextInTime":439,"topicId":431,"numMessagesInTopic":6,"msgSnippet":"There s a few things going on here. If the character encoding is not specified in the http header but in the HTML HEAD META Content-Type tag, our HTML","rawEmail":"Return-Path: &lt;stack@...&gt;\r\nX-Sender: stack@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 18714 invoked from network); 22 May 2004 00:30:06 -0000\r\nReceived: from unknown (66.218.66.218)\n  by m21.grp.scd.yahoo.com with QMQP; 22 May 2004 00:30:06 -0000\r\nReceived: from unknown (HELO ia00524.archive.org) (209.237.232.202)\n  by mta3.grp.scd.yahoo.com with SMTP; 22 May 2004 00:30:06 -0000\r\nReceived: (qmail 20530 invoked by uid 100); 22 May 2004 00:23:15 -0000\r\nReceived: from b116-dyn-60.archive.org (HELO archive.org) (stack@...@209.237.240.60)\n  by mail-dev.archive.org with SMTP; 22 May 2004 00:23:15 -0000\r\nMessage-ID: &lt;40AE9D84.7060302@...&gt;\r\nDate: Fri, 21 May 2004 17:23:32 -0700\r\nUser-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.5) Gecko/20031107 Debian/1.5-3\r\nX-Accept-Language: en\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nContent-Type: text/plain; charset=GB2312\r\nContent-Transfer-Encoding: 7bit\r\nX-Spam-DCC: : \r\nX-Spam-Checker-Version: SpamAssassin 2.63 (2004-01-11) on ia00524.archive.org\r\nX-Spam-Level: \r\nX-Spam-Status: No, hits=0.5 required=6.0 tests=AWL,HTML_MESSAGE autolearn=ham \n\tversion=2.63\r\nX-eGroups-Remote-IP: 209.237.232.202\r\nFrom: Michael Stack &lt;stack@...&gt;\r\nSubject: Re: [archive-crawler] Does Heritrix support Unicode?\r\nX-Yahoo-Group-Post: member; u=168599281\r\n\r\nThere&#39;s a few things going on here. If the character encoding is not\nspecified in the http header but in the HTML HEAD META Content-Type tag,\nour HTML extractors don&#39;t see it and all is treated as single-byte\ncontent (The issue &quot;[ 913687 ] Make extractors interrogate for charset&quot;\ncovers fixing this). Heritrix currently only respects encodings\nspecified in the http-header content-type line (Also in the mix is, as\nfar as I know, there is no sanctioned way of representing multibyte\ncharacters in an URI. You can URI encode the bytes but theres no means\nfor passing the charset used encoding).\n\nThe site www.anfeed.com is returning an http-header whose content-type\nlooks like this:\n\nContent-Type: text/html\n\nThis means that all page processing will be done as though the content\nwere single-byte.\n\nThe pages themselves indeed specify the encoding using headers like the\nfollowing:\n\n&lt;meta http-equiv=&quot;Content-Language&quot; content=&quot;zh-cn&quot;&gt;\n&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=gb2312&quot;&gt;\n\nIf we fixed our extractors so they read the page with the correct\nencoding, we&#39;d have some hope of extracting the URIs unmangled. Even\nthen, while in the page, before we pass the URI to the frontier queue,\nwe should URI escape the multibyte characters using the charset of the\npage they came from (This seems to be what mozilla is doing at least --\nI&#39;d have to look closer).\n\nI&#39;ve made a new issue to cover this last item -- &quot;Encode multibyte URIs\nusing page charset before queuing&quot; -- to ensure heritrix carries URIs\nencoded with their source page encoding.\n\nThanks for reporting the below,\nYours,\nSt.Ack\n\nzhousp wrote:\n\n&gt;hi,everyone\n&gt;\n&gt;I found when the url contains some unicode char,Heritrix give some error messages in the log file.\n&gt;\n&gt;--------------------log start-------------------------------\n&gt;20040521013203062 http://www.anfeed.com/ &quot;Failed parse of class.asp?typeid=????&quot; class.asp?typeid=????\n&gt;20040521013203062 http://www.anfeed.com/ &quot;Failed parse of class.asp?typeid=????&quot; class.asp?typeid=????\n&gt;20040521013203062 http://www.anfeed.com/ &quot;Failed parse of class.asp?typeid=????&quot; class.asp?typeid=????\n&gt;20040521013203062 http://www.anfeed.com/ &quot;Failed parse of class.asp?typeid=????&quot; class.asp?typeid=????\n&gt;20040521013203062 http://www.anfeed.com/ &quot;Failed parse of class.asp?typeid=????&quot; class.asp?typeid=????\n&gt;20040521013203062 http://www.anfeed.com/ &quot;Failed parse of class.asp?typeid=????&quot; class.asp?typeid=????\n&gt;20040521013203062 http://www.anfeed.com/ &quot;Failed parse of class.asp?typeid=????&quot; class.asp?typeid=????\n&gt;20040521013203062 http://www.anfeed.com/ &quot;Failed parse of class.asp?typeid=????&quot; class.asp?typeid=????\n&gt;20040521013203062 http://www.anfeed.com/ &quot;Failed parse of class.asp?typeid=????&quot; class.asp?typeid=????\n&gt;20040521013203062 http://www.anfeed.com/ &quot;Failed parse of class.asp?typeid=????&quot; class.asp?typeid=????\n&gt;20040521013203062 http://www.anfeed.com/ &quot;Failed parse of class.asp?typeid=????&quot; class.asp?typeid=????\n&gt;20040521013203062 http://www.anfeed.com/ &quot;Failed parse of class.asp?typeid=????&quot; class.asp?typeid=????\n&gt;20040521013203062 http://www.anfeed.com/ &quot;Failed parse of class.asp?typeid=????&quot; class.asp?typeid=????\n&gt;-----------------------------------------------------------\n&gt;\n&gt;The &quot;????&quot; in the url are some Chinese words.\n&gt;\n&gt;ansi zhou\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; \n&gt;Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n&gt; \n&gt;\n&gt;  \n&gt;\n\n\n\n"}}