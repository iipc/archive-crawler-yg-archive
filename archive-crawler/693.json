{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr (Internet Archive)","from":"&quot;Gordon Mohr (Internet Archive)&quot; &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"s8pRi294_aPVMvaw3R-BlYdSxZtY6TGOBGCjCxoG6xzYNrv3E0Fxf4YtOSVVp1f6la9NYcO5zukCLojfxvI-sQkiy0J9eOvgU-Voy6W4WhxIS11YkgcCMf0VZ30","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] Heritrix went mental on me...","postDate":"1090433282","msgId":693,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQwRkVCMTAyLjQwNjA3MDhAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PDE2NjM4LjQwNjIxLjM3MTIwOC41Nzc1NjFAdGlwaGFyZXMuYmFzaXN0ZWNoLm5ldD4=","referencesHeader":"PDE2NjM4LjQwNjIxLjM3MTIwOC41Nzc1NjFAdGlwaGFyZXMuYmFzaXN0ZWNoLm5ldD4="},"prevInTopic":692,"nextInTopic":694,"prevInTime":692,"nextInTime":694,"topicId":690,"numMessagesInTopic":9,"msgSnippet":"Thanks for the report; I presume you re using very recent CVS HEAD code? Looks like some debugging output put in to illuminate a believed-fixed bug -- the","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 1609 invoked from network); 21 Jul 2004 18:08:08 -0000\r\nReceived: from unknown (66.218.66.217)\n  by m3.grp.scd.yahoo.com with QMQP; 21 Jul 2004 18:08:08 -0000\r\nReceived: from unknown (HELO ia00524.archive.org) (209.237.232.202)\n  by mta2.grp.scd.yahoo.com with SMTP; 21 Jul 2004 18:08:08 -0000\r\nReceived: (qmail 14501 invoked by uid 100); 21 Jul 2004 17:58:50 -0000\r\nReceived: from b116-dyn-227.archive.org (HELO ?207.241.238.227?) (gojomo@...@207.241.238.227)\n  by mail-dev.archive.org with SMTP; 21 Jul 2004 17:58:50 -0000\r\nMessage-ID: &lt;40FEB102.4060708@...&gt;\r\nDate: Wed, 21 Jul 2004 11:08:02 -0700\r\nUser-Agent: Mozilla Thunderbird 0.7.1 (X11/20040626)\r\nX-Accept-Language: en-us, en\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;16638.40621.371208.577561@...&gt;\r\nIn-Reply-To: &lt;16638.40621.371208.577561@...&gt;\r\nContent-Type: text/plain; charset=us-ascii; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-Spam-DCC: : \r\nX-Spam-Checker-Version: SpamAssassin 2.63 (2004-01-11) on ia00524.archive.org\r\nX-Spam-Level: \r\nX-Spam-Status: No, hits=0.0 required=6.0 tests=AWL autolearn=ham version=2.63\r\nX-eGroups-Remote-IP: 209.237.232.202\r\nFrom: &quot;Gordon Mohr (Internet Archive)&quot; &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] Heritrix went mental on me...\r\nX-Yahoo-Group-Post: member; u=137285340\r\nX-Yahoo-Profile: gojomo\r\n\r\nThanks for the report; I presume you&#39;re using very recent CVS HEAD code?\n\nLooks like some debugging output put in to illuminate a believed-fixed bug --\nthe logger code in Frontier.wakeReadyQueues() -- is again being triggered,\nendlessly.\n\nI suspect an item inside the snoozeQueues is mutating when it shouldn&#39;t, leading\nto an inconsistent TreeSet where snoozeQueues.contains(snoozeQueues.first()) is\nfalse, and a spin over that debugging output.\n\nI see you&#39;re running with a non-default &#39;valence&#39;; that&#39;s probably the trigger.\n\nValence values higher than 1 have only been lightly tested and aren&#39;t regularly\nused at  IA. Previous bugs in the code which allows multiple in-process URIs from\nthe same host-queue have caused queues to live in two places where they should only\nbe in one, which could cause this kind of TreeSet sort-invariant corruption.\n\nPlease file a bug, especially if your initial settings and seeds trigger the\nproblem every time.\n\nIt would also be interesting to try triggering the bug with with assertions\nenabled (&#39;-ea&#39; VM arg), because that may catch the root cause earlier.\n\nI suspect it can&#39;t be reproduced at all with valence = 1.\n\n- Gordon @ IA\n\n\nTom Emerson wrote:\n&gt; I started a crawl over 4 (Simplified) Chinese sites. The configuration was set\n&gt; to use 15 toe threads, domain scope, with\n&gt; \n&gt; Accept-Language: zh-CN, zh-SG, zh, en\n&gt; \n&gt; and a default-encoding of CP936. The frontier configuration is:\n&gt; \n&gt;     &lt;newObject name=&quot;frontier&quot; class=&quot;org.archive.crawler.frontier.Frontier&quot;&gt;\n&gt;       &lt;float name=&quot;delay-factor&quot;&gt;2.5&lt;/float&gt;\n&gt;       &lt;integer name=&quot;max-delay-ms&quot;&gt;2500&lt;/integer&gt;\n&gt;       &lt;integer name=&quot;min-delay-ms&quot;&gt;250&lt;/integer&gt;\n&gt;       &lt;integer name=&quot;max-retries&quot;&gt;10&lt;/integer&gt;\n&gt;       &lt;long name=&quot;retry-delay-seconds&quot;&gt;360&lt;/long&gt;\n&gt;       &lt;boolean name=&quot;hold-queues&quot;&gt;false&lt;/boolean&gt;\n&gt;       &lt;integer name=&quot;host-valence&quot;&gt;2&lt;/integer&gt;\n&gt;       &lt;integer name=&quot;total-bandwidth-usage-KB-sec&quot;&gt;0&lt;/integer&gt;\n&gt;       &lt;integer name=&quot;max-per-host-bandwidth-usage-KB-sec&quot;&gt;0&lt;/integer&gt;\n&gt;       &lt;integer name=&quot;host-queues-memory-capacity&quot;&gt;200&lt;/integer&gt;\n&gt;     &lt;/newObject&gt;\n&gt; \n&gt; All four seeds were crawled successfully. However, the console showed\n&gt; that things appeared to stop after 123 documents were\n&gt; retrieved. Attempts to view the thread log failed: the server would\n&gt; just hang, though I was able to get back to the console.\n&gt; \n&gt; Then I noticed that the heritrix_out.log file was growing very fast:\n&gt; when it hit 4.4 gigabytes I shutdown Heritrix from the\n&gt; WUI. Unfortunately it kept growing: a zombie Heritrix process was\n&gt; still running and had to be killed from the command-line.\n&gt; \n&gt; The last several hundred thousand lines of the log file look like the\n&gt; following excerpt:\n&gt; \n&gt;     KeyedQueue  www.dayoo.com\n&gt;      Length:        43\n&gt;      Status:        READY\n&gt;      Last enqueued: http://www.dayoo.com/gb/content/2004-07/21/content_1640649.htm\n&gt;      Last dequeued: http://www.dayoo.com/img/gzzx.swf\n&gt;     KeyedQueue  www.dayoo.com\n&gt;      Length:        43\n&gt;      Status:        READY\n&gt;      Last enqueued: http://www.dayoo.com/gb/content/2004-07/21/content_1640649.htm\n&gt;      Last dequeued: http://www.dayoo.com/img/gzzx.swf\n&gt;     KeyedQueue  www.dayoo.com\n&gt;      Length:        43\n&gt;      Status:        READY\n&gt;      Last enqueued: http://www.dayoo.com/gb/content/2004-07/21/content_1640649.htm\n&gt;      Last dequeued: http://www.dayoo.com/img/gzzx.swf\n&gt;     KeyedQueue  www.dayoo.com\n&gt;      Length:        43\n&gt;      Status:        READY\n&gt;      Last enqueued: http://www.dayoo.com/gb/content/2004-07/21/content_1640649.htm\n&gt;      Last dequeued: http://www.dayoo.com/img/gzzx.swf\n&gt; \n&gt; And then switches to\n&gt; \n&gt; \n&gt;  Snooze queues size:        25\n&gt;     KeyedQueue  www.dayoo.com\n&gt;      Length:        43\n&gt;      Status:        READY\n&gt;      Last enqueued: http://www.dayoo.com/gb/content/2004-07/21/content_1640649.htm\n&gt;      Last dequeued: http://www.dayoo.com/img/gzzx.swf\n&gt;     KeyedQueue  modern.dayoo.com\n&gt;      Length:        1\n&gt;      Status:        SNOOZED\n&gt;      Wakes in:      -1172829ms\n&gt;      Last enqueued: http://modern.dayoo.com/\n&gt;      Last dequeued: dns:modern.dayoo.com\n&gt;     KeyedQueue  partner.cpc.sohu.com\n&gt;      Length:        1\n&gt;      Status:        SNOOZED\n&gt;      Wakes in:      -1172817ms\n&gt;      Last enqueued: http://partner.cpc.sohu.com/cpc/partner_iframe.php?sid=241&pid=wwwbjd&type=24\n&gt;      Last dequeued: dns:partner.cpc.sohu.com\n&gt;     KeyedQueue  informationtimes.dayoo.com\n&gt;      Length:        9\n&gt;      Status:        SNOOZED\n&gt;      Wakes in:      -1172749ms\n&gt;      Last enqueued: http://informationtimes.dayoo.com/gb/content/2004-07/20/content_1639599.htm\n&gt;      Last dequeued: dns:informationtimes.dayoo.com\n&gt; \n&gt; And then eventually ends with\n&gt; \n&gt; Jul 20, 2004 5:50:13 PM org.archive.crawler.frontier.Frontier wakeReadyQueues\n&gt; SEVERE: first() item couldn&#39;t be remove()d! - org.archive.crawler.frontier.KeyedQueue@501268 - false\n&gt; \n&gt; which may or may not be related to hitting this with a kill -9.\n&gt; \n&gt; \n&gt; My local errors log shows:\n&gt; \n&gt; 20040720213038762    -2          . #2 http://c3.thecounter.com/robots.txt . . .\n&gt;   EP http://c3.thecounter.com/id=2424977\n&gt;  org.apache.commons.httpclient.HttpRecoverableException: org.apache.commons.httpclient.HttpRecoverableException: Error in parsing the status  line from the response: unable to find line starting with &quot;HTTP&quot;\n&gt; \tat org.apache.commons.httpclient.HttpMethodBase.readResponse(HttpMethodBase.java:1965)\n&gt; \tat org.apache.commons.httpclient.HttpMethodBase.processRequest(HttpMethodBase.java:2659)\n&gt; \tat org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1093)\n&gt; \tat org.archive.httpclient.HttpRecorderGetMethod.execute(HttpRecorderGetMethod.java:157)\n&gt; \tat org.archive.httpclient.PatchedHttpClient.executeMethod(PatchedHttpClient.java:294)\n&gt; \tat org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:529)\n&gt; \tat org.archive.crawler.fetcher.FetchHTTP.innerProcess(FetchHTTP.java:231)\n&gt; \tat org.archive.crawler.framework.Processor.process(Processor.java:106)\n&gt; \tat org.archive.crawler.framework.ToeThread.processCrawlUri(ToeThread.java:255)\n&gt; \tat org.archive.crawler.framework.ToeThread.run(ToeThread.java:138)\n&gt; \n&gt; uri-errors.log and runtime-errors.log are empty.\n&gt; \n&gt; This is running on a sync against HEAD yesterday (Tuesday) afternoon.\n&gt; \n&gt; I&#39;m willing to be a guinea pig here if people have suggestions.\n&gt; \n&gt; Thanks.\n&gt; \n&gt;     -tree\n&gt; \n&gt; P.S. I&#39;m currently bzip2ing the heritrix_out.log file --- I&#39;ll keep\n&gt; it around this time. I&#39;m going to try some other Chinese sites and\n&gt; see if the same thing happens.\n&gt; \n&gt; \n\n\n"}}