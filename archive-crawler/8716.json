{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":496150545,"authorName":"Markus.Mirsberger","from":"&quot;Markus.Mirsberger&quot; &lt;markus.mirsberger@...&gt;","profile":"mirschi74","replyTo":"LIST","senderId":"nsZJ5NKyGTg7th6kY6_D9U3fXkOb-JGId24DYYXFmzYqLQyVpNNdBtae7yzDUXzPeNnkU_sVDo3j8goa7mlA_iknWHHMRueCHVY_qAvljx3vIqfURQ","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] Umbra/RabbitMQ Problem","postDate":"1436240442","msgId":8716,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDU1OUI0QTNBLjYwMzA2MDhAZ214LmRlPg==","inReplyToHeader":"PENBQS16NzArbk53Q0Z2QV96X3FfM2dNb3ByUmszTU5kdDN3ZVNxUEtQY2RrUFFqTjgyQUBtYWlsLmdtYWlsLmNvbT4=","referencesHeader":"PDU1OUE1ODJFLjMwMDAwMDlAZ214LmRlPiA8Q0FBLXo3MCtuTndDRnZBX3pfcV8zZ01vcHJSazNNTmR0M3dlU3FQS1BjZGtQUWpOODJBQG1haWwuZ21haWwuY29tPg=="},"prevInTopic":8715,"nextInTopic":8717,"prevInTime":8715,"nextInTime":8717,"topicId":8714,"numMessagesInTopic":11,"msgSnippet":"Hi Noah, thanks for the help. I configured my two beans similar to yours but the problem persists. It looks like there is a connection timeout but the","rawEmail":"Return-Path: &lt;markus.mirsberger@...&gt;\r\nX-Sender: markus.mirsberger@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 16001 invoked by uid 102); 7 Jul 2015 03:40:51 -0000\r\nX-Received: from unknown (HELO mtaq5.grp.bf1.yahoo.com) (10.193.84.36)\n  by m12.grp.bf1.yahoo.com with SMTP; 7 Jul 2015 03:40:51 -0000\r\nX-Received: (qmail 27127 invoked from network); 7 Jul 2015 03:40:51 -0000\r\nX-Received: from unknown (HELO mta1006.groups.mail.bf1.yahoo.com) (98.139.245.165)\n  by mtaq5.grp.bf1.yahoo.com with SMTP; 7 Jul 2015 03:40:51 -0000\r\nX-Original-Return-Path: &lt;markus.mirsberger@...&gt;\r\nX-Received-SPF: pass (domain of gmx.de designates 212.227.17.22 as permitted sender)\r\nX-YMailISG: JsxBnBoWLDsHU4W1xoXXQMvEZY4RvqTZ8e_njeir1JEkvz0U\n wORSJHKXtTcTbwo89qFrlpUOZu0S61vmxkexSULf0b7ZaJWE6kBoO8nue.YW\n dpwjr1eihy6Xwd_fEecHt2OMu33lojLkx8ZRI8YSueaD3yCn6ch_0AHrkwrP\n KteQcWzdAOTwPQ25Db7_f.ICQs3A55gjSGBXHnYkYVqR9uY6NREjHedyjVEa\n weyhX.3_3eLj2noTE6AyNprEmPcoCxVOa8DjFKZY8GwTTTRFgvxDziLpnhPA\n qHocXspvVa0KyMYyD4KTaN9U.KuU2BrghXU0la0ID4RaAa9n9bUQKWUMfx15\n MPsYtezKVGtzBYWpAKNi0wgkaSqP86e0u9TDMi5AI0PdMJ95ne7AA8j_4lL8\n KmAsaImO.XcvLFKMmfuJagv_ADQMQSezuSSgvdEdEIuqJX85bhYMatADNndV\n 0.kg7rtVNbTMbtwWLKw9gJs4JTXaj0m7zKabKxEdCYBYLk16DdlyfzacRNPW\n l3z32S5uC7y.Vwd6X0ewbsRHfpUapUPeP0NmtwSAUs9anFNWPFqIjBGxx7yF\n GRn2zqVXwkqXfNFxi2nr7DSIAUsYF1WRq3rV2uOKkf20Y_V_AkJqRxdlOCf3\n jRbcG69ZvZM8Nnsl77ObYmWD3eIriDHQ74pelcAeFmDF.TiEwhzixErx8HNI\n ny52VkdGgMV_Y3bQdfONWST4hiKwtvMaaOkhP6AVdsYpZViD4uwqlfREuTB7\n FLNeBvPygno87GvORuVrwuNQMgD4b__qcgOUNu6b3k5WvT5bgCeIx67CLDey\n LfpL8su6cHnGGrSa74c4W37loJ_xIS9WhN1MN7GTkUQntz9J._cApMNDSgd1\n 64gGH3.zfseVCJ2e5gU3ruYT35OnSjftQ9_6FYnuh.vEii1zdUQdwZSV52Gm\n rQG3y2J9xDAEwnQxCqDhBAqsmRosu.sIriGcod77qaiWt0NHskP_R3D5K3.H\n h538qGczHeciXQmfAYUNRjnOJMh._Yq2qpTZx3xvHMGBeaKcmd5VasWdVa0y\n Gq79xuvR.COsXL25DYuZZwdhfZT.7udmGksIAvjJtVp1nXFNBhKO9bXQhblY\n MtmqayfWkYVY26q9LbdL1RjJGyO.t_H40qNO.glXb0ni6l6yif6vKLVEGPVx\n KQjwZifB91tTL_J_3PGHLrW.Q0X4ujDTX6YFZSQj1dVjLTdiwSCZO2SFHcu3\n wVcBbHnXTasAFRgQh8C4rBWjB7BAVWHqTtRbPgpwemn_3A43gS48lC2QV5Kp\n 2D_G_awpU8093OeD_l8dTtoxO7Fj5OzN9Vssllj0O4RfqfXB4s8dbP5GDkUM\n a758Wmes7qIMrzvuItKMJXZfJ3fuIXQHSvsmAgt93dyLW_FoRkjFedHhRP23\n J8J6ATVXGfFCxasZS_kxVocxn0Pr26M0x1mksrsmiOAPhMGrrWLveLw-\r\nAuthentication-Results: mta1006.groups.mail.bf1.yahoo.com  from=gmx.de; domainkeys=neutral (no sig);  from=gmx.de; dkim=neutral (no sig)\r\nX-Received: from 127.0.0.1  (EHLO mout.gmx.net) (212.227.17.22)\n  by mta1006.groups.mail.bf1.yahoo.com with SMTPS; Tue, 07 Jul 2015 03:40:51 +0000\r\nX-Received: from [192.168.1.6] ([171.6.245.220]) by mail.gmx.com (mrgmx101) with\n ESMTPSA (Nemesis) id 0M35iN-1Yv49H1foF-00sw7k for\n &lt;archive-crawler@yahoogroups.com&gt;; Tue, 07 Jul 2015 05:40:49 +0200\r\nMessage-ID: &lt;559B4A3A.6030608@...&gt;\r\nDate: Tue, 07 Jul 2015 10:40:42 +0700\r\nUser-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:31.0) Gecko/20100101 Thunderbird/31.7.0\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;559A582E.3000009@...&gt; &lt;CAA-z70+nNwCFvA_z_q_3gMoprRk3MNdt3weSqPKPcdkPQjN82A@...&gt;\r\nIn-Reply-To: &lt;CAA-z70+nNwCFvA_z_q_3gMoprRk3MNdt3weSqPKPcdkPQjN82A@...&gt;\r\nContent-Type: multipart/alternative;\n boundary=&quot;------------060607050100010304010004&quot;\r\nX-Provags-ID:  V03:K0:W5bQcq/KDomitLINhNOVXCX+2FcI5Al4vdUxLRJ4Ea1JsccQXMw\n DnPwTJb4prarmasvSzRMuC/6YodVnFgytoDOps67IGHZt6dDpFU1uWBqhETscT6YvE44IlP\n ISId6xPXJjJFIWLHOxkQ8LQefsLd+uERT38LZbtMBNstxmCD208pMHRbm8vJwdRxmXr+z6u\n 9+3y4yJ1FlySqxFhfw3dQ==\r\nX-UI-Out-Filterresults: notjunk:1;V01:K0:o08WOD67cFA=:EB8c5zBeNVCN7eobFMC0uv\n sFtHADK1VOzQwCPII6VlaEuVcb0uA/WTDZEIqwGjIk/Jnt4LjDuh/UxWcuXVVZx4FYUPWDvyC\n n1ArLZ83udNDRbu8IwAl0Vphm1qmzSlL+aBNsQ7EjCnF5jYROwvwcIqnTet9eAjoA9hlTyzeK\n v4BmkjdkTKGduISvCsKlQtIZ22eOYBY0nZVF2PpHC7Q4D5u38/2pHsDM01c+Hj3VtBbu06QE6\n JM+bouiXjGGIT/jRhWFVJKq8P15n9dRzYZaski+aDF868q6qXGsrg2V0fGGKs1B+FvdXAAfOK\n ztaGsaPwCbvvARjKObwhYfY+CoN/d9FQPaRl9915X4Dr53Cm9s6bwSbNIyEAlmL7b39BT+B50\n oq9lEQhQIADtnHFasmvUXa185z2wLZAgN7joEanS/Nfjx2uZIdEsqnSFZIV8JZNsxjkmlxEEH\n gVISxgEoI+oz10MFT/zTTbfeBXaqqdMDVw8GDa8X3Rl6wRK9vDXk5r1QYaFn5qTvUKsXCcGJ2\n k3WGAnXzHHbIr+7amyX/m26Ddk8zHuUXT0aqbymd02FjzymMMiYL7u2u1RwhdEiJ8GaKglxDO\n 74t6vD8wH4ZDpHFYeo3h8A9uzpSnUzRaSJLE9AhD/MaJnvx+mXz8mEHk1Zu54kCRyD/fIVgZB\n Qfa092o/G2mZI2vTjIBsUnG8Y0nVV68eKfsVsUa8vIh+UoXWT5ufJqVhSquI1ojTD3YGDIyyE\n Vd26rgEre5jxZWCk\r\nSubject: Re: [archive-crawler] Umbra/RabbitMQ Problem\r\nX-Yahoo-Group-Post: member; u=496150545; y=gWV4IAB_qs2f2Jzm5VKRIM7aUbrigsdHP_fn3uvWpWv4rEdR_BcGaNvSA1qg-t5FYKUTNcekyBr97ss\r\nX-Yahoo-Profile: mirschi74\r\nFrom: &quot;Markus.Mirsberger&quot; &lt;markus.mirsberger@...&gt;\r\n\r\n\r\n--------------060607050100010304010004\r\nContent-Type: text/plain; charset=utf-8; format=flowed\r\nContent-Transfer-Encoding: 8bit\r\n\r\nHi Noah,\n\nthanks for the help. I configured my two beans similar to yours but the \nproblem persists.\nIt looks like there is a connection timeout but the publisher can \nconnect to the same Uri and send URLs to the queue.\n\nthats my configuration:\n\n&lt;bean id=&quot;amqpPublishProcessor&quot; \nclass=&quot;org.archive.modules.AMQPPublishProcessor&quot;&gt;\n     &lt;property name=&quot;amqpUri&quot; \nvalue=&quot;amqp://guest:guest@localhost:5672/%2f&quot;/&gt;\n     &lt;property name=&quot;clientId&quot; value=&quot;myqueue&quot;/&gt;\n&lt;/bean&gt;\n&lt;bean id=&quot;amqpUrlReceiver&quot; \nclass=&quot;org.archive.crawler.frontier.AMQPUrlReceiver&quot;&gt;\n     &lt;property name=&quot;queueName&quot; value=&quot;myqueue&quot;/&gt;\n     &lt;property name=&quot;amqpUri&quot; \nvalue=&quot;amqp://guest:guest@localhost:5672/%2f&quot;/&gt;\n&lt;/bean&gt;\n\n\nand here is the stack trace of the exception:\n\n2015-07-07 03:19:14.660 SEVERE thread-248399 \norg.archive.crawler.frontier.AMQPUrlReceiver$StarterRestarter.run() \nproblem starting AMQP consumer (will try again after 30 seconds)\njava.io.IOException\n         at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:106)\n         at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:102)\n         at \ncom.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:378)\n         at \ncom.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:516)\n         at \ncom.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:533)\n         at \norg.archive.crawler.frontier.AMQPUrlReceiver.connection(AMQPUrlReceiver.java:190)\n         at \norg.archive.crawler.frontier.AMQPUrlReceiver.channel(AMQPUrlReceiver.java:203)\n         at \norg.archive.crawler.frontier.AMQPUrlReceiver$StarterRestarter.run(AMQPUrlReceiver.java:119)\nCaused by: com.rabbitmq.client.ShutdownSignalException: connection \nerror; reason: java.net.SocketTimeoutException: Timeout during \nConnection negotiation\n         at \ncom.rabbitmq.utility.ValueOrException.getValue(ValueOrException.java:67)\n         at \ncom.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:33)\n         at \ncom.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:343)\n         at \ncom.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:321)\n         ... 5 more\nCaused by: java.net.SocketTimeoutException: Timeout during Connection \nnegotiation\n         at \ncom.rabbitmq.client.impl.AMQConnection.handleSocketTimeout(AMQConnection.java:584)\n         at \ncom.rabbitmq.client.impl.AMQConnection.access$500(AMQConnection.java:63)\n         at \ncom.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:559)\n\n\nThanks,\nMarkus\n\n\nAm 07.07.2015 um 07:24 schrieb Noah Levitt nlevitt@... \n[archive-crawler]:\n&gt; Hello Markus,\n&gt;\n&gt; There is something that \n&gt; https://sbforge.org/display/NAS/Integrating+Umbra+And+Heritrix+3 \n&gt; neglects to mention that might explain the problem you&#39;re seeing. \n&gt; AMPQUrlReceiver needs to be configured with a &quot;queueName&quot; that matches \n&gt; the clientId set on AMQPPublishProcessor.\n&gt;\n&gt; Here is an example of the relevant configuration from an archive-it \n&gt; crawl job. Our shouldProcessRule sends only seeds to umbra. There are \n&gt; reasons for the particular way it works which I can explain if anyone \n&gt; is wondering. :) But the important thing to be aware of is that the \n&gt; shouldProcessRule can be used to limit the umbra treatment to the urls \n&gt; of your choice.\n&gt;\n&gt;         &lt;bean id=&quot;amqpUrlReceiver&quot; \n&gt; class=&quot;org.archive.crawler.frontier.AMQPUrlReceiver&quot;&gt;\n&gt; &lt;property name=&quot;queueName&quot; value=&quot;archiveit.prod.9876-20150704232858960&quot;/&gt;\n&gt; &lt;property name=&quot;amqpUri&quot; value=&quot;amqp://guest:guest@localhost:5672/%2f&quot;/&gt;\n&gt;         &lt;/bean&gt;\n&gt;\n&gt;         &lt;bean id=&quot;amqpPublishProcessor&quot; \n&gt; class=&quot;org.archive.modules.AMQPPublishProcessor&quot;&gt;\n&gt; &lt;property name=&quot;amqpUri&quot; value=&quot;amqp://guest:guest@localhost:5672/%2f&quot;/&gt;\n&gt; &lt;property name=&quot;clientId&quot; value=&quot;archiveit.prod.9876-20150704232858960&quot;/&gt;\n&gt; &lt;property name=&quot;shouldProcessRule&quot;&gt;\n&gt; &lt;bean class=&quot;org.archive.modules.deciderules.ExpressionDecideRule&quot;&gt;\n&gt;     &lt;property name=&quot;decision&quot; value=&quot;REJECT&quot;/&gt;\n&gt;     &lt;property name=&quot;groovyExpression&quot; value=&quot;!(curi.via == null \n&gt; &amp;&amp; (curi.hasBeenLinkExtracted() || (curi.getFetchStatus() \n&gt; &gt;= 300 &amp;&amp; curi.getFetchStatus() &lt; 400)))&quot;/&gt;\n&gt; &lt;/bean&gt;\n&gt; &lt;/property&gt;\n&gt;         &lt;/bean&gt;\n&gt;\n&gt; If the problem persists, please send the full stack trace.\n&gt;\n&gt; Noah\n&gt;\n&gt;\n&gt; On Mon, Jul 6, 2015 at 3:27 AM, &#39;Markus.Mirsberger&#39; \n&gt; markus.mirsberger@... &lt;mailto:markus.mirsberger@...&gt; \n&gt; [archive-crawler] &lt;archive-crawler@yahoogroups.com \n&gt; &lt;mailto:archive-crawler@yahoogroups.com&gt;&gt; wrote:\n&gt;\n&gt;\n&gt;\n&gt;     Hi,\n&gt;\n&gt;     I am trying to crawl websites through Umbra / RabbitMQ to get more\n&gt;     URLs generated by JS.\n&gt;     I set up everything as it is described here:\n&gt;     https://sbforge.org/display/NAS/Integrating+Umbra+And+Heritrix+3\n&gt;\n&gt;     I can see in my crawl logs that the URLs are beeing sent to\n&gt;     Umbra/RabbitMQ because of the Status *sentToAMQP*****\n&gt;     I think this means that so far my Requests are successfully sent\n&gt;     .....I can see the requests in the RabbitMQ Webadmin as well.\n&gt;\n&gt;     The problem is that I can not see anything comming back from\n&gt;     Umbra/RabbitMQ ..... the documentation says that I should see URLs\n&gt;     with the status*received* *FromAMQP***. This doesnt happen but\n&gt;     instead I get this in my job logs:\n&gt;\n&gt;     *SEVERE problem starting AMQP consumer (will try again after 30\n&gt;     seconds) (in thread &#39;AMQPUrlReceiver-starter-restarter&#39;)*\n&gt;\n&gt;     My logfile from rabbitmq says this:\n&gt;\n&gt;     =INFO REPORT==== 6-Jul-2015::12:24:41 ===\n&gt;     accepting AMQP connection &lt;0.15717.1733&gt; (127.0.0.1:45721\n&gt;     &lt;http://127.0.0.1:45721&gt; -&gt; 127.0.0.1:5672 &lt;http://127.0.0.1:5672&gt;)\n&gt;\n&gt;     =INFO REPORT==== 6-Jul-2015::12:24:45 ===\n&gt;     accepting AMQP connection &lt;0.15762.1733&gt; (127.0.0.1:45724\n&gt;     &lt;http://127.0.0.1:45724&gt; -&gt; 127.0.0.1:5672 &lt;http://127.0.0.1:5672&gt;)\n&gt;\n&gt;     =INFO REPORT==== 6-Jul-2015::12:25:21 ===\n&gt;     closing AMQP connection &lt;0.15762.1733&gt; (127.0.0.1:45724\n&gt;     &lt;http://127.0.0.1:45724&gt; -&gt; 127.0.0.1:5672 &lt;http://127.0.0.1:5672&gt;)\n&gt;\n&gt;     =INFO REPORT==== 6-Jul-2015::12:25:21 ===\n&gt;     closing AMQP connection &lt;0.15717.1733&gt; (127.0.0.1:45721\n&gt;     &lt;http://127.0.0.1:45721&gt; -&gt; 127.0.0.1:5672 &lt;http://127.0.0.1:5672&gt;)\n&gt;\n&gt;\n&gt;     As you can see rabbitmq is acception 2 connections from heritrix\n&gt;     and when I finish the crawl both are closed.\n&gt;     I think they are used to send the URLs. After acception the\n&gt;     connections and some seconds the &quot;AMQP consumer&quot; problem occours\n&gt;     and keeps comming every 30 seconds as the AMQPUrlReceiver tries to\n&gt;     start a consumer.\n&gt;\n&gt;     Does anyone have an idea what might be the problem? Did I miss\n&gt;     anything which wasn&#39;t described in the howto above?\n&gt;\n&gt;\n&gt;     Thanks,\n&gt;     Markus\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; \n\n\r\n--------------060607050100010304010004\r\nContent-Type: text/html; charset=utf-8\r\nContent-Transfer-Encoding: 8bit\r\n\r\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta content=&quot;text/html; charset=utf-8&quot; http-equiv=&quot;Content-Type&quot;&gt;\n  &lt;/head&gt;\n  &lt;body bgcolor=&quot;#FFFFFF&quot; text=&quot;#000000&quot;&gt;\n    Hi Noah,&lt;br&gt;\n    &lt;br&gt;\n    thanks for the help. I configured my two beans similar to yours but\n    the problem persists. &lt;br&gt;\n    It looks like there is a connection timeout but the publisher can\n    connect to the same Uri and send URLs to the queue.&lt;br&gt;\n    &lt;br&gt;\n    thats my configuration:&lt;br&gt;\n    &lt;br&gt;\n    &lt;bean id=&quot;amqpPublishProcessor&quot;\n    class=&quot;org.archive.modules.AMQPPublishProcessor&quot;&gt;&lt;br&gt;\n        &lt;property name=&quot;amqpUri&quot;\n    value=&quot;amqp://guest:guest@localhost:5672/%2f&quot;/&gt;&lt;br&gt;\n        &lt;property name=&quot;clientId&quot; value=&quot;myqueue&quot;/&gt;&lt;br&gt;\n    &lt;/bean&gt;&lt;br&gt;\n    &lt;bean id=&quot;amqpUrlReceiver&quot;\n    class=&quot;org.archive.crawler.frontier.AMQPUrlReceiver&quot;&gt;&lt;br&gt;\n        &lt;property name=&quot;queueName&quot; value=&quot;myqueue&quot;/&gt;&lt;br&gt;\n        &lt;property name=&quot;amqpUri&quot;\n    value=&quot;amqp://guest:guest@localhost:5672/%2f&quot;/&gt;&lt;br&gt;\n    &lt;/bean&gt;&lt;br&gt;\n    &lt;br&gt;\n    &lt;br&gt;\n    and here is the stack trace of the exception:&lt;br&gt;\n    &lt;br&gt;\n    2015-07-07 03:19:14.660 SEVERE thread-248399\n    org.archive.crawler.frontier.AMQPUrlReceiver$StarterRestarter.run()\n    problem starting AMQP consumer (will try again after 30 seconds)&lt;br&gt;\n    java.io.IOException&lt;br&gt;\n            at\n    com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:106)&lt;br&gt;\n            at\n    com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:102)&lt;br&gt;\n            at\n    com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:378)&lt;br&gt;\n            at\ncom.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:516)&lt;br&gt;\n            at\ncom.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:533)&lt;br&gt;\n            at\norg.archive.crawler.frontier.AMQPUrlReceiver.connection(AMQPUrlReceiver.java:190)&lt;br&gt;\n            at\norg.archive.crawler.frontier.AMQPUrlReceiver.channel(AMQPUrlReceiver.java:203)&lt;br&gt;\n            at\norg.archive.crawler.frontier.AMQPUrlReceiver$StarterRestarter.run(AMQPUrlReceiver.java:119)&lt;br&gt;\n    Caused by: com.rabbitmq.client.ShutdownSignalException: connection\n    error; reason: java.net.SocketTimeoutException: Timeout during\n    Connection negotiation&lt;br&gt;\n            at\n    com.rabbitmq.utility.ValueOrException.getValue(ValueOrException.java:67)&lt;br&gt;\n            at\ncom.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:33)&lt;br&gt;\n            at\ncom.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:343)&lt;br&gt;\n            at\n    com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:321)&lt;br&gt;\n            ... 5 more&lt;br&gt;\n    Caused by: java.net.SocketTimeoutException: Timeout during\n    Connection negotiation&lt;br&gt;\n            at\ncom.rabbitmq.client.impl.AMQConnection.handleSocketTimeout(AMQConnection.java:584)&lt;br&gt;\n            at\n    com.rabbitmq.client.impl.AMQConnection.access$500(AMQConnection.java:63)&lt;br&gt;\n            at\ncom.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:559)&lt;br&gt;\n    &lt;br&gt;\n    &lt;br&gt;\n    Thanks,&lt;br&gt;\n    Markus&lt;br&gt;\n    &lt;br&gt;\n    &lt;br&gt;\n    &lt;div class=&quot;moz-cite-prefix&quot;&gt;Am 07.07.2015 um 07:24 schrieb Noah\n      Levitt &lt;a class=&quot;moz-txt-link-abbreviated&quot; href=&quot;mailto:nlevitt@...&quot;&gt;nlevitt@...&lt;/a&gt; [archive-crawler]:&lt;br&gt;\n    &lt;/div&gt;\n    &lt;blockquote\ncite=&quot;mid:CAA-z70+nNwCFvA_z_q_3gMoprRk3MNdt3weSqPKPcdkPQjN82A@...&quot;\n      type=&quot;cite&quot;&gt; &lt;span style=&quot;display:none&quot;&gt; &lt;/span&gt;\n      \n          &lt;div id=&quot;ygrp-text&quot;&gt;\n            &lt;div dir=&quot;ltr&quot;&gt;\n              &lt;div class=&quot;gmail_default&quot;\n                style=&quot;font-family:arial,helvetica,sans-serif;&quot;&gt;Hello\n                Markus,&lt;/div&gt;\n              &lt;div class=&quot;gmail_default&quot;\n                style=&quot;font-family:arial,helvetica,sans-serif;&quot;&gt;&lt;br&gt;\n              &lt;/div&gt;\n              &lt;div class=&quot;gmail_default&quot;&gt;&lt;font face=&quot;arial, helvetica,\n                  sans-serif&quot;&gt;There is something that &lt;/font&gt;&lt;span\n                  style=&quot;font-family:arial,helvetica,sans-serif;&quot;&gt;&lt;a\n                    moz-do-not-send=&quot;true&quot;\n                    href=&quot;https://sbforge.org/display/NAS/Integrating+Umbra+And+Heritrix+3&quot;&gt;https://sbforge.org/display/NAS/Integrating+Umbra+And+Heritrix+3&lt;/a&gt; &lt;/span&gt;&lt;span\n                  style=&quot;font-family:arial,helvetica,sans-serif;&quot;&gt;neglects\n                  to mention that might explain the problem you&#39;re\n                  seeing. AMPQUrlReceiver needs to be configured with a\n                  &quot;queueName&quot; that matches the clientId set on\n                  AMQPPublishProcessor.&lt;/span&gt;&lt;/div&gt;\n              &lt;div class=&quot;gmail_default&quot;&gt;&lt;font face=&quot;arial, helvetica,\n                  sans-serif&quot;&gt;&lt;br&gt;\n                &lt;/font&gt;&lt;/div&gt;\n              &lt;div class=&quot;gmail_default&quot;&gt;&lt;span\n                  style=&quot;font-family:arial,helvetica,sans-serif;&quot;&gt;Here\n                  is an example of the relevant configuration from an\n                  archive-it crawl job. Our shouldProcessRule sends only\n                  seeds to umbra. There are reasons for the particular\n                  way it works which I can explain if anyone is\n                  wondering. :) But the important thing to be aware of\n                  is that the shouldProcessRule can be used to limit the\n                  umbra treatment to the urls of your choice.&lt;/span&gt;&lt;br&gt;\n              &lt;/div&gt;\n              &lt;div class=&quot;gmail_default&quot;\n                style=&quot;font-family:arial,helvetica,sans-serif;&quot;&gt;&lt;br&gt;\n              &lt;/div&gt;\n              &lt;div class=&quot;gmail_default&quot;\n                style=&quot;font-family:arial,helvetica,sans-serif;&quot;&gt;\n                &lt;div class=&quot;gmail_default&quot;&gt;\n                  &lt;div class=&quot;gmail_default&quot;&gt;        &lt;bean\n                    id=&quot;amqpUrlReceiver&quot;\n                    class=&quot;org.archive.crawler.frontier.AMQPUrlReceiver&quot;&gt;&lt;/div&gt;\n                  &lt;div class=&quot;gmail_default&quot;&gt;               \n                    &lt;property name=&quot;queueName&quot;\n                    value=&quot;archiveit.prod.9876-20150704232858960&quot;/&gt;&lt;/div&gt;\n                  &lt;div class=&quot;gmail_default&quot;&gt;               \n                    &lt;property name=&quot;amqpUri&quot;\n                    value=&quot;amqp://guest:guest@localhost:5672/%2f&quot;/&gt;&lt;/div&gt;\n                  &lt;div class=&quot;gmail_default&quot;&gt;        &lt;/bean&gt;&lt;/div&gt;\n                  &lt;div class=&quot;gmail_default&quot;&gt;&lt;br&gt;\n                  &lt;/div&gt;\n                  &lt;div class=&quot;gmail_default&quot;&gt;        &lt;bean\n                    id=&quot;amqpPublishProcessor&quot;\n                    class=&quot;org.archive.modules.AMQPPublishProcessor&quot;&gt;&lt;/div&gt;\n                  &lt;div class=&quot;gmail_default&quot;&gt;               \n                    &lt;property name=&quot;amqpUri&quot;\n                    value=&quot;amqp://guest:guest@localhost:5672/%2f&quot;/&gt;&lt;/div&gt;\n                  &lt;div class=&quot;gmail_default&quot;&gt;               \n                    &lt;property name=&quot;clientId&quot;\n                    value=&quot;archiveit.prod.9876-20150704232858960&quot;/&gt;&lt;/div&gt;\n                  &lt;div class=&quot;gmail_default&quot;&gt;               \n                    &lt;property name=&quot;shouldProcessRule&quot;&gt;&lt;/div&gt;\n                  &lt;div class=&quot;gmail_default&quot;&gt;                       \n                    &lt;bean\n                    class=&quot;org.archive.modules.deciderules.ExpressionDecideRule&quot;&gt;&lt;/div&gt;\n                  &lt;div class=&quot;gmail_default&quot;&gt;                           \n                        &lt;property name=&quot;decision&quot; value=&quot;REJECT&quot;/&gt;&lt;/div&gt;\n                  &lt;div class=&quot;gmail_default&quot;&gt;                           \n                        &lt;property name=&quot;groovyExpression&quot;\n                    value=&quot;!(curi.via == null &amp;amp;&amp;amp;\n                    (curi.hasBeenLinkExtracted() ||\n                    (curi.getFetchStatus() &amp;gt;= 300\n                    &amp;amp;&amp;amp; curi.getFetchStatus() &amp;lt;\n                    400)))&quot;/&gt;&lt;/div&gt;\n                  &lt;div class=&quot;gmail_default&quot;&gt;                       \n                    &lt;/bean&gt;&lt;/div&gt;\n                  &lt;div class=&quot;gmail_default&quot;&gt;               \n                    &lt;/property&gt;&lt;/div&gt;\n                  &lt;div class=&quot;gmail_default&quot;&gt;        &lt;/bean&gt;&lt;/div&gt;\n                  &lt;div&gt;\n                    &lt;div class=&quot;gmail_default&quot;\n                      style=&quot;font-family:arial,sans-serif;&quot;&gt;&lt;br&gt;\n                    &lt;/div&gt;\n                    &lt;div class=&quot;gmail_default&quot;\n                      style=&quot;font-family:arial,sans-serif;&quot;&gt;If the\n                      problem persists, please send the full stack\n                      trace.&lt;/div&gt;\n                    &lt;div class=&quot;gmail_default&quot;&gt;&lt;br&gt;\n                    &lt;/div&gt;\n                  &lt;/div&gt;\n                  &lt;div class=&quot;gmail_default&quot;&gt;Noah&lt;/div&gt;\n                  &lt;div class=&quot;gmail_default&quot;&gt;&lt;br&gt;\n                  &lt;/div&gt;\n                &lt;/div&gt;\n              &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=&quot;gmail_extra&quot;&gt;&lt;br&gt;\n              &lt;div class=&quot;gmail_quote&quot;&gt;On Mon, Jul 6, 2015 at 3:27 AM,\n                &#39;Markus.Mirsberger&#39; &lt;a moz-do-not-send=&quot;true&quot;\n                  href=&quot;mailto:markus.mirsberger@...&quot;&gt;markus.mirsberger@...&lt;/a&gt;\n                [archive-crawler] &lt;span dir=&quot;ltr&quot;&gt;&lt;&lt;a\n                    moz-do-not-send=&quot;true&quot;\n                    href=&quot;mailto:archive-crawler@yahoogroups.com&quot;\n                    target=&quot;_blank&quot;&gt;archive-crawler@yahoogroups.com&lt;/a&gt;&gt;&lt;/span&gt;\n                wrote:&lt;br&gt;\n                &lt;blockquote class=&quot;gmail_quote&quot; style=&quot;border-left:1px\n                  #ccc solid;&quot;&gt;\n                  &lt;div bgcolor=&quot;#FFFFFF&quot; text=&quot;#000000&quot;&gt;\n                    &lt;br&gt;\n                    &lt;br&gt;\n                    Hi,&lt;br&gt;\n                    &lt;br&gt;\n                    I am trying to crawl websites through Umbra /\n                    RabbitMQ to get more URLs generated by JS.&lt;br&gt;\n                    I set up everything as it is described here: &lt;a\n                      moz-do-not-send=&quot;true&quot;\n                      href=&quot;https://sbforge.org/display/NAS/Integrating+Umbra+And+Heritrix+3&quot;\n                      target=&quot;_blank&quot;&gt;https://sbforge.org/display/NAS/Integrating+Umbra+And+Heritrix+3&lt;/a&gt;&lt;br&gt;\n                    &lt;br&gt;\n                    I can see in my crawl logs that the URLs are beeing\n                    sent to Umbra/RabbitMQ because of the Status &lt;b&gt;sentToAMQP&lt;/b&gt;&lt;b&gt;&lt;span\nstyle=&quot;color:rgb(34,34,34);font-family:monospace;font-size:small;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;text-align:left;text-indent:0px;text-transform:none;&quot;&gt;&lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span\nstyle=&quot;color:rgb(34,34,34);font-family:monospace;font-size:small;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;text-align:left;text-indent:0px;text-transform:none;&quot;&gt;&lt;/span&gt;&lt;/b&gt;&lt;br&gt;\n                    I think this means that so far my Requests are\n                    successfully sent .....I can see the requests in the\n                    RabbitMQ Webadmin as well.&lt;br&gt;\n                    &lt;br&gt;\n                    The problem is that I can not see anything comming\n                    back from Umbra/RabbitMQ ..... the documentation\n                    says that I should see URLs with the status&lt;b&gt;\n                      received&lt;/b&gt; &lt;b&gt;FromAMQP&lt;/b&gt;&lt;b&gt;&lt;span\nstyle=&quot;color:rgb(51,51,51);font-family:Arial,sans-serif;font-size:14px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;text-align:left;text-indent:0px;text-transform:none;&quot;&gt;&lt;/span&gt;&lt;/b&gt;.\n                    This doesnt happen but instead I get this in my job\n                    logs:&lt;br&gt;\n                    &lt;br&gt;\n                    &lt;b&gt;SEVERE problem starting AMQP consumer (will try\n                      again after 30 seconds) (in thread\n                      &#39;AMQPUrlReceiver-starter-restarter&#39;)&lt;/b&gt;&lt;br&gt;\n                    &lt;br&gt;\n                    My logfile from rabbitmq says this:&lt;br&gt;\n                    &lt;br&gt;\n                    =INFO REPORT==== 6-Jul-2015::12:24:41 ===&lt;br&gt;\n                    accepting AMQP connection &lt;0.15717.1733&gt; (&lt;a\n                      moz-do-not-send=&quot;true&quot;\n                      href=&quot;http://127.0.0.1:45721&quot; target=&quot;_blank&quot;&gt;127.0.0.1:45721&lt;/a&gt;\n                    -&gt; &lt;a moz-do-not-send=&quot;true&quot;\n                      href=&quot;http://127.0.0.1:5672&quot; target=&quot;_blank&quot;&gt;127.0.0.1:5672&lt;/a&gt;)&lt;br&gt;\n                    &lt;br&gt;\n                    =INFO REPORT==== 6-Jul-2015::12:24:45 ===&lt;br&gt;\n                    accepting AMQP connection &lt;0.15762.1733&gt; (&lt;a\n                      moz-do-not-send=&quot;true&quot;\n                      href=&quot;http://127.0.0.1:45724&quot; target=&quot;_blank&quot;&gt;127.0.0.1:45724&lt;/a&gt;\n                    -&gt; &lt;a moz-do-not-send=&quot;true&quot;\n                      href=&quot;http://127.0.0.1:5672&quot; target=&quot;_blank&quot;&gt;127.0.0.1:5672&lt;/a&gt;)&lt;br&gt;\n                    &lt;br&gt;\n                    =INFO REPORT==== 6-Jul-2015::12:25:21 ===&lt;br&gt;\n                    closing AMQP connection &lt;0.15762.1733&gt; (&lt;a\n                      moz-do-not-send=&quot;true&quot;\n                      href=&quot;http://127.0.0.1:45724&quot; target=&quot;_blank&quot;&gt;127.0.0.1:45724&lt;/a&gt;\n                    -&gt; &lt;a moz-do-not-send=&quot;true&quot;\n                      href=&quot;http://127.0.0.1:5672&quot; target=&quot;_blank&quot;&gt;127.0.0.1:5672&lt;/a&gt;)&lt;br&gt;\n                    &lt;br&gt;\n                    =INFO REPORT==== 6-Jul-2015::12:25:21 ===&lt;br&gt;\n                    closing AMQP connection &lt;0.15717.1733&gt; (&lt;a\n                      moz-do-not-send=&quot;true&quot;\n                      href=&quot;http://127.0.0.1:45721&quot; target=&quot;_blank&quot;&gt;127.0.0.1:45721&lt;/a&gt;\n                    -&gt; &lt;a moz-do-not-send=&quot;true&quot;\n                      href=&quot;http://127.0.0.1:5672&quot; target=&quot;_blank&quot;&gt;127.0.0.1:5672&lt;/a&gt;)&lt;br&gt;\n                    &lt;br&gt;\n                    &lt;br&gt;\n                    As you can see rabbitmq is acception 2 connections\n                    from heritrix and when I finish the crawl both are\n                    closed.&lt;br&gt;\n                    I think they are used to send the URLs. After\n                    acception the connections and some seconds the &quot;AMQP\n                    consumer&quot; problem occours and keeps comming every 30\n                    seconds as the AMQPUrlReceiver tries to start a\n                    consumer.&lt;br&gt;\n                    &lt;br&gt;\n                    Does anyone have an idea what might be the problem?\n                    Did I miss anything which wasn&#39;t described in the\n                    howto above?&lt;br&gt;\n                    &lt;br&gt;\n                    &lt;br&gt;\n                    Thanks,&lt;br&gt;\n                    Markus&lt;br&gt;\n                    &lt;br&gt;\n                    &lt;br&gt;\n                    &lt;br&gt;\n                    &lt;br&gt;\n                  &lt;/div&gt;\n                &lt;/blockquote&gt;\n              &lt;/div&gt;\n              &lt;br&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n          \n      \n      &lt;!-- end group email --&gt;\n    &lt;/blockquote&gt;\n    &lt;br&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n\r\n--------------060607050100010304010004--\r\n\n"}}