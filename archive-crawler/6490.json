{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":335765853,"authorName":"Jens Bengtsson","from":"&quot;Jens Bengtsson&quot; &lt;poserdonut@...&gt;","profile":"poserdoser","replyTo":"LIST","senderId":"SwuYcZGK0ZtDExcH-Y1p24dvS5mZh53IUsRoLPPkI-hHJcWNABHa2lMCbsYx9gEITXG1pKhcNcIJNUx7Y_cnubbBWmj7VJpH5_ZKwVQr","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: How to specify OnHostsDecideRule in H3","postDate":"1271997711","msgId":6490,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PGhxcjhlZittNmVyQGVHcm91cHMuY29tPg==","inReplyToHeader":"PDRCRDBCQTE3LjcwMDAwMDZAYXJjaGl2ZS5vcmc+"},"prevInTopic":6488,"nextInTopic":6493,"prevInTime":6489,"nextInTime":6491,"topicId":6481,"numMessagesInTopic":8,"msgSnippet":"Yeah, that s what I thought. But I eliminated the TranscludedDecideRule setting and it still went and crawled from other domains as well. I ve also setup a","rawEmail":"Return-Path: &lt;poserdonut@...&gt;\r\nX-Sender: poserdonut@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 66795 invoked from network); 23 Apr 2010 04:46:50 -0000\r\nX-Received: from unknown (98.137.34.45)\n  by m13.grp.re1.yahoo.com with QMQP; 23 Apr 2010 04:46:50 -0000\r\nX-Received: from unknown (HELO n5-vm6.bullet.mail.sp2.yahoo.com) (67.195.135.101)\n  by mta2.grp.sp2.yahoo.com with SMTP; 23 Apr 2010 04:46:50 -0000\r\nX-Received: from [67.195.134.49] by n5.bullet.mail.sp2.yahoo.com with NNFMP; 23 Apr 2010 04:41:54 -0000\r\nX-Received: from [69.147.65.148] by t2.bullet.mail.sp2.yahoo.com with NNFMP; 23 Apr 2010 04:41:54 -0000\r\nX-Received: from [98.137.34.72] by t11.bullet.mail.sp1.yahoo.com with NNFMP; 23 Apr 2010 04:41:54 -0000\r\nDate: Fri, 23 Apr 2010 04:41:51 -0000\r\nTo: archive-crawler@yahoogroups.com\r\nMessage-ID: &lt;hqr8ef+m6er@...&gt;\r\nIn-Reply-To: &lt;4BD0BA17.7000006@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: &quot;Jens Bengtsson&quot; &lt;poserdonut@...&gt;\r\nSubject: Re: How to specify OnHostsDecideRule in H3\r\nX-Yahoo-Group-Post: member; u=335765853; y=Gd6nMX0E8qU7FKyZpWRfkwy6DRnlVHFblOz6acUXLI_twPs0_A\r\nX-Yahoo-Profile: poserdoser\r\n\r\nYeah, that&#39;s what I thought. But I eliminated the TranscludedDecideRule set=\r\nting and it still went and crawled from other domains as well. I&#39;ve also se=\r\ntup a regexp decide rule so it won&#39;t download stuff like css and a bunch of=\r\n other file types, which it still does anyways it seems. So I think somethi=\r\nng is wrong with my setup. \n\n--- In archive-crawler@yahoogroups.com, Gordon=\r\n Mohr &lt;gojomo@...&gt; wrote:\n&gt;\n&gt; See this FAQ:\n&gt; \n&gt; https://webarchive.jira.co=\r\nm/wiki/display/Heritrix/unexpected+offsite+content\n&gt; \n&gt; Heritrix is not get=\r\nting everything on those other domains -- only those \n&gt; things that appear =\r\nnecessary to render pages on the main scope. (The \n&gt; crawl.log lines for th=\r\ne off-domain URLs will show &#39;hops path&#39; strings like \n&gt; &quot;EE&quot; or &quot;RE&quot; or &quot;ER=\r\nX&quot;. That means some combination of &#39;E&#39;mbeds, \n&gt; &#39;R&#39;edirects, and &#39;X&#39;specula=\r\ntive outinks led the crawler down those paths.\n&gt; \n&gt; - Gordon @ IA\n&gt; \n&gt; On 4=\r\n/22/10 12:59 PM, Jens Bengtsson wrote:\n&gt; &gt; Then I guess H3 is broken for me=\r\n.\n&gt; &gt; \n&gt; &gt; Because if I define\n&gt; &gt; \n&gt; &gt; www.idg.se as my seed\n&gt; &gt; \n&gt; &gt; and =\r\nthen have\n&gt; &gt; \n&gt; &gt; seedsAsSurtPrefixes=3Dtrue for SurtPrefixedDecideRule\n&gt; =\r\n&gt; \n&gt; &gt; It still results in Heretrix crawling every domain it comes in conta=\r\nct with. My mirror folder filled up with 100+ directories with different do=\r\nmains that were crawled.\n&gt; &gt; \n&gt; &gt; \n&gt; &gt; --- In archive-crawler@yahoogroups.c=\r\nom, Gordon Mohr&lt;gojomo@&gt;  wrote:\n&gt; &gt;&gt;\n&gt; &gt;&gt; On 4/21/10 9:58 PM, Jens Bengtss=\r\non wrote:\n&gt; &gt;&gt;&gt; OK, so I don&#39;t need to use OnHostsDecideRule. Is the same t=\r\nrue for OnDomainDecideRule? Can I achieve the same &quot;lockdown&quot; with SurtPref=\r\nixedDecideRule?\n&gt; &gt;&gt;\n&gt; &gt;&gt; The same is true for OnDomainsDecideRule -- it ju=\r\nst auto-truncates the\n&gt; &gt;&gt; deduced prefix even more, so that anything &quot;with=\r\nin the same domain&quot;\n&gt; &gt;&gt; (including subdomains and, for &quot;www.&quot;, sibling dom=\r\nains) is accepted.\n&gt; &gt;&gt;\n&gt; &gt;&gt; For example, if your seed is:\n&gt; &gt;&gt;\n&gt; &gt;&gt; http:/=\r\n/www.example.com/images/index.html\n&gt; &gt;&gt;\n&gt; &gt;&gt; ...then the usual convert-to-S=\r\nURT-prefix procedure results in...\n&gt; &gt;&gt;\n&gt; &gt;&gt; http://(com,example,www,)/imag=\r\nes/\n&gt; &gt;&gt;\n&gt; &gt;&gt; If OnHostsDecideRule is used, that gets further truncated to.=\r\n..\n&gt; &gt;&gt;\n&gt; &gt;&gt; http://(com,example,www,)/\n&gt; &gt;&gt;\n&gt; &gt;&gt; ...which allows all URLs =\r\non that same exact host to be matched. If\n&gt; &gt;&gt; OnDomainsDecideRule is used,=\r\n that gets further truncated to...\n&gt; &gt;&gt;\n&gt; &gt;&gt; http://(com,example,\n&gt; &gt;&gt;\n&gt; &gt;&gt;=\r\n ...so everything on &#39;example.com&#39; domain and subdomains is matched.\n&gt; &gt;&gt; (=\r\n&#39;www,)/&#39; is special-case stripped; for any other subdomains only the\n&gt; &gt;&gt; &#39;=\r\n)/&#39; would be stripped.\n&gt; &gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;&gt;&gt; I still don&#39;t understand what the pr=\r\noperty name is for defining URI&#39;s to accept (if I want to do it inline inst=\r\nead of in a file). I haven&#39;t been able to find a proper documentation of th=\r\ne properties available. Is there none, do I have to go looking in the sourc=\r\ne to figure it out?\n&gt; &gt;&gt;\n&gt; &gt;&gt; If it&#39;s not yet documented in the User Guide,=\r\n the source or hints in the\n&gt; &gt;&gt; example configuration files are the only o=\r\nther documentation.\n&gt; &gt;&gt;\n&gt; &gt;&gt; SurtPrefixedDecideRule and its subclasses onl=\r\ny accept prefixes from your\n&gt; &gt;&gt; seeds, or another &#39;surtsSourceFile&#39;. They =\r\ndon&#39;t accept an inline list of\n&gt; &gt;&gt; prefixes. (They theoretically could but=\r\n haven&#39;t yet been set up that way.)\n&gt; &gt;&gt;\n&gt; &gt;&gt;&gt; This is the definition in th=\r\ne default config:\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; &lt;bean class=3D&quot;org.archive.modules.deciderule=\r\ns.surt.SurtPrefixedDecideRule&quot;&gt;\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; &lt;!--\n&gt; &gt;&gt;&gt;    &lt;property name=3D=\r\n&quot;seedsAsSurtPrefixes&quot; value=3D&quot;true&quot; /&gt;\n&gt; &gt;&gt;&gt; --&gt;\n&gt; &gt;&gt;&gt; &lt;!--&lt;property name=\r\n=3D&quot;alsoCheckVia&quot; value=3D&quot;true&quot; /&gt;   --&gt;\n&gt; &gt;&gt;&gt; &lt;!--&lt;property name=3D&quot;surts=\r\nSourceFile&quot; value=3D&quot;&quot; /&gt;   --&gt;\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; &lt;!--\n&gt; &gt;&gt;&gt;    &lt;property name=3D=\r\n&quot;surtsDumpFile&quot; value=3D&quot;surts.dump&quot; /&gt;\n&gt; &gt;&gt;&gt; --&gt;\n&gt; &gt;&gt;&gt; &lt;/bean&gt;\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt;=\r\n seedsAsSurtPrefixes in commented out, but does it still default to true? A=\r\nll I want to do now is limit the crawl to a specific domain. So it feels li=\r\nke overkill to have a file just to store one line with www.xxx.yyy in.\n&gt; &gt;&gt;=\r\n\n&gt; &gt;&gt; As noted atop the example/default configuration files:\n&gt; &gt;&gt;\n&gt; &gt;&gt; &quot;  C=\r\nommented-out beans and properties are provided as an example; values\n&gt; &gt;&gt;  =\r\n    shown in comments reflect the actual defaults which are in effect\n&gt; &gt;&gt; =\r\n     without specification. (To change from the default behavior,\n&gt; &gt;&gt;     =\r\n uncomment AND alter the shown values.)   &quot;\n&gt; &gt;&gt;\n&gt; &gt;&gt; So you only need to u=\r\nncomment and change the &#39;seedsAsSurtPrefixes&#39; line\n&gt; &gt;&gt; if you want to chan=\r\nge its value to false.\n&gt; &gt;&gt;\n&gt; &gt;&gt; Have you tried a crawl with the default sc=\r\nope to see what it does? If\n&gt; &gt;&gt; your seed URL is &quot;http://www.example.com&quot; =\r\nand you do a crawl with the\n&gt; &gt;&gt; default settings, the crawl stays on &quot;http=\r\n://www.example.com&quot; URLs,\n&gt; &gt;&gt; except where it seems offsite URLs are neces=\r\nsary to render pages (as\n&gt; &gt;&gt; with IMGs, SCRIPTs, FRAMEs, and Javascript-me=\r\nntioned URLs).\n&gt; &gt;&gt;\n&gt; &gt;&gt; That&#39;s the automatic effect of the SurtPrefixedDec=\r\nideRule being in the\n&gt; &gt;&gt; default scope with &#39;seedsAsSurtPrefixes&#39; being tr=\r\nue.\n&gt; &gt;&gt;\n&gt; &gt;&gt; Only if you need to tweak that usual behavior do you need to =\r\nswap in\n&gt; &gt;&gt; different rule classes or change properties. And even there, y=\r\nou can\n&gt; &gt;&gt; instead put other directives into the &#39;seeds&#39; text that the\n&gt; &gt;=\r\n&gt; SurtPrefixedDecideRule will interpret. For example, lines that begin &quot;+&quot;\n=\r\n&gt; &gt;&gt; are treated as SURT hints rather than actual seeds. So if your seeds\n&gt;=\r\n &gt;&gt; text (inline or from a file) is...\n&gt; &gt;&gt;\n&gt; &gt;&gt; #=3D=3D=3D=3D=3D=3D=3D\n&gt; &gt;=\r\n&gt; http://www.example.com/images/index.html\n&gt; &gt;&gt; +http://(com,example,\n&gt; &gt;&gt; =\r\n#=3D=3D=3D=3D=3D=3D=3D\n&gt; &gt;&gt;\n&gt; &gt;&gt; ...then crawling starts on that one seed, =\r\nbut scoping accepts all URLs\n&gt; &gt;&gt; matched by the prefix&lt;http://(com,example=\r\n,&gt;  -- that is, everything on\n&gt; &gt;&gt; example.com and any subdomains.\n&gt; &gt;&gt;\n&gt; &gt;=\r\n&gt;&gt; If SurtPrefixedDecideRule can&#39;t be used to keep the crawl within one dom=\r\nain I guess I should use OnDomainsDecideRule. But I have the same question =\r\nthere, what&#39;s the property name I need to use to define the URI/SURT? If th=\r\nere is no inline way of doing this should I use &quot;surtsSourceFile&quot; for OnDom=\r\nainsDecideRule as well?\n&gt; &gt;&gt;\n&gt; &gt;&gt; As noted above, I doubt your scenario req=\r\nuires using alternate rule\n&gt; &gt;&gt; classes or a &#39;surtsSourceFile&#39; at all. But =\r\nif it did, you supply a\n&gt; &gt;&gt; filesystem path in the &#39;surtsSourceFile&#39; prope=\r\nrty, which may be absolute\n&gt; &gt;&gt; or relative to the job directory (the direc=\r\ntory containing the &#39;.cxml&#39;\n&gt; &gt;&gt; file).\n&gt; &gt;&gt;\n&gt; &gt;&gt;&gt; Thanks for your help!\n&gt; =\r\n&gt;&gt;\n&gt; &gt;&gt; You&#39;re welcome, hope this helps!\n&gt; &gt;&gt;\n&gt; &gt;&gt; - Gordon @ IA\n&gt; &gt;&gt;\n&gt; &gt;&gt;&gt;=\r\n\n&gt; &gt;&gt;&gt; --- In archive-crawler@yahoogroups.com, Gordon Mohr&lt;gojomo@&gt;   wrote=\r\n:\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt; On 4/21/10 7:34 AM, Jens Bengtsson wrote:\n&gt; &gt;&gt;&gt;&gt;&gt; Hi!\n&gt; &gt;&gt;&gt;=\r\n&gt;&gt;\n&gt; &gt;&gt;&gt;&gt;&gt; I want to specify an OnHostsDecideRule and the Crawl Scope docum=\r\nentation says:\n&gt; &gt;&gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt;&gt; &quot;This DecideRule applies the configured deci=\r\nsion to any URI that is in one of the hosts of the configured set.&quot;\n&gt; &gt;&gt;&gt;&gt;&gt;=\r\n\n&gt; &gt;&gt;&gt;&gt;&gt; How do I define the configured set?\n&gt; &gt;&gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt;&gt; What do I need=\r\n besides the following?\n&gt; &gt;&gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt;&gt; &lt;bean class=3D&quot;org.archive.modules.=\r\ndeciderules.surt.OnHostsDecideRule&quot;&gt;\n&gt; &gt;&gt;&gt;&gt;&gt;              &lt;property name=3D=\r\n&quot;decision&quot; value=3D&quot;ACCEPT&quot;/&gt;\n&gt; &gt;&gt;&gt;&gt;&gt;     &lt;/bean&gt;\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt; OnHo=\r\nstsDecideRule is a specialization of SurtPrefixedDecideRule.\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt; =\r\nBoth these rules can build their internal list of configured prefixes\n&gt; &gt;&gt;&gt;=\r\n&gt; (against which URIs are tested) from one or both of:\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt; (1) th=\r\ne crawl&#39;s configured seeds -- if setting property\n&gt; &gt;&gt;&gt;&gt; seedsAsSurtPrefixe=\r\ns is true (which is the default)\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt; (2) a supplied file of URIs =\r\nor prefixes, one to a line, via the\n&gt; &gt;&gt;&gt;&gt; &#39;surtsSourceFile&#39; setting proper=\r\nty (a path to the file to use)\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt; In addition to the usual ways =\r\nthat desired prefixes are deduced from\n&gt; &gt;&gt;&gt;&gt; URIs but SurtPrefixedDecideRu=\r\nle, for OnHostsDecideRule all prefixes are\n&gt; &gt;&gt;&gt;&gt; truncated to the host com=\r\nponent.\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt; For example, SurtPrefixedDecideRule will turn the URI=\r\n\n&gt; &gt;&gt;&gt;&gt; &lt;http://example.com/images/&gt;   into the implied SURT prefix\n&gt; &gt;&gt;&gt;&gt; =\r\n&lt;http://(com,example,)/images/&gt;. OnHostsDecideRule will further truncate\n&gt; =\r\n&gt;&gt;&gt;&gt; that prefix to&lt;http://(com,example,)/&gt;, causing more URIs to be matche=\r\nd.\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt; Everything OnHostsDecideRule can do, SurtPrefixedDecideRul=\r\ne can do, too\n&gt; &gt;&gt;&gt;&gt; -- if SurtPrefixedDecideRule is supplied with URIs/pre=\r\nfixes already\n&gt; &gt;&gt;&gt;&gt; limited to the host-portion. For that reason, OnHostsD=\r\necideRule might be\n&gt; &gt;&gt;&gt;&gt; discouraged/deprecated/deleted someday, so that t=\r\nhere aren&#39;t redundant\n&gt; &gt;&gt;&gt;&gt; ways to achieve the same effect.\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt;=\r\n - Gordon @ IA\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; -----------------------=\r\n-------------\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; Yahoo! Groups Links\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt; \n&gt;=\r\n &gt; \n&gt; &gt; \n&gt; &gt; \n&gt; &gt; ------------------------------------\n&gt; &gt; \n&gt; &gt; Yahoo! Grou=\r\nps Links\n&gt; &gt; \n&gt; &gt; \n&gt; &gt;\n&gt;\n\n\n\n"}}