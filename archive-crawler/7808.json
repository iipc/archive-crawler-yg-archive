{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":526789874,"authorName":"Nicholas Clarke","from":"Nicholas Clarke &lt;nicl@...&gt;","replyTo":"LIST","senderId":"M3ZHWoIhn9bNkxCqP4xF19yM5Jl15P4UNFTX6MG1kmfDrHG7FeKaP88eEUCPR0TWl9ST5D8kYE7WySHWPViFubBEVg","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: [archive-crawler] warc revisit records for url-agnostic content digest deduplicated records","postDate":"1349366127","msgId":7808,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDUwNkRCMTZGLjIwNDA0MDJAa2IuZGs+","inReplyToHeader":"PENBRDJhVVBqaUJDVXB6TVcwS0hIcFFTNHQxU3lzM3oyR08wbzh3T3AraFloZFd1Zldfd0BtYWlsLmdtYWlsLmNvbT4=","referencesHeader":"PDUwNkI0QzIzLjMwNzAyQGFyY2hpdmUub3JnPiA8Q0FEMmFVUGppQkNVcHpNVzBLSEhwUVM0dDFTeXMzejJHTzBvOHdPcCtoWWhkV3VmV193QG1haWwuZ21haWwuY29tPg=="},"prevInTopic":7807,"nextInTopic":0,"prevInTime":7807,"nextInTime":7809,"topicId":7806,"numMessagesInTopic":3,"msgSnippet":"... In case of repackaging of WARC files the WARC-Refers-To-Filename and WARC-Refers-To-Offset will be rendered invalid. As I understand the example","rawEmail":"Return-Path: &lt;nicl@...&gt;\r\nX-Sender: nicl@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 9865 invoked from network); 4 Oct 2012 15:55:34 -0000\r\nX-Received: from unknown (98.137.35.162)\n  by m3.grp.sp2.yahoo.com with QMQP; 4 Oct 2012 15:55:34 -0000\r\nX-Received: from unknown (HELO post.kb.dk) (130.226.229.20)\n  by mta6.grp.sp2.yahoo.com with SMTP; 4 Oct 2012 15:55:33 -0000\r\nX-Received: from localhost (localhost.localdomain [127.0.0.1])\n\tby post.kb.dk (Postfix) with ESMTP id 0427941759F;\n\tThu,  4 Oct 2012 17:55:33 +0200 (CEST)\r\nX-Quarantine-ID: &lt;NJ373UoGNYiv&gt;\r\nX-Received: from post.kb.dk ([127.0.0.1])\n\tby localhost (post.kb.dk [127.0.0.1]) (amavisd-new, port 10024)\n\twith LMTP id NJ373UoGNYiv; Thu,  4 Oct 2012 17:55:32 +0200 (CEST)\r\nX-Received: from EXCHANGE-01.kb.dk (unknown [130.226.220.130])\n\tby post.kb.dk (Postfix) with ESMTP id E80AB417373;\n\tThu,  4 Oct 2012 17:55:32 +0200 (CEST)\r\nX-Received: from [10.6.0.171] (130.226.220.95) by EXCHANGE-01.kb.dk\n (130.226.220.130) with Microsoft SMTP Server (TLS) id 14.2.298.4; Thu, 4 Oct\n 2012 17:55:32 +0200\r\nMessage-ID: &lt;506DB16F.2040402@...&gt;\r\nDate: Thu, 4 Oct 2012 17:55:27 +0200\r\nUser-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20120907 Thunderbird/15.0.1\r\nMIME-Version: 1.0\r\nTo: &lt;archive-crawler@yahoogroups.com&gt;\r\nCc: &lt;members@...&gt;\r\nReferences: &lt;506B4C23.30702@...&gt; &lt;CAD2aUPjiBCUpzMW0KHHpQS4t1Sys3z2GO0o8wOp+hYhdWufW_w@...&gt;\r\nIn-Reply-To: &lt;CAD2aUPjiBCUpzMW0KHHpQS4t1Sys3z2GO0o8wOp+hYhdWufW_w@...&gt;\r\nContent-Type: multipart/alternative;\n\tboundary=&quot;------------080503030002070500030405&quot;\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: Nicholas Clarke &lt;nicl@...&gt;\r\nSubject: Re: [archive-crawler] warc revisit records for url-agnostic content\n digest deduplicated records\r\nX-Yahoo-Group-Post: member; u=526789874\r\n\r\n\r\n--------------080503030002070500030405\r\nContent-Type: text/plain; charset=&quot;windows-1252&quot;; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\n\r\nOn 04-10-2012 17:32, Youssef Eldakar wrote:\n&gt;\n&gt;\n&gt; On Tue, Oct 2, 2012 at 10:18 PM, Noah Levitt &lt;nlevitt@... \n&gt; &lt;mailto:nlevitt@...&gt;&gt; wrote:\n&gt;\n&gt;     Hello IIPC and heritrix communities,\n&gt;\n&gt;     I recently pushed code implementing url-agnostic identical content\n&gt;     payload digest deduplication to the heritrix source code\n&gt;     repository (see\n&gt;     https://webarchive.jira.com/browse/HER-2022). The idea is that if two\n&gt;     urls have the same content, that content need only be archived once.\n&gt;\n&gt;\n&gt; Good work, Noah.\n&gt;\n&gt;\n&gt;     Here is an example warc record for a deduplicated payload, as\n&gt;     currently\n&gt;     written:\n&gt;\n&gt;     WARC/1.0\n&gt;     WARC-Type: revisit\n&gt;     WARC-Target-URI: http://archive-it.org/image/account/logo/643\n&gt;     WARC-Date: 2012-09-14T00:23:34Z\n&gt;     WARC-Payload-Digest: sha1:RUQRLRH2XOX6DQWUUVFXHO25OBQBWUJG\n&gt;     WARC-IP-Address: 207.241.235.232\n&gt;     WARC-Profile:\n&gt;     http://netpreserve.org/warc/1.0/revisit/identical-payload-digest\n&gt;     WARC-Truncated: length\n&gt;     WARC-Refers-To: &lt;urn:uuid:38d12614-19dc-4bb0-9b6c-f98ebcf7cc52&gt;\n&gt;     WARC-Refers-To-Target-URI:\n&gt;     http://archive-it.org/image/featured-organizations/643/tn\n&gt;     WARC-Refers-To-Date: 2012-09-13T23:06:21Z\n&gt;     WARC-Refers-To-Filename:\n&gt;     WEB-20120913230526198-00000-32360~localhost.archive.org\n&gt;     &lt;http://localhost.archive.org&gt;~6440.warc.gz\n&gt;     WARC-Refers-To-File-Offset: 2002421\n&gt;     WARC-Record-ID: &lt;urn:uuid:306e9752-9b8c-49dd-bbd2-de06feace703&gt;\n&gt;     Content-Type: application/http; msgtype=response\n&gt;     Content-Length: 149\n&gt;\n&gt;     HTTP/1.1 200 OK\n&gt;     Date: Fri, 14 Sep 2012 00:23:34 GMT\n&gt;     Server: Apache-Coyote/1.1\n&gt;     Content-Type: image/png\n&gt;     Content-Length: 7904\n&gt;     Connection: close\n&gt;\n&gt;     These records are very similar to old url-specific revisit\n&gt;     records, but\n&gt;     with the addition of the WARC-Refers-To* group of fields.\n&gt;\n&gt;\n&gt; Target-URI, Date, File-Offset, and Filename, right, those are the 4 \n&gt; variables one needs to identify the original copy. I am thinking, In \n&gt; subsequent revisit records, should this set of Refers-To-* fields \n&gt; point to the previous revisit or to the actual original copy? I think \n&gt; I would vote for the latter to avoid possibly long traversals when \n&gt; resolving revisit records.\n\nIn case of repackaging of WARC files the WARC-Refers-To-Filename and \nWARC-Refers-To-Offset will be rendered invalid.\nAs I understand the example (WARC-Refers-To-Target-URI, \nWARC-Refers-To-Date, WARC-Refers-To-Filename, \nWARC-Refers-To-File-Offset) are just copies of information which is \npointed to by the WARC-Refers-To URI?\n\nWhy not stick with WARC-Refers-To and a new profile URI. Leaving the \nother information to external indexing which is required anyway for \nlarge collections of WARC files.\n\n&gt;\n&gt;     In addition, the warc spec seems to specify that that WARC-Profile\n&gt;     http://netpreserve.org/warc/1.0/revisit/identical-payload-digest\n&gt;     should\n&gt;     only be used for recrawls of the same url. It &quot;may be used whenever a\n&gt;     subsequent consideration of a URI provides payload content which a\n&gt;     strong digest function, such as SHA-1, indicates is identical to a\n&gt;     previously recorded version.&quot;\n&gt;     http://bibnum.bnf.fr/WARC/WARC_ISO_28500_version1_latestdraft.pdf\n&gt;\n&gt;     The &quot;WARC-Type: revisit&quot; appears to be flexible enough to allow for\n&gt;     different urls. &quot;A &#39;revisit&#39; record describes the revisitation of\n&gt;     content already archived&quot;. However it&#39;s not clear that the\n&gt;     possibility\n&gt;     of different urls was considered.\n&gt;\n&gt;     So we should discuss and decide what this kind of warc record\n&gt;     ought to\n&gt;     look like. I&#39;ll offer an initial proposal that it be like the example\n&gt;     above, except with a new WARC-Profile\n&gt;     &quot;http://netpreserve.org/warc/1.0/revisit/uri-agnostic-identical-payload-digest&quot;.\n&gt;\n&gt;\n&gt;\n&gt; Setting WARC-Profile to something different from (a &quot;derivative&quot; of) \n&gt; identical-payload-digest does sound like a good start to me.\n&gt;\n\n From a validation point of view a valid URI will do.\nAt some point the existing profiles should point to a description \ninstead of a 404 and so should additional ones. :)\n\n-Nicholas\n\n\r\n--------------080503030002070500030405\r\nContent-Type: text/html; charset=&quot;windows-1252&quot;\r\nContent-Transfer-Encoding: 8bit\r\n\r\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta content=&quot;text/html; charset=windows-1252&quot;\n      http-equiv=&quot;Content-Type&quot;&gt;\n  &lt;/head&gt;\n  &lt;body bgcolor=&quot;#FFFFFF&quot; text=&quot;#000000&quot;&gt;\n    &lt;div class=&quot;moz-cite-prefix&quot;&gt;On 04-10-2012 17:32, Youssef Eldakar\n      wrote:&lt;br&gt;\n    &lt;/div&gt;\n    &lt;blockquote\ncite=&quot;mid:CAD2aUPjiBCUpzMW0KHHpQS4t1Sys3z2GO0o8wOp+hYhdWufW_w@...&quot;\n      type=&quot;cite&quot;&gt;\n      &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html;\n        charset=windows-1252&quot;&gt;\n      &lt;span style=&quot;display:none&quot;&gt;�&lt;/span&gt;\n      \n          &lt;div id=&quot;ygrp-text&quot;&gt;\n            &lt;div dir=&quot;ltr&quot;&gt;&lt;br&gt;\n              &lt;br&gt;\n              &lt;div class=&quot;gmail_quote&quot;&gt;On Tue, Oct 2, 2012 at 10:18 PM,\n                Noah Levitt &lt;span dir=&quot;ltr&quot;&gt;&lt;&lt;a\n                    moz-do-not-send=&quot;true&quot;\n                    href=&quot;mailto:nlevitt@...&quot; target=&quot;_blank&quot;&gt;nlevitt@...&lt;/a&gt;&gt;&lt;/span&gt;\n                wrote:&lt;br&gt;\n                &lt;blockquote class=&quot;gmail_quote&quot; style=&quot;border-left:1px\n                  #ccc solid;&quot;&gt;\n                  &lt;div&gt;\n                    &lt;span&gt;�&lt;/span&gt;\n                    &lt;div&gt;\n                      &lt;div&gt;\n                        &lt;div&gt;\n                          &lt;p&gt;Hello IIPC and heritrix communities,&lt;br&gt;\n                            &lt;br&gt;\n                            I recently pushed code implementing\n                            url-agnostic identical content &lt;br&gt;\n                            payload digest deduplication to the heritrix\n                            source code repository (see &lt;br&gt;\n                            &lt;a moz-do-not-send=&quot;true&quot;\n                              href=&quot;https://webarchive.jira.com/browse/HER-2022&quot;\n                              target=&quot;_blank&quot;&gt;https://webarchive.jira.com/browse/HER-2022&lt;/a&gt;).\n                            The idea is that if two &lt;br&gt;\n                            urls have the same content, that content\n                            need only be archived once.&lt;br&gt;\n                          &lt;/p&gt;\n                        &lt;/div&gt;\n                      &lt;/div&gt;\n                    &lt;/div&gt;\n                  &lt;/div&gt;\n                &lt;/blockquote&gt;\n                &lt;div&gt;&lt;br&gt;\n                  Good work, Noah.&lt;br&gt;\n                  �&lt;br&gt;\n                &lt;/div&gt;\n                &lt;blockquote class=&quot;gmail_quote&quot; style=&quot;border-left:1px\n                  #ccc solid;&quot;&gt;\n                  &lt;div&gt;\n                    &lt;div&gt;\n                      &lt;div&gt;\n                        &lt;div&gt;\n                          &lt;p&gt;\n                            &lt;br&gt;\n                            Here is an example warc record for a\n                            deduplicated payload, as currently &lt;br&gt;\n                            written:&lt;br&gt;\n                            &lt;br&gt;\n                            WARC/1.0&lt;br&gt;\n                            WARC-Type: revisit&lt;br&gt;\n                            WARC-Target-URI: &lt;a moz-do-not-send=&quot;true&quot;\nhref=&quot;http://archive-it.org/image/account/logo/643&quot; target=&quot;_blank&quot;&gt;http://archive-it.org/image/account/logo/643&lt;/a&gt;&lt;br&gt;\n                            WARC-Date: 2012-09-14T00:23:34Z&lt;br&gt;\n                            WARC-Payload-Digest:\n                            sha1:RUQRLRH2XOX6DQWUUVFXHO25OBQBWUJG&lt;br&gt;\n                            WARC-IP-Address: 207.241.235.232&lt;br&gt;\n                            WARC-Profile: &lt;br&gt;\n                            &lt;a moz-do-not-send=&quot;true&quot;\n                              href=&quot;http://netpreserve.org/warc/1.0/revisit/identical-payload-digest&quot;\n                              target=&quot;_blank&quot;&gt;http://netpreserve.org/warc/1.0/revisit/identical-payload-digest&lt;/a&gt;&lt;br&gt;\n                            WARC-Truncated: length&lt;br&gt;\n                            WARC-Refers-To:\n                            &lt;urn:uuid:38d12614-19dc-4bb0-9b6c-f98ebcf7cc52&gt;&lt;br&gt;\n                            WARC-Refers-To-Target-URI: &lt;br&gt;\n                            &lt;a moz-do-not-send=&quot;true&quot;\n                              href=&quot;http://archive-it.org/image/featured-organizations/643/tn&quot;\n                              target=&quot;_blank&quot;&gt;http://archive-it.org/image/featured-organizations/643/tn&lt;/a&gt;&lt;br&gt;\n                            WARC-Refers-To-Date: 2012-09-13T23:06:21Z&lt;br&gt;\n                            WARC-Refers-To-Filename: &lt;br&gt;\n                            WEB-20120913230526198-00000-32360~&lt;a\n                              moz-do-not-send=&quot;true&quot;\n                              href=&quot;http://localhost.archive.org&quot;\n                              target=&quot;_blank&quot;&gt;localhost.archive.org&lt;/a&gt;~6440.warc.gz&lt;br&gt;\n                            WARC-Refers-To-File-Offset: 2002421&lt;br&gt;\n                            WARC-Record-ID:\n                            &lt;urn:uuid:306e9752-9b8c-49dd-bbd2-de06feace703&gt;&lt;br&gt;\n                            Content-Type: application/http;\n                            msgtype=response&lt;br&gt;\n                            Content-Length: 149&lt;br&gt;\n                            &lt;br&gt;\n                            HTTP/1.1 200 OK&lt;br&gt;\n                            Date: Fri, 14 Sep 2012 00:23:34 GMT&lt;br&gt;\n                            Server: Apache-Coyote/1.1&lt;br&gt;\n                            Content-Type: image/png&lt;br&gt;\n                            Content-Length: 7904&lt;br&gt;\n                            Connection: close&lt;br&gt;\n                            &lt;br&gt;\n                            These records are very similar to old\n                            url-specific revisit records, but &lt;br&gt;\n                            with the addition of the WARC-Refers-To*\n                            group of fields.&lt;br&gt;\n                          &lt;/p&gt;\n                        &lt;/div&gt;\n                      &lt;/div&gt;\n                    &lt;/div&gt;\n                  &lt;/div&gt;\n                &lt;/blockquote&gt;\n                &lt;div&gt;&lt;br&gt;\n                  Target-URI, Date, File-Offset, and Filename, right,\n                  those are the 4 variables one needs to identify the\n                  original copy. I am thinking, In subsequent revisit\n                  records, should this set of Refers-To-* fields point\n                  to the previous revisit or to the actual original\n                  copy? I think I would vote for the latter to avoid\n                  possibly long traversals when resolving revisit\n                  records.&lt;/div&gt;\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/blockquote&gt;\n    &lt;br&gt;\n    In case of repackaging of WARC files the WARC-Refers-To-Filename and\n    WARC-Refers-To-Offset will be rendered invalid.&lt;br&gt;\n    As I understand the example (WARC-Refers-To-Target-URI,\n    WARC-Refers-To-Date, WARC-Refers-To-Filename,\n    WARC-Refers-To-File-Offset) are just copies of information which is\n    pointed to by the WARC-Refers-To URI?&lt;br&gt;\n    &lt;br&gt;\n    Why not stick with WARC-Refers-To and a new profile URI. Leaving the\n    other information to external indexing which is required anyway for\n    large collections of WARC files.&lt;br&gt;\n    &lt;br&gt;\n    &lt;blockquote\ncite=&quot;mid:CAD2aUPjiBCUpzMW0KHHpQS4t1Sys3z2GO0o8wOp+hYhdWufW_w@...&quot;\n      type=&quot;cite&quot;&gt;\n      &lt;div id=&quot;ygrp-mlmsg&quot; style=&quot;position:relative;&quot;&gt;\n        &lt;div id=&quot;ygrp-msg&quot; style=&quot;z-index: 1;&quot;&gt;\n          &lt;div id=&quot;ygrp-text&quot;&gt;\n            &lt;div dir=&quot;ltr&quot;&gt;\n              &lt;div class=&quot;gmail_quote&quot;&gt;\n                &lt;blockquote class=&quot;gmail_quote&quot; style=&quot;border-left:1px\n                  #ccc solid;&quot;&gt;\n                  &lt;div&gt;\n                    &lt;div&gt;\n                      &lt;div&gt;\n                        &lt;div&gt;\n                          &lt;p&gt;\n                            &lt;br&gt;\n                            In addition, the warc spec seems to specify\n                            that that WARC-Profile &lt;br&gt;\n                            &lt;a moz-do-not-send=&quot;true&quot;\n                              href=&quot;http://netpreserve.org/warc/1.0/revisit/identical-payload-digest&quot;\n                              target=&quot;_blank&quot;&gt;http://netpreserve.org/warc/1.0/revisit/identical-payload-digest&lt;/a&gt;\n                            should &lt;br&gt;\n                            only be used for recrawls of the same url.\n                            It &quot;may be used whenever a &lt;br&gt;\n                            subsequent consideration of a URI provides\n                            payload content which a &lt;br&gt;\n                            strong digest function, such as SHA-1,\n                            indicates is identical to a &lt;br&gt;\n                            previously recorded version.&quot; &lt;br&gt;\n                            &lt;a moz-do-not-send=&quot;true&quot;\n                              href=&quot;http://bibnum.bnf.fr/WARC/WARC_ISO_28500_version1_latestdraft.pdf&quot;\n                              target=&quot;_blank&quot;&gt;http://bibnum.bnf.fr/WARC/WARC_ISO_28500_version1_latestdraft.pdf&lt;/a&gt;&lt;br&gt;\n                            &lt;br&gt;\n                            The &quot;WARC-Type: revisit&quot; appears to be\n                            flexible enough to allow for &lt;br&gt;\n                            different urls. &quot;A &#39;revisit&#39; record\n                            describes the revisitation of &lt;br&gt;\n                            content already archived&quot;. However it&#39;s not\n                            clear that the possibility &lt;br&gt;\n                            of different urls was considered.&lt;br&gt;\n                            &lt;br&gt;\n                            So we should discuss and decide what this\n                            kind of warc record ought to &lt;br&gt;\n                            look like. I&#39;ll offer an initial proposal\n                            that it be like the example &lt;br&gt;\n                            above, except with a new WARC-Profile &lt;br&gt;\n                            &quot;&lt;a moz-do-not-send=&quot;true&quot;\nhref=&quot;http://netpreserve.org/warc/1.0/revisit/uri-agnostic-identical-payload-digest&quot;\n                              target=&quot;_blank&quot;&gt;http://netpreserve.org/warc/1.0/revisit/uri-agnostic-identical-payload-digest&lt;/a&gt;&quot;.\n                            &lt;br&gt;\n                          &lt;/p&gt;\n                        &lt;/div&gt;\n                      &lt;/div&gt;\n                    &lt;/div&gt;\n                  &lt;/div&gt;\n                &lt;/blockquote&gt;\n                &lt;div&gt;&lt;br&gt;\n                  Setting WARC-Profile to something different from (a\n                  &quot;derivative&quot; of) identical-payload-digest does sound\n                  like a good start to me.&lt;br&gt;\n                  �&lt;br&gt;\n                &lt;/div&gt;\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/blockquote&gt;\n    &lt;br&gt;\n    From a validation point of view a valid URI will do.&lt;br&gt;\n    At some point the existing profiles should point to a description\n    instead of a 404 and so should additional ones. :)&lt;br&gt;\n    &lt;br&gt;\n    -Nicholas&lt;br&gt;\n    &lt;br&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n\r\n--------------080503030002070500030405--\r\n\n"}}