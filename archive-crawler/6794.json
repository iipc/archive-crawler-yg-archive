{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"wwWKVns0NLeZ9d0WCbCYdeG45vVLwDaoHl1jAwkjD4C8-2TBp5IkALyZMs69w9AmEbISKMsTwEp0kISpqt65wGFaetHw27Y","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] SSL certificate problem and integration of heritrix3","postDate":"1288464692","msgId":6794,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDRDQ0M2OTM0LjMwMDA1MDdAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PEFBTkxrVGk9UzZaSGRrNEItdVlRX3kyVDBpTFoxcUs3WWJTTEtpRlpWVFdhUEBtYWlsLmdtYWlsLmNvbT4=","referencesHeader":"PEFBTkxrVGltTlJlank0X0dHbXY0dHpSbzFDQW1XMEt6bUpwWVIxN3ZacXRYaUBtYWlsLmdtYWlsLmNvbT4JPDRDQzlGQzM5LjYwMDAyMDRAYXJjaGl2ZS5vcmc+IDxBQU5Ma1RpPVM2WkhkazRCLXVZUV95MlQwaUxaMXFLN1liU0xLaUZaVlRXYVBAbWFpbC5nbWFpbC5jb20+"},"prevInTopic":6793,"nextInTopic":0,"prevInTime":6793,"nextInTime":6795,"topicId":6784,"numMessagesInTopic":5,"msgSnippet":"... If you need to -- yes, that lets you do just about anything. But for most needs, simple GET requests against the other job URLs -- the same URLs as are","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 95362 invoked from network); 30 Oct 2010 18:51:34 -0000\r\nX-Received: from unknown (66.196.94.105)\n  by m12.grp.re1.yahoo.com with QMQP; 30 Oct 2010 18:51:34 -0000\r\nX-Received: from unknown (HELO relay03.pair.com) (209.68.5.17)\n  by mta1.grp.re1.yahoo.com with SMTP; 30 Oct 2010 18:51:34 -0000\r\nX-Received: (qmail 27069 invoked from network); 30 Oct 2010 18:51:32 -0000\r\nX-Received: from 67.188.34.83 (HELO silverbook.local) (67.188.34.83)\n  by relay03.pair.com with SMTP; 30 Oct 2010 18:51:32 -0000\r\nX-pair-Authenticated: 67.188.34.83\r\nMessage-ID: &lt;4CCC6934.3000507@...&gt;\r\nDate: Sat, 30 Oct 2010 11:51:32 -0700\r\nUser-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.12) Gecko/20101027 Thunderbird/3.1.6\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nCc: =?UTF-8?B?QWRhbSBCcm9rZcWh?= &lt;adam.brokes@...&gt;\r\nReferences: &lt;AANLkTimNRejy4_GGmv4tzRo1CAmW0KzmJpYR17vZqtXi@...&gt;\t&lt;4CC9FC39.6000204@...&gt; &lt;AANLkTi=S6ZHdk4B-uYQ_y2T0iLZ1qK7YbSLKiFZVTWaP@...&gt;\r\nIn-Reply-To: &lt;AANLkTi=S6ZHdk4B-uYQ_y2T0iLZ1qK7YbSLKiFZVTWaP@...&gt;\r\nContent-Type: text/plain; charset=UTF-8; format=flowed\r\nContent-Transfer-Encoding: 8bit\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] SSL certificate problem and integration of\n heritrix3\r\nX-Yahoo-Group-Post: member; u=137285340; y=Ppj7YLNkCeuX6xqqWeJCH7TrzLVu4FXSp8r7eIo_1qb1\r\nX-Yahoo-Profile: gojomo\r\n\r\nOn 10/30/10 7:38 AM, Adam Brokeš wrote:\n&gt; Hi Gordon,\n&gt;\n&gt; thank you! It is working now with no issues, I am just curious how\n&gt; could I monitor running jobs or send more specific commands to engine.\n&gt; Should I use https://webarchive.jira.com/wiki/display/Heritrix/Heritrix+3.0+API+Guide#Heritrix3.0APIGuide-ExecuteShellScriptinJob\n&gt; and send script commands to heritrix?\n\nIf you need to -- yes, that lets you do just about anything.\n\nBut for most needs, simple GET requests against the other job URLs -- \nthe same URLs as are used in the web browser -- are enough for \nmonitoring. For example, a GET like...\n\ncurl -v -k -u admin:YOUR_PASSWORD --anyauth --location -H &quot;Accept: \napplication/xml&quot; https://localhost:8443/engine/job/myjob\n\n...will get back an XML representation of the same info that appears on \na job summary page, including job status and overall statistics. \nSimilarly, the same URL that displays in-crawl reports in the browser \ncan be used to get report snapshots.\n\nThe other checkpoint/pause/terminate/create/build/launch options are \nalso listed on that page. Only if you need to do something more exotic \nwould you need to use the scripting-interface.\n\n- Gordon @ IA\n\n&gt; Best regards,\n&gt;\n&gt; Adam\n&gt; --\n&gt; Adam Brokeš\n&gt; http://www.brokes.net\n&gt; adam.brokes@...\n&gt; 42799740\n&gt;\n&gt;\n&gt;\n&gt; 2010/10/29 Gordon Mohr&lt;gojomo@...&gt;:\n&gt;&gt; Hi, Adam.\n&gt;&gt;\n&gt;&gt; I&#39;m sorry for the difficulty making an HTTPS connection to the H3 web\n&gt;&gt; interface.\n&gt;&gt;\n&gt;&gt; In our usual usage/testing, we&#39;re using either a web browser (which once you\n&gt;&gt; &#39;add exception&#39; doesn&#39;t care about the declared hostname/CN in the server&#39;s\n&gt;&gt; cert), or &#39;curl&#39; with the &#39;-k&#39; (--insecure) option (which also doesn&#39;t care\n&gt;&gt; about any of the cert details, just that any cert is provided). So, we&#39;ve\n&gt;&gt; not seen a similar problem before.\n&gt;&gt;\n&gt;&gt; It appears the HttpClient library is insisting that even after a\n&gt;&gt; (self-signed) cert is locally added -- similar to a browser&#39;s &#39;add\n&gt;&gt; exception&#39; -- it still must declare the proper destination hostname.\n&gt;&gt;\n&gt;&gt; There might be a way to coax it to be more trusting, but looking at how we\n&gt;&gt; did it in Heritrix for its outbound HTTPS requests -- see\n&gt;&gt; ConfigurableX509TrustManager and HeritrixSSLProtocolSocketFactory -- it\n&gt;&gt; looks a bit involved. (I suspect some other Java HTTP library is better for\n&gt;&gt; such casual untrusted use, but can&#39;t recommend any particular one offhand.)\n&gt;&gt;\n&gt;&gt; But, it looks like in the future we can give our ad-hoc self-signed\n&gt;&gt; certificate better &#39;CN&#39; or &#39;SAN&#39; values so that connects to &#39;localhost&#39; may\n&gt;&gt; succeed. So we&#39;ll investigate that.\n&gt;&gt;\n&gt;&gt; In the meantime, I think you can get the same effect by replacing the cert\n&gt;&gt; we auto-created with one that will work better for your purposes.\n&gt;&gt;\n&gt;&gt; More specifically:\n&gt;&gt;\n&gt;&gt; (1) Go to the directory where the auto-generated &#39;adhoc.keystore&#39; exists and\n&gt;&gt; delete it.\n&gt;&gt;\n&gt;&gt; (2) Make sure the &#39;keytool&#39; from your JDK is findable on your path\n&gt;&gt;\n&gt;&gt; (3) Run:\n&gt;&gt;\n&gt;&gt; % keytool -keystore adhoc.keystore -storepass password -keypass password\n&gt;&gt; -alias adhoc -genky -keyalg &quot;RSA&quot; -dname &quot;CN=localhost&quot;\n&gt;&gt;\n&gt;&gt; (4) Relaunch Heritrix; it will now use this cert instead.\n&gt;&gt;\n&gt;&gt; (5) Follow the same instructions on that Groovy page to save the cert via\n&gt;&gt; the browser, install in a client keystore, and use in your code.\n&gt;&gt;\n&gt;&gt; Now, the expected &#39;localhost&#39; value should appear (instead of our previous\n&gt;&gt; placeholder CN value, &#39;heritrix ad-hoc https certificate&#39;) -- and I don&#39;t\n&gt;&gt; think you&#39;ll get the same error.\n&gt;&gt;\n&gt;&gt; Please let me know if this works.\n&gt;&gt;\n&gt;&gt; Regarding your other question about best practices and docs for the H3\n&gt;&gt; web-remote REST interface, see:\n&gt;&gt;\n&gt;&gt; https://webarchive.jira.com/wiki/display/Heritrix/Heritrix+3.0+API+Guide\n&gt;&gt;\n&gt;&gt; It&#39;s quite easy to use from the command-line via something like &#39;curl&#39;. JMX\n&gt;&gt; is gone from H3.\n&gt;&gt;\n&gt;&gt; Hope this helps,\n&gt;&gt;\n&gt;&gt; - Gordon @ IA\n&gt;&gt;\n&gt;&gt; On 10/27/10 1:01 AM, Adam Brokeš wrote:\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; Hallo,\n&gt;&gt;&gt;\n&gt;&gt;&gt; I am trying to use REST connection to heritrix 3 engine in my\n&gt;&gt;&gt; groovy/grails application and I have encounter strange problem which I\n&gt;&gt;&gt; am not sure how to solve.\n&gt;&gt;&gt;\n&gt;&gt;&gt; In the application the REST Client plugin is installed, which is nothing\n&gt;&gt;&gt; else than HTTPBuilder class wrapper. Used without any modification it\n&gt;&gt;&gt; throw Untrusted certificate exception.\n&gt;&gt;&gt; After reading documentation on\n&gt;&gt;&gt; http://groovy.codehaus.org/modules/http-builder/doc/ssl.html I figure\n&gt;&gt;&gt; out that I need manually add heritrix certificate to keystore. I have:\n&gt;&gt;&gt;\n&gt;&gt;&gt;    1. exported certificate (chrome, firefox)\n&gt;&gt;&gt;    2. added certificate to trustore with java keytool\n&gt;&gt;&gt;    3. copied trustore file to my application directory\n&gt;&gt;&gt;    4. inserted this code to application:\n&gt;&gt;&gt;\n&gt;&gt;&gt; withRest(uri: &quot;https://localhost:8443/engine&quot;) {\n&gt;&gt;&gt;             def keyStore = KeyStore.getInstance(KeyStore.defaultType)\n&gt;&gt;&gt;\n&gt;&gt;&gt;             getClass().getResource(&quot;/truststore.jks&quot;).withInputStream {\n&gt;&gt;&gt;                 keyStore.load(it, &quot;password&quot;.toCharArray())\n&gt;&gt;&gt;             }\n&gt;&gt;&gt;\n&gt;&gt;&gt;             client.connectionManager.schemeRegistry.register(\n&gt;&gt;&gt;                     new Scheme(&quot;https&quot;, new SSLSocketFactory(keyStore),\n&gt;&gt;&gt; 443))\n&gt;&gt;&gt;             [rest: client]\n&gt;&gt;&gt;             auth.basic &quot;admin&quot;, &quot;admin&quot;\n&gt;&gt;&gt;             def response = post(createpath: &quot;restJob&quot;, action: &quot;create&quot;)\n&gt;&gt;&gt; }\n&gt;&gt;&gt;\n&gt;&gt;&gt; after execution this I always get this exception:\n&gt;&gt;&gt;\n&gt;&gt;&gt; javax.net.ssl.SSLException: hostname in certificate didn&#39;t match:\n&gt;&gt;&gt; &lt;localhost&gt;  !=&lt;heritrix ad-hoc https certificate&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; I tried few other combinations:\n&gt;&gt;&gt;\n&gt;&gt;&gt;     * install heritrix on other host than localhost\n&gt;&gt;&gt;     * give heritrix3 -s parameter at start to use other than default\n&gt;&gt;&gt;       keystore, password\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; Nothing helped me and honestly I am not big expert in certificates, so I\n&gt;&gt;&gt; run out of ideas and time earmarked for that.\n&gt;&gt;&gt;\n&gt;&gt;&gt; What is best practice to use REST from my application?\n&gt;&gt;&gt;\n&gt;&gt;&gt; And aside all of that, I will probably need more tight integration of\n&gt;&gt;&gt; Heritrix3 with my groovy app (it will be basically simpler\n&gt;&gt;&gt; NetarchiveSuite), I am going to discuss that in other mail, just to get\n&gt;&gt;&gt; the right direction: is there any documentation on that? I need to do\n&gt;&gt;&gt; basic crawler stuff, like starting jobs, monitoring jobs and getting\n&gt;&gt;&gt; information about finished jobs. I like the script console idea, could I\n&gt;&gt;&gt; communicate with that console from outside? In heritrix 1, the JMX is\n&gt;&gt;&gt; used extensively, is there still need for that in H3? Well, there are so\n&gt;&gt;&gt; many possibilities to explore, but I will be delighted if someone with\n&gt;&gt;&gt; deep knowledge will point the direction.\n&gt;&gt;&gt;\n&gt;&gt;&gt; Thank you very much and have nice day.\n&gt;&gt;&gt;\n&gt;&gt;&gt; Best regards,\n&gt;&gt;&gt;\n&gt;&gt;&gt; Adam Brokes\n&gt;&gt;&gt; --\n&gt;&gt;&gt; Adam Brokeš\n&gt;&gt;&gt; http://www.brokes.net\n&gt;&gt;&gt; adam.brokes@...&lt;mailto:adam.brokes@...&gt;\n&gt;&gt;&gt; 42799740\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;\n&gt;\n&gt;\n&gt; ------------------------------------\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n\n"}}