{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"yu1WXv4XC-rZYg6yy3zSjYtIuv8iBNRJQmNtbEOnW2vycmP8GDjNAb_NaLq8845BIaWyMlcWPJSUM3aSAsjX1q0aJB_9lxY","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] Re: How to specify OnHostsDecideRule in H3","postDate":"1271970327","msgId":6488,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDRCRDBCQTE3LjcwMDAwMDZAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGhxcTlycitmOTVrQGVHcm91cHMuY29tPg==","referencesHeader":"PGhxcTlycitmOTVrQGVHcm91cHMuY29tPg=="},"prevInTopic":6487,"nextInTopic":6490,"prevInTime":6487,"nextInTime":6489,"topicId":6481,"numMessagesInTopic":8,"msgSnippet":"See this FAQ: https://webarchive.jira.com/wiki/display/Heritrix/unexpected+offsite+content Heritrix is not getting everything on those other domains -- only","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 86360 invoked from network); 22 Apr 2010 21:05:27 -0000\r\nX-Received: from unknown (98.137.34.45)\n  by m1.grp.sp2.yahoo.com with QMQP; 22 Apr 2010 21:05:27 -0000\r\nX-Received: from unknown (HELO relay00.pair.com) (209.68.5.9)\n  by mta2.grp.sp2.yahoo.com with SMTP; 22 Apr 2010 21:05:27 -0000\r\nX-Received: (qmail 47442 invoked from network); 22 Apr 2010 21:05:25 -0000\r\nX-Received: from 71.202.38.39 (HELO silverbook.local) (71.202.38.39)\n  by relay00.pair.com with SMTP; 22 Apr 2010 21:05:25 -0000\r\nX-pair-Authenticated: 71.202.38.39\r\nMessage-ID: &lt;4BD0BA17.7000006@...&gt;\r\nDate: Thu, 22 Apr 2010 14:05:27 -0700\r\nUser-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.1.9) Gecko/20100317 Thunderbird/3.0.4\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;hqq9rr+f95k@...&gt;\r\nIn-Reply-To: &lt;hqq9rr+f95k@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Transfer-Encoding: 7bit\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] Re: How to specify OnHostsDecideRule in H3\r\nX-Yahoo-Group-Post: member; u=137285340; y=Cy7og1UtWcXZa4RWyNoIPgRhSRB3Q6UfXqgKw1kpkI3h\r\nX-Yahoo-Profile: gojomo\r\n\r\nSee this FAQ:\n\nhttps://webarchive.jira.com/wiki/display/Heritrix/unexpected+offsite+content\n\nHeritrix is not getting everything on those other domains -- only those \nthings that appear necessary to render pages on the main scope. (The \ncrawl.log lines for the off-domain URLs will show &#39;hops path&#39; strings like \n&quot;EE&quot; or &quot;RE&quot; or &quot;ERX&quot;. That means some combination of &#39;E&#39;mbeds, \n&#39;R&#39;edirects, and &#39;X&#39;speculative outinks led the crawler down those paths.\n\n- Gordon @ IA\n\nOn 4/22/10 12:59 PM, Jens Bengtsson wrote:\n&gt; Then I guess H3 is broken for me.\n&gt; \n&gt; Because if I define\n&gt; \n&gt; www.idg.se as my seed\n&gt; \n&gt; and then have\n&gt; \n&gt; seedsAsSurtPrefixes=true for SurtPrefixedDecideRule\n&gt; \n&gt; It still results in Heretrix crawling every domain it comes in contact with. My mirror folder filled up with 100+ directories with different domains that were crawled.\n&gt; \n&gt; \n&gt; --- In archive-crawler@yahoogroups.com, Gordon Mohr&lt;gojomo@...&gt;  wrote:\n&gt;&gt;\n&gt;&gt; On 4/21/10 9:58 PM, Jens Bengtsson wrote:\n&gt;&gt;&gt; OK, so I don&#39;t need to use OnHostsDecideRule. Is the same true for OnDomainDecideRule? Can I achieve the same &quot;lockdown&quot; with SurtPrefixedDecideRule?\n&gt;&gt;\n&gt;&gt; The same is true for OnDomainsDecideRule -- it just auto-truncates the\n&gt;&gt; deduced prefix even more, so that anything &quot;within the same domain&quot;\n&gt;&gt; (including subdomains and, for &quot;www.&quot;, sibling domains) is accepted.\n&gt;&gt;\n&gt;&gt; For example, if your seed is:\n&gt;&gt;\n&gt;&gt; http://www.example.com/images/index.html\n&gt;&gt;\n&gt;&gt; ...then the usual convert-to-SURT-prefix procedure results in...\n&gt;&gt;\n&gt;&gt; http://(com,example,www,)/images/\n&gt;&gt;\n&gt;&gt; If OnHostsDecideRule is used, that gets further truncated to...\n&gt;&gt;\n&gt;&gt; http://(com,example,www,)/\n&gt;&gt;\n&gt;&gt; ...which allows all URLs on that same exact host to be matched. If\n&gt;&gt; OnDomainsDecideRule is used, that gets further truncated to...\n&gt;&gt;\n&gt;&gt; http://(com,example,\n&gt;&gt;\n&gt;&gt; ...so everything on &#39;example.com&#39; domain and subdomains is matched.\n&gt;&gt; (&#39;www,)/&#39; is special-case stripped; for any other subdomains only the\n&gt;&gt; &#39;)/&#39; would be stripped.\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;&gt; I still don&#39;t understand what the property name is for defining URI&#39;s to accept (if I want to do it inline instead of in a file). I haven&#39;t been able to find a proper documentation of the properties available. Is there none, do I have to go looking in the source to figure it out?\n&gt;&gt;\n&gt;&gt; If it&#39;s not yet documented in the User Guide, the source or hints in the\n&gt;&gt; example configuration files are the only other documentation.\n&gt;&gt;\n&gt;&gt; SurtPrefixedDecideRule and its subclasses only accept prefixes from your\n&gt;&gt; seeds, or another &#39;surtsSourceFile&#39;. They don&#39;t accept an inline list of\n&gt;&gt; prefixes. (They theoretically could but haven&#39;t yet been set up that way.)\n&gt;&gt;\n&gt;&gt;&gt; This is the definition in the default config:\n&gt;&gt;&gt;\n&gt;&gt;&gt; &lt;bean class=&quot;org.archive.modules.deciderules.surt.SurtPrefixedDecideRule&quot;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; &lt;!--\n&gt;&gt;&gt;    &lt;property name=&quot;seedsAsSurtPrefixes&quot; value=&quot;true&quot; /&gt;\n&gt;&gt;&gt; --&gt;\n&gt;&gt;&gt; &lt;!--&lt;property name=&quot;alsoCheckVia&quot; value=&quot;true&quot; /&gt;   --&gt;\n&gt;&gt;&gt; &lt;!--&lt;property name=&quot;surtsSourceFile&quot; value=&quot;&quot; /&gt;   --&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; &lt;!--\n&gt;&gt;&gt;    &lt;property name=&quot;surtsDumpFile&quot; value=&quot;surts.dump&quot; /&gt;\n&gt;&gt;&gt; --&gt;\n&gt;&gt;&gt; &lt;/bean&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; seedsAsSurtPrefixes in commented out, but does it still default to true? All I want to do now is limit the crawl to a specific domain. So it feels like overkill to have a file just to store one line with www.xxx.yyy in.\n&gt;&gt;\n&gt;&gt; As noted atop the example/default configuration files:\n&gt;&gt;\n&gt;&gt; &quot;  Commented-out beans and properties are provided as an example; values\n&gt;&gt;      shown in comments reflect the actual defaults which are in effect\n&gt;&gt;      without specification. (To change from the default behavior,\n&gt;&gt;      uncomment AND alter the shown values.)   &quot;\n&gt;&gt;\n&gt;&gt; So you only need to uncomment and change the &#39;seedsAsSurtPrefixes&#39; line\n&gt;&gt; if you want to change its value to false.\n&gt;&gt;\n&gt;&gt; Have you tried a crawl with the default scope to see what it does? If\n&gt;&gt; your seed URL is &quot;http://www.example.com&quot; and you do a crawl with the\n&gt;&gt; default settings, the crawl stays on &quot;http://www.example.com&quot; URLs,\n&gt;&gt; except where it seems offsite URLs are necessary to render pages (as\n&gt;&gt; with IMGs, SCRIPTs, FRAMEs, and Javascript-mentioned URLs).\n&gt;&gt;\n&gt;&gt; That&#39;s the automatic effect of the SurtPrefixedDecideRule being in the\n&gt;&gt; default scope with &#39;seedsAsSurtPrefixes&#39; being true.\n&gt;&gt;\n&gt;&gt; Only if you need to tweak that usual behavior do you need to swap in\n&gt;&gt; different rule classes or change properties. And even there, you can\n&gt;&gt; instead put other directives into the &#39;seeds&#39; text that the\n&gt;&gt; SurtPrefixedDecideRule will interpret. For example, lines that begin &quot;+&quot;\n&gt;&gt; are treated as SURT hints rather than actual seeds. So if your seeds\n&gt;&gt; text (inline or from a file) is...\n&gt;&gt;\n&gt;&gt; #=======\n&gt;&gt; http://www.example.com/images/index.html\n&gt;&gt; +http://(com,example,\n&gt;&gt; #=======\n&gt;&gt;\n&gt;&gt; ...then crawling starts on that one seed, but scoping accepts all URLs\n&gt;&gt; matched by the prefix&lt;http://(com,example,&gt;  -- that is, everything on\n&gt;&gt; example.com and any subdomains.\n&gt;&gt;\n&gt;&gt;&gt; If SurtPrefixedDecideRule can&#39;t be used to keep the crawl within one domain I guess I should use OnDomainsDecideRule. But I have the same question there, what&#39;s the property name I need to use to define the URI/SURT? If there is no inline way of doing this should I use &quot;surtsSourceFile&quot; for OnDomainsDecideRule as well?\n&gt;&gt;\n&gt;&gt; As noted above, I doubt your scenario requires using alternate rule\n&gt;&gt; classes or a &#39;surtsSourceFile&#39; at all. But if it did, you supply a\n&gt;&gt; filesystem path in the &#39;surtsSourceFile&#39; property, which may be absolute\n&gt;&gt; or relative to the job directory (the directory containing the &#39;.cxml&#39;\n&gt;&gt; file).\n&gt;&gt;\n&gt;&gt;&gt; Thanks for your help!\n&gt;&gt;\n&gt;&gt; You&#39;re welcome, hope this helps!\n&gt;&gt;\n&gt;&gt; - Gordon @ IA\n&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; --- In archive-crawler@yahoogroups.com, Gordon Mohr&lt;gojomo@&gt;   wrote:\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; On 4/21/10 7:34 AM, Jens Bengtsson wrote:\n&gt;&gt;&gt;&gt;&gt; Hi!\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt; I want to specify an OnHostsDecideRule and the Crawl Scope documentation says:\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt; &quot;This DecideRule applies the configured decision to any URI that is in one of the hosts of the configured set.&quot;\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt; How do I define the configured set?\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt; What do I need besides the following?\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt; &lt;bean class=&quot;org.archive.modules.deciderules.surt.OnHostsDecideRule&quot;&gt;\n&gt;&gt;&gt;&gt;&gt;              &lt;property name=&quot;decision&quot; value=&quot;ACCEPT&quot;/&gt;\n&gt;&gt;&gt;&gt;&gt;     &lt;/bean&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; OnHostsDecideRule is a specialization of SurtPrefixedDecideRule.\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; Both these rules can build their internal list of configured prefixes\n&gt;&gt;&gt;&gt; (against which URIs are tested) from one or both of:\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; (1) the crawl&#39;s configured seeds -- if setting property\n&gt;&gt;&gt;&gt; seedsAsSurtPrefixes is true (which is the default)\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; (2) a supplied file of URIs or prefixes, one to a line, via the\n&gt;&gt;&gt;&gt; &#39;surtsSourceFile&#39; setting property (a path to the file to use)\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; In addition to the usual ways that desired prefixes are deduced from\n&gt;&gt;&gt;&gt; URIs but SurtPrefixedDecideRule, for OnHostsDecideRule all prefixes are\n&gt;&gt;&gt;&gt; truncated to the host component.\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; For example, SurtPrefixedDecideRule will turn the URI\n&gt;&gt;&gt;&gt; &lt;http://example.com/images/&gt;   into the implied SURT prefix\n&gt;&gt;&gt;&gt; &lt;http://(com,example,)/images/&gt;. OnHostsDecideRule will further truncate\n&gt;&gt;&gt;&gt; that prefix to&lt;http://(com,example,)/&gt;, causing more URIs to be matched.\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; Everything OnHostsDecideRule can do, SurtPrefixedDecideRule can do, too\n&gt;&gt;&gt;&gt; -- if SurtPrefixedDecideRule is supplied with URIs/prefixes already\n&gt;&gt;&gt;&gt; limited to the host-portion. For that reason, OnHostsDecideRule might be\n&gt;&gt;&gt;&gt; discouraged/deprecated/deleted someday, so that there aren&#39;t redundant\n&gt;&gt;&gt;&gt; ways to achieve the same effect.\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; - Gordon @ IA\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; ------------------------------------\n&gt;&gt;&gt;\n&gt;&gt;&gt; Yahoo! Groups Links\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;\n&gt; \n&gt; \n&gt; \n&gt; \n&gt; ------------------------------------\n&gt; \n&gt; Yahoo! Groups Links\n&gt; \n&gt; \n&gt; \n\n"}}