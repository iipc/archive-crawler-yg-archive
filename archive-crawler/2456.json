{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":168599281,"authorName":"stack","from":"stack &lt;stack@...&gt;","profile":"stackarchiveorg","replyTo":"LIST","senderId":"qwWbbQOOD-1O7_YQxAtPhXPTlk_RVsvO6kB-WgFfMIhxt7qNrYWjeKS4PJjrUAZmmS-4ioiUJbBqjjExknlVyg","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] Re: InitialTasks and FinalTasks","postDate":"1135200421","msgId":2456,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQzQTlDOEE1LjMwNjA0MDRAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGRvOTRxOCtidjlzQGVHcm91cHMuY29tPg==","referencesHeader":"PGRvOTRxOCtidjlzQGVHcm91cHMuY29tPg=="},"prevInTopic":2451,"nextInTopic":0,"prevInTime":2455,"nextInTime":2457,"topicId":2444,"numMessagesInTopic":7,"msgSnippet":"... I agree.  I made an issue to cover this: [ 1387527 ] Abort crawl in processor initialTasks .  Thanks also for the notes on the sporadic operation of","rawEmail":"Return-Path: &lt;stack@...&gt;\r\nX-Sender: stack@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 74537 invoked from network); 21 Dec 2005 21:27:03 -0000\r\nReceived: from unknown (66.218.66.172)\n  by m23.grp.scd.yahoo.com with QMQP; 21 Dec 2005 21:27:03 -0000\r\nReceived: from unknown (HELO dns.duboce.net) (63.203.238.114)\n  by mta4.grp.scd.yahoo.com with SMTP; 21 Dec 2005 21:27:02 -0000\r\nReceived: from [192.168.1.105] ([192.168.1.105])\n\t(authenticated)\n\tby dns-eth1.duboce.net (8.10.2/8.10.2) with ESMTP id jBLKLON18523;\n\tWed, 21 Dec 2005 12:21:24 -0800\r\nMessage-ID: &lt;43A9C8A5.3060404@...&gt;\r\nDate: Wed, 21 Dec 2005 13:27:01 -0800\r\nUser-Agent: Thunderbird 1.5 (Macintosh/20051025)\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;do94q8+bv9s@...&gt;\r\nIn-Reply-To: &lt;do94q8+bv9s@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Msg-Info: 2:12:4:0\r\nFrom: stack &lt;stack@...&gt;\r\nSubject: Re: [archive-crawler] Re: InitialTasks and FinalTasks\r\nX-Yahoo-Group-Post: member; u=168599281; y=FA5ivi5Rs6xck_tiXUrk_MM1cMiXpBuveFTUn0mQTUQczK2kdq0Q9CAF\r\nX-Yahoo-Profile: stackarchiveorg\r\n\r\ntizo_trico wrote:\n&gt; Ack,\n&gt; \n...\n\n&gt; In my opinion, it would be nice that the processors&#39;s initialTask,\n&gt; could throw an abort exception, and that CrawlController in this case,\n&gt; does not continue calling initialTasks, and call only finalTasks of\n&gt; the processors that were succefully initialized. What do you think?\n\nI agree.  I made an issue to cover this:\n&#39;[ 1387527 ] Abort crawl in processor initialTasks&#39;.  Thanks also for \nthe notes on the sporadic operation of requestCrawlStop.\n\nSt.Ack\n\n\n\n&gt; \n&gt; Anyway, in the meantime, I have made a trick (that is not elegant, but\n&gt; works) that if a processor initialTasks have an error, it register it,\n&gt; making the requestCrawlStop begin called when the first method\n&gt; innerProcess from my processors begins.\n&gt; \n&gt; Thanks in advanced,\n&gt; \n&gt; tizo\n&gt; \n&gt; \n&gt; --- In archive-crawler@yahoogroups.com, stack &lt;stack@a...&gt; wrote:\n&gt;  &gt;\n&gt;  &gt; tizo_trico wrote:\n&gt;  &gt; &gt; Hi,\n&gt;  &gt; &gt;\n&gt;  &gt; &gt; I am using Heritrix with some processors that I implemented. In those\n&gt;  &gt; &gt; processors, and depending of internal states, I would like to have the\n&gt;  &gt; &gt; possibility to abort a job in methods such as initialTask and\n&gt;  &gt; &gt; innerProcess.\n&gt;  &gt;\n&gt;  &gt; Currently the only safe way to abort/stop a job is, as you&#39;ve\n&gt; figured, a\n&gt;  &gt; call to requestCrawlStop.\n&gt;  &gt;\n&gt;  &gt; There is no way to abort at initialTask time currently.  What would you\n&gt;  &gt; suggest?  Should we throw an abort exception? If an abort is thrown,\n&gt;  &gt; you&#39;d probably want to call the finalTask on all processors that were\n&gt;  &gt; successfully initialized.\n&gt;  &gt;\n&gt;  &gt; For processor inner tasks, requestCrawlStop is probably the way to go.\n&gt;  &gt;\n&gt;  &gt; Perhaps of use, see how the precondition enforcer can skip to the\n&gt; end of\n&gt;  &gt; the processing chain:\n&gt;  &gt;\n&gt;  &gt;\n&gt; http://crawler.archive.org/xref/org/archive/crawler/prefetch/PreconditionEnforcer.html#206\n&gt;  &gt;\n&gt;  &gt; You might add a processor whose only role was to skip to the end of the\n&gt;  &gt; chain until preventing work being done in the interrim between sending\n&gt;  &gt; of the requestCrawlStop and crawler actually going down.\n&gt;  &gt;\n&gt;  &gt; &gt;\n&gt;  &gt; &gt; At this moment, the only way that I could do that, is calling\n&gt;  &gt; &gt; requestCrawlStop from the controller. It worked considerably fine when\n&gt;  &gt; &gt; I was testing with one processor: the web interface only says\n&gt;  &gt; &gt; &quot;Abnormal program termination&quot; or something like that, and I could see\n&gt;  &gt; &gt; the errors on an external log, and that was fine for me.\n&gt;  &gt; &gt;\n&gt;  &gt; &gt; When I started to try with two processors, I realized that if I call\n&gt;  &gt; &gt; requestCrawlStop in the initialTasks of one processor, the\n&gt;  &gt; &gt; initialTasks of the other is excecuted anyway, and also the two\n&gt;  &gt; &gt; finalTasks (I don&#39;t know why, but when I called requestCrawlStop using\n&gt;  &gt; &gt; only one of my processors, its finalTasks seemed like it was not\n&gt;  &gt; &gt; excecuted).\n&gt;  &gt; &gt;\n&gt;  &gt; &gt; Anyway, I read some code of the controller, and obviously the method\n&gt;  &gt; &gt; requestCrawlStop is not the ideal to use in initialTasks for this\n&gt;  &gt; &gt; porpouse.\n&gt;  &gt; &gt;\n&gt;  &gt; &gt; So I have the following questions:\n&gt;  &gt; &gt;\n&gt;  &gt; &gt; - What would the best way to stop a job in the method initialTask of a\n&gt;  &gt; &gt; processor?\n&gt;  &gt; &gt;\n&gt;  &gt; &gt; - And in the method innerProcess?\n&gt;  &gt; &gt;\n&gt;  &gt; &gt; - If requestCrawlStop was used, should CrawlController and any other\n&gt;  &gt; &gt; class be changed to handle it in a proper manner?\n&gt;  &gt; &gt;\n&gt;  &gt;\n&gt;  &gt; Calling requestCrawlStop from initialTask doesn&#39;t work?  Because its\n&gt;  &gt; expecting crawl to be setup before its invoked?\n&gt;  &gt;\n&gt;  &gt; Yours,\n&gt;  &gt; St.Ack\n&gt;  &gt;\n&gt;  &gt; &gt; Thanks very much,\n&gt;  &gt; &gt;\n&gt;  &gt; &gt; tizo\n&gt;  &gt; &gt;\n&gt;  &gt; &gt;\n&gt;  &gt; &gt;\n&gt;  &gt; &gt;\n&gt;  &gt; &gt;\n&gt;  &gt; &gt;\n&gt;  &gt; &gt; SPONSORED LINKS\n&gt;  &gt; &gt; Computer internet security\n&gt;  &gt; &gt;\n&gt; &lt;http://groups.yahoo.com/gads?t=ms&k=Computer+internet+security&w1=Computer+internet+security&w2=Computer+internet+business&w3=Computer+internet+access&w4=Computer+internet+privacy+securities&w5=Computer+internet+help&c=5&s=164&.sig=i0mxSmuqqFFe3BrjThENoA \n&gt; &lt;http://groups.yahoo.com/gads?t=ms&k=Computer+internet+security&w1=Computer+internet+security&w2=Computer+internet+business&w3=Computer+internet+access&w4=Computer+internet+privacy+securities&w5=Computer+internet+help&c=5&s=164&.sig=i0mxSmuqqFFe3BrjThENoA&gt;&gt;\n&gt; \n&gt;  &gt; &gt;       Computer internet business\n&gt;  &gt; &gt;\n&gt; &lt;http://groups.yahoo.com/gads?t=ms&k=Computer+internet+business&w1=Computer+internet+security&w2=Computer+internet+business&w3=Computer+internet+access&w4=Computer+internet+privacy+securities&w5=Computer+internet+help&c=5&s=164&.sig=kmDyW-ptkQj6I5S4gG69AA \n&gt; &lt;http://groups.yahoo.com/gads?t=ms&k=Computer+internet+business&w1=Computer+internet+security&w2=Computer+internet+business&w3=Computer+internet+access&w4=Computer+internet+privacy+securities&w5=Computer+internet+help&c=5&s=164&.sig=kmDyW-ptkQj6I5S4gG69AA&gt;&gt;\n&gt; \n&gt;  &gt; &gt;       Computer internet access\n&gt;  &gt; &gt;\n&gt; &lt;http://groups.yahoo.com/gads?t=ms&k=Computer+internet+access&w1=Computer+internet+security&w2=Computer+internet+business&w3=Computer+internet+access&w4=Computer+internet+privacy+securities&w5=Computer+internet+help&c=5&s=164&.sig=Ta-eZ3s36l3o1MvufztxDA \n&gt; &lt;http://groups.yahoo.com/gads?t=ms&k=Computer+internet+access&w1=Computer+internet+security&w2=Computer+internet+business&w3=Computer+internet+access&w4=Computer+internet+privacy+securities&w5=Computer+internet+help&c=5&s=164&.sig=Ta-eZ3s36l3o1MvufztxDA&gt;&gt;\n&gt; \n&gt;  &gt; &gt;\n&gt;  &gt; &gt; Computer internet privacy securities\n&gt;  &gt; &gt;\n&gt; &lt;http://groups.yahoo.com/gads?t=ms&k=Computer+internet+privacy+securities&w1=Computer+internet+security&w2=Computer+internet+business&w3=Computer+internet+access&w4=Computer+internet+privacy+securities&w5=Computer+internet+help&c=5&s=164&.sig=uuqya_mMImRC6lLPDsK2yQ \n&gt; &lt;http://groups.yahoo.com/gads?t=ms&k=Computer+internet+privacy+securities&w1=Computer+internet+security&w2=Computer+internet+business&w3=Computer+internet+access&w4=Computer+internet+privacy+securities&w5=Computer+internet+help&c=5&s=164&.sig=uuqya_mMImRC6lLPDsK2yQ&gt;&gt;\n&gt; \n&gt;  &gt; &gt;       Computer internet help\n&gt;  &gt; &gt;\n&gt; &lt;http://groups.yahoo.com/gads?t=ms&k=Computer+internet+help&w1=Computer+internet+security&w2=Computer+internet+business&w3=Computer+internet+access&w4=Computer+internet+privacy+securities&w5=Computer+internet+help&c=5&s=164&.sig=84G6glsO_UlIoE2IlCHAsw \n&gt; &lt;http://groups.yahoo.com/gads?t=ms&k=Computer+internet+help&w1=Computer+internet+security&w2=Computer+internet+business&w3=Computer+internet+access&w4=Computer+internet+privacy+securities&w5=Computer+internet+help&c=5&s=164&.sig=84G6glsO_UlIoE2IlCHAsw&gt;&gt;\n&gt; \n&gt;  &gt; &gt;\n&gt;  &gt; &gt;\n&gt;  &gt; &gt;\n&gt;  &gt; &gt;\n&gt; ------------------------------------------------------------------------\n&gt;  &gt; &gt; YAHOO! GROUPS LINKS\n&gt;  &gt; &gt;\n&gt;  &gt; &gt;     *  Visit your group &quot;archive-crawler\n&gt;  &gt; &gt;       &lt;http://groups.yahoo.com/group/archive-crawler&gt;&quot; on the web.\n&gt;  &gt; &gt;       \n&gt;  &gt; &gt;     *  To unsubscribe from this group, send an email to:\n&gt;  &gt; &gt;        archive-crawler-unsubscribe@yahoogroups.com\n&gt;  &gt; &gt;     \n&gt; &lt;mailto:archive-crawler-unsubscribe@yahoogroups.com?subject=Unsubscribe&gt;\n&gt;  &gt; &gt;       \n&gt;  &gt; &gt;     *  Your use of Yahoo! Groups is subject to the Yahoo! Terms of\n&gt;  &gt; &gt;       Service &lt;http://docs.yahoo.com/info/terms/&gt;.\n&gt;  &gt; &gt;\n&gt;  &gt; &gt;\n&gt;  &gt; &gt;\n&gt; ------------------------------------------------------------------------\n&gt;  &gt; &gt;\n&gt;  &gt;\n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; ------------------------------------------------------------------------\n&gt; YAHOO! GROUPS LINKS\n&gt; \n&gt;     *  Visit your group &quot;archive-crawler\n&gt;       &lt;http://groups.yahoo.com/group/archive-crawler&gt;&quot; on the web.\n&gt;        \n&gt;     *  To unsubscribe from this group, send an email to:\n&gt;        archive-crawler-unsubscribe@yahoogroups.com\n&gt;       &lt;mailto:archive-crawler-unsubscribe@yahoogroups.com?subject=Unsubscribe&gt;\n&gt;        \n&gt;     *  Your use of Yahoo! Groups is subject to the Yahoo! Terms of\n&gt;       Service &lt;http://docs.yahoo.com/info/terms/&gt;. \n&gt; \n&gt; \n&gt; ------------------------------------------------------------------------\n&gt; \n\n\n"}}