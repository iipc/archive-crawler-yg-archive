{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":325624130,"authorName":"Noah Levitt","from":"Noah Levitt &lt;nlevitt@...&gt;","profile":"nlevitt0","replyTo":"LIST","senderId":"V6_QqoO9hAoKx64VDC35Ji4pA5gKswWzIKV34HCJmIN8BhnZdrR17YzggNZVXM-cBZLlfOXqyzythDYKLbLSJwAOLAl-ZT3N","spamInfo":{"isSpam":false,"reason":"3"},"subject":"Re: [archive-crawler] Heritrix 1.14.3 report generation","postDate":"1268172809","msgId":6432,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDRCOTZDODA5LjUwOTA4MDRAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PDE1Y2VlYWI1MTAwMzA5MDgyNnhlMGYyYWVqNzk1OWNmYzhlNDcxODY0MEBtYWlsLmdtYWlsLmNvbT4=","referencesHeader":"PDE1Y2VlYWI1MTAwMzA5MDgyNnhlMGYyYWVqNzk1OWNmYzhlNDcxODY0MEBtYWlsLmdtYWlsLmNvbT4="},"prevInTopic":6431,"nextInTopic":6433,"prevInTime":6431,"nextInTime":6433,"topicId":6430,"numMessagesInTopic":5,"msgSnippet":"Hello Nicolas, You can use the crawlendReport jmx operation on the CrawlService mbean. The operation reads the named report (e.g. hosts-report ) from disk and","rawEmail":"Return-Path: &lt;nlevitt@...&gt;\r\nX-Sender: nlevitt@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 92320 invoked from network); 9 Mar 2010 22:13:44 -0000\r\nX-Received: from unknown (66.196.94.106)\n  by m12.grp.re1.yahoo.com with QMQP; 9 Mar 2010 22:13:44 -0000\r\nX-Received: from unknown (HELO mail.archive.org) (207.241.231.239)\n  by mta2.grp.re1.yahoo.com with SMTP; 9 Mar 2010 22:13:44 -0000\r\nX-Received: from localhost (localhost [127.0.0.1])\n\tby mail.archive.org (Postfix) with ESMTP id 6A43E2E8685\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Tue,  9 Mar 2010 14:13:31 -0800 (PST)\r\nX-Received: from mail.archive.org ([127.0.0.1])\n\tby localhost (mail.archive.org [127.0.0.1]) (amavisd-new, port 10024)\n\twith LMTP id WXgQEcA8RV7f for &lt;archive-crawler@yahoogroups.com&gt;;\n\tTue,  9 Mar 2010 14:13:30 -0800 (PST)\r\nX-Received: from [10.116.0.178] (unknown [71.202.38.39])\n\tby mail.archive.org (Postfix) with ESMTPSA id E40393E8636\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Tue,  9 Mar 2010 14:13:30 -0800 (PST)\r\nMessage-ID: &lt;4B96C809.5090804@...&gt;\r\nDate: Tue, 09 Mar 2010 14:13:29 -0800\r\nUser-Agent: Thunderbird 2.0.0.23 (X11/20090817)\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;15ceeab51003090826xe0f2aej7959cfc8e4718640@...&gt;\r\nIn-Reply-To: &lt;15ceeab51003090826xe0f2aej7959cfc8e4718640@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 8bit\r\nX-eGroups-Msg-Info: 2:3:4:0:0\r\nFrom: Noah Levitt &lt;nlevitt@...&gt;\r\nSubject: Re: [archive-crawler] Heritrix 1.14.3 report generation\r\nX-Yahoo-Group-Post: member; u=325624130; y=nj3jZNYL-cNmuNoiNZ8Tf4W-5lgECVevyES7KNmqz1QbVgo\r\nX-Yahoo-Profile: nlevitt0\r\n\r\nHello Nicolas,\n\nYou can use the crawlendReport jmx operation on the CrawlService mbean. The operation reads the named report (e.g. &quot;hosts-report&quot;) from disk and returns it to the caller. Of course that will return the entire report, which may not be optimal. \n\nSince you are calling shutdown, you could also poll/wait until heritrix is gone. By then you can be sure it&#39;s finished writing out the reports.\n\nA third option would be to have the logic that archives the reports wait for them to appear. (That&#39;s essentially what we do here at IA.)\n\nNoah\n\n\nNicolas Giraud wrote:\n&gt; \n&gt; \n&gt; Hi,\n&gt; \n&gt; I am using Heritrix 1.14.3 within NetArchive Suite 3.10. At BnF we are \n&gt; currently running production tests for broad crawls on the french domains.\n&gt; \n&gt; I will quickly summarize how NetArchive Suite &#39;pilots&quot; Heritrix. \n&gt; NetArchive creates one instance of Heritrix for a given job, and sends a \n&gt; shutdown command to Heritrix once the said job is reported as completed \n&gt; (through the JMX method &quot;completedJobs&quot; on the CrawlServer MBean) or \n&gt; the  job status (JMX command &quot;Status&quot; on the CrawlJob MBean) is either \n&gt; null (can this really happen?), finished or illegal.\n&gt; \n&gt; The Heritrix reports are then archived in a special metadata archive. \n&gt; What we experience is a lot of such reports missing, such a \n&gt; host-report.txt. These reports are compiled from the crawl log I \n&gt; believe, but does this happen before or after the job is reported as \n&gt; completed?\n&gt; \n&gt; Is there a way to interrogate Heritrix on the completion of report \n&gt; generation? Then I could add some kind of watchdog to the code. \n&gt; Currently my only option would be to wait an additional time (based on \n&gt; experience, but still possibly inaccurate) once we consider the job \n&gt; completed.\n&gt; \n&gt; Thanks for your help.\n&gt; \n&gt; -- \n&gt; Nicolas Giraud\n&gt; ---------------------------------------------------------------------------------------------\n&gt; D�veloppeur Archives du Web - Biblioth�que Nationale de France\n&gt; Web Archiving Developper - National Library of France\n&gt; ---------------------------------------------------------------------------------------------\n&gt; \n&gt; \n&gt; \n\n\n"}}