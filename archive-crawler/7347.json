{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":325624130,"authorName":"Noah Levitt","from":"Noah Levitt &lt;nlevitt@...&gt;","profile":"nlevitt","replyTo":"LIST","senderId":"fDLJ57amJeJmrfwHjzj6zytr5c3IuMuQxFZF-1VjLtV-tT1Ij4LQX3YRTFtLwU0kWxC4GzDMvwOKUmndLHpWFz6wuGcmVipn","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] How to pass data between linked CrawlURI&#39;s","postDate":"1318377918","msgId":7347,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDRFOTREOUJFLjcwOTA0MDdAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGo3MTVjZStuZnNiQGVHcm91cHMuY29tPg==","referencesHeader":"PGo3MTVjZStuZnNiQGVHcm91cHMuY29tPg=="},"prevInTopic":7345,"nextInTopic":7348,"prevInTime":7346,"nextInTime":7348,"topicId":7345,"numMessagesInTopic":3,"msgSnippet":"Hello, The problem is that by the time your processor runs, after CandidatesProcessor, the outlinks have already been added to the frontier in a serialized","rawEmail":"Return-Path: &lt;nlevitt@...&gt;\r\nX-Sender: nlevitt@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 85302 invoked from network); 12 Oct 2011 00:05:19 -0000\r\nX-Received: from unknown (98.137.35.162)\n  by m1.grp.sp2.yahoo.com with QMQP; 12 Oct 2011 00:05:19 -0000\r\nX-Received: from unknown (HELO mail.archive.org) (207.241.224.6)\n  by mta6.grp.sp2.yahoo.com with SMTP; 12 Oct 2011 00:05:19 -0000\r\nX-Received: from localhost (localhost [127.0.0.1])\n\tby mail.archive.org (Postfix) with ESMTP id 8A12B68410AF;\n\tTue, 11 Oct 2011 17:05:17 -0700 (PDT)\r\nX-Received: from mail.archive.org ([127.0.0.1])\n\tby localhost (mail.archive.org [127.0.0.1]) (amavisd-new, port 10024)\n\twith LMTP id N9gy6UqugfTt; Tue, 11 Oct 2011 17:05:17 -0700 (PDT)\r\nX-Received: from [208.70.27.155] (desktop-nlevitt.sf.archive.org [208.70.27.155])\n\tby mail.archive.org (Postfix) with ESMTPSA id 12C7868410AA;\n\tTue, 11 Oct 2011 17:05:17 -0700 (PDT)\r\nMessage-ID: &lt;4E94D9BE.7090407@...&gt;\r\nDate: Tue, 11 Oct 2011 17:05:18 -0700\r\nUser-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.23) Gecko/20110922 Thunderbird/3.1.15\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nCc: gerritdevries74 &lt;gerritdevries74@...&gt;\r\nReferences: &lt;j715ce+nfsb@...&gt;\r\nIn-Reply-To: &lt;j715ce+nfsb@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Noah Levitt &lt;nlevitt@...&gt;\r\nSubject: Re: [archive-crawler] How to pass data between linked CrawlURI&#39;s\r\nX-Yahoo-Group-Post: member; u=325624130; y=TeXzJ5FwZBkOp32yCA3bvtQ6yQmUWhTUZ3lTLrcn50-jVw\r\nX-Yahoo-Profile: nlevitt\r\n\r\nHello,\n\nThe problem is that by the time your processor runs, after \nCandidatesProcessor, the outlinks have already been added to the \nfrontier in a serialized form. You need to add your metadata after the \noutlinks have been promoted to CrawlURIs but before they&#39;re added to the \nfrontier. Both these things happen inside of CandidatesProcessor, so \nadding a processor to the dispositionChain won&#39;t work (before \nCandidatesProcessor is too early, after is too late). There is a spot \nfor just this kind of thing though - the CandidateChain. I&#39;d recommend \nyou stick your processor at the end of that chain. Note that in this \ncontext the CrawlURI passed to the processor is the outlink, so you \nshould operate directly on it rather than iterate over \ngetOutCandidates(). (Btw it looks like calling addDataPersistentMember() \nis indeed the right thing to do.)\n\nNoah\n\n\nOn 10/11/2011 03:22 AM, gerritdevries74 wrote:\n&gt; We are using Heritrix 3.1.0-RC1 to crawl, and would like to pass metadata from pages that a link occurs in, to the pages that they link to. E.g. if we crawl an RSS page, we pass some meta-information from the RSS-feed to the processors for the linked articles.\n&gt;\n&gt; I am trying to do this with the getData/setData methods on CrawlURI. This is the workflow I am using:\n&gt;\n&gt; In the DispositionChain for the originating link I have a processor that adds meta-data to the CrawlURI for all getOutCandidates(). (Just after CandidatesProcessor and before DispositionProcessor). I have used addDataPersistentMember to make that data persistent.\n&gt;\n&gt; However I see that when the CrawlURI is picked up in the FetchChain, it is actually a new instance of the CrawlURI, and the data is not available anymore. That new CrawlURI instance is than passed to the DispositionChain, but the data I put on it while it was an out-candadate is lost.\n&gt;\n&gt; Is there some other way I can make this work, or am I missing something?\n&gt;\n&gt;\n\n\n"}}