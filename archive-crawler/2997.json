{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"x7kWYziX6Deq6AFXM1-4bDB3-c3fnVvDAFrOTwgV8KeVicc6h6QAJ-kgNrQ65FiM9oQA3tYq__mZnD6YIZSjIy50yl40Gqg","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] slow crawls with 1.8: mail per heritrix list","postDate":"1151707279","msgId":2997,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ0QTVBODhGLjgwMjAwMDJAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PDQ0QTUwNTE2LjQwNzAxMDlAc3NsbWl0LnVuaWJvLml0Pg==","referencesHeader":"PDQ0QTI0RUQ1LjgwMDA1MDFAc3NsbWl0LnVuaWJvLml0PiA8NDRBMkZDQkUuODA3MDAwMkBhcmNoaXZlLm9yZz4gPDQ0QTUwNTE2LjQwNzAxMDlAc3NsbWl0LnVuaWJvLml0Pg=="},"prevInTopic":2995,"nextInTopic":3005,"prevInTime":2996,"nextInTime":2998,"topicId":2984,"numMessagesInTopic":5,"msgSnippet":"These reports look typical for a crawl that has simply reached a stage where there are not enough eligible queues to keep the threads busy. Specifically, it s","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 3559 invoked from network); 30 Jun 2006 22:40:19 -0000\r\nReceived: from unknown (66.218.66.217)\n  by m30.grp.scd.yahoo.com with QMQP; 30 Jun 2006 22:40:19 -0000\r\nReceived: from unknown (HELO mail.archive.org) (207.241.227.188)\n  by mta2.grp.scd.yahoo.com with SMTP; 30 Jun 2006 22:40:18 -0000\r\nReceived: from localhost (localhost [127.0.0.1])\n\tby mail.archive.org (Postfix) with ESMTP id 12978141569AD\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Fri, 30 Jun 2006 15:40:11 -0700 (PDT)\r\nReceived: from mail.archive.org ([127.0.0.1])\n\tby localhost (mail.archive.org [127.0.0.1]) (amavisd-new, port 10024)\n\twith LMTP id 22422-01-3 for &lt;archive-crawler@yahoogroups.com&gt;;\n\tFri, 30 Jun 2006 15:40:08 -0700 (PDT)\r\nReceived: from [192.168.1.203] (unknown [67.170.222.19])\n\tby mail.archive.org (Postfix) with ESMTP id 1D8E5141569A2\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Fri, 30 Jun 2006 15:40:08 -0700 (PDT)\r\nMessage-ID: &lt;44A5A88F.8020002@...&gt;\r\nDate: Fri, 30 Jun 2006 15:41:19 -0700\r\nUser-Agent: Mail/News 1.5 (X11/20060309)\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;44A24ED5.8000501@...&gt; &lt;44A2FCBE.8070002@...&gt; &lt;44A50516.4070109@...&gt;\r\nIn-Reply-To: &lt;44A50516.4070109@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-Virus-Scanned: Debian amavisd-new at archive.org\r\nX-eGroups-Msg-Info: 1:0:0:0\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] slow crawls with 1.8: mail per heritrix list\r\nX-Yahoo-Group-Post: member; u=137285340; y=Hq64nYv-DV7pTpR0odmf33nzk89o1VfCon4BwzLLF8R_\r\nX-Yahoo-Profile: gojomo\r\n\r\nThese reports look typical for a crawl that has simply reached a stage \nwhere there are not enough eligible queues to keep the threads busy.\n\nSpecifically, it&#39;s showing only 120 queues with eligible URIs. If some \nare in long retry delays (because the target hosts didn&#39;t respond at \nall), and your politeness delays are otherwise reasonable, only a few \nwill be available at any time.\n\nThat suggests whatever is different compared to your 1.4 runs is keeping \nURIs from being scheduled; perhaps there&#39;s a subtle or unintended \ndifference in your scoping rules? Perhaps the sense of a filter could be \ninverted?\n\nIf you&#39;d like to send me your 1.4 and 1.8 order.xml files (on or off \nlist), I&#39;ll see if I notice anything that could account for the difference.\n\n- Gordon @ IA\n\n\nMarco Baroni wrote:\n&gt; Thanks for your help!\n&gt; \n&gt;&gt; Once it reaches the &#39;slow&#39; state, it would be useful to check:\n&gt;&gt; - does the UI show any alerts?\n&gt; \n&gt; No alerts.\n&gt; \n&gt;&gt; - does the heritrix_out.log show any exceptions (esp. those that\n&gt;&gt; might cause thread death)?\n&gt; \n&gt; Nope, there are some warnings when we start heritrix but they only concern \n&gt; older (pre-1.4) jobs, and they don&#39;t seem relevant.\n&gt; \n&gt;&gt; - what does the UI &#39;threads report&#39; show as the state of running\n&gt;&gt; threads?\n&gt; \n&gt; ToeThread report\n&gt; 150 threads: 150 ABOUT_TO_GET_URI\n&gt; \n&gt; The report looks like this:\n&gt; \n&gt; Toe threads report - 200606301056\n&gt;   Job being crawled: itwac-like2\n&gt;   Number of toe threads in pool: 150 (0 active)\n&gt;     ToeThread #1\n&gt; [ToeThread #1:\n&gt;   -no CrawlURI-\n&gt;      WAITING for 9s930ms\n&gt;      step: ABOUT_TO_GET_URI for 9s930ms\n&gt; ]\n&gt;     ToeThread #2\n&gt; [ToeThread #2:\n&gt;   -no CrawlURI-\n&gt;      WAITING for 15s20ms\n&gt;      step: ABOUT_TO_GET_URI for 15s20ms\n&gt; ]\n&gt; \n&gt; and so on for all the threads\n&gt; \n&gt;&gt; - what does the &#39;frontier report&#39; show as the distribution of\n&gt;&gt; queue states?\n&gt; \n&gt; Frontier report\n&gt; 3782 queues: 120 active (0 in-process; 0 ready; 120 snoozed); 0 inactive; 0 \n&gt; retired; 3662 exhausted\n&gt; \n&gt; Frontier report - 200606301058\n&gt;   Job being crawled: itwac-like2\n&gt; \n&gt;   -----===== STATS =====-----\n&gt;   Discovered:    27470\n&gt;   Queued:        2513\n&gt;   Finished:      25014\n&gt;    Successfully: 19759\n&gt;    Failed:       3\n&gt;    Disregarded:  5252\n&gt; \n&gt;   -----===== QUEUES =====-----\n&gt;   Already included size:     27470\n&gt;                 pending:     0\n&gt; \n&gt;   All class queues map size: 3782\n&gt;               Active queues: 120\n&gt;                      In-process: 0\n&gt;                           Ready: 0\n&gt;                         Snoozed: 120\n&gt;             Inactive queues: 0\n&gt;              Retired queues: 0\n&gt;            Exhausted queues: 3662\n&gt; \n&gt;   -----===== IN-PROCESS QUEUES =====-----\n&gt; \n&gt;   -----===== READY QUEUES =====-----\n&gt; \n&gt;   -----===== SNOOZED QUEUES =====-----\n&gt; Queue weather.yahoo.com\n&gt;    10 items\n&gt;     wakes in: 684ms\n&gt;      last enqueued: \n&gt; http://weather.yahoo.com/forecast/BRXX0232_c.html?force_units=1\n&gt;        last peeked: http://weather.yahoo.com/forecast/SFXX0023_f.html\n&gt;     total expended: 99 (total budget: -1)\n&gt;     active balance: 2901\n&gt;     last(avg) cost: 1(1.0)\n&gt; \n&gt; Queue forum.cellularmagazine.it\n&gt;    152 items\n&gt;     wakes in: 744ms\n&gt;      last enqueued: \n&gt; http://forum.cellularmagazine.it/viewtopic.php?t=6786&view=previous\n&gt;        last peeked: http://forum.cellularmagazine.it/viewtopic.php?t=6786\n&gt;     total expended: 72 (total budget: -1)\n&gt;     active balance: 2928\n&gt;     last(avg) cost: 1(1.0)\n&gt; \n&gt; Queue www.fondazionecrvenezia.it\n&gt;    25 items\n&gt;     wakes in: 1s342ms\n&gt;      last enqueued: \n&gt; http://www.fondazionecrvenezia.it/patrimonioartistico/dipinti/scheda171.html\n&gt;        last peeked: \n&gt; http://www.fondazionecrvenezia.it/patrimonioartistico/dipinti/scheda118.html\n&gt;     total expended: 222 (total budget: -1)\n&gt;     active balance: 2778\n&gt;     last(avg) cost: 1(1.0)\n&gt; \n&gt; \n&gt; ...\n&gt; \n&gt;   -----===== LONGEST QUEUE =====-----\n&gt; Queue forum.amdplanet.it\n&gt;    1418 items\n&gt;     wakes in: 8s465ms\n&gt;      last enqueued: \n&gt; http://forum.amdplanet.it/viewtopic.php?t=17426&view=previous\n&gt;        last peeked: http://forum.amdplanet.it/viewtopic.php?t=17426\n&gt;     total expended: 67 (total budget: -1)\n&gt;     active balance: 2933\n&gt;     last(avg) cost: 1(1.0)\n&gt; \n&gt; \n&gt;   -----===== INACTIVE QUEUES =====-----\n&gt; \n&gt;   -----===== RETIRED QUEUES =====-----\n&gt; \n&gt; \n&gt;&gt; Another outside possibility is a large number of non-responsive\n&gt;&gt; hosts. Depending on your settings, non-responsive hosts could take\n&gt;&gt; tens of seconds to minutes to time out. Having hundreds or\n&gt;&gt; thousands among the queues could monopolize all the threads\n&gt;&gt; wiating for timeouts. This would likely be evident in the threads\n&gt;&gt; report if this were the case.\n&gt; \n&gt; See above.\n&gt; \n&gt; But isn&#39;t this something that should have happened in 1.4 as well?\n&gt; \n&gt; \n&gt;&gt; Hope this helps -- feel free to send whatever crawl output you\n&gt;&gt; feel comfortable sharing to the list or to me directly for more\n&gt;&gt; analysis.\n&gt; \n&gt; Thanks a lot -- we feel comfortable sharing everything, but I&#39;m not sure \n&gt; about what kind of information would be useful and I don&#39;t want to submerge \n&gt; you and/or the list with useless stuff... if there is anything that you \n&gt; thing would be informative in diagnosing the problem, please let me know, \n&gt; and I&#39;ll send it!\n&gt; \n&gt; Thanks again.\n&gt; \n&gt; Regards,\n&gt; \n&gt; Marco\n&gt; \n&gt; \n\n\n"}}