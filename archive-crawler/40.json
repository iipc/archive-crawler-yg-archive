{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":95697582,"authorName":"G.B.Reddy","from":"&quot;G.B.Reddy&quot; &lt;reddy@...&gt;","profile":"gbreddysoft","replyTo":"LIST","senderId":"FjYqi3LUGWUmn9Etoe9Rq2KQhAlPvcEj86zfWpkBVNxHcJWmxHlCCRYFloxRRIqueWVE3b2Y7vVRUjvNf81AsA9CE9bjXvkUmTz6cjA","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] Status !!","postDate":"1050002175","msgId":40,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDAzMzcwMWMyZmY5NSRhN2ZjODc3MCRkNTAwYThjMEB0aWRlbHBhcmsuaXNvZnR0ZWNoaW5kaWEuY29tPg==","referencesHeader":"PDAwNmUwMWMyZmRmOSQ0MjU4NmFkMCRkNTAwYThjMEB0aWRlbHBhcmsuaXNvZnR0ZWNoaW5kaWEuY29tPiA8MDBhZjAxYzJmZGZmJDUxYzc3ODcwJDQ4ZjBlZGQxQFdPUktTVEFUSU9OMjE+"},"prevInTopic":39,"nextInTopic":0,"prevInTime":39,"nextInTime":41,"topicId":38,"numMessagesInTopic":3,"msgSnippet":"Gordon, As you say, the aSocketInputStream is needed only if the client stage is multithreaded. But the oceanstore HttpClient stage is internally using it to","rawEmail":"Return-Path: &lt;reddy@...&gt;\r\nX-Sender: reddy@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (EGP: mail-8_2_6_5); 10 Apr 2003 19:18:33 -0000\r\nReceived: (qmail 33655 invoked from network); 10 Apr 2003 19:18:32 -0000\r\nReceived: from unknown (66.218.66.216)\n  by m13.grp.scd.yahoo.com with QMQP; 10 Apr 2003 19:18:32 -0000\r\nReceived: from unknown (HELO pub.isofttechindia.com) (203.199.202.17)\n  by mta1.grp.scd.yahoo.com with SMTP; 10 Apr 2003 19:18:28 -0000\r\nReceived: from ReddyGB (ReddyGB.isofttechindia.com [192.168.0.213])\n\tby pub.isofttechindia.com (8.11.0/8.11.0) with SMTP id h3AJEIi05596\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Fri, 11 Apr 2003 00:44:18 +0530\r\nMessage-ID: &lt;033701c2ff95$a7fc8770$d500a8c0@...&gt;\r\nTo: &lt;archive-crawler@yahoogroups.com&gt;\r\nReferences: &lt;006e01c2fdf9$42586ad0$d500a8c0@...&gt; &lt;00af01c2fdff$51c77870$48f0edd1@WORKSTATION21&gt;\r\nSubject: Re: [archive-crawler] Status !!\r\nDate: Fri, 11 Apr 2003 00:46:15 +0530\r\nOrganization: ISoftTech\r\nMIME-Version: 1.0\r\nContent-Type: multipart/alternative;\n\tboundary=&quot;----=_NextPart_000_0334_01C2FFC3.C1A58130&quot;\r\nX-Priority: 3\r\nX-MSMail-Priority: Normal\r\nX-Mailer: Microsoft Outlook Express 5.50.4920.2300\r\nX-MimeOLE: Produced By Microsoft MimeOLE V5.50.4920.2300\r\nX-eGroups-From: &quot;G.B.Reddy&quot; &lt;reddy@...&gt;\r\nFrom: &quot;G.B.Reddy&quot; &lt;reddy@...&gt;\r\nReply-To: &quot;G.B.Reddy&quot; &lt;reddy@...&gt;\r\nX-Yahoo-Group-Post: member; u=95697582\r\nX-Yahoo-Profile: gbreddysoft\r\n\r\n\r\n------=_NextPart_000_0334_01C2FFC3.C1A58130\r\nContent-Type: text/plain;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nGordon,\n\nAs you say, the aSocketInputStream is needed only if the client st=\r\nage is multithreaded. But the oceanstore &quot;HttpClient&quot; stage is internally u=\r\nsing it to do sequencing which is unnecessary since anyway the &quot;HttpClient&quot;=\r\n class implements SingleThreadedEventHandlerIF. I have removed these overhe=\r\nads to do my performance testing.\n\nAfter starting to test the SEDA socket p=\r\nerformance, I ran into three problems in the SEDA&#39;s socket framework.\n\n- Ne=\r\nwly discovered bug : The seda internals throw ConcurrentModification except=\r\nions when iterating through the selector&#39;s registered keys. This exceptions=\r\n is highly reproducible when more number of concurrent downloads happen. Sy=\r\nnchronization has not been taken care when the ReadEventHandler tries to de=\r\nregister the socket from the selector of the WriteEventHandler. ( As you wo=\r\nuld know, there are three stages ReadStage, WriteStage and ListenStage in t=\r\nhe seda socket framework. Each has its own java Selector instance and they =\r\nwait on its select call. The ReadStage is the one that determines that a co=\r\nnnection is terminated. When this happens, it directly tries to make a dere=\r\ngister call on the WriteStage&#39;s selector on this socket object. So, easily =\r\nconcurrent mod exceptions are thrown when my downloader stage is pumping re=\r\nquests and making new connections). I shall raise this bug to the author an=\r\nd I am proceeding with my fix on it. Because of this unsynchronized communi=\r\ncation, a lot of CancelledKeyExceptions are also thrown in the internals.\n\n=\r\n- A documented bug : ConcurrentModification exceptions when iterating throu=\r\ngh the selector&#39;s selectedKeys. This is also due to no synchronization. Mul=\r\ntiple threads are allowed by the seda internals to do select calls on a sin=\r\ngle selector. (Look for the docs in seda.sandStorm.lib.aSocket.nio.NIOSelec=\r\ntSource.doPoll method). I will have to look for doing some minimal synchron=\r\nization as stated in there.\n\n- There has been other rare NullPointerExcepti=\r\nons and IllegalArgumentException in some places. I will have to look into t=\r\nheir implications.\n\nI will fix the last two problems and get the performanc=\r\ne measurements tomorrow.\n\nThanks,\nReddy\n\n  ----- Original Message ----- \n  =\r\nFrom: Gordon Mohr \n  To: archive-crawler@yahoogroups.com \n  Sent: Wednesday=\r\n, April 09, 2003 12:17 AM\n  Subject: Re: [archive-crawler] Status !!\n\n\n  Th=\r\nanks for the update!\n\n  The Ocenstore libhttp package is known to be very r=\r\nough; really just a\n  placeholder or starting point for what we&#39;d need. (No=\r\nte that there&#39;s\n  also an alternative &#39;libhttp2&#39; package in OceanStore, but=\r\n it seemed both\n  unused in their other code and more elaborate, so I haven=\r\n&#39;t tried\n  to use it yet.)\n\n  The TCP response ordering capabilities to aSo=\r\ncketInputStream only seem\n  necessary if you have multiple threads reading =\r\nfrom the same socket -- which\n  I think can, and probably should, be avoide=\r\nd.\n\n  I&#39;m looking forward to seeing the test results.\n\n  I like the BuildDe=\r\nsign proposal; please move forward with creating\n  that structure for a new=\r\n module on the sourceforge CVS. However,\n  please use the module name of &quot;A=\r\nrchiveOpenCrawler&quot; (instead of\n  &quot;Web-crawler&quot;).\n\n  Thanks!\n\n  - Gordon\n\n  =\r\n----- Original Message -----\n  From: G.B.Reddy\n  To: archive-crawler@yahoog=\r\nroups.com\n  Sent: Tuesday, April 08, 2003 11:04 AM\n  Subject: [archive-craw=\r\nler] Status !!\n\n\n  Gordon,\n\n  I am presently working on the SEDA socket ove=\r\nrhead determination work. I will get the results in the next two days. Some=\r\n initial\n  insights into it are\n  - Oceanstore manages both Tx and Rx in a =\r\nsingle stage.\n  - It just holds the responses in memory only. It does not w=\r\nrite into tmp files if they are huge.\n  - TCP response reordering is done b=\r\ny using the seda.sandStorm.lib.aSocket.aSocketInputStream class which reord=\r\ners packets according\n  to the ATcpInPacket sequence number.\n\n  The test th=\r\nat will be done :\n  - Port the downloader code ( which we had written earli=\r\ner during the java nio performance tests ) to SEDA framework and use the\n  =\r\nOceanStore library for HTTP fetching. The same tests that we did for the do=\r\nwnloader will be repeated in this oceanstore setup. We\n  are removing some =\r\noceanstore code to make it similar. The result of this test would tell us t=\r\nhe percentage of overhead imposed by\n  the SEDA framework.\n\n\n  We are also =\r\ndone with the JAnt packaging scripts. It uses the present CVS structure its=\r\nelf. I shall create the proposed CVS\n  structure after you approve it. Toda=\r\ny we have put the cronjob for testing the web hosting part of nightly build=\r\ns. We shall enable it\n  for all tomorrow. As of now, only the last nightly =\r\nbuild will be available for download. More changes need to be made for host=\r\ning\n  every nightly build of a week.\n\n  Thanks,\n  Reddy\n\n  Yahoo! Groups Sp=\r\nonsor\n  ADVERTISEMENT\n\n\n\n\n  To unsubscribe from this group, send an email t=\r\no:\n  archive-crawler-unsubscribe@yahoogroups.com\n\n\n\n  Your use of Yahoo! Gr=\r\noups is subject to the Yahoo! Terms of Service.\n\n\n        Yahoo! Groups Spo=\r\nnsor \n       \n       \n\n  To unsubscribe from this group, send an email to:\n=\r\n  archive-crawler-unsubscribe@yahoogroups.com\n\n\n\n  Your use of Yahoo! Group=\r\ns is subject to the Yahoo! Terms of Service. \n\n\r\n------=_NextPart_000_0334_01C2FFC3.C1A58130\r\nContent-Type: text/html;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot;&gt;\n&lt;HTML&gt;&lt;HEAD&gt;=\r\n\n&lt;META http-equiv=3DContent-Type content=3D&quot;text/html; charset=3Diso-8859-1=\r\n&quot;&gt;\n&lt;META content=3D&quot;MSHTML 5.50.4134.600&quot; name=3DGENERATOR&gt;\n&lt;STYLE&gt;&lt;/STYLE&gt;=\r\n\n&lt;/HEAD&gt;\n&lt;BODY bgColor=3D#ffffff&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Gordon,&lt;=\r\n/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FON=\r\nT face=3DArial size=3D2&gt;As you say, the aSocketInputStream is needed only \n=\r\nif the client stage is multithreaded. But the oceanstore &quot;HttpClient&quot; stage=\r\n is \ninternally using it to do sequencing which is unnecessary since anyway=\r\n the \n&quot;HttpClient&quot; class implements SingleThreadedEventHandlerIF. I have re=\r\nmoved these \noverheads to do my performance testing.&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FON=\r\nT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D=\r\n2&gt;After starting to test the SEDA socket performance, \nI ran into three pro=\r\nblems&nbsp;in the SEDA&#39;s socket framework.&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DA=\r\nrial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;-&nbsp;N=\r\newly discovered&nbsp;bug :&nbsp;The seda \ninternals throw&nbsp;ConcurrentMo=\r\ndification exceptions when iterating through \nthe selector&#39;s registered key=\r\ns. This exceptions is highly reproducible when more \nnumber of concurrent d=\r\nownloads happen. Synchronization has not been taken care \nwhen the ReadEven=\r\ntHandler tries to deregister the socket from the selector of \nthe WriteEven=\r\ntHandler. ( As you would know, there are three stages ReadStage, \nWriteStag=\r\ne and ListenStage in the seda socket framework. Each has its own java \nSele=\r\nctor instance and they wait on its select call. The ReadStage is the one \nt=\r\nhat determines that a connection is terminated. When this happens, it direc=\r\ntly \ntries to make a deregister call on the WriteStage&#39;s selector on this s=\r\nocket \nobject. So, easily concurrent mod exceptions are thrown when my down=\r\nloader stage \nis pumping requests and making new connections).&nbsp;I shall=\r\n raise this bug to \nthe author and I am proceeding with my fix on it. Becau=\r\nse of this unsynchronized \ncommunication, a lot of CancelledKeyExceptions a=\r\nre also thrown in the \ninternals.&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=\r\n=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;- A documented bu=\r\ng&nbsp;: ConcurrentModification \nexceptions when iterating through the sele=\r\nctor&#39;s selectedKeys. This is also due \nto no synchronization.&nbsp;Multiple=\r\n threads are allowed by the seda internals \nto do select calls on a single&=\r\nnbsp;selector. (Look for the docs in \nseda.sandStorm.lib.aSocket.nio.NIOSel=\r\nectSource.doPoll method). I will have to \nlook for doing some minimal synch=\r\nronization as stated in there.&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D=\r\n2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;- There has been oth=\r\ner rare NullPointerExceptions \nand IllegalArgumentException in some places.=\r\n I will have to look into their \nimplications.&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=\r\n=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;I wi=\r\nll fix the last two problems and&nbsp;get the \nperformance measurements tom=\r\norrow.&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;D=\r\nIV&gt;&lt;FONT face=3DArial size=3D2&gt;Thanks,&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial=\r\n size=3D2&gt;Reddy&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;=\r\n&lt;/DIV&gt;\n&lt;BLOCKQUOTE \nstyle=3D&quot;PADDING-RIGHT: 0px; PADDING-LEFT: 5px; MARGIN-=\r\nLEFT: 5px; BORDER-LEFT: #000000 2px solid; MARGIN-RIGHT: 0px&quot;&gt;\n  &lt;DIV style=\r\n=3D&quot;FONT: 10pt arial&quot;&gt;----- Original Message ----- &lt;/DIV&gt;\n  &lt;DIV \n  style=\r\n=3D&quot;BACKGROUND: #e4e4e4; FONT: 10pt arial; font-color: black&quot;&gt;&lt;B&gt;From:&lt;/B&gt; =\r\n\n  &lt;A title=3Dgojomo@... href=3D&quot;mailto:gojomo@...&quot;&gt;Gordon =\r\nMohr&lt;/A&gt; \n  &lt;/DIV&gt;\n  &lt;DIV style=3D&quot;FONT: 10pt arial&quot;&gt;&lt;B&gt;To:&lt;/B&gt; &lt;A \n  title=\r\n=3Darchive-crawler@yahoogroups.com \n  href=3D&quot;mailto:archive-crawler@yahoog=\r\nroups.com&quot;&gt;archive-crawler@yahoogroups.com&lt;/A&gt; \n  &lt;/DIV&gt;\n  &lt;DIV style=3D&quot;FO=\r\nNT: 10pt arial&quot;&gt;&lt;B&gt;Sent:&lt;/B&gt; Wednesday, April 09, 2003 12:17 \n  AM&lt;/DIV&gt;\n  =\r\n&lt;DIV style=3D&quot;FONT: 10pt arial&quot;&gt;&lt;B&gt;Subject:&lt;/B&gt; Re: [archive-crawler] Statu=\r\ns \n  !!&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&lt;BR&gt;&lt;/DIV&gt;&lt;TT&gt;Thank=\r\ns for the \n  update!&lt;BR&gt;&lt;BR&gt;The Ocenstore libhttp package is known to be ve=\r\nry rough; really \n  just a&lt;BR&gt;placeholder or starting point for what we&#39;d n=\r\need. (Note that \n  there&#39;s&lt;BR&gt;also an alternative &#39;libhttp2&#39; package in Oce=\r\nanStore, but it seemed \n  both&lt;BR&gt;unused in their other code and more elabo=\r\nrate, so I haven&#39;t \n  tried&lt;BR&gt;to use it yet.)&lt;BR&gt;&lt;BR&gt;The TCP response orde=\r\nring capabilities to \n  aSocketInputStream only seem&lt;BR&gt;necessary if you ha=\r\nve multiple threads reading \n  from the same socket -- which&lt;BR&gt;I think can=\r\n, and probably should, be \n  avoided.&lt;BR&gt;&lt;BR&gt;I&#39;m looking forward to seeing =\r\nthe test results.&lt;BR&gt;&lt;BR&gt;I like \n  the BuildDesign proposal; please move fo=\r\nrward with creating&lt;BR&gt;that structure \n  for a new module on the sourceforg=\r\ne CVS. However,&lt;BR&gt;please use the module \n  name of &quot;ArchiveOpenCrawler&quot; (i=\r\nnstead \n  of&lt;BR&gt;&quot;Web-crawler&quot;).&lt;BR&gt;&lt;BR&gt;Thanks!&lt;BR&gt;&lt;BR&gt;- Gordon&lt;BR&gt;&lt;BR&gt;-----=\r\n Original \n  Message -----&lt;BR&gt;From: G.B.Reddy&lt;BR&gt;To: \n  archive-crawler@yah=\r\noogroups.com&lt;BR&gt;Sent: Tuesday, April 08, 2003 11:04 \n  AM&lt;BR&gt;Subject: [arch=\r\nive-crawler] Status !!&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Gordon,&lt;BR&gt;&lt;BR&gt;I am \n  presently working =\r\non the SEDA socket overhead determination work. I will get \n  the results i=\r\nn the next two days. Some initial&lt;BR&gt;insights into it are&lt;BR&gt;- \n  Oceanstor=\r\ne manages both Tx and Rx in a single stage.&lt;BR&gt;- It just holds the \n  respo=\r\nnses in memory only. It does not write into tmp files if they are \n  huge.&lt;=\r\nBR&gt;- TCP response reordering is done by using the \n  seda.sandStorm.lib.aSo=\r\ncket.aSocketInputStream class which reorders packets \n  according&lt;BR&gt;to the=\r\n ATcpInPacket sequence number.&lt;BR&gt;&lt;BR&gt;The test that will be \n  done :&lt;BR&gt;- =\r\nPort the downloader code ( which we had written earlier during the \n  java =\r\nnio performance tests ) to SEDA framework and use the&lt;BR&gt;OceanStore \n  libr=\r\nary for HTTP fetching. The same tests that we did for the downloader will \n=\r\n  be repeated in this oceanstore setup. We&lt;BR&gt;are removing some oceanstore =\r\ncode \n  to make it similar. The result of this test would tell us the perce=\r\nntage of \n  overhead imposed by&lt;BR&gt;the SEDA framework.&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;We are al=\r\nso done with \n  the JAnt packaging scripts. It uses the present CVS structu=\r\nre itself. I shall \n  create the proposed CVS&lt;BR&gt;structure after you approv=\r\ne it. Today we have put \n  the cronjob for testing the web hosting part of =\r\nnightly builds. We shall \n  enable it&lt;BR&gt;for all tomorrow. As of now, only =\r\nthe last nightly build will be \n  available for download. More changes need=\r\n to be made for hosting&lt;BR&gt;every \n  nightly build of a week.&lt;BR&gt;&lt;BR&gt;Thanks,=\r\n&lt;BR&gt;Reddy&lt;BR&gt;&lt;BR&gt;Yahoo! Groups \n  Sponsor&lt;BR&gt;ADVERTISEMENT&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;=\r\nBR&gt;To unsubscribe from this group, \n  send an email \n  to:&lt;BR&gt;archive-crawl=\r\ner-unsubscribe@yahoogroups.com&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Your use of \n  Yahoo! Groups =\r\nis subject to the Yahoo! Terms of Service.&lt;BR&gt;&lt;BR&gt;&lt;/TT&gt;&lt;BR&gt;&lt;BR&gt;&lt;TT&gt;To \n  un=\r\nsubscribe from this group, send an email \n  to:&lt;BR&gt;archive-crawler-unsubscr=\r\nibe@yahoogroups.com&lt;BR&gt;&lt;BR&gt;&lt;/TT&gt;&lt;BR&gt;&lt;BR&gt;&lt;TT&gt;Your \n  use of Yahoo! Groups is=\r\n subject to the &lt;A \n  href=3D&quot;http://docs.yahoo.com/info/terms/&quot;&gt;Yahoo! Ter=\r\nms of Service&lt;/A&gt;.&lt;/TT&gt; \n&lt;BR&gt;&lt;/BLOCKQUOTE&gt;&lt;/BODY&gt;&lt;/HTML&gt;\n\r\n------=_NextPart_000_0334_01C2FFC3.C1A58130--\r\n\n"}}