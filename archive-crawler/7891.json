{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"VjQI5-vRyFx9RG85JjZzxgHPvEFuv3WgXBCF_1F0co_uet-y35WP0SBrD9lxoYVkOAinb6R336qGxQWcy_GOMpTwuuBcPFs","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] Re: Can get only the first record from a gzipped warc file","postDate":"1357591783","msgId":7891,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDUwRUIzNEU3LjgwNzAzMDZAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGtjZWtxYStvMjdzQGVHcm91cHMuY29tPg==","referencesHeader":"PGtjZWtxYStvMjdzQGVHcm91cHMuY29tPg=="},"prevInTopic":7890,"nextInTopic":7904,"prevInTime":7890,"nextInTime":7892,"topicId":7886,"numMessagesInTopic":7,"msgSnippet":"Are you sure the JAR providing the ArchiveReader/etc classes came from a Heritrix 3.1.1 distribution? You ll have to look in the JIRA issue and related","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 97750 invoked from network); 7 Jan 2013 20:49:44 -0000\r\nX-Received: from unknown (98.137.34.44)\n  by m4.grp.sp2.yahoo.com with QMQP; 7 Jan 2013 20:49:44 -0000\r\nX-Received: from unknown (HELO relay03.pair.com) (209.68.5.17)\n  by mta1.grp.sp2.yahoo.com with SMTP; 7 Jan 2013 20:49:43 -0000\r\nX-Received: (qmail 23610 invoked by uid 0); 7 Jan 2013 20:49:42 -0000\r\nX-Received: from 70.36.143.102 (HELO silverbook.local) (70.36.143.102)\n  by relay03.pair.com with SMTP; 7 Jan 2013 20:49:42 -0000\r\nX-pair-Authenticated: 70.36.143.102\r\nMessage-ID: &lt;50EB34E7.8070306@...&gt;\r\nDate: Mon, 07 Jan 2013 12:49:43 -0800\r\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:17.0) Gecko/17.0 Thunderbird/17.0\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;kcekqa+o27s@...&gt;\r\nIn-Reply-To: &lt;kcekqa+o27s@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] Re: Can get only the first record from a gzipped\n warc file\r\nX-Yahoo-Group-Post: member; u=137285340; y=wYtrVKbteNbGeGTIwxiHjGxUB69zRwnfneHIQ0pkjIA-\r\nX-Yahoo-Profile: gojomo\r\n\r\nAre you sure the JAR providing the ArchiveReader/etc classes came from a \nHeritrix 3.1.1 distribution?\n\nYou&#39;ll have to look in the JIRA issue and related Sun/Oracle issues for \nall the gory details, but I would expect our old reader code to only \nwork with older JDKs, while our latest reader code (eg from Heritrix \n3.1.1) tries to work the same with old and new, by doing WARC GZIP \nreading via the (known-behavior-rather-than-JDK-version-varying) classes:\n\n   OpenJDK7GZIPInputStream\n   GZIPMembersInputStream\n\nIf you can make sure these are on the classpath of your reading code, \nand actually loaded during your reading, that would be a strong \nconfirmation there&#39;s still a problem in the other JDKs you list that \nneeds more investigation.\n\nSeparately, even though it&#39;s working for you, I always avoid using \nOpenJDK builds because at many times they&#39;ve lagged for fixes and \ntesting compared to the mainline builds. If only the OpenJDK 1.6.0_u24 \nversion is working for you, that&#39;s likely because it has similar \nbuggy-but-useful GZIP-member-at-a-time behavior, like the Sun pre \n1.6.0_u23 JDKs. That&#39;s what our old/original reader code relied upon, \nand that original code definitely breaks (per bug HER-1865) with all \nSun/Oracle JVMs beyond 6u23. (Thus, my strong suspicion the JARs you&#39;re \nactually loading the ArchiveReader/etc behavior from are pre-H3.1.1.)\n\n- Gordon\n\nOn 1/7/13 6:07 AM, melik216@... wrote:\n&gt; Hi.\n&gt;\n&gt; I tried the code with these JDKs:\n&gt;\n&gt; 1) 1.6.0_u26\n&gt; 2) 1.6.0_u38\n&gt; 3) 1.7.0_u10\n&gt; 4) OpenJDK 1.6.0_u24\n&gt;\n&gt; I can iterate the records only with OpenJDK. I was expecting to get it work with 1.6.0_u38 and 1.7.0_u10.\n&gt;\n&gt; Any comments on this?\n&gt;\n&gt; Regards.\n&gt;\n&gt; Melik\n&gt;\n&gt;\n&gt; --- In archive-crawler@yahoogroups.com, &quot;melik216@...&quot;  wrote:\n&gt;&gt;\n&gt;&gt; Gordon, thank you for the prompt reply.\n&gt;&gt;\n&gt;&gt; I am using Heritrix 3.1.1 jars and java 1.6.0_u26. I gave it a try with openjdk, and it worked. It is probably because of the issue you mentioned.\n&gt;&gt;\n&gt;&gt; Melik\n&gt;&gt;\n&gt;&gt; --- In archive-crawler@yahoogroups.com, Gordon Mohr  wrote:\n&gt;&gt;&gt;\n&gt;&gt;&gt; You might be running into some aspect of this issue:\n&gt;&gt;&gt;\n&gt;&gt;&gt; https://webarchive.jira.com/browse/HER-1865\n&gt;&gt;&gt;\n&gt;&gt;&gt; For your example reading code, is it using both:\n&gt;&gt;&gt;\n&gt;&gt;&gt; (1) A recent JDK (say beyond 1.6.0_u30)?\n&gt;&gt;&gt;\n&gt;&gt;&gt; (2) The ArchiveReader/ArchiveRecord code from the Heritrix 3.1.1 JARs?\n&gt;&gt;&gt;\n&gt;&gt;&gt; If not, please try that and see if it helps you iterate over individual\n&gt;&gt;&gt; records as expected.\n&gt;&gt;&gt;\n&gt;&gt;&gt; - Gordon\n&gt;&gt;&gt;\n&gt;&gt;&gt; On 1/4/13 6:07 AM, melik216@ wrote:\n&gt;&gt;&gt;&gt; Hi,\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; I am porting my app from Heritrix 1.14.x to 3.1.1. I came across a strange behaviour while trying to read the warc files. Here is the code snippet:\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; ArchiveReader reader = WARCReaderFactory.get(arcFile);\n&gt;&gt;&gt;&gt; Iterator iter = reader.iterator();\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; int count = 1;\n&gt;&gt;&gt;&gt; while (iter.hasNext()) {\n&gt;&gt;&gt;&gt;     ArchiveRecord arcRecord = (ArchiveRecord) iter.next();\n&gt;&gt;&gt;&gt;     count++;\n&gt;&gt;&gt;&gt; }\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; I can get only one record (only WARC-Type: warcinfo) if the warc file is gzipped. If I decompress the file and try the same code on the decompressed file, I can read all of the records.\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; What am I missing here?\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; Thanks in advance.\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; ------------------------------------\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; Yahoo! Groups Links\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;\n&gt;\n&gt;\n&gt;\n&gt; ------------------------------------\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n\n"}}