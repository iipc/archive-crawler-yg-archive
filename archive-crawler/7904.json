{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":548313762,"authorName":"melik216@ymail.com","from":"&quot;melik216@...&quot; &lt;melik216@...&gt;","profile":"melik216@ymail.com","replyTo":"LIST","senderId":"PulXaquxjr8b7rMqb_rLXbr8KLjb-elULjYtgXfF41TlmI9glxdoDWDq2-qusKyEwy7CpvDjscVxkWhNU-xO0PPQy914iaGm4HpkYQeW1_g","spamInfo":{"isSpam":false,"reason":"3"},"subject":"Re: Can get only the first record from a gzipped warc file","postDate":"1357899562","msgId":7904,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PGtjb292YSs2MzFnQGVHcm91cHMuY29tPg==","inReplyToHeader":"PDUwRUIzNEU3LjgwNzAzMDZAYXJjaGl2ZS5vcmc+"},"prevInTopic":7891,"nextInTopic":0,"prevInTime":7903,"nextInTime":7905,"topicId":7886,"numMessagesInTopic":7,"msgSnippet":"If we are talking about heritrix-commons-3.1.1.jar, yes, it is from Heritrix 3.1.1 distribution. But I will check in depth asap. -Melik","rawEmail":"Return-Path: &lt;melik216@...&gt;\r\nX-Sender: melik216@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 20362 invoked from network); 11 Jan 2013 10:19:22 -0000\r\nX-Received: from unknown (98.137.35.162)\n  by m13.grp.sp2.yahoo.com with QMQP; 11 Jan 2013 10:19:22 -0000\r\nX-Received: from unknown (HELO ng13-vm5.bullet.mail.gq1.yahoo.com) (98.136.219.161)\n  by mta6.grp.sp2.yahoo.com with SMTP; 11 Jan 2013 10:19:22 -0000\r\nX-Received: from [98.137.0.82] by ng13.bullet.mail.gq1.yahoo.com with NNFMP; 11 Jan 2013 10:19:22 -0000\r\nX-Received: from [98.137.34.119] by tg2.bullet.mail.gq1.yahoo.com with NNFMP; 11 Jan 2013 10:19:22 -0000\r\nDate: Fri, 11 Jan 2013 10:19:22 -0000\r\nTo: archive-crawler@yahoogroups.com\r\nMessage-ID: &lt;kcoova+631g@...&gt;\r\nIn-Reply-To: &lt;50EB34E7.8070306@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 2:3:4:0:0\r\nFrom: &quot;melik216@...&quot; &lt;melik216@...&gt;\r\nSubject: Re: Can get only the first record from a gzipped warc file\r\nX-Yahoo-Group-Post: member; u=548313762; y=SKRX_kup--eVEm4vmKpucz3qtj-tr62IzXqzZeQAc8QF6MfF4U0yuUBce-8p\r\nX-Yahoo-Profile: melik216@...\r\n\r\nIf we are talking about heritrix-commons-3.1.1.jar, yes, it is from Heritri=\r\nx 3.1.1 distribution.\n\nBut I will check in depth asap.\n\n-Melik\n\n--- In arch=\r\nive-crawler@yahoogroups.com, Gordon Mohr  wrote:\n&gt;\n&gt; Are you sure the JAR p=\r\nroviding the ArchiveReader/etc classes came from a \n&gt; Heritrix 3.1.1 distri=\r\nbution?\n&gt; \n&gt; You&#39;ll have to look in the JIRA issue and related Sun/Oracle i=\r\nssues for \n&gt; all the gory details, but I would expect our old reader code t=\r\no only \n&gt; work with older JDKs, while our latest reader code (eg from Herit=\r\nrix \n&gt; 3.1.1) tries to work the same with old and new, by doing WARC GZIP \n=\r\n&gt; reading via the (known-behavior-rather-than-JDK-version-varying) classes:=\r\n\n&gt; \n&gt;    OpenJDK7GZIPInputStream\n&gt;    GZIPMembersInputStream\n&gt; \n&gt; If you ca=\r\nn make sure these are on the classpath of your reading code, \n&gt; and actuall=\r\ny loaded during your reading, that would be a strong \n&gt; confirmation there&#39;=\r\ns still a problem in the other JDKs you list that \n&gt; needs more investigati=\r\non.\n&gt; \n&gt; Separately, even though it&#39;s working for you, I always avoid using=\r\n \n&gt; OpenJDK builds because at many times they&#39;ve lagged for fixes and \n&gt; te=\r\nsting compared to the mainline builds. If only the OpenJDK 1.6.0_u24 \n&gt; ver=\r\nsion is working for you, that&#39;s likely because it has similar \n&gt; buggy-but-=\r\nuseful GZIP-member-at-a-time behavior, like the Sun pre \n&gt; 1.6.0_u23 JDKs. =\r\nThat&#39;s what our old/original reader code relied upon, \n&gt; and that original =\r\ncode definitely breaks (per bug HER-1865) with all \n&gt; Sun/Oracle JVMs beyon=\r\nd 6u23. (Thus, my strong suspicion the JARs you&#39;re \n&gt; actually loading the =\r\nArchiveReader/etc behavior from are pre-H3.1.1.)\n&gt; \n&gt; - Gordon\n&gt; \n&gt; On 1/7/=\r\n13 6:07 AM, melik216@... wrote:\n&gt; &gt; Hi.\n&gt; &gt;\n&gt; &gt; I tried the code with these=\r\n JDKs:\n&gt; &gt;\n&gt; &gt; 1) 1.6.0_u26\n&gt; &gt; 2) 1.6.0_u38\n&gt; &gt; 3) 1.7.0_u10\n&gt; &gt; 4) OpenJD=\r\nK 1.6.0_u24\n&gt; &gt;\n&gt; &gt; I can iterate the records only with OpenJDK. I was expe=\r\ncting to get it work with 1.6.0_u38 and 1.7.0_u10.\n&gt; &gt;\n&gt; &gt; Any comments on =\r\nthis?\n&gt; &gt;\n&gt; &gt; Regards.\n&gt; &gt;\n&gt; &gt; Melik\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; --- In archive-crawler@yah=\r\noogroups.com, &quot;melik216@&quot;  wrote:\n&gt; &gt;&gt;\n&gt; &gt;&gt; Gordon, thank you for the promp=\r\nt reply.\n&gt; &gt;&gt;\n&gt; &gt;&gt; I am using Heritrix 3.1.1 jars and java 1.6.0_u26. I gav=\r\ne it a try with openjdk, and it worked. It is probably because of the issue=\r\n you mentioned.\n&gt; &gt;&gt;\n&gt; &gt;&gt; Melik\n&gt; &gt;&gt;\n&gt; &gt;&gt; --- In archive-crawler@yahoogroup=\r\ns.com, Gordon Mohr  wrote:\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; You might be running into some aspec=\r\nt of this issue:\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; https://webarchive.jira.com/browse/HER-1865\n&gt; =\r\n&gt;&gt;&gt;\n&gt; &gt;&gt;&gt; For your example reading code, is it using both:\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; (1) =\r\nA recent JDK (say beyond 1.6.0_u30)?\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; (2) The ArchiveReader/Arch=\r\niveRecord code from the Heritrix 3.1.1 JARs?\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; If not, please try=\r\n that and see if it helps you iterate over individual\n&gt; &gt;&gt;&gt; records as expe=\r\ncted.\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; - Gordon\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; On 1/4/13 6:07 AM, melik216@ wrote:\n=\r\n&gt; &gt;&gt;&gt;&gt; Hi,\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt; I am porting my app from Heritrix 1.14.x to 3.1.1.=\r\n I came across a strange behaviour while trying to read the warc files. Her=\r\ne is the code snippet:\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt; ArchiveReader reader =3D WARCReaderFac=\r\ntory.get(arcFile);\n&gt; &gt;&gt;&gt;&gt; Iterator iter =3D reader.iterator();\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;=\r\n&gt; int count =3D 1;\n&gt; &gt;&gt;&gt;&gt; while (iter.hasNext()) {\n&gt; &gt;&gt;&gt;&gt;     ArchiveRecord=\r\n arcRecord =3D (ArchiveRecord) iter.next();\n&gt; &gt;&gt;&gt;&gt;     count++;\n&gt; &gt;&gt;&gt;&gt; }\n&gt; =\r\n&gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt; I can get only one record (only WARC-Type: warcinfo) if =\r\nthe warc file is gzipped. If I decompress the file and try the same code on=\r\n the decompressed file, I can read all of the records.\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt; What a=\r\nm I missing here?\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt; Thanks in advance.\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;=\r\n&gt;&gt;&gt; ------------------------------------\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt; Yahoo! Groups Links\n=\r\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; ---------------------------=\r\n---------\n&gt; &gt;\n&gt; &gt; Yahoo! Groups Links\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt;\n\n\n"}}