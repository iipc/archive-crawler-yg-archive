{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":171907534,"authorName":"James Casey","from":"James Casey &lt;me@...&gt;","profile":"awol_design","replyTo":"LIST","senderId":"DCPiy_sObKXkRnzBhrUfBgCHtCXPxgGY6-gcI8JscPG-9SHzqWYUXpOaF-wbHw_Gbbm5gWyhmPiXEL41GVaU0po6","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] bug in AbstractLongFPSet","postDate":"1074769598","msgId":255,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQwMEZBRUJFLjgwNTAyMDBAamFtZXNjLm5ldD4=","inReplyToHeader":"PDQwMEVGM0E5LjMwNTAxMDhAYXJjaGl2ZS5vcmc+","referencesHeader":"PDQwMEU5MkE2LjQwMjAzMDFAamFtZXNjLm5ldD4gPDQwMEVGM0E5LjMwNTAxMDhAYXJjaGl2ZS5vcmc+"},"prevInTopic":254,"nextInTopic":0,"prevInTime":254,"nextInTime":256,"topicId":250,"numMessagesInTopic":3,"msgSnippet":"... Excellent. Looks like the right fix. I got a bit confused by the bhaviour of LongFPSetCache.  It doesn t have same behaviour w.r.t. add() and count(),","rawEmail":"Return-Path: &lt;me@...&gt;\r\nX-Sender: me@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 57319 invoked from network); 22 Jan 2004 11:06:47 -0000\r\nReceived: from unknown (66.218.66.166)\n  by m20.grp.scd.yahoo.com with QMQP; 22 Jan 2004 11:06:47 -0000\r\nReceived: from unknown (HELO smtp3.cern.ch) (137.138.131.164)\n  by mta5.grp.scd.yahoo.com with SMTP; 22 Jan 2004 11:06:47 -0000\r\nReceived: from jamesc.net (pb-d-128-141-47-136.cern.ch [128.141.47.136])\n\tby smtp3.cern.ch (8.12.1-20030924/8.12.1) with ESMTP id i0MB6cYM011210;\n\tThu, 22 Jan 2004 12:06:38 +0100 (MET)\r\nX-Authentication-Warning: smtp3.cern.ch: Host pb-d-128-141-47-136.cern.ch [128.141.47.136] claimed to be jamesc.net\r\nMessage-ID: &lt;400FAEBE.8050200@...&gt;\r\nDate: Thu, 22 Jan 2004 12:06:38 +0100\r\nOrganization: jamesc.net\r\nUser-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.4) Gecko/20030703\r\nX-Accept-Language: en-us, en\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com, gojomo@...\r\nReferences: &lt;400E92A6.4020301@...&gt; &lt;400EF3A9.3050108@...&gt;\r\nIn-Reply-To: &lt;400EF3A9.3050108@...&gt;\r\nContent-Type: multipart/mixed;\n boundary=&quot;------------070900070906050400020005&quot;\r\nX-eGroups-Remote-IP: 137.138.131.164\r\nFrom: James Casey &lt;me@...&gt;\r\nSubject: Re: [archive-crawler] bug in AbstractLongFPSet\r\nX-Yahoo-Group-Post: member; u=171907534\r\nX-Yahoo-Profile: awol_design\r\n\r\n\r\n--------------070900070906050400020005\r\nContent-Type: text/plain; charset=us-ascii; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\n\r\n\n\nGordon Mohr wrote:\n&gt; Great bug find!\n&gt; \n&gt; My preferred fix is:\n&gt; \n&gt;   (1) Avoid incrementing &#39;count&#39; until the value is\n&gt;       actually added (after the makeSpace() call)\n&gt;   (2) Use &#39;count+1&#39; as the test value for whether the\n&gt;       underlying storage array needs space made.\n&gt; \n&gt; I&#39;ve committed the fix, and bumped up the NUM of\n&gt; adds/removes to test in MemLongFPSetTest to exercise\n&gt; the old problem and new fix.\n&gt; \n&gt; The new add() method is appended below.\n&gt; \nExcellent. Looks like the right fix.\n\nI got a bit confused by the bhaviour of LongFPSetCache.  It doesn&#39;t have \nsame behaviour w.r.t. add() and count(), since it drops entries out of \nthe buffer, so it never grows.\n\nTherefore the testCount() test is just plain wrong for LongFPSetCache \n(but should be correct for the other disk-based subclasses).  I&#39;ve \nattached a patch that overrides the test in LongFPSetCacheTest, and \ntests the specific caching behaviour for it (i.e. add increments the \ncount until you reach the maximum, and then it doesn&#39;t)\n\nAlso I document in the LongFPSet that adding a fingerprint does not \nnecessarily increment the count.\n\n&gt; Your hierarchy of tests is laid out very well to\n&gt; cover the class hierarchy. Thanks!\n&gt; \nNo problem, I&#39;m glad it helps.\n\ncheers,\n\njames.\n\r\n--------------070900070906050400020005\r\nContent-Type: text/plain;\n name=&quot;testCount.patch&quot;\r\nContent-Disposition: inline;\n filename=&quot;testCount.patch&quot;\r\n\r\n[ Attachment content not displayed ]\r\n--------------070900070906050400020005--\r\n\n"}}