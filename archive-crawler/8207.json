{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":548583409,"authorName":"Jackson, Andrew","from":"&quot;Jackson, Andrew&quot; &lt;andrew.jackson@...&gt;","profile":"jacksonandrew384","replyTo":"LIST","senderId":"jrdKLS9sUXioZko5cBmie2ncjPnybPr08lJvTy0Fmeb6BtZsMd_XFmEDBNAbSGB-Hnm_6rKONF745Tr3Ik6fz7r1sGw752J4rky8_WAaFg","spamInfo":{"isSpam":false,"reason":"12"},"subject":"RE: [archive-crawler] Intermittent issue running Heritrix with Java 7","postDate":"1373550214","msgId":8207,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDc0Qzk3RTdERjVBNzc4NEQ5OTcyMTdGRjc1RDEyMTY2MTE4M0E2NjRAdzJrMy1ic3BleDE+"},"prevInTopic":8206,"nextInTopic":8208,"prevInTime":8206,"nextInTime":8208,"topicId":8206,"numMessagesInTopic":15,"msgSnippet":"Hi Kris, Bit of a long shot, but could you try running under Java 7 but also setting it up to use IPv4 using: -Djava.net.preferIPv4Stack=true I ve seen some","rawEmail":"Return-Path: &lt;Andrew.Jackson@...&gt;\r\nX-Sender: Andrew.Jackson@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 91782 invoked by uid 102); 11 Jul 2013 13:43:36 -0000\r\nX-Received: from unknown (HELO mtaq1.grp.bf1.yahoo.com) (10.193.84.32)\n  by m4.grp.bf1.yahoo.com with SMTP; 11 Jul 2013 13:43:36 -0000\r\nX-Received: (qmail 3795 invoked from network); 11 Jul 2013 13:43:36 -0000\r\nX-Received: from unknown (HELO w2k3-bspex1.bl.uk) (194.66.236.30)\n  by mtaq1.grp.bf1.yahoo.com with SMTP; 11 Jul 2013 13:43:36 -0000\r\nX-MimeOLE: Produced By Microsoft Exchange V6.5\r\nContent-class: urn:content-classes:message\r\nMIME-Version: 1.0\r\nContent-Type: multipart/alternative;\n\tboundary=&quot;----_=_NextPart_001_01CE7E3C.A35B5769&quot;\r\nDate: Thu, 11 Jul 2013 14:43:34 +0100\r\nMessage-ID: &lt;74C97E7DF5A7784D997217FF75D121661183A664@w2k3-bspex1&gt;\r\nX-MS-Has-Attach: \r\nX-MS-TNEF-Correlator: \r\nThread-Topic: Intermittent issue running Heritrix with Java 7\r\nthread-index: Ac59hHGg2/uan2q8Qx2HXU0sKl34RAAtmpqQ\r\nTo: &lt;archive-crawler@yahoogroups.com&gt;\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: &quot;Jackson, Andrew&quot; &lt;andrew.jackson@...&gt;\r\nSubject: RE: [archive-crawler] Intermittent issue running Heritrix with Java 7\r\nX-Yahoo-Group-Post: member; u=548583409; y=4XwPwmGxNjUsTCi2-4WdgvUanczLVnvM9KYkg8W8_qlL2lgIFQzIgFcSqA\r\nX-Yahoo-Profile: jacksonandrew384\r\n\r\n\r\n------_=_NextPart_001_01CE7E3C.A35B5769\r\nContent-Type: text/plain;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nHi Kris,\n\n \n\nBit of a long shot, but could you try running under Java 7 but=\r\n also setting it up to use IPv4 using:\n\n \n\n-Djava.net.preferIPv4Stack=3Dtru=\r\ne\n\n \n\nI&#39;ve seen some notes about possible issues with the Java 7 IPv6 imple=\r\nmentation, but it&#39;s a bit tenuous.\n\n \n\nAre the affected URLs consistently a=\r\nssociated with the same host, or does the problem appear for totally differ=\r\nent URLs each time?\n\n \n\nDigging into the code, it seems that error code is =\r\nonly raised here:\n\nhttps://github.com/internetarchive/heritrix3/blob/master=\r\n/modules/src/main/java/org/archive/modules/fetcher/FetchHTTP.java#L887 \n\n \n=\r\n\nWhich is only called from here:\n\nhttps://github.com/internetarchive/heritr=\r\nix3/blob/master/modules/src/main/java/org/archive/modules/fetcher/FetchHTTP=\r\n.java#L663\n\n \n\ni.e. under Linux, this should only happen when HTTPClient.ex=\r\necute throws and IOException, variations of which are listed on this page:\n=\r\n\n \n\nhttp://hc.apache.org/httpclient-legacy/exception-handling.html#Transpor=\r\nt_exceptions\n\n \n\nIt looks like H3 is swallowing the original exception, mak=\r\ning it difficult to debug as it&#39;s not clear what kind of IOException is bei=\r\nng thrown.\n\n \n\nHope that helps.\n\n \n\nAndy\n\n \n\nFrom: archive-crawler@yahoogro=\r\nups.com [mailto:archive-crawler@yahoogroups.com] On Behalf Of Kristinn Sigu=\r\nr=F0sson\nSent: 10 July 2013 16:56\nTo: archive-crawler@yahoogroups.com\nSubje=\r\nct: [archive-crawler] Intermittent issue running Heritrix with Java 7\n\n \n\n =\r\n \n\nI was running a broad crawl (20+ thousand seeds) using the latest SNAPSH=\r\nOT build of Heritrix (3.1.2-20130625) when I noticed that one of our big bl=\r\nogging site wasn&#39;t making much progress.\n\nAs it turned out it was making in=\r\ntermittent progress and then hitting large stretches of time where every fe=\r\ntch attempt ended with a -2 (connect fail).\n\nMy initial thought was that we=\r\n were being blocked by the website, but that did not turn out to be the cas=\r\ne. Additional inspection of the crawl log revealed that during a 20+ millio=\r\nn URL crawl over 14 thousand URLs had errored out with a -2. I compared thi=\r\ns with our most recent comparable crawl and for that the number was 60 URLs=\r\n out of 40+ million. Clearly there was a problem with the crawler.\n\nWhile s=\r\nome domains were affect and other not, I could not deduce any pattern as to=\r\n what domains or URLs this affected.\n\nMy second assumption then was that th=\r\nis was due to me running a SNAPSHOT build. So I put 3.1.0-RC1 (which I had =\r\nused for the previous crawl) into play on the same machine. The issue reocc=\r\nurred. -2 errors began showing up in the crawl log about 2 hours in (exactl=\r\ny when the 500 second wait times between 15 retries period had passed). Thi=\r\ns is not a regression in Heritrix.\n\nThat left two variables. The fact that =\r\nI was running on new hardware and that I had upgraded from Java 6 to 7 (1.7=\r\n.0_25-b15 to be exact).\n\nI then installed Java 1.6.0-b105 and tried the cra=\r\nwl a third time (again using the SNAPSHOT build), shortening the retry wait=\r\n interval from 500 seconds to 50. I figured this could only make the issue =\r\nworse and would mean that it could manifest in as little as 15 minutes, ins=\r\ntead of 2 hours.\n\nNow 5.5 hours in there are no sign of URLs with inexplica=\r\nble -2 status codes. It seems the issue IS related to the Java version.\n\nHa=\r\ns anyone encountered this? Any ideas on cause or how this could be remedied=\r\n? For now, just using an older version of Java will fix the issue, but that=\r\n isn&#39;t a long term solution.\n\n- Kris\n\n-------------------------------------=\r\n---------------------\nLandsb=F3kasafn =CDslands - H=E1sk=F3lab=F3kasafn | A=\r\nrngr=EDmsg=F6tu 3 - 107 Reykjav=EDk\nS=EDmi/Tel: +354 5255600 | www.landsbok=\r\nasafn.is\n----------------------------------------------------------\nfyrirva=\r\nri/disclaimer - http://fyrirvari.landsbokasafn.is\n\n\n\n\r\n------_=_NextPart_001_01CE7E3C.A35B5769\r\nContent-Type: text/html;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;html xmlns:v=3D&quot;urn:schemas-microsoft-com:vml&quot; xmlns:o=3D&quot;urn:schemas-micr=\r\nosoft-com:office:office&quot; xmlns:w=3D&quot;urn:schemas-microsoft-com:office:word&quot; =\r\nxmlns:m=3D&quot;http://schemas.microsoft.com/office/2004/12/omml&quot; xmlns=3D&quot;http:=\r\n//www.w3.org/TR/REC-html40&quot;&gt;&lt;head&gt;&lt;meta http-equiv=3DContent-Type content=\r\n=3D&quot;text/html; charset=3Diso-8859-1&quot;&gt;&lt;meta name=3DGenerator content=3D&quot;Micr=\r\nosoft Word 14 (filtered medium)&quot;&gt;&lt;!--[if !mso]&gt;&lt;style&gt;v&#92;:* {behavior:url(#d=\r\nefault#VML);}\no&#92;:* {behavior:url(#default#VML);}\nw&#92;:* {behavior:url(#defaul=\r\nt#VML);}\n.shape {behavior:url(#default#VML);}\n&lt;/style&gt;&lt;![endif]--&gt;&lt;style&gt;&lt;!=\r\n--\n/* Font Definitions */\n@font-face\n\t{font-family:Wingdings;\n\tpanose-1:5 0=\r\n 0 0 0 0 0 0 0 0;}\n@font-face\n\t{font-family:Wingdings;\n\tpanose-1:5 0 0 0 0 =\r\n0 0 0 0 0;}\n@font-face\n\t{font-family:Calibri;\n\tpanose-1:2 15 5 2 2 2 4 3 2 =\r\n4;}\n@font-face\n\t{font-family:Tahoma;\n\tpanose-1:2 11 6 4 3 5 4 4 2 4;}\n@font=\r\n-face\n\t{font-family:Verdana;\n\tpanose-1:2 11 6 4 3 5 4 4 2 4;}\n@font-face\n\t{=\r\nfont-family:Consolas;\n\tpanose-1:2 11 6 9 2 2 4 3 2 4;}\n/* Style Definitions=\r\n */\np.MsoNormal, li.MsoNormal, div.MsoNormal\n\t{margin:0cm;\n\tmargin-bottom:.=\r\n0001pt;\n\tfont-size:12.0pt;\n\tfont-family:&quot;Times New Roman&quot;,&quot;serif&quot;;}\na:link,=\r\n span.MsoHyperlink\n\t{mso-style-priority:99;\n\tcolor:blue;\n\ttext-decoration:u=\r\nnderline;}\na:visited, span.MsoHyperlinkFollowed\n\t{mso-style-priority:99;\n\tc=\r\nolor:purple;\n\ttext-decoration:underline;}\np\n\t{mso-style-priority:99;\n\tmso-m=\r\nargin-top-alt:auto;\n\tmargin-right:0cm;\n\tmso-margin-bottom-alt:auto;\n\tmargin=\r\n-left:0cm;\n\tfont-size:12.0pt;\n\tfont-family:&quot;Times New Roman&quot;,&quot;serif&quot;;}\ncode=\r\n\n\t{mso-style-priority:99;\n\tfont-family:&quot;Courier New&quot;;}\npre\n\t{mso-style-prio=\r\nrity:99;\n\tmso-style-link:&quot;HTML Preformatted Char&quot;;\n\tmargin:0cm;\n\tmargin-bot=\r\ntom:.0001pt;\n\tfont-size:10.0pt;\n\tfont-family:&quot;Courier New&quot;;}\ntt\n\t{mso-style=\r\n-priority:99;\n\tfont-family:&quot;Courier New&quot;;}\nspan.cat\n\t{mso-style-name:cat;}\n=\r\nspan.ct\n\t{mso-style-name:ct;}\nspan.HTMLPreformattedChar\n\t{mso-style-name:&quot;H=\r\nTML Preformatted Char&quot;;\n\tmso-style-priority:99;\n\tmso-style-link:&quot;HTML Prefo=\r\nrmatted&quot;;\n\tfont-family:Consolas;}\np.attach, li.attach, div.attach\n\t{mso-sty=\r\nle-name:attach;\n\tmso-margin-top-alt:auto;\n\tmargin-right:0cm;\n\tmso-margin-bo=\r\nttom-alt:auto;\n\tmargin-left:0cm;\n\tfont-size:9.0pt;\n\tfont-family:&quot;Arial&quot;,&quot;sa=\r\nns-serif&quot;;}\np.bold, li.bold, div.bold\n\t{mso-style-name:bold;\n\tmso-margin-to=\r\np-alt:auto;\n\tmargin-right:0cm;\n\tmso-margin-bottom-alt:auto;\n\tmargin-left:0c=\r\nm;\n\tfont-size:10.0pt;\n\tfont-family:&quot;Arial&quot;,&quot;sans-serif&quot;;\n\tfont-weight:bold;=\r\n}\np.green, li.green, div.green\n\t{mso-style-name:green;\n\tmso-margin-top-alt:=\r\nauto;\n\tmargin-right:0cm;\n\tmso-margin-bottom-alt:auto;\n\tmargin-left:0cm;\n\tfo=\r\nnt-size:12.0pt;\n\tfont-family:&quot;Times New Roman&quot;,&quot;serif&quot;;\n\tcolor:#628C2A;}\np.=\r\nreplbq, li.replbq, div.replbq\n\t{mso-style-name:replbq;\n\tmargin:3.0pt;\n\tfont=\r\n-size:12.0pt;\n\tfont-family:&quot;Times New Roman&quot;,&quot;serif&quot;;}\np.ad, li.ad, div.ad\n=\r\n\t{mso-style-name:ad;\n\tmso-margin-top-alt:auto;\n\tmargin-right:0cm;\n\tmso-marg=\r\nin-bottom-alt:auto;\n\tmargin-left:0cm;\n\tfont-size:12.0pt;\n\tfont-family:&quot;Time=\r\ns New Roman&quot;,&quot;serif&quot;;}\np.underline, li.underline, div.underline\n\t{mso-style=\r\n-name:underline;\n\tmso-margin-top-alt:auto;\n\tmargin-right:0cm;\n\tmso-margin-b=\r\nottom-alt:auto;\n\tmargin-left:0cm;\n\tfont-size:12.0pt;\n\tfont-family:&quot;Times Ne=\r\nw Roman&quot;,&quot;serif&quot;;}\nspan.yshortcuts\n\t{mso-style-name:yshortcuts;}\np.ad1, li.=\r\nad1, div.ad1\n\t{mso-style-name:ad1;\n\tmso-margin-top-alt:auto;\n\tmargin-right:=\r\n0cm;\n\tmso-margin-bottom-alt:auto;\n\tmargin-left:0cm;\n\tfont-size:12.0pt;\n\tfon=\r\nt-family:&quot;Times New Roman&quot;,&quot;serif&quot;;}\np.ad2, li.ad2, div.ad2\n\t{mso-style-nam=\r\ne:ad2;\n\tmso-margin-top-alt:auto;\n\tmargin-right:0cm;\n\tmargin-bottom:7.5pt;\n\t=\r\nmargin-left:0cm;\n\tfont-size:12.0pt;\n\tfont-family:&quot;Times New Roman&quot;,&quot;serif&quot;;=\r\n}\np.underline1, li.underline1, div.underline1\n\t{mso-style-name:underline1;\n=\r\n\tmso-margin-top-alt:auto;\n\tmargin-right:0cm;\n\tmso-margin-bottom-alt:auto;\n\t=\r\nmargin-left:0cm;\n\tfont-size:12.0pt;\n\tfont-family:&quot;Times New Roman&quot;,&quot;serif&quot;;=\r\n\n\ttext-decoration:underline;}\nspan.yshortcuts1\n\t{mso-style-name:yshortcuts1=\r\n;\n\tfont-family:&quot;Verdana&quot;,&quot;sans-serif&quot;;\n\tfont-weight:bold;}\nspan.yshortcuts2=\r\n\n\t{mso-style-name:yshortcuts2;\n\tfont-family:&quot;Verdana&quot;,&quot;sans-serif&quot;;\n\tfont-w=\r\neight:normal;}\nspan.EmailStyle36\n\t{mso-style-type:personal-reply;\n\tfont-fam=\r\nily:&quot;Calibri&quot;,&quot;sans-serif&quot;;\n\tcolor:#1F497D;}\n.MsoChpDefault\n\t{mso-style-typ=\r\ne:export-only;\n\tfont-size:10.0pt;}\n@page WordSection1\n\t{size:612.0pt 792.0p=\r\nt;\n\tmargin:72.0pt 72.0pt 72.0pt 72.0pt;}\ndiv.WordSection1\n\t{page:WordSectio=\r\nn1;}\n/* List Definitions */\n@list l0\n\t{mso-list-id:2088379060;\n\tmso-list-te=\r\nmplate-ids:584586180;}\n@list l0:level1\n\t{mso-level-number-format:bullet;\n\tm=\r\nso-level-text:&#92;F0B7;\n\tmso-level-tab-stop:36.0pt;\n\tmso-level-number-position=\r\n:left;\n\ttext-indent:-18.0pt;\n\tmso-ansi-font-size:10.0pt;\n\tfont-family:Symbo=\r\nl;}\n@list l0:level2\n\t{mso-level-number-format:bullet;\n\tmso-level-text:o;\n\tm=\r\nso-level-tab-stop:72.0pt;\n\tmso-level-number-position:left;\n\ttext-indent:-18=\r\n.0pt;\n\tmso-ansi-font-size:10.0pt;\n\tfont-family:&quot;Courier New&quot;;\n\tmso-bidi-fon=\r\nt-family:&quot;Times New Roman&quot;;}\n@list l0:level3\n\t{mso-level-number-format:bull=\r\net;\n\tmso-level-text:&#92;F0A7;\n\tmso-level-tab-stop:108.0pt;\n\tmso-level-number-p=\r\nosition:left;\n\ttext-indent:-18.0pt;\n\tmso-ansi-font-size:10.0pt;\n\tfont-famil=\r\ny:Wingdings;}\n@list l0:level4\n\t{mso-level-number-format:bullet;\n\tmso-level-=\r\ntext:&#92;F0A7;\n\tmso-level-tab-stop:144.0pt;\n\tmso-level-number-position:left;\n\t=\r\ntext-indent:-18.0pt;\n\tmso-ansi-font-size:10.0pt;\n\tfont-family:Wingdings;}\n@=\r\nlist l0:level5\n\t{mso-level-number-format:bullet;\n\tmso-level-text:&#92;F0A7;\n\tms=\r\no-level-tab-stop:180.0pt;\n\tmso-level-number-position:left;\n\ttext-indent:-18=\r\n.0pt;\n\tmso-ansi-font-size:10.0pt;\n\tfont-family:Wingdings;}\n@list l0:level6\n=\r\n\t{mso-level-number-format:bullet;\n\tmso-level-text:&#92;F0A7;\n\tmso-level-tab-sto=\r\np:216.0pt;\n\tmso-level-number-position:left;\n\ttext-indent:-18.0pt;\n\tmso-ansi=\r\n-font-size:10.0pt;\n\tfont-family:Wingdings;}\n@list l0:level7\n\t{mso-level-num=\r\nber-format:bullet;\n\tmso-level-text:&#92;F0A7;\n\tmso-level-tab-stop:252.0pt;\n\tmso=\r\n-level-number-position:left;\n\ttext-indent:-18.0pt;\n\tmso-ansi-font-size:10.0=\r\npt;\n\tfont-family:Wingdings;}\n@list l0:level8\n\t{mso-level-number-format:bull=\r\net;\n\tmso-level-text:&#92;F0A7;\n\tmso-level-tab-stop:288.0pt;\n\tmso-level-number-p=\r\nosition:left;\n\ttext-indent:-18.0pt;\n\tmso-ansi-font-size:10.0pt;\n\tfont-famil=\r\ny:Wingdings;}\n@list l0:level9\n\t{mso-level-number-format:bullet;\n\tmso-level-=\r\ntext:&#92;F0A7;\n\tmso-level-tab-stop:324.0pt;\n\tmso-level-number-position:left;\n\t=\r\ntext-indent:-18.0pt;\n\tmso-ansi-font-size:10.0pt;\n\tfont-family:Wingdings;}\no=\r\nl\n\t{margin-bottom:0cm;}\nul\n\t{margin-bottom:0cm;}\n--&gt;&lt;/style&gt;&lt;!--[if gte mso=\r\n 9]&gt;&lt;xml&gt;\n&lt;o:shapedefaults v:ext=3D&quot;edit&quot; spidmax=3D&quot;1026&quot; /&gt;\n&lt;/xml&gt;&lt;![endi=\r\nf]--&gt;&lt;!--[if gte mso 9]&gt;&lt;xml&gt;\n&lt;o:shapelayout v:ext=3D&quot;edit&quot;&gt;\n&lt;o:idmap v:ext=\r\n=3D&quot;edit&quot; data=3D&quot;1&quot; /&gt;\n&lt;/o:shapelayout&gt;&lt;/xml&gt;&lt;![endif]--&gt;&lt;/head&gt;&lt;body bgco=\r\nlor=3Dwhite lang=3DEN-GB link=3Dblue vlink=3Dpurple&gt;&lt;div class=3DWordSectio=\r\nn1&gt;&lt;p class=3DMsoNormal&gt;&lt;span style=3D&#39;font-size:11.0pt;font-family:&quot;Calibr=\r\ni&quot;,&quot;sans-serif&quot;;color:#1F497D&#39;&gt;Hi Kris,&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=3DMso=\r\nNormal&gt;&lt;span style=3D&#39;font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;c=\r\nolor:#1F497D&#39;&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=3DMsoNormal&gt;&lt;span style=\r\n=3D&#39;font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D&#39;&gt;Bit =\r\nof a long shot, but could you try running under Java 7 but also setting it =\r\nup to use IPv4 using:&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=3DMsoNormal&gt;&lt;span style=\r\n=3D&#39;font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D&#39;&gt;&lt;o:p=\r\n&gt;&nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=3DMsoNormal&gt;&lt;span style=3D&#39;font-size:11.0p=\r\nt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D&#39;&gt;-Djava.net.preferIPv4St=\r\nack=3Dtrue&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=3DMsoNormal&gt;&lt;span style=3D&#39;font-si=\r\nze:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D&#39;&gt;&lt;o:p&gt;&nbsp;&lt;/o:=\r\np&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=3DMsoNormal&gt;&lt;span style=3D&#39;font-size:11.0pt;font-fami=\r\nly:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D&#39;&gt;I&#8217;ve seen some notes about p=\r\nossible issues with the Java 7 IPv6 implementation, but it&#8217;s a bit te=\r\nnuous.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=3DMsoNormal&gt;&lt;span style=3D&#39;font-size:1=\r\n1.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D&#39;&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/=\r\nspan&gt;&lt;/p&gt;&lt;p class=3DMsoNormal&gt;&lt;span style=3D&#39;font-size:11.0pt;font-family:&quot;=\r\nCalibri&quot;,&quot;sans-serif&quot;;color:#1F497D&#39;&gt;Are the affected URLs consistently ass=\r\nociated with the same host, or does the problem appear for totally differen=\r\nt URLs each time?&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=3DMsoNormal&gt;&lt;span style=3D&#39;=\r\nfont-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D&#39;&gt;&lt;o:p&gt;&nb=\r\nsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=3DMsoNormal&gt;&lt;span style=3D&#39;font-size:11.0pt;fo=\r\nnt-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D&#39;&gt;Digging into the code, it s=\r\neems that error code is only raised here:&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=3DM=\r\nsoNormal&gt;&lt;span style=3D&#39;font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;=\r\n;color:#1F497D&#39;&gt;&lt;a href=3D&quot;https://github.com/internetarchive/heritrix3/blo=\r\nb/master/modules/src/main/java/org/archive/modules/fetcher/FetchHTTP.java#L=\r\n887&quot;&gt;https://github.com/internetarchive/heritrix3/blob/master/modules/src/m=\r\nain/java/org/archive/modules/fetcher/FetchHTTP.java#L887&lt;/a&gt; &lt;o:p&gt;&lt;/o:p&gt;&lt;/s=\r\npan&gt;&lt;/p&gt;&lt;p class=3DMsoNormal&gt;&lt;span style=3D&#39;font-size:11.0pt;font-family:&quot;C=\r\nalibri&quot;,&quot;sans-serif&quot;;color:#1F497D&#39;&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=3D=\r\nMsoNormal&gt;&lt;span style=3D&#39;font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif=\r\n&quot;;color:#1F497D&#39;&gt;Which is only called from here:&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cl=\r\nass=3DMsoNormal&gt;&lt;span style=3D&#39;font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans=\r\n-serif&quot;;color:#1F497D&#39;&gt;&lt;a href=3D&quot;https://github.com/internetarchive/heritr=\r\nix3/blob/master/modules/src/main/java/org/archive/modules/fetcher/FetchHTTP=\r\n.java#L663&quot;&gt;https://github.com/internetarchive/heritrix3/blob/master/module=\r\ns/src/main/java/org/archive/modules/fetcher/FetchHTTP.java#L663&lt;/a&gt;&lt;o:p&gt;&lt;/o=\r\n:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=3DMsoNormal&gt;&lt;span style=3D&#39;font-size:11.0pt;font-fam=\r\nily:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D&#39;&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cl=\r\nass=3DMsoNormal&gt;&lt;span style=3D&#39;font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans=\r\n-serif&quot;;color:#1F497D&#39;&gt;i.e. under Linux, this should only happen when HTTPC=\r\nlient.execute throws and IOException, variations of which are listed on thi=\r\ns page:&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=3DMsoNormal&gt;&lt;span style=3D&#39;font-size:=\r\n11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D&#39;&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;=\r\n/span&gt;&lt;/p&gt;&lt;p class=3DMsoNormal&gt;&lt;span style=3D&#39;font-size:11.0pt;font-family:=\r\n&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D&#39;&gt;&lt;a href=3D&quot;http://hc.apache.org/httpc=\r\nlient-legacy/exception-handling.html#Transport_exceptions&quot;&gt;http://hc.apache=\r\n.org/httpclient-legacy/exception-handling.html#Transport_exceptions&lt;/a&gt;&lt;o:p=\r\n&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=3DMsoNormal&gt;&lt;span style=3D&#39;font-size:11.0pt;font=\r\n-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D&#39;&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;=\r\np class=3DMsoNormal&gt;&lt;span style=3D&#39;font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;=\r\nsans-serif&quot;;color:#1F497D&#39;&gt;It looks like H3 is swallowing the original exce=\r\nption, making it difficult to debug as it&#8217;s not clear what kind of IO=\r\nException is being thrown.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=3DMsoNormal&gt;&lt;span =\r\nstyle=3D&#39;font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D&#39;=\r\n&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=3DMsoNormal&gt;&lt;span style=3D&#39;font-size:=\r\n11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D&#39;&gt;Hope that helps.&lt;o=\r\n:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=3DMsoNormal&gt;&lt;span style=3D&#39;font-size:11.0pt;fo=\r\nnt-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D&#39;&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/p=\r\n&gt;&lt;p class=3DMsoNormal&gt;&lt;span style=3D&#39;font-size:11.0pt;font-family:&quot;Calibri&quot;=\r\n,&quot;sans-serif&quot;;color:#1F497D&#39;&gt;Andy&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=3DMsoNormal=\r\n&gt;&lt;span style=3D&#39;font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#=\r\n1F497D&#39;&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;div style=3D&#39;border:none;border-left:s=\r\nolid blue 1.5pt;padding:0cm 0cm 0cm 4.0pt&#39;&gt;&lt;div&gt;&lt;div style=3D&#39;border:none;b=\r\norder-top:solid #B5C4DF 1.0pt;padding:3.0pt 0cm 0cm 0cm&#39;&gt;&lt;p class=3DMsoNorm=\r\nal&gt;&lt;b&gt;&lt;span lang=3DEN-US style=3D&#39;font-size:10.0pt;font-family:&quot;Tahoma&quot;,&quot;sa=\r\nns-serif&quot;&#39;&gt;From:&lt;/span&gt;&lt;/b&gt;&lt;span lang=3DEN-US style=3D&#39;font-size:10.0pt;fon=\r\nt-family:&quot;Tahoma&quot;,&quot;sans-serif&quot;&#39;&gt; archive-crawler@yahoogroups.com [mailto:ar=\r\nchive-crawler@yahoogroups.com] &lt;b&gt;On Behalf Of &lt;/b&gt;Kristinn Sigur=F0sson&lt;br=\r\n&gt;&lt;b&gt;Sent:&lt;/b&gt; 10 July 2013 16:56&lt;br&gt;&lt;b&gt;To:&lt;/b&gt; archive-crawler@yahoogroups.=\r\ncom&lt;br&gt;&lt;b&gt;Subject:&lt;/b&gt; [archive-crawler] Intermittent issue running Heritri=\r\nx with Java 7&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;p class=3DMsoNormal&gt;&lt;o:p&gt;&n=\r\nbsp;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=3DMsoNormal&gt;&nbsp; &lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;div id=3Dygrp-mlm=\r\nsg&gt;&lt;div id=3Dygrp-msg&gt;&lt;div id=3Dygrp-text&gt;&lt;p&gt;I was running a broad crawl (2=\r\n0+ thousand seeds) using the latest SNAPSHOT build of Heritrix (3.1.2-20130=\r\n625) when I noticed that one of our big blogging site wasn&#39;t making much pr=\r\nogress.&lt;br&gt;&lt;br&gt;As it turned out it was making intermittent progress and the=\r\nn hitting large stretches of time where every fetch attempt ended with a -2=\r\n (connect fail).&lt;br&gt;&lt;br&gt;My initial thought was that we were being blocked b=\r\ny the website, but that did not turn out to be the case. Additional inspect=\r\nion of the crawl log revealed that during a 20+ million URL crawl over 14 t=\r\nhousand URLs had errored out with a -2. I compared this with our most recen=\r\nt comparable crawl and for that the number was 60 URLs out of 40+ million. =\r\nClearly there was a problem with the crawler.&lt;br&gt;&lt;br&gt;While some domains wer=\r\ne affect and other not, I could not deduce any pattern as to what domains o=\r\nr URLs this affected.&lt;br&gt;&lt;br&gt;My second assumption then was that this was du=\r\ne to me running a SNAPSHOT build. So I put 3.1.0-RC1 (which I had used for =\r\nthe previous crawl) into play on the same machine. The issue reoccurred. -2=\r\n errors began showing up in the crawl log about 2 hours in (exactly when th=\r\ne 500 second wait times between 15 retries period had passed). This is not =\r\na regression in Heritrix.&lt;br&gt;&lt;br&gt;That left two variables. The fact that I w=\r\nas running on new hardware and that I had upgraded from Java 6 to 7 (1.7.0_=\r\n25-b15 to be exact).&lt;br&gt;&lt;br&gt;I then installed Java 1.6.0-b105 and tried the =\r\ncrawl a third time (again using the SNAPSHOT build), shortening the retry w=\r\nait interval from 500 seconds to 50. I figured this could only make the iss=\r\nue worse and would mean that it could manifest in as little as 15 minutes, =\r\ninstead of 2 hours.&lt;br&gt;&lt;br&gt;Now 5.5 hours in there are no sign of URLs with =\r\ninexplicable -2 status codes. It seems the issue IS related to the Java ver=\r\nsion.&lt;br&gt;&lt;br&gt;Has anyone encountered this? Any ideas on cause or how this co=\r\nuld be remedied? For now, just using an older version of Java will fix the =\r\nissue, but that isn&#39;t a long term solution.&lt;br&gt;&lt;br&gt;- Kris&lt;br&gt;&lt;br&gt;----------=\r\n------------------------------------------------&lt;br&gt;Landsb=F3kasafn =CDslan=\r\nds - H=E1sk=F3lab=F3kasafn | Arngr=EDmsg=F6tu 3 - 107 Reykjav=EDk&lt;br&gt;S=EDmi=\r\n/Tel: +354 5255600 | &lt;a href=3D&quot;http://www.landsbokasafn.is&quot;&gt;www.landsbokas=\r\nafn.is&lt;/a&gt;&lt;br&gt;----------------------------------------------------------&lt;br=\r\n&gt;fyrirvari/disclaimer - &lt;a href=3D&quot;http://fyrirvari.landsbokasafn.is&quot;&gt;http:=\r\n//fyrirvari.landsbokasafn.is&lt;/a&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;p class=3DMsoNor=\r\nmal&gt;&lt;span style=3D&#39;color:white&#39;&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/b=\r\nody&gt;&lt;/html&gt;\r\n------_=_NextPart_001_01CE7E3C.A35B5769--\r\n\n"}}