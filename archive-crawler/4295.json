{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"DUvjLRdhrYzekHUKS6hXTIaPJke3aEARjOuuvRzmWh4Oz_LV28wvIz4o_ksviQJYeJUetXJXIC4kyIHK9kpxnMFDvXayQcA","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] [ej@duvel.ir.iit.edu: [stack@archive.org: Re: updated patch to allow setting local IP(s) to bind from]]","postDate":"1181247704","msgId":4295,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ2Njg2OEQ4LjMwNTAyQGFyY2hpdmUub3JnPg==","inReplyToHeader":"PDIwMDcwNjA3MTU1OTA4LkdBMTIwMDRAZHV2ZWwuaXIuaWl0LmVkdT4=","referencesHeader":"PDIwMDcwNjA3MTU1OTA4LkdBMTIwMDRAZHV2ZWwuaXIuaWl0LmVkdT4="},"prevInTopic":4293,"nextInTopic":0,"prevInTime":4294,"nextInTime":4296,"topicId":4293,"numMessagesInTopic":2,"msgSnippet":"I ve taken ownership and will look into integrating this shortly. More attention will be given to prioritizing/triaging remaining issues as we reach the final","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 32965 invoked from network); 7 Jun 2007 20:22:48 -0000\r\nReceived: from unknown (66.218.66.72)\n  by m45.grp.scd.yahoo.com with QMQP; 7 Jun 2007 20:22:48 -0000\r\nReceived: from unknown (HELO mail.archive.org) (207.241.233.246)\n  by mta14.grp.scd.yahoo.com with SMTP; 7 Jun 2007 20:22:48 -0000\r\nReceived: from localhost (localhost [127.0.0.1])\n\tby mail.archive.org (Postfix) with ESMTP id 2FBAF141BC377\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Thu,  7 Jun 2007 13:21:44 -0700 (PDT)\r\nReceived: from mail.archive.org ([127.0.0.1])\n\tby localhost (mail.archive.org [127.0.0.1]) (amavisd-new, port 10024)\n\twith LMTP id 05576-06-11 for &lt;archive-crawler@yahoogroups.com&gt;;\n\tThu, 7 Jun 2007 13:21:42 -0700 (PDT)\r\nReceived: from [192.168.1.40] (c-76-102-230-209.hsd1.ca.comcast.net [76.102.230.209])\n\tby mail.archive.org (Postfix) with ESMTP id 5A806141C70D5\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Thu,  7 Jun 2007 13:21:42 -0700 (PDT)\r\nMessage-ID: &lt;466868D8.30502@...&gt;\r\nDate: Thu, 07 Jun 2007 13:21:44 -0700\r\nUser-Agent: Thunderbird 1.5.0.10 (X11/20070403)\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;20070607155908.GA12004@...&gt;\r\nIn-Reply-To: &lt;20070607155908.GA12004@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-Virus-Scanned: Debian amavisd-new at archive.org\r\nX-eGroups-Msg-Info: 1:0:0:0\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] [ej@...: [stack@...: Re:\n updated patch to allow setting local IP(s) to bind from]]\r\nX-Yahoo-Group-Post: member; u=137285340; y=yEtvIo2D1to8O-UDWBq2E4BRqIxxM1bCs7E1NGYUABgW\r\nX-Yahoo-Profile: gojomo\r\n\r\nI&#39;ve taken ownership and will look into integrating this shortly.\n\nMore attention will be given to prioritizing/triaging remaining issues \nas we reach the final stages of a point or major release.\n\n- Gordon @ IA\n\nEric wrote:\n&gt; Could someone please take a look at this?  I haven&#39;t received any\n&gt; response and the ticket is still assigned to Michael.\n&gt; \n&gt; Thanks,\n&gt; eric\n&gt; \n&gt; ----- Forwarded message from Eric &lt;ej@...&gt; -----\n&gt; \n&gt; Date: Wed, 30 May 2007 11:23:31 -0500\n&gt; \n&gt; Could someone take over Michael&#39;s assignment of my updated patch\n&gt; http://webteam.archive.org/jira/browse/HER-1045  I just changed the\n&gt; &quot;bind to local IP&quot; option so you could specify a list of local IP&#39;s to\n&gt; use instead of only a single one, but it has not yet been integrated\n&gt; into the tree.\n&gt; \n&gt; Thanks,\n&gt; eric\n&gt; \n&gt; ----- Forwarded message from Michael Stack &lt;stack@...&gt; -----\n&gt; \n&gt; Date: Tue, 29 May 2007 14:15:33 -0700\n&gt; From: Michael Stack &lt;stack@...&gt;\n&gt; Subject: Re: updated patch to allow setting local IP(s) to bind from\n&gt; To: Eric &lt;ej@...&gt;\n&gt; \n&gt; Hey Eric:\n&gt; \n&gt; I&#39;d suggest asking on the mailing list.  I&#39;ve since graduated from the \n&gt; Archive and only have the odd bit of time to help out on Heritrix et \n&gt; al.  \n&gt; \n&gt; Go easy Eric,\n&gt; St.Ack\n&gt; \n&gt; Eric wrote:\n&gt;&gt; Michael,\n&gt;&gt;\n&gt;&gt; Any update on merging this into the tree?  \n&gt;&gt;\n&gt;&gt; Also, I&#39;ve attached another patch that creates a dumpUris method to\n&gt;&gt; support the same behavior via JMX as the frontier search on the wui.\n&gt;&gt; Except that in JMX, it does so without loading all of the matching\n&gt;&gt; URL&#39;s into memory before outputting, so you can dump all your pending\n&gt;&gt; URL&#39;s without having the requirement that they fit in memory.\n&gt;&gt;\n&gt;&gt; Thanks,\n&gt;&gt; eric\n&gt;&gt;\n&gt;&gt; On Thu, Mar 15, 2007 at 01:20:57PM -0500, Eric wrote:\n&gt;&gt;  \n&gt;&gt;&gt; Michel, \n&gt;&gt;&gt;\n&gt;&gt;&gt; I understand if it&#39;s too hairy to get in this next release.  I should\n&gt;&gt;&gt; have followed up on it after I submitted it in January.  Some brief\n&gt;&gt;&gt; responses below each point:\n&gt;&gt;&gt;\n&gt;&gt;&gt; On Thu, Mar 15, 2007 at 11:09:38AM -0700, Michael Stack wrote:\n&gt;&gt;&gt;    \n&gt;&gt;&gt;&gt; One of the other lads had this to say about the patch:\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; &quot;... to make a long story short: This bug is marked as minor priority, \n&gt;&gt;&gt;&gt; and we&#39;re moments from a release. Should we include such a complex patch?\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; 1. ThreadLocal, ew. Currently each thread always uses the same IP. That \n&gt;&gt;&gt;&gt; make sense, but what if the ToePool is reconfigured? You could end up \n&gt;&gt;&gt;&gt; with threads that use the same IP even when more IP addresses are \n&gt;&gt;&gt;&gt; available, defeating the purpose. Also, if you have more IPs than \n&gt;&gt;&gt;&gt; threads, then some IPs never get used. Seems like it would be better to \n&gt;&gt;&gt;&gt; have the ToeThread pick a new IP each time.\n&gt;&gt;&gt;&gt;      \n&gt;&gt;&gt; Indeed...it would be nice if it was a better pool.  I didn&#39;t find an\n&gt;&gt;&gt; easy way to associate configuration things with ToeThreads directly.\n&gt;&gt;&gt; However, it&#39;s proved crucial in my environment to have the same thread\n&gt;&gt;&gt; using the same IP, both for debugging and operational reasons\n&gt;&gt;&gt; (bandwidth limiting per outgoing routes).\n&gt;&gt;&gt;\n&gt;&gt;&gt;    \n&gt;&gt;&gt;&gt; 2. Will checkpointing cause the feature to fail? The ThreadLocal is \n&gt;&gt;&gt;&gt; transient, so it never gets reconstituted during deserialization. The \n&gt;&gt;&gt;&gt; configureLocalAddress method checks for a null ThreadLocal, but in that \n&gt;&gt;&gt;&gt; case it just returns null, instead of returning a copy of the original \n&gt;&gt;&gt;&gt; config like it used to. Not sure if that will break anything or not.\n&gt;&gt;&gt;&gt;      \n&gt;&gt;&gt; I&#39;ve checkpointed and recovered many times with this.  The\n&gt;&gt;&gt; initialTasks() method reconstitutes the localAddresses.\n&gt;&gt;&gt;\n&gt;&gt;&gt;    \n&gt;&gt;&gt;&gt; 3. The patch modifies configureProxy(), which I know from my refactoring \n&gt;&gt;&gt;&gt; is delicate. Will using FetchHTTP through a proxy server still work \n&gt;&gt;&gt;&gt; after this patch is applied?\n&gt;&gt;&gt;&gt;      \n&gt;&gt;&gt; Yes, it is indeed delicate.  But I was careful.  :)\n&gt;&gt;&gt;\n&gt;&gt;&gt;    \n&gt;&gt;&gt;&gt; #2 and #3 could be show-stoppers, so the patch should be tested under \n&gt;&gt;&gt;&gt; those conditions (after a checkpoint recover, and through a proxy, or \n&gt;&gt;&gt;&gt; both). #1 is less of a concern, but it does mean I&#39;ll have to refiddle \n&gt;&gt;&gt;&gt; his patch when it gets applied to my branch. (The ThreadLocal approach \n&gt;&gt;&gt;&gt; makes assumptions about how threads are set up in the application, which \n&gt;&gt;&gt;&gt; might not hold true if FetchHTTP is used outside of Heritrix).\n&gt;&gt;&gt;&gt; &quot;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; Eric, I am going to pass on adding this in for Heritrix 1.12.  I am to \n&gt;&gt;&gt;&gt; blame.  I should have committed your contribution earlier in the cycle.\n&gt;&gt;&gt;&gt; St.Ack\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; Eric wrote:\n&gt;&gt;&gt;&gt;      \n&gt;&gt;&gt;&gt;&gt; timing is everything.  :)\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt; thanks,\n&gt;&gt;&gt;&gt;&gt; eric\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt; On Mon, Mar 12, 2007 at 08:26:51PM -0700, Michael Stack wrote:\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;        \n&gt;&gt;&gt;&gt;&gt;&gt; You&#39;d like it included in 1.12 I suppose (smile).\n&gt;&gt;&gt;&gt;&gt;&gt; St.Ack\n&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt; Eric wrote:\n&gt;&gt;&gt;&gt;&gt;&gt;   \n&gt;&gt;&gt;&gt;&gt;&gt;          \n&gt;&gt;&gt;&gt;&gt;&gt;&gt; Michael,\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; I submitted an update to my local binding patch a couple months ago,\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; but I&#39;m not sure if sourceforge would have told you since the feature\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; request was already closed.  Here&#39;s the link:\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; http://sourceforge.net/tracker/index.php?func=detail&aid=1547390&group_id=73833&atid=539102\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; Basically it&#39;s just a follow-up patch that allows a list of local\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; addresses (instead of a single one) to be specified.  These are then\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; assigned to ToeThreads round-robin, ensuring that the same local\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; address is assigned to a given ToeThread each time it is in FetchHTTP.\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; For example, if the number of local addresses specified equals\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; max-toe-threads there will be a one-to-one mapping between ToeThreads\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; and local addresses used.  This can be useful if there are\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; connectivity issues from a particular local IP, since the thread\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; number shows up in the logs.\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; thanks,\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; eric\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;     \n&gt;&gt;&gt;&gt;&gt;&gt;&gt;            \n&gt;&gt;&gt;&gt;&gt;        \n&gt;&gt;&gt; -- \n&gt;&gt;&gt; http://ir.iit.edu/~ej\n&gt; \n&gt; \n&gt; \n&gt; ----- End forwarded message -----\n&gt; \n\n\n"}}