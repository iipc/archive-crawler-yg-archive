{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":521188015,"authorName":"Youssef Eldakar","from":"Youssef Eldakar &lt;youssefeldakar@...&gt;","replyTo":"LIST","senderId":"oHtblg8fzIqTWunJu8C5ZjebgybaSEiguHk3FLgqz8QhH3BYfiWqb-3ZUhdG8_qYEjqvcC3InA8IeOLEoD3jeCddOnNTC3yuArWYX7tWiPk3","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] warc revisit records for url-agnostic content digest deduplicated records","postDate":"1349364778","msgId":7807,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PENBRDJhVVBqaUJDVXB6TVcwS0hIcFFTNHQxU3lzM3oyR08wbzh3T3AraFloZFd1Zldfd0BtYWlsLmdtYWlsLmNvbT4=","inReplyToHeader":"PDUwNkI0QzIzLjMwNzAyQGFyY2hpdmUub3JnPg==","referencesHeader":"PDUwNkI0QzIzLjMwNzAyQGFyY2hpdmUub3JnPg=="},"prevInTopic":7806,"nextInTopic":7808,"prevInTime":7806,"nextInTime":7808,"topicId":7806,"numMessagesInTopic":3,"msgSnippet":"... Good work, Noah. ... Target-URI, Date, File-Offset, and Filename, right, those are the 4 variables one needs to identify the original copy. I am thinking,","rawEmail":"Return-Path: &lt;youssefeldakar@...&gt;\r\nX-Sender: youssefeldakar@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 5601 invoked from network); 4 Oct 2012 15:32:59 -0000\r\nX-Received: from unknown (98.137.34.46)\n  by m10.grp.sp2.yahoo.com with QMQP; 4 Oct 2012 15:32:59 -0000\r\nX-Received: from unknown (HELO mail-ob0-f172.google.com) (209.85.214.172)\n  by mta3.grp.sp2.yahoo.com with SMTP; 4 Oct 2012 15:32:58 -0000\r\nX-Received: by mail-ob0-f172.google.com with SMTP id v19so771577obq.31\n        for &lt;archive-crawler@yahoogroups.com&gt;; Thu, 04 Oct 2012 08:32:58 -0700 (PDT)\r\nMIME-Version: 1.0\r\nX-Received: by 10.60.27.6 with SMTP id p6mr4549116oeg.37.1349364778343; Thu, 04\n Oct 2012 08:32:58 -0700 (PDT)\r\nX-Received: by 10.76.76.65 with HTTP; Thu, 4 Oct 2012 08:32:58 -0700 (PDT)\r\nIn-Reply-To: &lt;506B4C23.30702@...&gt;\r\nReferences: &lt;506B4C23.30702@...&gt;\r\nDate: Thu, 4 Oct 2012 17:32:58 +0200\r\nMessage-ID: &lt;CAD2aUPjiBCUpzMW0KHHpQS4t1Sys3z2GO0o8wOp+hYhdWufW_w@...&gt;\r\nTo: archive-crawler@yahoogroups.com\r\nCc: members@...\r\nContent-Type: multipart/alternative; boundary=e89a8fb1ef18491c5e04cb3d7847\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Youssef Eldakar &lt;youssefeldakar@...&gt;\r\nSubject: Re: [archive-crawler] warc revisit records for url-agnostic content\n digest deduplicated records\r\nX-Yahoo-Group-Post: member; u=521188015; y=SIXiYaSdDqerbhMIIUk-TXJZdVVRUdHPw_4DZD_rzRt2upmOlLNb6HY\r\n\r\n\r\n--e89a8fb1ef18491c5e04cb3d7847\r\nContent-Type: text/plain; charset=windows-1252\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nOn Tue, Oct 2, 2012 at 10:18 PM, Noah Levitt &lt;nlevitt@...&gt; wrote:\n\n=\r\n&gt; **\n&gt;\n&gt;\n&gt; Hello IIPC and heritrix communities,\n&gt;\n&gt; I recently pushed code =\r\nimplementing url-agnostic identical content\n&gt; payload digest deduplication =\r\nto the heritrix source code repository (see\n&gt; https://webarchive.jira.com/b=\r\nrowse/HER-2022). The idea is that if two\n&gt; urls have the same content, that=\r\n content need only be archived once.\n&gt;\n\nGood work, Noah.\n\n\n&gt;\n&gt; Here is an e=\r\nxample warc record for a deduplicated payload, as currently\n&gt; written:\n&gt;\n&gt; =\r\nWARC/1.0\n&gt; WARC-Type: revisit\n&gt; WARC-Target-URI: http://archive-it.org/imag=\r\ne/account/logo/643\n&gt; WARC-Date: 2012-09-14T00:23:34Z\n&gt; WARC-Payload-Digest:=\r\n sha1:RUQRLRH2XOX6DQWUUVFXHO25OBQBWUJG\n&gt; WARC-IP-Address: 207.241.235.232\n&gt;=\r\n WARC-Profile:\n&gt; http://netpreserve.org/warc/1.0/revisit/identical-payload-=\r\ndigest\n&gt; WARC-Truncated: length\n&gt; WARC-Refers-To: &lt;urn:uuid:38d12614-19dc-4=\r\nbb0-9b6c-f98ebcf7cc52&gt;\n&gt; WARC-Refers-To-Target-URI:\n&gt; http://archive-it.org=\r\n/image/featured-organizations/643/tn\n&gt; WARC-Refers-To-Date: 2012-09-13T23:0=\r\n6:21Z\n&gt; WARC-Refers-To-Filename:\n&gt; WEB-20120913230526198-00000-32360~localh=\r\nost.archive.org~6440.warc.gz\n&gt; WARC-Refers-To-File-Offset: 2002421\n&gt; WARC-R=\r\necord-ID: &lt;urn:uuid:306e9752-9b8c-49dd-bbd2-de06feace703&gt;\n&gt; Content-Type: a=\r\npplication/http; msgtype=3Dresponse\n&gt; Content-Length: 149\n&gt;\n&gt; HTTP/1.1 200 =\r\nOK\n&gt; Date: Fri, 14 Sep 2012 00:23:34 GMT\n&gt; Server: Apache-Coyote/1.1\n&gt; Cont=\r\nent-Type: image/png\n&gt; Content-Length: 7904\n&gt; Connection: close\n&gt;\n&gt; These re=\r\ncords are very similar to old url-specific revisit records, but\n&gt; with the =\r\naddition of the WARC-Refers-To* group of fields.\n&gt;\n\nTarget-URI, Date, File-=\r\nOffset, and Filename, right, those are the 4\nvariables one needs to identif=\r\ny the original copy. I am thinking, In\nsubsequent revisit records, should t=\r\nhis set of Refers-To-* fields point to\nthe previous revisit or to the actua=\r\nl original copy? I think I would vote\nfor the latter to avoid possibly long=\r\n traversals when resolving revisit\nrecords.\n\n\n&gt; But this similarity could c=\r\nause problems. For example, warc consumers\n&gt; that are not aware of this new=\r\n kind of deduplication might encounter\n&gt; such a record and look for the pay=\r\nload in a previous fetch of the same\n&gt; url, and silently replay incorrect c=\r\nontent.\n&gt;\n\nGood catch.\n\n\n&gt;\n&gt; In addition, the warc spec seems to specify th=\r\nat that WARC-Profile\n&gt; http://netpreserve.org/warc/1.0/revisit/identical-pa=\r\nyload-digest should\n&gt; only be used for recrawls of the same url. It &quot;may be=\r\n used whenever a\n&gt; subsequent consideration of a URI provides payload conte=\r\nnt which a\n&gt; strong digest function, such as SHA-1, indicates is identical =\r\nto a\n&gt; previously recorded version.&quot;\n&gt; http://bibnum.bnf.fr/WARC/WARC_ISO_2=\r\n8500_version1_latestdraft.pdf\n&gt;\n&gt; The &quot;WARC-Type: revisit&quot; appears to be fl=\r\nexible enough to allow for\n&gt; different urls. &quot;A &#39;revisit&#39; record describes =\r\nthe revisitation of\n&gt; content already archived&quot;. However it&#39;s not clear tha=\r\nt the possibility\n&gt; of different urls was considered.\n&gt;\n&gt; So we should disc=\r\nuss and decide what this kind of warc record ought to\n&gt; look like. I&#39;ll off=\r\ner an initial proposal that it be like the example\n&gt; above, except with a n=\r\new WARC-Profile\n&gt; &quot;\n&gt; http://netpreserve.org/warc/1.0/revisit/uri-agnostic-=\r\nidentical-payload-digest&quot;.\n&gt;\n&gt;\n\nSetting WARC-Profile to something different=\r\n from (a &quot;derivative&quot; of)\nidentical-payload-digest does sound like a good s=\r\ntart to me.\n\n\n&gt;\n&gt; Noah\n&gt;  \n&gt;\n\nYoussef Eldakar\nBibliotheca Alexandrina\n\r\n--e89a8fb1ef18491c5e04cb3d7847\r\nContent-Type: text/html; charset=windows-1252\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;div dir=3D&quot;ltr&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div class=3D&quot;gmail_quote&quot;&gt;On Tue, Oct 2, 2012 at =\r\n10:18 PM, Noah Levitt &lt;span dir=3D&quot;ltr&quot;&gt;&lt;&lt;a href=3D&quot;mailto:nlevitt@archi=\r\nve.org&quot; target=3D&quot;_blank&quot;&gt;nlevitt@...&lt;/a&gt;&gt;&lt;/span&gt; wrote:&lt;br&gt;&lt;blo=\r\nckquote class=3D&quot;gmail_quote&quot; style=3D&quot;margin:0 0 0 .8ex;border-left:1px #c=\r\ncc solid;padding-left:1ex&quot;&gt;\n\n\n\n&lt;u&gt;&lt;/u&gt;\n\n\n\n\n\n\n\n\n\n\n&lt;div style&gt;\n&lt;span&gt;=A0&lt;/spa=\r\nn&gt;\n\n\n&lt;div&gt;\n  &lt;div&gt;\n\n\n    &lt;div&gt;\n      \n      \n      &lt;p&gt;Hello IIPC and heritr=\r\nix communities,&lt;br&gt;\n&lt;br&gt;\nI recently pushed code implementing url-agnostic i=\r\ndentical content &lt;br&gt;\npayload digest deduplication to the heritrix source c=\r\node repository (see &lt;br&gt;\n&lt;a href=3D&quot;https://webarchive.jira.com/browse/HER-=\r\n2022&quot; target=3D&quot;_blank&quot;&gt;https://webarchive.jira.com/browse/HER-2022&lt;/a&gt;). T=\r\nhe idea is that if two &lt;br&gt;\nurls have the same content, that content need o=\r\nnly be archived once.&lt;br&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;=\r\nGood work, Noah.&lt;br&gt;=A0&lt;br&gt;&lt;/div&gt;&lt;blockquote class=3D&quot;gmail_quote&quot; style=3D=\r\n&quot;margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex&quot;&gt;\n&lt;div style=\r\n&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;p&gt;\n&lt;br&gt;\nHere is an example warc record for a deduplicated =\r\npayload, as currently &lt;br&gt;\nwritten:&lt;br&gt;\n&lt;br&gt;\nWARC/1.0&lt;br&gt;\nWARC-Type: revisi=\r\nt&lt;br&gt;\nWARC-Target-URI: &lt;a href=3D&quot;http://archive-it.org/image/account/logo/=\r\n643&quot; target=3D&quot;_blank&quot;&gt;http://archive-it.org/image/account/logo/643&lt;/a&gt;&lt;br&gt;=\r\n\nWARC-Date: 2012-09-14T00:23:34Z&lt;br&gt;\nWARC-Payload-Digest: sha1:RUQRLRH2XOX6=\r\nDQWUUVFXHO25OBQBWUJG&lt;br&gt;\nWARC-IP-Address: 207.241.235.232&lt;br&gt;\nWARC-Profile:=\r\n &lt;br&gt;\n&lt;a href=3D&quot;http://netpreserve.org/warc/1.0/revisit/identical-payload-=\r\ndigest&quot; target=3D&quot;_blank&quot;&gt;http://netpreserve.org/warc/1.0/revisit/identical=\r\n-payload-digest&lt;/a&gt;&lt;br&gt;\nWARC-Truncated: length&lt;br&gt;\nWARC-Refers-To: &lt;urn:=\r\nuuid:38d12614-19dc-4bb0-9b6c-f98ebcf7cc52&gt;&lt;br&gt;\nWARC-Refers-To-Target-URI=\r\n: &lt;br&gt;\n&lt;a href=3D&quot;http://archive-it.org/image/featured-organizations/643/tn=\r\n&quot; target=3D&quot;_blank&quot;&gt;http://archive-it.org/image/featured-organizations/643/=\r\ntn&lt;/a&gt;&lt;br&gt;\nWARC-Refers-To-Date: 2012-09-13T23:06:21Z&lt;br&gt;\nWARC-Refers-To-Fil=\r\nename: &lt;br&gt;\nWEB-20120913230526198-00000-32360~&lt;a href=3D&quot;http://localhost.a=\r\nrchive.org&quot; target=3D&quot;_blank&quot;&gt;localhost.archive.org&lt;/a&gt;~6440.warc.gz&lt;br&gt;\nWA=\r\nRC-Refers-To-File-Offset: 2002421&lt;br&gt;\nWARC-Record-ID: &lt;urn:uuid:306e9752=\r\n-9b8c-49dd-bbd2-de06feace703&gt;&lt;br&gt;\nContent-Type: application/http; msgtyp=\r\ne=3Dresponse&lt;br&gt;\nContent-Length: 149&lt;br&gt;\n&lt;br&gt;\nHTTP/1.1 200 OK&lt;br&gt;\nDate: Fri=\r\n, 14 Sep 2012 00:23:34 GMT&lt;br&gt;\nServer: Apache-Coyote/1.1&lt;br&gt;\nContent-Type: =\r\nimage/png&lt;br&gt;\nContent-Length: 7904&lt;br&gt;\nConnection: close&lt;br&gt;\n&lt;br&gt;\nThese rec=\r\nords are very similar to old url-specific revisit records, but &lt;br&gt;\nwith th=\r\ne addition of the WARC-Refers-To* group of fields.&lt;br&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div=\r\n&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;Target-URI, Date, File-Offset, and Filename, r=\r\night, those are the 4 variables one needs to identify the original copy. I =\r\nam thinking, In subsequent revisit records, should this set of Refers-To-* =\r\nfields point to the previous revisit or to the actual original copy? I thin=\r\nk I would vote for the latter to avoid possibly long traversals when resolv=\r\ning revisit records.&lt;br&gt;\n&lt;br&gt;&lt;/div&gt;&lt;blockquote class=3D&quot;gmail_quote&quot; style=\r\n=3D&quot;margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex&quot;&gt;&lt;div sty=\r\nle&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;p&gt;\n&lt;br&gt;\nBut this similarity could cause problems. For ex=\r\nample, warc consumers &lt;br&gt;\nthat are not aware of this new kind of deduplica=\r\ntion might encounter &lt;br&gt;\nsuch a record and look for the payload in a previ=\r\nous fetch of the same &lt;br&gt;\nurl, and silently replay incorrect content.&lt;br&gt;&lt;=\r\n/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;Good catch.&lt;br&gt;=A0&lt;br&gt;&lt;/di=\r\nv&gt;&lt;blockquote class=3D&quot;gmail_quote&quot; style=3D&quot;margin:0 0 0 .8ex;border-left:=\r\n1px #ccc solid;padding-left:1ex&quot;&gt;\n&lt;div style&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;p&gt;\n&lt;br&gt;\nIn add=\r\nition, the warc spec seems to specify that that WARC-Profile &lt;br&gt;\n&lt;a href=\r\n=3D&quot;http://netpreserve.org/warc/1.0/revisit/identical-payload-digest&quot; targe=\r\nt=3D&quot;_blank&quot;&gt;http://netpreserve.org/warc/1.0/revisit/identical-payload-dige=\r\nst&lt;/a&gt; should &lt;br&gt;\nonly be used for recrawls of the same url. It &quot;may =\r\nbe used whenever a &lt;br&gt;\nsubsequent consideration of a URI provides payload =\r\ncontent which a &lt;br&gt;\nstrong digest function, such as SHA-1, indicates is id=\r\nentical to a &lt;br&gt;\npreviously recorded version.&quot; &lt;br&gt;\n&lt;a href=3D&quot;http:/=\r\n/bibnum.bnf.fr/WARC/WARC_ISO_28500_version1_latestdraft.pdf&quot; target=3D&quot;_bla=\r\nnk&quot;&gt;http://bibnum.bnf.fr/WARC/WARC_ISO_28500_version1_latestdraft.pdf&lt;/a&gt;&lt;b=\r\nr&gt;\n&lt;br&gt;\nThe &quot;WARC-Type: revisit&quot; appears to be flexible enough to=\r\n allow for &lt;br&gt;\ndifferent urls. &quot;A &#39;revisit&#39; record describes =\r\nthe revisitation of &lt;br&gt;\ncontent already archived&quot;. However it&#39;s n=\r\not clear that the possibility &lt;br&gt;\nof different urls was considered.&lt;br&gt;\n&lt;b=\r\nr&gt;\nSo we should discuss and decide what this kind of warc record ought to &lt;=\r\nbr&gt;\nlook like. I&#39;ll offer an initial proposal that it be like the examp=\r\nle &lt;br&gt;\nabove, except with a new WARC-Profile &lt;br&gt;\n&quot;&lt;a href=3D&quot;http://=\r\nnetpreserve.org/warc/1.0/revisit/uri-agnostic-identical-payload-digest&quot; tar=\r\nget=3D&quot;_blank&quot;&gt;http://netpreserve.org/warc/1.0/revisit/uri-agnostic-identic=\r\nal-payload-digest&lt;/a&gt;&quot;. &lt;br&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;&lt;/blockquote&gt;=\r\n&lt;div&gt;&lt;br&gt;Setting WARC-Profile to something different from (a &quot;derivati=\r\nve&quot; of) identical-payload-digest does sound like a good start to me.&lt;b=\r\nr&gt;=A0&lt;br&gt;&lt;/div&gt;&lt;blockquote class=3D&quot;gmail_quote&quot; style=3D&quot;margin:0 0 0 .8ex=\r\n;border-left:1px #ccc solid;padding-left:1ex&quot;&gt;\n&lt;div style&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;p=\r\n&gt;\n&lt;br&gt;\nNoah&lt;br&gt;\n&lt;/p&gt;\n\n    &lt;/div&gt;\n     \n\n    \n    &lt;div style=3D&quot;color:#fff;m=\r\nin-height:0&quot;&gt;&lt;/div&gt;\n\n\n&lt;/div&gt;\n\n\n\n  \n\n\n\n\n\n\n&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;Youssef Eld=\r\nakar&lt;br&gt;Bibliotheca Alexandrina&lt;br&gt;&lt;/div&gt;\n\r\n--e89a8fb1ef18491c5e04cb3d7847--\r\n\n"}}