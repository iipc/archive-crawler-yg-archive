{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"3nY0xNnOW8rMYXuftOyAtiahXnmXUfvoYw8zXLh3VGR_4iqSxN11pIYTbMAA2PMfdDhA2xxCZQLFiacyLWp3oWtgo7Ut9zM","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] Details about the process of passing a ProcessorURI to a custom processor","postDate":"1212442016","msgId":5272,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ4NDQ2NUEwLjMwODAwMDFAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGQ2MWM1NzMwMDgwNjAyMDgxM3czNTQyZTgyZHJlODJhMGRmZDA3MWZlODBmQG1haWwuZ21haWwuY29tPg==","referencesHeader":"PGQ2MWM1NzMwMDgwNjAyMDgxM3czNTQyZTgyZHJlODJhMGRmZDA3MWZlODBmQG1haWwuZ21haWwuY29tPg=="},"prevInTopic":5261,"nextInTopic":0,"prevInTime":5271,"nextInTime":5273,"topicId":5261,"numMessagesInTopic":2,"msgSnippet":"... It depends on where your Processor is in the chain. The same URI can enter processing several times, especially if when it first comes up, the DNS/robots","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 44797 invoked from network); 2 Jun 2008 21:26:55 -0000\r\nX-Received: from unknown (66.218.67.96)\n  by m48.grp.scd.yahoo.com with QMQP; 2 Jun 2008 21:26:55 -0000\r\nX-Received: from unknown (HELO relay01.pair.com) (209.68.5.15)\n  by mta17.grp.scd.yahoo.com with SMTP; 2 Jun 2008 21:26:55 -0000\r\nX-Received: (qmail 64949 invoked from network); 2 Jun 2008 21:26:51 -0000\r\nX-Received: from unknown (HELO ?192.168.1.15?) (unknown)\n  by unknown with SMTP; 2 Jun 2008 21:26:51 -0000\r\nX-pair-Authenticated: 67.180.197.118\r\nMessage-ID: &lt;484465A0.3080001@...&gt;\r\nDate: Mon, 02 Jun 2008 14:26:56 -0700\r\nUser-Agent: Thunderbird 2.0.0.14 (Windows/20080421)\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;d61c57300806020813w3542e82dre82a0dfd071fe80f@...&gt;\r\nIn-Reply-To: &lt;d61c57300806020813w3542e82dre82a0dfd071fe80f@...&gt;\r\nContent-Type: text/plain; charset=UTF-8; format=flowed\r\nContent-Transfer-Encoding: 8bit\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] Details about the process of passing a ProcessorURI\n to a custom processor\r\nX-Yahoo-Group-Post: member; u=137285340; y=GprKQCTHGk0s7kcj2yPDmLRRIarq5EHUlmWjdAM4LQkL\r\nX-Yahoo-Profile: gojomo\r\n\r\nJean-NoÃ«l Rivasseau wrote:\n&gt; Hello, I have a processor that needs to access some HTML documents\n&gt; fetched by Heritrix. If my seed urls contain an URL corresponding to\n&gt; such a document, I noticed a strange behavior:\n&gt; \n&gt; shouldProcess() and innerProcess(), for my URL, seems to be called 3\n&gt; times for the same URL (the seed). On the first two attempts, the\n&gt; content associated to the ProcessorURI is empty. I guess what&#39;s\n&gt; happening is that Heritrix tries to retrieve the URL, but has to make\n&gt; the dns: request first and then fetch the example.com/robots.txt file\n&gt; before it actually retrieves the first document (corresponding to the\n&gt; seed).\n&gt; \n&gt; What I dont understand however, is why innerProcess and shouldProcess\n&gt; are called three times... It should call these only once when\n&gt; everything is ready, or at least that&#39;s what seems logical. Reading\n&gt; the (old) heritrix 1.15 documentation did not help me, can someone\n&gt; shed some light on this or point me to some code fragments that would\n&gt; help me understand what&#39;s happening?\n\nIt depends on where your Processor is in the chain. The same URI can \nenter processing several times, especially if when it first comes up, \nthe DNS/robots prerequisites have not yet been fetched (or the \nDNS/robots info has expired).\n\nIf your processor is *before* the PreconditionEnforcer, its \nshouldProcess() and innerProcess() may be called, but of course the URI \nhasn&#39;t even been evaluated for preconditions, much less fetched or \nextracted.\n\nSo, your processor will run, then the URI will reach \nPreconditionEnforcer, which will schedule the (first) prerequisite and \nthen cancel further processing. When the URI comes up again, your \nprocessor will again run, then perhaps another prerequisite will need to \nbe scheduled.\n\nIf your processor is *after* the PreconditionEnforcer, then it won&#39;t see \nthe URI until such time it passed precondition-testing. But if you&#39;re \nbefore the fetchers -- or if fetching fails for some reason and your \nprocessor is near the end of the chain -- it may still see an URI \nwithout any fetched content. And if the failure was retryable, it may \nsee the URI once with an error-code, and then again later, after the \nretry, with a success code.\n\nThe model is of a single, simple list of Processor steps to perform in \norder. But, the steps themselves can opt to be skipped (via \nshouldProcess) when a URI is not of the right type or success-state. \n(Additionally, a jump-forward to the first processor that implements \nPostProcessor is possible, via the FINISH result.)\n\nOtherwise, there&#39;s not conditional branching or running steps only when \ncertain preconditions have been satisfied.\n\n&gt; PS: and I know it must be a very common question, but when\n&gt; documentation on heritrix 2 is expected?\n\nWe are hoping to arrange for updated documentation around the time of \nthe 2.2 release, which is targeted for August, though the resourcing is \nnot yet firm.\n\nHTH,\n\n- Gordon @ IA\n\n"}}