{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"p-9W_-z-nCe36YeVKsseMoS5JWf4-lrdZjLBWwpAz0fzpq6Bg8cF6rmZUDmIK6r9YmaZiU0W3o99j3HX4ynkYZ-UBrsxsMk","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] filters question (fwd)","postDate":"1082769350","msgId":338,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQwODlCRkM2LjYwMDA2MDRAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PFBpbmUuR1NPLjQuNTAuMDQwNDIzMTEzMTA4MC4xMzI3NC0xMDAwMDBAaW5mby5zaW1zLmJlcmtlbGV5LmVkdT4=","referencesHeader":"PFBpbmUuR1NPLjQuNTAuMDQwNDIzMTEzMTA4MC4xMzI3NC0xMDAwMDBAaW5mby5zaW1zLmJlcmtlbGV5LmVkdT4="},"prevInTopic":335,"nextInTopic":0,"prevInTime":337,"nextInTime":339,"topicId":335,"numMessagesInTopic":2,"msgSnippet":"Hi Miles. Glad to hear you re able to use Heritrix for your project. Some answers and comments below. ... We d love to see this processor class if you can","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 9964 invoked from network); 24 Apr 2004 01:15:55 -0000\r\nReceived: from unknown (66.218.66.218)\n  by m17.grp.scd.yahoo.com with QMQP; 24 Apr 2004 01:15:55 -0000\r\nReceived: from unknown (HELO ia00524.archive.org) (209.237.232.202)\n  by mta3.grp.scd.yahoo.com with SMTP; 24 Apr 2004 01:15:55 -0000\r\nReceived: (qmail 2174 invoked by uid 100); 24 Apr 2004 01:10:09 -0000\r\nReceived: from b116-dyn-47.archive.org (HELO archive.org) (gojomo@...@209.237.240.47)\n  by mail-dev.archive.org with SMTP; 24 Apr 2004 01:10:09 -0000\r\nMessage-ID: &lt;4089BFC6.6000604@...&gt;\r\nDate: Fri, 23 Apr 2004 18:15:50 -0700\r\nUser-Agent: Mozilla Thunderbird 0.5 (X11/20040208)\r\nX-Accept-Language: en-us, en\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nCc: mcrawfor@...\r\nReferences: &lt;Pine.GSO.4.50.0404231131080.13274-100000@...&gt;\r\nIn-Reply-To: &lt;Pine.GSO.4.50.0404231131080.13274-100000@...&gt;\r\nContent-Type: text/plain; charset=us-ascii; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-Spam-DCC: : \r\nX-Spam-Checker-Version: SpamAssassin 2.63 (2004-01-11) on ia00524.archive.org\r\nX-Spam-Level: \r\nX-Spam-Status: No, hits=0.0 required=6.0 tests=AWL,HTML_MESSAGE autolearn=ham \n\tversion=2.63\r\nX-eGroups-Remote-IP: 209.237.232.202\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] filters question (fwd)\r\nX-Yahoo-Group-Post: member; u=137285340\r\nX-Yahoo-Profile: gojomo\r\n\r\nHi Miles.\n\nGlad to hear you&#39;re able to use Heritrix for your project.\nSome answers and comments below.\n\nParker Thompson forwards from Miles Crawford:\n&gt; I have replaced the ARCWriterProcessor with my own\n&gt; class that places the documents into a Lucene\n&gt; index, which is working well.  My questions are\n&gt; about getting Heritrix to behave the way I would\n&gt; like.\n\nWe&#39;d love to see this processor class if you can share\nit; we&#39;ve talked about using Lucene to drive future\nQA and access tools against crawls, and building an\nindex simultaneous with crawling would be ideal for\nmany purposes.\n\n&gt; I&#39;m a little stuck trying to set up a filter - I\n&gt; would like to process and fetch only those\n&gt; documents which are text - I can&#39;t place\n&gt; images/zips/docs/pdfs into the Lucene index.\n&gt; \n&gt; I currently have a filter that excludes\n&gt; jpg,gif,doc,etc in my crawl profile and a regex in\n&gt; my archiver class that makes sure only URI&#39;s with\n&gt; the string &quot;text&quot; in their content-type get placed\n&gt; into the index.  Still, lots of non-text things\n&gt; get fetched, and I have to add whatever random\n&gt; extension it is to my exclude filter - kinda ugly.\n&gt; \n&gt; Can I check the content-type earlier on using some\n&gt; built-in part of Heritrix?  or will i have to\n&gt; continue fetching the whole file before i can\n&gt; definitively choose not to index it?\n\nUnfortunately, we don&#39;t offer any hooks for aborting a\nfetch-in-progress based on the initially returned info.\nThe only things that trigger a fetch-abort are socket\nerrors, exceeding length/time limits, or an external\nthread interrupt.\n\nIt would make sense to extend the FetchHTTP class to\nallow a fetch-abort at the step between the reading\nof the HTTP headers (executeMethod) and the reading\nof the full content-body (readFullyOrUntil). I&#39;ve\nentered an enhancement-request for this feature at\nour Sourceforge project (#941072), but we might not\nget to it anytime soon, since we usually try to get\nall document types.\n\nAnother idea that came up here: adding another\nprocessor step that does an HTTP HEAD request,\ninstead of a GET, and cancels the further\nprocessing of any resources that appear of the\nwrong types. This would mean two hits against\nevery document that you do find of interest, but\nif the savings from not doing the full fetch\nof uninteresting docs is large enough, that might\nbe appropriate.\n\n&gt; Also, I would like my crawl scope to be the\n&gt; following: anything below the path specified in\n&gt; the seeds or a couple hops(probably 2) otherwise.\n&gt; I see the OrFilter and FilterScope module, but I\n&gt; can&#39;t seem to organize them such that I get this\n&gt; scope.\n\nBy a couple of hops, do you mean from your seeds,\nor from any URI that qualifies under the path\nrules?\n\nThere is currently no good way to specify this sort&#39;PathS\nof combination using just the UI, though we have\nrevisions planned that would fix this shortcoming.\n(See http://groups.yahoo.com/group/archive-crawler/message/337 --\nit should make your kind of mixed scope a cinch.)\n\nOne problem is that the existing link-hops limit\napplies globally, and from the seeds. So you can&#39;t\nhave some URIs/paths exempt, and others enforced.\n\nAnother is that the &#39;PathScope&#39;, which does what you\nwant for your main focus (the seeds/path-prefixes),\nsimilarly can&#39;t be waived for some URIs/paths.\n\nI think the shortest path from the current capabilities\nto your desired scope would involve some coding, and\nbe:\n\n  - create an AndFilter (with the natural\n  - create a configurable version of the HopsFilter,\n    to take its own settings parameters\n  - configure your crawl as a Broad crawl, no hops\n    limits\n  - add as an exclude filter:\n    AND (ConfigurableHopsMoreThanFilter(2),\n         NOT(URIRegExpFilter(&lt;a regexp that defines your paths&gt;))\n    (where NOT is actually achieved by setting the filter &quot;return\n     if match&quot; paramter to an appropriate value)\n\nI might be missing an easier way, in which case I hope\nsomeone else chimes in.\n\n&gt; Thanks for any tips you might have!\n\nYou&#39;re welcome, hope this helps.\n\n- Gordon @ IA\n\n"}}