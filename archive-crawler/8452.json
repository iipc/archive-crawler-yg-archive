{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":558784821,"authorName":"Arin Patel Itha","from":"Arin Patel Itha &lt;iarinpatel@...&gt;","profile":"iarinpatel","replyTo":"LIST","senderId":"Q2AtMnskIOgn7fZPAkW-qXSHadW_Oj4p_iTK2mEN8pKt_K-FJCddJ1pxxkRmKcqoiGYNXAKpmw4HtJ06iXMRFmkvg6WQW5ynbC_bz7w","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] Heritrix cannot download Non-English text from an English website","postDate":"1389082830","msgId":8452,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDEzODkwODI4MzAuNjc5NTEuWWFob29NYWlsTmVvQHdlYjEyMjkwMi5tYWlsLm5lMS55YWhvby5jb20+","inReplyToHeader":"PENBQS16NzBKZ1h5NE1SVDlveHQwY0o5SmZMZXFLdW1xLUMxbkZjSm1uYmFRY201Nm9vd0BtYWlsLmdtYWlsLmNvbT4=","referencesHeader":"PDEzODcxOTc2MzAuMzg0MDcuWWFob29NYWlsTmVvQHdlYjEyMjkwMS5tYWlsLm5lMS55YWhvby5jb20+CTxDQUEtejcwS3dvVFg4WVp4enpqQ2dZck0raD1HSHVfUXlfclNibW9Yc0EzNmNyPTdjeVFAbWFpbC5nbWFpbC5jb20+CTwxMzg3MjY3NjUyLjM5NjAyLllhaG9vTWFpbE5lb0B3ZWIxMjI5MDIubWFpbC5uZTEueWFob28uY29tPgk8Q0FBLXo3MExLRDF6MmNzSzQrbUpIWG9YK2tKNk90WE44OTBSdnZYeVU5UUx3TUIxYlhRQG1haWwuZ21haWwuY29tPgk8MTM4NzMwMzk4NC42NTAwMi5ZYWhvb01haWxOZW9Ad2ViMTIyOTA2Lm1haWwubmUxLnlhaG9vLmNvbT4JPDEzODg3NTc1MTMuMjc0ODYuWWFob29NYWlsTmVvQHdlYjEyMjkwMi5tYWlsLm5lMS55YWhvby5jb20+IDxDQUEtejcwSmdYeTRNUlQ5b3h0MGNKOUpmTGVxS3VtcS1DMW5GY0ptbmJhUWNtNTZvb3dAbWFpbC5nbWFpbC5jb20+"},"prevInTopic":8449,"nextInTopic":0,"prevInTime":8451,"nextInTime":8453,"topicId":8428,"numMessagesInTopic":8,"msgSnippet":"Noah,   Thanks for the response.   The problem has resolved after changing   arcRecordContent = content.toString();   to   arcRecordContent = new","rawEmail":"Return-Path: &lt;iarinpatel@...&gt;\r\nX-Sender: iarinpatel@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 47964 invoked by uid 102); 7 Jan 2014 08:20:31 -0000\r\nX-Received: from unknown (HELO mtaq4.grp.bf1.yahoo.com) (10.193.84.143)\n  by m7.grp.bf1.yahoo.com with SMTP; 7 Jan 2014 08:20:31 -0000\r\nX-Received: (qmail 26117 invoked from network); 7 Jan 2014 08:20:30 -0000\r\nX-Received: from unknown (HELO nm23-vm6.bullet.mail.ne1.yahoo.com) (98.138.91.116)\n  by mtaq4.grp.bf1.yahoo.com with SMTP; 7 Jan 2014 08:20:30 -0000\r\nX-Received: from [98.138.101.128] by nm23.bullet.mail.ne1.yahoo.com with NNFMP; 07 Jan 2014 08:20:30 -0000\r\nX-Received: from [98.138.101.163] by tm16.bullet.mail.ne1.yahoo.com with NNFMP; 07 Jan 2014 08:20:30 -0000\r\nX-Received: from [127.0.0.1] by omp1074.mail.ne1.yahoo.com with NNFMP; 07 Jan 2014 08:20:30 -0000\r\nX-Yahoo-Newman-Property: ymail-3\r\nX-Yahoo-Newman-Id: 590013.93206.bm@...\r\nX-Received: (qmail 37600 invoked by uid 60001); 7 Jan 2014 08:20:30 -0000\r\nX-YMail-OSG: uOC3OPEVM1kSr..Q12d3dyJwHbFmOoZ9o6rZxnICRSjfMBq\n ZZ6IROUikgV3gb76go0v1grNalwv9HIipgW0UU_h09xMUNfxK2uAIvfUe.SJ\n r3r5MXS3Su2wvCZCcpNORgdNOH9BLHovICVXpKygT22VLQvK4c.ucAssO7WK\n xwfJqPHbzW7hRjwc9xvN0Zkvb5Pl27AD8.uvwEbTrdulnicxnx_XHMrdNy5a\n _hqxAWzdhdX5E69_PocBqoTzWSB0wyeCaoctzYj6DYdu2GZ_PHiLWe5BpVQu\n Sig4FXFDhz6GjHQ4u0bC4l34sAsIP0CE1rwpaYI44CiQkU4BP8OKdvk62X93\n .AOt2s9Kpmq37l9_DxmIBolS9yKNYqSGKveZ9h9JOAvaVv8EHasib95yslMB\n 7QT4z84aSDPcnB9cIbXhDbz6S1hI.UOkKSPbC51PPcyHuW85ER0ePlhM6ieU\n N14k1.5OwqZHpwBzT16u2TrOo9k0Tq09o5Y41yCreZPTbrGsUdwOwmZ9qCM4\n LKdrA4Km_qsz7dLZwDNelwL_SUZwRjPrtzX8OJwZFUqwekMGRpXBA9UWLrje\n wDTWhqR1MWoviEj_iEDW4ruUu.sNPlB4Z9w6fnMUVMiORuNks_nNh1tfFKlu\n 6_cUBxZf60NrIUrHnomPy07M9Jif222FNX7oaa9YltnWJtZe96U66ecl3BF2\n dVp4pms_7mQ_Mq2v2P4X5PKzj5uT43kMkjhzKP_FwNYSWYiv5.6LLR.Cl.w7\n L9wnyfcOsJs_JvQT29MEylSY5ewpOxHHCCqt5dlLfKxs27_ve02XVoDhp3rn\n RDUk.hcMgDe9AK_5x3G9n7pbERVyQLXc1saJbyol5.DrOniKm1Omt0Rr3CIj\n ThAH_mwAdhAC53Zl_hPpxg1HgpXMf4fvNziDuzq8UFnhZXzNZqjdrTpVaiyn\n B0s6ANRAqnctfo3.3brcwmr._F47gsHP6lQczHuv3O4K36tWqiClT4zFfThD\n 2LexwnGSc6Rw62z9W2iQXY9FsrvNO6xymYrFFphFlI1smWeQrmUuAbm4acT_\n fS9nToAFPnuYoeTGgQ1UvLY_gUN8lTar5lEj9m.uvOkazyghEqOTZrTNCNTT\n 5jZHjEhZEwJIphuJUgf.cOs565LXIfQCWvL9a2KDeAhnavMhjcmaowkTUNKc\n ZfBCxFXcFEPACO9iDP3Et7Uu_J8tHekgwSvjwgHiSoGBb_gjpbBBEEtuS2UX\n f14xyKvUhOHIiRHkX0e2Ch5l8c4KRScFsYtW7wvfZe0ndGJ0HWQMfGCmVPMu\n pi.vdKk6gD9t1Jj4k7yUmy.AnsOt1.afFwGPLX_G0LMXV6KoIu0zW7k6eyT5\n pyMcwyvs7rFR1QGo76f83c4Ca9Brx9GWxeBBcQ3N8LkzpTH3BstYQX6BtxSP\n QIM5YzABJAsr.NsUVPg9_RlqyBGHPkRT7jm5rkRyP1sruaL65tbJpFxol1RC\n 08Qip.z6JTj7OBGvVMBFw97lLJ419WRjVbyWnLmtisIhESKBaTwMQH1VhMVe\n nFnWv9Lxq68tM3m6uCjVbbCWAXTf6TinTJ0uLf8KlyntBYTfqXiTkREZs5J6\n aOKR9LuBPoqe4fHg.b.DoZ5d5eMUz_wAgmFvInGQwAJskJYwAY_bCXrEhBKu\n QAExvhEMZYoNlKBohtBS7Dhmgdj0nu7PqC9slpEpOKceFLAl5Kp3XGPBaI.p\n KDgoxLPl_.m0ubgJhHfhjSc01JtDltHdTDKM_NOa8Z79ARqMJfoMHKRHDo3v\n DdmcZkdsTWqE5tUFJGa.e7x.TIApk9ra5_mTEhgXSbiovKQZq1ecPma3Ss3F\n 00KVNT2b4Wq0976uu5NW2Ew.Ja7jOsI6zfNVrPN352oerKXW.Z_p23JJTmVJ\n MKc2m4.6DNKUKjmUgoxDYBW4jXKDGG0qq10yo8g73bxu17kQ-\r\nX-Received: from [167.219.48.10] by web122902.mail.ne1.yahoo.com via HTTP; Tue, 07 Jan 2014 00:20:30 PST\r\nX-Rocket-MIMEInfo: 002.001,Tm9haCwgCsKgClRoYW5rcyBmb3IgdGhlIHJlc3BvbnNlLgrCoApUaGUgcHJvYmxlbSBoYXMgcmVzb2x2ZWQgYWZ0ZXIgY2hhbmdpbmcgCsKgCmFyY1JlY29yZENvbnRlbnQgPSBjb250ZW50LnRvU3RyaW5nKCk7CsKgCnRvCsKgCmFyY1JlY29yZENvbnRlbnQgPSBuZXcgU3RyaW5nKGNvbnRlbnQsICJVVEYtOCIpO8KgLS0.IFRoaXMgZ29lcyB0byBteSBkYXRhYmFzZQoKUmVnYXJkcywKUmF2aSBJdGhhCsKgCk9uIFNhdHVyZGF5LCBKYW51YXJ5IDQsIDIwMTQgNDowMSBBTSwgTm9haCBMZXZpdHQgPG5sZXZpdHQBMAEBAQE-\r\nX-Mailer: YahooMailWebService/0.8.172.614\r\nReferences: &lt;1387197630.38407.YahooMailNeo@...&gt;\t&lt;CAA-z70KwoTX8YZxzzjCgYrM+h=GHu_Qy_rSbmoXsA36cr=7cyQ@...&gt;\t&lt;1387267652.39602.YahooMailNeo@...&gt;\t&lt;CAA-z70LKD1z2csK4+mJHXoX+kJ6OtXN890RvvXyU9QLwMB1bXQ@...&gt;\t&lt;1387303984.65002.YahooMailNeo@...&gt;\t&lt;1388757513.27486.YahooMailNeo@...&gt; &lt;CAA-z70JgXy4MRT9oxt0cJ9JfLeqKumq-C1nFcJmnbaQcm56oow@...&gt;\r\nMessage-ID: &lt;1389082830.67951.YahooMailNeo@...&gt;\r\nDate: Tue, 7 Jan 2014 00:20:30 -0800 (PST)\r\nTo: &quot;archive-crawler@yahoogroups.com&quot; &lt;archive-crawler@yahoogroups.com&gt;\r\nIn-Reply-To: &lt;CAA-z70JgXy4MRT9oxt0cJ9JfLeqKumq-C1nFcJmnbaQcm56oow@...&gt;\r\nMIME-Version: 1.0\r\nContent-Type: multipart/alternative; boundary=&quot;1523272866-99382234-1389082830=:67951&quot;\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Arin Patel Itha &lt;iarinpatel@...&gt;\r\nReply-To: Arin Patel Itha &lt;iarinpatel@...&gt;\r\nSubject: Re: [archive-crawler] Heritrix cannot download Non-English text from an English website\r\nX-Yahoo-Group-Post: member; u=558784821; y=iSVmoQZ6fQETdbqZoEjErNF_JshxGmfEfczTPaYH37RJbq7ehQ\r\nX-Yahoo-Profile: iarinpatel\r\n\r\n\r\n--1523272866-99382234-1389082830=:67951\r\nContent-Type: text/plain; charset=utf-8\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nNoah, \n=C2=A0\nThanks for the response.\n=C2=A0\nThe problem has resolved afte=\r\nr changing \n=C2=A0\narcRecordContent =3D content.toString();\n=C2=A0\nto\n=C2=\r\n=A0\narcRecordContent =3D new String(content, &quot;UTF-8&quot;);=C2=A0--&gt; This goes t=\r\no my database\n\nRegards,\nRavi Itha\n=C2=A0\nOn Saturday, January 4, 2014 4:01 =\r\nAM, Noah Levitt &lt;nlevitt@...&gt; wrote:\n  \n=C2=A0 \nArin,\n\nNot sure wha=\r\nt you&#39;re doing with that stuff after the code block you\npasted here, but th=\r\nis line looks suspicious:\n\narcRecordContent =3D content.toString();\n\nBest t=\r\no keep everything in raw bytes all the way through. No need to\nconvert to s=\r\ntring.\n\nNoah\n\nOn Fri, Jan 3, 2014 at 5:58 AM, Arin Patel Itha &lt;iarinpatel@y=\r\nahoo.com&gt; wrote:\n&gt;\n&gt;\n&gt; Hi Noah,\n&gt;\n&gt; Need your help in validating the way I =\r\nam currently reading the records from\n&gt; my Arc file. I assume this is the r=\r\noot cause why the character encoding is\n&gt; not preserved when the data is st=\r\nored into database\n&gt;\n&gt; public static String storeArc(ARCReader reader) {\n&gt;\n=\r\n&gt;  String arcRecordContent =3D &quot;&quot;;\n&gt;  reader.setParseHttpHeaders(true);\n&gt;  =\r\nIterator&lt;ArchiveRecord&gt; iterator =3D reader.iterator();\n&gt;\n&gt;  /**\n&gt;   * Skip=\r\n the header record of Arc file\n&gt;   */\n&gt;  if(iterator.hasNext())\n&gt;   iterato=\r\nr.next();\n&gt;  while(iterator.hasNext()) {\n&gt;\n&gt;     ARCRecord record =3D (ARCR=\r\necord) iterator.next();\n&gt;     ARCRecordMetaData header =3D record.getMetaDa=\r\nta();\n&gt;     record.skipHttpHeader();\n&gt;     ByteArrayOutputStream baos =3D n=\r\new ByteArrayOutputStream();\n&gt;     record.dump(baos);\n&gt;     byte[] content =\r\n=3D baos.toByteArray();\n&gt;     arcRecordContent =3D content.toString();\n&gt;   =\r\n }\n&gt; }\n&gt;\n&gt; After the thread:\n&gt; http://groups.yahoo.com/neo/groups/archive-c=\r\nrawler/conversations/topics/3984\n&gt; , it appears that the issue is with the =\r\ncode that is underlined above.\n&gt;\n&gt; Please advise.\n&gt;\n&gt; ~Arin\n&gt;\n&gt;\n&gt;\n&gt; On Tues=\r\nday, December 17, 2013 11:43 PM, Arin Patel Itha\n&gt; &lt;iarinpatel@...&gt; w=\r\nrote:\n&gt; Hey Noah,\n&gt; You are correct, it&#39;s the issue with my file editor. Te=\r\nxtPad is translating\n&gt; all the Japanese characters into ?. When I open the =\r\nArc file in Notepad I am\n&gt; able to see the right data. I did not think abou=\r\nt it since the Arc data that\n&gt; was loaded into my database also missing the=\r\n original Japanese text.\n&gt; In my programs, I am using org.archive.io.arc.AR=\r\nCReader,\n&gt; org.archive.io.arc.ARCRecord and other classes to load the recor=\r\nds from Arc\n&gt; file and store it into my database. The database has UTF-8 en=\r\ncoding settings\n&gt; but still there is an information loss.\n&gt; I will investig=\r\nate more on this and let you know for further assistance.\n&gt; Thanks for your=\r\n help so far.\n&gt; ~Ravi\n&gt;\n&gt;\n&gt; On Tuesday, December 17, 2013 10:17 PM, Noah Le=\r\nvitt &lt;nlevitt@...&gt;\n&gt; wrote:\n&gt;\n&gt; Arin,\n&gt;\n&gt; I tried crawling that pag=\r\ne and writing to arc, and it worked fine. Is it\n&gt; possible the file got man=\r\ngled by your text editor or something? If not,\n&gt; maybe you can try the late=\r\nst build from\n&gt; http://builds.archive.org/maven2/org/archive/heritrix/herit=\r\nrix/3.2.0-SNAPSHOT/.\n&gt; If the problem persists you might want to debug it y=\r\nourself since I can&#39;t\n&gt; seem to reproduce it.\n&gt;\n&gt; Noah\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; On Tue, De=\r\nc 17, 2013 at 12:07 AM, Arin Patel Itha &lt;iarinpatel@...&gt;\n&gt; wrote:\n&gt;\n&gt;=\r\n [Attachment(s) from Arin Patel Itha included below]\n&gt;\n&gt; Noah,\n&gt;\n&gt; Thanks f=\r\nor responding.\n&gt;\n&gt; The URL: http://en.wikipedia.org/wiki/H%C5%8Dch%C5%8Dd%C=\r\n5%8D\n&gt;\n&gt; ARC file is attached for your review.\n&gt;\n&gt; ~Arin\n&gt;\n&gt;\n&gt; On Tuesday, =\r\nDecember 17, 2013 12:42 PM, Noah Levitt &lt;nlevitt@...&gt;\n&gt; wrote:\n&gt;\n&gt; =\r\nHello Arin,\n&gt;\n&gt; Can you share the url of the site and/or your arc file?\n&gt;\n&gt;=\r\n Noah\n&gt;\n&gt;\n&gt; On Mon, Dec 16, 2013 at 4:40 AM, Arin Patel Itha &lt;iarinpatel@ya=\r\nhoo.com&gt;\n&gt; wrote:\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; All,\n&gt; My Heritrix job cannot download Japanese=\r\n characters from a website.\n&gt; These three characters =E5=BA=96=E4=B8=81=E9=\r\n=81=93 are downloaded as ??? in my Arc file. Rest of the\n&gt; content i.e. Eng=\r\nlish language text was downloaded properly.\n&gt; In the arc file, the header r=\r\necord contains the below values:\n&gt; Content-Type: text/html; charset=3DUTF-8=\r\n\n&gt; The seed I tried to run against contains couple of non-English\n&gt; words/c=\r\nharacters.\n&gt; I am using Heritrix 3.1, so please assist how I can fix this i=\r\nssue.\n&gt; Thanks,\n&gt; Arin Patel.\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; \n  \n \r\n--1523272866-99382234-1389082830=:67951\r\nContent-Type: text/html; charset=utf-8\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;html&gt;&lt;body&gt;&lt;div style=3D&quot;color:#000; background-color:#fff; font-family:lu=\r\ncida console, sans-serif;font-size:12pt&quot;&gt;&lt;div&gt;&lt;span&gt;Noah, &lt;/span&gt;&lt;/div&gt;&lt;div=\r\n&gt;&lt;span&gt;&lt;/span&gt;&nbsp;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Thanks for the response.&lt;/span&gt;&lt;/div&gt;&lt;=\r\ndiv&gt;&lt;span&gt;&lt;/span&gt;&nbsp;&lt;/div&gt;&lt;div&gt;&lt;span&gt;The problem has resolved after chan=\r\nging &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;/span&gt;&nbsp;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;em&gt;arcRecordCon=\r\ntent =3D content.toString();&lt;/em&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;/span&gt;&nbsp;&lt;/div=\r\n&gt;&lt;div&gt;&lt;span&gt;to&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;/span&gt;&nbsp;&lt;/div&gt;&lt;div&gt;&lt;em&gt;&lt;span&gt;&lt;sp=\r\nan&gt;arcRecordContent =3D &lt;/span&gt;&lt;/span&gt;&lt;span&gt;new String(content, &quot;UTF-8&quot;);&n=\r\nbsp;--&gt; This goes to my database&lt;/span&gt;&lt;/em&gt;&lt;/div&gt;&lt;div style=3D&quot;display:=\r\n block;&quot; class=3D&quot;yahoo_quoted&quot;&gt; &lt;br&gt; &lt;/div&gt;&lt;div style=3D&quot;display: block;&quot; =\r\nclass=3D&quot;yahoo_quoted&quot;&gt;Regards,&lt;/div&gt;&lt;div style=3D&quot;display: block;&quot; class=\r\n=3D&quot;yahoo_quoted&quot;&gt;Ravi Itha&lt;br&gt;&nbsp;&lt;/div&gt;&lt;div style=3D&quot;font-family: lucid=\r\na console, sans-serif; font-size: 12pt; display: block;&quot;&gt; &lt;div style=3D&quot;fon=\r\nt-family:\n HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, =\r\nsans-serif; font-size: 12pt;&quot;&gt; &lt;div dir=3D&quot;ltr&quot;&gt; &lt;font size=3D&quot;2&quot; face=3D&quot;A=\r\nrial&quot;&gt; On Saturday, January 4, 2014 4:01 AM, Noah Levitt &lt;nlevitt@archiv=\r\ne.org&gt; wrote:&lt;br&gt; &lt;/font&gt; &lt;/div&gt;  &lt;div class=3D&quot;y_msg_container&quot;&gt;&lt;div id=\r\n=3D&quot;yiv8187912729&quot;&gt;&lt;div&gt;\n&lt;span style=3D&quot;display: none;&quot;&gt;&nbsp;&lt;/span&gt;\n\n\n&lt;di=\r\nv id=3D&quot;yiv8187912729ygrp-mlmsg&quot;&gt;\n  &lt;div id=3D&quot;yiv8187912729ygrp-msg&quot;&gt;\n\n\n  =\r\n  &lt;div id=3D&quot;yiv8187912729ygrp-text&quot;&gt;\n      \n      \n      &lt;div&gt;Arin,&lt;br cle=\r\nar=3D&quot;none&quot;&gt;\n&lt;br clear=3D&quot;none&quot;&gt;\nNot sure what you&#39;re doing with that stuff=\r\n after the code block you&lt;br clear=3D&quot;none&quot;&gt;\npasted here, but this line loo=\r\nks suspicious:&lt;br clear=3D&quot;none&quot;&gt;\n&lt;br clear=3D&quot;none&quot;&gt;\narcRecordContent =3D =\r\ncontent.toString();&lt;br clear=3D&quot;none&quot;&gt;\n&lt;br clear=3D&quot;none&quot;&gt;\nBest to keep eve=\r\nrything in raw bytes all the way through. No need to&lt;br clear=3D&quot;none&quot;&gt;\ncon=\r\nvert to string.&lt;br clear=3D&quot;none&quot;&gt;\n&lt;br clear=3D&quot;none&quot;&gt;\nNoah&lt;br clear=3D&quot;non=\r\ne&quot;&gt;\n&lt;br clear=3D&quot;none&quot;&gt;\nOn Fri, Jan 3, 2014 at 5:58 AM, Arin Patel Itha &lt=\r\n;iarinpatel@...&gt; wrote:&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;=\r\n\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt; Hi Noah,&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;=\r\nnone&quot;&gt;\n&gt; Need your help in validating the way I am currently reading the=\r\n records from&lt;br clear=3D&quot;none&quot;&gt;\n&gt; my Arc file. I assume this is the roo=\r\nt cause why the character encoding is&lt;br clear=3D&quot;none&quot;&gt;\n&gt; not preserved=\r\n when the data is stored into database&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;=\r\nnone&quot;&gt;\n&gt; public static String storeArc(ARCReader reader) {&lt;br clear=3D&quot;n=\r\none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt;  String arcRecordContent =3D &quot;&quot;;&lt;br clea=\r\nr=3D&quot;none&quot;&gt;\n&gt;  reader.setParseHttpHeaders(true);&lt;br clear=3D&quot;none&quot;&gt;\n&gt;=\r\n  Iterator&lt;ArchiveRecord&gt; iterator =3D reader.iterator();&lt;br clear=3D=\r\n&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt;  /**&lt;br clear=3D&quot;none&quot;&gt;\n&gt;   * Skip =\r\nthe header record of Arc file&lt;br clear=3D&quot;none&quot;&gt;\n&gt;   */&lt;br clear=3D&quot;none=\r\n&quot;&gt;\n&gt;  if(iterator.hasNext())&lt;br clear=3D&quot;none&quot;&gt;\n&gt;   iterator.next();&lt;=\r\nbr clear=3D&quot;none&quot;&gt;\n&gt;  while(iterator.hasNext()) {&lt;br clear=3D&quot;none&quot;&gt;\n&gt=\r\n;&lt;br clear=3D&quot;none&quot;&gt;\n&gt;     ARCRecord record =3D (ARCRecord) iterator.nex=\r\nt();&lt;br clear=3D&quot;none&quot;&gt;\n&gt;     ARCRecordMetaData header =3D record.getMet=\r\naData();&lt;br clear=3D&quot;none&quot;&gt;\n&gt;     record.skipHttpHeader();&lt;br clear=3D&quot;n=\r\none&quot;&gt;\n&gt;     ByteArrayOutputStream baos =3D new ByteArrayOutputStream();&lt;=\r\nbr clear=3D&quot;none&quot;&gt;\n&gt;     record.dump(baos);&lt;br clear=3D&quot;none&quot;&gt;\n&gt;     =\r\nbyte[] content =3D baos.toByteArray();&lt;br clear=3D&quot;none&quot;&gt;\n&gt;     arcRecor=\r\ndContent =3D content.toString();&lt;br clear=3D&quot;none&quot;&gt;\n&gt;    }&lt;br clear=3D&quot;n=\r\none&quot;&gt;\n&gt; }&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt; After the thre=\r\nad:&lt;br clear=3D&quot;none&quot;&gt;\n&gt; http://groups.yahoo.com/neo/groups/archive-craw=\r\nler/conversations/topics/3984&lt;br clear=3D&quot;none&quot;&gt;\n&gt; , it appears that the=\r\n issue is with the code that is underlined above.&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;b=\r\nr clear=3D&quot;none&quot;&gt;\n&gt; Please advise.&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;n=\r\none&quot;&gt;\n&gt; ~Arin&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=\r\n=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt; On Tuesday, December 17, 2013 11:43=\r\n PM, Arin Patel Itha&lt;br clear=3D&quot;none&quot;&gt;\n&gt; &lt;iarinpatel@...&gt; w=\r\nrote:&lt;br clear=3D&quot;none&quot;&gt;\n&gt; Hey Noah,&lt;br clear=3D&quot;none&quot;&gt;\n&gt; You are cor=\r\nrect, it&#39;s the issue with my file editor. TextPad is translating&lt;br clear=\r\n=3D&quot;none&quot;&gt;\n&gt; all the Japanese characters into ?. When I open the Arc fil=\r\ne in Notepad I am&lt;br clear=3D&quot;none&quot;&gt;\n&gt; able to see the right data. I did=\r\n not think about it since the Arc data that&lt;br clear=3D&quot;none&quot;&gt;\n&gt; was loa=\r\nded into my database also missing the original Japanese text.&lt;br clear=3D&quot;n=\r\none&quot;&gt;\n&gt; In my programs, I am using org.archive.io.arc.ARCReader,&lt;br clea=\r\nr=3D&quot;none&quot;&gt;\n&gt; org.archive.io.arc.ARCRecord and other classes to load the=\r\n records from Arc&lt;br clear=3D&quot;none&quot;&gt;\n&gt; file and store it into my databas=\r\ne. The database has UTF-8 encoding settings&lt;br clear=3D&quot;none&quot;&gt;\n&gt; but sti=\r\nll there is an information loss.&lt;br clear=3D&quot;none&quot;&gt;\n&gt; I will investigate=\r\n more on this and let you know for further assistance.&lt;br clear=3D&quot;none&quot;&gt;\n&=\r\ngt; Thanks for your help so far.&lt;br clear=3D&quot;none&quot;&gt;\n&gt; ~Ravi&lt;br clear=3D&quot;=\r\nnone&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt; On Tuesday, Dec=\r\nember 17, 2013 10:17 PM, Noah Levitt &lt;nlevitt@...&gt;&lt;br clear=\r\n=3D&quot;none&quot;&gt;\n&gt; wrote:&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt; Arin=\r\n,&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt; I tried crawling that pag=\r\ne and writing to arc, and it worked fine. Is it&lt;br clear=3D&quot;none&quot;&gt;\n&gt; pos=\r\nsible the file got mangled by your text editor or something? If not,&lt;br cle=\r\nar=3D&quot;none&quot;&gt;\n&gt; maybe you can try the latest build from&lt;br clear=3D&quot;none&quot;=\r\n&gt;\n&gt; http://builds.archive.org/maven2/org/archive/heritrix/heritrix/3.2.0=\r\n-SNAPSHOT/.&lt;br clear=3D&quot;none&quot;&gt;\n&gt; If the problem persists you might want =\r\nto debug it yourself since I can&#39;t&lt;br clear=3D&quot;none&quot;&gt;\n&gt; seem to reproduc=\r\ne it.&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt; Noah&lt;br clear=3D&quot;none=\r\n&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n=\r\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt; On Tue, Dec 17, 2013 at 12:07 AM, Arin Patel I=\r\ntha &lt;iarinpatel@...&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt; wrote:&lt;br clear=3D=\r\n&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt; [Attachment(s) from Arin Patel Itha in=\r\ncluded below]&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt; Noah,&lt;br clea=\r\nr=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt; Thanks for responding.&lt;br clear=3D=\r\n&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt; The URL: http://en.wikipedia.org/wiki/=\r\nH%C5%8Dch%C5%8Dd%C5%8D&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt; ARC =\r\nfile is attached for your review.&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;=\r\n&gt;\n&gt; ~Arin&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;no=\r\nne&quot;&gt;\n&gt; On Tuesday, December 17, 2013 12:42 PM, Noah Levitt &lt;nlevitt@a=\r\nrchive.org&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt; wrote:&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br cl=\r\near=3D&quot;none&quot;&gt;\n&gt; Hello Arin,&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&=\r\ngt; Can you share the url of the site and/or your arc file?&lt;br clear=3D&quot;non=\r\ne&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt; Noah&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;n=\r\none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt; On Mon, Dec 16, 2013 at 4:40 AM, Arin Pa=\r\ntel Itha &lt;iarinpatel@...&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt; wrote:&lt;br cle=\r\nar=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=\r\n=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt; All,&lt;br clear=3D&quot;none&quot;&gt;\n&gt; My Her=\r\nitrix job cannot download Japanese characters from a website.&lt;br clear=3D&quot;n=\r\none&quot;&gt;\n&gt; These three characters =E5=BA=96=E4=B8=81=E9=81=93 are downloade=\r\nd as ??? in my Arc file. Rest of the&lt;br clear=3D&quot;none&quot;&gt;\n&gt; content i.e. E=\r\nnglish language text was downloaded properly.&lt;br clear=3D&quot;none&quot;&gt;\n&gt; In th=\r\ne arc file, the header record contains the below values:&lt;br clear=3D&quot;none&quot;&gt;=\r\n\n&gt; Content-Type: text/html; charset=3DUTF-8&lt;br clear=3D&quot;none&quot;&gt;\n&gt; The =\r\nseed I tried to run against contains couple of non-English&lt;br clear=3D&quot;none=\r\n&quot;&gt;\n&gt; words/characters.&lt;br clear=3D&quot;none&quot;&gt;\n&gt; I am using Heritrix 3.1, =\r\nso please assist how I can fix this issue.&lt;br clear=3D&quot;none&quot;&gt;\n&gt; Thanks,&lt;=\r\nbr clear=3D&quot;none&quot;&gt;\n&gt; Arin Patel.&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;non=\r\ne&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;=\r\n\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&g=\r\nt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;=\r\nbr clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br clear=3D&quot;none&quot;&gt;\n&gt;&lt;br =\r\nclear=3D&quot;none&quot;&gt;\n&gt; &lt;br clear=3D&quot;none&quot;&gt;\n&lt;/div&gt;\n\n    &lt;/div&gt;\n     \n\n    \n   =\r\n &lt;div style=3D&quot;height: 0px; color: rgb(255, 255, 255);&quot;&gt;&lt;/div&gt;&lt;/div&gt;\n\n\n&lt;/di=\r\nv&gt;&lt;style type=3D&quot;text/css&quot;&gt;\n#yiv8187912729 #yiv8187912729 --\n  #yiv81879127=\r\n29ygrp-mkp {\nborder:1px solid #d8d8d8;font-family:Arial;margin:10px 0;paddi=\r\nng:0 10px;}\n\n#yiv8187912729 #yiv8187912729ygrp-mkp hr {\nborder:1px solid #d=\r\n8d8d8;}\n\n#yiv8187912729 #yiv8187912729ygrp-mkp #yiv8187912729hd {\ncolor:#62=\r\n8c2a;font-size:85%;font-weight:700;line-height:122%;margin:10px 0;}\n\n#yiv81=\r\n87912729 #yiv8187912729ygrp-mkp #yiv8187912729ads {\nmargin-bottom:10px;}\n\n#=\r\nyiv8187912729 #yiv8187912729ygrp-mkp .yiv8187912729ad {\npadding:0 0;}\n\n#yiv=\r\n8187912729 #yiv8187912729ygrp-mkp .yiv8187912729ad p {\nmargin:0;}\n\n#yiv8187=\r\n912729 #yiv8187912729ygrp-mkp .yiv8187912729ad a {\ncolor:#0000ff;text-decor=\r\nation:none;}\n#yiv8187912729 #yiv8187912729ygrp-sponsor #yiv8187912729ygrp-l=\r\nc {\nfont-family:Arial;}\n\n#yiv8187912729 #yiv8187912729ygrp-sponsor #yiv8187=\r\n912729ygrp-lc #yiv8187912729hd {\nmargin:10px 0px;font-weight:700;font-size:=\r\n78%;line-height:122%;}\n\n#yiv8187912729 #yiv8187912729ygrp-sponsor #yiv81879=\r\n12729ygrp-lc .yiv8187912729ad {\nmargin-bottom:10px;padding:0 0;}\n\n#yiv81879=\r\n12729 #yiv8187912729actions {\nfont-family:Verdana;font-size:11px;padding:10=\r\npx 0;}\n\n#yiv8187912729 #yiv8187912729activity {\nbackground-color:#e0ecee;fl=\r\noat:left;font-family:Verdana;font-size:10px;padding:10px;}\n\n#yiv8187912729 =\r\n#yiv8187912729activity span {\nfont-weight:700;}\n\n#yiv8187912729 #yiv8187912=\r\n729activity span:first-child {\ntext-transform:uppercase;}\n\n#yiv8187912729 #=\r\nyiv8187912729activity span a {\ncolor:#5085b6;text-decoration:none;}\n\n#yiv81=\r\n87912729 #yiv8187912729activity span span {\ncolor:#ff7900;}\n\n#yiv8187912729=\r\n #yiv8187912729activity span .yiv8187912729underline {\ntext-decoration:unde=\r\nrline;}\n\n#yiv8187912729 .yiv8187912729attach {\nclear:both;display:table;fon=\r\nt-family:Arial;font-size:12px;padding:10px 0;width:400px;}\n\n#yiv8187912729 =\r\n.yiv8187912729attach div a {\ntext-decoration:none;}\n\n#yiv8187912729 .yiv818=\r\n7912729attach img {\nborder:none;padding-right:5px;}\n\n#yiv8187912729 .yiv818=\r\n7912729attach label {\ndisplay:block;margin-bottom:5px;}\n\n#yiv8187912729 .yi=\r\nv8187912729attach label a {\ntext-decoration:none;}\n\n#yiv8187912729 blockquo=\r\nte {\nmargin:0 0 0 4px;}\n\n#yiv8187912729 .yiv8187912729bold {\nfont-family:Ar=\r\nial;font-size:13px;font-weight:700;}\n\n#yiv8187912729 .yiv8187912729bold a {=\r\n\ntext-decoration:none;}\n\n#yiv8187912729 dd.yiv8187912729last p a {\nfont-fam=\r\nily:Verdana;font-weight:700;}\n\n#yiv8187912729 dd.yiv8187912729last p span {=\r\n\nmargin-right:10px;font-family:Verdana;font-weight:700;}\n\n#yiv8187912729 dd=\r\n.yiv8187912729last p span.yiv8187912729yshortcuts {\nmargin-right:0;}\n\n#yiv8=\r\n187912729 div.yiv8187912729attach-table div div a {\ntext-decoration:none;}\n=\r\n\n#yiv8187912729 div.yiv8187912729attach-table {\nwidth:400px;}\n\n#yiv81879127=\r\n29 div.yiv8187912729file-title a, #yiv8187912729 div.yiv8187912729file-titl=\r\ne a:active, #yiv8187912729 div.yiv8187912729file-title a:hover, #yiv8187912=\r\n729 div.yiv8187912729file-title a:visited {\ntext-decoration:none;}\n\n#yiv818=\r\n7912729 div.yiv8187912729photo-title a, #yiv8187912729 div.yiv8187912729pho=\r\nto-title a:active, #yiv8187912729 div.yiv8187912729photo-title a:hover, #yi=\r\nv8187912729 div.yiv8187912729photo-title a:visited {\ntext-decoration:none;}=\r\n\n\n#yiv8187912729 div#yiv8187912729ygrp-mlmsg #yiv8187912729ygrp-msg p a spa=\r\nn.yiv8187912729yshortcuts {\nfont-family:Verdana;font-size:10px;font-weight:=\r\nnormal;}\n\n#yiv8187912729 .yiv8187912729green {\ncolor:#628c2a;}\n\n#yiv8187912=\r\n729 .yiv8187912729MsoNormal {\nmargin:0 0 0 0;}\n\n#yiv8187912729 o {\nfont-siz=\r\ne:0;}\n\n#yiv8187912729 #yiv8187912729photos div {\nfloat:left;width:72px;}\n\n#=\r\nyiv8187912729 #yiv8187912729photos div div {\nborder:1px solid #666666;heigh=\r\nt:62px;overflow:hidden;width:62px;}\n\n#yiv8187912729 #yiv8187912729photos di=\r\nv label {\ncolor:#666666;font-size:10px;overflow:hidden;text-align:center;wh=\r\nite-space:nowrap;width:64px;}\n\n#yiv8187912729 #yiv8187912729reco-category {=\r\n\nfont-size:77%;}\n\n#yiv8187912729 #yiv8187912729reco-desc {\nfont-size:77%;}\n=\r\n\n#yiv8187912729 .yiv8187912729replbq {\nmargin:4px;}\n\n#yiv8187912729 #yiv818=\r\n7912729ygrp-actbar div a:first-child {\nmargin-right:2px;padding-right:5px;}=\r\n\n\n#yiv8187912729 #yiv8187912729ygrp-mlmsg {\nfont-size:13px;font-family:Aria=\r\nl, helvetica, clean, sans-serif;}\n\n#yiv8187912729 #yiv8187912729ygrp-mlmsg =\r\ntable {\nfont-size:inherit;font:100%;}\n\n#yiv8187912729 #yiv8187912729ygrp-ml=\r\nmsg select, #yiv8187912729 input, #yiv8187912729 textarea {\nfont:99% Arial,=\r\n Helvetica, clean, sans-serif;}\n\n#yiv8187912729 #yiv8187912729ygrp-mlmsg pr=\r\ne, #yiv8187912729 code {\nfont:115% monospace;}\n\n#yiv8187912729 #yiv81879127=\r\n29ygrp-mlmsg * {\nline-height:1.22em;}\n\n#yiv8187912729 #yiv8187912729ygrp-ml=\r\nmsg #yiv8187912729logo {\npadding-bottom:10px;}\n\n\n#yiv8187912729 #yiv8187912=\r\n729ygrp-msg p a {\nfont-family:Verdana;}\n\n#yiv8187912729 #yiv8187912729ygrp-=\r\nmsg p#yiv8187912729attach-count span {\ncolor:#1E66AE;font-weight:700;}\n\n#yi=\r\nv8187912729 #yiv8187912729ygrp-reco #yiv8187912729reco-head {\ncolor:#ff7900=\r\n;font-weight:700;}\n\n#yiv8187912729 #yiv8187912729ygrp-reco {\nmargin-bottom:=\r\n20px;padding:0px;}\n\n#yiv8187912729 #yiv8187912729ygrp-sponsor #yiv818791272=\r\n9ov li a {\nfont-size:130%;text-decoration:none;}\n\n#yiv8187912729 #yiv818791=\r\n2729ygrp-sponsor #yiv8187912729ov li {\nfont-size:77%;list-style-type:square=\r\n;padding:6px 0;}\n\n#yiv8187912729 #yiv8187912729ygrp-sponsor #yiv8187912729o=\r\nv ul {\nmargin:0;padding:0 0 0 8px;}\n\n#yiv8187912729 #yiv8187912729ygrp-text=\r\n {\nfont-family:Georgia;}\n\n#yiv8187912729 #yiv8187912729ygrp-text p {\nmargin=\r\n:0 0 1em 0;}\n\n#yiv8187912729 #yiv8187912729ygrp-text tt {\nfont-size:120%;}\n=\r\n\n#yiv8187912729 #yiv8187912729ygrp-vital ul li:last-child {\nborder-right:no=\r\nne !important;\n}\n#yiv8187912729 \n&lt;/style&gt;&lt;/div&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;  &lt;/div&gt; &lt;/div=\r\n&gt;&lt;div style=3D&quot;display: block;&quot; class=3D&quot;yahoo_quoted&quot;&gt;  &lt;/div&gt; &lt;/div&gt;&lt;/bod=\r\ny&gt;&lt;/html&gt;\r\n--1523272866-99382234-1389082830=:67951--\r\n\n"}}