{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"BCZ309YEco4XBP0COkF8DkgL14isx1cUHnoKS9aFQJIMvUGdAFj5k65EUXwirP9bfXb2HF61AV-NoN48nONi_RTubNeevHA","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: about continuous crawl(reload seeds)","postDate":"1293746890","msgId":6950,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDREMUQwMkNBLjIwNjA4MDdAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PDIwMTAxMjI5MDk0NDU5MDE1NDk3OUBnbWFpbC5jb20+","referencesHeader":"PDIwMTAxMjI5MDk0NDU5MDE1NDk3OUBnbWFpbC5jb20+"},"prevInTopic":0,"nextInTopic":6953,"prevInTime":6949,"nextInTime":6951,"topicId":6950,"numMessagesInTopic":2,"msgSnippet":"This is an interesting use case. I would not recommend hooking this reload into the frontier s next() method, in H1 or H3, as that s a very central place. (If","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 30562 invoked from network); 30 Dec 2010 22:08:11 -0000\r\nX-Received: from unknown (66.196.94.107)\n  by m14.grp.re1.yahoo.com with QMQP; 30 Dec 2010 22:08:11 -0000\r\nX-Received: from unknown (HELO relay00.pair.com) (209.68.5.9)\n  by mta3.grp.re1.yahoo.com with SMTP; 30 Dec 2010 22:08:11 -0000\r\nX-Received: (qmail 59229 invoked by uid 0); 30 Dec 2010 22:08:10 -0000\r\nX-Received: from 208.70.27.190 (HELO silverbook.local) (208.70.27.190)\n  by relay00.pair.com with SMTP; 30 Dec 2010 22:08:10 -0000\r\nX-pair-Authenticated: 208.70.27.190\r\nMessage-ID: &lt;4D1D02CA.2060807@...&gt;\r\nDate: Thu, 30 Dec 2010 14:08:10 -0800\r\nUser-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.13) Gecko/20101207 Thunderbird/3.1.7\r\nMIME-Version: 1.0\r\nTo: =?UTF-8?B?6YOt6Iq4?= &lt;mickey.guoyun@...&gt;\r\nCc: Heritrix &lt;archive-crawler@yahoogroups.com&gt;\r\nReferences: &lt;201012290944590154979@...&gt;\r\nIn-Reply-To: &lt;201012290944590154979@...&gt;\r\nContent-Type: text/plain; charset=UTF-8; format=flowed\r\nContent-Transfer-Encoding: 8bit\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: about continuous crawl(reload seeds)\r\nX-Yahoo-Group-Post: member; u=137285340; y=HMGRlzZPdCm8-ZqXJE9GzZikQ432q8b-w1O60YJ7ccYB\r\nX-Yahoo-Profile: gojomo\r\n\r\nThis is an interesting use case.\n\nI would not recommend hooking this reload into the frontier&#39;s next() \nmethod, in H1 or H3, as that&#39;s a very central place. (If it&#39;s working \nfor you in H1, that&#39;s OK, but I would still think there may be timing \nrisks doing it there.)\n\nIdeally you&#39;d want to hook off some event which happens when the \nfrontier is empty, but before the crawl commits to a full stop. I can&#39;t \nthink of an existing method/event that exactly meets that need, but it \nseems like a good idea, and I&#39;ll look into the possibility of adding a \nclean, convenient place for this in H3.\n\nIn the meantime, some ideas would be:\n\n• look at the ReschedulingProcessor as an example of how to use a new \nCrawlURI property, &#39;rescheduleTime&#39;, to force a URI to be revisited at a \nspecific time in the future. While this will not allow your seeds to be \nvisited at the moment the frontier is empty, you could use it to ensure \nyour seeds are revisited every N days/hours/minutes/seconds/etc.\n\n• look at the CrawlLimitEnforcer as an example of an optional component \nthat watches ApplicationEvents from the crawl. Events to potentially \nlisten for include CrawlStateEvent, CrawlURIDispositionEvent, and \nStatSnapshotEvent. By either noticing when the crawl is *almost* done, \nor noticing the pause-at-finish, your component could then re-enqueue \nyour seeds at that time (and unpause the crawl if necessary).\n\nEach of these techniques should allow your desired effect by adding a \nnew optional Processor or listening bean, rather than editing core \ncrawler code.\n\nHope this helps,\n\n- Gordon @ IA\n\nOn 12/28/10 5:45 PM, 郭芸 wrote:\n&gt; Hi all,\n&gt; i know H3.0 can run continous crawl by some config(FetchHistoryProcessor\n&gt; PersistStoreProcessor PersistLoadProcessor )。but there is a\n&gt; problem:when crawl finished,Heritrix will pause or exit;but i want to\n&gt; let it crawl again.for example:reload the seeds.\n&gt; i have modified Heritrix 1.14.3&#39;s code,like this:\n&gt; class:\n&gt; org.archive.crawler.frontier.WorkQueueFrontier\n&gt; function:\n&gt; public CrawlURI next() throws InterruptedException, EndedException {\n&gt; while (true) { // loop left only by explicit return or exception\n&gt; // modify by me,add these codes.\n&gt; // if there are no urls to get,let it to reload seeds\n&gt; synchronized (this) {\n&gt;\n&gt;     if (this.controller.getFrontier().isEmpty()) {\n&gt;     loadSeeds();\n&gt;     }\n&gt;\n&gt; }\n&gt; long now = System.currentTimeMillis();\n&gt; // Do common checks for pause, terminate, bandwidth-hold\n&gt; preNext(now);\n&gt; if one thread can not get url from this function，these code what add by\n&gt; me will reload the seeds and by synchronized,so that the othre threads\n&gt; who want to get url will wait for that thread reload seeds finished,and\n&gt; they can get url too.\n&gt; it worked well.and any body can give me some advices?and how about\n&gt; Heritrix3.0?\n&gt; 2010-12-29\n&gt; ------------------------------------------------------------------------\n&gt; 郭芸\n\n"}}