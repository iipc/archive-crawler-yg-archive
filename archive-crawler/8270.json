{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":325624130,"authorName":"Noah Levitt","from":"Noah Levitt &lt;nlevitt@...&gt;","profile":"nlevitt","replyTo":"LIST","senderId":"QcKowEntVqXQfWhNFDHJXmjS0y2oIh-PtrbyyV5vqKuUZylQ5jbyl3si9by1K4nVugoLWGUw2YYm22pF2dwfgPiT2Tk4mwVM","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] TransclusionDecideRule and Content-Type","postDate":"1375300226","msgId":8270,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PENBQS16NzAramZ3YVJ3MGNYLURHS1dEc1Y3ZHcxcDZOblR4cXhQR2FMeFJqNUpweENNZ0BtYWlsLmdtYWlsLmNvbT4=","inReplyToHeader":"PGFscGluZS5XTlQuMi4wMS4xMzA3MjcxNzIxMzcwLjU0OTZAUERJRTQyODIucGZvLm50LmJuZi5mcj4=","referencesHeader":"PGFscGluZS5XTlQuMi4wMS4xMzA3MjcxNzIxMzcwLjU0OTZAUERJRTQyODIucGZvLm50LmJuZi5mcj4="},"prevInTopic":8266,"nextInTopic":0,"prevInTime":8269,"nextInTime":8271,"topicId":8266,"numMessagesInTopic":2,"msgSnippet":"Hello Bert, You only know the content-type of a url after you have fetched at least the http headers. So you could configure the shouldFetchBodyRule in","rawEmail":"Return-Path: &lt;nlevitt@...&gt;\r\nX-Sender: nlevitt@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 41945 invoked by uid 102); 31 Jul 2013 19:50:51 -0000\r\nX-Received: from unknown (HELO mtaq5.grp.bf1.yahoo.com) (10.193.84.36)\n  by m6.grp.bf1.yahoo.com with SMTP; 31 Jul 2013 19:50:51 -0000\r\nX-Received: (qmail 7724 invoked from network); 31 Jul 2013 19:50:51 -0000\r\nX-Received: from unknown (HELO mail.archive.org) (207.241.224.6)\n  by mtaq5.grp.bf1.yahoo.com with SMTP; 31 Jul 2013 19:50:51 -0000\r\nX-Received: from localhost (localhost [127.0.0.1])\n\tby mail.archive.org (Postfix) with ESMTP id 247386840165\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Wed, 31 Jul 2013 12:50:51 -0700 (PDT)\r\nX-Received: from mail.archive.org ([127.0.0.1])\n\tby localhost (mail.archive.org [127.0.0.1]) (amavisd-new, port 10024)\n\twith LMTP id jcnnzyjpddUW for &lt;archive-crawler@yahoogroups.com&gt;;\n\tWed, 31 Jul 2013 12:50:43 -0700 (PDT)\r\nX-Received: from mail-oa0-f53.google.com (mail-oa0-f53.google.com [209.85.219.53])\n\tby mail.archive.org (Postfix) with ESMTPSA id 29D9368401C3\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Wed, 31 Jul 2013 12:50:43 -0700 (PDT)\r\nX-Received: by mail-oa0-f53.google.com with SMTP id k18so1514526oag.40\n        for &lt;archive-crawler@yahoogroups.com&gt;; Wed, 31 Jul 2013 12:50:27 -0700 (PDT)\r\nX-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;\n        d=google.com; s=20120113;\n        h=mime-version:in-reply-to:references:date:message-id:subject:from:to\n         :content-type;\n        bh=Pu8au957uDMb5NB+PE0h3CqD7pRob2RoNEmEbCg3v+M=;\n        b=HEkL3TQ1gNYHi+wIQvDEfftYwIEKtBJ3hKg6+2QnxMrqZ5llcFJAkiqB1BG2bL9Dn5\n         12MAfw7aDHsEDSyxhCOW80+Km45mQLHRJNVjIio1dWmZm3Z23f++0fg3R8G+xWxSsHs2\n         KEwvin6k7q+eh5ouTsGqnQQcwiybWuB0RFRCsNd/zN6nGDWYcBq+M2ClBWcETXjI2eJ9\n         l0alLd8QRS5j9LP062mXEWiwoyp2k+xa1Od4BrIw1nVON3BjMqrOicpzPVxRfNy7H5yq\n         4gOlbGrlRE+VOSuSdK1MaoZKcETq6ejnJZEa05BiUvu07Pdg7f4EPzCjzOZzzBhAyEpO\n         zTOw==\r\nMIME-Version: 1.0\r\nX-Received: by 10.60.93.41 with SMTP id cr9mr11112042oeb.20.1375300226988;\n Wed, 31 Jul 2013 12:50:26 -0700 (PDT)\r\nX-Received: by 10.76.107.198 with HTTP; Wed, 31 Jul 2013 12:50:26 -0700 (PDT)\r\nIn-Reply-To: &lt;alpine.WNT.2.01.1307271721370.5496@...&gt;\r\nReferences: &lt;alpine.WNT.2.01.1307271721370.5496@...&gt;\r\nDate: Wed, 31 Jul 2013 12:50:26 -0700\r\nMessage-ID: &lt;CAA-z70+jfwaRw0cX-DGKWDsV7dw1p6NnTxqxPGaLxRj5JpxCMg@...&gt;\r\nTo: &quot;archive-crawler@yahoogroups.com&quot; &lt;archive-crawler@yahoogroups.com&gt;\r\nContent-Type: multipart/alternative; boundary=047d7b33d2fc7d4a6304e2d40923\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Noah Levitt &lt;nlevitt@...&gt;\r\nSubject: Re: [archive-crawler] TransclusionDecideRule and Content-Type\r\nX-Yahoo-Group-Post: member; u=325624130; y=-Tq7RiihTdvLojuV1_Ktd_5aDENzgO0exi_OTqG2WX2GPA\r\nX-Yahoo-Profile: nlevitt\r\n\r\n\r\n--047d7b33d2fc7d4a6304e2d40923\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nHello Bert,\n\nYou only know the content-type of a url after you have fetched=\r\n at least the\nhttp headers. So you could configure the shouldFetchBodyRule =\r\nin FetchHTTP,\nor you could add a shouldProcessRule to your WARCWriterProces=\r\nsor to avoid\narchiving the unwanted urls. In either case you&#39;ll want to use=\r\n a\nDecideRuleSequence with these rules:\n\n1. RejectDecideRule - reject by de=\r\nfault\n2. HopsPathMatchesRegexDecideRule - accept if hop path does not end i=\r\nn E\n(embed), e.g. .*[^E]$\n3. ContentTypeNotMatchesRegexDecideRule - accept =\r\nif content-type doesn&#39;t\nmatch &quot;text/html&quot;\n\nSo a url will only be rejected i=\r\nf the hop path ends in E and the content\ntype is text/html. You might have =\r\nto refine the regexes further to handle\ncases like redirects (maybe .*[^E]R=\r\n*$); and other related content-types, or\ncontent-types with charset declara=\r\ntions, etc.\n\nNoah\n\n\nOn Sat, Jul 27, 2013 at 8:46 AM, Bert Wendland &lt;bwendla=\r\nnd@...&gt; wrote:\n\n&gt;\n&gt; Hello,\n&gt;\n&gt; We would like to define a scope in a Her=\r\nitrix 1.14 job in a way that URIs\n&gt; which have been accepted by a Transclus=\r\nionDecideRule should only be\n&gt; collected if their Content-Type is not text/=\r\nhtml.\n&gt;\n&gt; That means, for instance, that URIs as a result of an extraction =\r\nfrom\n&gt; JavaScript should be accepted if their contents is an image, css or =\r\nany\n&gt; other resource that might be necessary to build up the web page. If,\n=\r\n&gt; however, a URI extracted from JavaScript points to an ordinary HTML page,=\r\n\n&gt; it should be rejected.\n&gt;\n&gt; Does anybody have an idea how to achieve this=\r\n?\n&gt;\n&gt; Thanks in advance,\n&gt;    Bert\n&gt;\n&gt; --\n&gt; Biblioth=E8que nationale de Fra=\r\nnce\n&gt;\n&gt; ------------------------------------\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n=\r\n&gt;\n\r\n--047d7b33d2fc7d4a6304e2d40923\r\nContent-Type: text/html; charset=ISO-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;div dir=3D&quot;ltr&quot;&gt;&lt;div class=3D&quot;gmail_default&quot; style=3D&quot;font-family:arial,he=\r\nlvetica,sans-serif&quot;&gt;Hello Bert,&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div class=3D&quot;gmail_default&quot; s=\r\ntyle=3D&quot;font-family:arial,helvetica,sans-serif&quot;&gt;You only know the content-t=\r\nype of a url after you have fetched at least the http headers. So you could=\r\n configure the shouldFetchBodyRule in FetchHTTP, or you could add a shouldP=\r\nrocessRule to your WARCWriterProcessor to avoid archiving the unwanted urls=\r\n. In either case you&#39;ll want to use a DecideRuleSequence with these rul=\r\nes:&lt;br&gt;\n&lt;br&gt;\n&lt;/div&gt;&lt;div class=3D&quot;gmail_default&quot; style=3D&quot;font-family:arial,=\r\nhelvetica,sans-serif&quot;&gt;1. RejectDecideRule - reject by default&lt;br&gt;&lt;/div&gt;&lt;div=\r\n class=3D&quot;gmail_default&quot; style=3D&quot;font-family:arial,helvetica,sans-serif&quot;&gt;2=\r\n. HopsPathMatchesRegexDecideRule - accept if hop path does not end in E (em=\r\nbed), e.g. .*[^E]$ &lt;br&gt;\n\n3. ContentTypeNotMatchesRegexDecideRule - accept i=\r\nf content-type doesn&#39;t match &quot;text/html&quot;&lt;br&gt;&lt;/div&gt;&lt;div class=\r\n=3D&quot;gmail_default&quot; style=3D&quot;font-family:arial,helvetica,sans-serif&quot;&gt;&lt;br&gt;So =\r\na url will only be rejected if the hop path ends in E and the content type =\r\nis text/html. You might have to refine the regexes further to handle cases =\r\nlike redirects (maybe .*[^E]R*$); and other related content-types, or conte=\r\nnt-types with charset declarations, etc.&lt;br&gt;\n&lt;br&gt;Noah&lt;br&gt;\n&lt;/div&gt;&lt;div class=\r\n=3D&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div class=3D&quot;gmail_quote&quot;&gt;On Sat, Jul 27, 2013 at=\r\n 8:46 AM, Bert Wendland &lt;span dir=3D&quot;ltr&quot;&gt;&lt;&lt;a href=3D&quot;mailto:bwendland@f=\r\nree.fr&quot; target=3D&quot;_blank&quot;&gt;bwendland@...&lt;/a&gt;&gt;&lt;/span&gt; wrote:&lt;br&gt;\n\n&lt;blo=\r\nckquote class=3D&quot;gmail_quote&quot; style=3D&quot;margin:0 0 0 .8ex;border-left:1px #c=\r\ncc solid;padding-left:1ex&quot;&gt;&lt;br&gt;\nHello,&lt;br&gt;\n&lt;br&gt;\nWe would like to define a s=\r\ncope in a Heritrix 1.14 job in a way that URIs&lt;br&gt;\nwhich have been accepted=\r\n by a TransclusionDecideRule should only be&lt;br&gt;\ncollected if their Content-=\r\nType is not text/html.&lt;br&gt;\n&lt;br&gt;\nThat means, for instance, that URIs as a re=\r\nsult of an extraction from&lt;br&gt;\nJavaScript should be accepted if their conte=\r\nnts is an image, css or any&lt;br&gt;\nother resource that might be necessary to b=\r\nuild up the web page. If,&lt;br&gt;\nhowever, a URI extracted from JavaScript poin=\r\nts to an ordinary HTML page,&lt;br&gt;\nit should be rejected.&lt;br&gt;\n&lt;br&gt;\nDoes anybo=\r\ndy have an idea how to achieve this?&lt;br&gt;\n&lt;br&gt;\nThanks in advance,&lt;br&gt;\n=A0 =\r\n=A0Bert&lt;br&gt;\n&lt;br&gt;\n--&lt;br&gt;\nBiblioth=E8que nationale de France&lt;br&gt;\n&lt;br&gt;\n-------=\r\n-----------------------------&lt;br&gt;\n&lt;br&gt;\nYahoo! Groups Links&lt;br&gt;\n&lt;br&gt;\n&lt;*&g=\r\nt; To visit your group on the web, go to:&lt;br&gt;\n=A0 =A0 &lt;a href=3D&quot;http://gro=\r\nups.yahoo.com/group/archive-crawler/&quot; target=3D&quot;_blank&quot;&gt;http://groups.yahoo=\r\n.com/group/archive-crawler/&lt;/a&gt;&lt;br&gt;\n&lt;br&gt;\n&lt;*&gt; Your email settings:&lt;br&gt;=\r\n\n=A0 =A0 Individual Email | Traditional&lt;br&gt;\n&lt;br&gt;\n&lt;*&gt; To change settin=\r\ngs online go to:&lt;br&gt;\n=A0 =A0 &lt;a href=3D&quot;http://groups.yahoo.com/group/archi=\r\nve-crawler/join&quot; target=3D&quot;_blank&quot;&gt;http://groups.yahoo.com/group/archive-cr=\r\nawler/join&lt;/a&gt;&lt;br&gt;\n=A0 =A0 (Yahoo! ID required)&lt;br&gt;\n&lt;br&gt;\n&lt;*&gt; To chang=\r\ne settings via email:&lt;br&gt;\n=A0 =A0 &lt;a href=3D&quot;mailto:archive-crawler-digest@=\r\nyahoogroups.com&quot; target=3D&quot;_blank&quot;&gt;archive-crawler-digest@yahoogroups.com&lt;/=\r\na&gt;&lt;br&gt;\n=A0 =A0 &lt;a href=3D&quot;mailto:archive-crawler-fullfeatured@yahoogroups.c=\r\nom&quot; target=3D&quot;_blank&quot;&gt;archive-crawler-fullfeatured@yahoogroups.com&lt;/a&gt;&lt;br&gt;\n=\r\n&lt;br&gt;\n&lt;*&gt; To unsubscribe from this group, send an email to:&lt;br&gt;\n=A0 =\r\n=A0 &lt;a href=3D&quot;mailto:archive-crawler-unsubscribe@yahoogroups.com&quot; target=\r\n=3D&quot;_blank&quot;&gt;archive-crawler-unsubscribe@yahoogroups.com&lt;/a&gt;&lt;br&gt;\n&lt;br&gt;\n&lt;*&=\r\ngt; Your use of Yahoo! Groups is subject to:&lt;br&gt;\n=A0 =A0 &lt;a href=3D&quot;http://=\r\ndocs.yahoo.com/info/terms/&quot; target=3D&quot;_blank&quot;&gt;http://docs.yahoo.com/info/te=\r\nrms/&lt;/a&gt;&lt;br&gt;\n&lt;br&gt;\n&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;\n\r\n--047d7b33d2fc7d4a6304e2d40923--\r\n\n"}}