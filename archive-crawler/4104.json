{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"1W3HXiUoGUWHJp--aFvuD1NAS90JydXFs_qQjXUdNkFZ_2nlwVRADJJdP1P2Nd96EVqEgZ_eXrb7AgoUSm5tPJmVdvtnHqY","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] suspecting regression due to [#HER-1109]","postDate":"1176415575","msgId":4104,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ2MUVBRDU3LjQwOTA4MDhAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PDQ2MUU2QzY3LjQwNzA5MDRAYXJjaGl2ZS5vcmc+","referencesHeader":"PGV2bDQ0aythZTZjQGVHcm91cHMuY29tPiA8NDYxRTZDNjcuNDA3MDkwNEBhcmNoaXZlLm9yZz4="},"prevInTopic":4102,"nextInTopic":4107,"prevInTime":4103,"nextInTime":4105,"topicId":4101,"numMessagesInTopic":5,"msgSnippet":"I ve tried to reproduce this against the site which originally motivated the fix -- a site that was using chunked even when responding to an HTTP/1.0","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 91967 invoked from network); 12 Apr 2007 22:05:47 -0000\r\nReceived: from unknown (66.218.67.33)\n  by m44.grp.scd.yahoo.com with QMQP; 12 Apr 2007 22:05:47 -0000\r\nReceived: from unknown (HELO mail.archive.org) (207.241.233.246)\n  by mta7.grp.scd.yahoo.com with SMTP; 12 Apr 2007 22:05:47 -0000\r\nReceived: from localhost (localhost [127.0.0.1])\n\tby mail.archive.org (Postfix) with ESMTP id ADD41141603FC\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Thu, 12 Apr 2007 15:03:44 -0700 (PDT)\r\nReceived: from mail.archive.org ([127.0.0.1])\n\tby localhost (mail.archive.org [127.0.0.1]) (amavisd-new, port 10024)\n\twith LMTP id 16899-07-88 for &lt;archive-crawler@yahoogroups.com&gt;;\n\tThu, 12 Apr 2007 15:03:42 -0700 (PDT)\r\nReceived: from [192.168.1.203] (c-76-102-230-209.hsd1.ca.comcast.net [76.102.230.209])\n\tby mail.archive.org (Postfix) with ESMTP id 33FAD141603CB\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Thu, 12 Apr 2007 15:03:42 -0700 (PDT)\r\nMessage-ID: &lt;461EAD57.4090808@...&gt;\r\nDate: Thu, 12 Apr 2007 15:06:15 -0700\r\nUser-Agent: Thunderbird 1.5.0.10 (X11/20070306)\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;evl44k+ae6c@...&gt; &lt;461E6C67.4070904@...&gt;\r\nIn-Reply-To: &lt;461E6C67.4070904@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 8bit\r\nX-Virus-Scanned: Debian amavisd-new at archive.org\r\nX-eGroups-Msg-Info: 1:0:0:0\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] suspecting regression due to [#HER-1109]\r\nX-Yahoo-Group-Post: member; u=137285340; y=GFn03ww1nzctF9lbIm0NM6Kv7eWKDqBppd8nhP1AxFIF\r\nX-Yahoo-Profile: gojomo\r\n\r\nI&#39;ve tried to reproduce this against the site which originally motivated \nthe fix -- a site that was using &#39;chunked&#39; even when responding to an \nHTTP/1.0 request, against the HTTP/1.1 spec. However, that site has \nchanged its behavior since -- so I can neither verify the fix nor \nreproduce the problem.\n\nSimilarly, while I see the site in your example giving &#39;chunked&#39; \nresponses for Firefox visits, from Heritrix I only get regular responses \n(and thus no hint of the problem you&#39;re reporting).\n\nThis possibility of ARC corruption is very serious and I&#39;d like to be \nable to reproduce and fix, so more details on how you&#39;re crawling would \nbe most helpful. You can also add comments to [#HER-1109].\n\n- Gordon @ IA\n\nGordon Mohr wrote:\n&gt; Thanks for the report.\n&gt; \n&gt; By any chance are you crawling in a manner especially likely to \n&gt; encounter &#39;chunked&#39; content -- for example do you change the request&#39;s \n&gt; declared version to &#39;HTTP/1.1&#39;?\n&gt; \n&gt; - Gordon @ IA\n&gt; \n&gt; pandae667 wrote:\n&gt;&gt; Dear IA-Team,\n&gt;&gt;\n&gt;&gt; since updating my source branch to include (among many other things)\n&gt;&gt; the proposed fix for [#HER-1109] I&#39;m getting lots of broken ARC files.\n&gt;&gt; To be more exact, its not the ARC file being broken, but the content\n&gt;&gt; in the ARC file.\n&gt;&gt;\n&gt;&gt; Thy symphtom seems to always be the same. The real HTTP response\n&gt;&gt; header is mingled with some non-related HTTP header snippets. Those\n&gt;&gt; non-related snippet so far ALWAYS contained &quot;Transfer-Encoding:\n&gt;&gt; chunked&quot; - this is why I&#39;m suspecting [#HER-1109] to be the cause.\n&gt;&gt;\n&gt;&gt; This so far had two different noticable results:\n&gt;&gt;   - I were able to read the ARCRecord, parse HTTP-Headers but ended up\n&gt;&gt; with some unrelated HTTP-Header stuff in the content (due to\n&gt;&gt; additional linebreaks from unrelated HTTP-header)\n&gt;&gt;   - I ended up with an IndexOutOfBoundsException while reading the\n&gt;&gt; ARCRecord ( ARCRecord.read(ARCRecord.java:410) - I think this reader\n&gt;&gt; is still from heritrix 1.8.0 release )\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; Here is a (truncated by me at the end) example record:\n&gt;&gt;\n&gt;&gt; http://www.barke-immobilien.de/index.php?titel=impressum&PHPSESSID=a4b9005c39179754329e4fefeeb1f89e\n&gt;&gt; 81.209.184.140 20070412090240 text/html 4651\n&gt;&gt; HTTP/1.1 200 OK^M\n&gt;&gt; Date: Thu, 12 Apr 2007 08:58:45 GMT^M\n&gt;&gt; Server: Apache^M\n&gt;&gt; X-Powered-By: PHP/5.2.1^M\n&gt;&gt; X-UD-Host: webspace.udag.de^M\n&gt;&gt; X-UD-Method: baukasten^M\n&gt;&gt; X-UD-Target: ^M\n&gt;&gt; Connection: close^M\n&gt;&gt; Transfer-Encoding: chunked^M\n&gt;&gt; Content-Type: text/html^M\n&gt;&gt; ^M\n&gt;&gt; 3Thu, 19 Nov 1981 08:52:00 GMT^M\n&gt;&gt; Cache-Control: no-store, no-cache, must-revalidate, post-check=0,\n&gt;&gt; pre-check=0^M\n&gt;&gt; Pragma: no-cache^M\n&gt;&gt; Connection: close^M\n&gt;&gt; Content-Type: text/html^M\n&gt;&gt; ^M\n&gt;&gt; &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;^M\n&gt;&gt;  &quot;http://www.w3.org/TR/xhtml1/DTD/Strict.dtd&quot;&gt;^M\n&gt;&gt; &lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;de&quot; lang=&quot;de&quot;&gt;^M\n&gt;&gt; &lt;head&gt;^M\n&gt;&gt; &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;\n&gt;&gt; charset=ISO-8859-1&quot; /&gt;^M\n&gt;&gt; &lt;meta name=&quot;keywords&quot; content=&quot;Immobilien, Vermietungen, Verkauf,\n&gt;&gt; H�user, Wohnung, Wohnungen&quot; /&gt;^M\n&gt;&gt; &lt;meta name=&quot;author&quot; content=&quot;Ulf Leis&quot; /&gt;^M\n&gt;&gt; &lt;meta name=&quot;copyright&quot; content=&quot;Ulf Leis&quot; /&gt;^M\n&gt;&gt; &lt;meta name=&quot;organization&quot; content=&quot;Barke Immobilien&quot; /&gt;^M\n&gt;&gt; &lt;meta name=&quot;generator&quot; content=&quot;Scite&quot; /&gt;^M\n&gt;&gt; &lt;meta name=&quot;owner&quot; content=&quot;Andre Barke&quot; /&gt;^M\n&gt;&gt; &lt;meta name=&quot;robots&quot; content=&quot;all&quot; /&gt;^M\n&gt;&gt; &lt;meta name=&quot;description&quot; content=&quot;Auf unseren Webseiten k�nnen Sie\n&gt;&gt; sich �ber unsere Vermietungen und Verk�ufe informieren.&quot; /&gt;^M\n&gt;&gt; &lt;meta name=&quot;language&quot; content=&quot;de&quot; /&gt;^M\n&gt;&gt; &lt;link rel=&quot;SHORTCUT ICON&quot; href=&quot;favicon.ico&quot; /&gt;^M\n&gt;&gt; &lt;title&gt;Barke Immobilien - impressum&lt;/title&gt;^M\n&gt;&gt;\n&gt;&gt; I&#39;m not yet sure if I&#39;ll be able to provide some quick steps to\n&gt;&gt; reproduce this problem - but maybe those infos allready help.\n&gt;&gt;\n&gt;&gt; Regards\n&gt;&gt;   Olaf Freyer\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;  \n&gt;&gt; Yahoo! Groups Links\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt; \n&gt; \n&gt;  \n&gt; Yahoo! Groups Links\n&gt; \n&gt; \n&gt; \n\n\n"}}