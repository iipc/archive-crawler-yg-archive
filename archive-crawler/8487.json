{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":325624130,"authorName":"Noah Levitt","from":"Noah Levitt &lt;nlevitt@...&gt;","profile":"nlevitt","replyTo":"LIST","senderId":"QB97d0l9EChCMyPpM1GCCTeLquQI6V-tLML01WHX0GNIgaP_3fXLRVjbhg2-pm-4-HQdsrgSo9jataZMhWdADh-6zj2-krr3","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] Extracting some links without adding them to crawl queue","postDate":"1396460097","msgId":8487,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PENBQS16NzBMNnhQc1lqNkN1RWN4cjhHV1JaS2pMTkdMZHFvUnQ4WnNmPVEyb3lKdmM4UUBtYWlsLmdtYWlsLmNvbT4=","inReplyToHeader":"PGt1NHIwOStmdDFjQGVHcm91cHMuY29tPg==","referencesHeader":"PGt1NHIwOStmdDFjQGVHcm91cHMuY29tPg=="},"prevInTopic":8299,"nextInTopic":0,"prevInTime":8486,"nextInTime":8488,"topicId":8299,"numMessagesInTopic":2,"msgSnippet":"(I just noticed this in my drafts mail folder, forgot to hit send I guess) That sounds like a fine idea to me and quite doable. You could have the module set","rawEmail":"Return-Path: &lt;nlevitt@...&gt;\r\nX-Sender: nlevitt@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 16856 invoked by uid 102); 2 Apr 2014 17:35:07 -0000\r\nX-Received: from unknown (HELO mtaq5.grp.bf1.yahoo.com) (10.193.84.36)\n  by m2.grp.bf1.yahoo.com with SMTP; 2 Apr 2014 17:35:07 -0000\r\nX-Received: (qmail 18845 invoked from network); 2 Apr 2014 17:35:06 -0000\r\nX-Received: from unknown (HELO mail.archive.org) (207.241.224.6)\n  by mtaq5.grp.bf1.yahoo.com with SMTP; 2 Apr 2014 17:35:06 -0000\r\nX-Received: from localhost (localhost [127.0.0.1])\n\tby mail.archive.org (Postfix) with ESMTP id A4CFFA66073\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Wed,  2 Apr 2014 10:35:06 -0700 (PDT)\r\nX-Received: from mail.archive.org ([127.0.0.1])\n\tby localhost (mail.archive.org [127.0.0.1]) (amavisd-new, port 10024)\n\twith LMTP id 6-Q4SW0rnv-Z for &lt;archive-crawler@yahoogroups.com&gt;;\n\tWed,  2 Apr 2014 10:34:58 -0700 (PDT)\r\nX-Received: from mail-ob0-f179.google.com (mail-ob0-f179.google.com [209.85.214.179])\n\tby mail.archive.org (Postfix) with ESMTPSA id 09384A66074\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Wed,  2 Apr 2014 10:34:57 -0700 (PDT)\r\nX-Received: by mail-ob0-f179.google.com with SMTP id va2so637028obc.24\n        for &lt;archive-crawler@yahoogroups.com&gt;; Wed, 02 Apr 2014 10:34:57 -0700 (PDT)\r\nMIME-Version: 1.0\r\nX-Received: by 10.60.51.227 with SMTP id n3mr1076165oeo.33.1396460097376; Wed,\n 02 Apr 2014 10:34:57 -0700 (PDT)\r\nX-Received: by 10.76.3.211 with HTTP; Wed, 2 Apr 2014 10:34:57 -0700 (PDT)\r\nIn-Reply-To: &lt;ku4r09+ft1c@...&gt;\r\nReferences: &lt;ku4r09+ft1c@...&gt;\r\nDate: Wed, 2 Apr 2014 10:34:57 -0700\r\nMessage-ID: &lt;CAA-z70L6xPsYj6CuEcxr8GWRZKjLNGLdqoRt8Zsf=Q2oyJvc8Q@...&gt;\r\nTo: &quot;archive-crawler@yahoogroups.com&quot; &lt;archive-crawler@yahoogroups.com&gt;\r\nContent-Type: multipart/alternative; boundary=001a11c2fdf60c19fb04f612b4dc\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Noah Levitt &lt;nlevitt@...&gt;\r\nSubject: Re: [archive-crawler] Extracting some links without adding them to\n crawl queue\r\nX-Yahoo-Group-Post: member; u=325624130; y=6Jhsu_YPpKEotssFLoV7qZztxwDK5XPgPH8A-ZPrYIixgg\r\nX-Yahoo-Profile: nlevitt\r\n\r\n\r\n--001a11c2fdf60c19fb04f612b4dc\r\nContent-Type: text/plain; charset=ISO-8859-1\r\n\r\n(I just noticed this in my &quot;drafts&quot; mail folder, forgot to hit send I guess)\n\nThat sounds like a fine idea to me and quite doable.\n\nYou could have the module set a flag on the CrawlURI when its outlinks\nshould not be followed. CrawlURI has a Map&lt;String,Object&gt; that you can get\nwith getData(), whose purpose is &quot;storing status of this URI for use by\nother processors&quot; (javadoc). You can set your flag in there (maybe\n&quot;nofollow&quot;=&gt;Boolean.TRUE).\n\nThen you have to write the code to honor that flag, which means touching\nsomething outside your new module. One approach would be to create a\nDecideRule, which you can add to your scope rules, to reject all outlinks\nfrom a CrawlURI with the &quot;nofollow&quot; tag. Or you could add a clause to\nCandidatesProcessor to skip scheduling the outlinks in case the flag\noccurs. I can see an argument for either approach, but my inclination would\nbe to make the change in CandidatesProcessor, so that the flag can be\neasily used for other cases without extra configuration.\n\nI agree with you about the meta-nofollow handling. If you implement your\nfeature then I&#39;d be happy to switch ExtractorHTML to use the same\n&quot;nofollow&quot; flag on CrawlURI.\n\nNoah\n\n\nOn Sat, Aug 10, 2013 at 12:44 AM, bobbyledingo &lt;pierz@...&gt; wrote:\n\n&gt; Hello,\n&gt;\n&gt; I&#39;m making an antispam stuff that oper on the content level, so I plan to\n&gt; execute this module juste before extractorHTML (or maybe replace it). It\n&gt; will detect and mark the page as web spam based on some criteria.\n&gt;\n&gt; What I want to do if the page is marked as spam is to nofollow the links\n&gt; (like it was meta tag nofollow or something).\n&gt;\n&gt; However, I don&#39;t like how H3 is handling nofollow directive, it just stop\n&gt; link extraction. I want them to be extracted because I want them to appear\n&gt; in outlinks (uri.getOutLinks() in my WriterProcessor), but I don&#39;t want\n&gt; them to be added to the crawl queue (unless there is the same outlinks on a\n&gt; page which is not marked as spam).\n&gt;\n&gt; Is it possible to code such a module or does it take too deep to the H3\n&gt; core ?\n&gt;\n&gt;\n&gt;\n&gt; ------------------------------------\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n&gt;\n\r\n--001a11c2fdf60c19fb04f612b4dc\r\nContent-Type: text/html; charset=ISO-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;div dir=3D&quot;ltr&quot;&gt;&lt;div class=3D&quot;gmail_default&quot; style=3D&quot;font-family:arial,he=\r\nlvetica,sans-serif&quot;&gt;(I just noticed this in my &quot;drafts&quot; mail fold=\r\ner, forgot to hit send I guess)&lt;/div&gt;&lt;div class=3D&quot;gmail_default&quot; style=3D&quot;=\r\nfont-family:arial,helvetica,sans-serif&quot;&gt;\n&lt;br&gt;That sounds like a fine idea t=\r\no me and quite doable.=A0&lt;/div&gt;&lt;div class=3D&quot;gmail_default&quot; style=3D&quot;font-f=\r\namily:arial,helvetica,sans-serif&quot;&gt;\n&lt;br&gt;&lt;/div&gt;&lt;div class=3D&quot;gmail_default&quot; s=\r\ntyle=3D&quot;font-family:arial,helvetica,sans-serif&quot;&gt;You could have the module s=\r\net a flag on the CrawlURI when its outlinks should not be followed. CrawlUR=\r\nI has a Map&lt;String,Object&gt; that you can get with getData(), whose pur=\r\npose is &quot;&lt;span style=3D&quot;font-family:arial&quot;&gt;storing=A0&lt;/span&gt;&lt;span styl=\r\ne=3D&quot;font-family:arial&quot;&gt;status of this URI for use by other processors&quot=\r\n; (javadoc). You can set your flag in there (maybe &quot;nofollow&quot;=3D&=\r\ngt;Boolean.TRUE).&lt;/span&gt;&lt;/div&gt;\n\n&lt;div class=3D&quot;gmail_default&quot; style=3D&quot;font-=\r\nfamily:arial,helvetica,sans-serif&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div class=3D&quot;gmail_default&quot; s=\r\ntyle=3D&quot;font-family:arial,helvetica,sans-serif&quot;&gt;Then you have to write the =\r\ncode to honor that flag, which means touching something outside your new mo=\r\ndule. One approach would be to create a DecideRule, which you can add to yo=\r\nur scope rules, to reject all outlinks from a CrawlURI with the &quot;nofol=\r\nlow&quot; tag. Or you could add a clause to CandidatesProcessor to skip sch=\r\neduling the outlinks in case the flag occurs. I can see an argument for eit=\r\nher approach, but my inclination would be to make the change in CandidatesP=\r\nrocessor, so that the flag can be easily used for other cases without extra=\r\n configuration.&lt;/div&gt;\n\n&lt;div class=3D&quot;gmail_default&quot; style=3D&quot;font-family:ar=\r\nial,helvetica,sans-serif&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div class=3D&quot;gmail_default&quot; style=3D&quot;f=\r\nont-family:arial,helvetica,sans-serif&quot;&gt;I agree with you about the meta-nofo=\r\nllow handling. If you implement your feature then I&#39;d be happy to switc=\r\nh ExtractorHTML to use the same &quot;nofollow&quot; flag on CrawlURI.&lt;/div=\r\n&gt;\n\n&lt;div class=3D&quot;gmail_default&quot; style=3D&quot;font-family:arial,helvetica,sans-s=\r\nerif&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div class=3D&quot;gmail_default&quot; style=3D&quot;font-family:arial,hel=\r\nvetica,sans-serif&quot;&gt;Noah&lt;/div&gt;&lt;div class=3D&quot;gmail_default&quot; style=3D&quot;font-fam=\r\nily:arial,helvetica,sans-serif&quot;&gt;\n\n&lt;br&gt;&lt;/div&gt;&lt;div class=3D&quot;gmail_extra&quot;&gt;&lt;br&gt;=\r\n&lt;div class=3D&quot;gmail_quote&quot;&gt;On Sat, Aug 10, 2013 at 12:44 AM, bobbyledingo &lt;=\r\nspan dir=3D&quot;ltr&quot;&gt;&lt;&lt;a href=3D&quot;mailto:pierz@...&quot; target=3D&quot;_bla=\r\nnk&quot;&gt;pierz@...&lt;/a&gt;&gt;&lt;/span&gt; wrote:&lt;br&gt;\n\n\n&lt;blockquote class=3D&quot;g=\r\nmail_quote&quot; style=3D&quot;margin:0px 0px 0px 0.8ex;border-left-width:1px;border-=\r\nleft-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;Hello=\r\n,&lt;br&gt;\n&lt;br&gt;\nI&#39;m making an antispam stuff that oper on the content level,=\r\n so I plan to execute this module juste before extractorHTML (or maybe repl=\r\nace it). It will detect and mark the page as web spam based on some criteri=\r\na.&lt;br&gt;\n\n\n\n&lt;br&gt;\nWhat I want to do if the page is marked as spam is to nofoll=\r\now the links (like it was meta tag nofollow or something).&lt;br&gt;\n&lt;br&gt;\nHowever=\r\n, I don&#39;t like how H3 is handling nofollow directive, it just stop link=\r\n extraction. I want them to be extracted because I want them to appear in o=\r\nutlinks (uri.getOutLinks() in my WriterProcessor), but I don&#39;t want the=\r\nm to be added to the crawl queue (unless there is the same outlinks on a pa=\r\nge which is not marked as spam).&lt;br&gt;\n\n\n\n&lt;br&gt;\nIs it possible to code such a =\r\nmodule or does it take too deep to the H3 core ?&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n-------=\r\n-----------------------------&lt;br&gt;\n&lt;br&gt;\nYahoo! Groups Links&lt;br&gt;\n&lt;br&gt;\n&lt;*&g=\r\nt; To visit your group on the web, go to:&lt;br&gt;\n=A0 =A0 &lt;a href=3D&quot;http://gro=\r\nups.yahoo.com/group/archive-crawler/&quot; target=3D&quot;_blank&quot;&gt;http://groups.yahoo=\r\n.com/group/archive-crawler/&lt;/a&gt;&lt;br&gt;\n&lt;br&gt;\n&lt;*&gt; Your email settings:&lt;br&gt;=\r\n\n=A0 =A0 Individual Email | Traditional&lt;br&gt;\n&lt;br&gt;\n&lt;*&gt; To change settin=\r\ngs online go to:&lt;br&gt;\n=A0 =A0 &lt;a href=3D&quot;http://groups.yahoo.com/group/archi=\r\nve-crawler/join&quot; target=3D&quot;_blank&quot;&gt;http://groups.yahoo.com/group/archive-cr=\r\nawler/join&lt;/a&gt;&lt;br&gt;\n=A0 =A0 (Yahoo! ID required)&lt;br&gt;\n&lt;br&gt;\n&lt;*&gt; To chang=\r\ne settings via email:&lt;br&gt;\n=A0 =A0 &lt;a href=3D&quot;mailto:archive-crawler-digest@=\r\nyahoogroups.com&quot; target=3D&quot;_blank&quot;&gt;archive-crawler-digest@yahoogroups.com&lt;/=\r\na&gt;&lt;br&gt;\n=A0 =A0 &lt;a href=3D&quot;mailto:archive-crawler-fullfeatured@yahoogroups.c=\r\nom&quot; target=3D&quot;_blank&quot;&gt;archive-crawler-fullfeatured@yahoogroups.com&lt;/a&gt;&lt;br&gt;\n=\r\n&lt;br&gt;\n&lt;*&gt; To unsubscribe from this group, send an email to:&lt;br&gt;\n=A0 =\r\n=A0 &lt;a href=3D&quot;mailto:archive-crawler-unsubscribe@yahoogroups.com&quot; target=\r\n=3D&quot;_blank&quot;&gt;archive-crawler-unsubscribe@yahoogroups.com&lt;/a&gt;&lt;br&gt;\n&lt;br&gt;\n&lt;*&=\r\ngt; Your use of Yahoo! Groups is subject to:&lt;br&gt;\n=A0 =A0 &lt;a href=3D&quot;http://=\r\ndocs.yahoo.com/info/terms/&quot; target=3D&quot;_blank&quot;&gt;http://docs.yahoo.com/info/te=\r\nrms/&lt;/a&gt;&lt;br&gt;\n&lt;br&gt;\n&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;\n\r\n--001a11c2fdf60c19fb04f612b4dc--\r\n\n"}}