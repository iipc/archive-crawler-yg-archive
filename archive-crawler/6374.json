{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":366268246,"authorName":"Derek Pappas","from":"Derek Pappas &lt;derekepappas@...&gt;","profile":"depappas","replyTo":"LIST","senderId":"sbd1VnPju_tZjhnC0xe827hF1QTusO-bIib3jvHS7QZQOYPuF5WVZ73ZT05RxqiCH2uEB897HZ-hAqzSz-WooPDTJEBfR2Z-mWws2Q","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] Re: Heritrix traffic pattern over time","postDate":"1265346896","msgId":6374,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ5Qjg0MEE3LTI3MUQtNDdDMS04NkMwLTIxMzEyQkQ2MUI2QkBnbWFpbC5jb20+","inReplyToHeader":"PDRCNkI2RjE2LjIwNTA3MDBAYXJjaGl2ZS5vcmc+","referencesHeader":"PDRCNjkyNjRFLjYwODA5MDJAYXJjaGl2ZS5vcmc+IDxBQTg2QkVCNC0xMzNCLTQ1OTItQjc2Ri02QzQxQTVGNzNDODhAZ21haWwuY29tPiA8NEI2OUM2OTMuNDA4MDUwM0BhcmNoaXZlLm9yZz4gPEIyNTJEMUMyLUExQUItNEZENi04QjVBLTE0RDJGMEIzMjk2MkBnbWFpbC5jb20+IDw0QjZBMTNCNS40MDUwMjAyQGFyY2hpdmUub3JnPiA8NDJEMkZDQ0EtQkQwOS00RTMwLUEwRUMtQzgyMDNGMUY4MzYyQGdtYWlsLmNvbT4gPDRCNkIyMjZBLjcwNzA0MDhAYXJjaGl2ZS5vcmc+IDw5OTRDNzAyNi03NDJBLTQ5MjktQTZBNS1BOEZGMDI2QTgwQzFAZ21haWwuY29tPiA8NEI2QjZGMTYuMjA1MDcwMEBhcmNoaXZlLm9yZz4="},"prevInTopic":6373,"nextInTopic":6381,"prevInTime":6373,"nextInTime":6375,"topicId":6359,"numMessagesInTopic":10,"msgSnippet":"$ uname -a Linux 2.6.18-92.1.22.el5 #1 SMP Tue Dec 16 11:57:43 EST 2008 x86_64 x86_64 x86_64 GNU/Linux $ java -version java version 1.6.0 OpenJDK  Runtime","rawEmail":"Return-Path: &lt;derekepappas@...&gt;\r\nX-Sender: derekepappas@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 71318 invoked from network); 5 Feb 2010 05:15:04 -0000\r\nX-Received: from unknown (98.137.34.44)\n  by m4.grp.sp2.yahoo.com with QMQP; 5 Feb 2010 05:15:04 -0000\r\nX-Received: from unknown (HELO mail-pz0-f177.google.com) (209.85.222.177)\n  by mta1.grp.sp2.yahoo.com with SMTP; 5 Feb 2010 05:15:04 -0000\r\nX-Received: by pzk7 with SMTP id 7so2196794pzk.12\n        for &lt;archive-crawler@yahoogroups.com&gt;; Thu, 04 Feb 2010 21:15:04 -0800 (PST)\r\nX-Received: by 10.140.180.20 with SMTP id c20mr1499712rvf.12.1265346900863;\n        Thu, 04 Feb 2010 21:15:00 -0800 (PST)\r\nReturn-Path: &lt;derekepappas@...&gt;\r\nX-Received: from ?192.168.1.5? (c-24-6-97-60.hsd1.ca.comcast.net [24.6.97.60])\n        by mx.google.com with ESMTPS id 23sm965105pzk.8.2010.02.04.21.14.58\n        (version=TLSv1/SSLv3 cipher=RC4-MD5);\n        Thu, 04 Feb 2010 21:14:59 -0800 (PST)\r\nMessage-Id: &lt;49B840A7-271D-47C1-86C0-21312BD61B6B@...&gt;\r\nTo: archive-crawler@yahoogroups.com,\n Gordon Mohr &lt;gojomo@...&gt;\r\nIn-Reply-To: &lt;4B6B6F16.2050700@...&gt;\r\nContent-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes\r\nContent-Transfer-Encoding: 7bit\r\nMime-Version: 1.0 (Apple Message framework v936)\r\nDate: Thu, 4 Feb 2010 21:14:56 -0800\r\nReferences: &lt;4B69264E.6080902@...&gt; &lt;AA86BEB4-133B-4592-B76F-6C41A5F73C88@...&gt; &lt;4B69C693.4080503@...&gt; &lt;B252D1C2-A1AB-4FD6-8B5A-14D2F0B32962@...&gt; &lt;4B6A13B5.4050202@...&gt; &lt;42D2FCCA-BD09-4E30-A0EC-C8203F1F8362@...&gt; &lt;4B6B226A.7070408@...&gt; &lt;994C7026-742A-4929-A6A5-A8FF026A80C1@...&gt; &lt;4B6B6F16.2050700@...&gt;\r\nX-Mailer: Apple Mail (2.936)\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Derek Pappas &lt;derekepappas@...&gt;\r\nSubject: Re: [archive-crawler] Re: Heritrix traffic pattern over time\r\nX-Yahoo-Group-Post: member; u=366268246; y=uHLAeZcy4QdfHTQ05Vrn22atXsy5KA3J_9-B2bNzVfka03g\r\nX-Yahoo-Profile: depappas\r\n\r\n$ uname -a\nLinux 2.6.18-92.1.22.el5 #1 SMP Tue Dec 16 11:57:43 EST 2008 x86_64  \nx86_64 x86_64 GNU/Linux\n\n$ java -version\njava version &quot;1.6.0&quot;\nOpenJDK  Runtime Environment (build 1.6.0-b09)\nOpenJDK 64-Bit Server VM (build 1.6.0-b09, mixed mode)\n\nHeritrix version 1.14.3\n\n\nOn our target sites, each fetched URI averages 50KB or more.\n\n20Mbps / 50KB = 50-per-second\n\nOn the 5 machines we are seeing a total of ~12-per-second\n\n\nOn Feb 4, 2010, at 5:06 PM, Gordon Mohr wrote:\n\n&gt; Derek Pappas wrote:\n&gt;&gt; Here are the images that you could not see in the other post.\n&gt;\n&gt; Actually, they still aren&#39;t coming through (to me or in the archives -\n&gt; &lt;http://tech.groups.yahoo.com/group/archive-crawler/message/6371&gt;).  \n&gt; But,\n&gt; let&#39;s just deal with pasted text unless there&#39;s purely-graphical info\n&gt; (like a bandwidth graph) to share.\n&gt;\n&gt; This seems to be a different crawl than those in the previous 2\n&gt; messages, so the issues could be the same or different. (For  \n&gt; example, is\n&gt; this one a 1GB or 8GB machine?)\n&gt;\n&gt; It&#39;s clear you have at least a few target hosts that are either slow  \n&gt; to\n&gt; connect, or failing to connect entirely after a slow timeout. (For\n&gt; example, www-304.ibm.com, www.whirlpool.com -- maybe more would be\n&gt; evident in a longer look at the local-errors or full frontier report.)\n&gt;\n&gt; However, the main holdup suggested by the threads report is a lot of\n&gt; threads waiting for exclusive access to  \n&gt; FrontierScheduler.innerProcess,\n&gt; and the one that has that lock (#17) is doing some disk-access related\n&gt; to its BdbUriUniqFilter, the set that remembers already-enqueued URLs.\n&gt; Some ways to battle that bottleneck:\n&gt;\n&gt; - ensure the target disk for queues/uriUniqFilter (where the job&#39;s\n&gt; &#39;state&#39; directory lives) isn&#39;t slow or overbusy with other IO  \n&gt; (including\n&gt; swapping or other log-writing). Our production crawls almost always\n&gt; target &#39;state&#39; to a dedicated disk, different than where logging and\n&gt; content-writing occurs.\n&gt;\n\nThat makes sense.\n\n\nI do not see the filter options in\n-Modules\n-Submodules\n-Settings\n\nWhich screen(s) is this on?\n\n\n&gt; - replace BdbUriUniqFilter with the purely-in-memory  \n&gt; BloomUriUniqFilter,\n&gt; presuming you have enough memory, your crawl is expected to grow into\n&gt; the 10&#39;s to 100&#39;s of millions of URIs, and understand the implications\n&gt; (like a small false-positive rate where the crawler will skip URIs\n&gt; thinking they&#39;ve already been queued when they haven&#39;t).\n&gt;\n&gt;&gt;&gt; How many machines and applications are sharing that\n&gt;&gt;&gt; 20Mbps?\n&gt;&gt;\n&gt;&gt; 6 machines\n&gt;&gt; Effectively no other applications.\n&gt;\n&gt; Depending on your target sites, each fetched URI could average 20KB or\n&gt; more.\n&gt;\n&gt; 20Mbps / 20KB = 128-per-second\n&gt;\n&gt; So totaled over all your crawlers using that same connection, 128\n&gt; URIs/second might be about the peak rate you could hope for, if all\n&gt; other issues are resolved.\n&gt;\n&gt; For reference, what Heritrix version, Java version, and OS-version are\n&gt; you using?\n&gt;\n&gt; - Gordon @ IA\n&gt;\n&gt;\n&gt; ------------------------------------\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n\n\n"}}