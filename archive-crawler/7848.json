{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":496150545,"authorName":"Markus.Mirsberger","from":"&quot;Markus.Mirsberger&quot; &lt;markus.mirsberger@...&gt;","profile":"mirschi74","replyTo":"LIST","senderId":"1RyYIjuKfuxG-9ZfUoyw3NkRBakzbI_A-8GunD1f45ATJD57DI89E7N9RMOrraL2fVW8ugs02ft8SyPSAkdvUrVxjrHpDianF6zC0Tcyvb0o2FviEQ","spamInfo":{"isSpam":false,"reason":"12"},"subject":"how get ContentHeader of ArchiveRecord","postDate":"1351836593","msgId":7848,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDUwOTM2M0IxLjEwNjA3MDZAZ214LmRlPg==","inReplyToHeader":"PGs2cjZuYytpanU3QGVHcm91cHMuY29tPg==","referencesHeader":"PGs2cjZuYytpanU3QGVHcm91cHMuY29tPg=="},"prevInTopic":7847,"nextInTopic":7849,"prevInTime":7847,"nextInTime":7849,"topicId":7845,"numMessagesInTopic":6,"msgSnippet":"Hello, I have the situation that I want to ignore crawled binary content when Im parsing the warc files. I filtered most binary files already out during crawl","rawEmail":"Return-Path: &lt;markus.mirsberger@...&gt;\r\nX-Sender: markus.mirsberger@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 34022 invoked from network); 2 Nov 2012 06:09:58 -0000\r\nX-Received: from unknown (98.137.34.45)\n  by m5.grp.sp2.yahoo.com with QMQP; 2 Nov 2012 06:09:58 -0000\r\nX-Received: from unknown (HELO mailout-de.gmx.net) (213.165.64.23)\n  by mta2.grp.sp2.yahoo.com with SMTP; 2 Nov 2012 06:09:58 -0000\r\nX-Received: (qmail invoked by alias); 02 Nov 2012 06:09:56 -0000\r\nX-Received: from mx-ll-171.6.180-152.dynamic.3bb.co.th (EHLO [192.168.1.12]) [171.6.180.152]\n  by mail.gmx.net (mp029) with SMTP; 02 Nov 2012 07:09:56 +0100\r\nX-Authenticated: #10074639\r\nX-Provags-ID: V01U2FsdGVkX19Vy6gFI9ZVi/NHRcLZmaUtU8tHWy4RSegDfs/5oV\n\tCuw6y2gvHSkvs0\r\nMessage-ID: &lt;509363B1.1060706@...&gt;\r\nDate: Fri, 02 Nov 2012 13:09:53 +0700\r\nUser-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:16.0) Gecko/20121028 Thunderbird/16.0.2\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;k6r6nc+iju7@...&gt;\r\nIn-Reply-To: &lt;k6r6nc+iju7@...&gt;\r\nContent-Type: multipart/alternative;\n boundary=&quot;------------060601070400090301020907&quot;\r\nX-Y-GMX-Trusted: 0\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: &quot;Markus.Mirsberger&quot; &lt;markus.mirsberger@...&gt;\r\nSubject: how get ContentHeader of ArchiveRecord\r\nX-Yahoo-Group-Post: member; u=496150545; y=eI38EhwTb7FITM7KKOZSqo5Unx2sqEcLEqHfj0H8NVWoYTgpB5ky8EfymBU1hel0R_poD-aV6w4jhwM\r\nX-Yahoo-Profile: mirschi74\r\n\r\n\r\n--------------060601070400090301020907\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\n\r\nHello,\n\n\nI have the situation that I want to ignore crawled binary content when \nIm parsing the warc files.\nI filtered most binary files already out during crawl but there always \nis some binary content in the content.\nE.g At the moment Im crawling a website which dynamically generates \npng-captcha pictures through a php file. I can not filter this out with \na rule on the filename of course.\n\nSo...because the content inside the warc file is binary (Content-Type: \nimage/png) I tried a shouldProcessRule inside the warcWriter bean but in \nthis case somehow the rule not take effect and Im still crawling these \nstupid captcha pictures.\nHere my rule:\n*&lt;property name=&quot;shouldProcessRule&quot;&gt;**\n**    &lt;bean \nclass=&quot;org.archive.modules.deciderules.ContentTypeMatchesRegexDecideRule&quot;&gt;**\n**        &lt;property name=&quot;decision&quot; value=&quot;ACCEPT&quot; /&gt;**\n**        &lt;property name=&quot;regex&quot; value=&quot;^text/html.*&quot; /&gt;**\n**    &lt;/bean&gt;**\n**&lt;/property&gt;*\n\n\nI think the probably best way would be to check the content header when \nI am iterating through the ArchiveRecords.\nThere is a getHeader() method but this is the ArchiveRecordHeader which \nshows me for example what kind of record I have but not tell me much \nabout its content.\nThen there is already a hasContentHeader() method which just shows me if \nthe content has a header or not but I cant find anything which gives me \nthe content header so I can check the content type.\n\nDo I have to parse the header out of the content myself or is there a \nmethod to get this information?\nOr is there maybe a completely different way to get rid of binary content?\n\nThanks,\nMarkus Mirsberger\n\n\n\r\n--------------060601070400090301020907\r\nContent-Type: text/html; charset=ISO-8859-1\r\nContent-Transfer-Encoding: 7bit\r\n\r\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta content=&quot;text/html; charset=ISO-8859-1&quot;\n      http-equiv=&quot;Content-Type&quot;&gt;\n  &lt;/head&gt;\n  &lt;body bgcolor=&quot;#FFFFFF&quot; text=&quot;#000000&quot;&gt;\n    Hello,&lt;br&gt;\n    &lt;br&gt;\n    &lt;br&gt;\n    I have the situation that I want to ignore crawled binary content\n    when Im parsing the warc files.&lt;br&gt;\n    I filtered most binary files already out during crawl but there\n    always is some binary content in the content.&lt;br&gt;\n    E.g At the moment Im crawling a website which dynamically generates\n    png-captcha pictures through a php file. I can not filter this out\n    with a rule on the filename of course.&lt;br&gt;\n    &lt;br&gt;\n    So...because the content inside the warc file is binary\n    (Content-Type: image/png) I tried a shouldProcessRule inside the\n    warcWriter bean but in this case somehow the rule not take effect\n    and Im still crawling these stupid captcha pictures.&lt;br&gt;\n    Here my rule:&lt;br&gt;\n    &lt;b&gt;&lt;property name=&quot;shouldProcessRule&quot;&gt;&lt;/b&gt;&lt;b&gt;&lt;br&gt;\n    &lt;/b&gt;&lt;b&gt;&nbsp;&nbsp;&nbsp; &lt;bean\nclass=&quot;org.archive.modules.deciderules.ContentTypeMatchesRegexDecideRule&quot;&gt;&lt;/b&gt;&lt;b&gt;&lt;br&gt;\n    &lt;/b&gt;&lt;b&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property name=&quot;decision&quot; value=&quot;ACCEPT&quot; /&gt;&lt;/b&gt;&lt;b&gt;&lt;br&gt;\n    &lt;/b&gt;&lt;b&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;property name=&quot;regex&quot; value=&quot;^text/html.*&quot; /&gt;&lt;/b&gt;&lt;b&gt;&lt;br&gt;\n    &lt;/b&gt;&lt;b&gt;&nbsp;&nbsp;&nbsp; &lt;/bean&gt;&lt;/b&gt;&lt;b&gt;&lt;br&gt;\n    &lt;/b&gt;&lt;b&gt;&lt;/property&gt;&lt;/b&gt;&lt;br&gt;\n    &lt;br&gt;\n    &lt;br&gt;\n    I think the probably best way would be to check the content header\n    when I am iterating through the ArchiveRecords.&lt;br&gt;\n    There is a getHeader() method but this is the ArchiveRecordHeader\n    which shows me for example what kind of record I have but not tell\n    me much about its content.&lt;br&gt;\n    Then there is already a hasContentHeader() method which just shows\n    me if the content has a header or not but I cant find anything which\n    gives me the content header so I can check the content type.&lt;br&gt;\n    &lt;br&gt;\n    Do I have to parse the header out of the content myself or is there\n    a method to get this information?&lt;br&gt;\n    Or is there maybe a completely different way to get rid of binary\n    content?&lt;br&gt;\n    &lt;br&gt;\n    Thanks,&lt;br&gt;\n    Markus Mirsberger&lt;br&gt;\n    &lt;br&gt;\n    &lt;br&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n\r\n--------------060601070400090301020907--\r\n\n"}}