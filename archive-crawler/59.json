{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":95697582,"authorName":"G.B.Reddy","from":"&quot;G.B.Reddy&quot; &lt;reddy@...&gt;","profile":"gbreddysoft","replyTo":"LIST","senderId":"Pt3gk3noCARqIKK25VJiCYHL1a-VqG2D1doaOBj-9aBbvBZR5vk_by8qdI8owe-psRZwJ3NSk6zgd3udo9V5GWnk5irRPfw-Mp9TSWg","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] Re: Schedule update !!","postDate":"1052838697","msgId":59,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDRhZGEwMWMzMTk2MSRmMzE1N2UyMCRkNTAwYThjMEB0aWRlbHBhcmsuaXNvZnR0ZWNoaW5kaWEuY29tPg==","referencesHeader":"PDIyYWYwMWMzMDk1NCRkNzE4Yjc5MCRkNTAwYThjMEB0aWRlbHBhcmsuaXNvZnR0ZWNoaW5kaWEuY29tPiA8MDBmOTAxYzMwOWUwJDMyZmFiMDAwJDQ4ZjBlZGQxQFdPUktTVEFUSU9OMjE+IDwyNGY3MDFjMzBhODQkMDg3MmZiZTAkZDUwMGE4YzBAdGlkZWxwYXJrLmlzb2Z0dGVjaGluZGlhLmNvbT4gPDMyNTQwMWMzMGVhNSRmZTJlYWI5MCRkNTAwYThjMEB0aWRlbHBhcmsuaXNvZnR0ZWNoaW5kaWEuY29tPiA8M2VlZTAxYzMxMzEwJGRjNDc3MWEwJGQ1MDBhOGMwQHRpZGVscGFyay5pc29mdHRlY2hpbmRpYS5jb20+IDwwMDliMDFjMzE4YjEkNDQ5Zjg5OTAkNDhmMGVkZDFAV09SS1NUQVRJT04yMT4="},"prevInTopic":0,"nextInTopic":0,"prevInTime":58,"nextInTime":60,"topicId":59,"numMessagesInTopic":1,"msgSnippet":"Gordon, Thanks for the clarifications. I will work on it to get it done. We shall have the weekly conf call tomorrow at 8:30pm PST. The updated project","rawEmail":"Return-Path: &lt;reddy@...&gt;\r\nX-Sender: reddy@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (EGP: mail-8_2_6_6); 13 May 2003 15:15:51 -0000\r\nReceived: (qmail 14490 invoked from network); 13 May 2003 15:15:46 -0000\r\nReceived: from unknown (66.218.66.216)\n  by m3.grp.scd.yahoo.com with QMQP; 13 May 2003 15:15:46 -0000\r\nReceived: from unknown (HELO pub.isofttechindia.com) (203.199.202.17)\n  by mta1.grp.scd.yahoo.com with SMTP; 13 May 2003 15:15:42 -0000\r\nReceived: from ReddyGB (ReddyGB.isofttechindia.com [192.168.0.213])\n\tby pub.isofttechindia.com (8.11.0/8.11.0) with SMTP id h4DEn1G22033\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Tue, 13 May 2003 20:19:01 +0530\r\nMessage-ID: &lt;4ada01c31961$f3157e20$d500a8c0@...&gt;\r\nTo: &lt;archive-crawler@yahoogroups.com&gt;\r\nReferences: &lt;22af01c30954$d718b790$d500a8c0@...&gt; &lt;00f901c309e0$32fab000$48f0edd1@WORKSTATION21&gt; &lt;24f701c30a84$0872fbe0$d500a8c0@...&gt; &lt;325401c30ea5$fe2eab90$d500a8c0@...&gt; &lt;3eee01c31310$dc4771a0$d500a8c0@...&gt; &lt;009b01c318b1$449f8990$48f0edd1@WORKSTATION21&gt;\r\nSubject: Re: [archive-crawler] Re: Schedule update !!\r\nDate: Tue, 13 May 2003 20:41:37 +0530\r\nOrganization: ISoftTech\r\nMIME-Version: 1.0\r\nContent-Type: multipart/mixed;\n\tboundary=&quot;----=_NextPart_000_4AD6_01C31990.0C845510&quot;\r\nX-Priority: 3\r\nX-MSMail-Priority: Normal\r\nX-Mailer: Microsoft Outlook Express 5.50.4920.2300\r\nX-MimeOLE: Produced By Microsoft MimeOLE V5.50.4920.2300\r\nX-MailScanner: Found to be clean\r\nX-eGroups-From: &quot;G.B.Reddy&quot; &lt;reddy@...&gt;\r\nFrom: &quot;G.B.Reddy&quot; &lt;reddy@...&gt;\r\nReply-To: &quot;G.B.Reddy&quot; &lt;reddy@...&gt;\r\nX-Yahoo-Group-Post: member; u=95697582\r\nX-Yahoo-Profile: gbreddysoft\r\n\r\n\r\n------=_NextPart_000_4AD6_01C31990.0C845510\r\nContent-Type: multipart/alternative;\n\tboundary=&quot;----=_NextPart_001_4AD7_01C31990.0C845510&quot;\r\n\r\n\r\n------=_NextPart_001_4AD7_01C31990.0C845510\r\nContent-Type: text/plain;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nGordon,\n\nThanks for the clarifications. I will work on it to get it done.\n\n=\r\nWe shall have the weekly conf call tomorrow at 8:30pm PST. The updated proj=\r\nect schedule is attached for review.\n\nThanks,\nReddy\n\n  ----- Original Messa=\r\nge ----- \n  From: Gordon Mohr \n  To: archive-crawler@yahoogroups.com \n  Sen=\r\nt: Monday, May 12, 2003 11:36 PM\n  Subject: Re: [archive-crawler] Re: Memor=\r\ny Pool manager update !!\n\n\n  Sorry for not getting back to you sooner while=\r\n I was travelling.\n\n  Re: VirtualBuffers\n\n  I think that initially, it is O=\r\nK to assume that the virtualbuffers\n  are only read after all writing has f=\r\ninished -- and to enforce this\n  assumption only by documentation. However,=\r\n it might someday be useful\n  to allow reading -- by the same or other proc=\r\nesses -- of written\n  material before all writing finishes, so I wouldn&#39;t f=\r\noreclose that\n  possibility completely.\n\n  Re: Potential utility subclasses=\r\n\n\n  For example, an HTTPResponseBuffer would somehow know the ranges of\n  i=\r\nts response-line, its headers, its body. (Maybe it would discover\n  these w=\r\nhile first being written; or maybe only later when asked to.)\n\n  It would h=\r\nave convenience methods for accessing key info (eg response\n  code, content=\r\n-type, etc) and even methods for accessing the subparts\n  as constrained vi=\r\news; eg:\n\n    public VirtualBuffer getContentBody();\n    public VirtualBuff=\r\ner getHeaders();\n\n  Does this clarify what I meant? This is really a matter=\r\n of providing\n  maximal convenience to our core classes -- and someday thir=\r\nd-party add-ons --\n  for post-retrieval content-processing.\n\n  - Gordon\n\n  =\r\n----- Original Message ----- \n  From: G.B.Reddy\n  To: archive-crawler@yahoo=\r\ngroups.com\n  Sent: Monday, May 05, 2003 7:16 AM\n  Subject: Re: [archive-cra=\r\nwler] Re: Memory Pool manager update !!\n\n\n  Gordon,\n\n  I am presently worki=\r\nng on doing buffered i/o over RandomAccessFile on the spilled files. On som=\r\ne of the other issues listed below,\n  please send in your thoughts about it=\r\n.\n\n  -- I assume that virtual buffer read will happen only after write comp=\r\nletes. Meaning, the InputStreams should be asked for only\n  after the outpu=\r\nt stream is flushed and closed. Is this right or will other processes keep =\r\nreading it as and when it is being\n  downloaded. Probably, some processes m=\r\night be interested in the header alone; so they need not wait till the end.=\r\n\n\n  -- Subclassing the VirtualBuffers : You had said that a subclasses such=\r\n as HTTPResponseBuffer could be written with functionalities\n  to rewind to=\r\n the header, rewind to the content-body, etc. How would this be done ? Woul=\r\nd we want to take the approach of allowing\n  the internal output stream to =\r\nbe subclassed and overriden so that the parsing could happen during the dow=\r\nnload itself and we would\n  find the indices at which the header starts, th=\r\ne body starts, etc during the parsing.\n\n  We may not need a conf call this =\r\nweek; an e-mail with your comments would do.\n\n  I will not be available tom=\r\norrow (6th May) since I am visiting an university for campus recruitment. I=\r\n would not be accessing mails\n  tomorrow. So, please send do not send mails=\r\n to my personal id. Send it to the yahoogroups id so that I would come to k=\r\nnow through my\n  project manager.\n\n  Thanks,\n  Reddy\n\n  ----- Original Mess=\r\nage ----- \n  From: G.B.Reddy\n  To: archive-crawler@yahoogroups.com\n  Sent: =\r\nWednesday, April 30, 2003 4:50 AM\n  Subject: Re: [archive-crawler] Re: Memo=\r\nry Pool manager update !!\n\n\n  Gordon,\n\n  The MemPoolManager updates are che=\r\ncked into the CVS in the ArchiveOpenCrawler module ( in the same org.archiv=\r\ne.crawler.io package ).\n\n  Some of the outstanding issues are\n\n  -- I assum=\r\ne that virtual buffer read will happen only after write completes. Meaning,=\r\n the InputStreams should be asked for only\n  after the output stream is flu=\r\nshed and closed. Is this right or will other processes keep reading it as a=\r\nnd when it is being\n  downloaded.\n\n  -- Subclassing the VirtualBuffers : Yo=\r\nu had said that a subclasses such as HTTPResponseBuffer could be written wi=\r\nth functionalities\n  to rewind to the header, rewind to the content-body, e=\r\ntc. How would this be done ? Would we want to take the approach of allowing=\r\n\n  the internal output stream to be subclassed and overriden so that the pa=\r\nrsing could happen during the download itself and we would\n  find the indic=\r\nes at which the header starts, the body starts, etc during the parsing.\n\n  =\r\n-- Using a RandomAccessFile for i/o on the spilled file so as to provide se=\r\nek capability : Operations on this RandomAccessFile needs\n  to be a buffere=\r\nd i/o. Not sure what would be the optimal size of this buffer. Taking a 4K =\r\nblock from the pool for the sake of this\n  buffer may be too big. We may ha=\r\nve to think of having some RAMOnlyBuffers allocated from the pool for such =\r\npurposes. These may be of\n  1K or 2K size.\n\n  -- In the implementation that=\r\n is checked in, the streams have a close knowledge of the DiskedVirtualBuff=\r\ner. May have to find another\n  way of doing it.\n\n  -- The clarification nee=\r\nded on contiguous 8K allocations - Raymie to clarify on my previous mail.\n\n=\r\n  If possible, I would have a quick chat with Raymie sometime late evening =\r\ntoday on yahoo messenger to discuss these.\n\n  In the mean time, some of the=\r\n other activities done were.\n\n  -- The complete directory structure created=\r\n for the ArchiveOpenCrawler module.\n  -- A Do&#39;s and Don&#39;ts Readme is writte=\r\nn and checked into the docs directory of the ArchiveOpenCrawler module. Thi=\r\ns talks about the\n  notions to be adhered while using this module.\n  -- Mad=\r\ne the JAnt build.xml file more flexible and configurable so as to make it s=\r\nuitable for running unit tests.\n  -- As of now, the JAnt build script would=\r\n run the nightly unit testing only if the previous day&#39;s nightly build pass=\r\nes. Will have to\n  make it do unit test on the existing latest nightly buil=\r\nd.\n  -- Archives last one week unit test results.\n  -- An Unit test summary=\r\n report would be given in the nightly build mail with a link to the detaile=\r\nd report. Some problems still\n  exist in getting this work.\n\n  We may have =\r\nto start planning on setting up the &quot;Synthetic crawl environment: ~4 in hou=\r\nse machines running web servers&quot;, and the\n  other internet/intranet crawl s=\r\netups as discussed earlier.\n\n  I would be on leave on 1st of May being our =\r\nLabour Day.\n\n  Thanks,\n  Reddy\n\n  ----- Original Message ----- \n  From: G.B=\r\n.Reddy\n  To: archive-crawler@yahoogroups.com\n  Sent: Thursday, April 24, 20=\r\n03 10:37 PM\n  Subject: Re: [archive-crawler] Re: Memory Pool manager attach=\r\ned !!\n\n\n  Raymie,\n\n  On the first day we discussed about the memory pool ma=\r\nnager, we decided that the 8MB big chunk of memory will be broken into piec=\r\nes\n  of 4K each. And the writer would incrementally get 4K blocks one after=\r\n the other until he reaches the max 32K. These 4K blocks need\n  not be cont=\r\niguous. After the 32K max is reached, the whole of it would be written into=\r\n a tmp file and we would procure a contiguous\n  8K block from the pool. Thi=\r\ns 8K block as we discussed will hold the first 8KB data of the fetched page=\r\n. Knowing that Linux uses only\n  a 4KB default page size, we are not very c=\r\nlear why you suggested that we use a contiguous 8K in this case. Can&#39;t it b=\r\ne a non\n  contiguous 4K + 4K, so that we can hold the first 4K data in it a=\r\nnd use the other 4K for buffered i/o on the tmp file. If there is\n  any rea=\r\nson behind it being a contiguous 8K, we will additionally need another 4K t=\r\no use as a buffer for the i/o. If there isn&#39;t any\n  reason, then should the=\r\n pool manager necessarily support contiguous 8K allocations ?\n\n  Thanks,\n  =\r\nReddy\n\n  ----- Original Message ----- \n  From: Gordon Mohr\n  To: G.B.Reddy =\r\n; archive-crawler@yahoogroups.com\n  Sent: Thursday, April 24, 2003 3:05 AM\n=\r\n  Subject: [archive-crawler] Re: Memory Pool manager attached !!\n\n\n  Thanks=\r\n!\n\n  Some thoughts:\n\n  I&#39;d like to approach this part of the system -- buff=\r\ners/streams for\n  multi-Kb entities across one processing cycle -- at three=\r\n separate\n  levels, in order:\n\n  (1) The basic interface offered to other c=\r\nrawler components,\n      hiding implementation details.\n\n  (2) The trick of=\r\n using disk space for large files, because\n      it is impractical to keep =\r\nso many large files in RAM\n      through all processing stages.\n\n  (3) The =\r\noptimization of using recycled internal objects, to\n      minimize garbage =\r\ncollection overhead.\n\n  Part (1) needs to be right and relatively constant =\r\nearly; parts (2)\n  and (3) can be tweaked down the road -- and I&#39;m reluctan=\r\nt to evaluate\n  approaches to (3) just yet, because it is only after seeing=\r\n the latest\n  Java allocators/garbage-collectors do poorly on a naive imple=\r\nmentation\n  that we&#39;ll be able to make sensible pool-management choices.\n\n =\r\n For part (1), please take a look at the abstract classes I&#39;ve placed\n  in =\r\nthe ArchiveOpenCrawler module, src/org/archive/crawler/io [*]:\n\n     Virtua=\r\nlBuffer\n     SeekableInputStream\n     SeekableInputSubstream\n\n  I think the=\r\n &#39;VirtualBuffer&#39; object is useful to tie together the\n  construction of the=\r\n data stream and its later use, rather than\n  using a [Something]OutputStre=\r\nam first and then only at the end asking\n  it for one [Something]InputStrea=\r\nm on the results. Also, it better\n  supports the idea there could be multip=\r\nle independent InputStreams\n  (or CharSequences) on the same read-only buff=\r\ner.\n\n  Fleshing out the potential connections between the abstract classes\n=\r\n  above and the concrete classes you&#39;ve proposed:\n\n    class RewindableSpre=\r\nadInputStream extends SeekableInputStream\n\n    class DiskedVirtualBuffer ex=\r\ntends VirtualBuffer {\n      // naive implementation of VirtualBuffer with a=\r\nssociated Streams/CharSequence classes\n      // that is, &quot;level (2)&quot; above\n=\r\n      // likely uses a RandomAccessFile to augment any in-memory buffer(s)\n=\r\n      // ... //\n    }\n\n    class EconomizingDiskedVirtualBuffer extends Dis=\r\nkedVirtualBuffer {\n      // recycling/optimizable implementation of Virtual=\r\nBuffer\n      // that is, &quot;level (3)&quot; above\n      // somehow utilizes one or=\r\n more managed MemoryArea instances\n\n      public SpreadOutputStream getOutp=\r\nutStream() { /* ... */ }\n      public RewindableSpreadInputStream getInputS=\r\ntream() { /* ... */ }\n    }\n\n  Does this make sense to everyone?\n\n  - Gordo=\r\nn\n\n  [*] http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/archive-crawler/Arc=\r\nhiveOpenCrawler/src/org/archive/crawler/io/\n\n  ----- Original Message -----=\r\n \n  From: G.B.Reddy\n  To: Gordon Mohr\n  Sent: Tuesday, April 22, 2003 9:57 =\r\nPM\n  Subject: Memory Pool manager attached !!\n\n\n  Gordon,\n\n  As requested, =\r\nI am attaching the javadoc/code which we did when Raymie was here in India.=\r\n Some changes which are to be done are\n\n  - Support for Multiple MemPoolMan=\r\nager instances. (don&#39;t make it static)\n  - Use a free list instead of a bit=\r\nmap to track the allocated/free areas.\n\n  Thanks,\n  Reddy\n\n\n  To unsubscrib=\r\ne from this group, send an email to:\n  archive-crawler-unsubscribe@yahoogro=\r\nups.com\n\n\n\n  Your use of Yahoo! Groups is subject to the Yahoo! Terms of Se=\r\nrvice.\n\n\n\n  To unsubscribe from this group, send an email to:\n  archive-cra=\r\nwler-unsubscribe@yahoogroups.com\n\n\n\n  Your use of Yahoo! Groups is subject =\r\nto the Yahoo! Terms of Service.\n\n\n  Yahoo! Groups Sponsor\n\n\n\n  To unsubscri=\r\nbe from this group, send an email to:\n  archive-crawler-unsubscribe@yahoogr=\r\noups.com\n\n\n\n  Your use of Yahoo! Groups is subject to the Yahoo! Terms of S=\r\nervice.\n\n\n        Yahoo! Groups Sponsor \n            Choose your car now! \n=\r\n                                - Make -AcuraAM GeneralAston MartinAudiBent=\r\nleyBMWBuickCadillacChevroletChevrolet TruckChryslerDaewooDodgeDodge TruckFe=\r\nrrariFordFord TruckGMCGMC TruckHondaHyundaiInfinitiIsuzuJaguarJeepKiaLambor=\r\nghiniLand RoverLexusLincolnLotusMazdaMazda TruckMercedes-BenzMercuryMitsubi=\r\nshiNissanNissan TruckOldsmobilePlymouthPontiacPorscheRolls-RoyceSaabSaturnS=\r\nubaruSuzukiToyotaToyota TruckVolkswagenVolvo \n                             =\r\n      \n                         \n                         \n                =\r\n         \n                   \n             \n       \n       \n\n  To unsubscri=\r\nbe from this group, send an email to:\n  archive-crawler-unsubscribe@yahoogr=\r\noups.com\n\n\n\n  Your use of Yahoo! Groups is subject to the Yahoo! Terms of S=\r\nervice. \n\n\r\n------=_NextPart_001_4AD7_01C31990.0C845510\r\nContent-Type: text/html;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot;&gt;\n&lt;HTML&gt;&lt;HEAD&gt;=\r\n\n&lt;META http-equiv=3DContent-Type content=3D&quot;text/html; charset=3Diso-8859-1=\r\n&quot;&gt;\n&lt;META content=3D&quot;MSHTML 5.50.4134.600&quot; name=3DGENERATOR&gt;\n&lt;STYLE&gt;&lt;/STYLE&gt;=\r\n\n&lt;/HEAD&gt;\n&lt;BODY bgColor=3D#ffffff&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Gordon,&lt;=\r\n/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FON=\r\nT face=3DArial size=3D2&gt;Thanks for the clarifications. I will work on it to=\r\n \nget it done.&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;=\r\n/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;We shall have&nbsp;the weekly conf c=\r\nall tomorrow at \n8:30pm PST. The updated project schedule is attached for r=\r\neview.&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;D=\r\nIV&gt;&lt;FONT face=3DArial size=3D2&gt;Thanks,&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial=\r\n size=3D2&gt;Reddy&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;=\r\n&lt;/DIV&gt;\n&lt;BLOCKQUOTE \nstyle=3D&quot;PADDING-RIGHT: 0px; PADDING-LEFT: 5px; MARGIN-=\r\nLEFT: 5px; BORDER-LEFT: #000000 2px solid; MARGIN-RIGHT: 0px&quot;&gt;\n  &lt;DIV style=\r\n=3D&quot;FONT: 10pt arial&quot;&gt;----- Original Message ----- &lt;/DIV&gt;\n  &lt;DIV \n  style=\r\n=3D&quot;BACKGROUND: #e4e4e4; FONT: 10pt arial; font-color: black&quot;&gt;&lt;B&gt;From:&lt;/B&gt; =\r\n\n  &lt;A title=3Dgojomo@... href=3D&quot;mailto:gojomo@...&quot;&gt;Gordon =\r\nMohr&lt;/A&gt; \n  &lt;/DIV&gt;\n  &lt;DIV style=3D&quot;FONT: 10pt arial&quot;&gt;&lt;B&gt;To:&lt;/B&gt; &lt;A \n  title=\r\n=3Darchive-crawler@yahoogroups.com \n  href=3D&quot;mailto:archive-crawler@yahoog=\r\nroups.com&quot;&gt;archive-crawler@yahoogroups.com&lt;/A&gt; \n  &lt;/DIV&gt;\n  &lt;DIV style=3D&quot;FO=\r\nNT: 10pt arial&quot;&gt;&lt;B&gt;Sent:&lt;/B&gt; Monday, May 12, 2003 11:36 PM&lt;/DIV&gt;\n  &lt;DIV sty=\r\nle=3D&quot;FONT: 10pt arial&quot;&gt;&lt;B&gt;Subject:&lt;/B&gt; Re: [archive-crawler] Re: Memory \n =\r\n Pool manager update !!&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;BR&gt;&lt;/DIV&gt;&lt;TT&gt;Sorry for not getting ba=\r\nck to you sooner while I was \n  travelling.&lt;BR&gt;&lt;BR&gt;Re: VirtualBuffers&lt;BR&gt;&lt;B=\r\nR&gt;I think that initially, it is OK \n  to assume that the virtualbuffers&lt;BR&gt;=\r\nare only read after all writing has \n  finished -- and to enforce this&lt;BR&gt;a=\r\nssumption only by documentation. However, \n  it might someday be useful&lt;BR&gt;=\r\nto allow reading -- by the same or other \n  processes -- of written&lt;BR&gt;mate=\r\nrial before all writing finishes, so I wouldn&#39;t \n  foreclose that&lt;BR&gt;possib=\r\nility completely.&lt;BR&gt;&lt;BR&gt;Re: Potential utility \n  subclasses&lt;BR&gt;&lt;BR&gt;For exa=\r\nmple, an HTTPResponseBuffer would somehow know the \n  ranges of&lt;BR&gt;its resp=\r\nonse-line, its headers, its body. (Maybe it would \n  discover&lt;BR&gt;these whil=\r\ne first being written; or maybe only later when asked \n  to.)&lt;BR&gt;&lt;BR&gt;It wou=\r\nld have convenience methods for accessing key info (eg \n  response&lt;BR&gt;code,=\r\n content-type, etc) and even methods for accessing the \n  subparts&lt;BR&gt;as co=\r\nnstrained views; eg:&lt;BR&gt;&lt;BR&gt;&nbsp; public VirtualBuffer \n  getContentBody()=\r\n;&lt;BR&gt;&nbsp; public VirtualBuffer getHeaders();&lt;BR&gt;&lt;BR&gt;Does \n  this clarify =\r\nwhat I meant? This is really a matter of providing&lt;BR&gt;maximal \n  convenienc=\r\ne to our core classes -- and someday third-party add-ons --&lt;BR&gt;for \n  post-=\r\nretrieval content-processing.&lt;BR&gt;&lt;BR&gt;- Gordon&lt;BR&gt;&lt;BR&gt;----- Original \n  Mess=\r\nage ----- &lt;BR&gt;From: G.B.Reddy&lt;BR&gt;To: \n  archive-crawler@yahoogroups.com&lt;BR&gt;=\r\nSent: Monday, May 05, 2003 7:16 \n  AM&lt;BR&gt;Subject: Re: [archive-crawler] Re:=\r\n Memory Pool manager update \n  !!&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Gordon,&lt;BR&gt;&lt;BR&gt;I am presently =\r\nworking on doing buffered i/o over \n  RandomAccessFile on the spilled files=\r\n. On some of the other issues listed \n  below,&lt;BR&gt;please send in your thoug=\r\nhts about it.&lt;BR&gt;&lt;BR&gt;-- I assume that \n  virtual buffer read will happen on=\r\nly after write completes. Meaning, the \n  InputStreams should be asked for =\r\nonly&lt;BR&gt;after the output stream is flushed \n  and closed. Is this right or =\r\nwill other processes keep reading it as and when \n  it is being&lt;BR&gt;download=\r\ned. Probably, some processes might be interested in the \n  header alone; so=\r\n they need not wait till the end.&lt;BR&gt;&lt;BR&gt;-- Subclassing the \n  VirtualBuffe=\r\nrs : You had said that a subclasses such as HTTPResponseBuffer \n  could be =\r\nwritten with functionalities&lt;BR&gt;to rewind to the header, rewind to \n  the c=\r\nontent-body, etc. How would this be done ? Would we want to take the \n  app=\r\nroach of allowing&lt;BR&gt;the internal output stream to be subclassed and \n  ove=\r\nrriden so that the parsing could happen during the download itself and we \n=\r\n  would&lt;BR&gt;find the indices at which the header starts, the body starts, et=\r\nc \n  during the parsing.&lt;BR&gt;&lt;BR&gt;We may not need a conf call this week; an e=\r\n-mail \n  with your comments would do.&lt;BR&gt;&lt;BR&gt;I will not be available tomorr=\r\now (6th May) \n  since I am visiting an university for campus recruitment. I=\r\n would not be \n  accessing mails&lt;BR&gt;tomorrow. So, please send do not send m=\r\nails to my personal \n  id. Send it to the yahoogroups id so that I would co=\r\nme to know through \n  my&lt;BR&gt;project manager.&lt;BR&gt;&lt;BR&gt;Thanks,&lt;BR&gt;Reddy&lt;BR&gt;&lt;BR=\r\n&gt;----- Original Message \n  ----- &lt;BR&gt;From: G.B.Reddy&lt;BR&gt;To: archive-crawler=\r\n@yahoogroups.com&lt;BR&gt;Sent: \n  Wednesday, April 30, 2003 4:50 AM&lt;BR&gt;Subject: =\r\nRe: [archive-crawler] Re: Memory \n  Pool manager update !!&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Gordo=\r\nn,&lt;BR&gt;&lt;BR&gt;The MemPoolManager updates \n  are checked into the CVS in the Arc=\r\nhiveOpenCrawler module ( in the same \n  org.archive.crawler.io package ).&lt;B=\r\nR&gt;&lt;BR&gt;Some of the outstanding issues \n  are&lt;BR&gt;&lt;BR&gt;-- I assume that virtual=\r\n buffer read will happen only after write \n  completes. Meaning, the InputS=\r\ntreams should be asked for only&lt;BR&gt;after the \n  output stream is flushed an=\r\nd closed. Is this right or will other processes \n  keep reading it as and w=\r\nhen it is being&lt;BR&gt;downloaded.&lt;BR&gt;&lt;BR&gt;-- Subclassing \n  the VirtualBuffers =\r\n: You had said that a subclasses such as HTTPResponseBuffer \n  could be wri=\r\ntten with functionalities&lt;BR&gt;to rewind to the header, rewind to \n  the cont=\r\nent-body, etc. How would this be done ? Would we want to take the \n  approa=\r\nch of allowing&lt;BR&gt;the internal output stream to be subclassed and \n  overri=\r\nden so that the parsing could happen during the download itself and we \n  w=\r\nould&lt;BR&gt;find the indices at which the header starts, the body starts, etc \n=\r\n  during the parsing.&lt;BR&gt;&lt;BR&gt;-- Using a RandomAccessFile for i/o on the spi=\r\nlled \n  file so as to provide seek capability : Operations on this RandomAc=\r\ncessFile \n  needs&lt;BR&gt;to be a buffered i/o. Not sure what would be the optim=\r\nal size of this \n  buffer. Taking a 4K block from the pool for the sake of =\r\nthis&lt;BR&gt;buffer may be \n  too big. We may have to think of having some RAMOn=\r\nlyBuffers allocated from the \n  pool for such purposes. These may be of&lt;BR&gt;=\r\n1K or 2K size.&lt;BR&gt;&lt;BR&gt;-- In the \n  implementation that is checked in, the s=\r\ntreams have a close knowledge of the \n  DiskedVirtualBuffer. May have to fi=\r\nnd another&lt;BR&gt;way of doing it.&lt;BR&gt;&lt;BR&gt;-- \n  The clarification needed on con=\r\ntiguous 8K allocations - Raymie to clarify on \n  my previous mail.&lt;BR&gt;&lt;BR&gt;I=\r\nf possible, I would have a quick chat with Raymie \n  sometime late evening =\r\ntoday on yahoo messenger to discuss these.&lt;BR&gt;&lt;BR&gt;In the \n  mean time, some=\r\n of the other activities done were.&lt;BR&gt;&lt;BR&gt;-- The complete \n  directory str=\r\nucture created for the ArchiveOpenCrawler module.&lt;BR&gt;-- A Do&#39;s \n  and Don&#39;t=\r\ns Readme is written and checked into the docs directory of the \n  ArchiveOp=\r\nenCrawler module. This talks about the&lt;BR&gt;notions to be adhered while \n  us=\r\ning this module.&lt;BR&gt;-- Made the JAnt build.xml file more flexible and \n  co=\r\nnfigurable so as to make it suitable for running unit tests.&lt;BR&gt;-- As of \n =\r\n now, the JAnt build script would run the nightly unit testing only if the =\r\n\n  previous day&#39;s nightly build passes. Will have to&lt;BR&gt;make it do unit tes=\r\nt on \n  the existing latest nightly build.&lt;BR&gt;-- Archives last one week uni=\r\nt test \n  results.&lt;BR&gt;-- An Unit test summary report would be given in the =\r\nnightly build \n  mail with a link to the detailed report. Some problems sti=\r\nll&lt;BR&gt;exist in \n  getting this work.&lt;BR&gt;&lt;BR&gt;We may have to start planning o=\r\nn setting up the \n  &quot;Synthetic crawl environment: ~4 in house machines runn=\r\ning web servers&quot;, and \n  the&lt;BR&gt;other internet/intranet crawl setups as dis=\r\ncussed earlier.&lt;BR&gt;&lt;BR&gt;I \n  would be on leave on 1st of May being our Labou=\r\nr \n  Day.&lt;BR&gt;&lt;BR&gt;Thanks,&lt;BR&gt;Reddy&lt;BR&gt;&lt;BR&gt;----- Original Message ----- &lt;BR&gt;F=\r\nrom: \n  G.B.Reddy&lt;BR&gt;To: archive-crawler@yahoogroups.com&lt;BR&gt;Sent: Thursday,=\r\n April 24, \n  2003 10:37 PM&lt;BR&gt;Subject: Re: [archive-crawler] Re: Memory Po=\r\nol manager \n  attached !!&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Raymie,&lt;BR&gt;&lt;BR&gt;On the first day we dis=\r\ncussed about the \n  memory pool manager, we decided that the 8MB big chunk =\r\nof memory will be \n  broken into pieces&lt;BR&gt;of 4K each. And the writer would=\r\n incrementally get 4K \n  blocks one after the other until he reaches the ma=\r\nx 32K. These 4K blocks \n  need&lt;BR&gt;not be contiguous. After the 32K max is r=\r\neached, the whole of it would \n  be written into a tmp file and we would pr=\r\nocure a contiguous&lt;BR&gt;8K block from \n  the pool. This 8K block as we discus=\r\nsed will hold the first 8KB data of the \n  fetched page. Knowing that Linux=\r\n uses only&lt;BR&gt;a 4KB default page size, we are \n  not very clear why you sug=\r\ngested that we use a contiguous 8K in this case. \n  Can&#39;t it be a non&lt;BR&gt;co=\r\nntiguous 4K + 4K, so that we can hold the first 4K data \n  in it and use th=\r\ne other 4K for buffered i/o on the tmp file. If there \n  is&lt;BR&gt;any reason b=\r\nehind it being a contiguous 8K, we will additionally need \n  another 4K to =\r\nuse as a buffer for the i/o. If there isn&#39;t any&lt;BR&gt;reason, then \n  should t=\r\nhe pool manager necessarily support contiguous 8K allocations \n  ?&lt;BR&gt;&lt;BR&gt;T=\r\nhanks,&lt;BR&gt;Reddy&lt;BR&gt;&lt;BR&gt;----- Original Message ----- &lt;BR&gt;From: Gordon \n  Moh=\r\nr&lt;BR&gt;To: G.B.Reddy ; archive-crawler@yahoogroups.com&lt;BR&gt;Sent: Thursday, \n  =\r\nApril 24, 2003 3:05 AM&lt;BR&gt;Subject: [archive-crawler] Re: Memory Pool manage=\r\nr \n  attached !!&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Thanks!&lt;BR&gt;&lt;BR&gt;Some thoughts:&lt;BR&gt;&lt;BR&gt;I&#39;d like t=\r\no \n  approach this part of the system -- buffers/streams for&lt;BR&gt;multi-Kb en=\r\ntities \n  across one processing cycle -- at three separate&lt;BR&gt;levels, in \n =\r\n order:&lt;BR&gt;&lt;BR&gt;(1) The basic interface offered to other crawler \n  componen=\r\nts,&lt;BR&gt;&nbsp;&nbsp;&nbsp; hiding implementation details.&lt;BR&gt;&lt;BR&gt;(2) \n  The =\r\ntrick of using disk space for large files, because&lt;BR&gt;&nbsp;&nbsp;&nbsp; \n =\r\n it is impractical to keep so many large files in RAM&lt;BR&gt;&nbsp;&nbsp;&nbsp;=\r\n \n  through all processing stages.&lt;BR&gt;&lt;BR&gt;(3) The optimization of using rec=\r\nycled \n  internal objects, to&lt;BR&gt;&nbsp;&nbsp;&nbsp; minimize garbage collec=\r\ntion \n  overhead.&lt;BR&gt;&lt;BR&gt;Part (1) needs to be right and relatively constant=\r\n early; \n  parts (2)&lt;BR&gt;and (3) can be tweaked down the road -- and I&#39;m rel=\r\nuctant to \n  evaluate&lt;BR&gt;approaches to (3) just yet, because it is only aft=\r\ner seeing the \n  latest&lt;BR&gt;Java allocators/garbage-collectors do poorly on =\r\na naive \n  implementation&lt;BR&gt;that we&#39;ll be able to make sensible pool-manag=\r\nement \n  choices.&lt;BR&gt;&lt;BR&gt;For part (1), please take a look at the abstract c=\r\nlasses I&#39;ve \n  placed&lt;BR&gt;in the ArchiveOpenCrawler module, src/org/archive/=\r\ncrawler/io \n  [*]:&lt;BR&gt;&lt;BR&gt;&nbsp;&nbsp; VirtualBuffer&lt;BR&gt;&nbsp;&nbsp; \n  See=\r\nkableInputStream&lt;BR&gt;&nbsp;&nbsp; SeekableInputSubstream&lt;BR&gt;&lt;BR&gt;I think the =\r\n\n  &#39;VirtualBuffer&#39; object is useful to tie together the&lt;BR&gt;construction of =\r\nthe \n  data stream and its later use, rather than&lt;BR&gt;using a [Something]Out=\r\nputStream \n  first and then only at the end asking&lt;BR&gt;it for one [Something=\r\n]InputStream on \n  the results. Also, it better&lt;BR&gt;supports the idea there =\r\ncould be multiple \n  independent InputStreams&lt;BR&gt;(or CharSequences) on the =\r\nsame read-only \n  buffer.&lt;BR&gt;&lt;BR&gt;Fleshing out the potential connections bet=\r\nween the abstract \n  classes&lt;BR&gt;above and the concrete classes you&#39;ve propo=\r\nsed:&lt;BR&gt;&lt;BR&gt;&nbsp; class \n  RewindableSpreadInputStream extends SeekableInp=\r\nutStream&lt;BR&gt;&lt;BR&gt;&nbsp; class \n  DiskedVirtualBuffer extends VirtualBuffer {=\r\n&lt;BR&gt;&nbsp;&nbsp;&nbsp; // naive \n  implementation of VirtualBuffer with ass=\r\nociated Streams/CharSequence \n  classes&lt;BR&gt;&nbsp;&nbsp;&nbsp; // that is, &quot;=\r\nlevel (2)&quot; \n  above&lt;BR&gt;&nbsp;&nbsp;&nbsp; // likely uses a RandomAccessFile=\r\n to augment any \n  in-memory buffer(s)&lt;BR&gt;&nbsp;&nbsp;&nbsp; // ... //&lt;BR&gt;&=\r\nnbsp; }&lt;BR&gt;&lt;BR&gt;&nbsp; \n  class EconomizingDiskedVirtualBuffer extends Diske=\r\ndVirtualBuffer \n  {&lt;BR&gt;&nbsp;&nbsp;&nbsp; // recycling/optimizable implemen=\r\ntation of \n  VirtualBuffer&lt;BR&gt;&nbsp;&nbsp;&nbsp; // that is, &quot;level (3)&quot; \n =\r\n above&lt;BR&gt;&nbsp;&nbsp;&nbsp; // somehow utilizes one or more managed Memory=\r\nArea \n  instances&lt;BR&gt;&lt;BR&gt;&nbsp;&nbsp;&nbsp; public SpreadOutputStream \n  ge=\r\ntOutputStream() { /* ... */ }&lt;BR&gt;&nbsp;&nbsp;&nbsp; public \n  RewindableSpr=\r\neadInputStream getInputStream() { /* ... */ }&lt;BR&gt;&nbsp; \n  }&lt;BR&gt;&lt;BR&gt;Does th=\r\nis make sense to everyone?&lt;BR&gt;&lt;BR&gt;- Gordon&lt;BR&gt;&lt;BR&gt;[*] &lt;A \n  href=3D&quot;http://=\r\ncvs.sourceforge.net/cgi-bin/viewcvs.cgi/archive-crawler/ArchiveOpenCrawler/=\r\nsrc/org/archive/crawler/io/&quot;&gt;http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi=\r\n/archive-crawler/ArchiveOpenCrawler/src/org/archive/crawler/io/&lt;/A&gt;&lt;BR&gt;&lt;BR&gt;=\r\n----- \n  Original Message ----- &lt;BR&gt;From: G.B.Reddy&lt;BR&gt;To: Gordon Mohr&lt;BR&gt;S=\r\nent: \n  Tuesday, April 22, 2003 9:57 PM&lt;BR&gt;Subject: Memory Pool manager att=\r\nached \n  !!&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Gordon,&lt;BR&gt;&lt;BR&gt;As requested, I am attaching the java=\r\ndoc/code \n  which we did when Raymie was here in India. Some changes which =\r\nare to be done \n  are&lt;BR&gt;&lt;BR&gt;- Support for Multiple MemPoolManager instance=\r\ns. (don&#39;t make it \n  static)&lt;BR&gt;- Use a free list instead of a bitmap to tr=\r\nack the allocated/free \n  areas.&lt;BR&gt;&lt;BR&gt;Thanks,&lt;BR&gt;Reddy&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;To unsu=\r\nbscribe from this group, send \n  an email \n  to:&lt;BR&gt;archive-crawler-unsubsc=\r\nribe@yahoogroups.com&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Your use of \n  Yahoo! Groups is subject=\r\n to the Yahoo! Terms of Service.&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;To \n  unsubscribe from this=\r\n group, send an email \n  to:&lt;BR&gt;archive-crawler-unsubscribe@yahoogroups.com=\r\n&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Your use of \n  Yahoo! Groups is subject to the Yahoo! Terms=\r\n of Service.&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Yahoo! \n  Groups Sponsor&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;To unsubscr=\r\nibe from this group, send an email \n  to:&lt;BR&gt;archive-crawler-unsubscribe@ya=\r\nhoogroups.com&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Your use of \n  Yahoo! Groups is subject to the=\r\n Yahoo! Terms of Service.&lt;BR&gt;&lt;BR&gt;&lt;/TT&gt;&lt;BR&gt;&lt;BR&gt;&lt;TT&gt;To \n  unsubscribe from th=\r\nis group, send an email \n  to:&lt;BR&gt;archive-crawler-unsubscribe@yahoogroups.c=\r\nom&lt;BR&gt;&lt;BR&gt;&lt;/TT&gt;&lt;BR&gt;&lt;BR&gt;&lt;TT&gt;Your \n  use of Yahoo! Groups is subject to the &lt;=\r\nA \n  href=3D&quot;http://docs.yahoo.com/info/terms/&quot;&gt;Yahoo! Terms of Service&lt;/A&gt;=\r\n.&lt;/TT&gt; \n&lt;BR&gt;&lt;/BLOCKQUOTE&gt;&lt;/BODY&gt;&lt;/HTML&gt;\n\r\n------=_NextPart_001_4AD7_01C31990.0C845510--\r\n\n\r\n------=_NextPart_000_4AD6_01C31990.0C845510\r\nContent-Type: application/x-zip-compressed;\n\tname=&quot;CrawlSchedule.zip&quot;\r\nContent-Disposition: attachment;\n\tfilename=&quot;CrawlSchedule.zip&quot;\r\n\r\n[ Attachment content not displayed ]\r\n------=_NextPart_000_4AD6_01C31990.0C845510--\r\n\n"}}