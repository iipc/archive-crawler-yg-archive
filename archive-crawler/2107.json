{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"l2vAKoTGm-ory3OfX9zxKFq8vGG4xtwAkPJOyAg0cP6W2JN2u2Z33PpZuaBEYcopyl06xjJsyrlo-k2cVo6EZ4HUypBBAyQ","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] InstancePerThread interface","postDate":"1124141917","msgId":2107,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQzMDEwQjVELjYwNDAyMDRAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGRkcXQ2aStyNGc5QGVHcm91cHMuY29tPg==","referencesHeader":"PGRkcXQ2aStyNGc5QGVHcm91cHMuY29tPg=="},"prevInTopic":2105,"nextInTopic":2108,"prevInTime":2106,"nextInTime":2108,"topicId":2105,"numMessagesInTopic":4,"msgSnippet":"InstancePerThread is meant to signify that a Processor is not sufficiently thread-safe to let a single instance serve for all ToeThreads. It was previously","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 52376 invoked from network); 15 Aug 2005 21:38:42 -0000\r\nReceived: from unknown (66.218.66.172)\n  by m35.grp.scd.yahoo.com with QMQP; 15 Aug 2005 21:38:42 -0000\r\nReceived: from unknown (HELO ia00524.archive.org) (207.241.224.172)\n  by mta4.grp.scd.yahoo.com with SMTP; 15 Aug 2005 21:38:42 -0000\r\nReceived: (qmail 1409 invoked by uid 100); 15 Aug 2005 21:38:38 -0000\r\nReceived: from adsl-71-130-102-78.dsl.pltn13.pacbell.net (HELO ?192.168.1.10?) (gojomo@...@71.130.102.78)\n  by mail-dev.archive.org with SMTP; 15 Aug 2005 21:38:38 -0000\r\nMessage-ID: &lt;43010B5D.6040204@...&gt;\r\nDate: Mon, 15 Aug 2005 14:38:37 -0700\r\nUser-Agent: Mozilla Thunderbird 1.0.6-1.1.fc3 (X11/20050720)\r\nX-Accept-Language: en-us, en\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;ddqt6i+r4g9@...&gt;\r\nIn-Reply-To: &lt;ddqt6i+r4g9@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-Spam-DCC: : \r\nX-Spam-Checker-Version: SpamAssassin 2.63 (2004-01-11) on ia00524.archive.org\r\nX-Spam-Level: \r\nX-Spam-Status: No, hits=-66.0 required=7.0 tests=AWL,HTML_MESSAGE,\n\tUSER_IN_WHITELIST autolearn=no version=2.63\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] InstancePerThread interface\r\nX-Yahoo-Group-Post: member; u=137285340; y=s3nhiqqG9sG99myfJVpbmOWkoQ5K-IiIO6QCJxTsDy3j\r\nX-Yahoo-Profile: gojomo\r\n\r\n&#39;InstancePerThread&#39; is meant to signify that a Processor is not\nsufficiently thread-safe to let a single instance serve for all\nToeThreads. It was previously needed for one of our default\nProcessors (I think it was FetchHTTP), but is not currently used\nby any standard Processors, and thus may not have been recently\ntested/maintained to work properly.\n\nI doubt you need InstancePerThread; it would only affect the number\nof threads progressing if your single-instance processor had lengthy\nsynchronized blocks -- and even then the threads would show as\n&#39;active&#39; (and waiting to enter your synchronized block) -- not as\ninactive.\n\nIf you are configuring your crawl with many ToeThreads, but only\nseeing one active, it&#39;s most likely that&#39;s because the standard\npoliteness behavior -- never opening more than one connection to\na single hostname and never hitting a single hostname too rapidly --\nmake it so that with your crawl, no more than a single (or small\nnumber) of threads is ever needed.\n\nHow many hosts are you trying to crawl? What does a &#39;threads\nreport&#39; and &#39;frontier report&#39; show during the crawl -- are there\nan excess of &#39;READY&#39; queues in the frontier while threads\nsit idle?\n\n- Gordon @ IA\n\nSUNYAl wrote:\n&gt; I created my own plugins and have been unsuccessful in getting more\n&gt; than one active ToeThread to run at once.  I was looking at the source\n&gt; and wondering if there was something that I didn&#39;t implement properly.\n&gt;  I came across the InstancePerThread interface.  Can anyone tell me if\n&gt; this is what I should implement in order to get more than one\n&gt; ToeThread running at once?  Also when I tried to implement this in my\n&gt; class it gave me an exception at the getParent() call for my\n&gt; processor.  What would be the correct implementation for my processor\n&gt; do to be setup correctly?  And does this really help alleviate the\n&gt; single running ToeThread even when the setting number is something\n&gt; like 100.\n&gt; \n&gt; java.lang.NullPointerException\n&gt; \tat\n&gt; org.archive.crawler.settings.ComplexType.setAttribute(ComplexType.java:550)\n&gt; \tat org.archive.crawler.framework.Processor.spawn(Processor.java:226)\n&gt; \tat\n&gt; org.archive.crawler.framework.ToeThread.getProcessor(ToeThread.java:325)\n&gt; \tat\n&gt; org.archive.crawler.framework.ToeThread.processCrawlUri(ToeThread.java:269)\n&gt; \tat org.archive.crawler.framework.ToeThread.run(ToeThread.java:142)\n&gt; java.lang.NullPointerException\n&gt; \tat\n&gt; org.archive.crawler.settings.ComplexType.getSettingsFromObject(ComplexType.java:331)\n&gt; \tat\n&gt; org.archive.crawler.settings.ComplexType.getSettingsFromObject(ComplexType.java:371)\n&gt; \tat\n&gt; org.archive.crawler.settings.ComplexType.getAttribute(ComplexType.java:449)\n&gt; \tat\n&gt; org.archive.crawler.settings.ComplexType.getAttribute(ComplexType.java:429)\n&gt; \tat org.archive.crawler.framework.Processor.process(Processor.java:95)\n&gt; \tat\n&gt; org.archive.crawler.framework.ToeThread.processCrawlUri(ToeThread.java:272)\n&gt; \tat org.archive.crawler.framework.ToeThread.run(ToeThread.java:142)\n&gt; \n&gt; \n&gt; The call processor.spawn(...) throws an NPE\n&gt; \n&gt; ------- ToeThread.java -------\n&gt; \n&gt;  private Processor getProcessor(Processor processor) {\n&gt;         if(!(processor instanceof InstancePerThread)) {\n&gt;             // just use the shared Processor\n&gt;              return processor;\n&gt;         }\n&gt;         // must use local copy of processor\n&gt;         Processor localProcessor = (Processor) localProcessors.get(\n&gt;                     processor.getClass().getName());\n&gt;         if (localProcessor == null) {\n&gt;             localProcessor = processor.spawn(this.getSerialNumber());\n&gt;            \n&gt; localProcessors.put(processor.getClass().getName(),localProcessor);\n&gt;         }\n&gt;         return localProcessor;\n&gt;     }\n&gt; \n&gt; ----------------------------\n&gt; \n&gt; ------ Processor.java --------\n&gt;  public Processor spawn(int serialNum) {\n&gt;         Processor newInst = null;\n&gt;         try {\n&gt;             Constructor co =\n&gt;                 getClass().getConstructor(new Class[] { String.class });\n&gt;             newInst =\n&gt;                 (Processor) co.newInstance(new Object[] {\n&gt;                     getName() + serialNum\n&gt;                     });\n&gt;             getParent().setAttribute(newInst);\n&gt;             newInst.setTransient(true);\n&gt;         } catch (Exception e) {\n&gt;             // TODO Auto-generated catch block\n&gt;             e.printStackTrace();\n&gt;         }\n&gt;         return newInst;\n&gt;     }\n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt;  \n&gt; Yahoo! Groups Links\n&gt; \n&gt; \n&gt; \n&gt;  \n&gt; \n&gt; \n\n"}}