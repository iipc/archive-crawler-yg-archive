{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"&quot;Gordon Mohr&quot; &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"Gq4mA-gFUHG8SwppWip1_aviMOsZxgL9U6qOq2B6vxH_FqK-i6IODvLdV0imxuTvaLY1IQK7UCJkg4u2hB9908N6U1pirHePiQ","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] SEDA Performance !!","postDate":"1050347029","msgId":43,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDAwMjMwMWMzMDJiOCQ5NGZiZTUwMCQ0OGYwZWRkMUBXT1JLU1RBVElPTjIxPg==","referencesHeader":"PDA0ZmIwMWMzMDA3NyRmZGNkZDg2MCRkNTAwYThjMEB0aWRlbHBhcmsuaXNvZnR0ZWNoaW5kaWEuY29tPg=="},"prevInTopic":42,"nextInTopic":44,"prevInTime":42,"nextInTime":44,"topicId":42,"numMessagesInTopic":7,"msgSnippet":"Thanks for the updated analysis! However, I am concerned that the results may be more a result of the test design or the specific HTTP implementation we re","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (EGP: mail-8_2_6_5); 14 Apr 2003 19:04:04 -0000\r\nReceived: (qmail 77487 invoked from network); 14 Apr 2003 19:04:03 -0000\r\nReceived: from unknown (66.218.66.218)\n  by m14.grp.scd.yahoo.com with QMQP; 14 Apr 2003 19:04:03 -0000\r\nReceived: from unknown (HELO mail.archive.org) (209.237.232.56)\n  by mta3.grp.scd.yahoo.com with SMTP; 14 Apr 2003 19:04:02 -0000\r\nReceived: from WORKSTATION21 (b116-dyn-72.archive.org [209.237.240.72])\n\tby iahost-232-56.archive.org (8.12.8/8.10.2) with SMTP id h3EILYMK009259\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Mon, 14 Apr 2003 11:21:34 -0700\r\nMessage-ID: &lt;002301c302b8$94fbe500$48f0edd1@WORKSTATION21&gt;\r\nTo: &lt;archive-crawler@yahoogroups.com&gt;\r\nReferences: &lt;04fb01c30077$fdcdd860$d500a8c0@...&gt;\r\nSubject: Re: [archive-crawler] SEDA Performance !!\r\nDate: Mon, 14 Apr 2003 12:03:49 -0700\r\nMIME-Version: 1.0\r\nContent-Type: text/plain;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: 7bit\r\nX-Priority: 3\r\nX-MSMail-Priority: Normal\r\nX-Mailer: Microsoft Outlook Express 6.00.2800.1106\r\nX-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1106\r\nFrom: &quot;Gordon Mohr&quot; &lt;gojomo@...&gt;\r\nX-Yahoo-Group-Post: member; u=137285340\r\nX-Yahoo-Profile: gojomo\r\n\r\nThanks for the updated analysis!\n\nHowever, I am concerned that the results may be more a result of the\ntest design or the specific HTTP implementation we&#39;re using than the\nunderlying NIO/aSocket code, because the results diverge so greatly\nfrom SEDA&#39;s own published performance testing.\n\nFor example, the results at...\n\n  http://www.cs.berkeley.edu/~mdw/proj/sandstorm/iocore-bench/index.html\n\n...show strong throughput up through 1,000 simultaneous connections,\nindeed even up past 10,000 simultaneous connections.\n\nAlso, given the note about the 1.4.1 -&gt; 1.4.2 JRE NIO change, a test\nunder 1.4.2 is necessary to truly evaluate either of the asynchronous\noptions.\n\nSome other questions about the test setup:\n\n - the meaning of &quot;maxConnections&quot; is unclear to me; it seems it\n   is not a &quot;maximum&quot; but a &quot;target&quot;, and the actual number of\n   connections at any point in time might be larger or smaller.\n   Is this right?\n\n - do you have any other intrumentation which suggests it is\n   specifically garbage collection which is causing the degradation\n   of the SEDA approach above 100 connections?\n\n - if some of the setups are hitting garbage-collection or other\n   resource thresholds, more info about the test machine/VM would\n   be helpful: RAM, VM options used (server hotspot? heap/stack\n   sizes? etc.)\n\n - with only 2 Apache web servers to one client process, we may\n   be testing/hitting Apache performance limits as much as Java/IO\n   limits. For example, default Apache will only accept 150 simultaneous\n   clients; by my reading of the test setup this means that no\n   matter how many connections the LAN test attempted, it would\n   never succeed on more than 300 (across the two test Apaches)\n   at once -- so any LAN test numbers over 300 aren&#39;t really\n   indicative of Java performance.\n\n - is the test code something you could check into CVS?\n\nThese figures are all very interesting, and even if quirks in\nthe test are pushing results one way or the other, that will\nusually generate useful info, too.\n\n- Gordon\n\n----- Original Message -----\nFrom: G.B.Reddy\nTo: archive-crawler@yahoogroups.com\nSent: Friday, April 11, 2003 3:16 PM\nSubject: Re: [archive-crawler] SEDA Performance !!\n\n\nGordon,\n\nPlease find attached the performance report on the SEDA aSocket NIO layer. Look for the last section in the document &quot;SEDA NIO\nSocket Framework&quot; and the &quot;Summary&quot; section is also updated with the results. An excel sheet with the readings and the graph is also\nattached for reference.\n\nWe would like to have a brief chat with you on Tuesday 8:30 pm PST ( Monday is a holiday for us on the eve of Tamil new year ) about\nSEDA socket layer and generally about the various tasks and other proceedings.\n\nJAnt Build Status :\n\n- The proposed directory structure is not yet created since we are still in the Anecdote prototyping stage and we do not have any\ncomplete package to checkin. I have modified the ant script a bit to suit the present Anecdote structure and activated a cronjob\nover it. I have also added you and Raymie to the notification mail-ids list so that you would also get the nightly build mails. You\ncould get the nightly build from the location &quot;/home/users/w/wc/wcr-team/NightlyBuilds&quot; as stated in the mail on\nshell.sourceforge.net. You could use your own logins and do SFTP to access the NightlyBuilds directory. It has read permissions for\nall.\n\n- I am not sure why the stata labs libraries ( st.ata.* packages) have been checked in as a separate CVS module. Are we planning to\nupgrade/modify those sources and maintain ourselves. If not, we could just have the built classes in a jar in CVS lib directory as\nwe had done for other third party libraries. Otherwise, if we want to maintain it, then would we require that to be a separate CVS\nmodule ? I think it would be better if we have one CVS root module under which everything is put in. Probably, in such cases, we can\nhave a &quot;thiryPartySrc&quot; directory to maintain such sources within our main module &quot;OpenWebCrawler&quot; itself.\n\nThanks,\nReddy\n\n\n----- Original Message -----\nFrom: G.B.Reddy\nTo: archive-crawler@yahoogroups.com\nSent: Friday, April 11, 2003 12:46 AM\nSubject: Re: [archive-crawler] Status !!\n\n\nGordon,\n\nAs you say, the aSocketInputStream is needed only if the client stage is multithreaded. But the oceanstore &quot;HttpClient&quot; stage is\ninternally using it to do sequencing which is unnecessary since anyway the &quot;HttpClient&quot; class implements\nSingleThreadedEventHandlerIF. I have removed these overheads to do my performance testing.\n\nAfter starting to test the SEDA socket performance, I ran into three problems in the SEDA&#39;s socket framework.\n\n- Newly discovered bug : The seda internals throw ConcurrentModification exceptions when iterating through the selector&#39;s registered\nkeys. This exceptions is highly reproducible when more number of concurrent downloads happen. Synchronization has not been taken\ncare when the ReadEventHandler tries to deregister the socket from the selector of the WriteEventHandler. ( As you would know, there\nare three stages ReadStage, WriteStage and ListenStage in the seda socket framework. Each has its own java Selector instance and\nthey wait on its select call. The ReadStage is the one that determines that a connection is terminated. When this happens, it\ndirectly tries to make a deregister call on the WriteStage&#39;s selector on this socket object. So, easily concurrent mod exceptions\nare thrown when my downloader stage is pumping requests and making new connections). I shall raise this bug to the author and I am\nproceeding with my fix on it. Because of this unsynchronized communication, a lot of CancelledKeyExceptions are also thrown in the\ninternals.\n\n- A documented bug : ConcurrentModification exceptions when iterating through the selector&#39;s selectedKeys. This is also due to no\nsynchronization. Multiple threads are allowed by the seda internals to do select calls on a single selector. (Look for the docs in\nseda.sandStorm.lib.aSocket.nio.NIOSelectSource.doPoll method). I will have to look for doing some minimal synchronization as stated\nin there.\n\n- There has been other rare NullPointerExceptions and IllegalArgumentException in some places. I will have to look into their\nimplications.\n\nI will fix the last two problems and get the performance measurements tomorrow.\n\nThanks,\nReddy\n\n----- Original Message -----\nFrom: Gordon Mohr\nTo: archive-crawler@yahoogroups.com\nSent: Wednesday, April 09, 2003 12:17 AM\nSubject: Re: [archive-crawler] Status !!\n\n\nThanks for the update!\n\nThe Ocenstore libhttp package is known to be very rough; really just a\nplaceholder or starting point for what we&#39;d need. (Note that there&#39;s\nalso an alternative &#39;libhttp2&#39; package in OceanStore, but it seemed both\nunused in their other code and more elaborate, so I haven&#39;t tried\nto use it yet.)\n\nThe TCP response ordering capabilities to aSocketInputStream only seem\nnecessary if you have multiple threads reading from the same socket -- which\nI think can, and probably should, be avoided.\n\nI&#39;m looking forward to seeing the test results.\n\nI like the BuildDesign proposal; please move forward with creating\nthat structure for a new module on the sourceforge CVS. However,\nplease use the module name of &quot;ArchiveOpenCrawler&quot; (instead of\n&quot;Web-crawler&quot;).\n\nThanks!\n\n- Gordon\n\n----- Original Message -----\nFrom: G.B.Reddy\nTo: archive-crawler@yahoogroups.com\nSent: Tuesday, April 08, 2003 11:04 AM\nSubject: [archive-crawler] Status !!\n\n\nGordon,\n\nI am presently working on the SEDA socket overhead determination work. I will get the results in the next two days. Some initial\ninsights into it are\n- Oceanstore manages both Tx and Rx in a single stage.\n- It just holds the responses in memory only. It does not write into tmp files if they are huge.\n- TCP response reordering is done by using the seda.sandStorm.lib.aSocket.aSocketInputStream class which reorders packets according\nto the ATcpInPacket sequence number.\n\nThe test that will be done :\n- Port the downloader code ( which we had written earlier during the java nio performance tests ) to SEDA framework and use the\nOceanStore library for HTTP fetching. The same tests that we did for the downloader will be repeated in this oceanstore setup. We\nare removing some oceanstore code to make it similar. The result of this test would tell us the percentage of overhead imposed by\nthe SEDA framework.\n\n\nWe are also done with the JAnt packaging scripts. It uses the present CVS structure itself. I shall create the proposed CVS\nstructure after you approve it. Today we have put the cronjob for testing the web hosting part of nightly builds. We shall enable it\nfor all tomorrow. As of now, only the last nightly build will be available for download. More changes need to be made for hosting\nevery nightly build of a week.\n\nThanks,\nReddy\n\nYahoo! Groups Sponsor\nADVERTISEMENT\n\n\n\n\nTo unsubscribe from this group, send an email to:\narchive-crawler-unsubscribe@yahoogroups.com\n\n\n\nYour use of Yahoo! Groups is subject to the Yahoo! Terms of Service.\n\n\n\nTo unsubscribe from this group, send an email to:\narchive-crawler-unsubscribe@yahoogroups.com\n\n\n\nYour use of Yahoo! Groups is subject to the Yahoo! Terms of Service.\n\n\n\nTo unsubscribe from this group, send an email to:\narchive-crawler-unsubscribe@yahoogroups.com\n\n\n\nYour use of Yahoo! Groups is subject to the Yahoo! Terms of Service.\n\n\nYahoo! Groups Sponsor\nADVERTISEMENT\n\n\n\n\nTo unsubscribe from this group, send an email to:\narchive-crawler-unsubscribe@yahoogroups.com\n\n\n\nYour use of Yahoo! Groups is subject to the Yahoo! Terms of Service.\n\n\n"}}