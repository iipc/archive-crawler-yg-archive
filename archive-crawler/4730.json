{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"dVz8fxcuRlxgpEDrz9sSciq_q9pW-kGl9N928602N4e8ffBz9mYmqm6TU3XKFN7IIfSCn81EaaQlX3CfnzVQBibRXbIp6ys","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] JVM crash while running a large crawl","postDate":"1195584427","msgId":4730,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ3NDMyQkFCLjYwNzAxMDhAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PDQ3NDMxODZCLjUwNjA2MDdAYXJjaGl2ZS5vcmc+","referencesHeader":"PDhGMTE3MjJBMDU2MkJCNEY4MEE2ODBFRDRDRkVEMEQ1MEM4NUM5QEVWU0JORzAyLmFkLm9mZmljZS5hb2wuY29tPiA8NDc0MkJFQzEuNzAyMDQwM0BhcmNoaXZlLm9yZz4gPDQ3NDMxMjFCLjIwOTA5QGFyY2hpdmUub3JnPiA8NDc0MzE4NkIuNTA2MDYwN0BhcmNoaXZlLm9yZz4="},"prevInTopic":4729,"nextInTopic":0,"prevInTime":4729,"nextInTime":4731,"topicId":4724,"numMessagesInTopic":5,"msgSnippet":"Hmm. Well, like OutOfMemoryErrors, the code which hits the limit isn t necessarily the code responsible. If these Too many open files errors happened after","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 89421 invoked from network); 20 Nov 2007 18:47:08 -0000\r\nX-Received: from unknown (66.218.67.96)\n  by m48.grp.scd.yahoo.com with QMQP; 20 Nov 2007 18:47:08 -0000\r\nX-Received: from unknown (HELO relay03.pair.com) (209.68.5.17)\n  by mta17.grp.scd.yahoo.com with SMTP; 20 Nov 2007 18:47:08 -0000\r\nX-Received: (qmail 25004 invoked from network); 20 Nov 2007 18:47:07 -0000\r\nX-Received: from unknown (HELO ?10.0.10.102?) (unknown)\n  by unknown with SMTP; 20 Nov 2007 18:47:07 -0000\r\nX-pair-Authenticated: 70.137.138.31\r\nMessage-ID: &lt;47432BAB.6070108@...&gt;\r\nDate: Tue, 20 Nov 2007 10:47:07 -0800\r\nUser-Agent: Thunderbird 2.0.0.9 (Windows/20071031)\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;8F11722A0562BB4F80A680ED4CFED0D50C85C9@...&gt; &lt;4742BEC1.7020403@...&gt; &lt;4743121B.20909@...&gt; &lt;4743186B.5060607@...&gt;\r\nIn-Reply-To: &lt;4743186B.5060607@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] JVM crash while running a large crawl\r\nX-Yahoo-Group-Post: member; u=137285340; y=NbVDtPEDHQVW8QEzMeMRArhpRfCMsPoDVQBidRPxW7BN\r\nX-Yahoo-Profile: gojomo\r\n\r\nHmm. Well, like OutOfMemoryErrors, the code which hits the limit isn&#39;t \nnecessarily the code responsible.\n\nIf these &quot;Too many open files&quot; errors happened after already increasing \nthe system open files limit, maybe it&#39;s still the Sun JVM bug. I see \nthat 1.6 is now up to update 4 -- that would be a worth a try on any \ncrawl machine bitten by this error.\n\n- Gordon @ IA\n\nIgor Ranitovic wrote:\n&gt; Hi Gordon,\n&gt; \n&gt; We have seen two crawls crash recently due the limit of the open file \n&gt; handles. I dismissed the problem as an operator errors since we did not \n&gt; start the crawls within our production environment.\n&gt; However, by looking back at the logs, I see that I missed the fact that \n&gt; the errors were related to the bdb environment and not java.io.\n&gt; \n&gt; Machine setup:\n&gt; --------------\n&gt; java version &quot;1.6.0_01&quot;\n&gt; Java(TM) SE Runtime Environment (build 1.6.0_01-b06)\n&gt; Java HotSpot(TM) Server VM (build 1.6.0_01-b06, mixed mode)\n&gt; JAVA_OPTS=-Xmx2300m -Xms2300m -XX:+HeapDumpOnOutOfMemoryError \n&gt; -XX:+PrintClassHistogram \n&gt; -XX:OnOutOfMemoryError=/home/webcrawl/tools/sigquitpp\n&gt; id.sh\n&gt; core file size        (blocks, -c) 0\n&gt; data seg size         (kbytes, -d) unlimited\n&gt; file size             (blocks, -f) unlimited\n&gt; max locked memory     (kbytes, -l) unlimited\n&gt; max memory size       (kbytes, -m) unlimited\n&gt; open files                    (-n) 1024\n&gt; pipe size          (512 bytes, -p) 8\n&gt; stack size            (kbytes, -s) 8192\n&gt; cpu time             (seconds, -t) unlimited\n&gt; max user processes            (-u) unlimited\n&gt; virtual memory        (kbytes, -v) unlimited\n&gt; \n&gt; \n&gt; Error:\n&gt; -------\n&gt; 09/07/2007 15:25:32 +0000 SEVERE \n&gt; org.archive.crawler.frontier.BdbWorkQueue peekItem peekItem failure; \n&gt; retrying\n&gt; com.sleepycat.je.DatabaseException: (JE 3.2.23) fetchTarget of \n&gt; 0x55a/0x67face parent IN=60667353 lastFullVersion=0x108a/0x703bd9 \n&gt; parent.getD\n&gt; irty()=true state=0 com.sleepycat.je.log.LogFileNotFoundException: (JE \n&gt; 3.2.23) 0x55a/0x67face (JE 3.2.23) Couldn&#39;t open file /2/crawldata/NL\n&gt; A-AU-CRAWL-002-08-28-2007/state/0000055a.jdb: \n&gt; /2/crawldata/NLA-AU-CRAWL-002-08-28-2007/state/0000055a.jdb (Too many \n&gt; open files)\n&gt;          at com.sleepycat.je.tree.IN.fetchTarget(IN.java:963)\n&gt;          at \n&gt; com.sleepycat.je.dbi.CursorImpl.fetchCurrent(CursorImpl.java:2160)\n&gt;          at \n&gt; com.sleepycat.je.dbi.CursorImpl.getCurrentAlreadyLatched(CursorImpl.java:1276)\n&gt;          at \n&gt; com.sleepycat.je.dbi.CursorImpl.getNextWithKeyChangeStatus(CursorImpl.java:1422)\n&gt;          at com.sleepycat.je.dbi.CursorImpl.getNext(CursorImpl.java:1348)\n&gt;          at \n&gt; com.sleepycat.je.Cursor.retrieveNextAllowPhantoms(Cursor.java:1577)\n&gt;          at com.sleepycat.je.Cursor.retrieveNext(Cursor.java:1387)\n&gt;          at com.sleepycat.je.Cursor.getNext(Cursor.java:446)\n&gt;          at \n&gt; org.archive.crawler.frontier.BdbMultipleWorkQueues.getNextNearestItem(BdbMultipleWorkQueues.java:293)\n&gt;          at \n&gt; org.archive.crawler.frontier.BdbMultipleWorkQueues.get(BdbMultipleWorkQueues.java:254)\n&gt;          at \n&gt; org.archive.crawler.frontier.BdbWorkQueue.peekItem(BdbWorkQueue.java:107)\n&gt;          at org.archive.crawler.frontier.WorkQueue.peek(WorkQueue.java:140)\n&gt;          at \n&gt; org.archive.crawler.frontier.WorkQueueFrontier.next(WorkQueueFrontier.java:656)\n&gt;          at org.archive.crawler.framework.ToeThread.run(ToeThread.java:144)\n&gt; \n&gt; Take care,\n&gt; i.\n&gt; \n&gt; \n&gt; \n&gt;&gt; This message is also indicative of a Sun JVM bug that Sun reports fixed \n&gt;&gt; in Java 7.0. It might be fixed in latest 6.0 releases; we haven&#39;t seen \n&gt;&gt; it recently at IA. See this JIRA issue for details:\n&gt;&gt;\n&gt;&gt;    http://webteam.archive.org/jira/browse/HER-1126\n&gt;&gt;\n&gt;&gt; Given Sun&#39;s opaqueness on this issue, it might be worth trying the \n&gt;&gt; latest 5.0 JVM (u14) -- maybe they&#39;ve fixed it there too.\n&gt;&gt;\n&gt;&gt; - Gordon @ IA\n&gt;&gt;\n&gt;&gt; Igor Ranitovic wrote:\n&gt;&gt;&gt; Hi Ankur,\n&gt;&gt;&gt;\n&gt;&gt;&gt; Please see this FAQ:\n&gt;&gt;&gt; http://crawler.archive.org/faq.html#toomanyopenfiles\n&gt;&gt;&gt;\n&gt;&gt;&gt; Take care,\n&gt;&gt;&gt; i.\n&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; Hi,\n&gt;&gt;&gt;&gt;       I am running a large crawl with Max-Toe threads being 200.\n&gt;&gt;&gt;&gt; The crawl does fairly well for about 40-45 min before crashing\n&gt;&gt;&gt;&gt; with an following error message in the logs\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; INFO: GET http://home.iprimus.com.au/welling/main.html 200 4834\n&gt;&gt;&gt;&gt; text/html\n&gt;&gt;&gt;&gt; - I/O exception (java.io.FileNotFoundException) caught when processing\n&gt;&gt;&gt;&gt; request: /home/agoel/dist/run/3/scratch/tt44http.ris (Too many open\n&gt;&gt;&gt;&gt; files)\n&gt;&gt;&gt;&gt; - Retrying request\n&gt;&gt;&gt;&gt; - I/O exception (java.io.IOException) caught when processing request: \n&gt;&gt;&gt;&gt; RIS already open for ToeThread #44: http://ja.wikipedia.org/robots.txt\n&gt;&gt;&gt;&gt; - Retrying request\n&gt;&gt;&gt;&gt; - I/O exception (java.io.IOException) caught when processing request: \n&gt;&gt;&gt;&gt; RIS already open for ToeThread #44: http://ja.wikipedia.org/robots.txt\n&gt;&gt;&gt;&gt; - Retrying request\n&gt;&gt;&gt;&gt; - I/O exception (java.io.IOException) caught when processing request: \n&gt;&gt;&gt;&gt; RIS already open for ToeThread #44: http://ja.wikipedia.org/robots.txt\n&gt;&gt;&gt;&gt; - Retrying request\n&gt;&gt;&gt;&gt; .\n&gt;&gt;&gt;&gt; .\n&gt;&gt;&gt;&gt; .\n&gt;&gt;&gt;&gt; #\n&gt;&gt;&gt;&gt; # An unexpected error has been detected by HotSpot Virtual Machine:\n&gt;&gt;&gt;&gt; #\n&gt;&gt;&gt;&gt; #  SIGSEGV (0xb) at pc=0xf15f27dc, pid=3054, tid=2359815072 # # \n&gt;&gt;&gt;&gt; # Java VM: Java HotSpot(TM) Server VM (1.5.0_13-b05 mixed mode) #\n&gt;&gt;&gt;&gt; Problematic frame:\n&gt;&gt;&gt;&gt; # v  ~BufferBlob::jni_fast_GetIntField\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; I think the problem is with unclosed/too many HttpRecorder I/O streams.\n&gt;&gt;&gt;&gt; If this is the real issue then is it a known one ?\n&gt;&gt;&gt;&gt; If not then any suggestions on why this would be happen?\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; Thanks\n&gt;&gt;&gt;&gt; -Ankur\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;  \n&gt;&gt;&gt;&gt; Yahoo! Groups Links\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;  \n&gt;&gt;&gt; Yahoo! Groups Links\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;\n&gt;&gt;  \n&gt;&gt; Yahoo! Groups Links\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt; \n&gt; \n&gt; \n&gt;  \n&gt; Yahoo! Groups Links\n&gt; \n&gt; \n&gt; \n\n"}}