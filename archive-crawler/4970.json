{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":334689939,"authorName":"Micah Wedemeyer","from":"Micah Wedemeyer &lt;mwedeme@...&gt;","replyTo":"LIST","senderId":"B95xr1ZrnzmFxXSLYvCdO_dxgs9Gf6iuHPP33vSmonrDm-8Xwh1PgY_L6I9VlFz_2M4Z0OoIvHdcoEZO0FHOvbsEg9V1X7Qhp1Q","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] embedding 2.0...a bad idea?","postDate":"1202327790","msgId":4970,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ3QUExMEVFLjQwMzA3MDVAZW1vcnkuZWR1Pg==","inReplyToHeader":"PDQ0NTM0LjcxLjEzMS4yOS4yMDcuMTIwMjMyMDg3Ni5zcXVpcnJlbEBtYWlsLmFyY2hpdmUub3JnPg==","referencesHeader":"PDQ3QTlFNzRELjYwMjA3MDNAZW1vcnkuZWR1PiA8NDQ1MzQuNzEuMTMxLjI5LjIwNy4xMjAyMzIwODc2LnNxdWlycmVsQG1haWwuYXJjaGl2ZS5vcmc+"},"prevInTopic":4968,"nextInTopic":0,"prevInTime":4969,"nextInTime":4971,"topicId":4966,"numMessagesInTopic":4,"msgSnippet":"Paul, Thanks.  This looks a little less confusing now that you ve explained it. In full disclosure, I only used 1.x very little, but I often compare the ","rawEmail":"Return-Path: &lt;mwedeme@...&gt;\r\nX-Sender: mwedeme@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 91515 invoked from network); 6 Feb 2008 19:56:41 -0000\r\nX-Received: from unknown (66.218.67.95)\n  by m57.grp.scd.yahoo.com with QMQP; 6 Feb 2008 19:56:41 -0000\r\nX-Received: from unknown (HELO mr1.cc.emory.edu) (170.140.52.90)\n  by mta16.grp.scd.yahoo.com with SMTP; 6 Feb 2008 19:56:41 -0000\r\nX-Received: from [170.140.210.152] (emoryfloatdmz.cc.emory.edu [170.140.52.254])\n\tby mr1.cc.emory.edu (8.13.1/8.13.1) with ESMTP id m16JuUbI017795\n\t(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Wed, 6 Feb 2008 14:56:30 -0500\r\nMessage-ID: &lt;47AA10EE.4030705@...&gt;\r\nDate: Wed, 06 Feb 2008 14:56:30 -0500\r\nUser-Agent: Mozilla-Thunderbird 2.0.0.9 (X11/20080110)\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;47A9E74D.6020703@...&gt; &lt;44534.71.131.29.207.1202320876.squirrel@...&gt;\r\nIn-Reply-To: &lt;44534.71.131.29.207.1202320876.squirrel@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-emory.edu-MailScanner: Found to be clean\r\nX-emory.edu-MailScanner-From: mwedeme@...\r\nX-Spam-Status: No\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Micah Wedemeyer &lt;mwedeme@...&gt;\r\nSubject: Re: [archive-crawler] embedding 2.0...a bad idea?\r\nX-Yahoo-Group-Post: member; u=334689939\r\n\r\nPaul,\n\nThanks.  This looks a little less confusing now that you&#39;ve explained it.\n\nIn full disclosure, I only used 1.x very little, but I often compare the \njavadocs from 2.x and 1.x to figure out what has changed.\n\nThanks again,\nMicah\n\n\npjack@... wrote:\n&gt; \n&gt; \n&gt;  &gt; Hi,\n&gt;  &gt;\n&gt;  &gt; I&#39;ve been struggling with 2.0.1 snapshot for the past few days, and I\n&gt;  &gt; just do not like all the JMX integration. From the perspective of\n&gt;  &gt; someone just trying to embed heretrix via good old fashioned API calls,\n&gt;  &gt; it makes everything extremely confusing.\n&gt;  &gt;\n&gt;  &gt; Paul was kind enough to make a change that allowed getting an Engine&#39;s\n&gt;  &gt; SheetManager via a non-JMX call, but not I&#39;m struggling with adding\n&gt;  &gt; crawl status listeners. The previous method (implement the\n&gt;  &gt; CrawlStatusListener interface) seems intuitive to me.\n&gt; \n&gt; The current event dispatch stuff in CrawlController is quite messy, sorry.\n&gt; We were going to standardize on JMX notifications but ended up just\n&gt; porting CrawlStatusEvents to JMX, and leaving the other events alone.\n&gt; I&#39;ve opened HER-1456 for cleaning this up.\n&gt; \n&gt; However, in the meantime, you just have to implement a different\n&gt; interface. JMX notifications are similar to the 1.x events, but all JMX\n&gt; notifications use the same listener/event class, instead of having a\n&gt; separate listener/event class for each kind of event.\n&gt; \n&gt; In 2.x, CrawlControllerImpl implements (via its superclass)\n&gt; javax.management.NotificationBroadcaster. To add a listener for the JMX\n&gt; notifications:\n&gt; \n&gt; cc.addNotificationBroadcaster(myListener, null, null);\n&gt; \n&gt; Where myListener is an implementation of\n&gt; javax.management.NotificationListener. Eg:\n&gt; \n&gt; public class MyNotificationListener implements NotificationListener {\n&gt; \n&gt; public void handleNotification(Notification n, Object ignored) {\n&gt; if (n.getType().equals(&quot;FINISHED&quot;)) {\n&gt; System.out.println(&quot;Crawl finished.&quot;);\n&gt; }\n&gt; }\n&gt; \n&gt; }\n&gt; \n&gt; The CrawlController will emit a notification every time the crawl changes\n&gt; state. The states are: PREPARED, STARTED, RUNNING, PAUSING, PAUSED,\n&gt; STOPPING, FINISHED. You can get the phase change via the getType()\n&gt; method. See the javax.management javadocs for more details, but the\n&gt; overall process isn&#39;t that much different than in 1.x.\n&gt; \n&gt;  &gt; The new method\n&gt;  &gt; (??? something to do with ListModuleListener and the sheet manager) has\n&gt;  &gt; stumped me so far, and I&#39;m about ready to give up. I&#39;ve been through\n&gt;  &gt; the code, and the closest thing I could find was addFinishedCallback in\n&gt;  &gt; EngineImpl, but I don&#39;t really understand what it&#39;s doing, and try as I\n&gt;  &gt; might, I can&#39;t get similar code to work for me.\n&gt; \n&gt; ListModuleListeners are invoked whenever a module is added or removed from\n&gt; the configuration managed by a SheetManager.\n&gt; \n&gt; The addFinishedCallback method is an implementation detail of the Engine;\n&gt; it&#39;s used to remove all the JMX modules from the MBeanServer after the job\n&gt; finishes.\n&gt; \n&gt; Neither are really related to what you want to do.\n&gt; \n&gt;  &gt; So, am I barking up the wrong tree trying to embed heritrix 2? I&#39;m sure\n&gt;  &gt; making embedding hard is not a goal for 2.0, but was easy embedding\n&gt;  &gt; scratched from the list?\n&gt; \n&gt; I hope not. :)\n&gt; \n&gt; -Paul\n&gt; \n&gt; \n\n\n"}}