{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":168599281,"authorName":"stackarchiveorg","from":"&quot;stackarchiveorg&quot; &lt;stack@...&gt;","profile":"stackarchiveorg","replyTo":"LIST","senderId":"I6a93JnQ8vM-AlpKa-QbE-R4II-AaS0Hp6qXmQxdFt4PWNeiC-dsKlOIKCLuPKv9yZr1Q_3FB6qwnnjCqGbepxcGZoJIhS3FiFaRfA","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: New issue with DomainSensitiveFrontier","postDate":"1103042302","msgId":1279,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PGNwbjR0dStqZzk4QGVHcm91cHMuY29tPg==","inReplyToHeader":"PGNwY3FhOStydTk2QGVHcm91cHMuY29tPg=="},"prevInTopic":1275,"nextInTopic":1280,"prevInTime":1278,"nextInTime":1280,"topicId":1235,"numMessagesInTopic":20,"msgSnippet":"(Update on conversation held off-list) Oskar and Rob figured that an override was not being put in place per domain, a requirement of the","rawEmail":"Return-Path: &lt;stack@...&gt;\r\nX-Sender: stack@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 79226 invoked from network); 14 Dec 2004 16:39:07 -0000\r\nReceived: from unknown (66.218.66.218)\n  by m21.grp.scd.yahoo.com with QMQP; 14 Dec 2004 16:39:07 -0000\r\nReceived: from unknown (HELO n3a.bulk.scd.yahoo.com) (66.94.237.37)\n  by mta3.grp.scd.yahoo.com with SMTP; 14 Dec 2004 16:39:07 -0000\r\nReceived: from [66.218.69.4] by n3.bulk.scd.yahoo.com with NNFMP; 14 Dec 2004 16:38:30 -0000\r\nReceived: from [66.218.67.139] by mailer4.bulk.scd.yahoo.com with NNFMP; 14 Dec 2004 16:38:30 -0000\r\nDate: Tue, 14 Dec 2004 16:38:22 -0000\r\nTo: archive-crawler@yahoogroups.com\r\nMessage-ID: &lt;cpn4tu+jg98@...&gt;\r\nIn-Reply-To: &lt;cpcqa9+ru96@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Length: 4541\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Remote-IP: 66.94.237.37\r\nFrom: &quot;stackarchiveorg&quot; &lt;stack@...&gt;\r\nSubject: Re: New issue with DomainSensitiveFrontier\r\nX-Yahoo-Group-Post: member; u=168599281\r\nX-Yahoo-Profile: stackarchiveorg\r\n\r\n\n(Update on conversation held off-list)\n\nOskar and Rob figured that an override was not being put in place per\ndomain, a requirement of the DomainSensitiveFrontier.  \n\nI added a note to the user manual and to the help text displayed for\nDomainSensitiveFrontier attributes to try and bring out the fact that\nthis is needed when using DomainSensitiveFrontier.\n\nRob pointed out that having to make an override per site is\nnon-intuitive; he expected that filling in an upperbound sufficent and\nthat thereafter the Frontier would apply this upper limit on a\nper-site basis.\n\nWe have to do some work before we can give Rob what he wants. \nMeantime I filled his comments into the issue covering domain-specific\nbounds:\nhttp://sourceforge.net/tracker/index.php?func=detail&aid=952241&group_id=73833&atid=539102.\n\nSt.Ack\n\n--- In archive-crawler@yahoogroups.com, &quot;robeger&quot; &lt;reger@a...&gt; wrote:\n&gt; \n&gt; Forgot to say this was using the 1.2.0 release code, rebuilt with\n&gt; Oskar&#39;s fix put in.\n&gt; \n&gt; Rob.\n&gt; \n&gt; --- In archive-crawler@yahoogroups.com, &quot;robeger&quot; &lt;reger@a...&gt; wrote:\n&gt; &gt; \n&gt; &gt; Found another problem with the DomainSensitiveFrontier.  The max docs\n&gt; &gt; per site setting seems to actually act as a max docs for the crawl\n&gt; &gt; setting.  If I crawl a single site with max docs per site set to 10, I\n&gt; &gt; get 10 pages crawled, but if I do the same with 2 sites, I end up\n&gt; &gt; getting 5 per site (10 total, not sure if the ratio would work out\n&gt; &gt; evenly all the time).\n&gt; &gt; \n&gt; &gt; Rob.\n&gt; &gt; \n&gt; &gt; \n&gt; &gt; --- In archive-crawler@yahoogroups.com, &quot;ogrenholm&quot;\n&gt; &gt; &lt;oskar.grenholm@k...&gt; wrote:\n&gt; &gt; &gt; \n&gt; &gt; &gt; Hey, I did reply to this just shortly before I left for the\nweekend, \n&gt; &gt; &gt; but it seems that the reply didn&#39;t make it (hope this one do).\n&gt; &gt; &gt; \n&gt; &gt; &gt; And yeah, it doesn&#39;t work now, but it sure did when I tested it\nback \n&gt; &gt; &gt; on 1.0. But since I set up the job I wanted it to do (downloading \n&gt; &gt; &gt; the frontpage of all Swedish online newspapers) I haven&#39;t looked\natt \n&gt; &gt; &gt; in anymore.\n&gt; &gt; &gt; \n&gt; &gt; &gt; But now I had a look at this at Friday and I think the problem is \n&gt; &gt; &gt; that the method deleteMatchedItems() in TieredQueue.java doesn&#39;t \n&gt; &gt; &gt; update the length of the queue and therefore when asked if it&#39;s \n&gt; &gt; &gt; empty answers no. One solution might be to add a call to \n&gt; &gt; &gt; recalculateLength() in deleteMatchedItems(), just before it\nreturns, \n&gt; &gt; &gt; i.e. \n&gt; &gt; &gt; public long deleteMatchedItems(Predicate matcher) {\n&gt; &gt; &gt;         long count = 0;\n&gt; &gt; &gt;         for (int i = 0; i &lt;= lastQueue; i++) {\n&gt; &gt; &gt;             count += innerQueues[i].deleteMatchedItems(matcher);\n&gt; &gt; &gt;         }\n&gt; &gt; &gt;         recalculateLength();  //ADDED\n&gt; &gt; &gt;         return count;\n&gt; &gt; &gt;     }\n&gt; &gt; &gt;  \n&gt; &gt; &gt; I did this and it seems to work (only basic testing, then weekend). \n&gt; &gt; &gt; If someone think this is a bad idea (yes, I mean you Stack) or\nhas a \n&gt; &gt; &gt; better solution, please let me know.\n&gt; &gt; &gt; \n&gt; &gt; &gt; /Oskar\n&gt; &gt; &gt; \n&gt; &gt; &gt; Ps. I have a better look at this on Monday. Ds.\n&gt; &gt; &gt; \n&gt; &gt; &gt; --- In archive-crawler@yahoogroups.com, stack &lt;stack@a...&gt; wrote:\n&gt; &gt; &gt; &gt; robeger wrote:\n&gt; &gt; &gt; &gt; \n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; Just tried this out.  It seems that the crawl never\n&quot;finishes&quot;.  \n&gt; &gt; &gt; Tried\n&gt; &gt; &gt; &gt; &gt; it on a single URL, limiting it to 10 docs for that site.  Once \n&gt; &gt; &gt; it\n&gt; &gt; &gt; &gt; &gt; reaches 10, it starts giving -6000 as the status code for \n&gt; &gt; &gt; subsequent\n&gt; &gt; &gt; &gt; &gt; pages, but the crawl never finishes, console just sits at\n&quot;13 of \n&gt; &gt; &gt; 39\n&gt; &gt; &gt; &gt; &gt; DOWNLOADED/QUEUED RATIO&quot;.  It also seems to count docs from\n&gt; &gt; &gt; &gt; &gt; macromedia.com as part of the 10.  If I switch back to the \n&gt; &gt; &gt; default\n&gt; &gt; &gt; &gt; &gt; frontier, it crawls the site and finishes.\n&gt; &gt; &gt; &gt; \n&gt; &gt; &gt; &gt; \n&gt; &gt; &gt; &gt; &lt;&gt;The way that the DomainSensitiveFrontier works is that when it \n&gt; &gt; &gt; hits the\n&gt; &gt; &gt; &gt; max-docs-for-this-domain threshold, it marks all remaining queued \n&gt; &gt; &gt; URLs as\n&gt; &gt; &gt; &gt; &#39;deleted&#39;. But Frontier continues to run. As it comes across these\n&gt; &gt; &gt; &gt; deleted URLs that are still in the queue, it discards them\nlogging \n&gt; &gt; &gt; as\n&gt; &gt; &gt; &gt; crawl.log -- the -6000s (&#39;Deleted from Frontier by user&#39;).\n&gt; &gt; &gt; &gt; \n&gt; &gt; &gt; &gt; That the crawl never finishes is a bug (I just tried it and had \n&gt; &gt; &gt; same issue.\n&gt; &gt; &gt; &gt; Is your heritrix_out.log filled with exceptions?). I made an\nissue \n&gt; &gt; &gt; to cover\n&gt; &gt; &gt; &gt; this: &#39;[ 1078581 ] DomainSensitiveFrontier never finishes&#39;.  Let \n&gt; &gt; &gt; me see if\n&gt; &gt; &gt; &gt; we can get the fella that donated this Frontier to fix it.\n&gt; &gt; &gt; &gt; \n&gt; &gt; &gt; &gt; (The macromedias being counted has to do with your scope settings.\n&gt; &gt; &gt; &gt; Try changing max-embed-hops)\n&gt; &gt; &gt; &gt; \n&gt; &gt; &gt; &gt; St.Ack\n&gt; &gt; &gt; &gt; \n&gt; &gt; &gt; &gt;\n\n\n\n\n"}}