{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":168599281,"authorName":"Michael Stack","from":"Michael Stack &lt;stack@...&gt;","profile":"stackarchiveorg","replyTo":"LIST","senderId":"v1VQCL0Ihtcq9MnmAaSrO8nL5ilh63EJn1K3DfMPd7P9tzoIcQkN12EibS5tg0KgvvHAyPQlV9cPbYKF9weVTpp3HkTP_lHv","spamInfo":{"isSpam":false,"reason":"3"},"subject":"Re: [archive-crawler] Re: heritrix stuck","postDate":"1167163356","msgId":3621,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ1OTE3RkRDLjkwMjA3MDNAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGVtaTZzNStxdDc1QGVHcm91cHMuY29tPg==","referencesHeader":"PGVtaTZzNStxdDc1QGVHcm91cHMuY29tPg=="},"prevInTopic":3614,"nextInTopic":3639,"prevInTime":3620,"nextInTime":3622,"topicId":3603,"numMessagesInTopic":9,"msgSnippet":"... Thats an odd error.  Implication is that the memory-mapped file -- the one w/ the UTF-16BE suffix -- needs to be closed only ByteBuffers don t have a close","rawEmail":"Return-Path: &lt;stack@...&gt;\r\nX-Sender: stack@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 28818 invoked from network); 26 Dec 2006 20:02:30 -0000\r\nReceived: from unknown (66.218.67.35)\n  by m37.grp.scd.yahoo.com with QMQP; 26 Dec 2006 20:02:30 -0000\r\nReceived: from unknown (HELO dns.duboce.net) (63.203.238.117)\n  by mta9.grp.scd.yahoo.com with SMTP; 26 Dec 2006 20:02:27 -0000\r\nReceived: by dns.duboce.net (Postfix, from userid 1008)\n\tid 33CC1C51B; Tue, 26 Dec 2006 10:42:26 -0800 (PST)\r\nX-Spam-Checker-Version: SpamAssassin 3.1.4 (2006-07-26) on dns.duboce.net\r\nX-Spam-Level: \r\nX-Spam-Status: No, score=-2.4 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,\n\tHTML_MESSAGE,HTML_OBFUSCATE_05_10,HTML_TINY_FONT,INTERRUPTUS \n\tautolearn=no version=3.1.4\r\nReceived: from [192.168.1.10] (debord [192.168.1.10])\n\tby dns.duboce.net (Postfix) with ESMTP id 1D59EC1CE;\n\tTue, 26 Dec 2006 10:42:19 -0800 (PST)\r\nMessage-ID: &lt;45917FDC.9020703@...&gt;\r\nDate: Tue, 26 Dec 2006 12:02:36 -0800\r\nUser-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.8.0.7) Gecko/20060910 SeaMonkey/1.0.5\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;emi6s5+qt75@...&gt;\r\nIn-Reply-To: &lt;emi6s5+qt75@...&gt;\r\nContent-Type: multipart/alternative;\n boundary=&quot;------------080007000000030501020401&quot;\r\nX-eGroups-Msg-Info: 2:3:4:0\r\nFrom: Michael Stack &lt;stack@...&gt;\r\nSubject: Re: [archive-crawler] Re: heritrix stuck\r\nX-Yahoo-Group-Post: member; u=168599281; y=GDBqUfLCScpwPTXanV2NXOl51RdwGrUGJNxms8YkP0gp45WVUpixO71O\r\nX-Yahoo-Profile: stackarchiveorg\r\n\r\n\r\n--------------080007000000030501020401\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\n\r\nblah_1977 wrote:\n&gt;\n&gt; Hello, thanks for the quick reply!\n&gt; ....\n&gt;\n&gt; Before I made my workaround fix described above, the delete was not\n&gt; failing silently. The log entry was something along the lines of &quot;...\n&gt; because of FileNotFoundException &lt;filename&gt;.UTF-16BE cannot be deleted\n&gt; because of open user map region on RIS&quot;. Or something like that.\n&gt; I&#39;ll get the exact error message in a follow-up post. When I made my\n&gt; workaround fix described above, the delete started failing silently.\n&gt;\n\n\n\n\n\n\n\n\nThats an odd error.  Implication is that the memory-mapped file -- the \none w/ the UTF-16BE suffix -- needs to be closed only ByteBuffers don&#39;t \nhave a close method (The CharSequence given to extractors in Multibyte \ncase is a ByteBuffer.  If we are replaying a large download, its a \nMappedByteBuffer onto a backing file).    At the head of \nhttp://java.sun.com/j2se/1.4.2/docs/api/java/nio/MappedByteBuffer.html \nit says: &quot;A mapped byte buffer and the file mapping that it represents \nremain valid until the buffer itself is garbage-collected&quot; from .   Were \nyou putting a copy of the ReplayCharSequence into the AList or a \nreference? \n\nWhat if you ran a crawler w/ 2 or 3 HTML extractors running in series, \ndo you have the same issue? Happens on linux and windows?   Error \nhappens in your extractor or in your postprocessor?  The exact error \nstring would help or if you can turn it up or any other info on the \nissue (We&#39;ve had a long-lived annoying bug in here in this multi-byte \nreplay).\n\nYour workaround seems fine (Let us know if there is anything we should \nchange in ExtractorHTML to make subclassing the easier).\n\nI also played w/ Heritrix unit tests trying to reproduce but to no \navail.  I also played w/ reusing the same multibyte RIS in series but it \nseems to work fine in unit tests at least.\n\nIf you have a problematic website that reliably triggers the error, \nshare it with us (off-list if you prefer).\n\nYours,\nSt.Ack\n\n\n\n\n\n\n\n\n\n\n&gt;\n&gt; Thanks much!\n&gt;\n&gt; --- In archive-crawler@yahoogroups.com \n&gt; &lt;mailto:archive-crawler%40yahoogroups.com&gt;, Michael Stack &lt;stack@...&gt; \n&gt; wrote:\n&gt; &gt;\n&gt; &gt; Regards your first mail, did you do anything custom to the FetchHTTP\n&gt; (or\n&gt; &gt; FetchDNS)? These are usually responsible for closing the\n&gt; &gt; RecordingInputStream (RIS). There is a RIS per thread. Its opened and\n&gt; &gt; closed in the fetcher per trip down along the processing chain. In the\n&gt; &gt; past the close would sometimes fail but this was addressed a while back\n&gt; &gt; (You are using a recent Heritrix?).\n&gt; &gt;\n&gt; &gt; Heritrix is embedded into your WAR or does your WAR run a remote\n&gt; &gt; Heritrix instance? Does crawling usually work well? Its just the odd\n&gt; &gt; time it goes awry?\n&gt; &gt;\n&gt; &gt; Your second mail &#39;seems&#39; to describe a different phenomenon. After\n&gt; &gt; fetchers are finished, extractors go to work and get a character stream\n&gt; &gt; on the fetchers&#39; download (A ReplayCharSequence). If we determine\n&gt; it a\n&gt; &gt; multi-byte stream, we first convert downloaded bytes to a CharSequence\n&gt; &gt; writing the encoding to a temporary file -- the one with the UTF-16BE\n&gt; &gt; suffix -- and its this file we pass back to the extractor to run its\n&gt; &gt; character-based regexes across. When an extractor is done, its\n&gt; supposed\n&gt; &gt; to clean up the temporary file. The delete is failing silently? Just\n&gt; &gt; before the delete, there is a log (&#39;...because of...&#39;). Whats it\n&gt; say in\n&gt; &gt; your case?\n&gt; &gt;\n&gt; &gt; Thanks,\n&gt; &gt; St.Ack\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; blah_1977 wrote:\n&gt; &gt; &gt;\n&gt; &gt; &gt; After digging around a bit trying to debug this problem, I think the\n&gt; &gt; &gt; root cause is in the class\n&gt; &gt; &gt; ReplayCharSequenceFactory.MultiByteReplayCharSequence at the method\n&gt; &gt; &gt;\n&gt; &gt; &gt; private void deleteFile(File fileToDelete, final Exception e) {\n&gt; &gt; &gt; if (e != null) {\n&gt; &gt; &gt; // Log why the delete to help with debug of\n&gt; &gt; &gt; java.io.FileNotFoundException:\n&gt; &gt; &gt; // ....tt53http.ris.UTF-16BE.\n&gt; &gt; &gt; logger.severe(&quot;Deleting &quot; + fileToDelete + &quot; because of &quot;\n&gt; &gt; &gt; + e.toString());\n&gt; &gt; &gt; }\n&gt; &gt; &gt; if (fileToDelete != null && fileToDelete.exists()) {\n&gt; &gt; &gt; fileToDelete.delete();\n&gt; &gt; &gt; }\n&gt; &gt; &gt; }\n&gt; &gt; &gt;\n&gt; &gt; &gt; The last line &quot;fileToDelete.delete()&quot; seems to always return false\n&gt; &gt; &gt; when invoked from ExtractorHTML, indicating that the file cannot be\n&gt; &gt; &gt; deleted (perhaps due to a stream still being open on it). This then\n&gt; &gt; &gt; snowballs into the error seen in my previous post.\n&gt; &gt; &gt; Has anyone any idea on what&#39;s causing this, and how to fix?\n&gt; &gt; &gt; Thanks much in advance.\n&gt; &gt; &gt;\n&gt; &gt; &gt; --- In archive-crawler@yahoogroups.com \n&gt; &lt;mailto:archive-crawler%40yahoogroups.com&gt;\n&gt; &gt; &gt; &lt;mailto:archive-crawler%40yahoogroups.com&gt;, &quot;blah_1977&quot; &lt;hwangs@&gt;\n&gt; &gt; &gt; wrote:\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; I&#39;ve written a little web app running on tomcat, which uses heritrix\n&gt; &gt; &gt; &gt; to crawl specific sites. Lately, I&#39;ve been running into the\n&gt; following\n&gt; &gt; &gt; &gt; error messages on the command line, after which it seems like the\n&gt; &gt; &gt; &gt; whole application becomes &quot;stuck&quot;. i.e., no more progress being made\n&gt; &gt; &gt; &gt; on the crawl. Here are the error messages:\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; INFO HttpMethodDirector:434 - I/O exception caught when processing\n&gt; &gt; &gt; &gt; request: RIS already open for ToeThread #35:\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; http://www.pcrecruiter.net/pcrbin/reg5.exe?i1=WEBGUEST&i2=532335723616234&i3=DETAIL&hash=508826133&i5=&i6=12%2f21%2f2006%207:12:23%20PM&i7=Senior%20software%20engineer%20%20-%20Content%20%26%20Syndication&i8=&i9=&i10=J.Job_Title%20Desc&pcr-id=P4SAo2E%2fQbHmzBnzOGfIEYm775gf6WWf7H%2fBydd2pvkAJ%2fXKJ%2bHqhT0Ky%2b49HifRK6eix7A8nL6t%0d%0abj8hq%2b%2fiNyiM \n&gt; &lt;http://www.pcrecruiter.net/pcrbin/reg5.exe?i1=WEBGUEST&i2=532335723616234&i3=DETAIL&hash=508826133&i5=&i6=12%2f21%2f2006%207:12:23%20PM&i7=Senior%20software%20engineer%20%20-%20Content%20%26%20Syndication&i8=&i9=&i10=J.Job_Title%20Desc&pcr-id=P4SAo2E%2fQbHmzBnzOGfIEYm775gf6WWf7H%2fBydd2pvkAJ%2fXKJ%2bHqhT0Ky%2b49HifRK6eix7A8nL6t%0d%0abj8hq%2b%2fiNyiM&gt;\n&gt;\n&gt; &gt; &gt;\n&gt; &lt;http://www.pcrecruiter.net/pcrbin/reg5.exe?i1=WEBGUEST&i2=532335723616234&i3=DETAIL&hash=508826133&i5=&i6=12%2f21%2f2006%207:12:23%20PM&i7=Senior%20software%20engineer%20%20-%20Content%20%26%20Syndication&i8=&i9=&i10=J.Job_Title%20Desc&pcr-id=P4SAo2E%2fQbHmzBnzOGfIEYm775gf6WWf7H%2fBydd2pvkAJ%2fXKJ%2bHqhT0Ky%2b49HifRK6eix7A8nL6t%0d%0abj8hq%2b%2fiNyiM \n&gt; &lt;http://www.pcrecruiter.net/pcrbin/reg5.exe?i1=WEBGUEST&i2=532335723616234&i3=DETAIL&hash=508826133&i5=&i6=12%2f21%2f2006%207:12:23%20PM&i7=Senior%20software%20engineer%20%20-%20Content%20%26%20Syndication&i8=&i9=&i10=J.Job_Title%20Desc&pcr-id=P4SAo2E%2fQbHmzBnzOGfIEYm775gf6WWf7H%2fBydd2pvkAJ%2fXKJ%2bHqhT0Ky%2b49HifRK6eix7A8nL6t%0d%0abj8hq%2b%2fiNyiM&gt;&gt;\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; [ToeThread #35:\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; http://www.pcrecruiter.net/pcrbin/reg5.exe?i1=WEBGUEST&i2=532335723616234&i3=DETAIL&hash=508826133&i5=&i6=12%2f21%2f2006%207:12:23%20PM&i7=Senior%20software%20engineer%20%20-%20Content%20%26%20Syndication&i8=&i9=&i10=J.Job_Title%20Desc&pcr-id=P4SAo2E%2fQbHmzBnzOGfIEYm775gf6WWf7H%2fBydd2pvkAJ%2fXKJ%2bHqhT0Ky%2b49HifRK6eix7A8nL6t%0d%0abj8hq%2b%2fiNyiM \n&gt; &lt;http://www.pcrecruiter.net/pcrbin/reg5.exe?i1=WEBGUEST&i2=532335723616234&i3=DETAIL&hash=508826133&i5=&i6=12%2f21%2f2006%207:12:23%20PM&i7=Senior%20software%20engineer%20%20-%20Content%20%26%20Syndication&i8=&i9=&i10=J.Job_Title%20Desc&pcr-id=P4SAo2E%2fQbHmzBnzOGfIEYm775gf6WWf7H%2fBydd2pvkAJ%2fXKJ%2bHqhT0Ky%2b49HifRK6eix7A8nL6t%0d%0abj8hq%2b%2fiNyiM&gt;\n&gt;\n&gt; &gt; &gt;\n&gt; &lt;http://www.pcrecruiter.net/pcrbin/reg5.exe?i1=WEBGUEST&i2=532335723616234&i3=DETAIL&hash=508826133&i5=&i6=12%2f21%2f2006%207:12:23%20PM&i7=Senior%20software%20engineer%20%20-%20Content%20%26%20Syndication&i8=&i9=&i10=J.Job_Title%20Desc&pcr-id=P4SAo2E%2fQbHmzBnzOGfIEYm775gf6WWf7H%2fBydd2pvkAJ%2fXKJ%2bHqhT0Ky%2b49HifRK6eix7A8nL6t%0d%0abj8hq%2b%2fiNyiM \n&gt; &lt;http://www.pcrecruiter.net/pcrbin/reg5.exe?i1=WEBGUEST&i2=532335723616234&i3=DETAIL&hash=508826133&i5=&i6=12%2f21%2f2006%207:12:23%20PM&i7=Senior%20software%20engineer%20%20-%20Content%20%26%20Syndication&i8=&i9=&i10=J.Job_Title%20Desc&pcr-id=P4SAo2E%2fQbHmzBnzOGfIEYm775gf6WWf7H%2fBydd2pvkAJ%2fXKJ%2bHqhT0Ky%2b49HifRK6eix7A8nL6t%0d%0abj8hq%2b%2fiNyiM&gt;&gt;]\n&gt; &gt; &gt; &gt; 19:14:03,516 INFO HttpMethodDirector:440 - Retrying request\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; Has anybody seen anything like this before? Thanks much in advance.\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt;\n&gt;\n&gt;  \n\n\r\n--------------080007000000030501020401\r\nContent-Type: text/html; charset=ISO-8859-1\r\nContent-Transfer-Encoding: 7bit\r\n\r\n&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;meta content=&quot;text/html;charset=ISO-8859-1&quot; http-equiv=&quot;Content-Type&quot;&gt;\n&lt;/head&gt;\n&lt;body bgcolor=&quot;#ffffff&quot; text=&quot;#000000&quot;&gt;\nblah_1977 wrote:\n&lt;blockquote cite=&quot;midemi6s5+qt75@...&quot; type=&quot;cite&quot;&gt;&lt;!-- Network content --&gt;\n\n  &lt;div id=&quot;ygrp-text&quot;&gt;\n  &lt;p&gt;Hello, thanks for the quick reply!&lt;br&gt;\n....&lt;br&gt;\n  &lt;br&gt;\nBefore I made my workaround fix described above, the delete was not&lt;br&gt;\nfailing silently. The log entry was something along the lines of &quot;...&lt;br&gt;\nbecause of FileNotFoundExcepti&lt;wbr&gt;on &lt;filename&gt;.UTF-&lt;wbr&gt;16BE\ncannot be deleted&lt;br&gt;\nbecause of open user map region on RIS&quot;. Or something like that. &lt;br&gt;\nI&#39;ll get the exact error message in a follow-up post. When I made my&lt;br&gt;\nworkaround fix described above, the delete started failing silently.&lt;br&gt;\n  &lt;/p&gt;\n  &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/blockquote&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\nThats an odd error.&nbsp; Implication is that the memory-mapped file -- the\none w/ the UTF-16BE suffix -- needs to be closed only ByteBuffers don&#39;t\nhave a close method (The CharSequence given to extractors in Multibyte\ncase is a ByteBuffer.&nbsp; If we are replaying a large download, its a\nMappedByteBuffer onto a backing file). &nbsp;&nbsp; At the head of\n&lt;a class=&quot;moz-txt-link-freetext&quot; href=&quot;http://java.sun.com/j2se/1.4.2/docs/api/java/nio/MappedByteBuffer.html&quot;&gt;http://java.sun.com/j2se/1.4.2/docs/api/java/nio/MappedByteBuffer.html&lt;/a&gt;\nit says: &quot;A mapped byte buffer and the file mapping that it represents\nremain valid until the buffer itself is garbage-collected&quot; from .&nbsp;&nbsp;\nWere you putting a copy of the ReplayCharSequence into the AList or a\nreference?&nbsp; &lt;br&gt;\n&lt;br&gt;\nWhat if you ran a crawler w/ 2 or 3 HTML extractors running in series,\ndo you have the same issue? Happens on linux and windows?&nbsp;&nbsp; Error\nhappens in your extractor or in your postprocessor?&nbsp; The exact error\nstring would help or if you can turn it up or any other info on the\nissue (We&#39;ve had a long-lived annoying bug in here in this multi-byte\nreplay).&lt;br&gt;\n&lt;br&gt;\nYour workaround seems fine (Let us know if there is anything we should\nchange in ExtractorHTML to make subclassing the easier).&lt;br&gt;\n&lt;br&gt;\nI also played w/ Heritrix unit tests trying to reproduce but to no\navail.&nbsp; I also played w/ reusing the same multibyte RIS in series but\nit seems to work fine in unit tests at least.&lt;br&gt;\n&lt;br&gt;\nIf you have a problematic website that reliably triggers the error,\nshare it with us (off-list if you prefer).&lt;br&gt;\n&lt;br&gt;\nYours,&lt;br&gt;\nSt.Ack&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;blockquote cite=&quot;midemi6s5+qt75@...&quot; type=&quot;cite&quot;&gt;\n  &lt;div id=&quot;ygrp-mlmsg&quot; style=&quot;width: 655px; position: relative;&quot;&gt;\n  &lt;div id=&quot;ygrp-msg&quot;\n style=&quot;padding: 0pt 15px 0pt 0pt; width: 490px; float: left; z-index: 1;&quot;&gt;\n  &lt;div id=&quot;ygrp-text&quot;&gt;\n  &lt;p&gt;&lt;br&gt;\nThanks much!&lt;br&gt;\n  &lt;br&gt;\n--- In &lt;a href=&quot;mailto:archive-crawler%40yahoogroups.com&quot;&gt;archive-crawler@&lt;wbr&gt;yahoogroups.&lt;wbr&gt;com&lt;/a&gt;,\nMichael Stack &lt;a class=&quot;moz-txt-link-rfc2396E&quot; href=&quot;mailto:stack@...&quot;&gt;&lt;stack@...&gt;&lt;/a&gt; wrote:&lt;br&gt;\n&gt;&lt;br&gt;\n&gt; Regards your first mail, did you do anything custom to the\nFetchHTTP&lt;br&gt;\n(or &lt;br&gt;\n&gt; FetchDNS)? These are usually responsible for closing the &lt;br&gt;\n&gt; RecordingInputStrea&lt;wbr&gt;m (RIS). There is a RIS per thread. Its\nopened and &lt;br&gt;\n&gt; closed in the fetcher per trip down along the processing chain. In\nthe &lt;br&gt;\n&gt; past the close would sometimes fail but this was addressed a while\nback &lt;br&gt;\n&gt; (You are using a recent Heritrix?). &lt;br&gt;\n&gt; &lt;br&gt;\n&gt; Heritrix is embedded into your WAR or does your WAR run a remote &lt;br&gt;\n&gt; Heritrix instance? Does crawling usually work well? Its just the\nodd &lt;br&gt;\n&gt; time it goes awry?&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; Your second mail &#39;seems&#39; to describe a different phenomenon. After\n  &lt;br&gt;\n&gt; fetchers are finished, extractors go to work and get a character\nstream &lt;br&gt;\n&gt; on the fetchers&#39; download (A ReplayCharSequence)&lt;wbr&gt;. If we\ndetermine&lt;br&gt;\nit a &lt;br&gt;\n&gt; multi-byte stream, we first convert downloaded bytes to a\nCharSequence &lt;br&gt;\n&gt; writing the encoding to a temporary file -- the one with the\nUTF-16BE &lt;br&gt;\n&gt; suffix -- and its this file we pass back to the extractor to run\nits &lt;br&gt;\n&gt; character-based regexes across. When an extractor is done, its&lt;br&gt;\nsupposed &lt;br&gt;\n&gt; to clean up the temporary file. The delete is failing silently?\nJust &lt;br&gt;\n&gt; before the delete, there is a log (&#39;...because of...&#39;). Whats it&lt;br&gt;\nsay in &lt;br&gt;\n&gt; your case?&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; Thanks,&lt;br&gt;\n&gt; St.Ack&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;br&gt;\n&gt; blah_1977 wrote:&lt;br&gt;\n&gt; &gt;&lt;br&gt;\n&gt; &gt; After digging around a bit trying to debug this problem, I\nthink the&lt;br&gt;\n&gt; &gt; root cause is in the class&lt;br&gt;\n&gt; &gt; ReplayCharSequenceF&lt;wbr&gt;actory.MultiByte&lt;wbr&gt;ReplayCharSequen&lt;wbr&gt;ce\nat the method&lt;br&gt;\n&gt; &gt;&lt;br&gt;\n&gt; &gt; private void deleteFile(File fileToDelete, final Exception e)\n{&lt;br&gt;\n&gt; &gt; if (e != null) {&lt;br&gt;\n&gt; &gt; // Log why the delete to help with debug of&lt;br&gt;\n&gt; &gt; java.io.FileNotFoun&lt;wbr&gt;dException:&lt;br&gt;\n&gt; &gt; // ....tt53http.&lt;wbr&gt;ris.UTF-16BE.&lt;br&gt;\n&gt; &gt; logger.severe(&lt;wbr&gt;&quot;Deleting &quot; + fileToDelete + &quot; because of &quot;&lt;br&gt;\n&gt; &gt; + e.toString()&lt;wbr&gt;);&lt;br&gt;\n&gt; &gt; }&lt;br&gt;\n&gt; &gt; if (fileToDelete != null &amp;&amp; fileToDelete.&lt;wbr&gt;exists())\n{&lt;br&gt;\n&gt; &gt; fileToDelete.&lt;wbr&gt;delete();&lt;br&gt;\n&gt; &gt; }&lt;br&gt;\n&gt; &gt; }&lt;br&gt;\n&gt; &gt;&lt;br&gt;\n&gt; &gt; The last line &quot;fileToDelete.&lt;wbr&gt;delete()&quot; seems to always\nreturn false&lt;br&gt;\n&gt; &gt; when invoked from ExtractorHTML, indicating that the file\ncannot be&lt;br&gt;\n&gt; &gt; deleted (perhaps due to a stream still being open on it).\nThis then&lt;br&gt;\n&gt; &gt; snowballs into the error seen in my previous post.&lt;br&gt;\n&gt; &gt; Has anyone any idea on what&#39;s causing this, and how to fix?&lt;br&gt;\n&gt; &gt; Thanks much in advance.&lt;br&gt;\n&gt; &gt;&lt;br&gt;\n&gt; &gt; --- In &lt;a href=&quot;mailto:archive-crawler%40yahoogroups.com&quot;&gt;archive-crawler@&lt;wbr&gt;yahoogroups.&lt;wbr&gt;com&lt;/a&gt;\n  &lt;br&gt;\n&gt; &gt; &lt;&lt;a class=&quot;moz-txt-link-freetext&quot; href=&quot;mailto:archive&quot;&gt;mailto:archive&lt;/a&gt;-&lt;wbr&gt;crawler%40yahoog&lt;wbr&gt;roups.com&gt;&lt;wbr&gt;,\n&quot;blah_1977&quot; &lt;hwangs@&gt; &lt;br&gt;\n&gt; &gt; wrote:&lt;br&gt;\n&gt; &gt; &gt;&lt;br&gt;\n&gt; &gt; &gt; I&#39;ve written a little web app running on tomcat, which\nuses heritrix&lt;br&gt;\n&gt; &gt; &gt; to crawl specific sites. Lately, I&#39;ve been running into\nthe&lt;br&gt;\nfollowing&lt;br&gt;\n&gt; &gt; &gt; error messages on the command line, after which it seems\nlike the&lt;br&gt;\n&gt; &gt; &gt; whole application becomes &quot;stuck&quot;. i.e., no more\nprogress being made&lt;br&gt;\n&gt; &gt; &gt; on the crawl. Here are the error messages:&lt;br&gt;\n&gt; &gt; &gt;&lt;br&gt;\n&gt; &gt; &gt; INFO HttpMethodDirector:&lt;wbr&gt;434 - I/O exception caught\nwhen processing&lt;br&gt;\n&gt; &gt; &gt; request: RIS already open for ToeThread #35:&lt;br&gt;\n&gt; &gt; &gt;&lt;br&gt;\n&gt; &gt;&lt;br&gt;\n  &lt;a\n href=&quot;http://www.pcrecruiter.net/pcrbin/reg5.exe?i1=WEBGUEST&amp;i2=532335723616234&amp;i3=DETAIL&amp;hash=508826133&amp;i5=&amp;i6=12%2f21%2f2006%207:12:23%20PM&amp;i7=Senior%20software%20engineer%20%20-%20Content%20%26%20Syndication&amp;i8=&amp;i9=&amp;i10=J.Job_Title%20Desc&amp;pcr-id=P4SAo2E%2fQbHmzBnzOGfIEYm775gf6WWf7H%2fBydd2pvkAJ%2fXKJ%2bHqhT0Ky%2b49HifRK6eix7A8nL6t%0d%0abj8hq%2b%2fiNyiM&quot;&gt;http://www.pcrecrui&lt;wbr&gt;ter.net/pcrbin/&lt;wbr&gt;reg5.exe?&lt;wbr&gt;i1=WEBGUEST&amp;&lt;wbr&gt;i2=5323357236162&lt;wbr&gt;34&amp;i3=DETAIL&amp;&lt;wbr&gt;hash=508826133&amp;&lt;wbr&gt;i5=&amp;i6=12%&lt;wbr&gt;2f21%2f2006%&lt;wbr&gt;207:12:23%&lt;wbr&gt;20PM&amp;i7=Senior%&lt;wbr&gt;20software%&lt;wbr&gt;20engineer%&lt;wbr&gt;20%20-%20Content&lt;wbr&gt;%20%26%20Syndica&lt;wbr&gt;tion&amp;i8=&amp;&lt;wbr&gt;i9=&amp;i10=J.&lt;wbr&gt;Job_Title%&lt;wbr&gt;20Desc&amp;pcr-&lt;wbr&gt;id=P4SAo2E%&lt;wbr&gt;2fQbHmzBnzOGfIEY&lt;wbr&gt;m775gf6WWf7H%&lt;wbr&gt;2fBydd2pvkAJ%&lt;wbr&gt;2fXKJ%2bHqhT0Ky%&lt;wbr&gt;2b49HifRK6eix7A8&lt;wbr&gt;nL6t%0d%0abj8hq%&lt;wbr&gt;2b%2fiNyiM&lt;/a&gt;&lt;br&gt;\n  &lt;br&gt;\n&gt; &gt;&lt;br&gt;\n&lt;&lt;a\n href=&quot;http://www.pcrecruiter.net/pcrbin/reg5.exe?i1=WEBGUEST&amp;i2=532335723616234&amp;i3=DETAIL&amp;hash=508826133&amp;i5=&amp;i6=12%2f21%2f2006%207:12:23%20PM&amp;i7=Senior%20software%20engineer%20%20-%20Content%20%26%20Syndication&amp;i8=&amp;i9=&amp;i10=J.Job_Title%20Desc&amp;pcr-id=P4SAo2E%2fQbHmzBnzOGfIEYm775gf6WWf7H%2fBydd2pvkAJ%2fXKJ%2bHqhT0Ky%2b49HifRK6eix7A8nL6t%0d%0abj8hq%2b%2fiNyiM&quot;&gt;http://www.pcrecrui&lt;wbr&gt;ter.net/pcrbin/&lt;wbr&gt;reg5.exe?&lt;wbr&gt;i1=WEBGUEST&amp;&lt;wbr&gt;i2=5323357236162&lt;wbr&gt;34&amp;i3=DETAIL&amp;&lt;wbr&gt;hash=508826133&amp;&lt;wbr&gt;i5=&amp;i6=12%&lt;wbr&gt;2f21%2f2006%&lt;wbr&gt;207:12:23%&lt;wbr&gt;20PM&amp;i7=Senior%&lt;wbr&gt;20software%&lt;wbr&gt;20engineer%&lt;wbr&gt;20%20-%20Content&lt;wbr&gt;%20%26%20Syndica&lt;wbr&gt;tion&amp;i8=&amp;&lt;wbr&gt;i9=&amp;i10=J.&lt;wbr&gt;Job_Title%&lt;wbr&gt;20Desc&amp;pcr-&lt;wbr&gt;id=P4SAo2E%&lt;wbr&gt;2fQbHmzBnzOGfIEY&lt;wbr&gt;m775gf6WWf7H%&lt;wbr&gt;2fBydd2pvkAJ%&lt;wbr&gt;2fXKJ%2bHqhT0Ky%&lt;wbr&gt;2b49HifRK6eix7A8&lt;wbr&gt;nL6t%0d%0abj8hq%&lt;wbr&gt;2b%2fiNyiM&lt;/a&gt;&gt;&lt;br&gt;\n&gt; &gt; &gt;&lt;br&gt;\n&gt; &gt; &gt; [ToeThread #35:&lt;br&gt;\n&gt; &gt; &gt;&lt;br&gt;\n&gt; &gt;&lt;br&gt;\n  &lt;a\n href=&quot;http://www.pcrecruiter.net/pcrbin/reg5.exe?i1=WEBGUEST&amp;i2=532335723616234&amp;i3=DETAIL&amp;hash=508826133&amp;i5=&amp;i6=12%2f21%2f2006%207:12:23%20PM&amp;i7=Senior%20software%20engineer%20%20-%20Content%20%26%20Syndication&amp;i8=&amp;i9=&amp;i10=J.Job_Title%20Desc&amp;pcr-id=P4SAo2E%2fQbHmzBnzOGfIEYm775gf6WWf7H%2fBydd2pvkAJ%2fXKJ%2bHqhT0Ky%2b49HifRK6eix7A8nL6t%0d%0abj8hq%2b%2fiNyiM&quot;&gt;http://www.pcrecrui&lt;wbr&gt;ter.net/pcrbin/&lt;wbr&gt;reg5.exe?&lt;wbr&gt;i1=WEBGUEST&amp;&lt;wbr&gt;i2=5323357236162&lt;wbr&gt;34&amp;i3=DETAIL&amp;&lt;wbr&gt;hash=508826133&amp;&lt;wbr&gt;i5=&amp;i6=12%&lt;wbr&gt;2f21%2f2006%&lt;wbr&gt;207:12:23%&lt;wbr&gt;20PM&amp;i7=Senior%&lt;wbr&gt;20software%&lt;wbr&gt;20engineer%&lt;wbr&gt;20%20-%20Content&lt;wbr&gt;%20%26%20Syndica&lt;wbr&gt;tion&amp;i8=&amp;&lt;wbr&gt;i9=&amp;i10=J.&lt;wbr&gt;Job_Title%&lt;wbr&gt;20Desc&amp;pcr-&lt;wbr&gt;id=P4SAo2E%&lt;wbr&gt;2fQbHmzBnzOGfIEY&lt;wbr&gt;m775gf6WWf7H%&lt;wbr&gt;2fBydd2pvkAJ%&lt;wbr&gt;2fXKJ%2bHqhT0Ky%&lt;wbr&gt;2b49HifRK6eix7A8&lt;wbr&gt;nL6t%0d%0abj8hq%&lt;wbr&gt;2b%2fiNyiM&lt;/a&gt;&lt;br&gt;\n  &lt;br&gt;\n&gt; &gt;&lt;br&gt;\n&lt;&lt;a\n href=&quot;http://www.pcrecruiter.net/pcrbin/reg5.exe?i1=WEBGUEST&amp;i2=532335723616234&amp;i3=DETAIL&amp;hash=508826133&amp;i5=&amp;i6=12%2f21%2f2006%207:12:23%20PM&amp;i7=Senior%20software%20engineer%20%20-%20Content%20%26%20Syndication&amp;i8=&amp;i9=&amp;i10=J.Job_Title%20Desc&amp;pcr-id=P4SAo2E%2fQbHmzBnzOGfIEYm775gf6WWf7H%2fBydd2pvkAJ%2fXKJ%2bHqhT0Ky%2b49HifRK6eix7A8nL6t%0d%0abj8hq%2b%2fiNyiM&quot;&gt;http://www.pcrecrui&lt;wbr&gt;ter.net/pcrbin/&lt;wbr&gt;reg5.exe?&lt;wbr&gt;i1=WEBGUEST&amp;&lt;wbr&gt;i2=5323357236162&lt;wbr&gt;34&amp;i3=DETAIL&amp;&lt;wbr&gt;hash=508826133&amp;&lt;wbr&gt;i5=&amp;i6=12%&lt;wbr&gt;2f21%2f2006%&lt;wbr&gt;207:12:23%&lt;wbr&gt;20PM&amp;i7=Senior%&lt;wbr&gt;20software%&lt;wbr&gt;20engineer%&lt;wbr&gt;20%20-%20Content&lt;wbr&gt;%20%26%20Syndica&lt;wbr&gt;tion&amp;i8=&amp;&lt;wbr&gt;i9=&amp;i10=J.&lt;wbr&gt;Job_Title%&lt;wbr&gt;20Desc&amp;pcr-&lt;wbr&gt;id=P4SAo2E%&lt;wbr&gt;2fQbHmzBnzOGfIEY&lt;wbr&gt;m775gf6WWf7H%&lt;wbr&gt;2fBydd2pvkAJ%&lt;wbr&gt;2fXKJ%2bHqhT0Ky%&lt;wbr&gt;2b49HifRK6eix7A8&lt;wbr&gt;nL6t%0d%0abj8hq%&lt;wbr&gt;2b%2fiNyiM&lt;/a&gt;&gt;]&lt;br&gt;\n&gt; &gt; &gt; 19:14:03,516 INFO HttpMethodDirector:&lt;wbr&gt;440 - Retrying\nrequest&lt;br&gt;\n&gt; &gt; &gt;&lt;br&gt;\n&gt; &gt; &gt;&lt;br&gt;\n&gt; &gt; &gt; Has anybody seen anything like this before? Thanks much\nin advance.&lt;br&gt;\n&gt; &gt; &gt;&lt;br&gt;\n&gt; &gt;&lt;br&gt;\n&gt; &gt;&lt;br&gt;\n&gt;&lt;br&gt;\n  &lt;br&gt;\n  &lt;/p&gt;\n  &lt;/div&gt;\n\n&lt;!--End group email --&gt;&lt;/blockquote&gt;\n&lt;br&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n\r\n--------------080007000000030501020401--\r\n\n"}}