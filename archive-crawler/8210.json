{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":473207283,"authorName":"Kristinn Sigur√∞sson","from":"=?iso-8859-1?Q?Kristinn_Sigur=F0sson?= &lt;kristinn@...&gt;","profile":"kristsi25","replyTo":"LIST","senderId":"l9w1g5RHJq4lOI0TutT0YV3X2gD3-Jh9efXKzIQPEegOPW5CN-f80mxMG8LBlRtt1EjJXLpqs9H5JlQsqUrHX-DzwoVXF4W1uykREt9oVQ_UpVZFibM36qQ9j4rCWXts7vfSjD_BQjQW","spamInfo":{"isSpam":false,"reason":"12"},"subject":"RE: [archive-crawler] Intermittent issue running Heritrix with Java 7","postDate":"1373578962","msgId":8210,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PEU0ODZEOTNFMzcyRDhDNDI4MkU4REYwNzgzOTJGMTJEOUU2Q0Q2QGJsaWtpLmJva2hsYWRhLmxvY2FsPg==","inReplyToHeader":"PDc3ODU3NkU4LUEwMjctNDQzMC1BNzU2LTYwMDRGNzA0OUE5MUBhcmNoaXZlLm9yZz4=","referencesHeader":"PEU0ODZEOTNFMzcyRDhDNDI4MkU4REYwNzgzOTJGMTJEOUU2NTdDQGJsaWtpLmJva2hsYWRhLmxvY2FsPiA8Nzc4NTc2RTgtQTAyNy00NDMwLUE3NTYtNjAwNEY3MDQ5QTkxQGFyY2hpdmUub3JnPg=="},"prevInTopic":8209,"nextInTopic":8211,"prevInTime":8209,"nextInTime":8211,"topicId":8206,"numMessagesInTopic":15,"msgSnippet":"As noted earlier I m running: java version 1.7.0_25 Java(TM) SE Runtime Environment (build 1.7.0_25-b15) Java HotSpot(TM) Server VM (build 23.25-b01, mixed","rawEmail":"Return-Path: &lt;kristinn@...&gt;\r\nX-Sender: kristinn@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 62946 invoked by uid 102); 11 Jul 2013 21:43:32 -0000\r\nX-Received: from unknown (HELO mtaq4.grp.bf1.yahoo.com) (10.193.84.143)\n  by m8.grp.bf1.yahoo.com with SMTP; 11 Jul 2013 21:43:32 -0000\r\nX-Received: (qmail 5393 invoked from network); 11 Jul 2013 21:43:32 -0000\r\nX-Received: from unknown (HELO vala.bok.hi.is) (130.208.186.10)\n  by mtaq4.grp.bf1.yahoo.com with SMTP; 11 Jul 2013 21:43:32 -0000\r\nX-Received: from bliki.bokhlada.local (bliki.bok.hi.is [130.208.186.6])\n\tby vala.bok.hi.is (8.13.8/8.13.8) with ESMTP id r6BLhSar011197\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Thu, 11 Jul 2013 21:43:28 GMT\r\nX-Received: from BLIKI.bokhlada.local ([2002:82d0:ba06::82d0:ba06]) by\n bliki.bokhlada.local ([2002:82d0:ba06::82d0:ba06]) with mapi id\n 14.01.0438.000; Thu, 11 Jul 2013 21:42:43 +0000\r\nTo: &quot;archive-crawler@yahoogroups.com&quot; &lt;archive-crawler@yahoogroups.com&gt;\r\nThread-Topic: [archive-crawler] Intermittent issue running Heritrix with\n Java 7\r\nThread-Index: Ac59hHGg2/uan2q8Qx2HXU0sKl34RAA1gMOAAAhrroA=\r\nDate: Thu, 11 Jul 2013 21:42:42 +0000\r\nMessage-ID: &lt;E486D93E372D8C4282E8DF078392F12D9E6CD6@...&gt;\r\nReferences: &lt;E486D93E372D8C4282E8DF078392F12D9E657C@...&gt;\n &lt;778576E8-A027-4430-A756-6004F7049A91@...&gt;\r\nIn-Reply-To: &lt;778576E8-A027-4430-A756-6004F7049A91@...&gt;\r\nAccept-Language: en-US, is-IS\r\nContent-Language: en-US\r\nX-MS-Has-Attach: \r\nX-MS-TNEF-Correlator: \r\nContent-Type: text/plain; charset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nMIME-Version: 1.0\r\nX-Spam-Status: No, score=0.0 required=4.6 tests=none autolearn=disabled\n\tversion=3.3.1\r\nX-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on gleipnir.rhi.hi.is\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: =?iso-8859-1?Q?Kristinn_Sigur=F0sson?= &lt;kristinn@...&gt;\r\nSubject: RE: [archive-crawler] Intermittent issue running Heritrix with Java\n 7\r\nX-Yahoo-Group-Post: member; u=473207283; y=rcmeYbD8rcSjQfonPf_jIp9IvCE5M9LDiYTgW9rSpYvp-1wB\r\nX-Yahoo-Profile: kristsi25\r\n\r\nAs noted earlier I&#39;m running:\njava version &quot;1.7.0_25&quot;\nJava(TM) SE Runtime E=\r\nnvironment (build 1.7.0_25-b15)\nJava HotSpot(TM) Server VM (build 23.25-b01=\r\n, mixed mode)\n\nRunning on the same hardware with the same version of Heritr=\r\nix and the same configuration using 1.6.0-b105 causes no problems.\n\nRunning=\r\n with the &quot;preferIPv4Stack&quot; setting, that Andy suggested, made no discernab=\r\nle difference.\n\nSince I modified the FetchHTTP to log the error for the IPv=\r\n4 test crawl I can now share that the errant -2 are all caused by either:\n\n=\r\n2013-07-11 21:01:11.371 SEVERE thread-70 org.archive.modules.fetcher.FetchH=\r\nTTP.cleanup() http://kristinnp.blog.is/js/jq-form.js\njava.net.ConnectExcept=\r\nion: Connection refused\n        at java.net.PlainSocketImpl.socketConnect(N=\r\native Method)\n        at java.net.AbstractPlainSocketImpl.doConnect(Abstrac=\r\ntPlainSocketImpl.java:339)\n        at java.net.AbstractPlainSocketImpl.conn=\r\nectToAddress(AbstractPlainSocketImpl.java:198)\n        at java.net.Abstract=\r\nPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)\n        at java.n=\r\net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\n        at java.net.So=\r\ncket.connect(Socket.java:579)\n        at org.archive.modules.fetcher.Heritr=\r\nixProtocolSocketFactory.createSocket(HeritrixProtocolSocketFactory.java:130=\r\n)\n        at org.apache.commons.httpclient.HttpConnection.open(HttpConnecti=\r\non.java:708)\n        at org.apache.commons.httpclient.HttpMethodDirector.ex=\r\necuteWithRetry(HttpMethodDirector.java:387)\n        at org.apache.commons.h=\r\nttpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)\n   =\r\n     at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.j=\r\nava:397)\n        at org.apache.commons.httpclient.HttpClient.executeMethod(=\r\nHttpClient.java:346)\n        at org.archive.modules.fetcher.FetchHTTP.inner=\r\nProcess(FetchHTTP.java:659)\n        at org.archive.modules.Processor.innerP=\r\nrocessResult(Processor.java:175)\n        at org.archive.modules.Processor.p=\r\nrocess(Processor.java:142)\n        at org.archive.modules.fetcher.FetchHTTP=\r\n.process(FetchHTTP.java:921)\n        at org.archive.modules.ProcessorChain.=\r\nprocess(ProcessorChain.java:131)\n        at org.archive.crawler.framework.T=\r\noeThread.run(ToeThread.java:148)\n\nor\n\n2013-07-11 20:58:14.177 SEVERE thread=\r\n-110 org.archive.modules.fetcher.FetchHTTP.cleanup() http://www.beintfrabyl=\r\ni.is/static/files/hausmyndir/kindur.jpg\njava.net.SocketTimeoutException: co=\r\nnnect timed out: timeout set at 20000ms.\n        at org.archive.modules.fet=\r\ncher.HeritrixProtocolSocketFactory.createSocket(HeritrixProtocolSocketFacto=\r\nry.java:133)\n        at org.apache.commons.httpclient.HttpConnection.open(H=\r\nttpConnection.java:708)\n        at org.apache.commons.httpclient.HttpMethod=\r\nDirector.executeWithRetry(HttpMethodDirector.java:387)\n        at org.apach=\r\ne.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.ja=\r\nva:171)\n        at org.apache.commons.httpclient.HttpClient.executeMethod(H=\r\nttpClient.java:397)\n        at org.apache.commons.httpclient.HttpClient.exe=\r\ncuteMethod(HttpClient.java:346)\n        at org.archive.modules.fetcher.Fetc=\r\nhHTTP.innerProcess(FetchHTTP.java:659)\n        at org.archive.modules.Proce=\r\nssor.innerProcessResult(Processor.java:175)\n        at org.archive.modules.=\r\nProcessor.process(Processor.java:142)\n        at org.archive.modules.fetche=\r\nr.FetchHTTP.process(FetchHTTP.java:921)\n        at org.archive.modules.Proc=\r\nessorChain.process(ProcessorChain.java:131)\n        at org.archive.crawler.=\r\nframework.ToeThread.run(ToeThread.java:148)\n\nI haven&#39;t looked at all the UR=\r\nLs, but so far it seems that binary data (e.g.jpgs etc.) gets the socket ti=\r\nme out exception and textual data (css, javascript, html) gets connection r=\r\nefused. Weird.\n\n- Kris\n\nP.s. HeritrixProtocolSocketFactory really shouldn&#39;t=\r\n swallow the original SocketTimeoutException and throw a new one.\n\n\n-------=\r\n------------------------------------------------------------------\nLandsb=\r\n=F3kasafn =CDslands - H=E1sk=F3lab=F3kasafn | Arngr=EDmsg=F6tu 3 - 107 Reyk=\r\njav=EDk\nS=EDmi/Tel: +354 5255600 | www.landsbokasafn.is\n-------------------=\r\n------------------------------------------------------\nfyrirvari/disclaimer=\r\n - http://fyrirvari.landsbokasafn.is\n&gt; -----Original Message-----\n&gt; From: a=\r\nrchive-crawler@yahoogroups.com [mailto:archive-\n&gt; crawler@yahoogroups.com] =\r\nOn Behalf Of Adam Miller\n&gt; Sent: 11. j=FAl=ED 2013 17:17\n&gt; To: archive-craw=\r\nler@yahoogroups.com\n&gt; Subject: Re: [archive-crawler] Intermittent issue run=\r\nning Heritrix\n&gt; with Java 7\n&gt;\n&gt;\n&gt;\n&gt; I have two crawls running on different =\r\njava versions for comparison:\n&gt; Sun Java6 and OpenJDK Java7. The crawls are=\r\n not the same size, but\n&gt; they are each running the same snapshot build of =\r\nH3 at the same time.\n&gt; All crawls had a duration of one week.\n&gt;\n&gt;\n&gt;       C=\r\nrawl A1         Crawl B1        Crawl A2        Crawl B2\n&gt; Crawl Date     2=\r\n013-06-04      2013-06-05      2013-07-02      2013-07-03\n&gt; Java   1.6.0_26=\r\n        1.7.0_03        1.6.0_26        1.7.0_03\n&gt; Total &quot;-2&quot; Response Coun=\r\nt      1054    2747    923     2520\n&gt; Total Documents Crawled        888212=\r\n6         16555293        8784282\n&gt; 14744365\n&gt; % of total     0.01%   0.02%=\r\n   0.01%   0.02%\n&gt;\n&gt;\n&gt; Both are running on Ubuntu 12.04.1 LTS\n&gt;\n&gt; Full Java=\r\n versions:\n&gt; Crawl A\n&gt; java version &quot;1.6.0_26&quot;\n&gt; Java(TM) SE Runtime Enviro=\r\nnment (build 1.6.0_26-b03)\n&gt;\n&gt; Crawl B\n&gt; java version &quot;1.7.0_03&quot;\n&gt; OpenJDK =\r\nRuntime Environment (IcedTea7 2.1.1pre) (7~u3-2.1.1~pre1-\n&gt; 1ubuntu3)\n&gt;\n&gt; S=\r\no, at least between Sun Java6 and OpenJDK 7, I don&#39;t have any real\n&gt; differ=\r\nences in the number of &quot;-2&quot; errors.\n&gt;\n&gt; ~Adam\n&gt;\n&gt;\n&gt;\n&gt; On Jul 10, 2013, at 8=\r\n:56 AM, Kristinn Sigur=F0sson\n&gt; &lt;kristinn@...&gt; wrote:\n&gt;\n&gt;\n&gt;\n&gt;\n=\r\n&gt;       I was running a broad crawl (20+ thousand seeds) using the\n&gt; latest=\r\n SNAPSHOT build of Heritrix (3.1.2-20130625) when I noticed\n&gt; that one of o=\r\nur big blogging site wasn&#39;t making much progress.\n&gt;\n&gt;       As it turned ou=\r\nt it was making intermittent progress and then\n&gt; hitting large stretches of=\r\n time where every fetch attempt ended with\n&gt; a -2 (connect fail).\n&gt;\n&gt;      =\r\n My initial thought was that we were being blocked by the\n&gt; website, but th=\r\nat did not turn out to be the case. Additional\n&gt; inspection of the crawl lo=\r\ng revealed that during a 20+ million URL\n&gt; crawl over 14 thousand URLs had =\r\nerrored out with a -2. I compared\n&gt; this with our most recent comparable cr=\r\nawl and for that the number\n&gt; was 60 URLs out of 40+ million. Clearly there=\r\n was a problem with the\n&gt; crawler.\n&gt;\n&gt;       While some domains were affect=\r\n and other not, I could not\n&gt; deduce any pattern as to what domains or URLs=\r\n this affected.\n&gt;\n&gt;       My second assumption then was that this was due t=\r\no me running a\n&gt; SNAPSHOT build. So I put 3.1.0-RC1 (which I had used for t=\r\nhe previous\n&gt; crawl) into play on the same machine. The issue reoccurred. -=\r\n2 errors\n&gt; began showing up in the crawl log about 2 hours in (exactly when=\r\n the\n&gt; 500 second wait times between 15 retries period had passed). This is=\r\n\n&gt; not a regression in Heritrix.\n&gt;\n&gt;       That left two variables. The fac=\r\nt that I was running on new\n&gt; hardware and that I had upgraded from Java 6 =\r\nto 7 (1.7.0_25-b15 to be\n&gt; exact).\n&gt;\n&gt;       I then installed Java 1.6.0-b1=\r\n05 and tried the crawl a third\n&gt; time (again using the SNAPSHOT build), sho=\r\nrtening the retry wait\n&gt; interval from 500 seconds to 50. I figured this co=\r\nuld only make the\n&gt; issue worse and would mean that it could manifest in as=\r\n little as 15\n&gt; minutes, instead of 2 hours.\n&gt;\n&gt;       Now 5.5 hours in the=\r\nre are no sign of URLs with inexplicable -2\n&gt; status codes. It seems the is=\r\nsue IS related to the Java version.\n&gt;\n&gt;       Has anyone encountered this? =\r\nAny ideas on cause or how this\n&gt; could be remedied? For now, just using an =\r\nolder version of Java will\n&gt; fix the issue, but that isn&#39;t a long term solu=\r\ntion.\n&gt;\n&gt;       - Kris\n&gt;\n&gt;       ------------------------------------------=\r\n----------------\n&gt;       Landsb=F3kasafn =CDslands - H=E1sk=F3lab=F3kasafn =\r\n| Arngr=EDmsg=F6tu 3 - 107\n&gt; Reykjav=EDk\n&gt;       S=EDmi/Tel: +354 5255600 |=\r\n www.landsbokasafn.is\n&gt;       ---------------------------------------------=\r\n-------------\n&gt;       fyrirvari/disclaimer - http://fyrirvari.landsbokasafn=\r\n.is\n&gt; &lt;http://fyrirvari.landsbokasafn.is/&gt;\n&gt;\n&gt;\n&gt;\n&gt; \n\n"}}