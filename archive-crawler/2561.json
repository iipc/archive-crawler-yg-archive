{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr (archive.org)","from":"&quot;Gordon Mohr (archive.org)&quot; &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"oQOwudnQ3nNSj70n75FFraFZ_cMHTOW8RN6d-RN5Xod_JMrlOTyOgssNhsWOuBvGKXBrfVOPWPQnIpQWQD20BNp0zux-UAvqoO2ubwVxpaBvpmxvndmb","spamInfo":{"isSpam":false,"reason":"4"},"subject":"Re: [archive-crawler] Re: Cursor has been closed exception","postDate":"1137531219","msgId":2561,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQzQ0Q1OTUzLjkwNjA2MDZAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGRxamhodityNmg5QGVHcm91cHMuY29tPg==","referencesHeader":"PGRxamhodityNmg5QGVHcm91cHMuY29tPg=="},"prevInTopic":2560,"nextInTopic":2562,"prevInTime":2560,"nextInTime":2562,"topicId":2528,"numMessagesInTopic":14,"msgSnippet":"What Stack said. More detail: - If you re using a Bloom filter instead of the default BDB-based alreadyIncluded, then some X MB of work which used to be","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 93862 invoked from network); 17 Jan 2006 22:40:48 -0000\r\nReceived: from unknown (66.218.66.166)\n  by m15.grp.scd.yahoo.com with QMQP; 17 Jan 2006 22:40:48 -0000\r\nReceived: from unknown (HELO ia00524.archive.org) (207.241.224.171)\n  by mta5.grp.scd.yahoo.com with SMTP; 17 Jan 2006 22:40:47 -0000\r\nReceived: (qmail 23596 invoked by uid 100); 17 Jan 2006 20:48:07 -0000\r\nReceived: from adsl-71-130-102-78.dsl.pltn13.pacbell.net (HELO ?192.168.1.10?) (gojomo@...@71.130.102.78)\n  by mail-dev.archive.org with SMTP; 17 Jan 2006 20:48:07 -0000\r\nMessage-ID: &lt;43CD5953.9060606@...&gt;\r\nDate: Tue, 17 Jan 2006 12:53:39 -0800\r\nUser-Agent: Mozilla Thunderbird 1.0.7-1.1.fc3 (X11/20050929)\r\nX-Accept-Language: en-us, en\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;dqjhhv+r6h9@...&gt;\r\nIn-Reply-To: &lt;dqjhhv+r6h9@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-Spam-DCC: : \r\nX-Spam-Checker-Version: SpamAssassin 2.63 (2004-01-11) on ia00524.archive.org\r\nX-Spam-Level: \r\nX-Spam-Status: No, hits=-83.4 required=7.0 tests=AWL,USER_IN_WHITELIST \n\tautolearn=no version=2.63\r\nX-eGroups-Msg-Info: 2:4:12:0\r\nFrom: &quot;Gordon Mohr (archive.org)&quot; &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] Re: Cursor has been closed exception\r\nX-Yahoo-Group-Post: member; u=137285340; y=FtVUilOw0hPd-THoI3jCiKjQFB8rxV7HCYewtcbVXWdr\r\nX-Yahoo-Profile: gojomo\r\n\r\nWhat Stack said. More detail:\n\n- If you&#39;re using a Bloom filter instead of the default BDB-based\n   alreadyIncluded, then some X MB of work which used to be handled\n   inside the BDB memoory footprint has moved outside of it. To keep\n   the same rough balances in your heap, you should decrease the BDB\n   cache size accordingly. So for example if you&#39;re using a 512MB\n   Bloom filter, and your BDB cache was previously ~1.2GB (the default\n   60% of 2GB), you&#39;d probably want to decrease it to ~700MB -- 35% --\n   simply because now the non-BDB portion of the heap is spending\n   512MB doing something that used to be handled completely within\n   the 1.2GB.\n\n- Additionally, as noted in the Heritrix 1.6 release notes here...\n    http://crawler.archive.org/articles/releasenotes.html#bdb_64bit\n   ...and the Sleepycat blog here...\n    http://blog.sleepycat.com/2005/11/je-and-64b-jvms.html\n   ...BDB as of 2.0.90 overgrows its cache on 64bit JVMs. The workaround\n   is to trim the assigned cache size by 1/3 to 1/2. (Otherwise, that\n   60% default bloats to 90% or more, making an OOME rather certain.)\n\nHope this helps,\n\n- Gordon @ IA\n\njoehung302 wrote:\n&gt;&gt;So you&#39;re OOME&#39;ing after running for a day?   Do you have a large \n&gt; \n&gt; seed \n&gt; \n&gt;&gt;list (You&#39;ve mentioned 5k seed list in the past)?  \n&gt;&gt;Did you ever say what \n&gt;&gt;your OS is?  You say its linux and your JVM is 1.5.0_05-b05 but is \n&gt; \n&gt; it  a \n&gt; \n&gt;&gt;recent kernel and glibc?  What is the size of your bdbje cache?  \n&gt; \n&gt; If \n&gt; \n&gt;&gt;default -- 60% -- you might set it down to 30% or 20% or so \n&gt; \n&gt; especially \n&gt; \n&gt;&gt;using Bloom already seen.\n&gt; \n&gt; \n&gt; \n&gt; Yes I have a 22K seeds list. The test settings I have now is\n&gt; - 4 crawlers (I might go to 8 later)\n&gt; - SurtPrefix scope on .com\n&gt; - CrawlMap to 4 machines \n&gt; com,f   i01\n&gt; com,l   i02\n&gt; com,r   i03\n&gt; com,z   i04\n&gt; - mx2000m\n&gt; - I didn&#39;t set bdb cache. \n&gt; (current setting is &lt;integer name=&quot;bdb-cache-percent&quot;&gt;0&lt;/integer&gt;). \n&gt; \n&gt; - machine settings:\n&gt; [acc@i04 crawler_control]$ /lib/libc.so.6\n&gt; GNU C Library stable release version 2.3.4, by Roland McGrath et al.\n&gt; Copyright (C) 2005 Free Software Foundation, Inc.\n&gt; This is free software; see the source for copying conditions.\n&gt; There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A\n&gt; PARTICULAR PURPOSE.\n&gt; Compiled by GNU CC version 3.4.4 20050721 (Red Hat 3.4.4-2).\n&gt; Compiled on a Linux 2.4.20 system on 2005-10-08.\n&gt; Available extensions:\n&gt;         GNU libio by Per Bothner\n&gt;         crypt add-on version 2.1 by Michael Glad and others\n&gt;         linuxthreads-0.10 by Xavier Leroy\n&gt;         The C stubs add-on version 2.1.2.\n&gt;         BIND-8.2.3-T5B\n&gt;         NIS(YP)/NIS+ NSS modules 0.19 by Thorsten Kukuk\n&gt;         Glibc-2.0 compatibility add-on by Cristian Gafton\n&gt;         GNU Libidn by Simon Josefsson\n&gt;         libthread_db work sponsored by Alpha Processor Inc\n&gt; Thread-local storage support included.\n&gt; For bug reporting instructions, please see:\n&gt; &lt;http://www.gnu.org/software/libc/bugs.html&gt;.\n&gt; \n&gt; [acc@i04 crawler_control]$ uname -a\n&gt; Linux i04.ba.accelovation.com 2.6.9-22.0.1.106.unsupportedsmp #1 SMP \n&gt; Sun Nov 6 09:55:19 CST 2005 x86_64 x86_64 x86_64 GNU/Linux\n&gt; \n&gt; [acc@i04 crawler_control]$ grep MemTotal /proc/meminfo\n&gt; MemTotal:      4046212 kB\n&gt; \n&gt; [acc@i04 crawler_control]$ grep -e &quot;model \n&gt; name&#92;|cache&#92;|MHz&quot; /proc/cpuinfo\n&gt; model name      :               Intel(R) Pentium(R) 4 CPU 3.00GHz\n&gt; cpu MHz         : 2992.627\n&gt; cache size      : 1024 KB\n&gt; cache_alignment : 128\n&gt; model name      :               Intel(R) Pentium(R) 4 CPU 3.00GHz\n&gt; cpu MHz         : 2992.627\n&gt; cache size      : 1024 KB\n&gt; cache_alignment : 128\n&gt; \n&gt; \n&gt; I&#39;ll try with 20% bdb cache + bloom later today.\n&gt; \n&gt; cheers,\n&gt; -joe\n&gt; \n&gt; \n&gt;&gt;St.Ack\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;&gt;cheers,\n&gt;&gt;&gt;-joe\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;SPONSORED LINKS\n&gt;&gt;&gt;Computer security \n&gt;&gt;&gt;&lt;http://groups.yahoo.com/gads?\n&gt; \n&gt; t=ms&k=Computer+security&w1=Computer+security&w2=Computer+training&c=\n&gt; 2&s=46&.sig=BHmcxBg5sKfN9-gcWnJWDg&gt; \n&gt; \n&gt;&gt;&gt;\tComputer training \n&gt;&gt;&gt;&lt;http://groups.yahoo.com/gads?\n&gt; \n&gt; t=ms&k=Computer+training&w1=Computer+security&w2=Computer+training&c=\n&gt; 2&s=46&.sig=v0JjJWA4s7mLnWQWdFxuTQ&gt; \n&gt; \n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;-----------------------------------------------------------------\n&gt; \n&gt; -------\n&gt; \n&gt;&gt;&gt;YAHOO! GROUPS LINKS\n&gt;&gt;&gt;\n&gt;&gt;&gt;    *  Visit your group &quot;archive-crawler\n&gt;&gt;&gt;      &lt;http://groups.yahoo.com/group/archive-crawler&gt;&quot; on the \n&gt; \n&gt; web.\n&gt; \n&gt;&gt;&gt;       \n&gt;&gt;&gt;    *  To unsubscribe from this group, send an email to:\n&gt;&gt;&gt;       archive-crawler-unsubscribe@yahoogroups.com\n&gt;&gt;&gt;      &lt;mailto:archive-crawler-unsubscribe@yahoogroups.com?\n&gt; \n&gt; subject=Unsubscribe&gt;\n&gt; \n&gt;&gt;&gt;       \n&gt;&gt;&gt;    *  Your use of Yahoo! Groups is subject to the Yahoo! Terms \n&gt; \n&gt; of\n&gt; \n&gt;&gt;&gt;      Service &lt;http://docs.yahoo.com/info/terms/&gt;.\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;-----------------------------------------------------------------\n&gt; \n&gt; -------\n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt;  \n&gt; Yahoo! Groups Links\n&gt; \n&gt; \n&gt; \n&gt;  \n&gt; \n&gt; \n\n\n"}}