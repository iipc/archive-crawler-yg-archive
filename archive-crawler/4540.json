{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":323364166,"authorName":"nickzwk","from":"&quot;nickzwk&quot; &lt;nickzwk@...&gt;","profile":"nickzwk","replyTo":"LIST","senderId":"--cOCFIoWP0euuMg9QceWVOfOdlYsDaWi1ymSf0ActqRjVhhN95ExVcz8sTqeOqzvKPFcrlsGA5uG1w9FdQCoiIl2e4","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Extend QueueAssignmentPolicy","postDate":"1189579917","msgId":4540,"canDelete":false,"contentTrasformed":false,"systemMessage":true,"headers":{"messageIdInHeader":"PGZjODJhZCtibmxuQGVHcm91cHMuY29tPg=="},"prevInTopic":0,"nextInTopic":4555,"prevInTime":4539,"nextInTime":4541,"topicId":4540,"numMessagesInTopic":3,"msgSnippet":"i wanted to extend QueueAssignmentPolicy i create my own QueueAssignmentPolicy NicknameQueueAssignmentPolicy /* NicknameQueueAssignmentPolicy * * $Id:","rawEmail":"Return-Path: &lt;nickzwk@...&gt;\r\nReceived: (qmail 22446 invoked from network); 12 Sep 2007 07:22:57 -0000\r\nReceived: from unknown (66.218.67.36)\n  by m48.grp.scd.yahoo.com with QMQP; 12 Sep 2007 07:22:57 -0000\r\nReceived: from unknown (HELO n4c.bullet.sp1.yahoo.com) (69.147.64.184)\n  by mta10.grp.scd.yahoo.com with SMTP; 12 Sep 2007 07:22:57 -0000\r\nReceived: from [216.252.122.216] by n4.bullet.sp1.yahoo.com with NNFMP; 12 Sep 2007 07:22:07 -0000\r\nReceived: from [209.73.164.86] by t1.bullet.sp1.yahoo.com with NNFMP; 12 Sep 2007 07:22:07 -0000\r\nReceived: from [66.218.66.73] by t8.bullet.scd.yahoo.com with NNFMP; 12 Sep 2007 07:22:07 -0000\r\nX-Sender: nickzwk@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 76759 invoked from network); 12 Sep 2007 06:53:09 -0000\r\nReceived: from unknown (66.218.66.68)\n  by m3.grp.re1.yahoo.com with QMQP; 12 Sep 2007 06:53:09 -0000\r\nReceived: from unknown (HELO n9b.bullet.sp1.yahoo.com) (69.147.64.101)\n  by mta11.grp.scd.yahoo.com with SMTP; 12 Sep 2007 06:53:09 -0000\r\nReceived: from [216.252.122.218] by n9.bullet.sp1.yahoo.com with NNFMP; 12 Sep 2007 06:51:57 -0000\r\nReceived: from [66.218.69.1] by t3.bullet.sp1.yahoo.com with NNFMP; 12 Sep 2007 06:51:57 -0000\r\nReceived: from [66.218.67.197] by t1.bullet.scd.yahoo.com with NNFMP; 12 Sep 2007 06:51:57 -0000\r\nDate: Wed, 12 Sep 2007 06:51:57 -0000\r\nTo: archive-crawler@yahoogroups.com\r\nMessage-ID: &lt;fc82ad+bnln@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Msg-Info: 1:6:0:0\r\nFrom: &quot;nickzwk&quot; &lt;nickzwk@...&gt;\r\nSubject: Extend QueueAssignmentPolicy\r\nX-Yahoo-Group-Post: member; u=323364166; y=GNBEO3yOWlr-AXtawOX_tz7E6atc6vHRpAJ6rWRMkzqWKQ\r\nX-Yahoo-Profile: nickzwk\r\nX-eGroups-Approved-By: gojomo &lt;gojomo@...&gt; via web; 12 Sep 2007 07:22:06 -0000\r\n\r\ni wanted to extend QueueAssignmentPolicy\ni create my own QueueAssignmentPol=\r\nicy NicknameQueueAssignmentPolicy\n/* NicknameQueueAssignmentPolicy\n*\n* $Id:=\r\n HostnameQueueAssignmentPolicy.java 3838 2005-09-21 23:00:47Z \ngojomo $\n*\n*=\r\n Created on Oct 5, 2004\n*\n* Copyright (C) 2004 Internet Archive.\n*\n* This f=\r\nile is part of the Heritrix web crawler (crawler.archive.org).\n*\n* Heritrix=\r\n is free software; you can redistribute it and/or modify\n* it under the ter=\r\nms of the GNU Lesser Public License as published by\n* the Free Software Fou=\r\nndation; either version 2.1 of the License, or\n* any later version.\n*\n* Her=\r\nitrix is distributed in the hope that it will be useful,\n* but WITHOUT ANY =\r\nWARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS=\r\n FOR A PARTICULAR PURPOSE.  See the\n* GNU Lesser Public License for more de=\r\ntails.\n*\n* You should have received a copy of the GNU Lesser Public License=\r\n\n* along with Heritrix; if not, write to the Free Software\n* Foundation, In=\r\nc., 59 Temple Place, Suite 330, Boston, MA  02111-\n1307  USA\n*/ \npackage or=\r\ng.archive.crawler.frontier;\n\nimport java.util.logging.Logger;\nimport org.ar=\r\nchive.crawler.datamodel.CandidateURI;\nimport org.archive.crawler.framework.=\r\nCrawlController;\n\n\n/**\n * QueueAssignmentPolicy based on the hostname:port =\r\nevident in the \ngiven\n * CrawlURI.\n * \n * @author nick\n */\npublic class Nic=\r\nknameQueueAssignmentPolicy extends \nQueueAssignmentPolicy {\n    private sta=\r\ntic final Logger logger =3D Logger\n        .getLogger(NicknameQueueAssignme=\r\nntPolicy.class.getName());\n    /**\n     * \n     */\n    public String getCla=\r\nssKey(CrawlController controller, \nCandidateURI cauri) {\n        String uri=\r\n =3D cauri.getUURI().toString();\n        long hash =3D ELFHash(uri);\n      =\r\n  String a =3D Long.toString(hash % 100);\n        return a;\n    }\n    publi=\r\nc long ELFHash(String str)\n    {\n       long hash =3D 0;\n       long x    =\r\n=3D 0;\n       for(int i =3D 0; i &lt; str.length(); i++)\n       {\n          ha=\r\nsh =3D (hash &lt;&lt; 4) + str.charAt(i);\n          if((x =3D hash & 0xF0000000L)=\r\n !=3D 0)\n          {\n             hash ^=3D (x &gt;&gt; 24);\n             hash &=\r\n=3D ~x;\n          }\n       }\n       return (hash & 0x7FFFFFFF);\n    }\n\n\n}\n\n=\r\nmy heritrix version is 1.12.1\nand i changed the AbstractFrontier as below:\n=\r\n\nString queueStr =3D System.getProperty(AbstractFrontier.class.getName() \n+=\r\n\n                &quot;.&quot; + ATTR_QUEUE_ASSIGNMENT_POLICY,\n                Nickna=\r\nmeQueueAssignmentPolicy.class.getName() + &quot; &quot; +\n                HostnameQue=\r\nueAssignmentPolicy.class.getName() + &quot; &quot; +\n                IPQueueAssignmen=\r\ntPolicy.class.getName() + &quot; &quot; +\n                BucketQueueAssignmentPolicy=\r\n.class.getName() + &quot; &quot; +\n                SurtAuthorityQueueAssignmentPolicy=\r\n.class.getName());\n        Pattern p =3D Pattern.compile(&quot;&#92;&#92;s*,&#92;&#92;s*|&#92;&#92;s+&quot;);=\r\n\n        String [] queues =3D p.split(queueStr);\n        if (queues.length =\r\n&lt;=3D 0) {\n            throw new RuntimeException(&quot;Failed parse of &quot; +\n     =\r\n               &quot; assignment queue policy string: &quot; + queueStr);\n        }\n =\r\n       t =3D addElementToDefinition(new SimpleType\n(ATTR_QUEUE_ASSIGNMENT_P=\r\nOLICY,\n                &quot;Defines how to assign URIs to queues. Can assign by=\r\n \nhost, &quot; +\n                &quot;by ip, and into one of a fixed set of buckets =\r\n(1k).&quot;,\n                queues[0], queues));\n        t.setExpertSetting(tru=\r\ne);\n        t.setOverrideable(true);\n\ni also change the heritrix.properties=\r\n as below:\n\norg.archive.crawler.frontier.AbstractFrontier.queue-assignment-=\r\npolicy \n=3D &#92;\n    org.archive.crawler.frontier.NicknameQueueAssignmentPolic=\r\ny &#92;\n    org.archive.crawler.frontier.HostnameQueueAssignmentPolicy &#92;\n    or=\r\ng.archive.crawler.frontier.IPQueueAssignmentPolicy &#92;\n    org.archive.crawle=\r\nr.frontier.BucketQueueAssignmentPolicy &#92;\n    org.archive.crawler.frontier.S=\r\nurtAuthorityQueueAssignmentPolicy \norg.archive.crawler.frontier.BdbFrontier=\r\n.level =3D INFO\n\nbut when reset the heritrix,i find the order.xml didn&#39;t ac=\r\ncept my \nchanges,\n &lt;newObject name=3D&quot;frontier&quot; \nclass=3D&quot;org.archive.crawl=\r\ner.frontier.BdbFrontier&quot;&gt;\n      &lt;float name=3D&quot;delay-factor&quot;&gt;5.0&lt;/float&gt;\n  =\r\n    &lt;integer name=3D&quot;max-delay-ms&quot;&gt;30000&lt;/integer&gt;\n      &lt;integer name=3D&quot;m=\r\nin-delay-ms&quot;&gt;3000&lt;/integer&gt;\n      &lt;integer name=3D&quot;max-retries&quot;&gt;30&lt;/integer=\r\n&gt;\n      &lt;long name=3D&quot;retry-delay-seconds&quot;&gt;900&lt;/long&gt;\n      &lt;integer name=\r\n=3D&quot;preference-embed-hops&quot;&gt;1&lt;/integer&gt;\n      &lt;integer name=3D&quot;total-bandwid=\r\nth-usage-KB-sec&quot;&gt;0&lt;/integer&gt;\n      &lt;integer name=3D&quot;max-per-host-bandwidth-=\r\nusage-KB-sec&quot;&gt;0&lt;/integer&gt;\n      &lt;string name=3D&quot;queue-assignment-\npolicy&quot;&gt;o=\r\nrg.archive.crawler.frontier.HostnameQueueAssignmentPolicy&lt;/st\nring&gt;\n      &lt;=\r\nstring name=3D&quot;force-queue-assignment&quot;&gt;&lt;/string&gt;\n      &lt;boolean name=3D&quot;pau=\r\nse-at-start&quot;&gt;false&lt;/boolean&gt;\n      &lt;boolean name=3D&quot;pause-at-finish&quot;&gt;false&lt;=\r\n/boolean&gt;\n      &lt;boolean name=3D&quot;source-tag-seeds&quot;&gt;false&lt;/boolean&gt;\n      &lt;b=\r\noolean name=3D&quot;recovery-log-enabled&quot;&gt;true&lt;/boolean&gt;\n      &lt;boolean name=3D&quot;=\r\nhold-queues&quot;&gt;true&lt;/boolean&gt;\n      &lt;integer name=3D&quot;balance-replenish-amount=\r\n&quot;&gt;3000&lt;/integer&gt;\n      &lt;integer name=3D&quot;error-penalty-amount&quot;&gt;100&lt;/integer&gt;=\r\n\n      &lt;long name=3D&quot;queue-total-budget&quot;&gt;-1&lt;/long&gt;\n      &lt;string name=3D&quot;co=\r\nst-\npolicy&quot;&gt;org.archive.crawler.frontier.UnitCostAssignmentPolicy&lt;/string&gt;\n=\r\n      &lt;long name=3D&quot;snooze-deactivate-ms&quot;&gt;300000&lt;/long&gt;\n      &lt;integer name=\r\n=3D&quot;target-ready-backlog&quot;&gt;50&lt;/integer&gt;\n      &lt;string name=3D&quot;uri-included-\n=\r\nstructure&quot;&gt;org.archive.crawler.util.BdbUriUniqFilter&lt;/string&gt;\n    &lt;/newObje=\r\nct&gt;\n\ni wonder how can i change the QueueAssignmentPolicy \nbecause when craw=\r\nl one site,there is 1 active thread ,it is too slow \nand i want to speed he=\r\nritrix \ni&#39;m looking forward to the answer\n\n\n"}}