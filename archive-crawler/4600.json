{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":321202191,"authorName":"Ted Dziuba","from":"Ted Dziuba &lt;ted@...&gt;","replyTo":"LIST","senderId":"TVRB6yDqsNjrWRaovg7CS-CaxB8o3wJg6JSJaJSdV6gAPtOanKbPrQgxaJuO7SgKthT2_lrOiwGIwXR0NWb4W2cm","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] Crawl pausing itself","postDate":"1192487748","msgId":4600,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ3MTNFQjQ0LjMwMDAyMDFAcGVyc2FpLmNvbT4=","inReplyToHeader":"PDQ3MTNFN0E2LjMwNzA3MDdAZHVib2NlLm5ldD4=","referencesHeader":"PDQ3MTNENjAyLjEwMTAxMDdAcGVyc2FpLmNvbT4gPDQ3MTNENzUxLjkwOTA5MDlAZHVib2NlLm5ldD4gPDQ3MTNFMkY4LjEwNTAwMDJAcGVyc2FpLmNvbT4gPDQ3MTNFN0E2LjMwNzA3MDdAZHVib2NlLm5ldD4="},"prevInTopic":4599,"nextInTopic":4601,"prevInTime":4599,"nextInTime":4601,"topicId":4596,"numMessagesInTopic":8,"msgSnippet":"Interesting.  It seems that we were using the JVM s default maximum heap size, which is the lesser of 1/4 the system memory and 1GB, so in EC2, about 450MB.","rawEmail":"Return-Path: &lt;ted@...&gt;\r\nX-Sender: ted@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 80301 invoked from network); 15 Oct 2007 22:35:35 -0000\r\nReceived: from unknown (66.218.67.95)\n  by m47.grp.scd.yahoo.com with QMQP; 15 Oct 2007 22:35:35 -0000\r\nReceived: from unknown (HELO nz-out-0506.google.com) (64.233.162.238)\n  by mta16.grp.scd.yahoo.com with SMTP; 15 Oct 2007 22:35:35 -0000\r\nReceived: by nz-out-0506.google.com with SMTP id i28so1121560nzi\n        for &lt;archive-crawler@yahoogroups.com&gt;; Mon, 15 Oct 2007 15:35:34 -0700 (PDT)\r\nReceived: by 10.141.34.12 with SMTP id m12mr2999196rvj.1192487734201;\n        Mon, 15 Oct 2007 15:35:34 -0700 (PDT)\r\nReturn-Path: &lt;ted@...&gt;\r\nReceived: from ?192.168.1.4? ( [76.102.193.127])\n        by mx.google.com with ESMTPS id t1sm5854237poh.2007.10.15.15.35.32\n        (version=TLSv1/SSLv3 cipher=RC4-MD5);\n        Mon, 15 Oct 2007 15:35:32 -0700 (PDT)\r\nMessage-ID: &lt;4713EB44.3000201@...&gt;\r\nDate: Mon, 15 Oct 2007 15:35:48 -0700\r\nUser-Agent: Thunderbird 1.5.0.13 (X11/20070824)\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;4713D602.1010107@...&gt; &lt;4713D751.9090909@...&gt; &lt;4713E2F8.1050002@...&gt; &lt;4713E7A6.3070707@...&gt;\r\nIn-Reply-To: &lt;4713E7A6.3070707@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Ted Dziuba &lt;ted@...&gt;\r\nSubject: Re: [archive-crawler] Crawl pausing itself\r\nX-Yahoo-Group-Post: member; u=321202191\r\n\r\nInteresting.  It seems that we were using the JVM&#39;s default maximum heap \nsize, which is the lesser of 1/4 the system memory and 1GB, so in EC2, \nabout 450MB.  We&#39;re going to bring the max ToeThread count from 50 down \nto 30 and give it some more memory, and see what happens.\n\n\n-Ted\n\nMichael Stack wrote:\n&gt;\n&gt; If a &#39;serious errors&#39; such as an OOME, it&#39;ll trigger a pause (See\n&gt; http://crawler.archive.org/xref/org/archive/crawler/framework/ToeThread.html#211 \n&gt; &lt;http://crawler.archive.org/xref/org/archive/crawler/framework/ToeThread.html#211&gt; \n&gt;\n&gt; and line 173).\n&gt;\n&gt; Does the OOME, as far as you can detemine, have an obvious cause (rare\n&gt; but sometimes the case)? You have a maximum of 1.75G up on EC2, IIRC.\n&gt; Have you set your heap a good bit less than this? You might also try\n&gt; running with less toe threads.\n&gt;\n&gt; St.Ack\n&gt;\n&gt; Ted Dziuba wrote:\n&gt; &gt;\n&gt; &gt; Ah, yes, I am seeing OOMEs in ToeThread&#39;s run method. If all ToeTheads\n&gt; &gt; throw exceptions, does the crawl pause?\n&gt; &gt;\n&gt; &gt; Ted\n&gt; &gt;\n&gt; &gt; Michael Stack wrote:\n&gt; &gt; &gt;\n&gt; &gt; &gt; Anything on the consoles about OOMEs? Are the disks full?\n&gt; &gt; &gt; St.Ack\n&gt; &gt; &gt;\n&gt; &gt; &gt; Ted Dziuba wrote:\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; We have a few Heritrix instances set up in Amazon EC2 crawling a\n&gt; &gt; fairly\n&gt; &gt; &gt; &gt; small amount of data. We are seeing the crawl pause itself as it \n&gt; goes,\n&gt; &gt; &gt; &gt; with no indication as to why in the crawl log. What could cause \n&gt; this?\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; Thanks for any pointers.\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; Ted\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt;\n&gt;  \n\n\n"}}