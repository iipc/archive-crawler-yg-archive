{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"veBoRuau_c-RpI46hLIauxOlWUidGAc-3psZ6s1-H0KOkVUiDGBEdVJg_Jd9K9U1roRlsRq7SHiN383iXU160gG1nMgPSQo","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] Re: Queues Are exhasted","postDate":"1293562946","msgId":6949,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDY5MzM1RTQyLTUwQ0YtNDlCNi04RkYzLTcyRjQzNjI3MzBFRUBhcmNoaXZlLm9yZz4=","inReplyToHeader":"PGlmY243OCtiYjZzQGVHcm91cHMuY29tPg==","referencesHeader":"PGlmY243OCtiYjZzQGVHcm91cHMuY29tPg=="},"prevInTopic":6948,"nextInTopic":0,"prevInTime":6948,"nextInTime":6950,"topicId":6942,"numMessagesInTopic":6,"msgSnippet":"One of your queues is showing a snooze time over a minute. Usual politeness snoozes are seconds, rather than minutes, long. That suggests a URI tried from that","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 61151 invoked from network); 28 Dec 2010 19:00:05 -0000\r\nX-Received: from unknown (98.137.34.46)\n  by m3.grp.sp2.yahoo.com with QMQP; 28 Dec 2010 19:00:05 -0000\r\nX-Received: from unknown (HELO out3.smtp.messagingengine.com) (66.111.4.27)\n  by mta3.grp.sp2.yahoo.com with SMTP; 28 Dec 2010 19:00:05 -0000\r\nX-Received: from compute2.internal (compute2.nyi.mail.srv.osa [10.202.2.42])\n\tby gateway1.messagingengine.com (Postfix) with ESMTP id E272E300\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Tue, 28 Dec 2010 14:00:04 -0500 (EST)\r\nX-Received: from frontend2.messagingengine.com ([10.202.2.161])\n  by compute2.internal (MEProxy); Tue, 28 Dec 2010 14:00:04 -0500\r\nX-Sasl-enc: q9mRS4qIbPeU443isyg1kM0qK4Po0J+G3+ShAZaDCa+l 1293562804\r\nX-Received: from [10.0.100.196] (c-67-188-34-83.hsd1.ca.comcast.net [67.188.34.83])\n\tby mail.messagingengine.com (Postfix) with ESMTPSA id 141B34403D6\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Tue, 28 Dec 2010 14:00:04 -0500 (EST)\r\nReferences: &lt;ifcn78+bb6s@...&gt;\r\nIn-Reply-To: &lt;ifcn78+bb6s@...&gt;\r\nMime-Version: 1.0 (iPad Mail 8C148)\r\nContent-Transfer-Encoding: quoted-printable\r\nContent-Type: text/plain;\n\tcharset=us-ascii\r\nMessage-Id: &lt;69335E42-50CF-49B6-8FF3-72F4362730EE@...&gt;\r\nCc: &quot;archive-crawler@yahoogroups.com&quot; &lt;archive-crawler@yahoogroups.com&gt;\r\nX-Mailer: iPad Mail (8C148)\r\nDate: Tue, 28 Dec 2010 11:02:26 -0800\r\nTo: &quot;archive-crawler@yahoogroups.com&quot; &lt;archive-crawler@yahoogroups.com&gt;\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] Re: Queues Are exhasted\r\nX-Yahoo-Group-Post: member; u=137285340; y=2olYcG8JSjNJo92a_RYkZzPeFIl63OSRcfC_MzOh0Wbe\r\nX-Yahoo-Profile: gojomo\r\n\r\nOne of your queues is showing a snooze time over a minute. Usual politeness=\r\n snoozes are seconds, rather than minutes, long.\n\nThat suggests a URI tried=\r\n from that queue failed in a way that triggered a long-snooze, to wait out =\r\na potential transient network/server problem. Most commonly, this is no con=\r\nnect or no response at all, or a response that breaks off early. The exact =\r\nproblem should be noted in the &#39;nonfatal-errors.log&#39;, and the URI affected =\r\nshould be the queue&#39;s &#39;last peeked&#39;.\n\nIf that exact URI always fails in tha=\r\nt way, it will have to be tried up to maxRetries times, with a retryDelay w=\r\nait between each try, before it fails for good and the next URI is tried. S=\r\no, you couldreduce those two settings to spend less time waiting, or fewer =\r\ntotal retries,  before proceeding. (Always keep maxRetries at least 3, thou=\r\ngh, as the usual consider-then-defer-for-DNS-or-robots cycle can use up 2 t=\r\nries.)\n\n- Gordon\n\nOn Dec 28, 2010, at 5:03 AM, &quot;yotpo.official&quot; &lt;tomer@yotp=\r\no.com&gt; wrote:\n\n&gt; Hi again Gordon,\n&gt; I want to clarify a bit more:\n&gt; I&#39;m try=\r\ning to crawl my website that has 10 MB/sec for bandwidth for my crawling, t=\r\nhe expected bandwidth for my crawling is 1200 KB/s. As for concurrent conne=\r\nctions the webmaster set it to somewhere around 40 so in the way I&#39;m runnin=\r\ng today (10 threads and 10 parallel queues) so that isn&#39;t my problem. The s=\r\nite is pretty big and there is no way there is nothing to crawl after a sho=\r\nrt time. My deepest queue is about 1441733. My reports are:\n&gt; \n&gt; ToeTheards=\r\n(example of two threads):\n&gt; Toe threads report - 201012280652\n&gt; Job being c=\r\nrawled: basic\n&gt; Number of toe threads in pool: 10 (1 active)\n&gt; \n&gt; [ToeThrea=\r\nd #1:\n&gt; -no CrawlURI-\n&gt;    WAITING for 1d6h59m316ms\n&gt;    step: ABOUT_TO_GET=\r\n_URI for 1d6h59m316ms\n&gt; Java Thread State: TIMED_WAITING\n&gt; Blocked/Waiting =\r\nOn: NONE\n&gt;    java.lang.Thread.sleep(Native Method)\n&gt;    org.archive.crawle=\r\nr.frontier.\n&gt; WorkQueueFrontier.findEligibleURI(WorkQueueFrontier.java:718)=\r\n\n&gt;    org.archive.crawler.frontier.AbstractFrontier.next(AbstractFrontier.j=\r\nava:432)\n&gt;    org.archive.crawler.framework.ToeThread.run(ToeThread.java:13=\r\n3)\n&gt; ]\n&gt; [ToeThread #2:\n&gt; -no CrawlURI-\n&gt;    WAITING for 1d11h9m41s841ms\n&gt; =\r\n   step: ABOUT_TO_GET_URI for 1d11h9m41s841ms\n&gt; Java Thread State: TIMED_WA=\r\nITING\n&gt; Blocked/Waiting On: NONE\n&gt;    java.lang.Thread.sleep(Native Method)=\r\n\n&gt;    org.archive.crawler.frontier.WorkQueueFrontier.findEligibleURI(WorkQu=\r\neueFrontier.java:718)\n&gt;    org.archive.crawler.frontier.AbstractFrontier.ne=\r\nxt(AbstractFrontier.java:432)\n&gt;    org.archive.crawler.framework.ToeThread.=\r\nrun(ToeThread.java:133)\n&gt; ]\n&gt; \n&gt; \n&gt; my Frontier report is:\n&gt; Frontier repor=\r\nt - 201012280654\n&gt; Job being crawled: basic\n&gt; \n&gt; -----=3D=3D=3D=3D=3D STATS=\r\n =3D=3D=3D=3D=3D-----\n&gt; Discovered:    1823416\n&gt; Queued:        1535496\n&gt; F=\r\ninished:      287946\n&gt;  Successfully: 184173\n&gt;  Failed:       245\n&gt;  Disreg=\r\narded:  103528\n&gt; \n&gt; -----=3D=3D=3D=3D=3D QUEUES =3D=3D=3D=3D=3D-----\n&gt; Alre=\r\nady included size:     1823416\n&gt;               pending:     0\n&gt; \n&gt; All clas=\r\ns queues map size: 11\n&gt;             Active queues: 1\n&gt;                    I=\r\nn-process: 0\n&gt;                         Ready: 0\n&gt;                       Sno=\r\nozed: 1\n&gt;           Inactive queues: 0 (p3: 0)\n&gt;            Retired queues:=\r\n 0\n&gt;          Exhausted queues: 10\n&gt; \n&gt;             Last state: RUN\n&gt; -----=\r\n=3D=3D=3D=3D=3D MANAGER THREAD =3D=3D=3D=3D=3D-----\n&gt; Java Thread State: TI=\r\nMED_WAITING\n&gt; Blocked/Waiting On: NONE\n&gt;    java.lang.Thread.sleep(Native M=\r\nethod)\n&gt;    org.archive.crawler.frontier.AbstractFrontier.managementTasks(A=\r\nbstractFrontier.java:344)\n&gt;    org.archive.crawler.frontier.AbstractFrontie=\r\nr$1.run(AbstractFrontier.java:301)\n&gt; \n&gt; -----=3D=3D=3D=3D=3D 11 LONGEST QUE=\r\nUES =3D=3D=3D=3D=3D-----\n&gt; LONGEST#0:\n&gt; Queue com,********My website*******=\r\n***********, (p3)\n&gt;  1442699 items\n&gt;   wakes in: 1m13s536ms\n&gt;    last enque=\r\nued: ********My website******************\n&gt;      last peeked: ********My we=\r\nbsite******************\n&gt;   total expended: 150244 (total budget: -1)\n&gt;   a=\r\nctive balance: 312\n&gt;   last(avg) cost: 1(0.7)\n&gt;   totalScheduled fetchSucce=\r\nsses fetchFailures fetchDisregards fetchResponses robotsDenials successByte=\r\ns totalBytes fetchNonResponses\n&gt;   1671559 125089 245 103526 125089 103526 =\r\n6361559886 6361559886 678\n&gt;   SimplePrecedenceProvider\n&gt;   3\n&gt; \n&gt; LONGEST#1=\r\n:\n&gt; Queue com,********My website******************,+7 (p3)\n&gt;  65205 items\n&gt;=\r\n    last enqueued:********My website******************\n&gt;      last peeked: =\r\n********My website******************\n&gt;   total expended: 1 (total budget: -=\r\n1)\n&gt;   active balance: 2999\n&gt;   last(avg) cost: 1(1)\n&gt;   totalScheduled fet=\r\nchSuccesses fetchFailures fetchDisregards fetchResponses robotsDenials succ=\r\nessBytes totalBytes fetchNonResponses\n&gt;   65206 1 0 0 1 0 24450 24450 0\n&gt;  =\r\n SimplePrecedenceProvider\n&gt;   3\n&gt; \n&gt; I changed to url&#39;s to ********My websi=\r\nte****************** and the frontier report continues to be like this.\n&gt; \n=\r\n&gt; What is my problem?\n&gt; Thank you\n&gt; \n&gt; \n&gt; --- In archive-crawler@yahoogroup=\r\ns.com, Gordon Mohr &lt;gojomo@...&gt; wrote:\n&gt;&gt; \n&gt;&gt; You have to look at the front=\r\nier and threads reports to better \n&gt;&gt; understand the state.\n&gt;&gt; \n&gt;&gt; With def=\r\nault settings, there&#39;s one queue per hostname. When a queue is \n&gt;&gt; empty, t=\r\nhere&#39;s nothing left to crawl from that hostname.\n&gt;&gt; \n&gt;&gt; The &#39;parallelQueues=\r\n&#39; setting you asked about last week will spread a \n&gt;&gt; hostname&#39;s URIs over =\r\nmultiple queues, and thus allow multiple threads to \n&gt;&gt; be collecting URIs =\r\nin parallel. But it&#39;s not yet clear that&#39;s your \n&gt;&gt; problem; even one threa=\r\nd fetching as fast as possible (no politeness \n&gt;&gt; &#39;snoozes&#39;) may fully load=\r\n your target server, and so adding more threads \n&gt;&gt; may just mean they&#39;re c=\r\nompeting against themselves (for little if any \n&gt;&gt; speedup).\n&gt;&gt; \n&gt;&gt; - Gordo=\r\nn @ IA\n&gt;&gt; \n&gt;&gt; On 12/27/10 5:02 AM, yotpo.official wrote:\n&gt;&gt;&gt; What is the re=\r\nason for this?\n&gt;&gt;&gt; I am crawling only my own site and there are no politene=\r\nss considerations,in this way it will take my for ages to index my site... =\r\nWhat can I do to make all 10 threads and queues functional?\n&gt;&gt;&gt; Thank you\n&gt;=\r\n&gt;&gt; \n&gt;&gt;&gt; --- In archive-crawler@yahoogroups.com, Gordon Mohr&lt;gojomo@&gt;  wrote=\r\n:\n&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt; This is a wholly normal state for a crawl that&#39;s still working=\r\n on one queue.\n&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt; &quot;10 exhausted&quot; means that 10 queues once had URIs=\r\n in them, but finished.\n&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt; &quot;1 in-process&quot; means one queue has offer=\r\ned up a URI which is in the\n&gt;&gt;&gt;&gt; middle of a processing cycle. Looking at t=\r\nhe frontier report will reveal\n&gt;&gt;&gt;&gt; which queue offered the URI, the count =\r\nof other URIs in that queue, and\n&gt;&gt;&gt;&gt; other details. Looking at the threads=\r\n report will reveal the processor\n&gt;&gt;&gt;&gt; currently working on the in-process =\r\nURI.\n&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt; With a single queue still holding URIs, and normal politene=\r\nss settings,\n&gt;&gt;&gt;&gt; you would expect on subsequent viewings of this summary t=\r\no see the queue\n&gt;&gt;&gt;&gt; bouncing from &#39;in-process&#39; to &#39;snoozed&#39; and back, unti=\r\nl the queue is\n&gt;&gt;&gt;&gt; exhausted. If occasionally new URIs are discovered on o=\r\nther hosts, other\n&gt;&gt;&gt;&gt; queues might reenter active crawling as well.\n&gt;&gt;&gt;&gt; \n=\r\n&gt;&gt;&gt;&gt; - Gordon @ IA\n&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt; On 12/26/10 10:00 AM, yotpo.official wrote:\n&gt;=\r\n&gt;&gt;&gt;&gt; I am running with 10 threads and 10 queues and this is my frontier sum=\r\nmary after a while:\n&gt;&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt;&gt;   RUN - 11 URI queues: 1 active (1 in-proc=\r\ness; 0 ready; 0 snoozed); 0 inactive; 0 ineligible; 0 retired; 10 exhausted=\r\n\n&gt;&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt;&gt; Anybody knows why is it happening?\n&gt;&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt;&gt; Thank you ver=\r\ny much\n&gt;&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt;&gt; ------------------------------------\n&gt;&gt;&gt;&gt;=\r\n&gt; \n&gt;&gt;&gt;&gt;&gt; Yahoo! Groups Links\n&gt;&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt; \n&gt;&gt;&gt; \n&gt;&gt;&gt; \n&gt;&gt;&gt; \n&gt;&gt;&gt; =\r\n\n&gt;&gt;&gt; ------------------------------------\n&gt;&gt;&gt; \n&gt;&gt;&gt; Yahoo! Groups Links\n&gt;&gt;&gt; =\r\n\n&gt;&gt;&gt; \n&gt;&gt;&gt; \n&gt;&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; ------------------------------------\n&gt; \n&gt; Yaho=\r\no! Groups Links\n&gt; \n&gt; \n&gt; \n\n"}}