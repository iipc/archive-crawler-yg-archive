{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"Q8PB44MnIofVZQj3B153WBYl9bbrWRzk7T_E3H_fm3L9uL6YXoMH5xQKsUdyhtTD8PW2JTseE_6xUTwL2PpJvV8NZivQ4YA","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] problems with AddRedirectFromRootServerToScope","postDate":"1145487091","msgId":2796,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ0NDZCRUYzLjIwMjAzMDBAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGUyNjRvMCtuM2w4QGVHcm91cHMuY29tPg==","referencesHeader":"PGUyNjRvMCtuM2w4QGVHcm91cHMuY29tPg=="},"prevInTopic":2794,"nextInTopic":2797,"prevInTime":2795,"nextInTime":2797,"topicId":2794,"numMessagesInTopic":3,"msgSnippet":"Thanks for the report -- my investigation reveals this is actually a bug in OnHostsDecideRule, in how it updates itself when a new seed is added. It fails to","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 31414 invoked from network); 19 Apr 2006 22:51:40 -0000\r\nReceived: from unknown (66.218.66.166)\n  by m13.grp.scd.yahoo.com with QMQP; 19 Apr 2006 22:51:39 -0000\r\nReceived: from unknown (HELO mail.archive.org) (207.241.227.188)\n  by mta5.grp.scd.yahoo.com with SMTP; 19 Apr 2006 22:51:23 -0000\r\nReceived: from localhost (localhost [127.0.0.1])\n\tby mail.archive.org (Postfix) with ESMTP id 8917B141567AD\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Wed, 19 Apr 2006 15:51:23 -0700 (PDT)\r\nReceived: from mail.archive.org ([127.0.0.1])\n\tby localhost (mail.archive.org [127.0.0.1]) (amavisd-new, port 10024)\n\twith LMTP id 10028-02-85 for &lt;archive-crawler@yahoogroups.com&gt;;\n\tWed, 19 Apr 2006 15:51:22 -0700 (PDT)\r\nReceived: from [192.168.0.15] (adsl-71-130-102-78.dsl.pltn13.pacbell.net [71.130.102.78])\n\tby mail.archive.org (Postfix) with ESMTP id CE6DC141567A3\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Wed, 19 Apr 2006 15:51:21 -0700 (PDT)\r\nMessage-ID: &lt;4446BEF3.2020300@...&gt;\r\nDate: Wed, 19 Apr 2006 15:51:31 -0700\r\nUser-Agent: Mail/News 1.5 (X11/20060309)\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;e264o0+n3l8@...&gt;\r\nIn-Reply-To: &lt;e264o0+n3l8@...&gt;\r\nContent-Type: multipart/mixed;\n boundary=&quot;------------080304050002010202080900&quot;\r\nX-Virus-Scanned: Debian amavisd-new at archive.org\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] problems with AddRedirectFromRootServerToScope\r\nX-Yahoo-Group-Post: member; u=137285340; y=74GLf6f_0C6TmT-O43M8RwIhynTzpmVC2c3q5kzt1o9P\r\nX-Yahoo-Profile: gojomo\r\n\r\n\r\n--------------080304050002010202080900\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\n\r\nThanks for the report -- my investigation reveals this is actually a bug \nin OnHostsDecideRule, in how it updates itself when a new seed is added. \nIt fails to override its superclass method of deducing a SURT prefix \nfrom the seed.\n\nSo in your case, it gets a default SURT prefix like:\n\nhttp://(de,bund,bnd,www,)/cln_027/DE/Home__Vorschaltseite/\n\n...instead of the proper/desired host-centric behavior...\n\nhttp://(de,bund,bnd,www,)\n\nI&#39;ve attached a patch that clears this up in my testing, by refactoring \nSurtPrefixedDecideRule and SurtPrefixSet a little (to make the \nprefix-ification reusable/overridable), and changing \nOnHostsDecideRule/OnDomainsDecideRule (to override their superclass \nprefixification).\n\nLet me know if it works for you, and we&#39;ll integrate this into CVS-HEAD \npost-1.8.\n\n- Gordon @ IA\n\n\npandae667 wrote:\n&gt; Hi everyone,\n&gt; \n&gt; I&#39;m using an up-to-date CVS version of heritrix and came across the\n&gt; following problem:\n&gt; I&#39;m trying to spider the site http://www.bundesnachrichtendienst.de\n&gt; which issues an immediate redirect via http-equiv=&quot;refresh&quot;.\n&gt; As I want to follow this redirect I added an\n&gt; AddRedirectFromRootServerToScope to my decide rules.\n&gt; It adds a new seed into my seeds.txt as below\n&gt; \n&gt; # Heritrix added seed redirect from\n&gt; http://www.bundesnachrichtendienst.de/.\n&gt; http://www.bnd.bund.de/cln_027/DE/Home__Vorschaltseite/home__node.html__nnn=true\n&gt; \n&gt; but still I get the redirected link itself and all subsequent links\n&gt; reported as outOfScope.\n&gt; \n&gt; 04/19/2006 19:37:59 +0000 INFO\n&gt; org.archive.crawler.deciderules.AddRedirectFromRootServerToScope\n&gt; evaluate Adding http://www.bnd.bund.de/cln_0\n&gt; 27/DE/Home__Vorschaltseite/home__node.html__nnn=true to seeds via\n&gt; http://www.bundesnachrichtendienst.de/\n&gt; \n&gt; 04/19/2006 19:37:59 +0000 INFO org.archive.crawler.framework.Scoper\n&gt; outOfScope http://www.bnd.bund.de/cln_027/DE/Home__Vorschaltseite/home__\n&gt; node.html__nnn=true\n&gt; \n&gt; 04/19/2006 19:37:59 +0000 INFO\n&gt; org.archive.crawler.postprocessor.LinksScoper outOfScope\n&gt; http://www.bnd.bund.de/cln_027/DE/Home__Vorschaltsei\n&gt; te/home__node.html__nnn=true\n&gt; \n&gt; \n&gt; here are the config settings for my scope if those help anyone in\n&gt; tracking down the problem:\n&gt; &lt;newObject name=&quot;scope&quot;\n&gt; class=&quot;org.archive.crawler.deciderules.DecidingScope&quot;&gt;\n&gt; &lt;boolean name=&quot;enabled&quot;&gt;true&lt;/boolean&gt;\n&gt; &lt;string name=&quot;seedsfile&quot;&gt;seeds.txt&lt;/string&gt;\n&gt; &lt;boolean name=&quot;reread-seeds-on-config&quot;&gt;true&lt;/boolean&gt;\n&gt; \n&gt; \t&lt;newObject name=&quot;decide-rules&quot;\n&gt; class=&quot;org.archive.crawler.deciderules.DecideRuleSequence&quot;&gt;\n&gt; \n&gt; \t&lt;map name=&quot;rules&quot;&gt;\n&gt; &lt;newObject name=&quot;RejectDecideRule&quot;\n&gt; class=&quot;org.archive.crawler.deciderules.RejectDecideRule&quot;&gt;\n&gt;           &lt;/newObject&gt;\n&gt; \n&gt; \t&lt;newObject name=&quot;AcceptRootRedirects&quot;\n&gt; class=&quot;org.archive.crawler.deciderules.AddRedirectFromRootServerToScope&quot;&gt;\n&gt; &lt;string name=&quot;decision&quot;&gt;ACCEPT&lt;/string&gt;\n&gt; &lt;/newObject&gt;\n&gt; \n&gt; \t&lt;newObject name=&quot;AcceptHostRule&quot;\n&gt; class=&quot;org.archive.crawler.deciderules.OnHostsDecideRule&quot;&gt;\n&gt; &lt;string name=&quot;decision&quot;&gt;ACCEPT&lt;/string&gt;\n&gt; &lt;string name=&quot;surts-dump-file&quot;/&gt;\n&gt; &lt;boolean name=&quot;also-check-via&quot;&gt;false&lt;/boolean&gt;\n&gt; &lt;boolean name=&quot;rebuild-on-reconfig&quot;&gt;true&lt;/boolean&gt;\n&gt; &lt;/newObject&gt;\n&gt; \n&gt; \t&lt;newObject name=&quot;RejectTooManyhops&quot;\n&gt; class=&quot;org.archive.crawler.deciderules.TooManyHopsDecideRule&quot;&gt;\n&gt; &lt;integer name=&quot;max-hops&quot;&gt;3&lt;/integer&gt;\n&gt; &lt;/newObject&gt;\n&gt; \n&gt; \t&lt;newObject name=&quot;RejectPathologicalRule&quot;\n&gt; class=&quot;org.archive.crawler.deciderules.PathologicalPathDecideRule&quot;&gt;\n&gt; &lt;integer name=&quot;max-repetitions&quot;&gt;2&lt;/integer&gt;\n&gt; &lt;/newObject&gt;\n&gt; &lt;newObject name=&quot;AcceptPrerequisiteRule&quot;\n&gt; class=&quot;org.archive.crawler.deciderules.PrerequisiteAcceptDecideRule&quot;&gt;\n&gt;           &lt;/newObject&gt;\n&gt; \n&gt; \t&lt;newObject name=&quot;RejectFileTypes&quot;\n&gt; class=&quot;org.archive.crawler.deciderules.MatchesRegExpDecideRule&quot;&gt;\n&gt; &lt;string name=&quot;decision&quot;&gt;REJECT&lt;/string&gt;\n&gt; \n&gt; \t&lt;string name=&quot;regexp&quot;&gt;\n&gt; .*(?i)&#92;.(a|ai|aif|aifc|aiff|asc|avi|bcpio|bin|bmp|bz2|c|cdf|cgi|cgm|class|cpio|cpp?|cpt|csh|css|cxx|dcr|dif|dir|djv|djvu|dll|dmg|dms|doc|dtd|dv|dvi|dxr|eps|etx|exe|ez|gif|gram|grxml|gtar|h|hdf|hqx|ice|ico|ics|ief|ifb|iges|igs|iso|jnlp|jp2|jpe|jpeg|jpg|js|kar|latex|lha|lzh|m3u|mac|man|mathml|me|mesh|mid|midi|mif|mov|movie|mp2|mp3|mp4|mpe|mpeg|mpg|mpga|ms|msh|mxu|nc|o|oda|ogg|pbm|pct|pdb|pgm|pgn|pic|pict|pl|png|pnm|pnt|pntg|ppm|ppt|ps|py|qt|qti|qtif|ra|ram|ras|rdf|rgb|rm|roff|rpm|rtf|rtx|s|sgm|sgml|sh|shar|silo|sit|skd|skm|skp|skt|smi|smil|snd|so|spl|src|srpm|sv4cpio|sv4crc|svg|swf|t|tar|tcl|tex|texi|texinfo|tgz|tif|tiff|tr|tsv|ustar|vcd|vrml|vxml|wav|wbmp|wbxml|wml|wmlc|wmls|wmlsc|wrl|xbm|xht|xhtml|xls|xml|xpm|xsl|xslt|xwd|xyz|z|zip)$\n&gt; &lt;/string&gt;\n&gt; &lt;/newObject&gt;\n&gt; &lt;/map&gt;\n&gt; &lt;/newObject&gt;\n&gt; &lt;/newObject&gt;\n&gt; \n&gt; I wonder if this might be in any way related to Bug &quot;[ 1219262 ]\n&gt; &#39;treat seed redirects as new seeds&#39; not working&quot; - as it sounds like\n&gt; there was a similar issue that was fixed in there.\n&gt; \n&gt; Thanks in advance for any help\n&gt;   Olaf Freyer\n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt;  \n&gt; Yahoo! Groups Links\n&gt; \n&gt; \n&gt; \n&gt;  \n&gt; \n&gt; \n&gt; \n\n\r\n--------------080304050002010202080900\r\nContent-Type: text/plain;\n name=&quot;OnHostsDecideRule-addedSeed-patch.txt&quot;\r\nContent-Disposition: inline;\n filename=&quot;OnHostsDecideRule-addedSeed-patch.txt&quot;\r\n\r\n[ Attachment content not displayed ]\r\n--------------080304050002010202080900--\r\n\n"}}