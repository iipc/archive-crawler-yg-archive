{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"ppwCexsG10g8m8P0O6WFJYjOh4q-78ghTYd67r2diDyH9JVEjpgAiy1JZ3dEmxFApJCjYwaBz9SvbvKPqZBLLzT2HBXiQGU","spamInfo":{"isSpam":false,"reason":"4"},"subject":"Re: [archive-crawler] Re: Out of Memory Error","postDate":"1177271472","msgId":4163,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ2MkJCQ0IwLjYwODAwMDNAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGYwZmlrNCthamJhQGVHcm91cHMuY29tPg==","referencesHeader":"PGYwZmlrNCthamJhQGVHcm91cHMuY29tPg=="},"prevInTopic":4162,"nextInTopic":4164,"prevInTime":4162,"nextInTime":4164,"topicId":4013,"numMessagesInTopic":16,"msgSnippet":"Can you get a jmap -histo just after this OOME? Also, what do the last few lines of the progress-statistics.log before the OOME show? Note that this stack","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 83090 invoked from network); 22 Apr 2007 19:58:45 -0000\r\nReceived: from unknown (66.218.67.35)\n  by m45.grp.scd.yahoo.com with QMQP; 22 Apr 2007 19:58:45 -0000\r\nReceived: from unknown (HELO relay03.pair.com) (209.68.5.17)\n  by mta9.grp.scd.yahoo.com with SMTP; 22 Apr 2007 19:58:43 -0000\r\nReceived: (qmail 17686 invoked from network); 22 Apr 2007 19:50:54 -0000\r\nReceived: from 81.253.47.42 (HELO ?172.18.107.75?) (81.253.47.42)\n  by relay03.pair.com with SMTP; 22 Apr 2007 19:50:54 -0000\r\nX-pair-Authenticated: 81.253.47.42\r\nMessage-ID: &lt;462BBCB0.6080003@...&gt;\r\nDate: Sun, 22 Apr 2007 12:51:12 -0700\r\nUser-Agent: Thunderbird 1.5.0.10 (Windows/20070221)\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;f0fik4+ajba@...&gt;\r\nIn-Reply-To: &lt;f0fik4+ajba@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Msg-Info: 2:4:8:0\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] Re: Out of Memory Error\r\nX-Yahoo-Group-Post: member; u=137285340; y=2Gd3gI_DiCpkD04bzxmEZP1V8CXdvE5KXQAVu5Jnjhxt\r\nX-Yahoo-Profile: gojomo\r\n\r\nCan you get a &#39;jmap -histo&#39; just after this OOME?\n\nAlso, what do the last few lines of the progress-statistics.log before \nthe OOME show?\n\nNote that this stack doesn&#39;t show &quot;Java heap space&quot; after the error \nname. And it happened in a native method. So it may be non-heap \nresources that have been depleted -- and in such a case a larger heap \ncan hurt.\n\n- Gordon @ IA\n\nanitabidari wrote:\n&gt; Hi Gordan\n&gt; I upgraded to 1.12.0, and still get the OOME error. I am using Java\n&gt; Version 1.6 and 3G Heap Size. \n&gt; \n&gt; java.lang.OutOfMemoryError\n&gt;         at java.util.zip.Deflater.init(Native Method)\n&gt;         at java.util.zip.Deflater.&lt;init&gt;(Deflater.java:123)\n&gt;         at java.util.zip.GZIPOutputStream.&lt;init&gt;(GZIPOutputStream.java:46)\n&gt;         at java.util.zip.GZIPOutputStream.&lt;init&gt;(GZIPOutputStream.java:58)\n&gt;         at\n&gt; org.archive.io.WriterPoolMember$CompressedStream.&lt;init&gt;(WriterPoolMember.java:492)\n&gt;         at\n&gt; org.archive.io.WriterPoolMember.preWriteRecordTasks(WriterPoolMember.java:360)\n&gt;         at org.archive.io.arc.ARCWriter.write(ARCWriter.java:412)\n&gt;         at\n&gt; org.archive.crawler.writer.ARCWriterProcessor.write(ARCWriterProcessor.java:163)\n&gt;         at\n&gt; org.archive.crawler.writer.ARCWriterProcessor.innerProcess(ARCWriterProcessor.java:130)\n&gt;         at\n&gt; org.archive.crawler.framework.Processor.process(Processor.java:109)\n&gt;         at\n&gt; org.archive.crawler.framework.ToeThread.processCrawlUri(ToeThread.java:302)\n&gt;         at org.archive.crawler.framework.ToeThread.run(ToeThread.java:151)\n&gt; \n&gt; \n&gt; --- In archive-crawler@yahoogroups.com, Gordon Mohr &lt;gojomo@...&gt; wrote:\n&gt;&gt; The counts of ReentrantReadWriteLock-related instances are fishy --\n&gt; and, \n&gt;&gt; by extension, the counts of other instances where there are about \n&gt;&gt; 127,700 of them, such as com.sleepycat.je.latch.Java5SharedLatchImpl.\n&gt;&gt;\n&gt;&gt; I think you may be running into a bug in the BDB-JE library that&#39;s \n&gt;&gt; bundled with Heritrix-1.10.2 (je-3.0.12). See the note for &quot;#15214&quot; in \n&gt;&gt; the BDB-JE change log:\n&gt;&gt;\n&gt;&gt;\n&gt; http://www.oracle.com/technology/software/products/berkeley-db/je/files/je3213_changelog.html\n&gt;&gt; (From the description there, it also looks like you are more likely to \n&gt;&gt; trigger this bug on long-running smaller crawls that *don&#39;t* exceed the \n&gt;&gt; BDB-JE in-memory cache size.)\n&gt;&gt;\n&gt;&gt; If you can&#39;t move to heritrix-1.12.0 (which uses BDB-JE 3.2.13), you\n&gt; can \n&gt;&gt; *probably* just replace the &#39;je-3.0.12.jar&#39; file in your \n&gt;&gt; HERITRIX_HOME/lib/ directory with the latest BDB-JE release, 3.2.23,\n&gt; from:\n&gt;&gt;\n&gt; http://www.oracle.com/technology/software/products/berkeley-db/je/index.html\n&gt;&gt; We haven&#39;t tested that exact combination -- Heritrix 1.10.2 on BDB-JE \n&gt;&gt; 3.2.23 -- but BDB-JE updates are generally drop-in compatible and we \n&gt;&gt; expect to bundle BDB-JE 3.2.23 with Heritrix 1.12.1.\n&gt;&gt;\n&gt;&gt; - Gordon @ IA\n&gt;&gt;\n&gt;&gt; anitabidari wrote:\n&gt;&gt;&gt; Hi Olaf\n&gt;&gt;&gt;   Here is the top 100 or so lines from jmap -histo output. If you want\n&gt;&gt;&gt; to see the whole output which is 1500 lines, let me know. I will be\n&gt;&gt;&gt; happy to post it.\n&gt;&gt;&gt;\n&gt;&gt;&gt; num   #instances    #bytes  class name\n&gt;&gt;&gt; --------------------------------------\n&gt;&gt;&gt;   1:  16047112   547575856  [B\n&gt;&gt;&gt;   2:    172536   179339016  [J\n&gt;&gt;&gt;   3:    172718    91191232  [[B\n&gt;&gt;&gt;   4:    172710    91190880  [Lcom.sleepycat.je.tree.Node;\n&gt;&gt;&gt;   5:    169162    21652736  com.sleepycat.je.tree.BIN\n&gt;&gt;&gt;   6:    822988    19751712  com.sleepycat.je.tree.LN\n&gt;&gt;&gt;   7:    198911     9338280  [C\n&gt;&gt;&gt;   8:    176585     5650720  java.util.TreeMap$Entry\n&gt;&gt;&gt;   9:    172726     5527232 \n&gt; com.sleepycat.je.latch.Java5SharedLatchImpl\n&gt;&gt;&gt;  10:    172726     5527232 \n&gt;&gt;&gt; java.util.concurrent.locks.ReentrantReadWriteLock$NonfairSync\n&gt;&gt;&gt;  11:     38695     4958680  &lt;constMethodKlass&gt;\n&gt;&gt;&gt;  12:    197287     4734888  java.lang.String\n&gt;&gt;&gt;  13:     35553     3415760  [I\n&gt;&gt;&gt;  14:     67101     3301736  &lt;symbolKlass&gt;\n&gt;&gt;&gt;  15:     38695     3099976  &lt;methodKlass&gt;\n&gt;&gt;&gt;  16:    172726     2763616 \n&gt;&gt;&gt;\n&gt; java.util.concurrent.locks.ReentrantReadWriteLock$Sync$ThreadLocalHoldCounter\n&gt;&gt;&gt;  17:    172726     2763616 \n&gt;&gt;&gt; java.util.concurrent.locks.ReentrantReadWriteLock$ReadLock\n&gt;&gt;&gt;  18:    172726     2763616 \n&gt;&gt;&gt; java.util.concurrent.locks.ReentrantReadWriteLock$WriteLock\n&gt;&gt;&gt;  19:    169174     2706784  com.sleepycat.je.utilint.TinyHashSet\n&gt;&gt;&gt;  20:     23967     2577656  [S\n&gt;&gt;&gt;  21:      3544     2181864  &lt;constantPoolKlass&gt;\n&gt;&gt;&gt;  22:      3544     1471096  &lt;instanceKlassKlass&gt;\n&gt;&gt;&gt;  23:      3206     1337328  &lt;constantPoolCacheKlass&gt;\n&gt;&gt;&gt;  24:     21012      840480  com.sleepycat.je.cleaner.FileSummary\n&gt;&gt;&gt;  25:      3437      833080  &lt;methodDataKlass&gt;\n&gt;&gt;&gt;  26:     18214      728560  com.sleepycat.je.tree.FileSummaryLN\n&gt;&gt;&gt;  27:     21936      701952 \n&gt;&gt;&gt; java.util.concurrent.locks.AbstractQueuedSynchronizer$Node\n&gt;&gt;&gt;  28:      5957      630024  [Ljava.util.HashMap$Entry;\n&gt;&gt;&gt;  29:      3548      368992  com.sleepycat.je.tree.IN\n&gt;&gt;&gt;  30:      3843      368928  java.lang.Class\n&gt;&gt;&gt;  31:     23005      368080  java.util.regex.Pattern$SliceA\n&gt;&gt;&gt;  32:      1351      350192  [Z\n&gt;&gt;&gt;  33:     18214      291424  com.sleepycat.je.cleaner.PackedOffsets\n&gt;&gt;&gt;  34:      5357      250592  [[I\n&gt;&gt;&gt;  35:      5735      229400  java.util.HashMap\n&gt;&gt;&gt;  36:      8199      196776  java.util.HashMap$Entry\n&gt;&gt;&gt;  37:      8018      192432  java.util.regex.Pattern$GroupTail\n&gt;&gt;&gt;  38:      2348      187904  [Ljava.util.regex.Pattern$Node;\n&gt;&gt;&gt;  39:      3377      165048  [Ljava.lang.Object;\n&gt;&gt;&gt;  40:         6      164128 \n&gt;&gt;&gt; [Lorg.archive.crawler.settings.SoftSettingsHash$SettingsEntry;\n&gt;&gt;&gt;  41:      4317      138144  java.util.regex.Pattern$Curly\n&gt;&gt;&gt;  42:      2144      137216  java.util.regex.Pattern\n&gt;&gt;&gt;  43:      2123      135872  java.util.regex.Matcher\n&gt;&gt;&gt;  44:      7919      126704  java.util.regex.Pattern$GroupHead\n&gt;&gt;&gt;  45:      3194      102208  java.util.HashMap$ValueIterator\n&gt;&gt;&gt;  46:       270       86400  &lt;objArrayKlassKlass&gt;\n&gt;&gt;&gt;  47:      4609       73744  java.util.HashSet\n&gt;&gt;&gt;  48:      2246       71872  java.lang.ThreadLocal$ThreadLocalMap$Entry\n&gt;&gt;&gt;  49:      1386       70688  [Ljava.lang.String;\n&gt;&gt;&gt;  50:      2874       68976  java.util.LinkedList$Entry\n&gt;&gt;&gt;  51:      2730       65520  java.util.regex.Pattern$3\n&gt;&gt;&gt;  52:      3865       61840  java.lang.Long\n&gt;&gt;&gt;  53:      2348       56352  java.util.regex.Pattern$Branch\n&gt;&gt;&gt;  54:      2140       51360  java.util.regex.Pattern$9\n&gt;&gt;&gt;  55:      1503       48096  java.lang.ref.SoftReference\n&gt;&gt;&gt;  56:      1921       46104  java.util.Hashtable$Entry\n&gt;&gt;&gt;  57:      1315       42080  java.util.LinkedHashMap$Entry\n&gt;&gt;&gt;  58:      2603       41648  java.util.regex.Pattern$Slice\n&gt;&gt;&gt;  59:      1690       40560  java.util.ArrayList\n&gt;&gt;&gt;  60:      2348       37568  java.util.regex.Pattern$BranchConn\n&gt;&gt;&gt;  61:       207       34544 \n&gt; [Ljava.lang.ThreadLocal$ThreadLocalMap$Entry;\n&gt;&gt;&gt;  62:      2119       33904  java.util.HashMap$KeySet\n&gt;&gt;&gt;  63:       416       33280  java.lang.reflect.Method\n&gt;&gt;&gt;  64:      1377       33048  java.util.regex.Pattern$5\n&gt;&gt;&gt;  65:      1956       31296  java.util.regex.Pattern$Dot\n&gt;&gt;&gt;  66:      1842       29472  java.util.regex.Pattern$Ctype\n&gt;&gt;&gt;  67:       603       28944 \n&gt;&gt;&gt; org.archive.crawler.settings.ModuleAttributeInfo\n&gt;&gt;&gt;  68:       423       27072  java.lang.reflect.Constructor\n&gt;&gt;&gt;  69:      1086       26064 \n&gt;&gt;&gt; java.util.concurrent.locks.ReentrantReadWriteLock$Sync$HoldCounter\n&gt;&gt;&gt;  70:       233       25560  [Ljava.util.Hashtable$Entry;\n&gt;&gt;&gt;  71:      1453       23248  java.util.regex.Pattern$Start\n&gt;&gt;&gt;  72:       544       21760  org.archive.crawler.settings.SimpleType\n&gt;&gt;&gt;  73:      1277       20432  java.util.regex.Pattern$BitClass\n&gt;&gt;&gt;  74:      1099       17584  java.lang.Integer\n&gt;&gt;&gt;  75:       258       16512 \n&gt; com.sleepycat.je.cleaner.TrackedFileSummary\n&gt;&gt;&gt;  76:        97       16296  org.archive.crawler.framework.ToeThread\n&gt;&gt;&gt;  77:       677       16248 \n&gt;&gt;&gt; java.util.concurrent.locks.ReentrantLock$NonfairSync\n&gt;&gt;&gt;  78:       883       14128  java.util.regex.Pattern$Dollar\n&gt;&gt;&gt;  79:       588       14112  java.util.regex.Pattern$6\n&gt;&gt;&gt;  80:       188       13536  java.lang.reflect.Field\n&gt;&gt;&gt;  81:       793       12688  java.util.regex.Pattern$CharProperty$1\n&gt;&gt;&gt;  82:       194       12416  org.archive.io.RecordingOutputStream\n&gt;&gt;&gt;  83:       765       12240 \n&gt;&gt;&gt; org.archive.crawler.settings.LegalValueTypeConstraint\n&gt;&gt;&gt;  84:       493       11832  java.util.regex.Pattern$Ques\n&gt;&gt;&gt;  85:       352       11264 \n&gt; java.util.concurrent.ConcurrentHashMap$Segment\n&gt;&gt;&gt;  86:       463       11112  sun.misc.CacheEntry\n&gt;&gt;&gt;  87:         8       10672  [Lsun.misc.CacheEntry;\n&gt;&gt;&gt;  88:       187       10472 \n&gt;&gt;&gt; javax.management.openmbean.OpenMBeanAttributeInfoSupport\n&gt;&gt;&gt;  89:       430       10320  java.lang.ref.WeakReference\n&gt;&gt;&gt;  90:       180       10080  org.archive.crawler.settings.DataContainer\n&gt;&gt;&gt;  91:       550        9808  [Ljava.lang.Class;\n&gt;&gt;&gt;  92:       400        9600 \n&gt; com.sleepycat.je.cleaner.OffsetList$Segment\n&gt;&gt;&gt;  93:       594        9504  java.util.regex.Pattern$Begin\n&gt;&gt;&gt;  94:       216        8640  java.math.BigInteger\n&gt;&gt;&gt;  95:       154        8624  java.security.Provider$Service\n&gt;&gt;&gt;  96:       356        8544  org.apache.commons.lang.IntHashMap$Entry\n&gt;&gt;&gt;  97:       253        8096  java.lang.ref.Finalizer\n&gt;&gt;&gt;  98:       200        8000  java.util.Hashtable\n&gt;&gt;&gt;  99:       124        7936  java.util.logging.Logger\n&gt;&gt;&gt; 100:       118        7208  [[C\n&gt;&gt;&gt; 101:       221        7072  java.io.ObjectStreamField\n&gt;&gt;&gt; 102:       285        6840  java.security.Provider$ServiceKey\n&gt;&gt;&gt; 103:       282        6768  sun.security.util.DerInputBuffer\n&gt;&gt;&gt; 104:       282        6768  sun.security.util.DerValue\n&gt;&gt;&gt; 105:       210        6720  org.mortbay.util.StringMap$Node\n&gt;&gt;&gt; 106:       280        6720  sun.security.x509.RDN\n&gt;&gt;&gt; 107:       352        6648  \n&gt;&gt;&gt; Total 19627050   1024430952\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; --- In archive-crawler@yahoogroups.com, &quot;pandae667&quot; &lt;aaron667@&gt; wrote:\n&gt;&gt;&gt;&gt; Hi,\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; if you still have access to the machine and the process is still\n&gt;&gt;&gt;&gt; hanging arround in OOM condition you might try a &quot;jmap -histo &lt;pid&gt;&quot;\n&gt;&gt;&gt;&gt; to get an overview of all the objects arround - this might help to\n&gt;&gt;&gt;&gt; track down the real cause of the OOME.\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; Regards\n&gt;&gt;&gt;&gt;   Olaf Freyer\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; --- In archive-crawler@yahoogroups.com, &quot;anitabidari&quot; &lt;abidari@&gt;\n&gt; wrote:\n&gt;&gt;&gt;&gt;&gt; Hi Gordan\n&gt;&gt;&gt;&gt;&gt; I have run into the OOME again. This time I had the heap size set to\n&gt;&gt;&gt;&gt;&gt; 1G. I downloaded Java 1.6 per your suggestion, and below is the\n&gt; Stack\n&gt;&gt;&gt;&gt;&gt; Trace that you requested.\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt; The crawl ran for 11 days and progress stats are\n&gt;&gt;&gt;&gt;&gt; Discovered      Queued       Downloaded  mem-use-KB  Heap-use-KB   \n&gt;&gt;&gt;&gt;&gt; Congestion\n&gt;&gt;&gt;&gt;&gt; 23181561        11745868     11024191    979905     987584  1.0\n&gt;&gt;&gt;&gt;&gt; Do you need any other information such as my order.xml etc?\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt; 04/16/2007 17:24:20 +0000 SEVERE\n&gt;&gt;&gt;&gt;&gt; org.archive.crawler.framework.ToeThread seriousError Serious error\n&gt;&gt;&gt;&gt;&gt; occured trying to proces\n&gt;&gt;&gt;&gt;&gt; s &#39;unknown&#39;\n&gt;&gt;&gt;&gt;&gt; [ToeThread #79:\n&gt;&gt;&gt;&gt;&gt;  -no CrawlURI-\n&gt;&gt;&gt;&gt;&gt;     WAITING for 11m21s125ms\n&gt;&gt;&gt;&gt;&gt;     step: ABOUT_TO_GET_URI for 11m21s125ms\n&gt;&gt;&gt;&gt;&gt;     java.lang.Thread.getStackTrace(Thread.java:1426)\n&gt;&gt;&gt;&gt;&gt;    \n&gt;&gt;&gt; org.archive.crawler.framework.ToeThread.reportTo(ToeThread.java:513)\n&gt;&gt;&gt;&gt;&gt;    \n&gt;&gt;&gt; org.archive.crawler.framework.ToeThread.reportTo(ToeThread.java:591)\n&gt;&gt;&gt;&gt;&gt;     org.archive.util.DevUtils.extraInfo(DevUtils.java:65)\n&gt;&gt;&gt;&gt;&gt;    \n&gt;&gt;&gt;&gt;&gt;\n&gt; org.archive.crawler.framework.ToeThread.seriousError(ToeThread.java:230)\n&gt;&gt;&gt;&gt;&gt;     org.archive.crawler.framework.ToeThread.run(ToeThread.java:174)\n&gt;&gt;&gt;&gt;&gt; ]\n&gt;&gt;&gt;&gt;&gt;            timestamp  discovered      queued   downloaded      \n&gt;&gt;&gt;&gt;&gt; doc/s(avg)  KB/s(avg)   dl-failures   busy-thread   mem-use-\n&gt;&gt;&gt;&gt;&gt; KB  heap-size-KB   congestion   max-depth   avg-depth\n&gt;&gt;&gt;&gt;&gt; 2007-04-16T17:24:20Z    23181561    11745868     11024191      \n&gt;&gt;&gt;&gt;&gt; 0.0(12.68)     0(182)        450518             8       9769\n&gt;&gt;&gt;&gt;&gt; 99        987584          1.0     3681209     1468233\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt; java.lang.OutOfMemoryError: Java heap space\n&gt;&gt;&gt;&gt;&gt; &lt;Cleaner name=&quot;Cleaner-1&quot;/&gt; caught exception:\n&gt;&gt;&gt;&gt;&gt; java.lang.NullPointerException\n&gt;&gt;&gt;&gt;&gt; java.lang.NullPointerException\n&gt;&gt;&gt;&gt;&gt;         at java.util.TreeMap.getEntry(TreeMap.java:324)\n&gt;&gt;&gt;&gt;&gt;         at java.util.TreeMap.remove(TreeMap.java:580)\n&gt;&gt;&gt;&gt;&gt;         at java.util.TreeSet.remove(TreeSet.java:259)\n&gt;&gt;&gt;&gt;&gt;         at\n&gt;&gt;&gt;&gt;&gt;\n&gt; com.sleepycat.je.cleaner.FileSelector.selectFileForCleaning(FileSelector.java:236)\n&gt;&gt;&gt;&gt;&gt;         at\n&gt;&gt;&gt;&gt;&gt;\n&gt; com.sleepycat.je.cleaner.FileProcessor.doClean(FileProcessor.java:201)\n&gt;&gt;&gt;&gt;&gt;         at\n&gt;&gt;&gt;&gt;&gt;\n&gt; com.sleepycat.je.cleaner.FileProcessor.onWakeup(FileProcessor.java:143)\n&gt;&gt;&gt;&gt;&gt;         at\n&gt;&gt;&gt;&gt;&gt; com.sleepycat.je.utilint.DaemonThread.run(DaemonThread.java:189)\n&gt;&gt;&gt;&gt;&gt;         at java.lang.Thread.run(Thread.java:619)\n&gt;&gt;&gt;&gt;&gt; Continuing\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt; --- In archive-crawler@yahoogroups.com, Gordon Mohr &lt;gojomo@&gt; wrote:\n&gt;&gt;&gt;&gt;&gt;&gt; anitabidari wrote:\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; --- In archive-crawler@yahoogroups.com, Gordon Mohr &lt;gojomo@&gt;\n&gt;&gt;&gt; wrote:\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; anitabidari wrote:\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I have heretrix-1.10.2 running on a dual core Linux box with\n&gt;&gt;&gt;&gt; 2.8Ghz\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; cpu&#39;s and 8G memory. Heretrix is often running into an Out of\n&gt;&gt;&gt;&gt; Memory\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; error. I dont recall seeing this error with an older version of\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; heretrix v1.8 that I had running for quite sometime.\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I am running it on a 64 bit machine. And the version of java\n&gt;&gt;&gt; I am\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; using is j2se_jdk_sun-1.5.0.07. I have the heap size set to\n&gt;&gt;&gt; 3Gigs\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; (-Xmx option.). Does anyone have any ideas on how to resolve\n&gt;&gt;&gt; this?\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Should I try running it with a 64 bit JVM, so I can specify a\n&gt;&gt;&gt;&gt; larger\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; heap? \n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Were you using the exact same JVM (esp. heap) and Heritrix (esp. \n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Processors and UriUniqFilter) options in 1.8? How long does it\n&gt;&gt;&gt;&gt;&gt; take to \n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; OOME?\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; A problematic issue with our DNS library using an ever-growing\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; amount of \n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; cache memory was resolved between 1.8 and 1.10.2, so I would\n&gt;&gt;&gt; have \n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; expected fewer OOMEs in long-running crawls, rather than more.\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Some thoughts:\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; (1) Since you have 8GB, a 64bit JVM and larger heap could help --\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; but it \n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; tends not help as much as you think, because 64bit object\n&gt;&gt;&gt;&gt;&gt; pointers mean \n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; it takes a large heap to hold the same number of objects. (One\n&gt;&gt;&gt;&gt;&gt; estimate \n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I&#39;ve seen not specific to Heritrix&#39;s heap: 40% larger heap needed\n&gt;&gt;&gt;&gt;&gt; for \n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; same number of 64bit JVM objects.)\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; (2) Not all OOMEs are really caused by main heap depletion --\n&gt;&gt;&gt; some\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; other \n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; resource/memory-space depletions also cause OOMEs. Some of these\n&gt;&gt;&gt;&gt;&gt; other \n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; depletions can be *worsened* by growing a heap closer to an\n&gt;&gt;&gt;&gt;&gt; addressing \n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; ceiling. If you have a OOME that&#39;s easy to reproduce quickly, you\n&gt;&gt;&gt;&gt;&gt; may \n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; want to try running under a 1.6 JVM -- its OOME errors are more \n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; descriptive, and there are other options for examining the heap\n&gt;&gt;&gt;&gt; (see \n&gt; http://java.sun.com/javase/6/webnotes/trouble/TSG-VM/html/memleaks.html#gbywi)\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; after the OOME.\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; - Gordon @ IA\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Yahoo! Groups Links\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; Hi Gordon\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; Per your recommendation I have downloaded 1.6 JVM and am\n&gt;&gt;&gt; running the\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; crawl. 3G is a lot of memory. What could be causing Heretrix\n&gt;&gt;&gt; to take\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; up more than 3G?\n&gt;&gt;&gt;&gt;&gt;&gt; I don&#39;t know; the last OOME problem we had was related to the DNS\n&gt;&gt;&gt;&gt; issue \n&gt;&gt;&gt;&gt;&gt;&gt; fixed before 1.10.2.\n&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt; What is your crawl like -- number of seeds, breadth/scoping,\n&gt; etc. --\n&gt;&gt;&gt;&gt;&gt; and \n&gt;&gt;&gt;&gt;&gt;&gt; how soon does it OOME (in time and number of URIs visited and\n&gt;&gt;&gt;&gt;&gt; scheduled)?\n&gt;&gt;&gt;&gt;&gt;&gt; - Gordon @ IA\n&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;  \n&gt;&gt;&gt; Yahoo! Groups Links\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt; \n&gt; \n&gt; \n&gt; \n&gt;  \n&gt; Yahoo! Groups Links\n&gt; \n&gt; \n&gt; \n\n"}}