{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":132996324,"authorName":"joehung302","from":"&quot;joehung302&quot; &lt;joe.hung@...&gt;","profile":"joehung302","replyTo":"LIST","senderId":"z3pRQXmR4LscYIhnozJH1wW7qbCbQGDKbzksBVHH9GPbOqDKieI1-SH1kR-4_JaceESzPLZWX23dTrsowg_AOjEki4KQaOcwk2iuM5B_","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: very busy IO when running 1.4","postDate":"1116608977","msgId":1859,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PGQ2bDVraCtpamdhQGVHcm91cHMuY29tPg==","inReplyToHeader":"PDQyOEUwNDU2LjgwMjA3MDlAYXJjaGl2ZS5vcmc+"},"prevInTopic":1858,"nextInTopic":1860,"prevInTime":1858,"nextInTime":1860,"topicId":1843,"numMessagesInTopic":11,"msgSnippet":"... 2.8 for ... let ... I captured the log after the crawler has been paused for a couple minutes. both heritrix and tomcat are not doing anything at the time.","rawEmail":"Return-Path: &lt;joe.hung@...&gt;\r\nX-Sender: joe.hung@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 61674 invoked from network); 20 May 2005 17:09:38 -0000\r\nReceived: from unknown (66.218.66.166)\n  by m23.grp.scd.yahoo.com with QMQP; 20 May 2005 17:09:38 -0000\r\nReceived: from unknown (HELO n13a.bulk.scd.yahoo.com) (66.94.237.24)\n  by mta5.grp.scd.yahoo.com with SMTP; 20 May 2005 17:09:38 -0000\r\nComment: DomainKeys? See http://antispam.yahoo.com/domainkeys\r\nReceived: from [66.218.69.4] by n13.bulk.scd.yahoo.com with NNFMP; 20 May 2005 17:09:38 -0000\r\nReceived: from [66.218.66.84] by mailer4.bulk.scd.yahoo.com with NNFMP; 20 May 2005 17:09:37 -0000\r\nDate: Fri, 20 May 2005 17:09:37 -0000\r\nTo: archive-crawler@yahoogroups.com\r\nMessage-ID: &lt;d6l5kh+ijga@...&gt;\r\nIn-Reply-To: &lt;428E0456.8020709@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Length: 6552\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:12:0\r\nFrom: &quot;joehung302&quot; &lt;joe.hung@...&gt;\r\nSubject: Re: very busy IO when running 1.4\r\nX-Yahoo-Group-Post: member; u=132996324\r\nX-Yahoo-Profile: joehung302\r\n\r\n&gt; Are your top and vmstat from a paused crawler.  If so, a load of \n2.8 for \n&gt; a quiescent crawler is very high.  Does the load tend down if you \nlet \n&gt; the pause last?\n&gt; \n\nI captured the log after the crawler has been paused for a couple \nminutes. both heritrix and tomcat are not doing anything at the \ntime. In fact, the busiest process, heritrix, was taking about &lt;1% \ncpu and sit on the first process of top. Other than that no process \nshows up using more than 1% cpu. \n\n&gt; \n&gt; Try lowering the heap sizes for Heritrix to 800/900.\n&gt; \n\nThe goal of this crawl is to collect more than 10 million documents. \nIt is current at 8.5 million mark. I&#39;ll make the memory change next \ntime when we schedule a crawl.\n\nOnce we get to the 10 million mark, I&#39;ll shut down heritrix process \nand see if the symptom goes away. Although unlikely, it might be a \nRAID card or the SCSI array problem. We are using Dell SCSI array \nwith 1.8 TB on RAID 5.\n\nIs there information that you would like us to collect to debug this \nproblem? I really like BDB frontier because it opens up a whole new \ndoor for doing larger crawl. In fact, we are so happy that you guys \nare coming up with a muliti-machine crawl release later this year. \nCan&#39;t wait to see it. \n\nThanks,\n\n-joe\n\n&gt; Yours,\n&gt; St.Ack\n&gt; \n&gt; &gt;\n&gt; &gt; Thanks,\n&gt; &gt;\n&gt; &gt; -joe\n&gt; &gt;\n&gt; &gt; --- In archive-crawler@yahoogroups.com, &quot;joehung302&quot; \n&lt;joe.hung@c...&gt;\n&gt; &gt; wrote:\n&gt; &gt; &gt; Here is a snapshot of top:\n&gt; &gt; &gt;  16:22:13  up 56 days,  4:03,  1 user,  load average: 2.79, \n2.64,\n&gt; &gt; &gt; 2.49\n&gt; &gt; &gt; 288 processes: 287 sleeping, 1 running, 0 zombie, 0 stopped\n&gt; &gt; &gt; CPU states:  cpu    user    nice  system    irq  softirq \n&gt; &gt; iowait   \n&gt; &gt; &gt; idle\n&gt; &gt; &gt;            total    0.0%   13.8%    1.0%   0.2%     0.1%   \n48.9%  \n&gt; &gt; &gt; 35.8%\n&gt; &gt; &gt;            cpu00    0.0%   11.8%    1.0%   0.2%     0.2%   \n25.6%  \n&gt; &gt; &gt; 61.1%\n&gt; &gt; &gt;            cpu01    0.0%   14.2%    1.2%   0.0%     0.0%   \n24.8%  \n&gt; &gt; &gt; 59.7%\n&gt; &gt; &gt;            cpu02    0.0%   12.6%    0.8%   0.2%     0.2%   \n74.1%  \n&gt; &gt; &gt; 12.0%\n&gt; &gt; &gt;            cpu03    0.2%   16.6%    1.0%   0.4%     0.0%   \n71.1%  \n&gt; &gt; &gt; 10.6%\n&gt; &gt; &gt;\n&gt; &gt; &gt; The machine has 2GB memory and I started heritrix with -\nXmx1200m.\n&gt; &gt; I\n&gt; &gt; &gt; have another program (tomcat) which I started with -Xmx800m. \nBut\n&gt; &gt; &gt; tomcat is mostly idle.\n&gt; &gt; &gt;\n&gt; &gt; &gt; Here is a few lines of vmstat 2:\n&gt; &gt; &gt; procs                      memory      swap          io    \n&gt; &gt; &gt; system         cpu\n&gt; &gt; &gt;  r  b   swpd   free   buff  cache   si   so    bi    bo   \nin    cs\n&gt; &gt; &gt; us sy wa id\n&gt; &gt; &gt;  1  2 2096600  17632  35160 662456    0    1     0     1    \n0    \n&gt; &gt; 1 \n&gt; &gt; &gt; 2  0  1  1\n&gt; &gt; &gt;  2  2 2096856  17312  35088 664776    0 1286  3552  1286 2254 \n&gt; &gt; 2258\n&gt; &gt; &gt; 21  2 45 31\n&gt; &gt; &gt;  1  2 2096712  20756  34980 663256   34 1464  3866  5194 1720 \n&gt; &gt; 1657\n&gt; &gt; &gt; 42  2 39 17\n&gt; &gt; &gt;  3  2 2096636  17660  34916 667060   18  580  3824   580 1547 \n&gt; &gt; 1740\n&gt; &gt; &gt; 29  2 47 22\n&gt; &gt; &gt;  0  2 2096440  17704  34836 667772  484  940  3586  4286 1149 \n&gt; &gt; 1220 \n&gt; &gt; &gt; 8  1 51 40\n&gt; &gt; &gt;  1  2 2096448  17396  34656 670040   80 1334  3996  1334 1653 \n&gt; &gt; 1839\n&gt; &gt; &gt; 25  2 51 23\n&gt; &gt; &gt;  0  1 2096456  17612  34772 670804   10 1166  4028  1166 1381 \n&gt; &gt; 1367\n&gt; &gt; &gt; 23  1 50 26\n&gt; &gt; &gt;  1  4 2096456  17828  34908 673088    4 1466  3850  2836 2326 \n&gt; &gt; 2264\n&gt; &gt; &gt; 15  2 57 26\n&gt; &gt; &gt;  0  2 2096456  17396  35020 675380  212 1466  3852  1466 2321 \n&gt; &gt; 2351\n&gt; &gt; &gt; 21  1 50 28\n&gt; &gt; &gt;  2  1 2096460  17504  35120 676540  402 1730  3912  4776 2384 \n&gt; &gt; 2875\n&gt; &gt; &gt; 17  2 54 27\n&gt; &gt; &gt;  2  2 2096460  17504  35228 677884  356 1462  2614  3296 1921 \n&gt; &gt; 2748\n&gt; &gt; &gt; 22  3 57 18\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt; Let me try the hold-queues parameter and see how it works.\n&gt; &gt; &gt;\n&gt; &gt; &gt; Thanks,\n&gt; &gt; &gt;\n&gt; &gt; &gt; -joe\n&gt; &gt; &gt;\n&gt; &gt; &gt; --- In archive-crawler@yahoogroups.com, &quot;Gordon Mohr (Internet\n&gt; &gt; &gt; Archive)&quot; &lt;gojomo@a...&gt; wrote:\n&gt; &gt; &gt; &gt; Memory use (and traffic to disk) is more a function of the\n&gt; &gt; &gt; &gt; number of hosts/queues that have been discovered or active,\n&gt; &gt; &gt; &gt; than of the total number of URLs discovered or crawled. So\n&gt; &gt; &gt; &gt; any &#39;broader&#39; crawls will strain resources more than\n&gt; &gt; &gt; &gt; &#39;narrower&#39; ones with a smaller or fixed number of hosts\n&gt; &gt; &gt; &gt; of interest.\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; Your machine may be swapping heavily. Things to check:\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt;   - Does &#39;top&#39; show swap in use?\n&gt; &gt; &gt; &gt;   - How does your configured max heap and current heap size\n&gt; &gt; &gt; &gt;     compare with RAM? (Max heap should be 25% or more smaller\n&gt; &gt; &gt; &gt;   - Do the &#39;si&#39; and &#39;so&#39; columns in &#39;vmstat 2&#39;\n&gt; &gt; &gt; &gt;     (sample every 2 seconds) show activity?\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; Separately from OS virtual memory, the new BDB/soft-reference\n&gt; &gt; &gt; &gt; mechanism for &#39;paging&#39; per-host/per-queue data out when not \nin\n&gt; &gt; &gt; &gt; immediate use could theoretically reach some excessive IO \nstates\n&gt; &gt; &gt; &gt; in low-memory conditions. This would be more likely if you\n&gt; &gt; weren&#39;t\n&gt; &gt; &gt; &gt; using the &#39;hold-queues&#39; setting and were instead round-\nrobinning\n&gt; &gt; &gt; &gt; among all queues in a big crawl.\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; - Gordon @ IA\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; joehung302 wrote:\n&gt; &gt; &gt; &gt; &gt; I started a crawl about a week ago (using 1.4 broad scope \nand\n&gt; &gt; &gt; the\n&gt; &gt; &gt; &gt; &gt; default BdbFrontier). So far I&#39;ve collected &gt;7 million docs\n&gt; &gt; but\n&gt; &gt; &gt; IO is\n&gt; &gt; &gt; &gt; &gt; consistently at &gt;50% using top. Sometimes even higher at \n90+%.\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; Here is what&#39;s interesting...even if I pause the crawl, IO \nis\n&gt; &gt; &gt; still\n&gt; &gt; &gt; &gt; &gt; busy. The number never dropped.\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; I&#39;m running on a dual Xeon with a direct attached SCSI \narray,\n&gt; &gt; &gt; using\n&gt; &gt; &gt; &gt; &gt; Sun&#39;s JDK 1.4.2. -Xmx1200.\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; I&#39;ve done a 7 million docs crawl using 1.0.4 before on the\n&gt; &gt; same\n&gt; &gt; &gt; &gt; &gt; hardware (using domainscope though). From what I remember \nthe\n&gt; &gt; &gt; disk IO\n&gt; &gt; &gt; &gt; &gt; was at around 5%.\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; Is it becuase of BdbFrontier? Any hints?\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; Thanks,\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; -joe\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; \n&gt; &gt; &gt; &gt; &gt; Yahoo! Groups Links\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; \n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; -----------------------------------------------------------------\n-------\n&gt; &gt; *Yahoo! Groups Links*\n&gt; &gt;\n&gt; &gt;     * To visit your group on the web, go to:\n&gt; &gt;       http://groups.yahoo.com/group/archive-crawler/\n&gt; &gt;        \n&gt; &gt;     * To unsubscribe from this group, send an email to:\n&gt; &gt;       archive-crawler-unsubscribe@yahoogroups.com\n&gt; &gt;       &lt;mailto:archive-crawler-unsubscribe@yahoogroups.com?\nsubject=Unsubscribe&gt;\n&gt; &gt;        \n&gt; &gt;     * Your use of Yahoo! Groups is subject to the Yahoo! Terms of\n&gt; &gt;       Service &lt;http://docs.yahoo.com/info/terms/&gt;.\n&gt; &gt;\n&gt; &gt;\n\n\n\n"}}