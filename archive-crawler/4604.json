{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137477665,"authorName":"Igor Ranitovic","from":"Igor Ranitovic &lt;igor@...&gt;","profile":"iranitovic","replyTo":"LIST","senderId":"Y4rud57xrHa2slAnBLlTccsCvF_z5C7fdlLKMvgNjnFnwSpiyL7fae2P9d3PVOQ2ztABeXdN0a2cwtYZVXyzfPM4cYwacln9","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] Crawl pausing itself","postDate":"1192551472","msgId":4604,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ3MTRFNDMwLjQwNjAwMDdAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PDQ3MTRFMUE2LjMwMTAxMDJAZHVib2NlLm5ldD4=","referencesHeader":"PDQ3MTNENjAyLjEwMTAxMDdAcGVyc2FpLmNvbT4gPDQ3MTNENzUxLjkwOTA5MDlAZHVib2NlLm5ldD4gPDQ3MTNFMkY4LjEwNTAwMDJAcGVyc2FpLmNvbT4gPDQ3MTNFN0E2LjMwNzA3MDdAZHVib2NlLm5ldD4gPDQ3MTNFQjQ0LjMwMDAyMDFAcGVyc2FpLmNvbT4gPDQ3MTQ2RjhCLjQwNjAzMDJAYXJjaGl2ZS5vcmc+IDw0NzE0RTFBNi4zMDEwMTAyQGR1Ym9jZS5uZXQ+"},"prevInTopic":4603,"nextInTopic":0,"prevInTime":4603,"nextInTime":4605,"topicId":4596,"numMessagesInTopic":8,"msgSnippet":"I believe that he crawls one or maybe a few hosts per Heritrix instance. In other words, the number of queues is low. So, in that scenario that makes sense. i.","rawEmail":"Return-Path: &lt;igor@...&gt;\r\nX-Sender: igor@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 1671 invoked from network); 16 Oct 2007 16:18:13 -0000\r\nReceived: from unknown (66.218.67.96)\n  by m54.grp.scd.yahoo.com with QMQP; 16 Oct 2007 16:18:13 -0000\r\nReceived: from unknown (HELO smtp5-g19.free.fr) (212.27.42.35)\n  by mta17.grp.scd.yahoo.com with SMTP; 16 Oct 2007 16:18:13 -0000\r\nReceived: from smtp5-g19.free.fr (localhost.localdomain [127.0.0.1])\n\tby smtp5-g19.free.fr (Postfix) with ESMTP id BBA823F61D8\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Tue, 16 Oct 2007 18:18:12 +0200 (CEST)\r\nReceived: from [127.0.0.1] (nor75-24-88-170-99-175.fbx.proxad.net [88.170.99.175])\n\tby smtp5-g19.free.fr (Postfix) with ESMTP id 987F13F6184\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Tue, 16 Oct 2007 18:18:11 +0200 (CEST)\r\nMessage-ID: &lt;4714E430.4060007@...&gt;\r\nDate: Tue, 16 Oct 2007 09:17:52 -0700\r\nUser-Agent: Thunderbird 2.0.0.6 (Windows/20070728)\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;4713D602.1010107@...&gt; &lt;4713D751.9090909@...&gt; &lt;4713E2F8.1050002@...&gt; &lt;4713E7A6.3070707@...&gt; &lt;4713EB44.3000201@...&gt; &lt;47146F8B.4060302@...&gt; &lt;4714E1A6.3010102@...&gt;\r\nIn-Reply-To: &lt;4714E1A6.3010102@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Igor Ranitovic &lt;igor@...&gt;\r\nSubject: Re: [archive-crawler] Crawl pausing itself\r\nX-Yahoo-Group-Post: member; u=137477665; y=x6phxiy15NMUgwlfW_R_KoDF9kEcANgsRuieYV6VCThwQbJEIA\r\nX-Yahoo-Profile: iranitovic\r\n\r\nI believe that he crawls one or maybe a few hosts per Heritrix instance.\nIn other words, the number of queues is low. So, in that scenario that \nmakes sense.\n\ni.\n\n\n\n\nMichael Stack wrote:\n&gt; Paul Pedersen who has been crawling up on EC2 with some success says he \n&gt; uses defaults and a heap of 256M.\n&gt; St.Ack\n&gt; \n&gt; \n&gt; \n&gt; \n&gt; Igor Ranitovic wrote:\n&gt;&gt; Hi Ted,\n&gt;&gt;\n&gt;&gt; I would just like to add that by default bdb cache can take up to 60% of\n&gt;&gt; assigned heep size. So, changing bdb-cache-percent from default 0 to\n&gt;&gt; something like 20-35 can help with the OOMs.\n&gt;&gt;\n&gt;&gt; Take care,\n&gt;&gt; i.\n&gt;&gt;\n&gt;&gt;&gt; Interesting. It seems that we were using the JVM&#39;s default maximum heap\n&gt;&gt;&gt; size, which is the lesser of 1/4 the system memory and 1GB, so in EC2,\n&gt;&gt;&gt; about 450MB. We&#39;re going to bring the max ToeThread count from 50 down\n&gt;&gt;&gt; to 30 and give it some more memory, and see what happens.\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; -Ted\n&gt;&gt;&gt;\n&gt;&gt;&gt; Michael Stack wrote:\n&gt;&gt;&gt;&gt; If a &#39;serious errors&#39; such as an OOME, it&#39;ll trigger a pause (See\n&gt;&gt;&gt;&gt;\n&gt;&gt; http://crawler.archive.org/xref/org/archive/crawler/framework/ToeThread.html#211 \n&gt;&gt; &lt;http://crawler.archive.org/xref/org/archive/crawler/framework/ToeThread.html#211&gt; \n&gt;&gt;\n&gt;&gt; &lt;http://crawler.archive.org/xref/org/archive/crawler/framework/ToeThread.html#211 \n&gt;&gt; &lt;http://crawler.archive.org/xref/org/archive/crawler/framework/ToeThread.html#211&gt;&gt; \n&gt;&gt;\n&gt;&gt;&gt;&gt; and line 173).\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; Does the OOME, as far as you can detemine, have an obvious cause (rare\n&gt;&gt;&gt;&gt; but sometimes the case)? You have a maximum of 1.75G up on EC2, IIRC.\n&gt;&gt;&gt;&gt; Have you set your heap a good bit less than this? You might also try\n&gt;&gt;&gt;&gt; running with less toe threads.\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; St.Ack\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; Ted Dziuba wrote:\n&gt;&gt;&gt;&gt;&gt; Ah, yes, I am seeing OOMEs in ToeThread&#39;s run method. If all ToeTheads\n&gt;&gt;&gt;&gt;&gt; throw exceptions, does the crawl pause?\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt; Ted\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt; Michael Stack wrote:\n&gt;&gt;&gt;&gt;&gt;&gt; Anything on the consoles about OOMEs? Are the disks full?\n&gt;&gt;&gt;&gt;&gt;&gt; St.Ack\n&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt; Ted Dziuba wrote:\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; We have a few Heritrix instances set up in Amazon EC2 crawling a\n&gt;&gt;&gt;&gt;&gt; fairly\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; small amount of data. We are seeing the crawl pause itself as it\n&gt;&gt;&gt;&gt; goes,\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; with no indication as to why in the crawl log. What could cause\n&gt;&gt;&gt;&gt; this?\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; Thanks for any pointers.\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; Ted\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; Yahoo! Groups Links\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;  \n&gt; \n&gt; \n&gt; \n&gt;  \n&gt; Yahoo! Groups Links\n&gt; \n&gt; \n&gt; \n\n\n\n"}}