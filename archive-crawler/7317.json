{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":325624130,"authorName":"Noah Levitt","from":"Noah Levitt &lt;nlevitt@...&gt;","profile":"nlevitt","replyTo":"LIST","senderId":"YKoYA_EOQpUx8R1K3wVgfVPflpTRSZnTWiJCAOYJqNo_YTlP5LywB3aQzil79C5tmy05Jz-ud8YSLjt1ABTPFgHdBgpRda3G","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] Detect crawl completion for individual seeds","postDate":"1316202107","msgId":7317,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDRFNzNBNjdCLjUwODA5MDlAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGo0b2MzZitwYWU2QGVHcm91cHMuY29tPg==","referencesHeader":"PGo0b2MzZitwYWU2QGVHcm91cHMuY29tPg=="},"prevInTopic":7313,"nextInTopic":7323,"prevInTime":7316,"nextInTime":7318,"topicId":7313,"numMessagesInTopic":3,"msgSnippet":"Hello Mark, It s possible I m overlooking something, but I don t know of an easy way to achieve this. Like anything, it s possible with some coding though. ","rawEmail":"Return-Path: &lt;nlevitt@...&gt;\r\nX-Sender: nlevitt@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 27779 invoked from network); 16 Sep 2011 19:41:48 -0000\r\nX-Received: from unknown (98.137.34.44)\n  by m4.grp.sp2.yahoo.com with QMQP; 16 Sep 2011 19:41:48 -0000\r\nX-Received: from unknown (HELO mail.archive.org) (207.241.224.6)\n  by mta1.grp.sp2.yahoo.com with SMTP; 16 Sep 2011 19:41:48 -0000\r\nX-Received: from localhost (localhost [127.0.0.1])\n\tby mail.archive.org (Postfix) with ESMTP id A0E2268410EF;\n\tFri, 16 Sep 2011 12:41:45 -0700 (PDT)\r\nX-Received: from mail.archive.org ([127.0.0.1])\n\tby localhost (mail.archive.org [127.0.0.1]) (amavisd-new, port 10024)\n\twith LMTP id buH3+n-O-0cS; Fri, 16 Sep 2011 12:41:44 -0700 (PDT)\r\nX-Received: from Noah-Levitts-MacBook-Pro.local (c-174-62-77-252.hsd1.ca.comcast.net [174.62.77.252])\n\tby mail.archive.org (Postfix) with ESMTPSA id 1CDA2684107B;\n\tFri, 16 Sep 2011 12:41:44 -0700 (PDT)\r\nMessage-ID: &lt;4E73A67B.5080909@...&gt;\r\nDate: Fri, 16 Sep 2011 12:41:47 -0700\r\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:6.0) Gecko/20110812 Thunderbird/6.0\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nCc: markkramer_nl &lt;markkramer_nl@...&gt;\r\nReferences: &lt;j4oc3f+pae6@...&gt;\r\nIn-Reply-To: &lt;j4oc3f+pae6@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Noah Levitt &lt;nlevitt@...&gt;\r\nSubject: Re: [archive-crawler] Detect crawl completion for individual seeds\r\nX-Yahoo-Group-Post: member; u=325624130; y=MsbryPahJGVLLCUQK59wCbOTL7yzjTsijg26o62nnGt1vg\r\nX-Yahoo-Profile: nlevitt\r\n\r\nHello Mark,\n\nIt&#39;s possible I&#39;m overlooking something, but I don&#39;t know of an easy way to achieve this. Like anything, it&#39;s possible with some coding though.\n\nFirst off you need to make sure sourceTagSeeds is enabled on your SeedModule. When that&#39;s enabled, StatisticsTracker keeps some stats on seed sources, so you can start with that. You&#39;ll have to subclass StatisticsTracker to keep track of queued urls because right now it only takes note of crawled urls. That&#39;s not trivial either because currently there doesn&#39;t appear to be any notification when a url is enqueued. To make that happen you could subclass BdbFrontier and override receive() to do something like { super.receive(); appCtx.publishEvent(new MyCrawlURIEnqueuedEvent(curi)); }. Then catch that event in your StatisticsTracker subclass and update your stats. When the crawled count catches up to the queued count for a given source tag, that should indicate the seed is complete.\n\nPerhaps an easier way to go would be to have a separate crawl job for each seed, so you know the seed is done when the crawl is done.\n\nThere are other approaches that could work too, inside and outside of heritrix. I&#39;d be curious to know what you end up doing.\n\nNoah\n\nOn 2011-09-13 12:49 , markkramer_nl wrote:\n&gt;\n&gt;\n&gt; Hi\n&gt;\n&gt; In my current project I use my own SeedModule implementation to populate/announce new seeds based on external input (ActiveMQ / DB etc). What I still cannot figure out is how I can detect when a crawl is completed for a single seed. I need this because I want to notify a subsystem that the requested seed is done so that the subsystem can acquire all the fetched (sub)pages from the storage.\n&gt;\n&gt; I tried defining a &quot;monitor&quot; using the ApplicationListener:\n&gt;\n&gt; public void onApplicationEvent(ApplicationEvent event) {\n&gt; if(event instanceof CrawlURIDispositionEvent) {\n&gt; CrawlURIDispositionEvent dvent = (CrawlURIDispositionEvent)event;\n&gt; Disposition state = dvent.getDisposition();\n&gt; if (state ==Disposition.SUCCEEDED && dvent.getCrawlURI().isSeed()){\n&gt; // notify sub system(s) of completed seed\n&gt; }\n&gt; }\n&gt; }\n&gt;\n&gt; But this will only notify when the original seed url itself is crawled. But this is too early. I need a way to detect when the seed including discovered sub-pages are fully crawled.\n&gt;\n&gt; Any suggestions? Is it even possible?\n&gt;\n&gt; Many thanks! Mark.\n&gt;\n&gt;\n&gt; \n\n"}}