{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"ol7tkf-eiHX-0bzgvaFoBrTgPxdN8DUFbRr_i0I70nRRnt5gDmlGMTmSBaLl9S7yRWOV0TlQsXyaP_iWFGNn5wO2mIeyPzk","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: [archive-crawler] Re: poor performance","postDate":"1245817607","msgId":5902,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDRBNDFBQjA3LjkwMzA5MDdAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGgxbGM1NCtra2N0QGVHcm91cHMuY29tPg==","referencesHeader":"PGgxbGM1NCtra2N0QGVHcm91cHMuY29tPg=="},"prevInTopic":5898,"nextInTopic":5913,"prevInTime":5901,"nextInTime":5903,"topicId":5890,"numMessagesInTopic":7,"msgSnippet":"... At this point, I think there s a good chance the bottleneck is not in Heritrix: you ve got plenty of target sites to crawl (as evidence by the large number","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 61001 invoked from network); 24 Jun 2009 04:27:51 -0000\r\nX-Received: from unknown (69.147.108.202)\n  by m8.grp.re1.yahoo.com with QMQP; 24 Jun 2009 04:27:51 -0000\r\nX-Received: from unknown (HELO relay03.pair.com) (209.68.5.17)\n  by mta3.grp.re1.yahoo.com with SMTP; 24 Jun 2009 04:27:51 -0000\r\nX-Received: (qmail 92609 invoked from network); 24 Jun 2009 04:26:50 -0000\r\nX-Received: from 70.137.158.251 (HELO ?10.0.13.17?) (70.137.158.251)\n  by relay03.pair.com with SMTP; 24 Jun 2009 04:26:50 -0000\r\nX-pair-Authenticated: 70.137.158.251\r\nMessage-ID: &lt;4A41AB07.9030907@...&gt;\r\nDate: Tue, 23 Jun 2009 21:26:47 -0700\r\nUser-Agent: Thunderbird 2.0.0.22 (Windows/20090605)\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;h1lc54+kkct@...&gt;\r\nIn-Reply-To: &lt;h1lc54+kkct@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] Re: poor performance\r\nX-Yahoo-Group-Post: member; u=137285340; y=oTIWjSXzrsawkJIwwdwabXFuwTWxbHAv_yxC-l-kEQbT\r\nX-Yahoo-Profile: gojomo\r\n\r\nnukleonrus wrote:\n&gt;&gt; Other speed tips:\n&gt;&gt;   - you can easily use 200 toethreads, maybe more, on a dual opteron \n&gt;&gt; with more than 1.5GB of heap\n&gt;&gt;   - Java 1.6 seems to offer a small but noticeable speedup over 1.5\n&gt;&gt;   - disk IO is likely to become the limiting factor once these other \n&gt;&gt; issues are resolved; spreading the key job directories \n&gt;&gt; (arcs/logs/state/scratch) over independent disks is one way to help a bit\n&gt;&gt;\n&gt; \n&gt; we have filtered seeds.txt, so it now contains only sites that have registered DNS and port 80 is giving response [around 10% of list was removed]\n&gt; we have also set java opts to 512m and tothreads to 100 but speed is in average slower than before - 70 kb/s\n&gt; \n&gt; we are testing both, h1 and h2, both having similar performance\n&gt; h2 is occasionally giving alerts about unsuporrted charset[but i think this is not a problem]\n&gt; \n&gt; i have also tried modified settings with lowered timeouts as you suggestted, but it had no effect\n&gt; \n&gt; i am also testing on my laptop[also fibre connection but with another ISP] and speed is the same\n&gt; \n&gt; here is Frontier summary\n&gt; \n&gt; Frontier\n&gt; 20770 URI queues: 1760 active (161 in-process; 9 ready; 1590 snoozed); 18903 inactive; 0 ineligible; 0 retired; 107 exhausted [RUN: 0 in, 50 out]\n&gt; Threads\n&gt; 111 threads: 111 ABOUT_TO_BEGIN_PROCESSOR; 106 HTTP, 5 DNS \n\nAt this point, I think there&#39;s a good chance the bottleneck is not in \nHeritrix: you&#39;ve got plenty of target sites to crawl (as evidence by the \nlarge number of queues waiting in &#39;inactive&#39; status) and have eliminated \nthe factor (unresponsive sites) that sometimes stalls a large number of \nthe worker threads.\n\nSo I would consider the machine&#39;s limitations, your net connection, and \nanything else on the path to your target sites, including the sites \nthemselves.\n\nIf the machine has more RAM, I would bump the heap to 1.5G or more, and \ntry ~200 threads. (But, never let the machine swap at all!) If that and \nthe other tweaks so far have had no effect, then the bottleneck is \ndefinitely somewhere else, probably the network.\n\nYou might want to check your effective available bandwidth via other \ntransfers separate from the crawl. To a cooperating high-bandwidth \nwebserver, you can also use the &#39;ab&#39; apache-benchmarking utility to see \nif you hit the same throughput ceiling.\n\n&gt; if you need to see some logs for observation, tell me\n\nIf there were any strange &#39;alerts&#39; or errors in heritrix_out.log, that \nwould be interesting.\n\nExcerpts from progress-statistics.log for the first few minutes, and a \nfew minutes after it has run for a while, would show the actual rates in \nURIs/second and KB/sec, but unless other numbers are very strange \nwouldn&#39;t generate more ideas.\n\n- Gordon @ IA\n\n"}}