{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":385173050,"authorName":"Coram, Roger","from":"&quot;Coram, Roger&quot; &lt;Roger.Coram@...&gt;","replyTo":"LIST","senderId":"k8K2YvMvHGkNzWLoqXPdfQrbmkbeQ76J4l5UiNeENjqJyDEcDYUDzut7Iw9YkulRTiZsCdRNjuqKS41cS2N41-tNMztDYfKeSA","spamInfo":{"isSpam":false,"reason":"12"},"subject":"RE: [archive-crawler] Recovering a crawler","postDate":"1348739106","msgId":7800,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDc0Qzk3RTdERjVBNzc4NEQ5OTcyMTdGRjc1RDEyMTY2MEZDMUQ5NTdAdzJrMy1ic3BleDE+","inReplyToHeader":"PDUwNjMyREM1LjcwNTA3MDBAYXJjaGl2ZS5vcmc+","referencesHeader":"PDc0Qzk3RTdERjVBNzc4NEQ5OTcyMTdGRjc1RDEyMTY2MEZDMUQ3NDhAdzJrMy1ic3BleDE+IDw1MDYzMkRDNS43MDUwNzAwQGFyY2hpdmUub3JnPg=="},"prevInTopic":7799,"nextInTopic":7803,"prevInTime":7799,"nextInTime":7801,"topicId":7795,"numMessagesInTopic":5,"msgSnippet":"Hi Gordon, The recovery-log approach is the one we ve used in the past (build- launch paused- copy log- unpause when complete). However, in this case we re not","rawEmail":"Return-Path: &lt;Roger.Coram@...&gt;\r\nX-Sender: Roger.Coram@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 46898 invoked from network); 27 Sep 2012 09:45:08 -0000\r\nX-Received: from unknown (98.137.34.45)\n  by m9.grp.sp2.yahoo.com with QMQP; 27 Sep 2012 09:45:08 -0000\r\nX-Received: from unknown (HELO w2k3-bspex1.bl.uk) (194.66.236.30)\n  by mta2.grp.sp2.yahoo.com with SMTP; 27 Sep 2012 09:45:08 -0000\r\nX-MimeOLE: Produced By Microsoft Exchange V6.5\r\nContent-class: urn:content-classes:message\r\nMIME-Version: 1.0\r\nContent-Type: multipart/mixed;\n\tboundary=&quot;----_=_NextPart_001_01CD9C94.C69B6258&quot;\r\nDate: Thu, 27 Sep 2012 10:45:06 +0100\r\nMessage-ID: &lt;74C97E7DF5A7784D997217FF75D121660FC1D957@w2k3-bspex1&gt;\r\nIn-Reply-To: &lt;50632DC5.7050700@...&gt;\r\nX-MS-Has-Attach: \r\nX-MS-TNEF-Correlator: \r\nThread-Topic: [archive-crawler] Recovering a crawler\r\nThread-Index: Ac2cBFkD1bn97XC9TSuQkbce0Aol1AAjtwPA\r\nReferences: &lt;74C97E7DF5A7784D997217FF75D121660FC1D748@w2k3-bspex1&gt; &lt;50632DC5.7050700@...&gt;\r\nTo: &quot;Gordon Mohr&quot; &lt;gojomo@...&gt;,\n\t&lt;archive-crawler@yahoogroups.com&gt;\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: &quot;Coram, Roger&quot; &lt;Roger.Coram@...&gt;\r\nSubject: RE: [archive-crawler] Recovering a crawler\r\nX-Yahoo-Group-Post: member; u=385173050\r\n\r\n\r\n------_=_NextPart_001_01CD9C94.C69B6258\r\nContent-Type: text/plain;\n\tcharset=&quot;us-ascii&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nHi Gordon,\nThe recovery-log approach is the one we&#39;ve used in the past\n(bui=\r\nld-&gt;launch paused-&gt;copy log-&gt;unpause when complete). However, in\nthis case =\r\nwe&#39;re not even getting as far as copying the file to the\n&#39;action&#39; directory=\r\n. The heritrix_out.log show the following, then\nnothing more:\n\n\t2012-09-27 =\r\n08:25:40.880 INFO thread-11\norg.archive.crawler.framework.CrawlJob.launch()=\r\n Job launched\n\t2012-09-27 08:25:42.387 INFO thread-12\norg.archive.spring.Pa=\r\nthSharingContext.initLaunchId() launch id\n20120927082542\n\t2012-09-27 08:25:=\r\n42.591 INFO thread-12\norg.springframework.context.support.DefaultLifecycleP=\r\nrocessor$LifecycleG\nroup.start() Starting beans in phase 0\n\nThe JVM is defi=\r\nnitely busy and an &#39;lsof&#39; implies that it&#39;s accessing the\ncontents of the &#39;=\r\nstate&#39; directory; the frontier.recover.gz isn&#39;t being\nwritten to.\n\nI&#39;ve att=\r\nached a section from jstack - am I right in inferring that the\nBLOCKED thre=\r\nad is the web-UI? \n\nMany thanks,\nRoger\n\n\n-----Original Message-----\nFrom: G=\r\nordon Mohr [mailto:gojomo@...] \nSent: 26 September 2012 17:31\nTo: a=\r\nrchive-crawler@yahoogroups.com\nCc: Coram, Roger\nSubject: Re: [archive-crawl=\r\ner] Recovering a crawler\n\nA recovery using the H3 checkpointing mechanism, =\r\nif such a checkpoint is\navailable, should be very quick (almost instant).\n\n=\r\nUsing the recovery log approach will take much longer -- on the order of\nda=\r\nys to replay weeks&#39; worth of prior crawling is not surprising.\n\nNote that i=\r\nn H3, to use the recovery-log approach, you&#39;d normally drop\nthe &quot;.recover.g=\r\nz&quot; log into the &#39;action&#39; directory and do a &#39;paused&#39; \nlaunch of the crawl, =\r\nonly unpausing the crawl once there&#39;s evidence of\nsome number of URIs appea=\r\nring in the frontier queues. (That can take a\nwhile, because first there&#39;s =\r\none pass of the entire .recover log to\ndiscover already-visited URIs, then =\r\na 2nd pass to add URis.)\n\nI don&#39;t think that any part of this should block =\r\nthe UI, so there may be\nsomething else wrong. One way to confirm progress w=\r\nould be to check that\nthe machine is CPU/IO busy and that repeated Java thr=\r\nead dumps (via the\n&#39;jstack&#39; utility or sending a SIGQUIT and viewing the he=\r\nritrix_out log)\nshow stacks suggesting intended activity. (This might also =\r\nreveal if\nthere&#39;s a good reason for the unresponsive web UI.) I also believ=\r\ne the\nnew launch&#39;s &#39;.recovery.gz&#39; file would be growing during an in-progre=\r\nss\nrecovery.\n\n\nIf for some reason the recovery is hung, the heritrix_out.lo=\r\ng or thread\ndumps might indicate why with an error or suspicious thread sta=\r\nck.\n\n- Gordon\n\nOn 9/26/12 2:19 AM, Coram, Roger wrote:\n&gt;\n&gt;\n&gt; Hi,\n&gt;\n&gt; One of=\r\n our crawlers had to be restarted several weeks into a crawl \n&gt; (H3.1.1). A=\r\nfter a successful build and clicking &#39;Launch&#39; the crawler \n&gt; and its web-UI=\r\n have been completely unresponsive (the last job.log \n&gt; entry was &quot;INFO Job=\r\n launched&quot; nearly 48 hours ago). The &#39;state&#39; \n&gt; directory for this particul=\r\nar crawler (using the \n&gt; PersistStoreProcessor) is more than 3TB in size.\n&gt;=\r\n\n&gt; My question: how long can a recovery typically take? We&#39;ve had to \n&gt; rec=\r\nover crawlers before but it&#39;s never taken quite this long before. \n&gt; Is the=\r\nre some way to figure out what it&#39;s doing?\n&gt;\n&gt; Thanks.\n&gt;\n&gt; Roger G. Coram\n&gt;=\r\n\n&gt; Web Archiving Engineer\n&gt;\n&gt; The British Library\n&gt;\n&gt; T: +44 (0)1937 546607=\r\n\n&gt;\n&gt; F: +44 (0)1937 546872\n&gt;\n&gt; E: roger.coram@... &lt;mailto:roger.coram@bl.=\r\nuk&gt;\n&gt;\n&gt;\n&gt;\n&gt; \n\r\n------_=_NextPart_001_01CD9C94.C69B6258\r\nContent-Type: text/plain;\n\tname=&quot;jstack.txt&quot;\r\nContent-Description: jstack.txt\r\nContent-Disposition: attachment;\n\tfilename=&quot;jstack.txt&quot;\r\n\r\n[ Attachment content not displayed ]\r\n------_=_NextPart_001_01CD9C94.C69B6258--\r\n\n"}}