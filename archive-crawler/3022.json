{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":272078532,"authorName":"barabasy69","from":"&quot;barabasy69&quot; &lt;barabasy@...&gt;","profile":"barabasy69","replyTo":"LIST","senderId":"rQYrwSqhw_9BY6aOmgmyEqjwDcZc3_BwCnJiGgVqBh7SiDqWgroxivgzQ0a5Xr-Kh7ccNZKGseCt68BHUPC0MKTowSfjsaZh","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: Writing source (seed) in arc file","postDate":"1152310403","msgId":3022,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PGU4bW1hMytmM3NiQGVHcm91cHMuY29tPg==","inReplyToHeader":"PDQ0QUU5OUFDLjUwMDAwMDBAYXJjaGl2ZS5vcmc+"},"prevInTopic":3021,"nextInTopic":3023,"prevInTime":3021,"nextInTime":3023,"topicId":3011,"numMessagesInTopic":4,"msgSnippet":"Ya, I can see now that it is not such an easy task since the apache commons httpclient has no way to inject new header in the response. And heritrix just wrap","rawEmail":"Return-Path: &lt;barabasy@...&gt;\r\nX-Sender: barabasy@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 71788 invoked from network); 7 Jul 2006 22:13:39 -0000\r\nReceived: from unknown (66.218.67.33)\n  by m27.grp.scd.yahoo.com with QMQP; 7 Jul 2006 22:13:39 -0000\r\nReceived: from unknown (HELO n18a.bullet.scd.yahoo.com) (66.94.237.47)\n  by mta7.grp.scd.yahoo.com with SMTP; 7 Jul 2006 22:13:35 -0000\r\nReceived: from [66.218.66.59] by n18.bullet.scd.yahoo.com with NNFMP; 07 Jul 2006 22:13:25 -0000\r\nReceived: from [66.218.66.90] by t8.bullet.scd.yahoo.com with NNFMP; 07 Jul 2006 22:13:25 -0000\r\nDate: Fri, 07 Jul 2006 22:13:23 -0000\r\nTo: archive-crawler@yahoogroups.com\r\nMessage-ID: &lt;e8mma3+f3sb@...&gt;\r\nIn-Reply-To: &lt;44AE99AC.5000000@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:6:0:0\r\nFrom: &quot;barabasy69&quot; &lt;barabasy@...&gt;\r\nSubject: Re: Writing source (seed) in arc file\r\nX-Yahoo-Group-Post: member; u=272078532; y=O64gY0X5Na8v19D7-XPkQFCzvijBssortGnvWKCLAzPhlKkbbA\r\nX-Yahoo-Profile: barabasy69\r\n\r\nYa, I can see now that it is not such an easy task since the apache \ncommon=\r\ns httpclient has no way to inject new header in the response. \nAnd heritrix=\r\n just wrap streams from httpclient connection and record \nthem into files f=\r\nor later playback by extractors.\n\nOn second thought, all I want is to be ab=\r\nle to identify the source of \nan ARC record. So, maybe it is possible for m=\r\ne to add an header in \nthe metadata line of an arc record. The javadoc api =\r\nfor \nARCRecordMetaData has a method getHeaderFields(). Are those headers \nt=\r\nhe same as HTTP headers? If I can add custom custom metadata header \nfor ea=\r\nch arc record then, it will be ok for my purpose.\n\nThanks for your reply an=\r\nd for this great software.\nOpenSource rules.\nBarabasy\n--- In archive-crawle=\r\nr@yahoogroups.com, Michael Stack &lt;stack@...&gt; \nwrote:\n&gt;\n&gt; barabasy69 wrote:\n=\r\n&gt; &gt;\n&gt; &gt; Hi,\n&gt; &gt;\n&gt; &gt; I need a way to track from which seed (source) a URI ca=\r\nme from. \nThis\n&gt; &gt; information is written down in the crawl.log if I set th=\r\ne\n&gt; &gt; attribute &#39;source-tag-seeds&#39; in the frontier. But it will be more\n&gt; &gt;=\r\n intersting to if the seed is marked as an HTTP header and \nsurvives all\n&gt; =\r\n&gt; the way down to the arc record. After reading the code, I thought \nthat\n&gt;=\r\n &gt; the HTTP fetcher is a good place to inject some HTTP headers into \nthe\n&gt;=\r\n &gt; HTTP response but I cannot see where in code I can do that.\n&gt; &gt;\n&gt; \n&gt; \n&gt; =\r\n\n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; This class does not make for easy reading.\n&gt; =\r\n&gt;\n&gt; &gt; Anybody can give me some advice in how I can add more headers to \nthe=\r\n\n&gt; &gt; HTTP response so that I can recover them in the arc file?\n&gt; &gt;\n&gt; \n&gt; \n&gt; =\r\n\n&gt; \n&gt; \n&gt; Looking at code, this looks hard.\n&gt; \n&gt; The content that gets writt=\r\nen to ARCs is &#39;recorded&#39; by wrapping the \n&gt; apache commons HttpClient Socke=\r\nt Input/Output Streams.  This is \ndone \n&gt; with a little hack. We&#39;ve copied =\r\nlocal into Heritrix the commons \n&gt; HttpClient HttpConnection class and adde=\r\nd our wraps directly since \nthe \n&gt; API doesn&#39;t have support for wrapping st=\r\nreams.  See under \n&gt; $HERITRIX_HOME/src/java/org/apache.....  Our changes a=\r\nre wrapped by \n&gt; comments with mention of &#39;Heritrix&#39; (Because of these over=\r\nlays, so \nour \n&gt; hacked versions of these classes are used, the Heritrix ja=\r\nr must \ncome \n&gt; first on the CLASSPATH).\n&gt; \n&gt; So, you&#39;ll need get in on thi=\r\ns low-level act if you want to inject \nHTTP \n&gt; Headers and have them show u=\r\np in ARCs.   When you&#39;re down low at \nthe \n&gt; streams level, you don&#39;t have =\r\neasy access to current CrawlURI so \nyou can \n&gt; get at the source seed.  Als=\r\no, figuring the end-of-headers and \n&gt; start-of-body so you know where to in=\r\nject your header won&#39;t be easy.\n&gt; \n&gt; You might try looking at HTTPRecorderG=\r\netMethod (See \n&gt; \nhttp://crawler.archive.org/xref/org/archive/httpclient/Ht=\r\ntpRecorderGet\nMethod.html), \n&gt; the subclass of commons HttpClient GetMethod=\r\n we use in FetchHTTP, \nwhere \n&gt; we get notification from commons HttpClient=\r\n of transition from \nheader to \n&gt; body but I&#39;m guessing the notification co=\r\nmes too late.  When this \nmethod \n&gt; is called, the double new-line separati=\r\nng header from body has \nprobably \n&gt; already been written.  If not -- I hav=\r\nen&#39;t checked -- this might be \nthe \n&gt; place for you to add code.  Make a ve=\r\nrsion of HttpRecorderGetMethod \nthat \n&gt; takes a CrawlURI in its constructor=\r\n so  you can get at the source \nseed \n&gt; instead of a uri String, and add in=\r\n your header in this method: \n&gt; \nhttp://crawler.archive.org/xref/org/archiv=\r\ne/httpclient/HttpRecorderGet\nMethod.html#95 \n&gt; (You might have to pass in H=\r\nttpRecorder too so you can get at \nstreams).\n&gt; \n&gt; Good luck.  Let us know i=\r\nf there is anything we can do to make this \n&gt; easier on you.\n&gt; St.Ack\n&gt;\n\n\n\n=\r\n\n\n"}}