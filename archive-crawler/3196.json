{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":168599281,"authorName":"Michael Stack","from":"Michael Stack &lt;stack@...&gt;","profile":"stackarchiveorg","replyTo":"LIST","senderId":"aQ00tsJN9lOctioh6Pg_TvVHIzNsugg7la5TEk4v_71rwJwLva5Jt6umXPvVtkymA9utvHnAJYoyMyl0CmAsDYhULrhAUReC","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] Re: Two instances","postDate":"1156092339","msgId":3196,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ0RTg5MUIzLjgwNTA1MDZAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGVjNm03MStpdGZkQGVHcm91cHMuY29tPg==","referencesHeader":"PGVjNm03MStpdGZkQGVHcm91cHMuY29tPg=="},"prevInTopic":3195,"nextInTopic":0,"prevInTime":3195,"nextInTime":3197,"topicId":3188,"numMessagesInTopic":6,"msgSnippet":"... Ok.  If you can t pause, you can t checkpoint.  Perhaps your NPE from earlier put threads into a weird state.  Try getting a thread dump to see where","rawEmail":"Return-Path: &lt;stack@...&gt;\r\nX-Sender: stack@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 92756 invoked from network); 20 Aug 2006 16:48:46 -0000\r\nReceived: from unknown (66.218.67.33)\n  by m21.grp.scd.yahoo.com with QMQP; 20 Aug 2006 16:48:46 -0000\r\nReceived: from unknown (HELO dns.duboce.net) (63.203.238.114)\n  by mta7.grp.scd.yahoo.com with SMTP; 20 Aug 2006 16:48:45 -0000\r\nReceived: from [192.168.1.106] ([192.168.1.106])\n\t(authenticated)\n\tby dns-eth1.duboce.net (8.10.2/8.10.2) with ESMTP id k7KFRfZ14986;\n\tSun, 20 Aug 2006 08:27:41 -0700\r\nMessage-ID: &lt;44E891B3.8050506@...&gt;\r\nDate: Sun, 20 Aug 2006 09:45:39 -0700\r\nUser-Agent: Mozilla/5.0 (X11; U; Linux i686 (x86_64); en-US; rv:1.8.0.4) Gecko/20060516 SeaMonkey/1.0.2\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;ec6m71+itfd@...&gt;\r\nIn-Reply-To: &lt;ec6m71+itfd@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Msg-Info: 1:0:0:0\r\nFrom: Michael Stack &lt;stack@...&gt;\r\nSubject: Re: [archive-crawler] Re: Two instances\r\nX-Yahoo-Group-Post: member; u=168599281; y=y3s7SjLbZO_JOih9SGlQAW64vN2WxiYSdsNSR2tqQCk0owg--d3R-uKK\r\nX-Yahoo-Profile: stackarchiveorg\r\n\r\ngoblin_cz wrote:\n&gt;\n&gt; Thank you, now it will be controlling jobs much simpler.\n&gt;\n&gt; But now is heritrix still pausing (for one day) 24 from 99 threads.\n&gt;\n\n\n\n\nOk.  If you can&#39;t pause, you can&#39;t checkpoint.  Perhaps your NPE from \nearlier put threads into a weird state.  Try getting a thread dump to \nsee where threads are stuck (&#39;% kill -SIGQUIT JAVA_PROCESS_ID&#39;).  Send \nthread dump to me off list if its all just gobble-de-gook to you. \n\nAt this stage, I believe your only recourse is kill the crawler and then \ntry a recovery based on the recovery log (as oppposed to checkpoint).  \nSee &#39;9.3. Recovery of Frontier State and recover.gz \n&lt;http://crawler.archive.org/articles/user_manual.html#recover&gt;&#39; in the \nUser Manual.\n\nSt.Ack\n\n\n&gt; Resuming and checkpointing from UI or jmxclient is not working.\n&gt;\n&gt; I can not find method in jmxclient to remove or kill the threads.\n&gt;\n&gt; Is it possible to rescue my job? (900 GB is a lot ;)\n&gt;\n&gt; Thank you.\n&gt;\n&gt; --- In archive-crawler@yahoogroups.com \n&gt; &lt;mailto:archive-crawler%40yahoogroups.com&gt;, Michael Stack &lt;stack@...&gt; \n&gt; wrote:\n&gt; &gt;\n&gt; &gt; What version of Heritrix? If 1.8.0, the below NPE looks like it could\n&gt; &gt; be related to this issue:\n&gt; &gt;\n&gt; http://sourceforge.net/tracker/index.php?func=detail&aid=1489155&group_id=73833&atid=539099. \n&gt; &lt;http://sourceforge.net/tracker/index.php?func=detail&aid=1489155&group_id=73833&atid=539099.&gt;\n&gt;\n&gt; &gt; If so, you&#39;ll need to update to HEAD to be able to run multiple\n&gt; instances.\n&gt; &gt;\n&gt; &gt; Otherwise, are you on windows? And is your UI still hosed?\n&gt; &gt;\n&gt; &gt; Using cmdline_jmxclient, first you need to find the CrawlJob MBean in\n&gt; &gt; your list of MBeans. It looks like there is only one currently running\n&gt; &gt; and its name is:\n&gt; &gt;\n&gt; &gt;\n&gt; org.archive.crawler:host=har,jmxport=8849,mother=Heritrix,name=CZ2006-decide-20060808104342375,type=CrawlService.Job\n&gt; &gt;\n&gt; &gt; To get listing of all the available operations and attributes for\n&gt; your a\n&gt; &gt; CrawlJob, pass this cmdline-jmxclient without argument. E.g:\n&gt; &gt;\n&gt; &gt; % java -jar cmdline-jmxclient-X.X.jar controlRole:secret localhost:8081\n&gt; &gt;\n&gt; org.archive.crawler:host=har,jmxport=8849,mother=Heritrix,name=CZ2006-decide-20060808104342375,type=CrawlService.Job\n&gt; &gt;\n&gt; &gt; There&#39;ll be a lot of output listing attributes and operations with\n&gt; &gt; description of parameters to pass. Look for the checkpoint\n&gt; &gt; operation. It looks like the operation name is &#39;startCheckpoint&#39;.\n&gt; &gt; Notice how it doesn&#39;t take parameters. Therefore, the below should run\n&gt; &gt; the checkpoint for you:\n&gt; &gt;\n&gt; &gt; % java -jar cmdline-jmxclient-X.X.jar controlRole:secret localhost:8081\n&gt; &gt;\n&gt; org.archive.crawler:host=har,jmxport=8849,mother=Heritrix,name=CZ2006-decide-20060808104342375,type=CrawlService.Job\n&gt;\n&gt; &gt; startCheckpoint\n&gt; &gt;\n&gt; &gt; (I haven&#39;t verified. Above is just from reading the API).\n&gt; &gt;\n&gt; &gt; Checkpoint marks the progress log so check there for completion (unless\n&gt; &gt; there it errors out checkpointing).\n&gt; &gt;\n&gt; &gt; There&#39;s a few more examples on usage here\n&gt; &gt; http://crawler.archive.org/cmdline-jmxclient/ \n&gt; &lt;http://crawler.archive.org/cmdline-jmxclient/&gt; or if you pass &#39;-h&#39;, you\n&gt; &gt; should get usage info.\n&gt; &gt;\n&gt; &gt; You might try using $JAVA_HOME/bin/jconsole if you can&#39;t figure the\n&gt; &gt; cmdline_jmxclient. Its a SWING app. that might be easier to navigate.\n&gt; &gt;\n&gt; &gt; Good luck,\n&gt; &gt; St.Ack\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; goblin_cz wrote:\n&gt; &gt; &gt;\n&gt; &gt; &gt; Hi,\n&gt; &gt; &gt; the first occured exception (in this case) is:\n&gt; &gt; &gt; java.lang.NullPointerException\n&gt; &gt; &gt; at\n&gt; &gt; &gt;\n&gt; org.archive.crawler.datamodel.ServerCache.getHostFor(ServerCache.java:145)\n&gt; &gt; &gt; at\n&gt; &gt; &gt;\n&gt; org.archive.crawler.fetcher.HeritrixProtocolSocketFactory.getHostAddress(HeritrixProtocolSocketFactory.java:166)\n&gt; &gt; &gt; at\n&gt; &gt; &gt;\n&gt; org.archive.crawler.fetcher.HeritrixProtocolSocketFactory.createSocket(HeritrixProtocolSocketFactory.java:134)\n&gt; &gt; &gt; at\n&gt; &gt; &gt;\n&gt; org.apache.commons.httpclient.HttpConnection.open(HttpConnection.java:707)\n&gt; &gt; &gt; at\n&gt; &gt; &gt;\n&gt; org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:382)\n&gt; &gt; &gt; at\n&gt; &gt; &gt;\n&gt; org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:168)\n&gt; &gt; &gt; at\n&gt; &gt; &gt;\n&gt; org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:396)\n&gt; &gt; &gt; at\n&gt; &gt; &gt;\n&gt; org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:324)\n&gt; &gt; &gt; at\n&gt; &gt; &gt; org.archive.crawler.fetcher.FetchHTTP.innerProcess(FetchHTTP.java:408)\n&gt; &gt; &gt; at\n&gt; &gt; &gt; org.archive.crawler.framework.Processor.process(Processor.java:103)\n&gt; &gt; &gt; at\n&gt; &gt; &gt;\n&gt; org.archive.crawler.framework.ToeThread.processCrawlUri(ToeThread.java:306)\n&gt; &gt; &gt; at org.archive.crawler.framework.ToeThread.run(ToeThread.java:153)\n&gt; &gt; &gt;\n&gt; &gt; &gt; and now there are 480 000 exceptions like this (NullPointer).\n&gt; &gt; &gt;\n&gt; &gt; &gt; About JMX client. I am in the state where I am connected to the server\n&gt; &gt; &gt; with cmdline-jmxclient and it will print:\n&gt; &gt; &gt; 08/18/2006 18:21:38 +0200 org.archive.jmx.Client\n&gt; &gt; &gt;\n&gt; org.archive.crawler:guiport=7070,host=har,jmxport=8849,name=Heritrix,type=CrawlService\n&gt; &gt; &gt; java.lang:name=PS Survivor Space,type=MemoryPool\n&gt; &gt; &gt; java.lang:type=Memory\n&gt; &gt; &gt; java.lang:name=PS Perm Gen,type=MemoryPool\n&gt; &gt; &gt; JMImplementation:type=MBeanServerDelegate\n&gt; &gt; &gt; java.lang:name=Code Cache,type=MemoryPool\n&gt; &gt; &gt; java.lang:name=PS Scavenge,type=GarbageCollector\n&gt; &gt; &gt; java.util.logging:type=Logging\n&gt; &gt; &gt;\n&gt; org.archive.crawler:guiport=7070,host=har,jmxport=8849,name=serials,type=CrawlService\n&gt; &gt; &gt; java.lang:type=Threading\n&gt; &gt; &gt; java.lang:type=OperatingSystem\n&gt; &gt; &gt; java.lang:type=Compilation\n&gt; &gt; &gt; java.lang:name=CodeCacheManager,type=MemoryManager\n&gt; &gt; &gt; java.lang:name=PS Eden Space,type=MemoryPool\n&gt; &gt; &gt;\n&gt; org.archive.crawler:host=har,jmxport=8849,mother=Heritrix,name=CZ2006-decide-20060808104342375,type=CrawlService.Job\n&gt; &gt; &gt; java.lang:name=PS Old Gen,type=MemoryPool\n&gt; &gt; &gt; java.lang:type=Runtime\n&gt; &gt; &gt; java.lang:type=ClassLoading\n&gt; &gt; &gt; java.lang:name=PS MarkSweep,type=GarbageCollector\n&gt; &gt; &gt;\n&gt; &gt; &gt; I am little confused about commands and beans. How can I checkpoint\n&gt; &gt; &gt; the job? Thank you\n&gt; &gt; &gt;\n&gt; &gt; &gt; The situation, how this have happened to me:\n&gt; &gt; &gt; 1. crawler - were running broad crawl\n&gt; &gt; &gt; I started second instance (on local-instances.jsp), I set tiny crawl\n&gt; &gt; &gt; (only one seed) with deciding rules. The only thing what is &quot;wrong&quot;: I\n&gt; &gt; &gt; set seed without www prefix (i set mzk.cz instead www.mzk.cz - this\n&gt; &gt; &gt; was the test) and it was preparing and preparing after few minutes it\n&gt; &gt; &gt; throw exception about null pointer.\n&gt; &gt; &gt;\n&gt; &gt; &gt; Have a nice day\n&gt; &gt; &gt; Brokes\n&gt; &gt; &gt;\n&gt; &gt; &gt; --- In archive-crawler@yahoogroups.com \n&gt; &lt;mailto:archive-crawler%40yahoogroups.com&gt;\n&gt; &gt; &gt; &lt;mailto:archive-crawler%40yahoogroups.com&gt;, Michael Stack &lt;stack@&gt;\n&gt; &gt; &gt; wrote:\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; Check heritrix_out.log. Hopefully it has more precise info on\n&gt; what went\n&gt; &gt; &gt; &gt; awry. The below doesn&#39;t tell us much (No line numbers from compiled\n&gt; &gt; &gt; &gt; JSP). Can you connect via JMX (Use jconsole or the\n&gt; cmdline_jmxclient)?\n&gt; &gt; &gt; &gt; If so, you could checkpoint your broad crawl and then restart and\n&gt; &gt; &gt; &gt; recover the application.\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; If you can figure a recipe to reproduce the below, send it on\n&gt; over (I\n&gt; &gt; &gt; &gt; just tried multiple crawling instances and seems to work fine).\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; St.Ack\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; goblin_cz wrote:\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; Hallo,\n&gt; &gt; &gt; &gt; &gt; I ran broad crawl and because I want something try, I started new\n&gt; &gt; &gt; &gt; &gt; instance in page local-instances.jsp and on it little crawl.\n&gt; &gt; &gt; &gt; &gt; Everything looks ok but after few minutes I have get on\n&gt; &gt; &gt; &gt; &gt; local-instances.jsp this exception:\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; HTTP ERROR: 500 Internal Server Error\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; RequestURI=/local-instances.jsp\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; and on index.jsp\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; An error occured\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; java.lang.NullPointerException\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; java.lang.NullPointerException\n&gt; &gt; &gt; &gt; &gt; at org.archive.crawler.jspc.admin.index_jsp._jspService(Unknown\n&gt; &gt; &gt; &gt; &gt; Source)\n&gt; &gt; &gt; &gt; &gt; at\n&gt; org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:137)\n&gt; &gt; &gt; &gt; &gt; at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n&gt; &gt; &gt; &gt; &gt; at\n&gt; &gt; &gt; &gt; &gt;\n&gt; org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:358)\n&gt; &gt; &gt; &gt; &gt; at\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; org.mortbay.jetty.servlet.WebApplicationHandler$Chain.doFilter(WebApplicationHandler.java:342)\n&gt; &gt; &gt; &gt; &gt; at\n&gt; &gt; &gt; &gt; &gt;\n&gt; org.archive.crawler.admin.ui.RootFilter.doFilter(RootFilter.java:67)\n&gt; &gt; &gt; &gt; &gt; at\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; org.mortbay.jetty.servlet.WebApplicationHandler$Chain.doFilter(WebApplicationHandler.java:334)\n&gt; &gt; &gt; &gt; &gt; at\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; org.mortbay.jetty.servlet.WebApplicationHandler.dispatch(WebApplicationHandler.java:286)\n&gt; &gt; &gt; &gt; &gt; at\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:567)\n&gt; &gt; &gt; &gt; &gt; at org.mortbay.http.HttpContext.handle(HttpContext.java:1807)\n&gt; &gt; &gt; &gt; &gt; at\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; org.mortbay.jetty.servlet.WebApplicationContext.handle(WebApplicationContext.java:525)\n&gt; &gt; &gt; &gt; &gt; at org.mortbay.http.HttpContext.handle(HttpContext.java:1757)\n&gt; &gt; &gt; &gt; &gt; at org.mortbay.http.HttpServer.service(HttpServer.java:879)\n&gt; &gt; &gt; &gt; &gt; at\n&gt; org.mortbay.http.HttpConnection.service(HttpConnection.java:789)\n&gt; &gt; &gt; &gt; &gt; at\n&gt; org.mortbay.http.HttpConnection.handleNext(HttpConnection.java:960)\n&gt; &gt; &gt; &gt; &gt; at org.mortbay.http.HttpConnection.handle(HttpConnection.java:806)\n&gt; &gt; &gt; &gt; &gt; at\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; org.mortbay.http.SocketListener.handleConnection(SocketListener.java:218)\n&gt; &gt; &gt; &gt; &gt; at org.mortbay.util.ThreadedServer.handle(ThreadedServer.java:300)\n&gt; &gt; &gt; &gt; &gt; at org.mortbay.util.ThreadPool$PoolThread.run(ThreadPool.java:511)\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; I hope that there is possible to recover my broad crawl.\n&gt; &gt; &gt; &gt; &gt; Thank you.\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; Specs:\n&gt; &gt; &gt; &gt; &gt; heritrix-1.8.0\n&gt; &gt; &gt; &gt; &gt; linux\n&gt; &gt; &gt; &gt; &gt; java 5.06\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; --\n&gt; &gt; &gt; &gt; &gt; --\n&gt; &gt; &gt; &gt; &gt; Adam Broke&#65533;\n&gt; &gt; &gt; &gt; &gt; www.brokes.net\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt;\n&gt;\n&gt;  \n\n\n"}}