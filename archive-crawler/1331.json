{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":163406187,"authorName":"Kristinn Sigurdsson","from":"&quot;Kristinn Sigurdsson&quot; &lt;kris@...&gt;","profile":"kristsi25","replyTo":"LIST","senderId":"3j4vafo3kX4aOA7YzlYgTV5MoKpMP8Rb4MiMAIHZxtXOKd1XaqFAvfeRLsPwbFEzMd3tw1gCXDEKoNoMKySdvvSp1WM7ecyIzhyb5yqzeg","spamInfo":{"isSpam":false,"reason":"0"},"subject":"RE: [archive-crawler] ReplayCharSequence","postDate":"1105092667","msgId":1331,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDA2NzhEQjE5NjhFQUM3NDA5Q0MzRDBBQjdBMTFCODRBMDZFQzA4QHNrYXJmdXIuYm9rLmxvY2FsPg==","inReplyToHeader":"PGNya2NoNCtiNm44QGVHcm91cHMuY29tPg=="},"prevInTopic":1328,"nextInTopic":1334,"prevInTime":1330,"nextInTime":1332,"topicId":1328,"numMessagesInTopic":3,"msgSnippet":"This looks like a bug in the implementation of the ReplayCharSequence interface (both of them). The reason this slipped by is probably that every class has","rawEmail":"Return-Path: &lt;kris@...&gt;\r\nX-Sender: kris@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 16912 invoked from network); 7 Jan 2005 10:11:13 -0000\r\nReceived: from unknown (66.218.66.172)\n  by m22.grp.scd.yahoo.com with QMQP; 7 Jan 2005 10:11:13 -0000\r\nReceived: from unknown (HELO ia00524.archive.org) (207.241.224.172)\n  by mta4.grp.scd.yahoo.com with SMTP; 7 Jan 2005 10:11:13 -0000\r\nReceived: (qmail 20226 invoked by uid 100); 7 Jan 2005 09:56:26 -0000\r\nReceived: from forritun-4.bok.hi.is (HELO forritun4) (kris@...@130.208.152.83)\n  by mail-dev.archive.org with SMTP; 7 Jan 2005 09:56:26 -0000\r\nTo: &lt;archive-crawler@yahoogroups.com&gt;\r\nDate: Fri, 7 Jan 2005 10:11:07 -0000\r\nMessage-ID: &lt;0678DB1968EAC7409CC3D0AB7A11B84A06EC08@...&gt;\r\nMIME-Version: 1.0\r\nContent-Type: multipart/alternative;\n\tboundary=&quot;----=_NextPart_000_0002_01C4F4A1.35B4CD50&quot;\r\nX-Priority: 3 (Normal)\r\nX-MSMail-Priority: Normal\r\nX-Mailer: Microsoft Outlook, Build 10.0.4510\r\nIn-Reply-To: &lt;crkch4+b6n8@...&gt;\r\nImportance: Normal\r\nX-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441\r\nX-Spam-DCC: : \r\nX-Spam-Checker-Version: SpamAssassin 2.63 (2004-01-11) on ia00524.archive.org\r\nX-Spam-Level: \r\nX-Spam-Status: No, hits=0.8 required=6.5 tests=AWL,CLICK_BELOW,HTML_30_40,\n\tHTML_FONTCOLOR_BLUE,HTML_MESSAGE,HTML_TAG_EXISTS_TBODY autolearn=no \n\tversion=2.63\r\nX-eGroups-Remote-IP: 207.241.224.172\r\nFrom: &quot;Kristinn Sigurdsson&quot; &lt;kris@...&gt;\r\nSubject: RE: [archive-crawler] ReplayCharSequence\r\nX-Yahoo-Group-Post: member; u=163406187\r\nX-Yahoo-Profile: kristsi25\r\n\r\n\r\n------=_NextPart_000_0002_01C4F4A1.35B4CD50\r\nContent-Type: text/plain;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nThis looks like a bug in the implementation of the ReplayCharSequence\ninter=\r\nface (both of them). The reason this slipped by is probably that every\nclas=\r\ns has this method (inherited from Object) so the compiler does not\nremind y=\r\nou to implement it when implementing the interface.  And since the\nbasic co=\r\nncept of having a CharSequence is to avoid working with the entire\nstring n=\r\noone had encountered it until now.\n \nBelow I&#39;ve included a very simple patc=\r\nh for this bug (not tested for\nMultiByteRep....).\n \n---\nIndex: ReplayCharSe=\r\nquenceFactory.java\n=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=\r\n=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=\r\n=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D\nRC=\r\nS file:\n/cvsroot/archive-crawler/ArchiveOpenCrawler/src/java/org/archive/io=\r\n/ReplayCh\narSequenceFactory.java,v\nretrieving revision 1.28\ndiff -u -r1.28 =\r\nReplayCharSequenceFactory.java\n--- ReplayCharSequenceFactory.java 21 Oct 20=\r\n04 01:59:42 -0000 1.28\n+++ ReplayCharSequenceFactory.java 7 Jan 2005 10:08:=\r\n02 -0000\n@@ -610,6 +610,10 @@\n \n             return ret.toString();\n       =\r\n  }\n+        \n+        public String toString() {\n+            return subst=\r\nring(0,length());\n+        }\n     }\n \n \n@@ -1070,5 +1074,9 @@\n             =\r\n}\n             return result;\n         }\n+\n+        public String toString(=\r\n) {\n+            return substring(0,length());\n+        }\n     }\n }\n---\n \n-=\r\n Kris\n\n\n-----Original Message-----\nFrom: bergmark_d [mailto:bergmark@...=\r\nnell.EDU] \nSent: 6. jan=FAar 2005 22:02\nTo: archive-crawler@yahoogroups.com=\r\n\nSubject: [archive-crawler] ReplayCharSequence\n\n\n\nSo I&#39;ve used Heritrix to =\r\ndownload a Web page, and I have\nthe page content as a CharSequence (i.e., R=\r\neplayCharSequence).\nThe CharSequence interface in Java says that its toStri=\r\nng()\nmethod should be a string with the characters in the same\norder as in =\r\nthe CharSequence.\n\nI do not think that ReplayCharSequence.toString() is\ncor=\r\nrectly implemented.  (But I could be wrong.)\n\nAssume &quot;ReplayCharSequence cs=\r\n&quot; has been defined.  Then\nprinting out &quot;cs.toString()&quot; gives me (the unexpe=\r\ncted)\nstring,\n&quot;org.archive.io.ReplayCharSequenceFactory$ByteReplayCharSeque=\r\nnce...&quot;\n\nThis is not the characters in &quot;cs&quot; but rather a string\nrepresentin=\r\ng &quot;cs&quot;, I guess.  Instead, if I print out\n&quot;(cs.subSequence(0,cs.length()-1)=\r\n).toString()&quot; I get the\nexpected output, namely the characters in &quot;cs&quot;.  Th=\r\nis is\nonly because the &quot;subSequence&quot; method returns a \n&quot;java.lang.CharSeque=\r\nnce&quot;, where toString() is correctly\nimplemented.\n\nHere is the code I used:\n=\r\nSystem.out.println(&quot;First 100 bytes of page:&#92;n&quot;\n                + cs.subSeq=\r\nuence(0,99));    // GOOD!\nString s =3D cs.toString();\nSystem.out.println(&quot;S=\r\ntring version:&#92;n&quot; + s);   // BAD!\ns =3D (cs.subSequence(0,cs.length()-1)).t=\r\noString();  \nSystem.out.println(&quot;Second string version:&#92;n&quot; + s); // GOOD!\n\n=\r\nD.\n\n\n\n\n\nYahoo! Groups Sponsor\t\n\nADVERTISEMENT\n \n&lt;http://us.ard.yahoo.com/SI=\r\nG=3D129e4en03/M=3D298184.5639630.6699735.3001176/D=3Dgr\noups/S=3D1705004924=\r\n:HM/EXP=3D1105135344/A=3D2495208/R=3D0/SIG=3D11egg01lg/*http://www.\nnetflix=\r\n.com/Default?mqso=3D60188914&gt; click here\t\n \n&lt;http://us.adserver.yahoo.com/l=\r\n?M=3D298184.5639630.6699735.3001176/D=3Dgroups/S=3D\n:HM/A=3D2495208/rand=3D=\r\n576627684&gt; \t\n\n\n  _____  \n\nYahoo! Groups Links\n\n\n*\tTo visit your group on th=\r\ne web, go to:\n &lt;http://groups.yahoo.com/group/archive-crawler/&gt;\nhttp://grou=\r\nps.yahoo.com/group/archive-crawler/\n  \n\n*\tTo unsubscribe from this group, s=\r\nend an email to:\n &lt;mailto:archive-crawler-unsubscribe@yahoogroups.com?subje=\r\nct=3DUnsubscribe&gt;\narchive-crawler-unsubscribe@yahoogroups.com\n  \n\n*\tYour us=\r\ne of Yahoo! Groups is subject to the\n&lt;http://docs.yahoo.com/info/terms/&gt; Ya=\r\nhoo! Terms of Service. \n\n\n\r\n------=_NextPart_000_0002_01C4F4A1.35B4CD50\r\nContent-Type: text/html;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot;&gt;\n&lt;HTML&gt;&lt;HEAD&gt;=\r\n&lt;TITLE&gt;Message&lt;/TITLE&gt;\n&lt;META http-equiv=3DContent-Type content=3D&quot;text/html=\r\n; charset=3Diso-8859-1&quot;&gt;\n&lt;META content=3D&quot;MSHTML 6.00.2800.1476&quot; name=3DGEN=\r\nERATOR&gt;&lt;/HEAD&gt;\n&lt;BODY&gt;\n&lt;DIV&gt;&lt;SPAN class=3D586415509-07012005&gt;&lt;FONT face=3DCo=\r\nurier color=3D#0000ff size=3D2&gt;This \nlooks like a bug in the implementation=\r\n of the ReplayCharSequence interface (both \nof them).&nbsp;The reason this =\r\nslipped by is probably that every class has this \nmethod (inherited from Ob=\r\nject) so the compiler does not remind you to implement \nit when implementin=\r\ng the interface.&nbsp; And since the basic concept of having \na CharSequenc=\r\ne is to avoid working with the entire string noone had encountered \nit unti=\r\nl now.&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=3D586415509-07012005&gt;&lt;FONT face=\r\n=3DCourier color=3D#0000ff \nsize=3D2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN =\r\nclass=3D586415509-07012005&gt;&lt;FONT face=3DCourier color=3D#0000ff \nsize=3D2&gt;B=\r\nelow I&#39;ve&nbsp;included a very simple patch for this bug (not tested for \nM=\r\nultiByteRep....).&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=3D586415509-07012005=\r\n&gt;&lt;FONT face=3DCourier color=3D#0000ff \nsize=3D2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&nbsp;&lt;/DIV&gt;\n=\r\n&lt;DIV&gt;&lt;SPAN class=3D586415509-07012005&gt;&lt;FONT face=3DCourier color=3D#0000ff =\r\n\nsize=3D2&gt;---&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=3D586415509-07012005&gt;&lt;FO=\r\nNT face=3DCourier color=3D#0000ff \nsize=3D2&gt;Index: \nReplayCharSequenceFacto=\r\nry.java&lt;BR&gt;=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=\r\n=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=\r\n=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D&lt;BR&gt;RCS \nfil=\r\ne: \n/cvsroot/archive-crawler/ArchiveOpenCrawler/src/java/org/archive/io/Rep=\r\nlayCharSequenceFactory.java,v&lt;BR&gt;retrieving \nrevision 1.28&lt;BR&gt;diff -u -r1.2=\r\n8 ReplayCharSequenceFactory.java&lt;BR&gt;--- \nReplayCharSequenceFactory.java&nbs=\r\np;21 Oct 2004 01:59:42 -0000&nbsp;1.28&lt;BR&gt;+++ \nReplayCharSequenceFactory.ja=\r\nva&nbsp;7 Jan 2005 10:08:02 -0000&lt;BR&gt;@@ -610,6 \n+610,10 \n@@&lt;BR&gt;&nbsp;&lt;BR&gt;&n=\r\nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \nret=\r\nurn ret.toString();&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \n}&lt;=\r\nBR&gt;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \n&lt;BR&gt;+&nbsp;&nbsp;&nbsp;&nbs=\r\np;&nbsp;&nbsp;&nbsp; public String toString() \n{&lt;BR&gt;+&nbsp;&nbsp;&nbsp;&nbs=\r\np;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return \nsubstring(0,length());=\r\n&lt;BR&gt;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \n}&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nb=\r\nsp; }&lt;BR&gt;&nbsp;&lt;BR&gt;&nbsp;&lt;BR&gt;@@ -1070,5 +1074,9 \n@@&lt;BR&gt;&nbsp;&nbsp;&nbsp;&n=\r\nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \n}&lt;BR&gt;&nbsp;&nbsp;&nbs=\r\np;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \nreturn result;&lt;BR=\r\n&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \n}&lt;BR&gt;+&lt;BR&gt;+&nbsp;&nbsp;&=\r\nnbsp;&nbsp;&nbsp;&nbsp;&nbsp; public String toString() \n{&lt;BR&gt;+&nbsp;&nbsp;&=\r\nnbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return \nsubstring(0,l=\r\nength());&lt;BR&gt;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \n}&lt;BR&gt;&nbsp;&nbsp;=\r\n&nbsp;&nbsp; }&lt;BR&gt;&nbsp;}&lt;BR&gt;---&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=3D586=\r\n415509-07012005&gt;&lt;FONT face=3DCourier color=3D#0000ff \nsize=3D2&gt;&lt;/FONT&gt;&lt;/SPA=\r\nN&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=3D586415509-07012005&gt;&lt;FONT face=3DCourier c=\r\nolor=3D#0000ff size=3D2&gt;- \nKris&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;\n&lt;BLOCKQUOTE \nstyle=3D&quot;P=\r\nADDING-LEFT: 5px; MARGIN-LEFT: 5px; BORDER-LEFT: #0000ff 2px solid; MARGIN-=\r\nRIGHT: 0px&quot;&gt;\n  &lt;DIV&gt;&lt;FONT face=3DCourier&gt;&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV class=3DOutlo=\r\nokMessageHeader lang=3Den-us dir=3Dltr align=3Dleft&gt;&lt;FONT \n  face=3DCourier=\r\n size=3D2&gt;-----Original Message-----&lt;BR&gt;&lt;B&gt;From:&lt;/B&gt; bergmark_d \n  [mailto:=\r\nbergmark@...] &lt;BR&gt;&lt;B&gt;Sent:&lt;/B&gt; 6. jan=FAar 2005 \n  22:02&lt;BR&gt;&lt;B&gt;T=\r\no:&lt;/B&gt; archive-crawler@yahoogroups.com&lt;BR&gt;&lt;B&gt;Subject:&lt;/B&gt; \n  [archive-crawl=\r\ner] ReplayCharSequence&lt;BR&gt;&lt;BR&gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;TT&gt;&lt;BR&gt;&lt;FONT \n  face=3DCourier&gt;=\r\nSo I&#39;ve used Heritrix to download a Web page, and I have&lt;BR&gt;the \n  page con=\r\ntent as a CharSequence (i.e., ReplayCharSequence).&lt;BR&gt;The CharSequence \n  i=\r\nnterface in Java says that its toString()&lt;BR&gt;method should be a string with=\r\n \n  the characters in the same&lt;BR&gt;order as in the CharSequence.&lt;BR&gt;&lt;BR&gt;I do=\r\n not \n  think that ReplayCharSequence.toString() is&lt;BR&gt;correctly implemente=\r\nd.&nbsp; \n  (But I could be wrong.)&lt;BR&gt;&lt;BR&gt;Assume &quot;ReplayCharSequence cs&quot; h=\r\nas been \n  defined.&nbsp; Then&lt;BR&gt;printing out &quot;cs.toString()&quot; gives me (th=\r\ne \n  unexpected)&lt;BR&gt;string,&lt;BR&gt;&quot;org.archive.io.ReplayCharSequenceFactory$By=\r\nteReplayCharSequence...&quot;&lt;BR&gt;&lt;BR&gt;This \n  is not the characters in &quot;cs&quot; but r=\r\nather a string&lt;BR&gt;representing &quot;cs&quot;, I \n  guess.&nbsp; Instead, if I print =\r\n\n  out&lt;BR&gt;&quot;(cs.subSequence(0,cs.length()-1)).toString()&quot; I get the&lt;BR&gt;expec=\r\nted \n  output, namely the characters in &quot;cs&quot;.&nbsp; This is&lt;BR&gt;only because=\r\n the \n  &quot;subSequence&quot; method returns a &lt;BR&gt;&quot;java.lang.CharSequence&quot;, where =\r\ntoString() \n  is correctly&lt;BR&gt;implemented.&lt;BR&gt;&lt;BR&gt;Here is the code I \n  use=\r\nd:&lt;BR&gt;System.out.println(&quot;First 100 bytes of \n  page:&#92;n&quot;&lt;BR&gt;&nbsp;&nbsp;&nb=\r\nsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=\r\n \n  + cs.subSequence(0,99));&nbsp;&nbsp;&nbsp; // GOOD!&lt;BR&gt;String s =3D \n  =\r\ncs.toString();&lt;BR&gt;System.out.println(&quot;String version:&#92;n&quot; + s);&nbsp;&nbsp; =\r\n// \n  BAD!&lt;BR&gt;s =3D (cs.subSequence(0,cs.length()-1)).toString();&nbsp; \n  =\r\n&lt;BR&gt;System.out.println(&quot;Second string version:&#92;n&quot; + s); // \n  GOOD!&lt;BR&gt;&lt;BR&gt;=\r\nD.&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;/FONT&gt;&lt;/TT&gt;&lt;BR&gt;&lt;/BODY&gt;&lt;/HTML&gt;\n\r\n------=_NextPart_000_0002_01C4F4A1.35B4CD50--\r\n\n"}}