{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":251489418,"authorName":"goblin_cz","from":"&quot;goblin_cz&quot; &lt;adam.brokes@...&gt;","profile":"goblin_cz","replyTo":"LIST","senderId":"CB_CfoYazDEmqx6fVkiiqdu7FuiM7tIahqFFRsoorKbaHbP3EQFbyEde61yRdp3mvyHX4uDw74xp_R32xRPCiAjoGPd_H0Mhz8yt","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: Crawling whole czech domain","postDate":"1147180286","msgId":2841,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PGUzcTRkdStxY2c1QGVHcm91cHMuY29tPg==","inReplyToHeader":"PDQ0NUY5QzFBLjcwNzAxMDJAYXJjaGl2ZS5vcmc+"},"prevInTopic":2839,"nextInTopic":2842,"prevInTime":2840,"nextInTime":2842,"topicId":2837,"numMessagesInTopic":5,"msgSnippet":"Hi, thanks a lot for your advices. Today I have started heritrix 1.8.0. With this options JAVA_OPTS= -Xmx1800m on Java(TM) 2 Runtime Environment, Standard","rawEmail":"Return-Path: &lt;adam.brokes@...&gt;\r\nX-Sender: adam.brokes@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 28092 invoked from network); 9 May 2006 13:13:24 -0000\r\nReceived: from unknown (66.218.67.35)\n  by m25.grp.scd.yahoo.com with QMQP; 9 May 2006 13:13:24 -0000\r\nReceived: from unknown (HELO n18a.bullet.scd.yahoo.com) (66.94.237.47)\n  by mta9.grp.scd.yahoo.com with SMTP; 9 May 2006 13:13:24 -0000\r\nComment: DomainKeys? See http://antispam.yahoo.com/domainkeys\r\nReceived: from [66.218.69.2] by n18.bullet.scd.yahoo.com with NNFMP; 09 May 2006 13:11:29 -0000\r\nReceived: from [66.218.66.89] by t2.bullet.scd.yahoo.com with NNFMP; 09 May 2006 13:11:29 -0000\r\nDate: Tue, 09 May 2006 13:11:26 -0000\r\nTo: archive-crawler@yahoogroups.com\r\nMessage-ID: &lt;e3q4du+qcg5@...&gt;\r\nIn-Reply-To: &lt;445F9C1A.7070102@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: &quot;goblin_cz&quot; &lt;adam.brokes@...&gt;\r\nSubject: Re: Crawling whole czech domain\r\nX-Yahoo-Group-Post: member; u=251489418; y=aCucii9s7CkcnAcrIKyORqoHRJTWb6iDGGexNbEmG2rxLGp8\r\nX-Yahoo-Profile: goblin_cz\r\n\r\nHi,\nthanks a lot for your advices. Today I have started heritrix 1.8.0.\nWit=\r\nh this options JAVA_OPTS=3D -Xmx1800m on Java(TM) 2 Runtime\nEnvironment, St=\r\nandard Edition (build 1.5.0_06-b05). After configure\njob according to your =\r\nrecommendations. I try DomainSensitiveFrontier\nto set the number of documen=\r\nts to download (counter-per-domain instead\nof QuotaEnforcer). The seeds lis=\r\nt have got 220 000 seeds. But after\npreparing phase I have got recieveds so=\r\nme alerts:\n\njava.lang.NullPointerException\n        at\norg.archive.crawler.w=\r\nriter.ARCWriterProcessor.write(ARCWriterProcessor.java:457)\n        at\norg.=\r\narchive.crawler.writer.ARCWriterProcessor.writeDns(ARCWriterProcessor.java:=\r\n444)\n        at\norg.archive.crawler.writer.ARCWriterProcessor.innerProcess(=\r\nARCWriterProcessor.java:392)\n        at\norg.archive.crawler.framework.Proce=\r\nssor.process(Processor.java:103)\n        at\norg.archive.crawler.framework.T=\r\noeThread.processCrawlUri(ToeThread.java:306)\n        at org.archive.crawler=\r\n.framework.ToeThread.run(ToeThread.java:153)\n05/09/2006 14:42:32 +0000 SEVE=\r\nRE\norg.archive.crawler.framework.ToeThread recoverableProblem Problem\njava.=\r\nlang.NullPointerException occured when trying to pro\ncess &#39;dns:1-1.cz&#39; at s=\r\ntep ABOUT_TO_BEGIN_PROCESSOR in Archiver\n\n/// 15x (on different host of cou=\r\nrse)\n\n05/09/2006 14:42:37 +0000 SEVERE\norg.archive.crawler.framework.ToeThr=\r\nead run Fatal exception in\nToeThread #14: dns:1-000-000.cz\njava.lang.NullPo=\r\ninterException\n        at\norg.archive.crawler.framework.CrawlController.fre=\r\neReserveMemory(CrawlController.java:1788)\n        at\norg.archive.crawler.fr=\r\namework.ToeThread.seriousError(ToeThread.java:225)\n        at\norg.archive.c=\r\nrawler.framework.ToeThread.processCrawlUri(ToeThread.java:329)\n        at o=\r\nrg.archive.crawler.framework.ToeThread.run(ToeThread.java:153)\n\nand finaly.=\r\n.\n\n14:46:20.991 WARN!!\njava.lang.OutOfMemoryError: unable to create new nat=\r\nive thread\n        at java.lang.Thread.start0(Native Method)\n        at jav=\r\na.lang.Thread.start(Thread.java:574)\n        at\norg.mortbay.util.ThreadPool=\r\n$PoolThread.enterPool(ThreadPool.java:423)\n        at org.mortbay.util.Pool=\r\n.newPondLife(Pool.java:343)\n        at org.mortbay.util.Pool.get(Pool.java:=\r\n279)\n        at org.mortbay.util.ThreadPool.run(ThreadPool.java:345)\n      =\r\n  at\norg.mortbay.util.ThreadedServer$Acceptor.run(ThreadedServer.java:559)\n=\r\n\n14:46:20.993 WARN!! Stopping Acceptor\nServerSocket[addr=3D0.0.0.0/0.0.0.0,=\r\nport=3D0,localport=3D7090]\n\nCan anyone help me with this?\nThanks.\nAB\n\n--- I=\r\nn archive-crawler@yahoogroups.com, Gordon Mohr &lt;gojomo@...&gt; wrote:\n&gt;\n&gt; Adam=\r\n Brokes wrote:\n&gt; &gt; Hallo,\n&gt; &gt; I know the OutOfMemory problem was there ment=\r\nioned many times, but\ni could not find any topic that can solve my problem.=\r\n\n&gt; &gt; I am working on crawling whole czech domain. I have got list of\n220 00=\r\n0 seeds (2.level domains) and I do it by SurtPrefixScope.\n&gt; &gt; Machine specs=\r\n:\n&gt; &gt; 900 MHz PIII\n&gt; &gt; 4GB RAM\n&gt; &gt; 4GB swap\n&gt; &gt; Debian Linux\n&gt; &gt; 32b JVM\n&gt; =\r\n&gt; I started java with JAVA_OPTS=3D&quot; -Xms1500m -Xmx1500m -Xss512k&quot;.\n&gt; &gt; But =\r\nafter few hours i have got alerts with OOM exceptions and\ncrawl stoped. I s=\r\net 5 toethreads and I hope the crawl will go on\nwithout errors.\n&gt; &gt; If it w=\r\nill be necessary I will copy my order file.\n&gt; &gt; So question is: what is the=\r\n most important settings in so big crawl?\n&gt; &gt; Thanks a lot. Adam B.\n&gt; \n&gt; So=\r\nme suggestions regarding the OOME:\n&gt; \n&gt;   - If you are using the ExtractorS=\r\nWF, use the latest release (1.8.0, \n&gt; officially out just today) or disable=\r\n the extractor. The 3rd-party \n&gt; library used can inflate small bitmaps (&lt;1=\r\n00K) in the source SWF to \n&gt; 100MB or more of heap space momentarily, which=\r\n has been implicated in \n&gt; some OOMEs we&#39;ve seen. (By the time the OOME is =\r\ncaught and the heap \n&gt; examined, the temporary giant inflated maps are gone=\r\n, which made this \n&gt; pretty hard to track down.)\n&gt; \n&gt;   - See this blog ent=\r\nry at Sleepycat:\n&gt;     http://blog.sleepycat.com/2006/04/adler32-vs-gc.html=\r\n\n&gt;     In Heritrix 1.8, our launcher script sets this workaround flag \n&gt; al=\r\nways just to be safe. According to Sun, the underlying bug has been \n&gt; fixe=\r\nd in Java 1.4.2_11 and the latest 1.6 beta (&quot;mustang&quot;) releases... \n&gt; but n=\r\not yet any 1.5.0 release. Unfortunately, I believe there is a risk \n&gt; that =\r\nour heavy use of Java&#39;s gzip/deflate functionality would be\nanother \n&gt; way =\r\nto trigger this JVM bug, and there is no easy workaround. So if \n&gt; mysterio=\r\nus OOMEs continue and you are using a 1.5.0 release, consider \n&gt; rolling ba=\r\nck to 1.4.2_11. (We use 1.5.0_06, though.)\n&gt; \n&gt;   - There are several kinds=\r\n of OOMEs -- some have to do with exhaustion \n&gt; of native resources (someti=\r\nmes not even memory) other than the Java \n&gt; heap. Always make note of the e=\r\nxact message. (Though Java 1.6 beta is \n&gt; not yet officially supported for =\r\nHeritrix, if you have a reliably \n&gt; reproduceable OOME its improved OOME st=\r\nacks and \n&gt; -XX:+HeapDumpOnOutOfMemoryError are valuable for a Java head to=\r\n get to \n&gt; the bottom of the problem).\n&gt; \n&gt; - Is there a reason you&#39;ve set =\r\na non-default -Xss stack size? (We&#39;ve \n&gt; only seen StackOverflowErrors very=\r\n rarely, on pathologically odd \n&gt; content, and there&#39;s handling code around=\r\n the places where they might \n&gt; occur that should recover cleanly.) A large=\r\n number here increases the \n&gt; overhead per thread, and this comes out of no=\r\nn-heap memory.. so can \n&gt; sometimes lead to non-heap OOMEs.\n&gt; \n&gt; Other comm=\r\nents:\n&gt; \n&gt; - That should be enough memory to run 200 threads or more, thoug=\r\nh that \n&gt; might be an excessive number for that processor. (The point of \n&gt;=\r\n diminishing or negative returns to a larger number of threads might \n&gt; beg=\r\nin much lower than 200 on your system: it&#39;s still just trial and \n&gt; error t=\r\no discover the best tally for good throughput.)\n&gt; \n&gt; - If you are certain y=\r\nou will end your crawl at a specific size, you \n&gt; might prefer to use a Blo=\r\nom-filter based &#39;already-seen&#39; structure \n&gt; (UriUniqFilter) rather than the=\r\n default BDB approach. See this prior \n&gt; message for details:\n&gt;    http://g=\r\nroups.yahoo.com/group/archive-crawler/message/2450\n&gt; (If you do, you should=\r\n also decrease the BDB cache percentage, which is \n&gt; by default 60% of heap=\r\n, to 30% or lower because it&#39;s no longer doing\none \n&gt; of its biggest jobs a=\r\nnd the Bloom filter needs the space instead.)\n&gt; \n&gt; Hope this helps,\n&gt; \n&gt; - =\r\nGordon\n&gt;\n\n\n\n\n\n"}}