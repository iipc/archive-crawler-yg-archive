{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"IbIWklbUVsG7_4J9c7Q1DOBftPJ78dgEu4sheG4tiNx47Er4Taz852XvWA8Kx_e7J9ebs13OhQjJYgFt3p1uOXCQq8NAWzw","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] Cookie Trouble or Bot Trap?","postDate":"1182458197","msgId":4347,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ2N0FFMTU1LjUwMzA4QGFyY2hpdmUub3JnPg==","inReplyToHeader":"PGI3NmUxZGYwNzA2MjAxOTA3eTJlNjQ0ZjY2bDk5MjhlODIzMGE3YmQwNmZAbWFpbC5nbWFpbC5jb20+","referencesHeader":"PGI3NmUxZGYwNzA2MjAxNzA1djc0MTA2NTg3bWE1NDBhNDhmZjA5ODQyOTZAbWFpbC5nbWFpbC5jb20+CSA8NDY3OUM5RUIuMzA2MDIwMEBhcmNoaXZlLm9yZz4gPGI3NmUxZGYwNzA2MjAxOTA3eTJlNjQ0ZjY2bDk5MjhlODIzMGE3YmQwNmZAbWFpbC5nbWFpbC5jb20+"},"prevInTopic":4337,"nextInTopic":0,"prevInTime":4346,"nextInTime":4348,"topicId":4335,"numMessagesInTopic":4,"msgSnippet":"My best guess would be that the server is switching on the User-Agent value. Try using the same User-Agent as your crawler from another tool -- such as Firefox","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 94621 invoked from network); 21 Jun 2007 20:36:35 -0000\r\nReceived: from unknown (66.218.67.33)\n  by m57.grp.scd.yahoo.com with QMQP; 21 Jun 2007 20:36:35 -0000\r\nReceived: from unknown (HELO mail.archive.org) (207.241.233.246)\n  by mta7.grp.scd.yahoo.com with SMTP; 21 Jun 2007 20:36:34 -0000\r\nReceived: from localhost (localhost [127.0.0.1])\n\tby mail.archive.org (Postfix) with ESMTP id 62F5A14156DA1\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Thu, 21 Jun 2007 13:36:34 -0700 (PDT)\r\nReceived: from mail.archive.org ([127.0.0.1])\n\tby localhost (mail.archive.org [127.0.0.1]) (amavisd-new, port 10024)\n\twith LMTP id 21226-10-49 for &lt;archive-crawler@yahoogroups.com&gt;;\n\tThu, 21 Jun 2007 13:36:33 -0700 (PDT)\r\nReceived: from [192.168.1.203] (c-76-102-230-209.hsd1.ca.comcast.net [76.102.230.209])\n\tby mail.archive.org (Postfix) with ESMTP id 57FF714156BB4\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Thu, 21 Jun 2007 13:36:33 -0700 (PDT)\r\nMessage-ID: &lt;467AE155.50308@...&gt;\r\nDate: Thu, 21 Jun 2007 13:36:37 -0700\r\nUser-Agent: Thunderbird 1.5.0.12 (X11/20070604)\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;b76e1df0706201705v74106587ma540a48ff0984296@...&gt;\t &lt;4679C9EB.3060200@...&gt; &lt;b76e1df0706201907y2e644f66l9928e8230a7bd06f@...&gt;\r\nIn-Reply-To: &lt;b76e1df0706201907y2e644f66l9928e8230a7bd06f@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-Virus-Scanned: Debian amavisd-new at archive.org\r\nX-eGroups-Msg-Info: 1:0:0:0\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] Cookie Trouble or Bot Trap?\r\nX-Yahoo-Group-Post: member; u=137285340; y=UBcktGJVacq15eWnT8T8SWtXGOcqF2eKLqNLB4Br7Fy-\r\nX-Yahoo-Profile: gojomo\r\n\r\nMy best guess would be that the server is switching on the User-Agent \nvalue.\n\nTry using the same User-Agent as your crawler from another tool -- such \nas Firefox with the &#39;User Agent Switcher&#39; extension, or a command-line \nfetcher (like &#39;wget&#39; or &#39;curl&#39;). That would confirm if such switching is \nin effect.\n\n(Which brings up another suggestion I forgot to make about the \nUser-Agent you reported in your previous message: the URL included \nshould contain details about your crawling activity, including contact \ninfo for crawl operators, rather than just the main page for your \ncompany/project.)\n\nThey could also be switching on other request headers which differ \nslightly from browser requests and crawler requests. Another tactic to \ndig deeply into any differences would be to use something like the &#39;Live \nHTTP Headers&#39; Firefox extension to view exactly what is sent to and from \nthe server from the browser, then compare that with the ARC response \nlogs from the crawler.\n\n- Gordon @ IA\n\nAnmol Bhasin wrote:\n&gt; Hi Gordon,\n&gt; \n&gt; Thanks for the response. I am running with ignore-cookies set to false, so\n&gt; my crawl job is cookie-enabled.\n&gt; \n&gt; The trouble however is:  If you look at the URL via a browser the \n&gt; content is\n&gt; totally different from what I get from heritrix.\n&gt; \n&gt; If you look at the URL in the response\n&gt; \n&gt; &lt;META HTTP-EQUIV=&quot;REFRESH&quot; CONTENT=&quot;0; URL=\n&gt; http://www.compusabusiness.com/default.asp?page=http%3A%2F%2Fwww%2Ecompusabusiness%2Ecom%2Fproducts%2Fproduct%5Finfo%2Easp%3Fpfp%3Dcat3%26product%5Fcode%3D50254374%26Pn%3DWSR%5F455%5FBarcode%5FSlot%5FReader%5FKeyboard%5FWedge \n&gt; \n&gt; &quot;&gt;\n&gt; \n&gt; and place it in the browser, the page is totally different from the URL in\n&gt; the seed which is\n&gt; \n&gt; http://www.compusabusiness.com/products/product_info.asp?pfp=cat3&product_code=50254374&Pn=WSR_455_Barcode_Slot_Reader_Keyboard_Wedge \n&gt; \n&gt; \n&gt; which is fine by all means if the content retrieved by heritrix and the\n&gt; browser was the same, but that is not the case. Moreover, I am running with\n&gt; Transclusion hop decide filter setting to 2, as a result I do fetch the URL\n&gt; in the META tag but the content obtained for that is\n&gt; &lt;http://www.compusabusiness.com/products/product_info.asp?pfp=cat3&product_code=50254374&Pn=WSR_455_Barcode_Slot_Reader_Keyboard_Wedge&gt; \n&gt; \n&gt; HTTP/1.1 200 OK\n&gt; Connection: close\n&gt; Date: Wed, 20 Jun 2007 22:31:04 GMT\n&gt; Server: Microsoft-IIS/6.0\n&gt; X-Powered-By: ASP.NET &lt;http://asp.net/&gt;\n&gt; Content-Type: text/html\n&gt; Expires: Tue, 19 Jun 2007 22:31:04 GMT\n&gt; Set-Cookie: ASPSESSIONIDSSTRSACT=PGHJOPGAGJCKMKDLPBBOOJPE; path=/\n&gt; Cache-control: private\n&gt; \n&gt; &lt;html&gt;&lt;head&gt;&lt;META HTTP-EQUIV=&quot;REFRESH&quot; CONTENT=&quot;0;\n&gt; URL=\n&gt; http://www.compusabusiness.com/default.asp?page=http%3A%2F%2Fwww%2Ecompusabusiness%2Ecom%2Fproducts%2Fproduct%5Finfo%2Easp%3Fpfp%3Dcat3%26product%5Fcode%3D50254374%26Pn%3DWSR%5F455%5FBarcode%5FSlot%5FReader%5FKeyboard%5FWedge \n&gt; \n&gt; &quot;&gt;\n&gt; &lt;/head&gt;&lt;/html&gt;\n&gt; \n&gt; which again is not what you see via the browser.  I am not sure what is it\n&gt; about the URL/Cookies that invokes this behavior.\n&gt; \n&gt; I have tried clearing all cookies from my browser and hitting the Seed URL,\n&gt; once the page is loaded the number of cookies the server sets is 3 and not\n&gt; one as observed in the case of crawl job. I have also tried to load the\n&gt; cookies observed in the browser for compusabusiness.com from a Text File to\n&gt; my heritrix crawl job but of no avail.\n&gt; \n&gt; Hope I could explain the problem. Thanks again for the guidance.\n&gt; \n&gt; Anmol\n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; On 6/20/07, Gordon Mohr &lt;gojomo@...&gt; wrote:\n&gt;&gt;\n&gt;&gt;   Hi, Anmol -\n&gt;&gt;\n&gt;&gt; It&#39;s not clear to me what the issue is -- what do you want to happen\n&gt;&gt; that isn&#39;t?\n&gt;&gt;\n&gt;&gt; Heritrix can accept cookies, or not, based on the FetchHTTP\n&gt;&gt; &#39;ignore-cookies&#39; setting. The HTML extractor should find URIs in a META\n&gt;&gt; REFRESH tag and consider them &#39;R&#39; hops; the question is whether the URI\n&gt;&gt; is new (in this case it is) and whether your scope would accept the\n&gt;&gt; discovered URI for subsequent crawling.\n&gt;&gt;\n&gt;&gt; - Gordon @ IA\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; Anmol Bhasin wrote:\n&gt;&gt; &gt; Hi,\n&gt;&gt; &gt;\n&gt;&gt; &gt; I have run into this trouble when crawling www.compusabusiness.com\n&gt;&gt; &gt;\n&gt;&gt; &gt; The Robots file reads\n&gt;&gt; &gt;\n&gt;&gt; &gt; User-agent: *\n&gt;&gt; &gt; Disallow: /shop\n&gt;&gt; &gt; Disallow: /sales_tools\n&gt;&gt; &gt;\n&gt;&gt; &gt; I am running a DecidingScope with SurtPrefixDecide rule. I only use one\n&gt;&gt; seed\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; http://www.compusabusiness.com/products/product_info.asp?pfp=cat3&product_code=50254374&Pn=WSR_455_Barcode_Slot_Reader_Keyboard_Wedge \n&gt;&gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt; as a test and the content retrieved reads:\n&gt;&gt; &gt;\n&gt;&gt; &gt; HTTP/1.1 200 OK\n&gt;&gt; &gt;\n&gt;&gt; &gt; Connection: close\n&gt;&gt; &gt;\n&gt;&gt; &gt; Date: Wed, 20 Jun 2007 22:31:04 GMT\n&gt;&gt; &gt;\n&gt;&gt; &gt; Server: Microsoft-IIS/6.0\n&gt;&gt; &gt;\n&gt;&gt; &gt; X-Powered-By: ASP.NET\n&gt;&gt; &gt;\n&gt;&gt; &gt; Content-Type: text/html\n&gt;&gt; &gt;\n&gt;&gt; &gt; Expires: Tue, 19 Jun 2007 22:31:04 GMT\n&gt;&gt; &gt;\n&gt;&gt; &gt; Set-Cookie: ASPSESSIONIDSSTRSACT=KDJIOPGAOGOLBLDMGCFFFMHP; path=/\n&gt;&gt; &gt;\n&gt;&gt; &gt; Cache-control: private\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt; &lt;html&gt;&lt;head&gt;&lt;META HTTP-EQUIV=&quot;REFRESH&quot; CONTENT=&quot;0;\n&gt;&gt; &gt; URL=\n&gt;&gt; http://www.compusabusiness.com/default.asp?page=http%3A%2F%2Fwww%2Ecompusabusiness%2Ecom%2Fproducts%2Fproduct%5Finfo%2Easp%3Fpfp%3Dcat3%26product%5Fcode%3D50254374%26Pn%3DWSR%5F455%5FBarcode%5FSlot%5FReader%5FKeyboard%5FWedge \n&gt;&gt;\n&gt;&gt; &quot;&gt;\n&gt;&gt; &gt; &lt;/head&gt;&lt;/html&gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt; Initially I thought that the site did not like the User Agent field,\n&gt;&gt; &gt; here is what my user agent reads\n&gt;&gt; &gt;\n&gt;&gt; &gt; USER AGENT:Mozilla/5.0 (compatible; heritrix/1.8.0\n&gt;&gt; &gt; +http://www.business.com) but that doesnt seem to be the case.\n&gt;&gt; &gt;\n&gt;&gt; &gt; Finally, this is an observation related to cookies, If I disable\n&gt;&gt; &gt; cookies in my browser I see a very wierd strange behavior on the URL\n&gt;&gt; &gt; which keeps reloading. Of course Heritrix does not show the same\n&gt;&gt; &gt; behvavior, but the issue could be related due to the\n&gt;&gt; &gt;\n&gt;&gt; &gt; &lt;META HTTP-EQUIV=&quot;REFRESH&quot; CONTENT=&quot;0; which of course the browser\n&gt;&gt; &gt; understands and Heritrix doesn&#39;t\n&gt;&gt; &gt;\n&gt;&gt; &gt; I have tried to save the cookie in a file which reads:\n&gt;&gt; &gt;\n&gt;&gt; &gt; www.compusabusiness.com FALSE / FALSE ASPSESSIONIDSSTRSACT\n&gt;&gt; &gt; KDJIOPGAOGOLBLDMGCFFFMHP\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt; Any Guidance Appreciated.\n&gt;&gt; &gt;\n&gt;&gt; &gt; Anmol\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt; Anmol Bhasin\n&gt;&gt; &gt; Information Retrieval Software Eng.\n&gt;&gt; &gt; Business.com\n&gt;&gt; &gt; Redwood Shores, CA\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt; Yahoo! Groups Links\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt;\n&gt;&gt;  \n&gt;&gt;\n&gt; \n&gt; \n&gt; \n\n\n"}}