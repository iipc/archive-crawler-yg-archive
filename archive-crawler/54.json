{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":95697582,"authorName":"G.B.Reddy","from":"&quot;G.B.Reddy&quot; &lt;reddy@...&gt;","profile":"gbreddysoft","replyTo":"LIST","senderId":"N-f5l18yK68Zo_hPu9rQb89_PofpPsxV7nXSg-dUT5SOlmIqJNFBzxQAwT5_hH22jQ3XAxN9jFuk7-caKCZQr7TwQ9dXx5c42O4zvvA","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] Re: Memory Pool manager update !!","postDate":"1052144163","msgId":54,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDNlZWUwMWMzMTMxMCRkYzQ3NzFhMCRkNTAwYThjMEB0aWRlbHBhcmsuaXNvZnR0ZWNoaW5kaWEuY29tPg==","referencesHeader":"PDIyYWYwMWMzMDk1NCRkNzE4Yjc5MCRkNTAwYThjMEB0aWRlbHBhcmsuaXNvZnR0ZWNoaW5kaWEuY29tPiA8MDBmOTAxYzMwOWUwJDMyZmFiMDAwJDQ4ZjBlZGQxQFdPUktTVEFUSU9OMjE+IDwyNGY3MDFjMzBhODQkMDg3MmZiZTAkZDUwMGE4YzBAdGlkZWxwYXJrLmlzb2Z0dGVjaGluZGlhLmNvbT4gPDMyNTQwMWMzMGVhNSRmZTJlYWI5MCRkNTAwYThjMEB0aWRlbHBhcmsuaXNvZnR0ZWNoaW5kaWEuY29tPg=="},"prevInTopic":53,"nextInTopic":55,"prevInTime":53,"nextInTime":55,"topicId":53,"numMessagesInTopic":6,"msgSnippet":"Gordon, I am presently working on doing buffered i/o over RandomAccessFile on the spilled files. On some of the other issues listed below, please send in your","rawEmail":"Return-Path: &lt;reddy@...&gt;\r\nX-Sender: reddy@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (EGP: mail-8_2_6_6); 5 May 2003 14:19:48 -0000\r\nReceived: (qmail 95688 invoked from network); 5 May 2003 14:19:44 -0000\r\nReceived: from unknown (66.218.66.217)\n  by m4.grp.scd.yahoo.com with QMQP; 5 May 2003 14:19:44 -0000\r\nReceived: from unknown (HELO pub.isofttechindia.com) (203.199.202.17)\n  by mta2.grp.scd.yahoo.com with SMTP; 5 May 2003 14:19:42 -0000\r\nReceived: from ReddyGB (ReddyGB.isofttechindia.com [192.168.0.213])\n\tby pub.isofttechindia.com (8.11.0/8.11.0) with SMTP id h45DrLG12524\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Mon, 5 May 2003 19:23:21 +0530\r\nMessage-ID: &lt;3eee01c31310$dc4771a0$d500a8c0@...&gt;\r\nTo: &lt;archive-crawler@yahoogroups.com&gt;\r\nReferences: &lt;22af01c30954$d718b790$d500a8c0@...&gt; &lt;00f901c309e0$32fab000$48f0edd1@WORKSTATION21&gt; &lt;24f701c30a84$0872fbe0$d500a8c0@...&gt; &lt;325401c30ea5$fe2eab90$d500a8c0@...&gt;\r\nSubject: Re: [archive-crawler] Re: Memory Pool manager update !!\r\nDate: Mon, 5 May 2003 19:46:03 +0530\r\nOrganization: ISoftTech\r\nMIME-Version: 1.0\r\nContent-Type: multipart/alternative;\n\tboundary=&quot;----=_NextPart_000_3EEB_01C3133E.F5F04450&quot;\r\nX-Priority: 3\r\nX-MSMail-Priority: Normal\r\nX-Mailer: Microsoft Outlook Express 5.50.4920.2300\r\nX-MimeOLE: Produced By Microsoft MimeOLE V5.50.4920.2300\r\nX-MailScanner: Found to be clean\r\nX-eGroups-From: &quot;G.B.Reddy&quot; &lt;reddy@...&gt;\r\nFrom: &quot;G.B.Reddy&quot; &lt;reddy@...&gt;\r\nReply-To: &quot;G.B.Reddy&quot; &lt;reddy@...&gt;\r\nX-Yahoo-Group-Post: member; u=95697582\r\nX-Yahoo-Profile: gbreddysoft\r\n\r\n\r\n------=_NextPart_000_3EEB_01C3133E.F5F04450\r\nContent-Type: text/plain;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nGordon,\n\nI am presently working on doing buffered i/o over RandomAccessFile=\r\n on the spilled files. On some of the other issues listed below, please sen=\r\nd in your thoughts about it.\n\n-- I assume that virtual buffer read will hap=\r\npen only after write completes. Meaning, the InputStreams should be asked f=\r\nor only after the output stream is flushed and closed. Is this right or wil=\r\nl other processes keep reading it as and when it is being downloaded. Proba=\r\nbly, some processes might be interested in the header alone; so they need n=\r\not wait till the end.\n\n-- Subclassing the VirtualBuffers : You had said tha=\r\nt a subclasses such as HTTPResponseBuffer could be written with functionali=\r\nties to rewind to the header, rewind to the content-body, etc. How would th=\r\nis be done ? Would we want to take the approach of allowing the internal ou=\r\ntput stream to be subclassed and overriden so that the parsing could happen=\r\n during the download itself and we would find the indices at which the head=\r\ner starts, the body starts, etc during the parsing.\n\nWe may not need a conf=\r\n call this week; an e-mail with your comments would do. \n\nI will not be ava=\r\nilable tomorrow (6th May) since I am visiting an university for campus recr=\r\nuitment. I would not be accessing mails tomorrow. So, please send do not se=\r\nnd mails to my personal id. Send it to the yahoogroups id so that I would c=\r\nome to know through my project manager.\n\nThanks,\nReddy\n\n  ----- Original Me=\r\nssage ----- \n  From: G.B.Reddy \n  To: archive-crawler@yahoogroups.com \n  Se=\r\nnt: Wednesday, April 30, 2003 4:50 AM\n  Subject: Re: [archive-crawler] Re: =\r\nMemory Pool manager update !!\n\n\n  Gordon,\n\n  The MemPoolManager updates are=\r\n checked into the CVS in the ArchiveOpenCrawler module ( in the same org.ar=\r\nchive.crawler.io package ).\n\n  Some of the outstanding issues are\n\n  -- I a=\r\nssume that virtual buffer read will happen only after write completes. Mean=\r\ning, the InputStreams should be asked for only after the output stream is f=\r\nlushed and closed. Is this right or will other processes keep reading it as=\r\n and when it is being downloaded.\n\n  -- Subclassing the VirtualBuffers : Yo=\r\nu had said that a subclasses such as HTTPResponseBuffer could be written wi=\r\nth functionalities to rewind to the header, rewind to the content-body, etc=\r\n. How would this be done ? Would we want to take the approach of allowing t=\r\nhe internal output stream to be subclassed and overriden so that the parsin=\r\ng could happen during the download itself and we would find the indices at =\r\nwhich the header starts, the body starts, etc during the parsing.\n\n  -- Usi=\r\nng a RandomAccessFile for i/o on the spilled file so as to provide seek cap=\r\nability : Operations on this RandomAccessFile needs to be a buffered i/o. N=\r\not sure what would be the optimal size of this buffer. Taking a 4K block fr=\r\nom the pool for the sake of this buffer may be too big. We may have to thin=\r\nk of having some RAMOnlyBuffers allocated from the pool for such purposes. =\r\nThese may be of 1K or 2K size.\n\n  -- In the implementation that is checked =\r\nin, the streams have a close knowledge of the DiskedVirtualBuffer. May have=\r\n to find another way of doing it.\n\n  -- The clarification needed on contigu=\r\nous 8K allocations - Raymie to clarify on my previous mail.\n\n  If possible,=\r\n I would have a quick chat with Raymie sometime late evening today on yahoo=\r\n messenger to discuss these.\n\n  In the mean time, some of the other activit=\r\nies done were.\n\n  -- The complete directory structure created for the Archi=\r\nveOpenCrawler module.\n  -- A Do&#39;s and Don&#39;ts Readme is written and checked =\r\ninto the docs directory of the ArchiveOpenCrawler module. This talks about =\r\nthe notions to be adhered while using this module.\n  -- Made the JAnt build=\r\n.xml file more flexible and configurable so as to make it suitable for runn=\r\ning unit tests.\n  -- As of now, the JAnt build script would run the nightly=\r\n unit testing only if the previous day&#39;s nightly build passes. Will have to=\r\n make it do unit test on the existing latest nightly build.\n  -- Archives l=\r\nast one week unit test results.\n  -- An Unit test summary report would be g=\r\niven in the nightly build mail with a link to the detailed report. Some pro=\r\nblems still exist in getting this work.\n\n  We may have to start planning on=\r\n setting up the &quot;Synthetic crawl environment: ~4 in house machines running =\r\nweb servers&quot;, and the other internet/intranet crawl setups as discussed ear=\r\nlier. \n\n  I would be on leave on 1st of May being our Labour Day.\n\n  Thanks=\r\n,\n  Reddy\n\n    ----- Original Message ----- \n    From: G.B.Reddy \n    To: a=\r\nrchive-crawler@yahoogroups.com \n    Sent: Thursday, April 24, 2003 10:37 PM=\r\n\n    Subject: Re: [archive-crawler] Re: Memory Pool manager attached !!\n\n\n =\r\n   Raymie,\n\n    On the first day we discussed about the memory pool manager=\r\n, we decided that the 8MB big chunk of memory will be broken into pieces of=\r\n 4K each. And the writer would incrementally get 4K blocks one after the ot=\r\nher until he reaches the max 32K. These 4K blocks need not be contiguous. A=\r\nfter the 32K max is reached, the whole of it would be written into a tmp fi=\r\nle and we would procure a contiguous 8K block from the pool. This 8K block =\r\nas we discussed will hold the first 8KB data of the fetched page. Knowing t=\r\nhat Linux uses only a 4KB default page size, we are not very clear why you =\r\nsuggested that we use a contiguous 8K in this case. Can&#39;t it be a non conti=\r\nguous 4K + 4K, so that we can hold the first 4K data in it and use the othe=\r\nr 4K for buffered i/o on the tmp file. If there is any reason behind it bei=\r\nng a contiguous 8K, we will additionally need another 4K to use as a buffer=\r\n for the i/o. If there isn&#39;t any reason, then should the pool manager neces=\r\nsarily support contiguous 8K allocations ?\n\n    Thanks,\n    Reddy\n\n      --=\r\n--- Original Message ----- \n      From: Gordon Mohr \n      To: G.B.Reddy ; =\r\narchive-crawler@yahoogroups.com \n      Sent: Thursday, April 24, 2003 3:05 =\r\nAM\n      Subject: [archive-crawler] Re: Memory Pool manager attached !!\n\n\n =\r\n     Thanks! \n\n      Some thoughts:\n\n      I&#39;d like to approach this part o=\r\nf the system -- buffers/streams for \n      multi-Kb entities across one pro=\r\ncessing cycle -- at three separate \n      levels, in order:\n\n      (1) The =\r\nbasic interface offered to other crawler components,\n          hiding imple=\r\nmentation details.\n\n      (2) The trick of using disk space for large files=\r\n, because\n          it is impractical to keep so many large files in RAM\n  =\r\n        through all processing stages.\n\n      (3) The optimization of using=\r\n recycled internal objects, to \n          minimize garbage collection overh=\r\nead.\n\n      Part (1) needs to be right and relatively constant early; parts=\r\n (2) \n      and (3) can be tweaked down the road -- and I&#39;m reluctant to ev=\r\naluate\n      approaches to (3) just yet, because it is only after seeing th=\r\ne latest \n      Java allocators/garbage-collectors do poorly on a naive imp=\r\nlementation\n      that we&#39;ll be able to make sensible pool-management choic=\r\nes.\n\n      For part (1), please take a look at the abstract classes I&#39;ve pl=\r\naced\n      in the ArchiveOpenCrawler module, src/org/archive/crawler/io [*]=\r\n:\n\n         VirtualBuffer\n         SeekableInputStream\n         SeekableInp=\r\nutSubstream\n\n      I think the &#39;VirtualBuffer&#39; object is useful to tie toge=\r\nther the \n      construction of the data stream and its later use, rather t=\r\nhan \n      using a [Something]OutputStream first and then only at the end a=\r\nsking\n      it for one [Something]InputStream on the results. Also, it bett=\r\ner\n      supports the idea there could be multiple independent InputStreams=\r\n\n      (or CharSequences) on the same read-only buffer. \n\n      Fleshing ou=\r\nt the potential connections between the abstract classes\n      above and th=\r\ne concrete classes you&#39;ve proposed:\n\n        class RewindableSpreadInputStr=\r\neam extends SeekableInputStream\n\n        class DiskedVirtualBuffer extends =\r\nVirtualBuffer {\n          // naive implementation of VirtualBuffer with ass=\r\nociated Streams/CharSequence classes\n          // that is, &quot;level (2)&quot; abov=\r\ne\n          // likely uses a RandomAccessFile to augment any in-memory buff=\r\ner(s)\n          // ... //\n        }\n        \n        class EconomizingDiske=\r\ndVirtualBuffer extends DiskedVirtualBuffer {\n          // recycling/optimiz=\r\nable implementation of VirtualBuffer\n          // that is, &quot;level (3)&quot; abov=\r\ne\n          // somehow utilizes one or more managed MemoryArea instances\n\n =\r\n         public SpreadOutputStream getOutputStream() { /* ... */ }\n        =\r\n  public RewindableSpreadInputStream getInputStream() { /* ... */ }\n       =\r\n }\n\n      Does this make sense to everyone? \n\n      - Gordon\n\n      [*] htt=\r\np://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/archive-crawler/ArchiveOpenCraw=\r\nler/src/org/archive/crawler/io/\n\n      ----- Original Message ----- \n      =\r\nFrom: G.B.Reddy \n      To: Gordon Mohr \n      Sent: Tuesday, April 22, 2003=\r\n 9:57 PM\n      Subject: Memory Pool manager attached !!\n\n\n      Gordon,\n\n  =\r\n    As requested, I am attaching the javadoc/code which we did when Raymie =\r\nwas here in India. Some changes which are to be done are\n\n      - Support f=\r\nor Multiple MemPoolManager instances. (don&#39;t make it static)\n      - Use a =\r\nfree list instead of a bitmap to track the allocated/free areas.\n\n      Tha=\r\nnks,\n      Reddy\n\n\n      To unsubscribe from this group, send an email to:\n=\r\n      archive-crawler-unsubscribe@yahoogroups.com\n\n\n\n      Your use of Yaho=\r\no! Groups is subject to the Yahoo! Terms of Service. \n\n\n        Yahoo! Grou=\r\nps Sponsor \n       \n       \n\n  To unsubscribe from this group, send an emai=\r\nl to:\n  archive-crawler-unsubscribe@yahoogroups.com\n\n\n\n  Your use of Yahoo!=\r\n Groups is subject to the Yahoo! Terms of Service. \n\n\r\n------=_NextPart_000_3EEB_01C3133E.F5F04450\r\nContent-Type: text/html;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot;&gt;\n&lt;HTML&gt;&lt;HEAD&gt;=\r\n\n&lt;META http-equiv=3DContent-Type content=3D&quot;text/html; charset=3Diso-8859-1=\r\n&quot;&gt;\n&lt;META content=3D&quot;MSHTML 5.50.4134.600&quot; name=3DGENERATOR&gt;\n&lt;STYLE&gt;&lt;/STYLE&gt;=\r\n\n&lt;/HEAD&gt;\n&lt;BODY bgColor=3D#ffffff&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Gordon,&lt;=\r\n/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FON=\r\nT face=3DArial size=3D2&gt;I am presently working on doing buffered \ni/o&nbsp;=\r\nover RandomAccessFile on the spilled files. On some of the other issues \nli=\r\nsted below, please send in your thoughts about it.&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT =\r\nface=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial siz=\r\ne=3D2&gt;-- I assume that virtual buffer read will happen \nonly after write co=\r\nmpletes. Meaning, the InputStreams should be asked \nfor&nbsp;only after the=\r\n output stream is flushed and closed. Is this right or \nwill other processe=\r\ns keep reading it as and when it is being downloaded. \nProbably, some proce=\r\nsses might be interested in the header alone; so they need \nnot wait till t=\r\nhe end.&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;=\r\nDIV&gt;&lt;FONT face=3DArial size=3D2&gt;-- Subclassing the VirtualBuffers :&nbsp;Yo=\r\nu had \nsaid that a subclasses such as HTTPResponseBuffer&nbsp;could be writ=\r\nten with \nfunctionalities to rewind to the header, rewind to the content-bo=\r\ndy, etc. How \nwould this be done ? Would we want to take the approach of al=\r\nlowing the internal \noutput stream to be subclassed and overriden so that t=\r\nhe parsing could happen \nduring the download itself&nbsp;and we would&nbsp;=\r\nfind the indices at which the \nheader starts, the body starts, etc during t=\r\nhe parsing.&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DI=\r\nV&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;We may not need a conf call&nbsp;=\r\nthis week; an \ne-mail&nbsp;with your comments&nbsp;would do. &lt;/FONT&gt;&lt;/DIV&gt;\n=\r\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DAria=\r\nl size=3D2&gt;I&nbsp;will not be available tomorrow (6th \nMay)&nbsp;since&nbsp=\r\n;I am visiting an university for campus recruitment. I would \nnot be access=\r\ning mails tomorrow. So, please send do not send mails to my \npersonal id. S=\r\nend it to the yahoogroups id so that I would come to know through \nmy proje=\r\nct manager.&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DI=\r\nV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Thanks,&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3D=\r\nArial size=3D2&gt;Reddy&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&=\r\nnbsp;&lt;/DIV&gt;\n&lt;BLOCKQUOTE \nstyle=3D&quot;PADDING-RIGHT: 0px; PADDING-LEFT: 5px; MA=\r\nRGIN-LEFT: 5px; BORDER-LEFT: #000000 2px solid; MARGIN-RIGHT: 0px&quot;&gt;\n  &lt;DIV =\r\nstyle=3D&quot;FONT: 10pt arial&quot;&gt;----- Original Message ----- &lt;/DIV&gt;\n  &lt;DIV \n  st=\r\nyle=3D&quot;BACKGROUND: #e4e4e4; FONT: 10pt arial; font-color: black&quot;&gt;&lt;B&gt;From:&lt;/=\r\nB&gt; \n  &lt;A title=3Dreddy@... href=3D&quot;mailto:reddy@...&quot;&gt;G.=\r\nB.Reddy&lt;/A&gt; \n  &lt;/DIV&gt;\n  &lt;DIV style=3D&quot;FONT: 10pt arial&quot;&gt;&lt;B&gt;To:&lt;/B&gt; &lt;A \n  ti=\r\ntle=3Darchive-crawler@yahoogroups.com \n  href=3D&quot;mailto:archive-crawler@yah=\r\noogroups.com&quot;&gt;archive-crawler@yahoogroups.com&lt;/A&gt; \n  &lt;/DIV&gt;\n  &lt;DIV style=3D=\r\n&quot;FONT: 10pt arial&quot;&gt;&lt;B&gt;Sent:&lt;/B&gt; Wednesday, April 30, 2003 4:50 \n  AM&lt;/DIV&gt;\n=\r\n  &lt;DIV style=3D&quot;FONT: 10pt arial&quot;&gt;&lt;B&gt;Subject:&lt;/B&gt; Re: [archive-crawler] Re:=\r\n Memory \n  Pool manager update !!&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;=\r\n&lt;/FONT&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&lt;FONT \n  face=3DArial size=3D2&gt;&lt;/=\r\nFONT&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&lt;FONT face=3DArial \n  size=3D2&gt;&lt;/FO=\r\nNT&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&lt;FONT face=3DArial \n  size=3D2&gt;&lt;/FONT=\r\n&gt;&lt;BR&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Gordon,&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;=\r\n&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial s=\r\nize=3D2&gt;The MemPoolManager updates are checked into the \n  CVS in the Archi=\r\nveOpenCrawler module ( in the same org.archive.crawler.io \n  package ).&lt;/FO=\r\nNT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FO=\r\nNT face=3DArial size=3D2&gt;Some of the outstanding issues are&lt;/FONT&gt;&lt;/DIV&gt;\n  =\r\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DAr=\r\nial size=3D2&gt;-- I assume that virtual buffer read will happen \n  only after=\r\n write completes. Meaning, the InputStreams should be asked \n  for&nbsp;onl=\r\ny after the output stream is flushed and closed. Is this right or \n  will o=\r\nther processes keep reading it as and when it is being \n  downloaded.&lt;/FONT=\r\n&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT=\r\n face=3DArial size=3D2&gt;-- Subclassing the VirtualBuffers :&nbsp;You had \n  =\r\nsaid that a subclasses such as HTTPResponseBuffer&nbsp;could be written wit=\r\nh \n  functionalities to rewind to the header, rewind to the content-body, e=\r\ntc. How \n  would this be done ? Would we want to take the approach of allow=\r\ning the \n  internal output stream to be subclassed and overriden so that th=\r\ne parsing \n  could happen during the download itself&nbsp;and we would&nbsp=\r\n;find the \n  indices at which the header starts, the body starts, etc durin=\r\ng the \n  parsing.&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&n=\r\nbsp;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;-- Using a RandomAccessFile f=\r\nor i/o on the \n  spilled file so as to provide seek capability : Operations=\r\n on this \n  RandomAccessFile needs to be a buffered i/o.&nbsp;Not sure what=\r\n would be the \n  optimal size of this buffer. Taking a 4K block from the po=\r\nol for the sake of \n  this buffer may be too big. We may have to think of h=\r\naving some RAMOnlyBuffers \n  allocated from the pool for such purposes. The=\r\nse may be of 1K or 2K \n  size.&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=\r\n=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;-- In the imple=\r\nmentation that is checked in, the \n  streams have a close knowledge of the&=\r\nnbsp;DiskedVirtualBuffer. May have to \n  find another way of doing it.&lt;/FON=\r\nT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FON=\r\nT face=3DArial size=3D2&gt;-- The clarification needed on&nbsp;contiguous 8K \n=\r\n  allocations - Raymie to clarify&nbsp;on my previous mail.&lt;/FONT&gt;&lt;/DIV&gt;\n  =\r\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DAr=\r\nial size=3D2&gt;If possible, I would have a quick chat with \n  Raymie&lt;/FONT&gt;&lt;F=\r\nONT face=3DArial size=3D2&gt; sometime late evening today on yahoo \n  messenge=\r\nr to discuss these.&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;=\r\n&nbsp;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;In the mean time, some of t=\r\nhe other activities \n  done were.&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial si=\r\nze=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;-- The comple=\r\nte directory structure created for \n  the ArchiveOpenCrawler module.&lt;/FONT&gt;=\r\n&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;-- A Do&#39;s and Don&#39;ts Readme is wr=\r\nitten and \n  checked into the&nbsp;docs directory of the&nbsp;&lt;/FONT&gt;&lt;FONT =\r\nface=3DArial \n  size=3D2&gt;ArchiveOpenCrawler module. This talks about the no=\r\ntions to be adhered \n  while using this module.&lt;BR&gt;-- Made the JAnt build.x=\r\nml&nbsp;file more flexible \n  and configurable so as to make it suitable fo=\r\nr running unit tests.&lt;BR&gt;-- As of \n  now, the JAnt build script would run t=\r\nhe nightly unit testing&nbsp;only if the \n  previous day&#39;s nightly build&nb=\r\nsp;passes. Will have to make it do unit test on \n  the existing latest nigh=\r\ntly build.&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;-- Archives last=\r\n one week unit test \n  results.&lt;BR&gt;-- An Unit test summary report would be =\r\ngiven in the nightly build \n  mail with a link to the detailed report.&nbsp=\r\n;Some problems&nbsp;still exist \n  in getting this work.&lt;BR&gt;&lt;/DIV&gt;&lt;/FONT&gt;\n =\r\n &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;We may have to start planning on setting =\r\nup the \n  &quot;Synthetic crawl environment: ~4 in house machines running web se=\r\nrvers&quot;, and \n  the other internet/intranet crawl setups as discussed earlie=\r\nr. &lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n  &lt;=\r\nDIV&gt;&lt;FONT face=3DArial size=3D2&gt;\n  &lt;DIV&gt;&lt;/FONT&gt;&lt;FONT face=3DArial size=3D2&gt;=\r\nI would be on leave on 1st of May being \n  our Labour Day.&lt;/FONT&gt;&lt;/DIV&gt;&lt;/DI=\r\nV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=\r\n=3DArial size=3D2&gt;Thanks,&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;R=\r\neddy&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n  =\r\n&lt;BLOCKQUOTE \n  style=3D&quot;PADDING-RIGHT: 0px; PADDING-LEFT: 5px; MARGIN-LEFT:=\r\n 5px; BORDER-LEFT: #000000 2px solid; MARGIN-RIGHT: 0px&quot;&gt;\n    &lt;DIV style=3D=\r\n&quot;FONT: 10pt arial&quot;&gt;----- Original Message ----- &lt;/DIV&gt;\n    &lt;DIV \n    style=\r\n=3D&quot;BACKGROUND: #e4e4e4; FONT: 10pt arial; font-color: black&quot;&gt;&lt;B&gt;From:&lt;/B&gt; =\r\n\n    &lt;A title=3Dreddy@... href=3D&quot;mailto:reddy@...&quot;&gt;G.B=\r\n.Reddy&lt;/A&gt; \n    &lt;/DIV&gt;\n    &lt;DIV style=3D&quot;FONT: 10pt arial&quot;&gt;&lt;B&gt;To:&lt;/B&gt; &lt;A \n =\r\n   title=3Darchive-crawler@yahoogroups.com \n    href=3D&quot;mailto:archive-craw=\r\nler@yahoogroups.com&quot;&gt;archive-crawler@yahoogroups.com&lt;/A&gt; \n    &lt;/DIV&gt;\n    &lt;D=\r\nIV style=3D&quot;FONT: 10pt arial&quot;&gt;&lt;B&gt;Sent:&lt;/B&gt; Thursday, April 24, 2003 10:37 \n=\r\n    PM&lt;/DIV&gt;\n    &lt;DIV style=3D&quot;FONT: 10pt arial&quot;&gt;&lt;B&gt;Subject:&lt;/B&gt; Re: [archi=\r\nve-crawler] Re: \n    Memory Pool manager attached !!&lt;/DIV&gt;\n    &lt;DIV&gt;&lt;FONT f=\r\nace=3DArial size=3D2&gt;&lt;/FONT&gt;&lt;FONT face=3DArial \nsize=3D2&gt;&lt;/FONT&gt;&lt;BR&gt;&lt;/DIV&gt;\n=\r\n    &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Raymie,&lt;/FONT&gt;&lt;/DIV&gt;\n    &lt;DIV&gt;&lt;FONT fa=\r\nce=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n    &lt;DIV&gt;&lt;FONT face=3DArial size=3D=\r\n2&gt;On the first day we discussed about the memory \n    pool manager, we deci=\r\nded that the 8MB big chunk of memory will be broken \n    into pieces of 4K =\r\neach. And the writer would incrementally get 4K blocks one \n    after the o=\r\nther until he reaches the max 32K. These 4K blocks need not be \n    contigu=\r\nous. &lt;/FONT&gt;&lt;FONT face=3DArial size=3D2&gt;After the 32K max is \n    reached,&=\r\nnbsp;the whole of it would be written into a tmp file and we would \n    pro=\r\ncure a contiguous 8K block from the pool. This 8K block as we discussed \n  =\r\n  will hold the first 8KB data of the fetched page. &lt;/FONT&gt;&lt;FONT face=3DAri=\r\nal \n    size=3D2&gt;Knowing that Linux uses only a 4KB default page size, we a=\r\nre not very \n    clear why you suggested&nbsp;that we use a contiguous 8K&n=\r\nbsp;in this case. \n    Can&#39;t it be a non contiguous 4K + 4K,&nbsp;so that w=\r\ne can hold the first 4K \n    data in it and use the other 4K for buffered i=\r\n/o on the tmp file. If there \n    is any reason behind it being a contiguou=\r\ns 8K, we will additionally need \n    another 4K to use as a buffer for the =\r\ni/o. If there isn&#39;t any reason, then \n    should the pool manager necessari=\r\nly support contiguous 8K allocations \n    ?&lt;/FONT&gt;&lt;/DIV&gt;\n    &lt;DIV&gt;&lt;FONT fac=\r\ne=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n    &lt;DIV&gt;&lt;FONT face=3DArial size=3D2=\r\n&gt;Thanks,&lt;/FONT&gt;&lt;/DIV&gt;\n    &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Reddy&lt;/FONT&gt;&lt;/DI=\r\nV&gt;\n    &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n    &lt;BLOCKQUOTE=\r\n \n    style=3D&quot;PADDING-RIGHT: 0px; PADDING-LEFT: 5px; MARGIN-LEFT: 5px; BOR=\r\nDER-LEFT: #000000 2px solid; MARGIN-RIGHT: 0px&quot;&gt;\n      &lt;DIV style=3D&quot;FONT: =\r\n10pt arial&quot;&gt;----- Original Message ----- &lt;/DIV&gt;\n      &lt;DIV \n      style=3D&quot;=\r\nBACKGROUND: #e4e4e4; FONT: 10pt arial; font-color: black&quot;&gt;&lt;B&gt;From:&lt;/B&gt; \n   =\r\n   &lt;A title=3Dgojomo@... href=3D&quot;mailto:gojomo@...&quot;&gt;Gordon =\r\n\n      Mohr&lt;/A&gt; &lt;/DIV&gt;\n      &lt;DIV style=3D&quot;FONT: 10pt arial&quot;&gt;&lt;B&gt;To:&lt;/B&gt; &lt;A =\r\ntitle=3Dreddy@... \n      href=3D&quot;mailto:reddy@...&quot;&gt;G.B.=\r\nReddy&lt;/A&gt; ; &lt;A \n      title=3Darchive-crawler@yahoogroups.com \n      href=\r\n=3D&quot;mailto:archive-crawler@yahoogroups.com&quot;&gt;archive-crawler@yahoogroups.com=\r\n&lt;/A&gt; \n      &lt;/DIV&gt;\n      &lt;DIV style=3D&quot;FONT: 10pt arial&quot;&gt;&lt;B&gt;Sent:&lt;/B&gt; Thurs=\r\nday, April 24, 2003 3:05 \n      AM&lt;/DIV&gt;\n      &lt;DIV style=3D&quot;FONT: 10pt ari=\r\nal&quot;&gt;&lt;B&gt;Subject:&lt;/B&gt; [archive-crawler] Re: Memory \n      Pool manager attach=\r\ned !!&lt;/DIV&gt;\n      &lt;DIV&gt;&lt;BR&gt;&lt;/DIV&gt;&lt;TT&gt;Thanks! &lt;BR&gt;&lt;BR&gt;Some thoughts:&lt;BR&gt;&lt;BR&gt;=\r\nI&#39;d like to \n      approach this part of the system -- buffers/streams for =\r\n&lt;BR&gt;multi-Kb \n      entities across one processing cycle -- at three separa=\r\nte &lt;BR&gt;levels, in \n      order:&lt;BR&gt;&lt;BR&gt;(1) The basic interface offered to o=\r\nther crawler \n      components,&lt;BR&gt;&nbsp;&nbsp;&nbsp; hiding implementation=\r\n \n      details.&lt;BR&gt;&lt;BR&gt;(2) The trick of using disk space for large files, =\r\n\n      because&lt;BR&gt;&nbsp;&nbsp;&nbsp; it is impractical to keep so many larg=\r\ne \n      files in RAM&lt;BR&gt;&nbsp;&nbsp;&nbsp; through all processing \n      s=\r\ntages.&lt;BR&gt;&lt;BR&gt;(3) The optimization of using recycled internal objects, to \n=\r\n      &lt;BR&gt;&nbsp;&nbsp;&nbsp; minimize garbage collection overhead.&lt;BR&gt;&lt;BR&gt;P=\r\nart \n      (1) needs to be right and relatively constant early; parts (2) &lt;=\r\nBR&gt;and (3) \n      can be tweaked down the road -- and I&#39;m reluctant to \n   =\r\n   evaluate&lt;BR&gt;approaches to (3) just yet, because it is only after seeing =\r\n\n      the latest &lt;BR&gt;Java allocators/garbage-collectors do poorly on a nai=\r\nve \n      implementation&lt;BR&gt;that we&#39;ll be able to make sensible pool-manage=\r\nment \n      choices.&lt;BR&gt;&lt;BR&gt;For part (1), please take a look at the abstrac=\r\nt classes \n      I&#39;ve placed&lt;BR&gt;in the ArchiveOpenCrawler module, \n      sr=\r\nc/org/archive/crawler/io [*]:&lt;BR&gt;&lt;BR&gt;&nbsp;&nbsp; \n      VirtualBuffer&lt;BR&gt;&=\r\nnbsp;&nbsp; SeekableInputStream&lt;BR&gt;&nbsp;&nbsp; \n      SeekableInputSubstre=\r\nam&lt;BR&gt;&lt;BR&gt;I think the &#39;VirtualBuffer&#39; object is useful \n      to tie togeth=\r\ner the &lt;BR&gt;construction of the data stream and its later use, \n      rather=\r\n than &lt;BR&gt;using a [Something]OutputStream first and then only at the \n     =\r\n end asking&lt;BR&gt;it for one [Something]InputStream on the results. Also, it \n=\r\n      better&lt;BR&gt;supports the idea there could be multiple independent \n    =\r\n  InputStreams&lt;BR&gt;(or CharSequences) on the same read-only buffer. \n      &lt;=\r\nBR&gt;&lt;BR&gt;Fleshing out the potential connections between the abstract \n      c=\r\nlasses&lt;BR&gt;above and the concrete classes you&#39;ve proposed:&lt;BR&gt;&lt;BR&gt;&nbsp; \n  =\r\n    class RewindableSpreadInputStream extends \n      SeekableInputStream&lt;BR=\r\n&gt;&lt;BR&gt;&nbsp; class DiskedVirtualBuffer extends \n      VirtualBuffer {&lt;BR&gt;&nb=\r\nsp;&nbsp;&nbsp; // naive implementation of \n      VirtualBuffer with associ=\r\nated Streams/CharSequence \n      classes&lt;BR&gt;&nbsp;&nbsp;&nbsp; // that is, =\r\n&quot;level (2)&quot; \n      above&lt;BR&gt;&nbsp;&nbsp;&nbsp; // likely uses a RandomAcces=\r\nsFile to augment \n      any in-memory buffer(s)&lt;BR&gt;&nbsp;&nbsp;&nbsp; // ..=\r\n. //&lt;BR&gt;&nbsp; \n      }&lt;BR&gt;&nbsp; &lt;BR&gt;&nbsp; class EconomizingDiskedVirtual=\r\nBuffer extends \n      DiskedVirtualBuffer {&lt;BR&gt;&nbsp;&nbsp;&nbsp; // recycl=\r\ning/optimizable \n      implementation of VirtualBuffer&lt;BR&gt;&nbsp;&nbsp;&nbsp=\r\n; // that is, &quot;level \n      (3)&quot; above&lt;BR&gt;&nbsp;&nbsp;&nbsp; // somehow uti=\r\nlizes one or more managed \n      MemoryArea instances&lt;BR&gt;&lt;BR&gt;&nbsp;&nbsp;&n=\r\nbsp; public SpreadOutputStream \n      getOutputStream() { /* ... */ }&lt;BR&gt;&n=\r\nbsp;&nbsp;&nbsp; public \n      RewindableSpreadInputStream getInputStream()=\r\n { /* ... */ }&lt;BR&gt;&nbsp; \n      }&lt;BR&gt;&lt;BR&gt;Does this make sense to everyone? =\r\n&lt;BR&gt;&lt;BR&gt;- Gordon&lt;BR&gt;&lt;BR&gt;[*] &lt;A \n      href=3D&quot;http://cvs.sourceforge.net/cg=\r\ni-bin/viewcvs.cgi/archive-crawler/ArchiveOpenCrawler/src/org/archive/crawle=\r\nr/io/&quot;&gt;http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/archive-crawler/Archi=\r\nveOpenCrawler/src/org/archive/crawler/io/&lt;/A&gt;&lt;BR&gt;&lt;BR&gt;----- \n      Original =\r\nMessage ----- &lt;BR&gt;From: G.B.Reddy &lt;BR&gt;To: Gordon Mohr &lt;BR&gt;Sent: \n      Tues=\r\nday, April 22, 2003 9:57 PM&lt;BR&gt;Subject: Memory Pool manager attached \n     =\r\n !!&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Gordon,&lt;BR&gt;&lt;BR&gt;As requested, I am attaching the javadoc/code=\r\n \n      which we did when Raymie was here in India. Some changes which are =\r\nto be \n      done are&lt;BR&gt;&lt;BR&gt;- Support for Multiple MemPoolManager instance=\r\ns. (don&#39;t \n      make it static)&lt;BR&gt;- Use a free list instead of a bitmap t=\r\no track the \n      allocated/free areas.&lt;BR&gt;&lt;BR&gt;Thanks,&lt;BR&gt;Reddy&lt;BR&gt;&lt;/TT&gt;&lt;B=\r\nR&gt;&lt;BR&gt;&lt;TT&gt;To \n      unsubscribe from this group, send an email \n      to:&lt;B=\r\nR&gt;archive-crawler-unsubscribe@yahoogroups.com&lt;BR&gt;&lt;BR&gt;&lt;/TT&gt;&lt;BR&gt;&lt;BR&gt;&lt;TT&gt;Your =\r\n\n      use of Yahoo! Groups is subject to the &lt;A \n      href=3D&quot;http://docs=\r\n.yahoo.com/info/terms/&quot;&gt;Yahoo! Terms of Service&lt;/A&gt;.&lt;/TT&gt; \n      &lt;BR&gt;&lt;/BLOC=\r\nKQUOTE&gt;&lt;/BLOCKQUOTE&gt;&lt;BR&gt;&lt;BR&gt;&lt;TT&gt;To \n  unsubscribe from this group, send an =\r\nemail \n  to:&lt;BR&gt;archive-crawler-unsubscribe@yahoogroups.com&lt;BR&gt;&lt;BR&gt;&lt;/TT&gt;&lt;BR=\r\n&gt;&lt;BR&gt;&lt;TT&gt;Your \n  use of Yahoo! Groups is subject to the &lt;A \n  href=3D&quot;http:=\r\n//docs.yahoo.com/info/terms/&quot;&gt;Yahoo! Terms of Service&lt;/A&gt;.&lt;/TT&gt; \n&lt;BR&gt;&lt;/BLOC=\r\nKQUOTE&gt;&lt;/BODY&gt;&lt;/HTML&gt;\n\r\n------=_NextPart_000_3EEB_01C3133E.F5F04450--\r\n\n"}}