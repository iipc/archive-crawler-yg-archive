{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":168599281,"authorName":"stack","from":"stack &lt;stack@...&gt;","profile":"stackarchiveorg","replyTo":"LIST","senderId":"ox3S_tCSuXBsJZQnJlOgMRhlOjnca3sPIKuPGOhVEu23qhVr-ZgGutMGyovhZ7SQLGyoEJyQIAJJVW8jZw-wCQ","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] DecidingScope","postDate":"1124493786","msgId":2133,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQzMDY2OURBLjQwNzA3MDZAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGRlNWQxNCtyaWUwQGVHcm91cHMuY29tPg==","referencesHeader":"PGRlNWQxNCtyaWUwQGVHcm91cHMuY29tPg=="},"prevInTopic":2131,"nextInTopic":0,"prevInTime":2132,"nextInTime":2134,"topicId":2131,"numMessagesInTopic":2,"msgSnippet":"... A new rule would probably be best (Rules should be small, coherent and unambigious so its clear whats going to happen when their assembled into deciding","rawEmail":"Return-Path: &lt;stack@...&gt;\r\nX-Sender: stack@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 68592 invoked from network); 19 Aug 2005 23:32:23 -0000\r\nReceived: from unknown (66.218.66.216)\n  by m32.grp.scd.yahoo.com with QMQP; 19 Aug 2005 23:32:23 -0000\r\nReceived: from unknown (HELO ia00524.archive.org) (207.241.224.172)\n  by mta1.grp.scd.yahoo.com with SMTP; 19 Aug 2005 23:32:23 -0000\r\nReceived: (qmail 22117 invoked by uid 100); 19 Aug 2005 23:32:19 -0000\r\nReceived: from adsl-71-130-102-78.dsl.pltn13.pacbell.net (HELO ?192.168.1.8?) (stack@...@71.130.102.78)\n  by mail-dev.archive.org with SMTP; 19 Aug 2005 23:32:19 -0000\r\nMessage-ID: &lt;430669DA.4070706@...&gt;\r\nDate: Fri, 19 Aug 2005 16:23:06 -0700\r\nUser-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.8) Gecko/20050513 Debian/1.7.8-1\r\nX-Accept-Language: en\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;de5d14+rie0@...&gt;\r\nIn-Reply-To: &lt;de5d14+rie0@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-Spam-DCC: : \r\nX-Spam-Checker-Version: SpamAssassin 2.63 (2004-01-11) on ia00524.archive.org\r\nX-Spam-Level: \r\nX-Spam-Status: No, hits=-90.0 required=7.0 tests=AWL,USER_IN_WHITELIST \n\tautolearn=no version=2.63\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: stack &lt;stack@...&gt;\r\nSubject: Re: [archive-crawler] DecidingScope\r\nX-Yahoo-Group-Post: member; u=168599281; y=9N0bkKdsTOfiwxWBC-yRObnhXhUPfVfbCj2DNXzRk239FcU3GpfoU6qJ\r\nX-Yahoo-Profile: stackarchiveorg\r\n\r\nryanatl wrote:\n\n&gt; After fighting with DomainScope, DSF (max-docs-per-domain), and\n&gt; SurtPrefixScope to get my desired crawl behavior (and speed), I\n&gt; started working with DecidingScope, which definitly provides the most\n&gt; flexibility.\n&gt;\n&gt; That brings about my question.  It seems like SurtPrefixedDecideRule\n&gt; could be extended with a max-docs-per-surt option?  Or would this need\n&gt; to be an entirely seperate Rule?  \n\nA new rule would probably be best (Rules should be small, coherent and \nunambigious so its clear whats going to happen when their assembled into \ndeciding rule sequences).\n\n&gt; Seems like this would carry through\n&gt; to allow max-documents-per-surt, per-domain, per-host.\n&gt;\n&gt; Guess you&#39;d need a hash (memory or disk?) based on the SURT to track\n&gt; doc counts for each surt?  The REJECT/ACCEPT conditions would then\n&gt; have to be based SURT match and (max-documents-per-surt = 0 or\n&gt; surt_count &lt;= max-documents-per-surt)?\n&gt;\nSounds good.\n\nIf you want to do disk backed (Recommended), use our BigMap \nimplementation. See StatisticsTracker keeping counts for hosts for \nexample usage.  See how hostsDistribution, hostsBytes, and \nhostsLastFinished are done in the statistics tracker: \nhttp://crawler.archive.org/xref/org/archive/crawler/deciderules/DecideRuleSequenceTest.html\n\nThe DecideRuleSequenceTest might be of use when developing your rule: \nhttp://crawler.archive.org/xref/org/archive/crawler/deciderules/DecideRuleSequenceTest.html.   \nAdd a test to this unit test class that exercises your new rule.  DRST \ntakes care of setting up context for you which can be a bit of a pain.\n\nGood luck.\nSt.Ack\n\n&gt;\n&gt;\n&gt; ------------------------------------------------------------------------\n&gt; YAHOO! GROUPS LINKS\n&gt;\n&gt;     *  Visit your group &quot;archive-crawler\n&gt;       &lt;http://groups.yahoo.com/group/archive-crawler&gt;&quot; on the web.\n&gt;        \n&gt;     *  To unsubscribe from this group, send an email to:\n&gt;        archive-crawler-unsubscribe@yahoogroups.com\n&gt;       &lt;mailto:archive-crawler-unsubscribe@yahoogroups.com?subject=Unsubscribe&gt;\n&gt;        \n&gt;     *  Your use of Yahoo! Groups is subject to the Yahoo! Terms of\n&gt;       Service &lt;http://docs.yahoo.com/info/terms/&gt;.\n&gt;\n&gt;\n&gt; ------------------------------------------------------------------------\n&gt;\n\n\n"}}