{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":254719850,"authorName":"steve@archive.org","from":"&quot;steve@...&quot; &lt;steve@...&gt;","profile":"stearcorg","replyTo":"LIST","senderId":"E8jwORyDR2wh1DGaj69kbtym6qkLxFqD7rd20z3I_9FyCUpPuF2L8lGmkb2XSlOjIQhvB54dLd4YtMV3JmIkguFSx3ByvMnNMwJmFcBa","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] Re: weird content-type in WARC","postDate":"1276802872","msgId":6580,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDRDMUE3NzM4LjQwODAxMDVAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGh2ZGphcCtrYmp0QGVHcm91cHMuY29tPg==","referencesHeader":"PGh2ZGphcCtrYmp0QGVHcm91cHMuY29tPg=="},"prevInTopic":6579,"nextInTopic":6581,"prevInTime":6579,"nextInTime":6581,"topicId":6219,"numMessagesInTopic":8,"msgSnippet":"you want to examine the HTTP header Content-Type contained _within_ the WARC record, rather than the WARC header Content-Type. the crawl-report reports HTTP","rawEmail":"Return-Path: &lt;steve@...&gt;\r\nX-Sender: steve@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 70149 invoked from network); 17 Jun 2010 19:27:55 -0000\r\nX-Received: from unknown (66.196.94.106)\n  by m4.grp.sp2.yahoo.com with QMQP; 17 Jun 2010 19:27:55 -0000\r\nX-Received: from unknown (HELO mail.archive.org) (207.241.231.239)\n  by mta2.grp.re1.yahoo.com with SMTP; 17 Jun 2010 19:27:54 -0000\r\nX-Received: from localhost (localhost [127.0.0.1])\n\tby mail.archive.org (Postfix) with ESMTP id B16C130D9C\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Thu, 17 Jun 2010 12:27:53 -0700 (PDT)\r\nX-Received: from mail.archive.org ([127.0.0.1])\n\tby localhost (mail.archive.org [127.0.0.1]) (amavisd-new, port 10024)\n\twith LMTP id RUJcVBgP3AMk for &lt;archive-crawler@yahoogroups.com&gt;;\n\tThu, 17 Jun 2010 12:27:52 -0700 (PDT)\r\nX-Received: from SiznaxMBP.local (router300.sf.archive.org [208.70.27.190])\n\tby mail.archive.org (Postfix) with ESMTPSA id 7421F30253\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Thu, 17 Jun 2010 12:27:52 -0700 (PDT)\r\nMessage-ID: &lt;4C1A7738.4080105@...&gt;\r\nDate: Thu, 17 Jun 2010 12:27:52 -0700\r\nUser-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.1.9) Gecko/20100317 Thunderbird/3.0.4\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;hvdjap+kbjt@...&gt;\r\nIn-Reply-To: &lt;hvdjap+kbjt@...&gt;\r\nContent-Type: text/plain; charset=windows-1252; format=flowed\r\nContent-Transfer-Encoding: 8bit\r\nFrom: &quot;steve@...&quot; &lt;steve@...&gt;\r\nSubject: Re: [archive-crawler] Re: weird content-type in WARC\r\nX-Yahoo-Group-Post: member; u=254719850; y=8id_meMpv5fuvZeUYQJF7fNbiBquJwyiFqrNHfZsGYzL\r\nX-Yahoo-Profile: stearcorg\r\n\r\nyou want to examine the HTTP header Content-Type contained\n_within_ the WARC record, rather than the WARC header\nContent-Type.\n\nthe crawl-report reports HTTP header Content-Type(s). WARC files\nalso contain WARC header Content-Type(s) as eluded to by Erik.\nthere will be a request, response, and metadata WARC record\nheader for each target-URI, which also contain their own\nContent-Type field.\n\ne.g. for &quot;WARC-Target-URI: http://www.archive.org/&quot; the\nfollowing &quot;Content-Type&quot; entries will be reported in a WARC\nrecord (with other selected fields):\n\n    WARC/1.0\n    WARC-Type: request\n    WARC-Target-URI: http://www.archive.org/\n    Content-Type: application/http; msgtype=request\n    ...\n----\n    WARC/1.0\n    WARC-Type: response\n    WARC-Target-URI: http://www.archive.org/\n    Content-Type: application/http; msgtype=response\n    ...\n\n    HTTP/1.1 200 OK\n    Server: nginx/0.8.32\n    Date: Thu, 17 Jun 2010 18:39:26 GMT\n=&gt; Content-Type: text/html; charset=UTF-8\n    X-Powered-By: PHP/5.2.6-3ubuntu4.5\n    ...\n----\n    WARC/1.0\n    WARC-Type: metadata\n    WARC-Target-URI: http://www.archive.org/\n    Content-Type: application/warc-fields\n    ...\n\nyou can corroborate your crawl reports and WARC, by reading\nthe WARC file(s) directly, e.g.\n\n   $ grep text/html mimetype-report.txt\n     28 502921 text/html\n   $ zcat warc.gz | grep &quot;^Content-Type: text/html&quot; | wc -l\n     28\n\norg.archive.io.ArchiveRecordHeader.getMimetype() should report\nthe mimetype you&#39;re interested in.\n\nhope that helps.\n\n/steve@...\n\n\n\nOn 6/17/10 9:43 AM, mkhabsa wrote:\n&gt;\n&gt;\n&gt; I&#39;m having the same problem here, though with Heritrix 1.14.4 after\n&gt; doing a shallow crawl. The crawl report shows more than 300 files with\n&gt; mime-type: text/html. But processing the warc records is returning\n&gt; something like: &quot;application/http; msgtype=request&quot; for almost any URL\n&gt; even if it&#39;s text/html.\n&gt; My code is similar to Claudio&#39;s.\n&gt;\n&gt; Anybody with experience on parsing WARCRecords?\n&gt;\n&gt; --- In archive-crawler@yahoogroups.com\n&gt; &lt;mailto:archive-crawler%40yahoogroups.com&gt;, Erik Hetzner\n&gt; &lt;erik.hetzner@...&gt; wrote:\n&gt;  &gt;\n&gt;  &gt; At Mon, 14 Dec 2009 19:23:19 +0100,\n&gt;  &gt; Claudio Martella wrote:\n&gt;  &gt; &gt;\n&gt;  &gt; &gt; Hello,\n&gt;  &gt; &gt;\n&gt;  &gt; &gt; I&#39;ve warchived a site with heritrix 3.0. Now, with my own java program\n&gt;  &gt; &gt; i&#39;m trying to put the content into my solr index server.\n&gt;  &gt; &gt;\n&gt;  &gt; &gt; The actual code prints unexpected (to me) results:\n&gt;  &gt; &gt;\n&gt;  &gt; &gt;\n&gt;  &gt; &gt; ArchiveReader r = WARCReaderFactory.get(arcFile);\n&gt;  &gt; &gt; r.setDigest(true);\n&gt;  &gt; &gt; for (ArchiveRecord rec : r) {\n&gt;  &gt; &gt; if (rec != null) {\n&gt;  &gt; &gt; ArchiveRecordHeader meta = rec.getHeader();\n&gt;  &gt; &gt; System.out.println(meta.getUrl() + &quot;: &quot;+\n&gt;  &gt; &gt; meta.getMimetype().trim());\n&gt;  &gt; &gt; ...\n&gt;  &gt; &gt;\n&gt;  &gt; &gt; which prints, i.e.:\n&gt;  &gt; &gt;\n&gt;  &gt; &gt; http://www.tis.bz.it/doc-bereiche/gz_doc/pic/gruenderunt/gikispy.jpg:\n&gt;  &gt; &gt; application/http; msgtype=response\n&gt;  &gt; &gt; http://www.tis.bz.it/doc-bereiche/gz_doc/pic/gruenderunt/gikispy.jpg:\n&gt;  &gt; &gt; application/http; msgtype=request\n&gt;  &gt; &gt; http://www.tis.bz.it/doc-bereiche/gz_doc/pic/gruenderunt/gikispy.jpg:\n&gt;  &gt; &gt; application/warc-fields\n&gt;  &gt; &gt;\n&gt;  &gt; &gt; which is weird as the mime-type is application/http (what is it?) for a\n&gt;  &gt; &gt; jpg, PLUS i have three records for each URL.\n&gt;  &gt; &gt;\n&gt;  &gt; &gt; Any idea?\n&gt;  &gt;\n&gt;  &gt; Hi Claudio -\n&gt;  &gt;\n&gt;  &gt; See information about the WARC specification [1] for why it contains 3\n&gt;  &gt; records for each URL. Heritrix stores the complete HTTP request and\n&gt;  &gt; response for each URL fetched, plus additional information. Each is\n&gt;  &gt; stored in a different record.\n&gt;  &gt;\n&gt;  &gt; As for how to deal with these using ArchiveReader, I am not sure. I\n&gt;  &gt; have only dealt with ARC files in Heritrix. If you simply want to\n&gt;  &gt; index the first step would be ignoring records with mimetype\n&gt;  &gt; “application/http; msgtype=request” and\n&gt; “application/warc-fields”.\n&gt;  &gt; After that you would need to parse the record.\n&gt;  &gt;\n&gt;  &gt; 1. http://www.digitalpreservation.gov/formats/fdd/fdd000236.shtml\n&gt;  &gt;\n&gt;  &gt; best,\n&gt;  &gt; Erik Hetzner\n&gt;  &gt;\n&gt;  &gt; ;; Erik Hetzner, California Digital Library\n&gt;  &gt; ;; gnupg key id: 1024D/01DB07E3\n&gt;  &gt;\n\n"}}