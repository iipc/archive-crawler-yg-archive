{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":208281025,"authorName":"Christoph Spielmann","from":"Christoph Spielmann &lt;spielc@...&gt;","profile":"spielc","replyTo":"LIST","senderId":"7bqn3vUvAfMK3UFP8EMOUWfV_eVQhbq_q9o_55AKZFsSz7rs6byV3exaWfE69lnRXuyEHi1M7RTGlpe8Zv5f2iFA9r1WY-kPb1NY2UY","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] Re: Size of URI","postDate":"1106664169","msgId":1423,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDIwMDUwMTI1MTQ0MjQ5LjQ2NDEucW1haWxAd2ViNDIyMDQubWFpbC55YWhvby5jb20+","inReplyToHeader":"PGNza2VpaSs5cjVuQGVHcm91cHMuY29tPg=="},"prevInTopic":1374,"nextInTopic":0,"prevInTime":1422,"nextInTime":1424,"topicId":1367,"numMessagesInTopic":6,"msgSnippet":"Ok umm well no i didn T check for negative Values so maybe that S why heritrix said bye-bye. The problem is i have no hertrix_out.log because of all the","rawEmail":"Return-Path: &lt;spielc@...&gt;\r\nX-Sender: spielc@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 55064 invoked from network); 25 Jan 2005 14:42:49 -0000\r\nReceived: from unknown (66.218.66.166)\n  by m24.grp.scd.yahoo.com with QMQP; 25 Jan 2005 14:42:49 -0000\r\nReceived: from unknown (HELO web42204.mail.yahoo.com) (66.218.93.205)\n  by mta5.grp.scd.yahoo.com with SMTP; 25 Jan 2005 14:42:49 -0000\r\nReceived: (qmail 4643 invoked by uid 60001); 25 Jan 2005 14:42:49 -0000\r\nComment: DomainKeys? See http://antispam.yahoo.com/domainkeys\r\nDomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;\n  s=s1024; d=yahoo.com;\n  b=axfWLVzqdmCg7YoL+Z75YYIux6pqyReaRhjRznFexY/zI5zumGRQgahDv48MSWsG4WMfj7sfcCpqNmw3Jn778do2mN6g+H46w6Doc8ExRWcYX3W8eSpLussJQzar+p2dF4Q+Ly7v4I4zNyNTAJOkabWLRX13Zu3A8+nEfLe0Y1w=  ;\r\nMessage-ID: &lt;20050125144249.4641.qmail@...&gt;\r\nReceived: from [193.171.40.132] by web42204.mail.yahoo.com via HTTP; Tue, 25 Jan 2005 06:42:49 PST\r\nDate: Tue, 25 Jan 2005 06:42:49 -0800 (PST)\r\nTo: archive-crawler@yahoogroups.com\r\nIn-Reply-To: &lt;cskeii+9r5n@...&gt;\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=us-ascii\r\nX-eGroups-Remote-IP: 66.218.93.205\r\nFrom: Christoph Spielmann &lt;spielc@...&gt;\r\nSubject: Re: [archive-crawler] Re: Size of URI\r\nX-Yahoo-Group-Post: member; u=208281025\r\nX-Yahoo-Profile: spielc\r\n\r\nOk umm well no i didn&#39;T check for negative Values so\nmaybe that&#39;S why heritrix said bye-bye. The problem is\ni have no hertrix_out.log because of all the troubles\nwe had with starting heritrix from our app we decided\nto start the whole thing as seperate process via a\nProcessBuilder-Object so i dunno exactly about that.\n--- stackarchiveorg &lt;stack@...&gt; wrote:\n\n&gt; \n&gt; --- In archive-crawler@yahoogroups.com, Christoph\n&gt; Spielmann\n&gt; &lt;spielc@y...&gt; wrote:\n&gt; &gt; Ok i found a solution now myself i just hooked up\n&gt; my\n&gt; &gt; processor a bit later... by doing that i was able\n&gt; to\n&gt; &gt; get the size of the page with uri.getContentSize()\n&gt; correctly!\n&gt; &gt; \n&gt; \n&gt; Seems odd.  The size should be available for http\n&gt; content as soon as\n&gt; FetchHTTP is done.\nthat&#39;s what i thought myself but it seems  there is a\nlil issue somewhere\n&gt; Here is code toward end of the\n&gt; FetchHTTP#innerProcess:\n&gt; \n&gt;         long contentSize =\n&gt; rec.getRecordedInput().getSize();\n&gt;         curi.setContentSize(contentSize);\n&gt; \n&gt; I wonder what URL is choking when you do the\n&gt; getContentSize on it? \n&gt; Perhaps it has a scheme that is other than HTTP?\ni checked it if it&#39;s a http-transaction before i did\nanything else as Krystinn suggested it\n&gt; CrawlURI also has #getContentLength which is meant\n&gt; to return the\n&gt; length of the html content body.  Its javadoc says:\n&gt; \n&gt;      * @return For completed HTTP transactions, the\n&gt; length of the\n&gt; content-body.\n&gt; \n&gt; Its doing a total recorded length minus length of\n&gt; headers.\n&gt; \n&gt; When I look in the formatting of the crawl.log\n&gt; length column, I see it\n&gt; does this:\n&gt; \n&gt;         if (curi.isHttpTransaction()) {\n&gt;             if(curi.getContentLength() &gt;= 0) {\n&gt;                 length =\n&gt; Long.toString(curi.getContentLength());\n&gt;             } else if (curi.getContentSize() &gt; 0) {\n&gt;                 length =\n&gt; Long.toString(curi.getContentSize());\n&gt;             }\n&gt;             ...\n&gt;             \n&gt;         } else {\n&gt;             if (curi.getContentSize() &gt; 0) {\n&gt;                 length =\n&gt; Long.toString(curi.getContentSize());\n&gt;             } \n&gt;             ...\n&gt;         }\n&gt; \n&gt; So contentLength only is assumed valid only if its a\n&gt; http transaction\n&gt; and we&#39;re doing a check for a negative content size\n&gt; if not an http\n&gt; transaction.  Were you checking for negative size? \n&gt; Could that have\n&gt; been cause of the crawl crash?  Was there something\n&gt; in\n&gt; heritrix_out.log around crawl crash time?\n&gt; \n&gt; (I understand if you&#39;d like to move on -- but I&#39;m\n&gt; kinda curious as to\n&gt; why a simple getContentSize wasn&#39;t working for you).\n&gt; \n&gt; Thanks,\n&gt; St.Ack\n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; &gt; \n&gt; &gt; \t\t\n&gt; &gt; __________________________________ \n&gt; &gt; Do you Yahoo!? \n&gt; &gt; Read only the mail you want - Yahoo! Mail\n&gt; SpamGuard. \n&gt; &gt; http://promotions.yahoo.com/new_mail\n&gt; \n&gt; \n&gt; \n&gt; \n\n\n\n\t\n\t\t\n__________________________________ \nDo you Yahoo!? \nYahoo! Mail - You care about security. So do we. \nhttp://promotions.yahoo.com/new_mail\n\n"}}