{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":361563137,"authorName":"goblin_cz","from":"&quot;goblin_cz&quot; &lt;adam.brokes@...&gt;","profile":"goblin_cz","replyTo":"LIST","senderId":"Q3KaqU_tvpCagMTYsVqIIugvkokdjOxYHq9m0D5N_L02ZqFYgnZ3U36s46gcZVMRdlh-7lsgP-wn04orWe6vPpxx7_Tat5mKXhE","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: about login","postDate":"1306843701","msgId":7160,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PGlzMmxubCt2ZjJxQGVHcm91cHMuY29tPg==","inReplyToHeader":"PDREREFFMEQ0LjYwMDAyQGFyY2hpdmUub3JnPg=="},"prevInTopic":7147,"nextInTopic":0,"prevInTime":7159,"nextInTime":7161,"topicId":7132,"numMessagesInTopic":5,"msgSnippet":"Hi Gordon, thank you for response. First, how I am checking the cookies. 1] when I set org.archive.fetcher.level = FINE in logging.properties this messages are","rawEmail":"Return-Path: &lt;adam.brokes@...&gt;\r\nX-Sender: adam.brokes@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 39950 invoked from network); 31 May 2011 12:08:27 -0000\r\nX-Received: from unknown (98.137.34.45)\n  by m6.grp.sp2.yahoo.com with QMQP; 31 May 2011 12:08:27 -0000\r\nX-Received: from unknown (HELO n45b.bullet.mail.sp1.yahoo.com) (66.163.168.159)\n  by mta2.grp.sp2.yahoo.com with SMTP; 31 May 2011 12:08:27 -0000\r\nX-Received: from [69.147.65.172] by n45.bullet.mail.sp1.yahoo.com with NNFMP; 31 May 2011 12:08:23 -0000\r\nX-Received: from [98.137.34.184] by t14.bullet.mail.sp1.yahoo.com with NNFMP; 31 May 2011 12:08:23 -0000\r\nDate: Tue, 31 May 2011 12:08:21 -0000\r\nTo: archive-crawler@yahoogroups.com\r\nMessage-ID: &lt;is2lnl+vf2q@...&gt;\r\nIn-Reply-To: &lt;4DDAE0D4.60002@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: &quot;goblin_cz&quot; &lt;adam.brokes@...&gt;\r\nSubject: Re: about login\r\nX-Yahoo-Group-Post: member; u=361563137; y=hWiwlv1tL5CJiYWG1vseYGzuQ6w4CuTDBtECW80oT8i0TDuM\r\nX-Yahoo-Profile: goblin_cz\r\n\r\nHi Gordon,\n\nthank you for response. First, how I am checking the cookies.\n\n=\r\n1] when I set org.archive.fetcher.level =3D FINE in logging.properties this=\r\n messages are logged:\n2011-05-31 11:34:42.021 FINE thread-40 org.archive.mo=\r\ndules.fetcher.AbstractCookieStorage.loadCookies() Adding cookie: __utmc=3D2=\r\n68098329\n\n2] when I tried this simple debug groovy script in scripting cons=\r\nole:\n\nrawOut.println appCtx.getBean(&quot;cookieStorage&quot;).cookies.dump()\nI can s=\r\nee only one cookie - PHPSESSID, which is added in the running crawl.\n\n3] in=\r\n the WARC file is this line only:\nSet-Cookie: PHPSESSID=3D11027tot3nmcbvr0h=\r\nt3r490at0; path=3D/\n\nWhen I am looking onto AbstractCookieStorage.loadCooki=\r\nes() I can not see any method call\nwhich will write to the second parameter=\r\n _result_. I would expect something like this:\nresult.put(cookie.getSortKey=\r\n(), cookie); \nI inserted this to the class file, compiled and deployed. Aft=\r\ner this change, the cookieStorage\nbean contain all cookies from the file, b=\r\nut the page is still crawled as anonymous.\n\nWhen I use the same file for wg=\r\net with load-cookies parameter or Heritrix 1, content\nis crawled as logged =\r\nuser. Is it possible that Heritrix 3 do not find the right cookies\nfor the =\r\ndomain? I tried a lot of modifications but nothing helped and right now\nI a=\r\nm not sure how to procced. Could you give me some hint, please?\n\nI like the=\r\n whole switch to maven2 and you made it really easy to extend heritrix,\nbut=\r\n is there any switch that can be used in development? For example if I want=\r\n make only \nsmall changes in the Heritrix modules, I need to recompile whol=\r\ne heritrix-modules (no problem there)\nand restart Heritrix with inserted ne=\r\nw jar into /lib directory (this is same if I want to extend heritrix with m=\r\ny own module).\nIs it possible to run H3 from eclipse somehow or switch libr=\r\naries without restarting?\n\nThank you very much and keep that good work,\n\nAd=\r\nam\n\n \n\n--- In archive-crawler@yahoogroups.com, Gordon Mohr &lt;gojomo@...&gt; wro=\r\nte:\n&gt;\n&gt; The static AbstractCookieStorage.loadCookies method loads cookies i=\r\nnto \n&gt; the map provided as its 2nd argument. If that bean is loaded with th=\r\ne \n&gt; right cookies, and then consulted by FetchHTTP for cookies to use when=\r\n \n&gt; composing HTTP requests, the right cookies should be sent analogously t=\r\no \n&gt; H1.\n&gt; \n&gt; How are you examining the cookies through the web interface? =\r\nAre you \n&gt; sure the &#39;cookieStorage&#39; bean is being picked up by your FetchHT=\r\nTP \n&gt; component as the source of cookies? (In our default setup, as the one=\r\n \n&gt; &#39;CookieStorage&#39; instance available, it will be &#39;auto-wired&#39; into \n&gt; Fet=\r\nchHTTP to fulfill its need for such a component.)\n&gt; \n&gt; If you are using a W=\r\nARCWriterProcessor, or can temporarily enable one, \n&gt; you could review the =\r\nexact requests sent, to see if they have the \n&gt; expected session cookies.\n&gt;=\r\n \n&gt; - Gordon @ IA\n&gt; \n&gt; On 5/18/11 8:47 AM, goblin_cz wrote:\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; Hi =\r\nGordon,\n&gt; &gt;\n&gt; &gt; I have problem with mentioned CookieStorage in heritrix 3.1=\r\n.0. I have defined the file with cookies:\n&gt; &gt;\n&gt; &gt; &lt;bean id=3D&quot;cookieStorage=\r\n&quot; class=3D&quot;org.archive.modules.fetcher.BdbCookieStorage&quot;&gt;\n&gt; &gt; &lt;property nam=\r\ne=3D&quot;cookiesLoadFile&quot; value=3D&quot;/opt/heritrix/cookies.txt&quot;/&gt;\n&gt; &gt; &lt;property n=\r\name=3D&quot;cookiesSaveFile&quot; value=3D&quot;/opt/heritrix/cookies_dump_2.txt&quot;/&gt;\n&gt; &gt; &lt;p=\r\nroperty name=3D&quot;bdbModule&quot;&gt;\n&gt; &gt; &lt;ref bean=3D&quot;bdb&quot;/&gt;\n&gt; &gt; &lt;/property&gt;\n&gt; &gt; &lt;/b=\r\nean&gt;\n&gt; &gt;\n&gt; &gt; And even though I can view content of the cookie file from the=\r\n web interface, the cookies are not loaded and I crawl only login forms. In=\r\n heritrix 1.15 I have crawled the pages successfully. I have done some digg=\r\ning in the code and I am confused by AbstractCookieStorage.loadCookies() me=\r\nthod. There is only logging and no functionality which will store cookie to=\r\n some kind of collection. Where the storing happens and how could I find so=\r\nurce of this behaviour?\n&gt; &gt;\n&gt; &gt; Thank you very much.\n&gt; &gt;\n&gt; &gt; Best,\n&gt; &gt;\n&gt; &gt; =\r\nAdam\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; --- In archive-crawler@yahoogroups.com, Gordon Mohr&lt;gojomo=\r\n@&gt;  wrote:\n&gt; &gt;&gt;\n&gt; &gt;&gt; Is the name of the login button on the login form real=\r\nly &#39;logonbuttom&#39;\n&gt; &gt;&gt; (with an &#39;m&#39;)? (For that matter, are the username and=\r\n password fields\n&gt; &gt;&gt; really named &#39;username&#39; and &#39;password&#39;?)\n&gt; &gt;&gt;\n&gt; &gt;&gt; Lo=\r\ng-ins vary a lot between sites. Heritrix can only log-in if the login\n&gt; &gt;&gt; =\r\nform has predictable form-element-names, and setting this up requires\n&gt; &gt;&gt; =\r\ncareful inspection of the target login form. Even so, some sites may use\n&gt; =\r\n&gt;&gt; dynamic/hidden form fields (especially nowadays as a protection against\n=\r\n&gt; &gt;&gt; cross-site request forgeries) that will foil the current Heritrix logi=\r\nn\n&gt; &gt;&gt; code.\n&gt; &gt;&gt;\n&gt; &gt;&gt; If trying to get this to work, the HtmlFormCredentia=\r\nlTest unit test\n&gt; &gt;&gt; class is the best model, and you would want to debug w=\r\nhat you&#39;re trying\n&gt; &gt;&gt; in a tiny instant test crawl of just that login form=\r\n and one\n&gt; &gt;&gt; login-protected page.\n&gt; &gt;&gt;\n&gt; &gt;&gt; If the site&#39;s design doesn&#39;t =\r\nwork with the very-limited Heritrix login\n&gt; &gt;&gt; capability, another option m=\r\nay be to:\n&gt; &gt;&gt;\n&gt; &gt;&gt; (1) login with Firefox\n&gt; &gt;&gt; (2) export the relevant coo=\r\nkies proving you&#39;re logged in =96 I think\n&gt; &gt;&gt; nowadays this requires a Fir=\r\nefox extension\n&gt; &gt;&gt; (3) supply that cookies.txt file to the Heritrix Cookie=\r\nStorage bean via\n&gt; &gt;&gt; its &#39;cookiesLoadFile&#39; property, which tells it a plac=\r\ne to preload\n&gt; &gt;&gt; cookies at crawl-start\n&gt; &gt;&gt;\n&gt; &gt;&gt; Hope this helps,\n&gt; &gt;&gt;\n&gt; =\r\n&gt;&gt; - Gordon @ IA\n&gt; &gt;&gt;\n&gt; &gt;&gt; On 4/27/11 11:16 PM, mickey.guoyun wrote:\n&gt; &gt;&gt;&gt;\n=\r\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; Hi,Gordon:\n&gt; &gt;&gt;&gt; I use Heritrix3.0 ,I need to login to crawl so=\r\nme urls;so i config the\n&gt; &gt;&gt;&gt; crawler-beans.cxml like this:\n&gt; &gt;&gt;&gt; &lt;bean id=\r\n=3D&quot;credentialDearedu&quot;\n&gt; &gt;&gt;&gt; class=3D&quot;org.archive.modules.credential.HtmlFo=\r\nrmCredential&quot;&gt;\n&gt; &gt;&gt;&gt; &lt;property name=3D&quot;domain&quot;&gt;\n&gt; &gt;&gt;&gt; &lt;value&gt;www.xxx.com&lt;/v=\r\nalue&gt;\n&gt; &gt;&gt;&gt; &lt;/property&gt;\n&gt; &gt;&gt;&gt; &lt;property name=3D&quot;loginUri&quot;&gt;\n&gt; &gt;&gt;&gt; &lt;value&gt;htt=\r\np://www.xxx.com/bbs/login.asp?action=3Dchk&amp;from=3Dlogin&lt;/value&gt;\n&gt; &gt;&gt;&gt; &lt;=\r\n/property&gt;\n&gt; &gt;&gt;&gt; &lt;property name=3D&quot;formItems&quot;&gt;\n&gt; &gt;&gt;&gt; &lt;map&gt;\n&gt; &gt;&gt;&gt; &lt;entry key=\r\n=3D&quot;username&quot; value=3D&quot;xxx&quot;/&gt;\n&gt; &gt;&gt;&gt; &lt;entry key=3D&quot;password&quot; value=3D&quot;xxx&quot;/&gt;=\r\n\n&gt; &gt;&gt;&gt; &lt;entry key=3D&quot;logonbuttom&quot; value=3D&quot;submit&quot;/&gt;\n&gt; &gt;&gt;&gt; &lt;/map&gt;\n&gt; &gt;&gt;&gt; &lt;/p=\r\nroperty&gt;\n&gt; &gt;&gt;&gt; &lt;/bean&gt;\n&gt; &gt;&gt;&gt; &lt;bean id=3D&quot;credentialStore&quot;\n&gt; &gt;&gt;&gt; class=3D&quot;or=\r\ng.archive.modules.credential.CredentialStore&quot;&gt;\n&gt; &gt;&gt;&gt; &lt;property name=3D&quot;cred=\r\nentials&quot;&gt;\n&gt; &gt;&gt;&gt; &lt;map&gt;\n&gt; &gt;&gt;&gt; &lt;entry key=3D&quot;www.dearedu.com&quot; value-ref=3D&quot;cre=\r\ndentialDearedu&quot; /&gt;\n&gt; &gt;&gt;&gt; &lt;/map&gt;\n&gt; &gt;&gt;&gt; &lt;/property&gt;\n&gt; &gt;&gt;&gt; &lt;/bean&gt;\n&gt; &gt;&gt;&gt; and t=\r\nhe config is success.\n&gt; &gt;&gt;&gt; but after run about 12 hours,the Hertirx only p=\r\nrocess the login\n&gt; &gt;&gt;&gt; url(http://www.xxx.com/bbs/login.asp?action=3Dchk&am=\r\np;from=3Dlogin\n&gt; &gt;&gt;&gt; &lt;http://www.xxx.com/bbs/login.asp?action=3Dchk&amp;fro=\r\nm=3Dlogin&gt;  ). and i\n&gt; &gt;&gt;&gt; check useName and password can login.why?\n&gt; &gt;&gt;&gt; =\r\n2011-04-28\n&gt; &gt;&gt;&gt; ----------------------------------------------------------=\r\n--------------\n&gt; &gt;&gt;&gt; mickey.guoyun\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt;=\r\n &gt; ------------------------------------\n&gt; &gt;\n&gt; &gt; Yahoo! Groups Links\n&gt; &gt;\n&gt; &gt;=\r\n\n&gt; &gt;\n&gt;\n\n\n\n"}}