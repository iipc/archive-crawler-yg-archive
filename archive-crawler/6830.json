{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"qNadIPtZ6WXEKsIoOQ8yKC2ZiniFyL3Kwe3n9u1-sZGednz7O6HpJ_dDabGRpEaYbaUn4xwBGluBaJZmpaPPxFW6HXCFLjo","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] unexpected slowness with SVN head build of heritrix-1.15.5","postDate":"1290820337","msgId":6830,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDRDRjA1QUYxLjUwMTA5MDVAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGljbnFrcStiZW9kQGVHcm91cHMuY29tPg==","referencesHeader":"PGljbnFrcStiZW9kQGVHcm91cHMuY29tPg=="},"prevInTopic":6827,"nextInTopic":6832,"prevInTime":6829,"nextInTime":6831,"topicId":6827,"numMessagesInTopic":3,"msgSnippet":"I m not sure what could have caused this issue. Some amount of thread bottlenecking around frontier operations is to be expected -- as the most contended and","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 66528 invoked from network); 27 Nov 2010 01:12:20 -0000\r\nX-Received: from unknown (66.196.94.107)\n  by m17.grp.re1.yahoo.com with QMQP; 27 Nov 2010 01:12:20 -0000\r\nX-Received: from unknown (HELO relay01.pair.com) (209.68.5.15)\n  by mta3.grp.re1.yahoo.com with SMTP; 27 Nov 2010 01:12:20 -0000\r\nX-Received: (qmail 40668 invoked by uid 0); 27 Nov 2010 01:12:18 -0000\r\nX-Received: from 70.112.224.182 (HELO silverbook.local) (70.112.224.182)\n  by relay01.pair.com with SMTP; 27 Nov 2010 01:12:18 -0000\r\nX-pair-Authenticated: 70.112.224.182\r\nMessage-ID: &lt;4CF05AF1.5010905@...&gt;\r\nDate: Fri, 26 Nov 2010 17:12:17 -0800\r\nUser-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.12) Gecko/20101027 Thunderbird/3.1.6\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nCc: pandae667 &lt;aaron667@...&gt;\r\nReferences: &lt;icnqkq+beod@...&gt;\r\nIn-Reply-To: &lt;icnqkq+beod@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] unexpected slowness with SVN head build of\n heritrix-1.15.5\r\nX-Yahoo-Group-Post: member; u=137285340; y=JDqiWsR-epPFMx8n0lSYPY7DPGCX2ko5_RWkLHvktQ3d\r\nX-Yahoo-Profile: gojomo\r\n\r\nI&#39;m not sure what could have caused this issue. Some amount of thread \nbottlenecking around frontier operations is to be expected -- as the \nmost contended and disk-seek-sensitive part of crawler operation. But, \nSVN HEAD shouldn&#39;t have any worse throughput than 1.14.4.\n\nSome things to further understand what&#39;s happening:\n\n- when the problem period begins, does the machine still seem CPU busy, \nor idle? Are the disks especially busy?\n\n- is there always some crawl progress, slowly, or are the threads held \nin one spot almost indefinitely?\n\n- does a thread dump via SIGQUIT or jstack show which other threads may \nbe busy or holding key locks in repeated samples? (Compared to the \n&#39;threads report&#39;, this will show more threads, and all threads at a \nsimultaneous instant.)\n\n- anything else anomalous in any of the logs, especially the _out.log?\n\n- does a pause, wait until fully paused, resume offer temporary relief?\n\n- in upgrading to H1 SVN head, did you also move to the latest 3rd party \nlibraries, especially (just added to our bundled &#39;lib&#39; directory \nrecently) JE-4.1.6?\n\n- for reference, what JVM version, JVM options (including heap size), \nand OS version are you using? (Also: have any of those changed along \nwith the Heritrix version?)\n\nIf in fact we find a situation where with identical system/JVM/crawl \nparameter, the older build you&#39;d used runs indefinitely at a higher \nrate, and the SVN HEAD reliably hits a problematic state after some \nshort period, we would want to try a number of other comparisons to \nidentify what we inadvertently changed for the worse. So if you can be \nsure an everything-same-except-for-the-Heritrix-build runs better, \nthat&#39;d be helpful.\n\n// Gordon @ IA\n\n\nOn 11/26/10 12:20 AM, pandae667 wrote:\n&gt; Dear IA-Team,\n&gt;\n&gt; after a long time of running a heritrix-1.14.x based crawler I decided to update my code yesterday to heritrix 1.15.5 SVN head. I noticed several optimizations and cleanups and were happy to start up my crawlers with the new code without encountering any issue.\n&gt;\n&gt; That is until after about half an hour into the crawl, when I noticed that about 180-190 of 200 toe threads were permanently waiting at:\n&gt; org.archive.crawler.postprocessor.FrontierScheduler.innerProcess(FrontierScheduler.java:76) (Some of the toe threads are waiting at this point for up to 30 seconds.)\n&gt; A single toe thread made it past this point (as intended by the synchronization) and hangs at another lock:\n&gt;     java.lang.Thread.State: BLOCKED (on object monitor)\n&gt;          at org.archive.crawler.frontier.BdbFrontier.getQueueFor(BdbFrontier.java:275)\n&gt;          - locked&lt;0x00007f1b45d6f698&gt;  (a org.archive.util.ObjectIdentityBdbCache)\n&gt;          at org.archive.crawler.frontier.WorkQueueFrontier.sendToQueue(WorkQueueFrontier.java:465)\n&gt;          at org.archive.crawler.frontier.WorkQueueFrontier.receive(WorkQueueFrontier.java:444)\n&gt;          at org.archive.crawler.util.SetBasedUriUniqFilter.add(SetBasedUriUniqFilter.java:90)\n&gt;          at org.archive.crawler.frontier.WorkQueueFrontier.schedule(WorkQueueFrontier.java:428)\n&gt;          at org.archive.crawler.postprocessor.FrontierScheduler.schedule(FrontierScheduler.java:92)\n&gt;          at org.archive.crawler.postprocessor.FrontierScheduler.innerProcess(FrontierScheduler.java:78)\n&gt;          - locked&lt;0x00007f1b45cc5d60&gt;  (a org.archive.crawler.postprocessor.FrontierScheduler)\n&gt;          at org.archive.crawler.framework.Processor.process(Processor.java:109)\n&gt;          at org.archive.crawler.framework.ToeThread.processCrawlUri(ToeThread.java:306)\n&gt;          at org.archive.crawler.framework.ToeThread.run(ToeThread.java:154)\n&gt;\n&gt;\n&gt; Any hints what I am doing wrong? Have I just encountered a bug in backported code? Is there any additional information I can provide to help track down the cause?\n&gt;\n&gt; Thanks in advance\n&gt;    Olaf Freyer\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; ------------------------------------\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n\n"}}