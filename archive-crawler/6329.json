{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"LGCrviI58dAnpLXJ6qO6Mav7agvRkYdp9V7qzktcccTzmMtyDOHrNt41W1mI3WJMwEGZE5QMoIqPQYFO2A8zTK9yTDD0tec","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: [archive-crawler] Quota enforcer and error penalty","postDate":"1264461016","msgId":6329,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDRCNUUyNEQ4LjIwMDAzMDZAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PGhqYnVoYSsxMDl1b0BlR3JvdXBzLmNvbT4=","referencesHeader":"PGhqYnVoYSsxMDl1b0BlR3JvdXBzLmNvbT4="},"prevInTopic":6323,"nextInTopic":0,"prevInTime":6328,"nextInTime":6330,"topicId":6323,"numMessagesInTopic":2,"msgSnippet":"... The best documentation for QuotaEnforcer is the class comments, source code, and in-UI help text for its individual settings. The QuotaEnforcer makes its","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 83586 invoked from network); 25 Jan 2010 23:10:18 -0000\r\nX-Received: from unknown (98.137.34.45)\n  by m10.grp.re1.yahoo.com with QMQP; 25 Jan 2010 23:10:18 -0000\r\nX-Received: from unknown (HELO relay01.pair.com) (209.68.5.15)\n  by mta2.grp.sp2.yahoo.com with SMTP; 25 Jan 2010 23:10:18 -0000\r\nX-Received: (qmail 67072 invoked from network); 25 Jan 2010 23:10:17 -0000\r\nX-Received: from 71.202.38.39 (HELO ?192.168.23.128?) (71.202.38.39)\n  by relay01.pair.com with SMTP; 25 Jan 2010 23:10:17 -0000\r\nX-pair-Authenticated: 71.202.38.39\r\nMessage-ID: &lt;4B5E24D8.2000306@...&gt;\r\nDate: Mon, 25 Jan 2010 15:10:16 -0800\r\nUser-Agent: Thunderbird 2.0.0.23 (Windows/20090812)\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;hjbuha+109uo@...&gt;\r\nIn-Reply-To: &lt;hjbuha+109uo@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] Quota enforcer and error penalty\r\nX-Yahoo-Group-Post: member; u=137285340; y=pu7gBz0by4ha6_m7hJgATK5u8GpGtWMWTqcgNj_DudCS\r\nX-Yahoo-Profile: gojomo\r\n\r\nnicosensei wrote:\n&gt; Hi,\n&gt; \n&gt; I am a new member of the NetArchiveSuite dev team, from BnF in France. NetArchiveSuite makes uses of the quota enforcer to set crawl budgets. Previously at BnF we used standalone Heritrix instances, and would use document count budget, configuring the following frontier properties :\n&gt; \n&gt; - queue-total-budget\n&gt; - error-penalty-amount\n&gt; - balance-replenish-amount\n&gt; \n&gt; In NetArchiveSuite we need to use the Quota enforcer, because the annotations it adds to the crawl log allow to perform post-crawl anlysis. \n&gt; \n&gt; To set a budget in document count, we set the group-max-fetch-successes property of the Quota Enforcer, which works fine. However we noticed that some jobs are taking a very long time to complete, especially when we have to retry many times for dead sites, DNS request that fail to complete are not penalized... Is there a means to use an error penalty mechanism with the Quota enforcer ?\n&gt; \n&gt; Where can I find some documentation regarding the QUota enforcer configuration?\n\nThe best documentation for QuotaEnforcer is the class comments, source \ncode, and in-UI help text for its individual settings.\n\nThe QuotaEnforcer makes its decisions based on a CrawlSubstats object. \nChanging QuotaEnforcer to take into account other counts (like the \nnumber of times unresponsive URIs have been retried) would require \neditting/subclassing QuotaEnforcer, at least, and possibly changing \nCrawlSubstats as well, if it&#39;s not already collecting the new values of \ninterest.\n\nIt seems your actual goal is to &quot;give up sooner on unresponsive sites&quot;. \nThat wouldn&#39;t necessarily require the host/queue stats to hit a quota; \ninstead the number of retries attempted, and delays between retries, \ncould be shrunk to much the same effect.\n\nOr, if you want a more deterministic, hard cap on the number of errors \nencountered, the statistics on &#39;fetchFailures&#39;, &#39;fetchDisregards&#39;, and \n&#39;fetchNonResponses&#39; already collected in CrawlSubstats may be of use.\n\nYou could either extend QuotaEnforcer to allow checks of these values, \nor add a new Processor -- possibly one implemented in a scripting \nlanguage, as the BeanshellProcessor allows -- that computes some formula \non all available stats and (like QuotaEnforcer) then sets a status code \nor cancels further processing in some cases.\n\nWe don&#39;t have any firm recommendations for what the proper heuristic \nwould be. A large number of &#39;fetchFailures&#39; or &#39;fetchNonResponses&#39;, \nespecially when compared to &#39;fetchSuccesses&#39;, indicates problems that \nmight justify giving up on a site. But, there could be situations where \na site&#39;s own design yields (for example) 10 failures per success, in \nwhich case a simple heuristic might cut off crawler effort to soon. \nPerhaps the best rule would look at progress over time -- if the last N \nresponses are failures with no successes, give up -- but that would \nrequire a better stat-keeping structure, and still might be problematic \nwithout more analysis of real scenarios.\n\n- Gordon @ IA\n\n"}}