{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":53865624,"authorName":"virginie","from":"&quot;virginie&quot; &lt;mbakom@...&gt;","profile":"mbakom","replyTo":"LIST","senderId":"m_MuDaut2a_gR-AaA_mUMh0J5NEZ7U6M6ntreMjchD_TfJsf3KNLDHS2EuZ_TPZpSCJA1q8xnppHpBUV4qSe50URvg","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: Write a WARC-File with many mets.xml (metadata).","postDate":"1301982909","msgId":7086,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PGluZWFydCtwZWVhQGVHcm91cHMuY29tPg==","inReplyToHeader":"PDREOTlGMTlCLjQwNjA2MDJAYXJjaGl2ZS5vcmc+"},"prevInTopic":7084,"nextInTopic":0,"prevInTime":7085,"nextInTime":7087,"topicId":7077,"numMessagesInTopic":5,"msgSnippet":"Hi Gordon, I solve the Problem. there was no problem with the WARCWriter but with Threads in my code. So thank you Cheers! Virginie","rawEmail":"Return-Path: &lt;mbakom@...&gt;\r\nX-Sender: mbakom@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 40227 invoked from network); 5 Apr 2011 05:55:10 -0000\r\nX-Received: from unknown (98.137.34.46)\n  by m1.grp.sp2.yahoo.com with QMQP; 5 Apr 2011 05:55:10 -0000\r\nX-Received: from unknown (HELO n46b.bullet.mail.sp1.yahoo.com) (66.163.168.160)\n  by mta3.grp.sp2.yahoo.com with SMTP; 5 Apr 2011 05:55:10 -0000\r\nX-Received: from [69.147.65.149] by n46.bullet.mail.sp1.yahoo.com with NNFMP; 05 Apr 2011 05:55:10 -0000\r\nX-Received: from [98.137.34.72] by t9.bullet.mail.sp1.yahoo.com with NNFMP; 05 Apr 2011 05:55:10 -0000\r\nDate: Tue, 05 Apr 2011 05:55:09 -0000\r\nTo: archive-crawler@yahoogroups.com\r\nMessage-ID: &lt;ineart+peea@...&gt;\r\nIn-Reply-To: &lt;4D99F19B.4060602@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: &quot;virginie&quot; &lt;mbakom@...&gt;\r\nSubject: Re: Write a WARC-File with many mets.xml (metadata).\r\nX-Yahoo-Group-Post: member; u=53865624; y=TJbNVs-tHvxBuhsTWnp3Jfd-NJ7Ji4xDxck4J5qK3fT1\r\nX-Yahoo-Profile: mbakom\r\n\r\nHi Gordon,\nI solve the Problem. there was no problem with the WARCWriter bu=\r\nt with Threads in my code. \nSo thank you\nCheers!\nVirginie\n\n--- In archive-c=\r\nrawler@yahoogroups.com, Gordon Mohr &lt;gojomo@...&gt; wrote:\n&gt;\n&gt; The flow should=\r\n be roughly:\n&gt; \n&gt; writer =3D new WARCWriter(...);\n&gt; ...\n&gt; writer.writeMetad=\r\nataRecord(...);\n&gt; ...\n&gt; writer.writeMetadataRecord(...);\n&gt; ...\n&gt; writer.wri=\r\nteMetadataRecord(...);\n&gt; ...\n&gt; writer.close();\n&gt; \n&gt; Are you saying that whe=\r\nn you do this, you are getting 3 WARC files?\n&gt; \n&gt; If so, can you place a br=\r\neakpoint (or (new \n&gt; Exception()).prinstStackTrace()) inside WARCWriter.cre=\r\nateFile(), and \n&gt; report what&#39;s causing that method to be reached when the =\r\nsecond WARC \n&gt; file is created?\n&gt; \n&gt; - Gordon @ IA\n&gt; \n&gt; On 4/3/11 11:17 PM,=\r\n virginie wrote:\n&gt; &gt; Hi Gordon,\n&gt; &gt;\n&gt; &gt; Thanks for your reply.\n&gt; &gt; yes I am=\r\n using the same code from Heritrix. Notably I Create a WARC Writer like tha=\r\nt : WARCWriter writer =3D new WARCWriter (aint,dirs,prefix,suffix,compresse=\r\nd,WARCReader.DEFAULT_MAX_WARC_FILE_SIZE,metadata); and so I call the method=\r\n writer.writeMetadataRecord(java.lang.String url,\n&gt; &gt;                      =\r\n            java.lang.String create14DigitDate,\n&gt; &gt;                        =\r\n          java.lang.String mimetype,\n&gt; &gt;                                  j=\r\nava.net.URI recordId,\n&gt; &gt;                                  ANVLRecord named=\r\nFields,\n&gt; &gt;                                  java.io.InputStream metadata,\n=\r\n&gt; &gt;                                  long metadataLength);\n&gt; &gt; once only an=\r\nd by the java.io.InputStream metadata,I put a\n&gt; &gt; new FileInputStream(mets[=\r\nj]), so all mets files are store into (mets[j].\n&gt; &gt; so I would like to buil=\r\nd a WARC-file with all this(mets[j])file.\n&gt; &gt;\n&gt; &gt; Cheers!\n&gt; &gt; Virginie\n&gt; &gt;\n=\r\n&gt; &gt; --- In archive-crawler@yahoogroups.com, Gordon Mohr&lt;gojomo@&gt;  wrote:\n&gt; =\r\n&gt;&gt;\n&gt; &gt;&gt; Is this in the context of an extension to Heritrix or using the sam=\r\ne\n&gt; &gt;&gt; code elsewhere?\n&gt; &gt;&gt;\n&gt; &gt;&gt; It might be tricky to reuse the WARCWriter=\r\n code elsewhere, given its\n&gt; &gt;&gt; assumptions that it will be handed CrawlURI=\r\n instances as prefilled by\n&gt; &gt;&gt; Heritrix, but should still be possible. Not=\r\nably, the\n&gt; &gt;&gt; WARCWriter.writeMetadataRecord() method assumes it will writ=\r\ne a set of\n&gt; &gt;&gt; &#39;ANVLRecord&#39; fields (an internal class representing a simpl=\r\ne fielded set\n&gt; &gt;&gt; of metadata) rather than any of the other arbitrary kind=\r\ns of metadata\n&gt; &gt;&gt; that would also be legal by the WARC spec.\n&gt; &gt;&gt;\n&gt; &gt;&gt; Are=\r\n you calling the &quot;new WARCWriter()&quot; code each time, or reusing one\n&gt; &gt;&gt; &#39;wr=\r\niter&#39; instance for each call to writeMetadataRecord()? (The\n&gt; &gt;&gt; instantiat=\r\nion of a new WARCWriter always starts a new file, never\n&gt; &gt;&gt; appending to a=\r\nn existing file.)\n&gt; &gt;&gt;\n&gt; &gt;&gt; If you are already reusing a single &#39;writer&#39; pr=\r\noperly, perhaps something\n&gt; &gt;&gt; else about your use pattern is triggering th=\r\ne automatic rollover to a\n&gt; &gt;&gt; new file that usually happens only when the =\r\nmax-size is exceeded. I\n&gt; &gt;&gt; would set a breakpoint or other debugging outp=\r\nut at WARCWriter&#39;s\n&gt; &gt;&gt; createFile method(s), and see what is triggering a =\r\nnew file rather than\n&gt; &gt;&gt; the reuse of the first file.\n&gt; &gt;&gt;\n&gt; &gt;&gt; Hope this =\r\nhelps,\n&gt; &gt;&gt;\n&gt; &gt;&gt; - Gordon @ IA\n&gt; &gt;&gt;\n&gt; &gt;&gt; On 4/1/11 5:31 AM, virginie wrote:=\r\n\n&gt; &gt;&gt;&gt; Hi All,\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; I would like to write many mets.xml file in one =\r\nWARC File, but without success.\n&gt; &gt;&gt;&gt; At the moment when I write with\n&gt; &gt;&gt;&gt;=\r\n WARCWriter writer =3D new WARCWriter (aint,dirs,prefix, suffix,compressed,=\r\nWARCReader.DEFAULT_MAX_WARC_FILE_SIZE,metadata);\n&gt; &gt;&gt;&gt; And later\n&gt; &gt;&gt;&gt; writ=\r\ner.writeMetadataRecord(.-------)\n&gt; &gt;&gt;&gt; I receive per mets.xml file one WARC=\r\n file but I would like to store all the mets.xml in the one whole WARC-File=\r\n.\n&gt; &gt;&gt;&gt; Any idea why?\n&gt; &gt;&gt;&gt; How can I do it?\n&gt; &gt;&gt;&gt; Cheers\n&gt; &gt;&gt;&gt; Virginie\n&gt; =\r\n&gt;&gt;&gt;\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt; ------------------------------------\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;=\r\n&gt; Yahoo! Groups Links\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; ----------=\r\n--------------------------\n&gt; &gt;\n&gt; &gt; Yahoo! Groups Links\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt;\n\n\n\n"}}