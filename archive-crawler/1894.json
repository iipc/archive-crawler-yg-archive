{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":214587980,"authorName":"Christian Kohlschuetter","from":"Christian Kohlschuetter &lt;ck-heritrix@...&gt;","replyTo":"LIST","senderId":"zLcbe8-PrDuboIYIqU0cvgAUf2a5-e_xaS6kTvsDb0CSCro8xoXOFAHa5HJQDlyjEJOLMao3i1DnY-01rk3gxNOstce-0gslrkcflvG0Ksb4M3b7pq69ig","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] BDB, state, and disk usage, and other questions","postDate":"1117452267","msgId":1894,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDIwMDUwNTMwMTMyNC4yNzkyOS5jay1oZXJpdHJpeEBuZXdzY2x1Yi5kZT4=","inReplyToHeader":"PDQyOTRGMUE2LjMwMjAyMDFAYXJjaGl2ZS5vcmc+","referencesHeader":"PDE3MDQxLjYzNDc0LjkxNzcyLjkwMjI4MEB0aXBoYXJlcy5iYXNpc3RlY2gubmV0PiA8NDI5Mzg0MUUuMzA3MDcwM0BhcmNoaXZlLm9yZz4gPDQyOTRGMUE2LjMwMjAyMDFAYXJjaGl2ZS5vcmc+"},"prevInTopic":1887,"nextInTopic":1898,"prevInTime":1893,"nextInTime":1895,"topicId":1868,"numMessagesInTopic":9,"msgSnippet":"... Hello Gordon, I think these changes have broken something. With the changes applied, I get URIExceptions (usually hidden behind BDB s ","rawEmail":"Return-Path: &lt;ck-heritrix@...&gt;\r\nX-Sender: ck-heritrix@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 15333 invoked from network); 30 May 2005 11:24:30 -0000\r\nReceived: from unknown (66.218.66.167)\n  by m29.grp.scd.yahoo.com with QMQP; 30 May 2005 11:24:30 -0000\r\nReceived: from unknown (HELO mail.newsclub.de) (130.75.2.42)\n  by mta6.grp.scd.yahoo.com with SMTP; 30 May 2005 11:24:30 -0000\r\nReceived: (qmail 16077 invoked by uid 2002); 30 May 2005 11:24:29 -0000\r\nReceived: from ck-heritrix@... by nhf3.rrzn.uni-hannover.de by uid 207 with qmail-scanner-1.21 \n (clamscan: 0.67. spamassassin: 2.63.  Clear:RC:0(130.75.87.112):SA:0(-2.6/5.0):. \n Processed in 1.340721 secs); 30 May 2005 11:24:29 -0000\r\nX-Spam-Status: No, hits=-2.6 required=5.0\r\nReceived: from pc112.l3s.uni-hannover.de (HELO mail.newsclub.de) (webmail@...@130.75.87.112)\n  by nhf3.rrzn.uni-hannover.de with RC4-MD5 encrypted SMTP; 30 May 2005 11:24:27 -0000\r\nOrganization: NewsClub\r\nTo: archive-crawler@yahoogroups.com\r\nDate: Mon, 30 May 2005 13:24:27 +0200\r\nUser-Agent: KMail/1.8\r\nCc: Gordon Mohr &lt;gojomo@...&gt;\r\nReferences: &lt;17041.63474.91772.902280@...&gt; &lt;4293841E.3070703@...&gt; &lt;4294F1A6.3020201@...&gt;\r\nIn-Reply-To: &lt;4294F1A6.3020201@...&gt;\r\nMIME-Version: 1.0\r\nContent-Type: text/plain;\n  charset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nContent-Disposition: inline\r\nMessage-Id: &lt;200505301324.27929.ck-heritrix@...&gt;\r\nX-eGroups-Msg-Info: 1:12:0\r\nFrom: Christian Kohlschuetter &lt;ck-heritrix@...&gt;\r\nSubject: Re: [archive-crawler] BDB, state, and disk usage, and other questions\r\nX-Yahoo-Group-Post: member; u=214587980\r\n\r\nOn Wednesday 25 May 2005 23:44, Gordon Mohr wrote:\n&gt; Some quick investigati=\r\non revealed no giant things being mistakenly\n&gt; serialized out, but revealed=\r\n some opportunities for small changes that\n&gt; have cut the serialized size o=\r\nf CrawlURIs by 60% or more in short tests.\n&gt; (From averages of ~1100 bytes =\r\nto ~420 bytes in some short test crawls\n&gt; generating ~20000 serialized Craw=\r\nlURIs.)\n&gt;\n&gt; As serialized CrawlURIs in queues dominate our BDB contents -- =\r\nboth\n&gt; the in-memory cache, and on-disk files -- this could result in a\n&gt; n=\r\noticeably smaller disk footprint (and effectively &quot;larger&quot; cache\n&gt; at the s=\r\name memory cost).\n&gt;\n&gt; These changes have been committed to HEAD after some =\r\nminimal testing,\n&gt; so those willing to risk the bleeding edge are invited t=\r\no try them\n&gt; out.\n&gt;\n&gt; - Gordon @ IA\n\nHello Gordon,\n\nI think these changes h=\r\nave broken something.\n\nWith the changes applied, I get URIExceptions (usual=\r\nly hidden behind BDB&#39;s \nRuntimeExceptionWrapper), with messages like\n- &quot;Rel=\r\native URI but no \nbase: :http:/www.imagesjournal.com/issue02/reviews/mannoi=\r\nrs.htm&quot;\n- &quot;Invalid URL encoding&quot; (happens if URI&#39;s last character is &#39;%&#39;).\n=\r\n\nHere is a partial stacktrace from my own &quot;NewFrontier&quot; implementation (it =\r\nhas \nthe same problems as the BdbFrontier, but also shows the exception&#39;s c=\r\nause):\n\nCaused by: org.apache.commons.httpclient.URIException: Invalid URL =\r\nencoding\n\tat org.apache.commons.httpclient.URI.decode(URI.java:1768)\n\tat or=\r\ng.apache.commons.httpclient.URI.decode(URI.java:1724)\n\tat org.apache.common=\r\ns.httpclient.URI.getURI(URI.java:3743)\n\tat \norg.archive.crawler.datamodel.C=\r\nandidateURI.writeObject(CandidateURI.java:517)\n\tat sun.reflect.GeneratedMet=\r\nhodAccessor2.invoke(Unknown Source)\n\tat \nsun.reflect.DelegatingMethodAccess=\r\norImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.M=\r\nethod.invoke(Method.java:585)\n\tat java.io.ObjectStreamClass.invokeWriteObje=\r\nct(ObjectStreamClass.java:890)\n\tat java.io.ObjectOutputStream.writeSerialDa=\r\nta(ObjectOutputStream.java:1333)\n\tat \njava.io.ObjectOutputStream.writeOrdin=\r\naryObject(ObjectOutputStream.java:1284)\n\tat java.io.ObjectOutputStream.writ=\r\neObject0(ObjectOutputStream.java:1073)\n\tat java.io.ObjectOutputStream.write=\r\nObject(ObjectOutputStream.java:291)\n\tat \nde.kohlschuetter.collections.queue=\r\ns.BucketQueue.enqueue(BucketQueue.java:221)\n\tat org.archive.crawler.frontie=\r\nr.NewWorkQueue.insertItem(NewWorkQueue.java:53)\n\tat org.archive.crawler.fro=\r\nntier.WorkQueue.insert(WorkQueue.java:352)\n\tat org.archive.crawler.frontier=\r\n.WorkQueue.enqueue(WorkQueue.java:122)\n\t... 12 more\n\nI am not sure how/why =\r\n&quot;bad URIs&quot; reached that point, but without your patch, I \ndo not get any ex=\r\nceptions.\n-- \nChristian Kohlsch=FCtter\nmailto: ck -at- NewsClub.de\n\n"}}