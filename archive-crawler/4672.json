{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":24188052,"authorName":"kbhanor","from":"&quot;kbhanor&quot; &lt;gengler@...&gt;","profile":"kbhanor","replyTo":"LIST","senderId":"DHLdPkcuUnspCQ-Zsv1NcJ9pZiW6ClBUgeF1bj3lK81JKowsXjiuVNSmj0hb68r_Rk94EUuk5V2MT-pY2uU4Pdmq5Bs","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Having trouble using HTML form credentials","postDate":"1194640083","msgId":4672,"canDelete":false,"contentTrasformed":false,"systemMessage":true,"headers":{"messageIdInHeader":"PGZoMmZzais5OHRvQGVHcm91cHMuY29tPg=="},"prevInTopic":0,"nextInTopic":4673,"prevInTime":4671,"nextInTime":4673,"topicId":4672,"numMessagesInTopic":2,"msgSnippet":"I m using heretrix to crawl sites, download software packages and get signatures for the packages. One of the site I need to crawl is Red Hat s network site.","rawEmail":"Return-Path: &lt;gengler@...&gt;\r\nReceived: (qmail 44369 invoked from network); 9 Nov 2007 21:13:18 -0000\r\nReceived: from unknown (66.218.67.95)\n  by m54.grp.scd.yahoo.com with QMQP; 9 Nov 2007 21:13:18 -0000\r\nReceived: from unknown (HELO n41b.bullet.mail.sp1.yahoo.com) (66.163.168.155)\n  by mta16.grp.scd.yahoo.com with SMTP; 9 Nov 2007 21:13:15 -0000\r\nReceived: from [216.252.122.218] by n41.bullet.mail.sp1.yahoo.com with NNFMP; 09 Nov 2007 21:12:56 -0000\r\nReceived: from [209.73.164.86] by t3.bullet.sp1.yahoo.com with NNFMP; 09 Nov 2007 21:12:52 -0000\r\nReceived: from [66.218.66.84] by t8.bullet.scd.yahoo.com with NNFMP; 09 Nov 2007 21:12:52 -0000\r\nX-Sender: gengler@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 49306 invoked from network); 9 Nov 2007 20:28:04 -0000\r\nX-Received: from unknown (66.218.67.96)\n  by m56.grp.scd.yahoo.com with QMQP; 9 Nov 2007 20:28:04 -0000\r\nX-Received: from unknown (HELO n30a.bullet.sp1.yahoo.com) (209.131.38.252)\n  by mta17.grp.scd.yahoo.com with SMTP; 9 Nov 2007 20:28:04 -0000\r\nX-Received: from [216.252.122.218] by n30.bullet.sp1.yahoo.com with NNFMP; 09 Nov 2007 20:28:04 -0000\r\nX-Received: from [66.218.69.3] by t3.bullet.sp1.yahoo.com with NNFMP; 09 Nov 2007 20:28:04 -0000\r\nX-Received: from [66.218.66.92] by t3.bullet.scd.yahoo.com with NNFMP; 09 Nov 2007 20:28:04 -0000\r\nDate: Fri, 09 Nov 2007 20:28:03 -0000\r\nTo: archive-crawler@yahoogroups.com\r\nMessage-ID: &lt;fh2fsj+98to@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: &quot;kbhanor&quot; &lt;gengler@...&gt;\r\nSubject: Having trouble using HTML form credentials\r\nX-Yahoo-Group-Post: member; u=24188052; y=PQHPxDu5W-Z2ZngFJl9rj4jrAI2FY_S9roTro8izsZoN2w\r\nX-Yahoo-Profile: kbhanor\r\nX-eGroups-Approved-By: gojomo &lt;gojomo@...&gt; via web; 09 Nov 2007 21:12:51 -0000\r\n\r\nI&#39;m using heretrix to crawl sites, download software packages and get\nsigna=\r\ntures for the packages. One of the site I need to crawl is Red\nHat&#39;s &quot;netwo=\r\nrk&quot; site. To crawl the software archive (my only seed:\nhttps://rhn.redhat.c=\r\nom/rhn/software/channels/All.do), I need to first\nlogin at https://www.redh=\r\nat.com/wapps/sso/login.html. So, I added an\nHTML form credential to the sto=\r\nre with the following info:\n\ncredential-domain: rhn.redhat.com\nlogin-uri: h=\r\nttps://www.redhat.com/wapps/sso/login.html\nform-items:\n  failureRedirect -&gt;=\r\n http://www.redhat.com/wapps/sso/rhn/login.html\n  username -&gt; &lt;our user nam=\r\ne&gt;\n  password -&gt; &lt;our password&gt;\n  _flowId -&gt; legacy-login-flow\n  redirect -=\r\n&gt; https://rhn.redhat.com/rhn/YourRhn.do\n  _eventId_submit -&gt; Log In\n\nWhen I=\r\n submit the profile, I see some odd behavior in the logs: \n2007-11-09T19:22=\r\n:05.465Z 1   56 dns:rhn.redhat.com P\nhttps://rhn.redhat.com/rhn/software/ch=\r\nannels/All.do text/dns #003\n20071109192205373+90 sha1:56FWMAO4QAMR4X5BWPMIA=\r\nJALI4NMMXC2 - -\n2007-11-09T19:22:05.933Z 404 4122 https://rhn.redhat.com/ro=\r\nbots.txt P\nhttps://rhn.redhat.com/rhn/software/channels/All.do text/html #0=\r\n02\n20071109192205485+442 sha1:2TGT3C65BXL4HXUMQIO6QHQKEKNW2XVR - -\n2007-11-=\r\n09T19:22:06.107Z 1   55 dns:www.redhat.com PP\nhttps://www.redhat.com/wapps/=\r\nsso/login.html text/dns #040\n20071109192205997+108 sha1:DYZHL763P5DA4QKQA3R=\r\n57MU5CBJ6NGRS - -\n2007-11-09T19:22:06.132Z -50 -\nhttps://rhn.redhat.com/rhn=\r\n/software/channels/All.do - - no-type #016 -\n- - 30t\n2007-11-09T19:22:06.46=\r\n6Z 200 262 https://www.redhat.com/robots.txt PP\nhttps://www.redhat.com/wapp=\r\ns/sso/login.html text/plain #017\n20071109192206128+337 sha1:L7MLQG4YB4E7G32=\r\nFH6K5Q534XGKJUKHR - -\n2007-11-09T19:22:07.064Z 200 2725\nhttps://www.redhat.=\r\ncom/wapps/sso/login.html P\nhttps://rhn.redhat.com/rhn/software/channels/All=\r\n.do text/html #002\n20071109192206503+555 sha1:TYCM73SZIQXROBW3FLZDHPKSCUZWL=\r\nJBZ - 3t\n2007-11-09T19:22:07.643Z 200 2672\nhttps://www.redhat.com/wapps/sso=\r\n/login.html P\nhttps://rhn.redhat.com/rhn/software/channels/All.do text/html=\r\n #019\n20071109192207122+516 sha1:OGQE4L7XYC7SUCTICPBKRFG2CG7QSSNS - -\n2007-=\r\n11-09T19:22:08.289Z 200 2672\nhttps://www.redhat.com/wapps/sso/login.html P\n=\r\nhttps://rhn.redhat.com/rhn/software/channels/All.do text/html #039\n20071109=\r\n192207698+585 sha1:CHNJ2BBDLVFZM5YSOCGX5ZSMBZVEOSCY - -\n... \nand that last =\r\nline is repeated about 25 times. \n\nNow, I&#39;ve attached a debugger and watche=\r\nd. The seed is attempted\nkicking off the dns and robot.txt prereqs. Then, I=\r\n see it add the form\nlogin credential as a prereq. Now, sometimes I see the=\r\n form tried once\n, but inevitably, I see the seed attempted about 25 times =\r\nbefore the\nvast majority of login attempts are made. The order might be sim=\r\nply an\nartifact of the login form attempts being made in a separate thread\n=\r\nfrom the seed (they are different domains), but I have no idea why the\nseed=\r\n is attempted so many times and is putting so many identical\nprerequisites =\r\nin the queue.\n\nOh, and I can also see as I walk through the debugger (and i=\r\nn the log\nif set to FINE), that the login is occurring successfully and coo=\r\nkies\nare being sent back.\n\nNow, I have observed some confusion in the crede=\r\nntial-domain value\n(which can&#39;t have an https:// prefix OR a port suffix) a=\r\nnd the code\nthat selects a crawlserver in which to insert the credential av=\r\natar\n(which, using the https:// prefix on the seed(?) comes up with a key\nl=\r\nike &quot;rhn.redhat.com:443&quot;). But, I&#39;ve tried to circumvent that and I\ndon&#39;t t=\r\nhink it explains the 25 identical prerequisites anyway.\n\nAny help / advice =\r\nwould be appreciated.\n\nThe order.xml can be found at http://server.gengler.=\r\norg/order.xml.\nYou&#39;ll see some custom deciding rules and writers that I&#39;ve =\r\nadded for\nour package processing needs.\n\n\n"}}