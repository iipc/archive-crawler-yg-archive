{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":526789874,"authorName":"Nicholas Clarke","from":"Nicholas Clarke &lt;nicl@...&gt;","replyTo":"LIST","senderId":"VN9a4ZSuz9FfysRBXnxLGw7YPX4sb8bO2BipQVXlFdSmjGTFIZk0w1F8-x6JjrSe6CrT7emOTmH5rVhDQPJk0f3gdw","spamInfo":{"isSpam":false,"reason":"6"},"subject":"SV: [archive-crawler] writing WARC files","postDate":"1352315945","msgId":7852,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDU2MkUxOTBEOTJFODkxNDg4NDFCREYwNTVENjQyQzg0MUQ0NTQyOERARVhDSEFOR0UtMDEua2IuZGs+","inReplyToHeader":"PGs3YW44Mys0ZnRvQGVHcm91cHMuY29tPg==","referencesHeader":"PGs3YW44Mys0ZnRvQGVHcm91cHMuY29tPg=="},"prevInTopic":7850,"nextInTopic":7853,"prevInTime":7851,"nextInTime":7853,"topicId":7850,"numMessagesInTopic":3,"msgSnippet":"There is working code for copying a warcrecord from one file to another in the following link. insertWARCFile and copySingleRecord. ","rawEmail":"Return-Path: &lt;nicl@...&gt;\r\nX-Sender: nicl@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 94732 invoked from network); 7 Nov 2012 19:19:09 -0000\r\nX-Received: from unknown (98.137.35.162)\n  by m6.grp.sp2.yahoo.com with QMQP; 7 Nov 2012 19:19:09 -0000\r\nX-Received: from unknown (HELO post.kb.dk) (130.226.229.20)\n  by mta6.grp.sp2.yahoo.com with SMTP; 7 Nov 2012 19:19:08 -0000\r\nX-Received: from localhost (localhost.localdomain [127.0.0.1])\n\tby post.kb.dk (Postfix) with ESMTP id 3A45B4172EE\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Wed,  7 Nov 2012 20:19:07 +0100 (CET)\r\nX-Quarantine-ID: &lt;1jAZJdZZn5+P&gt;\r\nX-Received: from post.kb.dk ([127.0.0.1])\n\tby localhost (post.kb.dk [127.0.0.1]) (amavisd-new, port 10024)\n\twith LMTP id 1jAZJdZZn5+P for &lt;archive-crawler@yahoogroups.com&gt;;\n\tWed,  7 Nov 2012 20:19:07 +0100 (CET)\r\nX-Received: from EXCHANGE-02.kb.dk (unknown [130.226.220.131])\n\tby post.kb.dk (Postfix) with ESMTP id 2641F4172CA\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Wed,  7 Nov 2012 20:19:07 +0100 (CET)\r\nX-Received: from EXCHANGE-01.kb.dk ([fe80::f4ed:9e9f:7925:a8e2]) by\n EXCHANGE-02.kb.dk ([fe80::d47b:397f:4d5b:33e4%17]) with mapi id\n 14.02.0298.004; Wed, 7 Nov 2012 20:19:07 +0100\r\nTo: &quot;archive-crawler@yahoogroups.com&quot; &lt;archive-crawler@yahoogroups.com&gt;\r\nThread-Topic: [archive-crawler] writing WARC files\r\nThread-Index: AQHNvAXxg9uoAnzZlUutfVmWlr1zPJfev0Mw\r\nDate: Wed, 7 Nov 2012 19:19:05 +0000\r\nMessage-ID: &lt;562E190D92E89148841BDF055D642C841D45428D@...&gt;\r\nReferences: &lt;k7an83+4fto@...&gt;\r\nIn-Reply-To: &lt;k7an83+4fto@...&gt;\r\nAccept-Language: en-US, da-DK\r\nContent-Language: da-DK\r\nX-MS-Has-Attach: yes\r\nX-MS-TNEF-Correlator:\r\nContent-Type: multipart/related;\n\tboundary=&quot;_005_562E190D92E89148841BDF055D642C841D45428DEXCHANGE01kbdk_&quot;;\n\ttype=&quot;multipart/alternative&quot;\r\nMIME-Version: 1.0\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: Nicholas Clarke &lt;nicl@...&gt;\r\nSubject: SV: [archive-crawler] writing WARC files\r\nX-Yahoo-Group-Post: member; u=526789874\r\n\r\n\r\n--_005_562E190D92E89148841BDF055D642C841D45428DEXCHANGE01kbdk_\r\nContent-Type: multipart/alternative;\n\tboundary=&quot;_000_562E190D92E89148841BDF055D642C841D45428DEXCHANGE01kbdk_&quot;\r\n\r\n\r\n--_000_562E190D92E89148841BDF055D642C841D45428DEXCHANGE01kbdk_\r\nContent-Type: text/plain; charset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nThere is working code for copying a warcrecord from one file to another in =\r\nthe following link.\ninsertWARCFile and copySingleRecord.\n\nhttps://sbforge.o=\r\nrg/fisheye/browse/NetarchiveSuite/trunk/src/dk/netarkivet/common/utils/warc=\r\n/WARCUtils.java?r1=3D2517&r2=3D2517&u=3D-1\n\n-Nicholas\n\nFra: archive-crawler=\r\n@yahoogroups.com [mailto:archive-crawler@yahoogroups.com] P=E5 vegne af rjo=\r\nberon80\nSendt: 6. november 2012 11:03\nTil: archive-crawler@yahoogroups.com\n=\r\nEmne: [archive-crawler] writing WARC files\n\n\n\nHello,\n\nI am in the process o=\r\nf filtering out crawled content and therefore I would like to write records=\r\n to WARC files. I thought that something like that would work:\n\nfinal WARCW=\r\nriter warcWriter =3D new WARCWriter(...);\nfinal WARCReader warcReader =3D W=\r\nARCReaderFactory.get(srcFile);\n\nfor (final ArchiveRecord archiveRecord : wa=\r\nrcReader) {\nif (!filter.accept(archiveRecord)) continue;\nwarcWriter.writeAr=\r\nchiveRecord(archiveRecord);\n}\nwarcWriter.close();\n\nUnfortunately, it seems =\r\nto be not so simple as I thought, since the warcWriter does not accept Arch=\r\niveRecords. :-(\n\nHas someone implemented something like the above? I am cur=\r\nrently at the stage of doing this:\n\npublic static void copy(final String sr=\r\ncFile, final String dstDir, final String dstTemplate, final ArchiveRecordFi=\r\nlter filter) throws IOException, URISyntaxException {\nfinal WARCWriterPoolS=\r\nettingsData warcWriterPoolSettingsData =3D new WARCWriterPoolSettingsData(&quot;=\r\ntest&quot;, dstTemplate, 1024*1024*1024l, true, Collections.singletonList(new Fi=\r\nle(dstDir)), Collections.&lt;String&gt;emptyList(), new UUIDGenerator());\nfinal W=\r\nARCWriter warcWriter =3D new WARCWriter(new AtomicInteger(42), warcWriterPo=\r\nolSettingsData);\nfinal WARCReader warcReader =3D WARCReaderFactory.get(new =\r\nFile(srcFile));\n\nfor (final ArchiveRecord archiveRecord : warcReader) {\nif =\r\n(!filter.accept(archiveRecord)) continue;\n\nfinal ArchiveRecordHeader header=\r\n =3D archiveRecord.getHeader();\n\nfinal ByteArrayOutputStream out =3D new By=\r\nteArrayOutputStream();\narchiveRecord.dump(out);\nfinal ByteArrayInputStream =\r\nin =3D new ByteArrayInputStream(out.toByteArray());\n\nfinal URI recordId =3D=\r\n new URI(&quot;record:&quot; + header.getRecordIdentifier());\nfinal ANVLRecord namedF=\r\nields =3D new ANVLRecord();\nwarcWriter.writeResponseRecord(header.getUrl(),=\r\n header.getDate(), header.getMimetype(), recordId, namedFields, in, out.siz=\r\ne());\n}\nwarcWriter.close();\n}\n\nBut this is lossy since I just &quot;invented&quot; so=\r\nme values for the method parameters where I did not know what to use. And o=\r\nf course, it for now only works for ResponseRecords.\n\nBest regards,\nRobert\n=\r\n\n\r\n--_000_562E190D92E89148841BDF055D642C841D45428DEXCHANGE01kbdk_\r\nContent-Type: text/html; charset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;html xmlns:v=3D&quot;urn:schemas-microsoft-com:vml&quot; xmlns:o=3D&quot;urn:schemas-micr=\r\nosoft-com:office:office&quot; xmlns:w=3D&quot;urn:schemas-microsoft-com:office:word&quot; =\r\nxmlns:m=3D&quot;http://schemas.microsoft.com/office/2004/12/omml&quot; xmlns=3D&quot;http:=\r\n//www.w3.org/TR/REC-html40&quot;&gt;\n&lt;head&gt;\n&lt;meta http-equiv=3D&quot;Content-Type&quot; conte=\r\nnt=3D&quot;text/html; charset=3Diso-8859-1&quot;&gt;\n&lt;meta name=3D&quot;Generator&quot; content=3D=\r\n&quot;Microsoft Word 12 (filtered medium)&quot;&gt;\n&lt;!--[if !mso]&gt;&lt;style&gt;v&#92;:* {behavior:=\r\nurl(#default#VML);}\no&#92;:* {behavior:url(#default#VML);}\nw&#92;:* {behavior:url(#=\r\ndefault#VML);}\n.shape {behavior:url(#default#VML);}\n&lt;/style&gt;&lt;![endif]--&gt;&lt;st=\r\nyle&gt;&lt;!--\n/* Font Definitions */\n@font-face\n\t{font-family:Wingdings;\n\tpanose=\r\n-1:5 0 0 0 0 0 0 0 0 0;}\n@font-face\n\t{font-family:&quot;Cambria Math&quot;;\n\tpanose-1=\r\n:2 4 5 3 5 4 6 3 2 4;}\n@font-face\n\t{font-family:Calibri;\n\tpanose-1:2 15 5 2=\r\n 2 2 4 3 2 4;}\n@font-face\n\t{font-family:Tahoma;\n\tpanose-1:2 11 6 4 3 5 4 4 =\r\n2 4;}\n@font-face\n\t{font-family:Consolas;\n\tpanose-1:2 11 6 9 2 2 4 3 2 4;}\n@=\r\nfont-face\n\t{font-family:Verdana;\n\tpanose-1:2 11 6 4 3 5 4 4 2 4;}\n/* Style =\r\nDefinitions */\np.MsoNormal, li.MsoNormal, div.MsoNormal\n\t{margin:0cm;\n\tmarg=\r\nin-bottom:.0001pt;\n\tfont-size:12.0pt;\n\tfont-family:&quot;Times New Roman&quot;,&quot;serif=\r\n&quot;;}\na:link, span.MsoHyperlink\n\t{mso-style-priority:99;\n\tcolor:blue;\n\ttext-d=\r\necoration:underline;}\na:visited, span.MsoHyperlinkFollowed\n\t{mso-style-prio=\r\nrity:99;\n\tcolor:purple;\n\ttext-decoration:underline;}\np\n\t{mso-style-priority=\r\n:99;\n\tmso-margin-top-alt:auto;\n\tmargin-right:0cm;\n\tmso-margin-bottom-alt:au=\r\nto;\n\tmargin-left:0cm;\n\tfont-size:12.0pt;\n\tfont-family:&quot;Times New Roman&quot;,&quot;se=\r\nrif&quot;;}\ncode\n\t{mso-style-priority:99;\n\tfont-family:&quot;Courier New&quot;;}\npre\n\t{mso=\r\n-style-priority:99;\n\tmso-style-link:&quot;Formateret HTML   Tegn&quot;;\n\tmargin:0cm;\n=\r\n\tmargin-bottom:.0001pt;\n\tfont-size:10.0pt;\n\tfont-family:&quot;Courier New&quot;;}\ntt\n=\r\n\t{mso-style-priority:99;\n\tfont-family:&quot;Courier New&quot;;}\nspan.cat\n\t{mso-style-=\r\nname:cat;}\nspan.ct\n\t{mso-style-name:ct;}\nspan.FormateretHTMLTegn\n\t{mso-styl=\r\ne-name:&quot;Formateret HTML   Tegn&quot;;\n\tmso-style-priority:99;\n\tmso-style-link:&quot;F=\r\normateret HTML  &quot;;\n\tfont-family:Consolas;}\np.attach, li.attach, div.attach\n=\r\n\t{mso-style-name:attach;\n\tmso-margin-top-alt:auto;\n\tmargin-right:0cm;\n\tmso-=\r\nmargin-bottom-alt:auto;\n\tmargin-left:0cm;\n\tfont-size:9.0pt;\n\tfont-family:&quot;A=\r\nrial&quot;,&quot;sans-serif&quot;;}\np.bold, li.bold, div.bold\n\t{mso-style-name:bold;\n\tmso-=\r\nmargin-top-alt:auto;\n\tmargin-right:0cm;\n\tmso-margin-bottom-alt:auto;\n\tmargi=\r\nn-left:0cm;\n\tfont-size:10.0pt;\n\tfont-family:&quot;Arial&quot;,&quot;sans-serif&quot;;\n\tfont-wei=\r\nght:bold;}\np.green, li.green, div.green\n\t{mso-style-name:green;\n\tmso-margin=\r\n-top-alt:auto;\n\tmargin-right:0cm;\n\tmso-margin-bottom-alt:auto;\n\tmargin-left=\r\n:0cm;\n\tfont-size:12.0pt;\n\tfont-family:&quot;Times New Roman&quot;,&quot;serif&quot;;\n\tcolor:#62=\r\n8C2A;}\np.replbq, li.replbq, div.replbq\n\t{mso-style-name:replbq;\n\tmargin:3.0=\r\npt;\n\tfont-size:12.0pt;\n\tfont-family:&quot;Times New Roman&quot;,&quot;serif&quot;;}\np.ad, li.ad=\r\n, div.ad\n\t{mso-style-name:ad;\n\tmso-margin-top-alt:auto;\n\tmargin-right:0cm;\n=\r\n\tmso-margin-bottom-alt:auto;\n\tmargin-left:0cm;\n\tfont-size:12.0pt;\n\tfont-fam=\r\nily:&quot;Times New Roman&quot;,&quot;serif&quot;;}\np.underline, li.underline, div.underline\n\t{=\r\nmso-style-name:underline;\n\tmso-margin-top-alt:auto;\n\tmargin-right:0cm;\n\tmso=\r\n-margin-bottom-alt:auto;\n\tmargin-left:0cm;\n\tfont-size:12.0pt;\n\tfont-family:=\r\n&quot;Times New Roman&quot;,&quot;serif&quot;;}\nspan.yshortcuts\n\t{mso-style-name:yshortcuts;}\np=\r\n.ad1, li.ad1, div.ad1\n\t{mso-style-name:ad1;\n\tmso-margin-top-alt:auto;\n\tmarg=\r\nin-right:0cm;\n\tmso-margin-bottom-alt:auto;\n\tmargin-left:0cm;\n\tfont-size:12.=\r\n0pt;\n\tfont-family:&quot;Times New Roman&quot;,&quot;serif&quot;;}\np.ad2, li.ad2, div.ad2\n\t{mso-=\r\nstyle-name:ad2;\n\tmso-margin-top-alt:auto;\n\tmargin-right:0cm;\n\tmargin-bottom=\r\n:7.5pt;\n\tmargin-left:0cm;\n\tfont-size:12.0pt;\n\tfont-family:&quot;Times New Roman&quot;=\r\n,&quot;serif&quot;;}\np.underline1, li.underline1, div.underline1\n\t{mso-style-name:und=\r\nerline1;\n\tmso-margin-top-alt:auto;\n\tmargin-right:0cm;\n\tmso-margin-bottom-al=\r\nt:auto;\n\tmargin-left:0cm;\n\tfont-size:12.0pt;\n\tfont-family:&quot;Times New Roman&quot;=\r\n,&quot;serif&quot;;\n\ttext-decoration:underline;}\nspan.yshortcuts1\n\t{mso-style-name:ys=\r\nhortcuts1;\n\tfont-family:&quot;Verdana&quot;,&quot;sans-serif&quot;;\n\tfont-weight:bold;}\nspan.ys=\r\nhortcuts2\n\t{mso-style-name:yshortcuts2;\n\tfont-family:&quot;Verdana&quot;,&quot;sans-serif&quot;=\r\n;\n\tfont-weight:normal;}\nspan.EmailStyle36\n\t{mso-style-type:personal-reply;\n=\r\n\tfont-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;\n\tcolor:#1F497D;}\n.MsoChpDefault\n\t{mso-=\r\nstyle-type:export-only;\n\tfont-size:10.0pt;}\n@page WordSection1\n\t{size:612.0=\r\npt 792.0pt;\n\tmargin:72.0pt 72.0pt 72.0pt 72.0pt;}\ndiv.WordSection1\n\t{page:W=\r\nordSection1;}\n/* List Definitions */\n@list l0\n\t{mso-list-id:724061412;\n\tmso=\r\n-list-template-ids:230448754;}\n@list l0:level1\n\t{mso-level-number-format:bu=\r\nllet;\n\tmso-level-text:&#92;F0B7;\n\tmso-level-tab-stop:36.0pt;\n\tmso-level-number-=\r\nposition:left;\n\ttext-indent:-18.0pt;\n\tmso-ansi-font-size:10.0pt;\n\tfont-fami=\r\nly:Symbol;}\nol\n\t{margin-bottom:0cm;}\nul\n\t{margin-bottom:0cm;}\n--&gt;&lt;/style&gt;&lt;!=\r\n--[if gte mso 9]&gt;&lt;xml&gt;\n&lt;o:shapedefaults v:ext=3D&quot;edit&quot; spidmax=3D&quot;1026&quot; /&gt;\n=\r\n&lt;/xml&gt;&lt;![endif]--&gt;&lt;!--[if gte mso 9]&gt;&lt;xml&gt;\n&lt;o:shapelayout v:ext=3D&quot;edit&quot;&gt;\n&lt;=\r\no:idmap v:ext=3D&quot;edit&quot; data=3D&quot;1&quot; /&gt;\n&lt;/o:shapelayout&gt;&lt;/xml&gt;&lt;![endif]--&gt;\n&lt;/h=\r\nead&gt;\n&lt;body bgcolor=3D&quot;white&quot; lang=3D&quot;DA&quot; link=3D&quot;blue&quot; vlink=3D&quot;purple&quot;&gt;\n&lt;d=\r\niv class=3D&quot;WordSection1&quot;&gt;\n&lt;p class=3D&quot;MsoNormal&quot;&gt;&lt;span lang=3D&quot;EN-US&quot; styl=\r\ne=3D&quot;font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot=\r\n;;color:#1F497D&quot;&gt;There is working code for copying a warcrecord from one fi=\r\nle to another in the following link.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;\n&lt;p class=3D&quot;MsoN=\r\normal&quot;&gt;&lt;span lang=3D&quot;EN-US&quot; style=3D&quot;font-size:11.0pt;font-family:&quot;Cal=\r\nibri&quot;,&quot;sans-serif&quot;;color:#1F497D&quot;&gt;insertWARCFile and copySin=\r\ngleRecord.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;\n&lt;p class=3D&quot;MsoNormal&quot;&gt;&lt;span lang=3D&quot;EN-US=\r\n&quot; style=3D&quot;font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-seri=\r\nf&quot;;color:#1F497D&quot;&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;\n&lt;p class=3D&quot;MsoNormal&quot;&gt;=\r\n&lt;span style=3D&quot;font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-=\r\nserif&quot;;color:#1F497D&quot;&gt;&lt;a href=3D&quot;https://sbforge.org/fisheye/browse/Ne=\r\ntarchiveSuite/trunk/src/dk/netarkivet/common/utils/warc/WARCUtils.java?r1=\r\n=3D2517&amp;r2=3D2517&amp;u=3D-1&quot;&gt;&lt;span lang=3D&quot;EN-US&quot;&gt;https://sbforge.org/=\r\nfisheye/browse/NetarchiveSuite/trunk/src/dk/netarkivet/common/utils/warc/WA=\r\nRCUtils.java?r1=3D2517&amp;r2=3D2517&amp;u=3D-1&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;span lang=\r\n=3D&quot;EN-US&quot; style=3D&quot;font-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;=\r\nsans-serif&quot;;color:#1F497D&quot;&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;\n&lt;p class=3D&quot;MsoNorma=\r\nl&quot;&gt;&lt;span lang=3D&quot;EN-US&quot; style=3D&quot;font-size:11.0pt;font-family:&quot;Calibri=\r\n&quot;,&quot;sans-serif&quot;;color:#1F497D&quot;&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;\n&lt;=\r\np class=3D&quot;MsoNormal&quot;&gt;&lt;span lang=3D&quot;EN-US&quot; style=3D&quot;font-size:11.0pt;font-f=\r\namily:&quot;Calibri&quot;,&quot;sans-serif&quot;;color:#1F497D&quot;&gt;-Nicholas&lt;o=\r\n:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;\n&lt;p class=3D&quot;MsoNormal&quot;&gt;&lt;span lang=3D&quot;EN-US&quot; style=3D&quot;f=\r\nont-size:11.0pt;font-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;colo=\r\nr:#1F497D&quot;&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;\n&lt;div style=3D&quot;border:none;border-le=\r\nft:solid blue 1.5pt;padding:0cm 0cm 0cm 4.0pt&quot;&gt;\n&lt;div&gt;\n&lt;div style=3D&quot;border:=\r\nnone;border-top:solid #B5C4DF 1.0pt;padding:3.0pt 0cm 0cm 0cm&quot;&gt;\n&lt;p class=3D=\r\n&quot;MsoNormal&quot;&gt;&lt;b&gt;&lt;span style=3D&quot;font-size:10.0pt;font-family:&quot;Tahoma&quo=\r\nt;,&quot;sans-serif&quot;&quot;&gt;Fra:&lt;/span&gt;&lt;/b&gt;&lt;span style=3D&quot;font-size:10.0pt;f=\r\nont-family:&quot;Tahoma&quot;,&quot;sans-serif&quot;&quot;&gt; archive-crawler@yaho=\r\nogroups.com [mailto:archive-crawler@yahoogroups.com]\n&lt;b&gt;P=E5 vegne af &lt;/b&gt;r=\r\njoberon80&lt;br&gt;\n&lt;b&gt;Sendt:&lt;/b&gt; 6. november 2012 11:03&lt;br&gt;\n&lt;b&gt;Til:&lt;/b&gt; archive-=\r\ncrawler@yahoogroups.com&lt;br&gt;\n&lt;b&gt;Emne:&lt;/b&gt; [archive-crawler] writing WARC fil=\r\nes&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;p class=3D&quot;MsoNormal&quot;&gt;&lt;o:p&gt;&nbsp;&lt;/=\r\no:p&gt;&lt;/p&gt;\n&lt;p class=3D&quot;MsoNormal&quot;&gt;&nbsp; &lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;\n&lt;div id=3D&quot;ygrp-mlms=\r\ng&quot;&gt;\n&lt;div id=3D&quot;ygrp-msg&quot;&gt;\n&lt;div id=3D&quot;ygrp-text&quot;&gt;\n&lt;p style=3D&quot;margin-bottom:=\r\n12.0pt&quot;&gt;Hello,&lt;br&gt;\n&lt;br&gt;\nI am in the process of filtering out crawled conten=\r\nt and therefore I would like to write records to WARC files. I thought that=\r\n something like that would work:&lt;br&gt;\n&lt;br&gt;\nfinal WARCWriter warcWriter =3D n=\r\new WARCWriter(...);&lt;br&gt;\nfinal WARCReader warcReader =3D WARCReaderFactory.g=\r\net(srcFile);&lt;br&gt;\n&lt;br&gt;\nfor (final ArchiveRecord archiveRecord : warcReader) =\r\n{&lt;br&gt;\nif (!filter.accept(archiveRecord)) continue;&lt;br&gt;\nwarcWriter.writeArch=\r\niveRecord(archiveRecord);&lt;br&gt;\n}&lt;br&gt;\nwarcWriter.close();&lt;br&gt;\n&lt;br&gt;\nUnfortunat=\r\nely, it seems to be not so simple as I thought, since the warcWriter does n=\r\not accept ArchiveRecords. :-(&lt;br&gt;\n&lt;br&gt;\nHas someone implemented something li=\r\nke the above? I am currently at the stage of doing this:&lt;br&gt;\n&lt;br&gt;\npublic st=\r\natic void copy(final String srcFile, final String dstDir, final String dstT=\r\nemplate, final ArchiveRecordFilter filter) throws IOException, URISyntaxExc=\r\neption {&lt;br&gt;\nfinal WARCWriterPoolSettingsData warcWriterPoolSettingsData =\r\n=3D new WARCWriterPoolSettingsData(&quot;test&quot;, dstTemplate, 1024*1024=\r\n*1024l, true, Collections.singletonList(new File(dstDir)), Collections.&lt;=\r\nString&gt;emptyList(), new UUIDGenerator());&lt;br&gt;\nfinal WARCWriter warcWrite=\r\nr =3D new WARCWriter(new AtomicInteger(42), warcWriterPoolSettingsData);&lt;br=\r\n&gt;\nfinal WARCReader warcReader =3D WARCReaderFactory.get(new File(srcFile));=\r\n&lt;br&gt;\n&lt;br&gt;\nfor (final ArchiveRecord archiveRecord : warcReader) {&lt;br&gt;\nif (!f=\r\nilter.accept(archiveRecord)) continue;&lt;br&gt;\n&lt;br&gt;\nfinal ArchiveRecordHeader h=\r\neader =3D archiveRecord.getHeader();&lt;br&gt;\n&lt;br&gt;\nfinal ByteArrayOutputStream o=\r\nut =3D new ByteArrayOutputStream();&lt;br&gt;\narchiveRecord.dump(out);&lt;br&gt;\nfinal =\r\nByteArrayInputStream in =3D new ByteArrayInputStream(out.toByteArray());&lt;br=\r\n&gt;\n&lt;br&gt;\nfinal URI recordId =3D new URI(&quot;record:&quot; &#43; header.getR=\r\necordIdentifier());&lt;br&gt;\nfinal ANVLRecord namedFields =3D new ANVLRecord();&lt;=\r\nbr&gt;\nwarcWriter.writeResponseRecord(header.getUrl(), header.getDate(), heade=\r\nr.getMimetype(), recordId, namedFields, in, out.size());&lt;br&gt;\n}&lt;br&gt;\nwarcWrit=\r\ner.close();&lt;br&gt;\n}&lt;br&gt;\n&lt;br&gt;\nBut this is lossy since I just &quot;invented&qu=\r\not; some values for the method parameters where I did not know what to use.=\r\n And of course, it for now only works for ResponseRecords.&lt;br&gt;\n&lt;br&gt;\nBest re=\r\ngards,&lt;br&gt;\nRobert&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;\n&lt;/div&gt;\n&lt;div&gt;\n&lt;p class=3D&quot;MsoNormal&quot;&gt;&lt;span =\r\nstyle=3D&quot;color:white&quot;&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;=\r\n/html&gt;\n\r\n--_000_562E190D92E89148841BDF055D642C841D45428DEXCHANGE01kbdk_--\r\n\n\r\n--_005_562E190D92E89148841BDF055D642C841D45428DEXCHANGE01kbdk_\r\nContent-Type: image/jpeg; name=&quot;image001.jpg&quot;\r\nContent-Description: image001.jpg\r\nContent-Disposition: inline; filename=&quot;image001.jpg&quot;; size=359;\n\tcreation-date=&quot;Wed, 07 Nov 2012 19:19:05 GMT&quot;;\n\tmodification-date=&quot;Wed, 07 Nov 2012 19:19:05 GMT&quot;\r\nContent-ID: &lt;image001.jpg@01CDBD24.813E52B0&gt;\r\n\r\n[ Attachment content not displayed ]\r\n--_005_562E190D92E89148841BDF055D642C841D45428DEXCHANGE01kbdk_\r\nContent-Type: image/jpeg; name=&quot;image002.jpg&quot;\r\nContent-Description: image002.jpg\r\nContent-Disposition: inline; filename=&quot;image002.jpg&quot;; size=332;\n\tcreation-date=&quot;Wed, 07 Nov 2012 19:19:05 GMT&quot;;\n\tmodification-date=&quot;Wed, 07 Nov 2012 19:19:05 GMT&quot;\r\nContent-ID: &lt;image002.jpg@01CDBD24.813E52B0&gt;\r\n\r\n[ Attachment content not displayed ]\r\n--_005_562E190D92E89148841BDF055D642C841D45428DEXCHANGE01kbdk_--\r\n\n"}}