{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":327956242,"authorName":"Goel, Ankur","from":"&quot;Goel, Ankur&quot; &lt;Ankur.Goel@...&gt;","profile":"ankur_goel79","replyTo":"LIST","senderId":"iZS4Fz2MaUv-ozwYAzx7ah1QXlIfnhOn-Dpuwu8hg1-lISXsj1bviOQa4E1_I6Ipy76f7leJseLHhl9bav3YFtphit0UQWpfUYarmzzU","spamInfo":{"isSpam":false,"reason":"12"},"subject":"RE: [archive-crawler] Distribution using Consistent Hashing scheme","postDate":"1209980067","msgId":5172,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDhGMTE3MjJBMDU2MkJCNEY4MEE2ODBFRDRDRkVEMEQ1MDFDRUVGNTNARVZTQk5HMDIuYWQub2ZmaWNlLmFvbC5jb20+","inReplyToHeader":"PDQ4MUIzRkY2LjYwMjA0MDlAZHVib2NlLm5ldD4="},"prevInTopic":5171,"nextInTopic":0,"prevInTime":5171,"nextInTime":5173,"topicId":5152,"numMessagesInTopic":7,"msgSnippet":"Michael, We have been running the crawls in our dev environments which is a cluster of 7 crawlers. Some of the other groups have been using it for larger","rawEmail":"Return-Path: &lt;Ankur.Goel@...&gt;\r\nX-Sender: Ankur.Goel@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 38216 invoked from network); 5 May 2008 09:34:38 -0000\r\nX-Received: from unknown (66.218.67.94)\n  by m54.grp.scd.yahoo.com with QMQP; 5 May 2008 09:34:38 -0000\r\nX-Received: from unknown (HELO c3po.nscp.aoltw.net) (64.236.137.25)\n  by mta15.grp.scd.yahoo.com with SMTP; 5 May 2008 09:34:37 -0000\r\nX-Received: from AOLDTCMEH01.ad.office.aol.com (aoldtcmeh01.office.aol.com [10.180.121.20])\n\tby c3po.nscp.aoltw.net (8.10.0/8.10.0) with ESMTP id m459YVd16840\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Mon, 5 May 2008 02:34:31 -0700 (PDT)\r\nX-Received: from EVSBNG02.ad.office.aol.com ([10.146.190.243]) by AOLDTCMEH01.ad.office.aol.com with Microsoft SMTPSVC(6.0.3790.3959);\n\t Mon, 5 May 2008 05:34:32 -0400\r\nX-MimeOLE: Produced By Microsoft Exchange V6.5\r\nContent-class: urn:content-classes:message\r\nMIME-Version: 1.0\r\nContent-Type: multipart/alternative;\n\tboundary=&quot;----_=_NextPart_001_01C8AE93.36E8E1D2&quot;\r\nDate: Mon, 5 May 2008 15:04:27 +0530\r\nMessage-ID: &lt;8F11722A0562BB4F80A680ED4CFED0D501CEEF53@...&gt;\r\nIn-Reply-To: &lt;481B3FF6.6020409@...&gt;\r\nX-MS-Has-Attach: \r\nX-MS-TNEF-Correlator: \r\nThread-Topic: [archive-crawler] Distribution using Consistent Hashing scheme\r\nThread-Index: AciscPr9Xv2Z46ECQfCX6FdzINf0KwCIV16Q\r\nTo: &lt;archive-crawler@yahoogroups.com&gt;\r\nX-OriginalArrivalTime: 05 May 2008 09:34:32.0374 (UTC) FILETIME=[393C5560:01C8AE93]\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: &quot;Goel, Ankur&quot; &lt;Ankur.Goel@...&gt;\r\nSubject: RE: [archive-crawler] Distribution using Consistent Hashing scheme\r\nX-Yahoo-Group-Post: member; u=327956242; y=D3d69R-t4cy_fFX8ivRnyYkEF-unvaZz59KjwiHZ4NSKSDypj1my\r\nX-Yahoo-Profile: ankur_goel79\r\n\r\n\r\n------_=_NextPart_001_01C8AE93.36E8E1D2\r\nContent-Type: text/plain;\n\tcharset=&quot;us-ascii&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nMichael,\n            We have been running the crawls in our dev environment=\r\ns\nwhich is a cluster of 7 crawlers.\nSome of the other groups have been usin=\r\ng it for larger crawls.\n \nWe did use the CHF from mg4j jar. Not sure if tha=\r\nt would require it to\nbe removed if this code gets\ninto heritrix.\n \nJMX has=\r\n been pretty good so far. We use proxy communication in\nDistributor to send=\r\n a list of \nCandidateURIs to the crawler node.\n \nFor integrating with Herit=\r\nrix 2.0, I mentioned the technical and legal\nconcerns in an earlier post.\n =\r\n\n-Ankur\n\n________________________________\n\nFrom: archive-crawler@yahoogroup=\r\ns.com\n[mailto:archive-crawler@yahoogroups.com] On Behalf Of stack\nSent: Fri=\r\nday, May 02, 2008 9:53 PM\nTo: archive-crawler@yahoogroups.com\nSubject: Re: =\r\n[archive-crawler] Distribution using Consistent Hashing\nscheme\n\n\n\nSounds re=\r\nally great Ankur.\n\nHow has it been working for you? What size clusters have=\r\n you been \nrunning with?\n\nOut of interest, did you use the CHF from the mg4=\r\nj jar or write your\nown?\n\nHow has JMX been working out for you? Its OK maki=\r\nng the invocation \nthough the payload is small -- just an URL? (Do you send=\r\n just an URL or \nan CrawlURI?). When the (b)UBIcrawler folks were through l=\r\nast, they \ntalked highly of jgroups over UDP as being good for small\ncommun=\r\nications.\n\nWhat would be in the way, if anything, of your migrating the \ndi=\r\nstribution to Heritrix 2.0?\n\nSt.Ack\n\nGoel, Ankur wrote:\n&gt;\n&gt; Hi Folks,\n&gt; We =\r\nhave our own implementation of the crawl farm based on \n&gt; top of Heritrix 1=\r\n.6. We moved to version 1.13 sometime back.\n&gt; As a part of our work we have=\r\n extended the heritrix code and \n&gt; implemented a consistent hashing scheme =\r\nfor maintaining politeness\n&gt; and consistent distribution. We would like to =\r\ncontribute some of our \n&gt; distribution related code to the heritrix communi=\r\nty.\n&gt; \n&gt; Let me give a brief idea of what we have done that we would like t=\r\no \n&gt; contribute.\n&gt; \n&gt; 1. Each crawl node (called crawl engine in heritrix 2=\r\n.0) \n&gt; is responsible for figuring out if it should crawl the \n&gt; recieved/e=\r\nxtracted URLs\n&gt; or the right crawler node that should be crawling it and di=\r\nspatches \n&gt; the URLs over JMX to the appropriate node.\n&gt; \n&gt; 2. The crawl no=\r\nde uses the services of a &#39;DynamicCrawlMapper&#39; to take \n&gt; care of distribut=\r\nion. This is a regular heritrix &#39;Processor&#39;\nintegrated\n&gt; into heritrix proc=\r\nessing chain.\n&gt; \n&gt; 3. The &#39;DynamicCrawlMapper&#39; uses the services of a &#39;Dist=\r\nributor&#39; that \n&gt; talks to different crawl nodes over JMX and uses consisten=\r\nt hashing\n&gt; scheme to figure the destination node for the URL. If the URL&#39;s=\r\n hash \n&gt; falls in the bucket of the local node then it is scheduled directl=\r\ny\n&gt; into the local heritrix instance.\n&gt; \n&gt; 4. The &#39;Distributor&#39; caches the =\r\ninfo for all other crawl nodes. So in \n&gt; this environment every crawl node =\r\nis agnostic of every other crawl\nnode.\n&gt; \n&gt; If the community thinks this co=\r\nuld bring value then we can work \n&gt; towards scrubbing out our custom code a=\r\nnd get all licensing/legal\nissues\n&gt; sorted out to get the code into heritri=\r\nx.\n&gt; \n&gt; Thanks\n&gt; -Ankur\n&gt; \n\n\n\n \n\r\n------_=_NextPart_001_01C8AE93.36E8E1D2\r\nContent-Type: text/html;\n\tcharset=&quot;us-ascii&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.=\r\nw3c.org/TR/1999/REC-html401-19991224/loose.dtd&quot;&gt;\n&lt;HTML&gt;&lt;HEAD&gt;\n&lt;META http-eq=\r\nuiv=3DContent-Type content=3D&quot;text/html; charset=3Dus-ascii&quot;&gt;\n&lt;META content=\r\n=3D&quot;MSHTML 6.00.6000.16640&quot; name=3DGENERATOR&gt;&lt;/HEAD&gt;\n&lt;BODY style=3D&quot;BACKGRO=\r\nUND-COLOR: #ffffff&quot;&gt;\n&lt;DIV dir=3Dltr align=3Dleft&gt;&lt;SPAN class=3D300152809-05=\r\n052008&gt;&lt;FONT face=3DArial \ncolor=3D#0000ff size=3D2&gt;Michael,&lt;/FONT&gt;&lt;/SPAN&gt;&lt;=\r\n/DIV&gt;\n&lt;DIV dir=3Dltr align=3Dleft&gt;&lt;SPAN class=3D300152809-05052008&gt;&lt;FONT fa=\r\nce=3DArial \ncolor=3D#0000ff \nsize=3D2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=\r\nnbsp;&nbsp;&nbsp;&nbsp;&nbsp; We \nhave been running the crawls in our dev e=\r\nnvironments which is&nbsp;a cluster of \n7 crawlers.&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;\n&lt;DI=\r\nV dir=3Dltr align=3Dleft&gt;&lt;SPAN class=3D300152809-05052008&gt;&lt;FONT face=3DAria=\r\nl \ncolor=3D#0000ff size=3D2&gt;Some of the other groups have been using it for=\r\n larger \ncrawls.&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;\n&lt;DIV dir=3Dltr align=3Dleft&gt;&lt;SPAN clas=\r\ns=3D300152809-05052008&gt;&lt;FONT face=3DArial \ncolor=3D#0000ff size=3D2&gt;&lt;/FONT&gt;=\r\n&lt;/SPAN&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV dir=3Dltr align=3Dleft&gt;&lt;SPAN class=3D300152809-050=\r\n52008&gt;&lt;FONT face=3DArial \ncolor=3D#0000ff size=3D2&gt;We did use the CHF from =\r\nmg4j jar. Not sure if that \nwould&nbsp;require it&nbsp;to be removed if thi=\r\ns code gets&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;\n&lt;DIV dir=3Dltr align=3Dleft&gt;&lt;SPAN class=3D3=\r\n00152809-05052008&gt;&lt;FONT face=3DArial \ncolor=3D#0000ff size=3D2&gt;into heritri=\r\nx.&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;\n&lt;DIV dir=3Dltr align=3Dleft&gt;&lt;SPAN class=3D300152809-=\r\n05052008&gt;&lt;FONT face=3DArial \ncolor=3D#0000ff size=3D2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&nbsp;&lt;=\r\n/DIV&gt;\n&lt;DIV dir=3Dltr align=3Dleft&gt;&lt;SPAN class=3D300152809-05052008&gt;&lt;FONT fa=\r\nce=3DArial \ncolor=3D#0000ff size=3D2&gt;JMX has been pretty good so far. We us=\r\ne proxy communication \nin Distributor to send a list of &lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV=\r\n&gt;\n&lt;DIV dir=3Dltr align=3Dleft&gt;&lt;SPAN class=3D300152809-05052008&gt;&lt;FONT face=\r\n=3DArial \ncolor=3D#0000ff size=3D2&gt;CandidateURIs to the crawler node.&lt;/FONT=\r\n&gt;&lt;/SPAN&gt;&lt;/DIV&gt;\n&lt;DIV dir=3Dltr align=3Dleft&gt;&lt;SPAN class=3D300152809-05052008=\r\n&gt;&lt;FONT face=3DArial \ncolor=3D#0000ff size=3D2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&nbsp;&lt;/DIV&gt;\n&lt;D=\r\nIV dir=3Dltr align=3Dleft&gt;&lt;SPAN class=3D300152809-05052008&gt;&lt;FONT face=3DAri=\r\nal \ncolor=3D#0000ff size=3D2&gt;For integrating with Heritrix 2.0, I mentioned=\r\n the \ntechnical and legal concerns in an earlier post.&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;\n=\r\n&lt;DIV dir=3Dltr align=3Dleft&gt;&lt;SPAN class=3D300152809-05052008&gt;&lt;FONT face=3DA=\r\nrial \ncolor=3D#0000ff size=3D2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV dir=3Dltr al=\r\nign=3Dleft&gt;&lt;SPAN class=3D300152809-05052008&gt;&lt;FONT face=3DArial \ncolor=3D#00=\r\n00ff size=3D2&gt;-Ankur&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;&lt;BR&gt;\n&lt;DIV class=3DOutlookMessageHea=\r\nder lang=3Den-us dir=3Dltr align=3Dleft&gt;\n&lt;HR tabIndex=3D-1&gt;\n&lt;FONT face=3DTa=\r\nhoma size=3D2&gt;&lt;B&gt;From:&lt;/B&gt; archive-crawler@yahoogroups.com \n[mailto:archive=\r\n-crawler@yahoogroups.com] &lt;B&gt;On Behalf Of \n&lt;/B&gt;stack&lt;BR&gt;&lt;B&gt;Sent:&lt;/B&gt; Friday=\r\n, May 02, 2008 9:53 PM&lt;BR&gt;&lt;B&gt;To:&lt;/B&gt; \narchive-crawler@yahoogroups.com&lt;BR&gt;&lt;B=\r\n&gt;Subject:&lt;/B&gt; Re: [archive-crawler] \nDistribution using Consistent Hashing =\r\nscheme&lt;BR&gt;&lt;/FONT&gt;&lt;BR&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;/DIV&gt;\n&lt;DIV id=3Dygrp-text&gt;\n&lt;P&gt;Sounds real=\r\nly great Ankur.&lt;BR&gt;&lt;BR&gt;How has it been working for you? What size \nclusters=\r\n have you been &lt;BR&gt;running with?&lt;BR&gt;&lt;BR&gt;Out of interest, did you use the \nC=\r\nHF from the mg4j jar or write your own?&lt;BR&gt;&lt;BR&gt;How has JMX been working out=\r\n for \nyou? Its OK making the invocation &lt;BR&gt;though the payload is small -- =\r\njust an \nURL? (Do you send just an URL or &lt;BR&gt;an CrawlURI?). When the (b)UB=\r\nIcrawler folks \nwere through last, they &lt;BR&gt;talked highly of jgroups over U=\r\nDP as being good for \nsmall communications.&lt;BR&gt;&lt;BR&gt;What would be in the way=\r\n, if anything, of your \nmigrating the &lt;BR&gt;distribution to Heritrix 2.0?&lt;BR&gt;=\r\n&lt;BR&gt;St.Ack&lt;BR&gt;&lt;BR&gt;Goel, Ankur \nwrote:&lt;BR&gt;&gt;&lt;BR&gt;&gt; Hi Folks,&lt;BR&gt;&gt; We =\r\nhave our own implementation of the \ncrawl farm based on &lt;BR&gt;&gt; top of Her=\r\nitrix 1.6. We moved to version 1.13 \nsometime back.&lt;BR&gt;&gt; As a part of ou=\r\nr work we have extended the heritrix code \nand &lt;BR&gt;&gt; implemented a consi=\r\nstent hashing scheme for maintaining \npoliteness&lt;BR&gt;&gt; and consistent dis=\r\ntribution. We would like to contribute some \nof our &lt;BR&gt;&gt; distribution r=\r\nelated code to the heritrix community.&lt;BR&gt;&gt; \n&lt;BR&gt;&gt; Let me give a brie=\r\nf idea of what we have done that we would like to \n&lt;BR&gt;&gt; contribute.&lt;BR&gt;=\r\n&gt; &lt;BR&gt;&gt; 1. Each crawl node (called crawl engine in \nheritrix 2.0) &lt;BR=\r\n&gt;&gt; is responsible for figuring out if it should crawl the \n&lt;BR&gt;&gt; reci=\r\neved/extracted URLs&lt;BR&gt;&gt; or the right crawler node that should \nbe crawl=\r\ning it and dispatches &lt;BR&gt;&gt; the URLs over JMX to the appropriate \nnode.&lt;=\r\nBR&gt;&gt; &lt;BR&gt;&gt; 2. The crawl node uses the services of a \n&#39;DynamicCrawlMap=\r\nper&lt;WBR&gt;&#39; to take &lt;BR&gt;&gt; care of distribution. This is a \nregular heritri=\r\nx &#39;Processor&#39; integrated&lt;BR&gt;&gt; into heritrix processing \nchain.&lt;BR&gt;&gt; &lt;=\r\nBR&gt;&gt; 3. The &#39;DynamicCrawlMapper&lt;WBR&gt;&#39; uses the services of a \n&#39;Distribut=\r\nor&#39; that &lt;BR&gt;&gt; talks to different crawl nodes over JMX and uses \nconsist=\r\nent hashing&lt;BR&gt;&gt; scheme to figure the destination node for the URL. If \n=\r\nthe URL&#39;s hash &lt;BR&gt;&gt; falls in the bucket of the local node then it is \ns=\r\ncheduled directly&lt;BR&gt;&gt; into the local heritrix instance.&lt;BR&gt;&gt; &lt;BR&gt;&gt=\r\n; 4. \nThe &#39;Distributor&#39; caches the info for all other crawl nodes. So in &lt;B=\r\nR&gt;&gt; this \nenvironment every crawl node is agnostic of every other crawl =\r\nnode.&lt;BR&gt;&gt; \n&lt;BR&gt;&gt; If the community thinks this could bring value then=\r\n we can work \n&lt;BR&gt;&gt; towards scrubbing out our custom code and get all li=\r\ncensing/legal \nissues&lt;BR&gt;&gt; sorted out to get the code into heritrix.&lt;BR&gt;=\r\n&gt; &lt;BR&gt;&gt; \nThanks&lt;BR&gt;&gt; -Ankur&lt;BR&gt;&gt; &lt;BR&gt;&lt;BR&gt;&lt;/P&gt;&lt;/DIV&gt;&lt;!--End grou=\r\np email --&gt;&lt;/BODY&gt;&lt;/HTML&gt;\n\r\n------_=_NextPart_001_01C8AE93.36E8E1D2--\r\n\n"}}