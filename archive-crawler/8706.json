{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":27093708,"authorName":"SÃ¸ren Vejrup Carlsen","from":"=?iso-8859-1?Q?S=F8ren_Vejrup_Carlsen?= &lt;svc@...&gt;","profile":"svc400","replyTo":"LIST","senderId":"H-WnsAH00f8Yw2SNyI6YE_CJkSzfAeFjoevsUJgu1Qex1utLLhxFozCxaOQQg2uFARX-4xxQd4Wp3OFQVaBzVNFGYSRXBCGNoNOSHAKT9kE1VIy4cyF5buBq","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Any ideas on validating crawlertraps before inserting them into a H3 crawler-beans.cxml","postDate":"1433860608","msgId":8706,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PEM0Qzc2QkZBRDk5QzFFNDFBMzlBMTQ5OTZFRDQ2QkVBMDE0QjUxMTZENUBFWENIQU5HRS0wMi5rYi5kaz4="},"prevInTopic":0,"nextInTopic":8707,"prevInTime":8705,"nextInTime":8707,"topicId":8706,"numMessagesInTopic":4,"msgSnippet":"Hi all. We re currently testing NetarchiveSuite 5.0, and and have a test that adds a list of global crawlertraps (i.e. traps inserted into the","rawEmail":"Return-Path: &lt;svc@...&gt;\r\nX-Sender: svc@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 26715 invoked by uid 102); 9 Jun 2015 14:46:46 -0000\r\nX-Received: from unknown (HELO mtaq5.grp.bf1.yahoo.com) (10.193.84.36)\n  by m8.grp.bf1.yahoo.com with SMTP; 9 Jun 2015 14:46:46 -0000\r\nX-Received: (qmail 9820 invoked from network); 9 Jun 2015 14:46:45 -0000\r\nX-Received: from unknown (HELO post.kb.dk) (98.139.170.167)\n  by mtaq5.grp.bf1.yahoo.com with SMTP; 9 Jun 2015 14:46:45 -0000\r\nX-Received: from localhost (localhost [127.0.0.1])\n\tby post.kb.dk (Postfix) with ESMTP id 6638FE16EB\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Tue,  9 Jun 2015 16:46:45 +0200 (CEST)\r\nX-Quarantine-ID: &lt;G9QoYFEUxPwE&gt;\r\nX-Received: from post.kb.dk ([127.0.0.1])\n\tby localhost (post-02.kb.dk [127.0.0.1]) (amavisd-new, port 10024)\n\twith LMTP id G9QoYFEUxPwE for &lt;archive-crawler@yahoogroups.com&gt;;\n\tTue,  9 Jun 2015 16:46:45 +0200 (CEST)\r\nX-Received: from EXCHANGE-03.kb.dk (exchange-03.kb.dk [130.226.220.132])\n\tby post.kb.dk (Postfix) with ESMTP id 3D11FE1D63\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Tue,  9 Jun 2015 16:36:49 +0200 (CEST)\r\nX-Received: from EXCHANGE-02.kb.dk ([fe80::d47b:397f:4d5b:33e4]) by\n EXCHANGE-03.kb.dk ([fe80::1c1e:10e0:ad3a:6c4b%17]) with mapi id\n 14.03.0224.002; Tue, 9 Jun 2015 16:36:49 +0200\r\nTo: &quot;archive-crawler@yahoogroups.com&quot; &lt;archive-crawler@yahoogroups.com&gt;\r\nThread-Topic: Any ideas on validating crawlertraps before inserting them\n into a H3 crawler-beans.cxml\r\nThread-Index: AdCivwg3rf4vuY6cSz2WQ1TzQrG84w==\r\nDate: Tue, 9 Jun 2015 14:36:48 +0000\r\nMessage-ID: &lt;C4C76BFAD99C1E41A39A14996ED46BEA014B5116D5@...&gt;\r\nAccept-Language: da-DK, en-US\r\nContent-Language: da-DK\r\nX-MS-Has-Attach:\r\nX-MS-TNEF-Correlator:\r\nContent-Type: multipart/alternative;\n\tboundary=&quot;_000_C4C76BFAD99C1E41A39A14996ED46BEA014B5116D5EXCHANGE02kbd_&quot;\r\nMIME-Version: 1.0\r\nSubject: Any ideas on validating crawlertraps before inserting them into a\n H3 crawler-beans.cxml\r\nX-Yahoo-Group-Post: member; u=27093708\r\nX-Yahoo-Profile: svc400\r\nFrom: =?iso-8859-1?Q?S=F8ren_Vejrup_Carlsen?= &lt;svc@...&gt;\r\n\r\n\r\n--_000_C4C76BFAD99C1E41A39A14996ED46BEA014B5116D5EXCHANGE02kbd_\r\nContent-Type: text/plain; charset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nHi all.\n\nWe&#39;re currently testing NetarchiveSuite 5.0, and and have a test t=\r\nhat adds a list of global crawlertraps (i.e. traps inserted into the crawle=\r\nr-beans.cxml of every crawl).\nThis inserts each crawlertrap into a value en=\r\ntity of the MatchesListRegexDecideRule like this:\n\n&lt;bean class=3D&quot;org.archi=\r\nve.modules.deciderules.MatchesListRegexDecideRule&quot;&gt;\n     &lt;property name=3D&quot;=\r\ndecision&quot; value=3D&quot;REJECT&quot;/&gt;\n     &lt;property name=3D&quot;listLogicalOr&quot; value=3D=\r\n&quot;true&quot; /&gt;\n     &lt;property name=3D&quot;regexList&quot;&gt;\n           &lt;list&gt;\n&lt;!-- Here we=\r\n inject our global crawlertraps, domain specific crawlertraps --&gt;\n&lt;value&gt;.*=\r\nindex&#92;.php&#92;?module=3Dcalendar&calendar[user]=3D.*&lt;/value&gt;\n&lt;value&gt;.*enhedsli=\r\nsten&#92;.dk.*&#92;/enhedslisten&#92;.dk.*&lt;/value&gt;\n&lt;value&gt;.*avantix&#92;.dk&#92;/.*action=3Dadd=\r\n_product.*&lt;/value&gt;\n&lt;value&gt;.*www&#92;.123y&#92;.dk&#92;/somd&#92;/kalender&#92;/index&#92;.php&#92;?Y=3D=\r\n.*&lt;/value&gt;\n....\n &lt;/list&gt;\n          &lt;/property&gt;\n    &lt;/bean&gt;\n\n\nUnfortunately,=\r\n H3 fails to build, if the crawlertrap contains invalid characters like &#39;&&#39;=\r\n :\n\n---------------------------------------------------- log extract BEGIN-=\r\n-------------------------------------------------------------\n\nFatal Error]=\r\n crawler-beans.cxml:227:46: The reference to entity &quot;calendar&quot; must end wit=\r\nh the &#39;;&#39; delimiter.\n2015-06-04 15:29:36.829 SEVERE thread-12 org.archive.c=\r\nrawler.framework.CrawlJob.beansException() Line 227 in XML document from UR=\r\nL [file:/home/devel/TEST2/harvester_low/6_1433431773644/heritrix3/./jobs/6_=\r\n1433431773644/crawler-beans.cxml] is invalid; nested exception is org.xml.s=\r\nax.SAXParseException; lineNumber: 227; columnNumber: 46; The reference to e=\r\nntity &quot;calendar&quot; must end with the &#39;;&#39; delimiter.\norg.springframework.beans=\r\n.factory.xml.XmlBeanDefinitionStoreException: Line 227 in XML document from=\r\n URL [file:/home/devel/TEST2/harvester_low/6_1433431773644/heritrix3/./jobs=\r\n/6_1433431773644/crawler-beans.cxml] is invalid; nested exception is org.xm=\r\nl.sax.SAXParseException; lineNumber: 227; columnNumber: 46; The reference t=\r\no entity &quot;calendar&quot; must end with the &#39;;&#39; delimiter.\n        at org.springf=\r\nramework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(Xm=\r\nlBeanDefinitionReader.java:396)\n        at org.springframework.beans.factor=\r\ny.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.j=\r\nava:334)\n        at org.springframework.beans.factory.xml.XmlBeanDefinition=\r\nReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)\n        at org=\r\n.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBea=\r\nnDefinitions(AbstractBeanDefinitionReader.java:143)\n        at org.springfr=\r\namework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefiniti=\r\nons(AbstractBeanDefinitionReader.java:178)\n        at org.springframework.b=\r\neans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(Abstr=\r\nactBeanDefinitionReader.java:149)\n        at org.springframework.beans.fact=\r\nory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDe=\r\nfinitionReader.java:212)\n        at org.springframework.context.support.Abs=\r\ntractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContex=\r\nt.java:126)\n        at org.springframework.context.support.AbstractXmlAppli=\r\ncationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:92)\n  =\r\n      at org.springframework.context.support.AbstractRefreshableApplication=\r\nContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)\n=\r\n        at org.springframework.context.support.AbstractApplicationContext.o=\r\nbtainFreshBeanFactory(AbstractApplicationContext.java:467)\n        at org.s=\r\npringframework.context.support.AbstractApplicationContext.refresh(AbstractA=\r\npplicationContext.java:397)\n        at org.archive.crawler.framework.CrawlJ=\r\nob.instantiateContainer(CrawlJob.java:291)\n        at org.archive.crawler.f=\r\nramework.CrawlJob.validateConfiguration(CrawlJob.java:360)\n        at org.a=\r\nrchive.crawler.restlet.JobResource.acceptRepresentation(JobResource.java:21=\r\n6)\n\n\n---------------------------------------------------- log extract  END =\r\n--------------------------------------------------------------\nHavy anyone =\r\nany ideas on validating crawlertraps before inserting them into a H3 crawle=\r\nr-beans.cxml\n\n\n\nBest regards\nS=F8ren V. Carlsen, Developer of Netarchivesui=\r\nte\n\n\n\r\n--_000_C4C76BFAD99C1E41A39A14996ED46BEA014B5116D5EXCHANGE02kbd_\r\nContent-Type: text/html; charset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;html dir=3D&quot;ltr&quot;&gt;\n&lt;head&gt;\n&lt;meta http-equiv=3D&quot;Content-Type&quot; content=3D&quot;text=\r\n/html; charset=3Diso-8859-1&quot;&gt;\n&lt;style id=3D&quot;owaParaStyle&quot; type=3D&quot;text/css&quot;&gt;=\r\nP {margin-top:0;margin-bottom:0;}&lt;/style&gt;\n&lt;/head&gt;\n&lt;body ocsi=3D&quot;0&quot; fpstyle=\r\n=3D&quot;1&quot;&gt;\n&lt;div style=3D&quot;direction: ltr;font-family: Tahoma;color: #000000;fon=\r\nt-size: 10pt;&quot;&gt;Hi all.&lt;br&gt;\n&lt;br&gt;\nWe&#39;re currently testing NetarchiveSuite 5.0=\r\n, and and have a test that adds a list of global crawlertraps (i.e. traps i=\r\nnserted into the crawler-beans.cxml of every crawl).&lt;br&gt;\nThis inserts each =\r\ncrawlertrap into a value entity of the MatchesListRegexDecideRule like this=\r\n:&lt;br&gt;\n&lt;br&gt;\n&lt;bean class=3D&quot;org.archive.modules.deciderules.MatchesLi=\r\nstRegexDecideRule&quot;&gt;&lt;br&gt;\n&nbsp;&nbsp;&nbsp;&nbsp; &lt;property name=\r\n=3D&quot;decision&quot; value=3D&quot;REJECT&quot;/&gt;&lt;br&gt;\n&nbsp;&nbsp;&nb=\r\nsp;&nbsp; &lt;property name=3D&quot;listLogicalOr&quot; value=3D&quot;true&=\r\nquot; /&gt;&lt;br&gt;\n&nbsp;&nbsp;&nbsp;&nbsp; &lt;property name=3D&quot;regexLis=\r\nt&quot;&gt;&lt;br&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=\r\n; &lt;list&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;br&gt;\n&lt;!-- Here we inj=\r\nect our global crawlertraps, domain specific crawlertraps --&gt;&lt;br&gt;\n&lt;va=\r\nlue&gt;.*index&#92;.php&#92;?module=3Dcalendar&amp;calendar[user]=3D.*&lt;/value&gt=\r\n;&lt;br&gt;\n&lt;value&gt;.*enhedslisten&#92;.dk.*&#92;/enhedslisten&#92;.dk.*&lt;/value&gt;&lt;b=\r\nr&gt;\n&lt;value&gt;.*avantix&#92;.dk&#92;/.*action=3Dadd_product.*&lt;/value&gt;&lt;br&gt;\n&=\r\nlt;value&gt;.*www&#92;.123y&#92;.dk&#92;/somd&#92;/kalender&#92;/index&#92;.php&#92;?Y=3D.*&lt;/value&g=\r\nt;&lt;br&gt;\n....&lt;br&gt;\n&nbsp;&lt;/list&gt;&lt;br&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=\r\n;&nbsp;&nbsp;&nbsp; &lt;/property&gt; &lt;br&gt;\n&nbsp;&nbsp;&nbsp; &lt;/bean&gt;=\r\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\nUnfortunately, H3 fails to build, if the crawlertrap contain=\r\ns invalid characters like &#39;&amp;&#39; :&lt;br&gt;\n&lt;br&gt;\n------------------------------=\r\n---------------------- log extract BEGIN-----------------------------------=\r\n---------------------------&lt;br&gt;\n&lt;br&gt;\nFatal Error] crawler-beans.cxml:227:46=\r\n: The reference to entity &quot;calendar&quot; must end with the &#39;;&#39; delimi=\r\nter.&lt;br&gt;\n2015-06-04 15:29:36.829 SEVERE thread-12 org.archive.crawler.frame=\r\nwork.CrawlJob.beansException() Line 227 in XML document from URL [file:/hom=\r\ne/devel/TEST2/harvester_low/6_1433431773644/heritrix3/./jobs/6_143343177364=\r\n4/crawler-beans.cxml] is invalid; nested\n exception is org.xml.sax.SAXParse=\r\nException; lineNumber: 227; columnNumber: 46; The reference to entity &quot=\r\n;calendar&quot; must end with the &#39;;&#39; delimiter.&lt;br&gt;\norg.springframework.be=\r\nans.factory.xml.XmlBeanDefinitionStoreException: Line 227 in XML document f=\r\nrom URL [file:/home/devel/TEST2/harvester_low/6_1433431773644/heritrix3/./j=\r\nobs/6_1433431773644/crawler-beans.cxml] is invalid; nested exception is org=\r\n.xml.sax.SAXParseException;\n lineNumber: 227; columnNumber: 46; The referen=\r\nce to entity &quot;calendar&quot; must end with the &#39;;&#39; delimiter.&lt;br&gt;\n&nbs=\r\np;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at org.springframework.beans.factory=\r\n.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.=\r\njava:396)&lt;br&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at org.springframe=\r\nwork.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanD=\r\nefinitionReader.java:334)&lt;br&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at=\r\n org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefi=\r\nnitions(XmlBeanDefinitionReader.java:302)&lt;br&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=\r\n;&nbsp;&nbsp; at org.springframework.beans.factory.support.AbstractBeanDefi=\r\nnitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)&lt;br&gt;=\r\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at org.springframework.beans.fa=\r\nctory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBean=\r\nDefinitionReader.java:178)&lt;br&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a=\r\nt org.springframework.beans.factory.support.AbstractBeanDefinitionReader.lo=\r\nadBeanDefinitions(AbstractBeanDefinitionReader.java:149)&lt;br&gt;\n&nbsp;&nbsp;&n=\r\nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at org.springframework.beans.factory.support.A=\r\nbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReade=\r\nr.java:212)&lt;br&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at org.springfra=\r\nmework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(Ab=\r\nstractXmlApplicationContext.java:126)&lt;br&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=\r\nsp;&nbsp; at org.springframework.context.support.AbstractXmlApplicationCont=\r\next.loadBeanDefinitions(AbstractXmlApplicationContext.java:92)&lt;br&gt;\n&nbsp;&n=\r\nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at org.springframework.context.support.A=\r\nbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshable=\r\nApplicationContext.java:130)&lt;br&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=\r\n at org.springframework.context.support.AbstractApplicationContext.obtainFr=\r\neshBeanFactory(AbstractApplicationContext.java:467)&lt;br&gt;\n&nbsp;&nbsp;&nbsp;&=\r\nnbsp;&nbsp;&nbsp;&nbsp; at org.springframework.context.support.AbstractAppl=\r\nicationContext.refresh(AbstractApplicationContext.java:397)&lt;br&gt;\n&nbsp;&nbsp=\r\n;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at org.archive.crawler.framework.CrawlJob.i=\r\nnstantiateContainer(CrawlJob.java:291)&lt;br&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=\r\nbsp;&nbsp; at org.archive.crawler.framework.CrawlJob.validateConfiguration(=\r\nCrawlJob.java:360)&lt;br&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at org.ar=\r\nchive.crawler.restlet.JobResource.acceptRepresentation(JobResource.java:216=\r\n)&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n---------------------------------------------------- log ex=\r\ntract&nbsp; END -----------------------------------------------------------=\r\n---&lt;br&gt;\nHavy anyone any ideas on validating crawlertraps before inserting t=\r\nhem into a H3 crawler-beans.cxml&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\nBest regards&lt;br&gt;\nS=F8re=\r\nn V. Carlsen, Developer of Netarchivesuite&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/h=\r\ntml&gt;\n\r\n--_000_C4C76BFAD99C1E41A39A14996ED46BEA014B5116D5EXCHANGE02kbd_--\r\n\n"}}