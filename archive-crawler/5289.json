{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":347605000,"authorName":"lpeterus","from":"&quot;lpeterus&quot; &lt;lpeterus@...&gt;","profile":"lpeterus","replyTo":"LIST","senderId":"Gw5xVFdGBEXqb4exUkWZlUjLk4AttoW-38YjQktFvMAVHYBuTS0y0OKhL9TZdCuLXC1p52XPg5gt25Hxs6OPnfEG9GjdRA","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: Content type specific crawling?","postDate":"1212686195","msgId":5289,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PGcyOTcxais4aTdoQGVHcm91cHMuY29tPg==","inReplyToHeader":"PDQ4NDc3NzY4LjEwMTAwMDRAYXJjaGl2ZS5vcmc+"},"prevInTopic":5284,"nextInTopic":0,"prevInTime":5288,"nextInTime":5290,"topicId":5248,"numMessagesInTopic":9,"msgSnippet":"... writer ... .*(?i) .(a|ai|aif|aifc|aiff|asc|asp|avi|bat|bcpio|bin|bmp|bz2|c|cdf|cfm| ... ","rawEmail":"Return-Path: &lt;lpeterus@...&gt;\r\nX-Sender: lpeterus@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 73072 invoked from network); 5 Jun 2008 17:16:36 -0000\r\nX-Received: from unknown (66.218.67.94)\n  by m52.grp.scd.yahoo.com with QMQP; 5 Jun 2008 17:16:36 -0000\r\nX-Received: from unknown (HELO n49a.bullet.mail.sp1.yahoo.com) (66.163.168.143)\n  by mta15.grp.scd.yahoo.com with SMTP; 5 Jun 2008 17:16:36 -0000\r\nX-Received: from [216.252.122.216] by n49.bullet.mail.sp1.yahoo.com with NNFMP; 05 Jun 2008 17:16:36 -0000\r\nX-Received: from [66.218.69.6] by t1.bullet.sp1.yahoo.com with NNFMP; 05 Jun 2008 17:16:36 -0000\r\nX-Received: from [66.218.66.80] by t6.bullet.scd.yahoo.com with NNFMP; 05 Jun 2008 17:16:36 -0000\r\nDate: Thu, 05 Jun 2008 17:16:35 -0000\r\nTo: archive-crawler@yahoogroups.com\r\nMessage-ID: &lt;g2971j+8i7h@...&gt;\r\nIn-Reply-To: &lt;48477768.1010004@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: &quot;lpeterus&quot; &lt;lpeterus@...&gt;\r\nSubject: Re: Content type specific crawling?\r\nX-Yahoo-Group-Post: member; u=347605000; y=XTHFwpHhRlYj2DHib0v5GZOo1phEBQCzpSZ2Boio4x3-Yz4\r\nX-Yahoo-Profile: lpeterus\r\n\r\n--- In archive-crawler@yahoogroups.com, Gordon Mohr &lt;gojomo@...&gt; wrote:\n&gt;\n&gt;=\r\n \n&gt; \n&gt; lpeterus wrote:\n&gt; &gt; Yes, the setup is like you described. I&#39;m using =\r\nthe standard arc\nwriter\n&gt; &gt; and I checked the arc files to see the type. Be=\r\nsides application/xml\n&gt; &gt; content, the other ones are all text/html. Here a=\r\nre the settings for\n&gt; &gt; parts where I do have filters and such.\n&gt; &gt; \n&gt; &gt; 1)=\r\n On the scope:  I put the huge regex on separate lines for easier\n&gt; &gt; read.=\r\n\n&gt; &gt; rejectByDefault\n&gt; &gt; acceptIfSurtPrefixed\n&gt; &gt; rejectIfTooManyHops\n&gt; &gt; r=\r\nejectIfPathological\n&gt; &gt; rejectIfTooManyPathSegs\n&gt; &gt; acceptIfPrerequisite\n&gt; =\r\n\n&gt; Looks OK.\n&gt; \n&gt; &gt; &lt;newObject name=3D&quot;Match&quot;\n&gt; &gt; class=3D&quot;org.archive.craw=\r\nler.deciderules.MatchesRegExpDecideRule&quot;&gt;\n&gt; &gt; &lt;string name=3D&quot;decision&quot;&gt;REJ=\r\nECT&lt;/string&gt;\n&gt; &gt; &lt;string name=3D&quot;regexp&quot;&gt;\n&gt; &gt;\n.*(?i)&#92;.(a|ai|aif|aifc|aiff|a=\r\nsc|asp|avi|bat|bcpio|bin|bmp|bz2|c|cdf|cfm|&#92;\n&gt; &gt; cgi|cgm|\n&gt; &gt;\nclass|cpio|cp=\r\np|cpt|csh|css|cxx|dcr|dif|dir|djv|djvu|dll|dmg|dms|doc|dtd|&#92;\n&gt; &gt; dv|dvi|\n&gt; =\r\n&gt;\ndxr|eps|etx|exe|ez|gram|grxml|gtar|gz|gif|h|html|htm|hdf|hqx|ice|ico|ics&#92;=\r\n\n&gt; &gt; |ief|ifb|\n&gt; &gt;\niges|igs|iso|jnlp|jp2|jpe|jpeg|jpg|js|jsp|kar|latex|lha|=\r\nlzh|m3u|mac|man|&#92;\n&gt; &gt; mathml|me|\n&gt; &gt;\nmm|mesh|mid|midi|mif|mov|movie|mp2|mp3=\r\n|mp4|mpe|mpeg|mpg|mpga|ms|msh|mxu|\n&gt; &gt;\nnc|o|oda|odt|old|ogg|pbm|pct|pdb|pdf=\r\n|pgm|pgn|php|pic|pict|pl|png|pjpeg|p&#92;\n&gt; &gt; nm|pnt|pntg|\n&gt; &gt;\nppm|ppt|ps|py|qt=\r\n|qti|qtif|ra|ram|ras|rdf|rgb|rm|roff|rpm|rtf|rtx|s|sgm|s&#92;\n&gt; &gt; gml|sh|shar|s=\r\nhtml|\n&gt; &gt;\nsilo|sit|skd|skm|skp|skt|smi|smil|snd|so|spl|sql|src|srpm|sv4cpio=\r\n|sv4crc&#92;\n&gt; &gt; |svg|swf|sxd|sxw|t|\n&gt; &gt;\ntar|tcl|tex|texi|tpl|texinfo|tgz|tif|t=\r\niff|tr|tsv|ustar|vcd|vrml|vxml|wav&#92;\n&gt; &gt; |wbmp|wbxml|wml|wmv\n&gt; &gt; |wmlc|wmls|=\r\nwmlsc|wrl|xbm|xht|xhtml|xls|xpm|xslt|xwd|xyz|z|zip)$\n&gt; \n&gt; Not sure where ex=\r\nactly this &#39;Match&#39; segment appears -- the mid-fetch \n----------------------=\r\n-----------------------------------------\nThe match is the last rule under =\r\nthe scope. It was there for the\npurpose of rejecting URLs that had those ex=\r\ntensions at the end. I have\nsince modified that to something simpler. Inste=\r\nad of rejecting all the\nextensions, I made it only accept URLs with .txt an=\r\nd .xml extensions. \n-------------------------------------------------------=\r\n--------\n&gt; rules? -- but I think I see the problem below.\n&gt; \n&gt; &gt; 2) On the =\r\nmidfetch-decide-rulesand Archiver#decide-rules I have\nthe same\n&gt; &gt; thing.\n&gt;=\r\n &gt; &lt;newObject name=3D&quot;Archiver#decide-rules&quot;\n&gt; &gt; class=3D&quot;org.archive.crawl=\r\ner.deciderules.DecideRuleSequence&quot;&gt;\n&gt; &gt; &lt;map name=3D&quot;rules&quot;&gt;\n&gt; &gt; &lt;newObject=\r\n name=3D&quot;rejectdefault&quot;\n&gt; &gt; class=3D&quot;org.archive.crawler.deciderules.Reject=\r\nDecideRule&quot;&gt;\n&gt; &gt;              &lt;/newObject&gt;\n&gt; &gt; &lt;newObject name=3D&quot;fetch&quot;\n&gt; =\r\n&gt; class=3D&quot;org.archive.crawler.deciderules.FetchStatusDecideRule&quot;&gt;\n&gt; &gt; &lt;str=\r\ning name=3D&quot;decision&quot;&gt;ACCEPT&lt;/string&gt;\n&gt; &gt; &lt;integer name=3D&quot;target-status&quot;&gt;2=\r\n00&lt;/integer&gt;\n&gt; &gt; &lt;/newObject&gt;\n&gt; &gt; &lt;newObject name=3D&quot;content&quot;\n&gt; &gt;\nclass=3D&quot;=\r\norg.archive.crawler.deciderules.ContentTypeMatchesRegExpDecideRul&#92;\n&gt; &gt; e&quot;&gt;\n=\r\n&gt; &gt; &lt;string name=3D&quot;decision&quot;&gt;ACCEPT&lt;/string&gt;\n&gt; &gt; &lt;string name=3D&quot;regexp&quot;&gt;(=\r\n?i)application/xml.*&lt;/string&gt;\n&gt; &gt; &lt;/newObject&gt;\n&gt; &gt; &lt;/map&gt;\n&gt; &gt; &lt;/newObject&gt;\n=\r\n&gt; \n&gt; OK, if these are the exact decide-rules you have the archiver, and the=\r\ny \n&gt; are applied in order:\n&gt;   - every URI is marked REJECT (so far so good=\r\n)\n&gt;   - every status 200 URI is marked ACCEPT (no matter its type -- bad)\n&gt;=\r\n   - every type application/xml is redundantly marked ACCEPT (though in \n&gt; =\r\nfact, an optimization causes this step to be skipped: if a decide-rule \n&gt; c=\r\nan only make something ACCEPT and it&#39;s already ACCEPT, that condition \n&gt; is=\r\nn&#39;t even tested)\n&gt; \n&gt; I suspect the FetchStatusDecideRule can be just dropp=\r\ned; only\nsuccessful \n&gt; fetches will have an application/xml type. Or, if th=\r\nere are some\n30X/40X \n&gt; response codes that also have XML (unlikely but pos=\r\nsible), rule them\nout \n&gt; instead of ruling all 200s in.\n&gt; \n&gt; HTH,\n&gt; \n&gt; - Go=\r\nrdon @ IA\n-----------------------------------------------------------------=\r\n\nOk, I got rid of the fetch rules and mid-fetch no longer has rules\nunder i=\r\nt. The rules under archiver is now a reject first followed by\nthe content r=\r\nule accepting only xml. I checked the arc file and it\nWORKS! (actually it m=\r\night have been working before and I didn&#39;t\nrealize it.) Thanks for the help=\r\n, Gordon!\n\nNow I&#39;m moving on to the next phase, which is putting these into=\r\n a\ndatabase. I want to first examine the xml files for their type and see\ni=\r\nf I can make it only insert the particular type of xml I want. Is\nthere a g=\r\nood way to do that using the arc files? Or alternatively, is\nit better to g=\r\no for a separate processor that writes each entry into\nthe db and different=\r\niate them afterwards? Thanks! -Shawn\n\n\n"}}