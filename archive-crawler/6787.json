{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":325624130,"authorName":"Noah Levitt","from":"Noah Levitt &lt;nlevitt@...&gt;","profile":"nlevitt0","replyTo":"LIST","senderId":"x1qfdsCyIeAsi7BMm7ggb8ezVy4zn_UgPjUhE_3wATf5xNA6gDPsXezDl_sjWKD0K5D6XN7RGnIJCZrFJjsbBhWP8G6_jzHQ","spamInfo":{"isSpam":false,"reason":"3"},"subject":"Re: [archive-crawler] SSL certificate problem and integration of heritrix3","postDate":"1288209432","msgId":6787,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDRDQzg4NDE4LjYwODA5MDRAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PEFBTkxrVGltTlJlank0X0dHbXY0dHpSbzFDQW1XMEt6bUpwWVIxN3ZacXRYaUBtYWlsLmdtYWlsLmNvbT4=","referencesHeader":"PEFBTkxrVGltTlJlank0X0dHbXY0dHpSbzFDQW1XMEt6bUpwWVIxN3ZacXRYaUBtYWlsLmdtYWlsLmNvbT4="},"prevInTopic":6784,"nextInTopic":6790,"prevInTime":6786,"nextInTime":6788,"topicId":6784,"numMessagesInTopic":5,"msgSnippet":"Hello Adam, ... Based on this I would say you have two options, broadly speaking. 1) Make a new certificate with CN=localhost or 2) configure your https","rawEmail":"Return-Path: &lt;nlevitt@...&gt;\r\nX-Sender: nlevitt@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 90698 invoked from network); 27 Oct 2010 19:57:15 -0000\r\nX-Received: from unknown (98.137.34.45)\n  by m3.grp.sp2.yahoo.com with QMQP; 27 Oct 2010 19:57:15 -0000\r\nX-Received: from unknown (HELO mail.archive.org) (207.241.231.239)\n  by mta2.grp.sp2.yahoo.com with SMTP; 27 Oct 2010 19:57:15 -0000\r\nX-Received: from localhost (localhost [127.0.0.1])\n\tby mail.archive.org (Postfix) with ESMTP id 87018258F10\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Wed, 27 Oct 2010 12:57:14 -0700 (PDT)\r\nX-Received: from mail.archive.org ([127.0.0.1])\n\tby localhost (mail.archive.org [127.0.0.1]) (amavisd-new, port 10024)\n\twith LMTP id KOuAeSSzjKiD for &lt;archive-crawler@yahoogroups.com&gt;;\n\tWed, 27 Oct 2010 12:57:12 -0700 (PDT)\r\nX-Received: from [192.168.2.134] (c-67-188-36-206.hsd1.ca.comcast.net [67.188.36.206])\n\tby mail.archive.org (Postfix) with ESMTPSA id 7AB472592B6\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Wed, 27 Oct 2010 12:57:12 -0700 (PDT)\r\nMessage-ID: &lt;4CC88418.6080904@...&gt;\r\nDate: Wed, 27 Oct 2010 12:57:12 -0700\r\nUser-Agent: Thunderbird 2.0.0.24 (Macintosh/20100228)\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;AANLkTimNRejy4_GGmv4tzRo1CAmW0KzmJpYR17vZqtXi@...&gt;\r\nIn-Reply-To: &lt;AANLkTimNRejy4_GGmv4tzRo1CAmW0KzmJpYR17vZqtXi@...&gt;\r\nContent-Type: multipart/mixed;\n boundary=&quot;------------040108080704090103060203&quot;\r\nX-eGroups-Msg-Info: 2:3:4:0:0\r\nFrom: Noah Levitt &lt;nlevitt@...&gt;\r\nSubject: Re: [archive-crawler] SSL certificate problem and integration of\n heritrix3\r\nX-Yahoo-Group-Post: member; u=325624130; y=eBbSo05q8wQ3GPELx6oLixqroYZ_x3HIzMvp_R0-EOpa0VQ\r\nX-Yahoo-Profile: nlevitt0\r\n\r\n\r\n--------------040108080704090103060203\r\nContent-Type: text/plain; charset=UTF-8; format=flowed\r\nContent-Transfer-Encoding: 8bit\r\n\r\nHello Adam,\n\n&gt; javax.net.ssl.SSLException: hostname in certificate didn&#39;t match: \n&gt; &lt;localhost&gt; != &lt;heritrix ad-hoc https certificate&gt;\n\nBased on this I would say you have two options, broadly speaking. 1) Make a new certificate with CN=localhost or 2) configure your https connection to skip this hostname check. I can&#39;t tell you how to do either of these, off the top of my head, especially not in groovy with the libraries you&#39;re using.\n\nBut, here&#39;s something that might be useful or offer a hint for option 2. A way to use java&#39;s built-in http client stuff, which I imagine would also work in groovy, to make an https connection without doing any certificate checking. See the attached class SslUtils.java. Here&#39;s how you use it:\n\nhttpsUrl = new URL(&quot;https://localhost:8443/&quot;);\nHttpsURLConnection connection = (HttpsURLConnection) httpsUrl.openConnection();\nconnection.setSSLSocketFactory(SslUtils.getUnquestioningSSLSocketFactory());\nconnection.setHostnameVerifier(SslUtils.getUnquestioningHostnameVerifier());\n// then connection.getInputStream() or whatever you need to do\n\nOf course you should consider carefully the security implications, but as long as you&#39;re listening only on localhost there&#39;s nothing to worry about.\n\nNoah\n\n\nAdam Brokeš wrote:\n&gt; \n&gt; \n&gt; Hallo,\n&gt; \n&gt; I am trying to use REST connection to heritrix 3 engine in my \n&gt; groovy/grails application and I have encounter strange problem which I \n&gt; am not sure how to solve.\n&gt; \n&gt; In the application the REST Client plugin is installed, which is nothing \n&gt; else than HTTPBuilder class wrapper. Used without any modification it \n&gt; throw Untrusted certificate exception.\n&gt; After reading documentation on \n&gt; http://groovy.codehaus.org/modules/http-builder/doc/ssl.html I figure \n&gt; out that I need manually add heritrix certificate to keystore. I have:\n&gt; \n&gt;    1. exported certificate (chrome, firefox)\n&gt;    2. added certificate to trustore with java keytool\n&gt;    3. copied trustore file to my application directory\n&gt;    4. inserted this code to application:\n&gt; \n&gt; withRest(uri: &quot;https://localhost:8443/engine&quot;) {\n&gt;            def keyStore = KeyStore.getInstance(KeyStore.defaultType)     \n&gt;      \n&gt; \n&gt;            getClass().getResource(&quot;/truststore.jks&quot;).withInputStream {\n&gt;                keyStore.load(it, &quot;password&quot;.toCharArray())\n&gt;            }\n&gt; \n&gt;            client.connectionManager.schemeRegistry.register(\n&gt;                    new Scheme(&quot;https&quot;, new SSLSocketFactory(keyStore), 443))\n&gt;            [rest: client]\n&gt;            auth.basic &quot;admin&quot;, &quot;admin&quot;\n&gt;            def response = post(createpath: &quot;restJob&quot;, action: &quot;create&quot;)\n&gt; }\n&gt; \n&gt; after execution this I always get this exception:\n&gt; \n&gt; javax.net.ssl.SSLException: hostname in certificate didn&#39;t match: \n&gt; &lt;localhost&gt; != &lt;heritrix ad-hoc https certificate&gt;\n&gt; \n&gt; I tried few other combinations:\n&gt; \n&gt;     * install heritrix on other host than localhost\n&gt;     * give heritrix3 -s parameter at start to use other than default\n&gt;       keystore, password\n&gt; \n&gt; \n&gt; Nothing helped me and honestly I am not big expert in certificates, so I \n&gt; run out of ideas and time earmarked for that.\n&gt; \n&gt; What is best practice to use REST from my application?\n&gt; \n&gt; And aside all of that, I will probably need more tight integration of \n&gt; Heritrix3 with my groovy app (it will be basically simpler \n&gt; NetarchiveSuite), I am going to discuss that in other mail, just to get \n&gt; the right direction: is there any documentation on that? I need to do \n&gt; basic crawler stuff, like starting jobs, monitoring jobs and getting \n&gt; information about finished jobs. I like the script console idea, could I \n&gt; communicate with that console from outside? In heritrix 1, the JMX is \n&gt; used extensively, is there still need for that in H3? Well, there are so \n&gt; many possibilities to explore, but I will be delighted if someone with \n&gt; deep knowledge will point the direction.\n&gt; \n&gt; Thank you very much and have nice day.\n&gt; \n&gt; Best regards,\n&gt; \n&gt; Adam Brokes\n&gt; --\n&gt; Adam Brokeš\n&gt; http://www.brokes.net\n&gt; adam.brokes@... &lt;mailto:adam.brokes@...&gt;\n&gt; 42799740\n&gt; \n&gt; \n&gt; \n&gt; \n\r\n--------------040108080704090103060203\r\nContent-Type: text/plain;\n name=&quot;SslUtils.java&quot;\r\nContent-Disposition: inline;\n filename=&quot;SslUtils.java&quot;\r\n\r\n[ Attachment content not displayed ]\r\n--------------040108080704090103060203--\r\n\n"}}