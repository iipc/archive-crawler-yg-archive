{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":95697582,"authorName":"G.B.Reddy","from":"&quot;G.B.Reddy&quot; &lt;reddy@...&gt;","profile":"gbreddysoft","replyTo":"LIST","senderId":"jhCufPXt6bJNti-_fe401ZtgN1IdUH8KRl9dib5awTeqlzuojIrW7n6QiPVXuuDwS1M3mP7LFZQZHuG27nxczU-3rRPQGY_ojnWOGQw","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] SEDA Performance !!","postDate":"1050946814","msgId":49,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDIwNTEwMWMzMDgyZCQxMTM4OWZlMCRkNTAwYThjMEB0aWRlbHBhcmsuaXNvZnR0ZWNoaW5kaWEuY29tPg==","referencesHeader":"PDA0ZmIwMWMzMDA3NyRmZGNkZDg2MCRkNTAwYThjMEB0aWRlbHBhcmsuaXNvZnR0ZWNoaW5kaWEuY29tPiA8MDAyMzAxYzMwMmI4JDk0ZmJlNTAwJDQ4ZjBlZGQxQFdPUktTVEFUSU9OMjE+IDwwZWQ0MDFjMzAzNzckN2RiNjVhMDAkZDUwMGE4YzBAdGlkZWxwYXJrLmlzb2Z0dGVjaGluZGlhLmNvbT4gPDEyYTUwMWMzMDQzNSRlMTUzNWFlMCRkNTAwYThjMEB0aWRlbHBhcmsuaXNvZnR0ZWNoaW5kaWEuY29tPiA8MTc3ZDAxYzMwNWNjJDRjOTdmNDQwJGQ1MDBhOGMwQHRpZGVscGFyay5pc29mdHRlY2hpbmRpYS5jb20+"},"prevInTopic":48,"nextInTopic":0,"prevInTime":48,"nextInTime":50,"topicId":42,"numMessagesInTopic":7,"msgSnippet":"Gordon, The updated performance doc is attached. Please review the test results section and the other misc results section in the SEDA NIO pages. The JDK","rawEmail":"Return-Path: &lt;reddy@...&gt;\r\nX-Sender: reddy@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (EGP: mail-8_2_6_5); 21 Apr 2003 17:43:27 -0000\r\nReceived: (qmail 4986 invoked from network); 21 Apr 2003 17:43:26 -0000\r\nReceived: from unknown (66.218.66.218)\n  by m14.grp.scd.yahoo.com with QMQP; 21 Apr 2003 17:43:26 -0000\r\nReceived: from unknown (HELO pub.isofttechindia.com) (203.199.202.17)\n  by mta3.grp.scd.yahoo.com with SMTP; 21 Apr 2003 17:43:10 -0000\r\nReceived: from ReddyGB (ReddyGB.isofttechindia.com [192.168.0.213])\n\tby pub.isofttechindia.com (8.11.0/8.11.0) with SMTP id h3LHHTY24411\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Mon, 21 Apr 2003 22:47:29 +0530\r\nMessage-ID: &lt;205101c3082d$11389fe0$d500a8c0@...&gt;\r\nTo: &lt;archive-crawler@yahoogroups.com&gt;\r\nReferences: &lt;04fb01c30077$fdcdd860$d500a8c0@...&gt; &lt;002301c302b8$94fbe500$48f0edd1@WORKSTATION21&gt; &lt;0ed401c30377$7db65a00$d500a8c0@...&gt; &lt;12a501c30435$e1535ae0$d500a8c0@...&gt; &lt;177d01c305cc$4c97f440$d500a8c0@...&gt;\r\nSubject: Re: [archive-crawler] SEDA Performance !!\r\nDate: Mon, 21 Apr 2003 23:10:14 +0530\r\nOrganization: ISoftTech\r\nMIME-Version: 1.0\r\nContent-Type: multipart/mixed;\n\tboundary=&quot;----=_NextPart_000_204D_01C3085B.2AC2EE10&quot;\r\nX-Priority: 3\r\nX-MSMail-Priority: Normal\r\nX-Mailer: Microsoft Outlook Express 5.50.4920.2300\r\nX-MimeOLE: Produced By Microsoft MimeOLE V5.50.4920.2300\r\nX-MailScanner: Found to be clean\r\nX-eGroups-From: &quot;G.B.Reddy&quot; &lt;reddy@...&gt;\r\nFrom: &quot;G.B.Reddy&quot; &lt;reddy@...&gt;\r\nReply-To: &quot;G.B.Reddy&quot; &lt;reddy@...&gt;\r\nX-Yahoo-Group-Post: member; u=95697582\r\nX-Yahoo-Profile: gbreddysoft\r\n\r\n\r\n------=_NextPart_000_204D_01C3085B.2AC2EE10\r\nContent-Type: multipart/alternative;\n\tboundary=&quot;----=_NextPart_001_204E_01C3085B.2AC2EE10&quot;\r\n\r\n\r\n------=_NextPart_001_204E_01C3085B.2AC2EE10\r\nContent-Type: text/plain;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nGordon,\n\nThe updated performance doc is attached. Please review the &quot;test r=\r\nesults section&quot; and the &quot;other misc results section&quot; in the SEDA NIO pages.=\r\n\n\nThe JDK 1.4.2 beta results given before saying CPU usage is only 5% is an=\r\n incorrect one. We found today that there is a peculiar problem in the JDK =\r\n( or I am not sure if it is with SEDA or the internal unix calls made ) whe=\r\nreby the unix time command gets fooled. The system and user time reported b=\r\ny the java process gets reinitialized at the time the JVM is about to exit.=\r\n Interestingly, we could see the right values in the time command output if=\r\n the downloader is killed in the middle using Ctrl-C. And we were surprised=\r\n to see that time command works well with the Java downloader but not with =\r\nthe SEDA downloader on the same JDK. The new results on JDK 1.4.2 are in th=\r\ne document.\n\nThe updated schedule is also attached. Please review it.\n\nThan=\r\nks,\nReddy\n\n  ----- Original Message ----- \n  From: G.B.Reddy \n  To: archive=\r\n-crawler@yahoogroups.com \n  Sent: Friday, April 18, 2003 10:32 PM\n  Subject=\r\n: Re: [archive-crawler] SEDA Performance !!\n\n\n  Gordon,\n\n  I had a look int=\r\no the SEDA code to understand the synchronization issues which we agreed on=\r\n the day of discussion could be the reason behind low throughput. I found t=\r\nhat there is only a very limited synchronization in the code which cannot b=\r\ne treated as an overhead. I also noticed in our tests that the average pack=\r\net length in one read is almost equal to the one in the Java Downloader-Wit=\r\nh sleep option. So, this means that aggregation of packets is indeed happen=\r\ning; but still the fact that CPU usage is about 50 to 60% makes us feel tha=\r\nt somebody else is comsuming it. This can only be attributed to the SEDA ov=\r\nerheads of multiple threads and other object allocations and the GC associa=\r\nted with it.\n\n  Surprisingly, JDK 1.4.2 beta is giving a very efficient CPU=\r\n usage on the SEDA downloader. The CPU usage goes down to about less than 5=\r\n% compared to the 50 to 60% CPU usage of JDK 1.4.1. However the throughput =\r\ngoes down to about 2 MBytes/sec compared to the close to 3 MBytes/sec of JD=\r\nK 1.4.1. I am still trying to understand the drastic effect on CPU usage. I=\r\n am doing more tests on this and will get the results on Monday.\n\n  I will =\r\nconsolidate all these findings till date in the document and send it for yo=\r\nu to get the complete picture.\n\n  PS: I had a look into the seda http packa=\r\nge to find the trick that Raymie mentioned which would avoid both the maint=\r\nanence of a hashmap and the subsequent synchronization associated with it. =\r\nThey maintain a hashtable ( ATcpConnection Vs. httpConnection ) which is po=\r\npulated when a new connection is made. This httpConnection object is the Si=\r\nnkIF which primarily has neat interfaces for parsing the http request inpac=\r\nkets and other enqueue methods for sending back the URL contents through th=\r\ne connection to the webclient. So, when ATcpInPackets arrive, the httpConne=\r\nction is fetched from the hashtable and the parsePacket methods are called =\r\non it. Other than being neat interfaces, this does not avoid the hash being=\r\n maintained. ( The hash being java.util.Hashtable, it is internally synchro=\r\nnized.). On the other hand, attaching arbitrary objects to the request is a=\r\nnother way of avoiding the hash of requests; but this hash/list cannot be a=\r\nvoided if we have to do timeout/retry handing.\n\n  Thanks,\n  Reddy\n\n\n    ---=\r\n-- Original Message ----- \n    From: G.B.Reddy \n    To: archive-crawler@yah=\r\noogroups.com \n    Sent: Wednesday, April 16, 2003 10:03 PM\n    Subject: Re:=\r\n [archive-crawler] SEDA Performance !!\n\n\n    Gordon,\n\n    The various tests=\r\n and the results that we got today are as follows. ( In the below lines, Ja=\r\nva downloader means the HTTP downloader which we used earlier to measure th=\r\ne java nio performance.)\n\n    - Tried enabling the cache on the webservers.=\r\n Got only a 0.5 to 0.8 MBytes/sec improvement on the Java Downloader code. =\r\nThis could be lesser on SEDA downloader. Since the throughput rise was not =\r\ntoo high, we planned to proceed with other tests with no cache.\n    - Measu=\r\nred the memory requirements of the SEDA downloader. The required memory is =\r\nless than 20 MB. So, we decided not to use the JVM min/max extended cmd lin=\r\ne memory settings. We preferred to do this, since the Java Downloader readi=\r\nngs were not done with such settings earlier and will be difficult to compa=\r\nre since the GC logic might be different if there was a memory setting.\n   =\r\n         - 100 Connections - 7 MB approx \n            - 250 Connections - 1=\r\n5 MB approx \n            - 500 Connections - 20 MB approx\n    - Measured th=\r\ne throughput with the HotSpot -server option of JVM. \n            - This di=\r\nd not yield any big noticible benefits. It is because of too much I/O in ou=\r\nr code which in any case the JVM cannot optimize.\n\n\n    Things to discuss t=\r\nomorrow on SEDA Performance:\n\n    - SEDA Downloader uses not more than 60% =\r\nCPU. Probably if it uses the rest, it might acheive more throughput similar=\r\n to our &quot;without sleep&quot; tests on Java Downloader. CPU not being used comple=\r\ntely could be because of two reasons; \n        -- One is that we are not pu=\r\nmping enough requests which is not the case. We monitored this and we see t=\r\nhat the connectedURLCount at any point is very close to the cmd line param.=\r\n For instance, in case of 500 connections, the average was more than 470.\n =\r\n       -- Other is that SEDA threads are getting blocked in some synchroniz=\r\nation locks. Should have to identify these bottlenecks.\n\n    - The test env=\r\nironment being different between SEDA benchmarks and our tests, it is diffi=\r\ncult to correlate. Probably we can run the benchmarking test scripts bundle=\r\nd in SEDA in our local environment so that it will be easy to compare again=\r\nst our tests. I haven&#39;t yet completely looked into their test scripts.\n\n\n  =\r\n  The updated schedule is also attached. We shall also discuss about this t=\r\nomorrow.\n\n\n    Thanks,\n    Reddy\n\n      ----- Original Message ----- \n     =\r\n From: G.B.Reddy \n      To: archive-crawler@yahoogroups.com \n      Sent: Tu=\r\nesday, April 15, 2003 11:20 PM\n      Subject: Re: [archive-crawler] SEDA Pe=\r\nrformance !!\n\n\n      Gordon,\n\n      We can have our call as suggested on We=\r\ndnesday 8:30p PT (3:30UTC).\n\n      The test sources used are checked into C=\r\nVS. Look for the packages \n      - test.javanio.http - Contains the Async a=\r\nnd Sync http downloader implementation written to benchmark the java nio ap=\r\nis.\n      - test.sedanio.http - Contains the SEDA aSocket based http downlo=\r\nader ( exactly similar to its javanio counterpart).\n\n      As you said, the=\r\n maxConnections is not a strict target; so the actual number of connections=\r\n at any point could be less than it; but not more.\n\n      We had earlier ra=\r\nised the value of maxClients parameter suitably in httpd.conf to allow apac=\r\nhe to service more than the default 150 clients simultaneously.\n\n      Toda=\r\ny we found that the sandstorm script by default ships with ( -ms128M -mx102=\r\n4M ) options. This setting results in GC getting called very lately but whe=\r\nn called, it takes about a minute to complete. This is the reason behind th=\r\ne previous test results showing very less throughput above 100 simulataneou=\r\ns connections. After removing it, we see the following throughput.\n\n      1=\r\n00 connections - about 4.0 Mbytes/sec ( This is same as the reading we got =\r\nbefore )\n      250 connections - about 2.7 Mbytes/sec ( This was less than =\r\n1 Mbytes/sec before )\n      500 connections - about 1.8 Mbytes/sec ( This w=\r\nas less than 1 Mbytes/sec before )\n\n      which means that the throughput i=\r\nndeed degrades with the number of connections; but not as bad as before.\n\n =\r\n     We also ran another quick test wherein we used NBIO instead of the jav=\r\na NIO. We noticed that the throughput degraded to 1.8 Mbytes/sec in the 100=\r\n connections case. This makes things even more fishy.\n\n      The difference=\r\ns between our setup and the setup used by the SEDA benchmarks are\n\n      Cr=\r\nawler Setup                    -- SEDA benchmark Setup\n\n      - Sun JDK 1.4=\r\n.1                 -- IBM JDK 1.1.8\n      - JDK 1.4 NIO library          --=\r\n NBIO library\n      - 100 Mbps Ethernet          -- Gigabit Ethernet\n      =\r\n- No Cache on Webserver  -- Must have had caching.\n\n      The other test co=\r\nmbinations we are running now over our SEDA Http downloader are\n      - Try=\r\n java -server option.\n      - Try JDK 1.4.2 beta.\n      - Try IBM JDK 1.4\n =\r\n     - Try IBM JDK 1.1.8 with NBIO - This is the closest comparison that we=\r\n can do against SEDA benchmarks.\n      - Do tests enabling the web server c=\r\nache.\n\n\n      Thanks,\n      Reddy\n\n        ----- Original Message ----- \n  =\r\n      From: Gordon Mohr \n        To: archive-crawler@yahoogroups.com \n     =\r\n   Sent: Tuesday, April 15, 2003 12:33 AM\n        Subject: Re: [archive-cra=\r\nwler] SEDA Performance !!\n\n\n        Thanks for the updated analysis!\n\n     =\r\n   However, I am concerned that the results may be more a result of the\n   =\r\n     test design or the specific HTTP implementation we&#39;re using than the\n =\r\n       underlying NIO/aSocket code, because the results diverge so greatly\n=\r\n        from SEDA&#39;s own published performance testing.\n\n        For example=\r\n, the results at...\n\n          http://www.cs.berkeley.edu/~mdw/proj/sandsto=\r\nrm/iocore-bench/index.html\n\n        ...show strong throughput up through 1,=\r\n000 simultaneous connections,\n        indeed even up past 10,000 simultaneo=\r\nus connections.\n\n        Also, given the note about the 1.4.1 -&gt; 1.4.2 JRE =\r\nNIO change, a test\n        under 1.4.2 is necessary to truly evaluate eithe=\r\nr of the asynchronous\n        options.\n\n        Some other questions about =\r\nthe test setup:\n\n        - the meaning of &quot;maxConnections&quot; is unclear to me=\r\n; it seems it\n           is not a &quot;maximum&quot; but a &quot;target&quot;, and the actual =\r\nnumber of\n           connections at any point in time might be larger or sm=\r\naller.\n           Is this right?\n\n        - do you have any other intrument=\r\nation which suggests it is\n           specifically garbage collection which=\r\n is causing the degradation\n           of the SEDA approach above 100 conne=\r\nctions?\n\n        - if some of the setups are hitting garbage-collection or =\r\nother\n           resource thresholds, more info about the test machine/VM w=\r\nould\n           be helpful: RAM, VM options used (server hotspot? heap/stac=\r\nk\n           sizes? etc.)\n\n        - with only 2 Apache web servers to one =\r\nclient process, we may\n           be testing/hitting Apache performance lim=\r\nits as much as Java/IO\n           limits. For example, default Apache will =\r\nonly accept 150 simultaneous\n           clients; by my reading of the test =\r\nsetup this means that no\n           matter how many connections the LAN tes=\r\nt attempted, it would\n           never succeed on more than 300 (across the=\r\n two test Apaches)\n           at once -- so any LAN test numbers over 300 a=\r\nren&#39;t really\n           indicative of Java performance.\n\n        - is the t=\r\nest code something you could check into CVS?\n\n        These figures are all=\r\n very interesting, and even if quirks in\n        the test are pushing resul=\r\nts one way or the other, that will\n        usually generate useful info, to=\r\no.\n\n        - Gordon\n\n        ----- Original Message -----\n        From: G.=\r\nB.Reddy\n        To: archive-crawler@yahoogroups.com\n        Sent: Friday, A=\r\npril 11, 2003 3:16 PM\n        Subject: Re: [archive-crawler] SEDA Performan=\r\nce !!\n\n\n        Gordon,\n\n        Please find attached the performance repor=\r\nt on the SEDA aSocket NIO layer. Look for the last section in the document =\r\n&quot;SEDA NIO\n        Socket Framework&quot; and the &quot;Summary&quot; section is also updat=\r\ned with the results. An excel sheet with the readings and the graph is also=\r\n\n        attached for reference.\n\n        We would like to have a brief cha=\r\nt with you on Tuesday 8:30 pm PST ( Monday is a holiday for us on the eve o=\r\nf Tamil new year ) about\n        SEDA socket layer and generally about the =\r\nvarious tasks and other proceedings.\n\n        JAnt Build Status :\n\n        =\r\n- The proposed directory structure is not yet created since we are still in=\r\n the Anecdote prototyping stage and we do not have any\n        complete pac=\r\nkage to checkin. I have modified the ant script a bit to suit the present A=\r\nnecdote structure and activated a cronjob\n        over it. I have also adde=\r\nd you and Raymie to the notification mail-ids list so that you would also g=\r\net the nightly build mails. You\n        could get the nightly build from th=\r\ne location &quot;/home/users/w/wc/wcr-team/NightlyBuilds&quot; as stated in the mail =\r\non\n        shell.sourceforge.net. You could use your own logins and do SFTP=\r\n to access the NightlyBuilds directory. It has read permissions for\n       =\r\n all.\n\n        - I am not sure why the stata labs libraries ( st.ata.* pack=\r\nages) have been checked in as a separate CVS module. Are we planning to\n   =\r\n     upgrade/modify those sources and maintain ourselves. If not, we could =\r\njust have the built classes in a jar in CVS lib directory as\n        we had=\r\n done for other third party libraries. Otherwise, if we want to maintain it=\r\n, then would we require that to be a separate CVS\n        module ? I think =\r\nit would be better if we have one CVS root module under which everything is=\r\n put in. Probably, in such cases, we can\n        have a &quot;thiryPartySrc&quot; dir=\r\nectory to maintain such sources within our main module &quot;OpenWebCrawler&quot; its=\r\nelf.\n\n        Thanks,\n        Reddy\n\n\n        ----- Original Message -----\n=\r\n        From: G.B.Reddy\n        To: archive-crawler@yahoogroups.com\n       =\r\n Sent: Friday, April 11, 2003 12:46 AM\n        Subject: Re: [archive-crawle=\r\nr] Status !!\n\n\n        Gordon,\n\n        As you say, the aSocketInputStream =\r\nis needed only if the client stage is multithreaded. But the oceanstore &quot;Ht=\r\ntpClient&quot; stage is\n        internally using it to do sequencing which is un=\r\nnecessary since anyway the &quot;HttpClient&quot; class implements\n        SingleThre=\r\nadedEventHandlerIF. I have removed these overheads to do my performance tes=\r\nting.\n\n        After starting to test the SEDA socket performance, I ran in=\r\nto three problems in the SEDA&#39;s socket framework.\n\n        - Newly discover=\r\ned bug : The seda internals throw ConcurrentModification exceptions when it=\r\nerating through the selector&#39;s registered\n        keys. This exceptions is =\r\nhighly reproducible when more number of concurrent downloads happen. Synchr=\r\nonization has not been taken\n        care when the ReadEventHandler tries t=\r\no deregister the socket from the selector of the WriteEventHandler. ( As yo=\r\nu would know, there\n        are three stages ReadStage, WriteStage and List=\r\nenStage in the seda socket framework. Each has its own java Selector instan=\r\nce and\n        they wait on its select call. The ReadStage is the one that =\r\ndetermines that a connection is terminated. When this happens, it\n        d=\r\nirectly tries to make a deregister call on the WriteStage&#39;s selector on thi=\r\ns socket object. So, easily concurrent mod exceptions\n        are thrown wh=\r\nen my downloader stage is pumping requests and making new connections). I s=\r\nhall raise this bug to the author and I am\n        proceeding with my fix o=\r\nn it. Because of this unsynchronized communication, a lot of CancelledKeyEx=\r\nceptions are also thrown in the\n        internals.\n\n        - A documented =\r\nbug : ConcurrentModification exceptions when iterating through the selector=\r\n&#39;s selectedKeys. This is also due to no\n        synchronization. Multiple t=\r\nhreads are allowed by the seda internals to do select calls on a single sel=\r\nector. (Look for the docs in\n        seda.sandStorm.lib.aSocket.nio.NIOSele=\r\nctSource.doPoll method). I will have to look for doing some minimal synchro=\r\nnization as stated\n        in there.\n\n        - There has been other rare N=\r\nullPointerExceptions and IllegalArgumentException in some places. I will ha=\r\nve to look into their\n        implications.\n\n        I will fix the last tw=\r\no problems and get the performance measurements tomorrow.\n\n        Thanks,\n=\r\n        Reddy\n\n        ----- Original Message -----\n        From: Gordon Mo=\r\nhr\n        To: archive-crawler@yahoogroups.com\n        Sent: Wednesday, Apr=\r\nil 09, 2003 12:17 AM\n        Subject: Re: [archive-crawler] Status !!\n\n\n   =\r\n     Thanks for the update!\n\n        The Ocenstore libhttp package is known=\r\n to be very rough; really just a\n        placeholder or starting point for =\r\nwhat we&#39;d need. (Note that there&#39;s\n        also an alternative &#39;libhttp2&#39; p=\r\nackage in OceanStore, but it seemed both\n        unused in their other code=\r\n and more elaborate, so I haven&#39;t tried\n        to use it yet.)\n\n        Th=\r\ne TCP response ordering capabilities to aSocketInputStream only seem\n      =\r\n  necessary if you have multiple threads reading from the same socket -- wh=\r\nich\n        I think can, and probably should, be avoided.\n\n        I&#39;m look=\r\ning forward to seeing the test results.\n\n        I like the BuildDesign pro=\r\nposal; please move forward with creating\n        that structure for a new m=\r\nodule on the sourceforge CVS. However,\n        please use the module name o=\r\nf &quot;ArchiveOpenCrawler&quot; (instead of\n        &quot;Web-crawler&quot;).\n\n        Thanks!=\r\n\n\n        - Gordon\n\n        ----- Original Message -----\n        From: G.B.=\r\nReddy\n        To: archive-crawler@yahoogroups.com\n        Sent: Tuesday, Ap=\r\nril 08, 2003 11:04 AM\n        Subject: [archive-crawler] Status !!\n\n\n      =\r\n  Gordon,\n\n        I am presently working on the SEDA socket overhead deter=\r\nmination work. I will get the results in the next two days. Some initial\n  =\r\n      insights into it are\n        - Oceanstore manages both Tx and Rx in a=\r\n single stage.\n        - It just holds the responses in memory only. It doe=\r\ns not write into tmp files if they are huge.\n        - TCP response reorder=\r\ning is done by using the seda.sandStorm.lib.aSocket.aSocketInputStream clas=\r\ns which reorders packets according\n        to the ATcpInPacket sequence num=\r\nber.\n\n        The test that will be done :\n        - Port the downloader co=\r\nde ( which we had written earlier during the java nio performance tests ) t=\r\no SEDA framework and use the\n        OceanStore library for HTTP fetching. =\r\nThe same tests that we did for the downloader will be repeated in this ocea=\r\nnstore setup. We\n        are removing some oceanstore code to make it simil=\r\nar. The result of this test would tell us the percentage of overhead impose=\r\nd by\n        the SEDA framework.\n\n\n        We are also done with the JAnt p=\r\nackaging scripts. It uses the present CVS structure itself. I shall create =\r\nthe proposed CVS\n        structure after you approve it. Today we have put =\r\nthe cronjob for testing the web hosting part of nightly builds. We shall en=\r\nable it\n        for all tomorrow. As of now, only the last nightly build wi=\r\nll be available for download. More changes need to be made for hosting\n    =\r\n    every nightly build of a week.\n\n        Thanks,\n        Reddy\n\n        =\r\nYahoo! Groups Sponsor\n        ADVERTISEMENT\n\n\n\n\n        To unsubscribe from=\r\n this group, send an email to:\n        archive-crawler-unsubscribe@yahoogro=\r\nups.com\n\n\n\n        Your use of Yahoo! Groups is subject to the Yahoo! Terms=\r\n of Service.\n\n\n\n        To unsubscribe from this group, send an email to:\n =\r\n       archive-crawler-unsubscribe@yahoogroups.com\n\n\n\n        Your use of Y=\r\nahoo! Groups is subject to the Yahoo! Terms of Service.\n\n\n\n        To unsub=\r\nscribe from this group, send an email to:\n        archive-crawler-unsubscri=\r\nbe@yahoogroups.com\n\n\n\n        Your use of Yahoo! Groups is subject to the Y=\r\nahoo! Terms of Service.\n\n\n        Yahoo! Groups Sponsor\n        ADVERTISEME=\r\nNT\n\n\n\n\n        To unsubscribe from this group, send an email to:\n        ar=\r\nchive-crawler-unsubscribe@yahoogroups.com\n\n\n\n        Your use of Yahoo! Gro=\r\nups is subject to the Yahoo! Terms of Service.\n\n\n\n        To unsubscribe fr=\r\nom this group, send an email to:\n        archive-crawler-unsubscribe@yahoog=\r\nroups.com\n\n\n\n        Your use of Yahoo! Groups is subject to the Yahoo! Ter=\r\nms of Service. \n\n\n\n      To unsubscribe from this group, send an email to:\n=\r\n      archive-crawler-unsubscribe@yahoogroups.com\n\n\n\n      Your use of Yaho=\r\no! Groups is subject to the Yahoo! Terms of Service. \n\n\n\n    To unsubscribe=\r\n from this group, send an email to:\n    archive-crawler-unsubscribe@yahoogr=\r\noups.com\n\n\n\n    Your use of Yahoo! Groups is subject to the Yahoo! Terms of=\r\n Service. \n\n\n        Yahoo! Groups Sponsor \n       \n       \n\n  To unsubscri=\r\nbe from this group, send an email to:\n  archive-crawler-unsubscribe@yahoogr=\r\noups.com\n\n\n\n  Your use of Yahoo! Groups is subject to the Yahoo! Terms of S=\r\nervice. \n\n\r\n------=_NextPart_001_204E_01C3085B.2AC2EE10\r\nContent-Type: text/html;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot;&gt;\n&lt;HTML&gt;&lt;HEAD&gt;=\r\n\n&lt;META http-equiv=3DContent-Type content=3D&quot;text/html; charset=3Diso-8859-1=\r\n&quot;&gt;\n&lt;META content=3D&quot;MSHTML 5.50.4134.600&quot; name=3DGENERATOR&gt;\n&lt;STYLE&gt;&lt;/STYLE&gt;=\r\n\n&lt;/HEAD&gt;\n&lt;BODY bgColor=3D#ffffff&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Gordon,&lt;=\r\n/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FON=\r\nT face=3DArial size=3D2&gt;The updated performance doc is attached. Please \nre=\r\nview the &quot;test results section&quot; and the &quot;other misc results section&quot; in the=\r\n \nSEDA NIO pages.&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbs=\r\np;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;The JDK 1.4.2 beta results given =\r\nbefore saying CPU \nusage is only 5% is an incorrect one. We found today tha=\r\nt there is a peculiar \nproblem in the JDK ( or I am not sure if it is with =\r\nSEDA or the internal unix \ncalls made&nbsp;)&nbsp;whereby the unix time com=\r\nmand gets fooled. The system and \nuser time reported by the java process ge=\r\nts reinitialized at the time the JVM is \nabout to exit. Interestingly, we c=\r\nould see the right values in the time command \noutput if the downloader is =\r\nkilled in the middle using Ctrl-C. And we were \nsurprised to see that time =\r\ncommand works well with the Java downloader but not \nwith the SEDA download=\r\ner on the same JDK. The new results on JDK 1.4.2 are in \nthe document.&lt;/FON=\r\nT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT fa=\r\nce=3DArial size=3D2&gt;The updated schedule is also attached. Please \nreview i=\r\nt.&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;=\r\nFONT face=3DArial size=3D2&gt;Thanks,&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial siz=\r\ne=3D2&gt;Reddy&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DI=\r\nV&gt;\n&lt;BLOCKQUOTE \nstyle=3D&quot;PADDING-RIGHT: 0px; PADDING-LEFT: 5px; MARGIN-LEFT=\r\n: 5px; BORDER-LEFT: #000000 2px solid; MARGIN-RIGHT: 0px&quot;&gt;\n  &lt;DIV style=3D&quot;=\r\nFONT: 10pt arial&quot;&gt;----- Original Message ----- &lt;/DIV&gt;\n  &lt;DIV \n  style=3D&quot;BA=\r\nCKGROUND: #e4e4e4; FONT: 10pt arial; font-color: black&quot;&gt;&lt;B&gt;From:&lt;/B&gt; \n  &lt;A =\r\ntitle=3Dreddy@... href=3D&quot;mailto:reddy@...&quot;&gt;G.B.Reddy&lt;/=\r\nA&gt; \n  &lt;/DIV&gt;\n  &lt;DIV style=3D&quot;FONT: 10pt arial&quot;&gt;&lt;B&gt;To:&lt;/B&gt; &lt;A \n  title=3Darc=\r\nhive-crawler@yahoogroups.com \n  href=3D&quot;mailto:archive-crawler@yahoogroups.=\r\ncom&quot;&gt;archive-crawler@yahoogroups.com&lt;/A&gt; \n  &lt;/DIV&gt;\n  &lt;DIV style=3D&quot;FONT: 10=\r\npt arial&quot;&gt;&lt;B&gt;Sent:&lt;/B&gt; Friday, April 18, 2003 10:32 \n  PM&lt;/DIV&gt;\n  &lt;DIV styl=\r\ne=3D&quot;FONT: 10pt arial&quot;&gt;&lt;B&gt;Subject:&lt;/B&gt; Re: [archive-crawler] SEDA \n  Perfor=\r\nmance !!&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&lt;FONT face=3DArial=\r\n size=3D2&gt;&lt;/FONT&gt;&lt;BR&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Gordon,&lt;/FON=\r\nT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FON=\r\nT face=3DArial size=3D2&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;\n  &lt;DIV&gt;I had a=\r\n look into the SEDA code to understand the synchronization issues \n  which =\r\nwe agreed on the day of discussion could be the reason behind low \n  throug=\r\nhput.&nbsp;I found that there&nbsp;is only a very limited \n  synchronizatio=\r\nn in the code which cannot be treated as an overhead. I also \n  noticed in =\r\nour tests that the average packet length in one read is \n  almost&nbsp;equa=\r\nl to the one in the Java Downloader-With sleep option. So, \n  this means th=\r\nat aggregation of packets is indeed happening; but still the fact \n  that C=\r\nPU usage is about 50 to 60% makes us feel that somebody else is \n  comsumin=\r\ng it. This can only be attributed to the SEDA overheads of multiple \n  thre=\r\nads and other object allocations and the GC associated with it.&lt;/DIV&gt;\n  &lt;DI=\r\nV&gt;&nbsp;&lt;/DIV&gt;&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Surprisingly=\r\n,&nbsp;JDK 1.4.2 beta is giving a \n  very efficient CPU usage on the SEDA d=\r\nownloader. The CPU usage goes down to \n  about less than 5% compared to the=\r\n 50 to 60% CPU usage of JDK 1.4.1. However \n  the throughput goes down to a=\r\nbout 2 MBytes/sec compared to the close to&nbsp;3 \n  MBytes/sec of JDK 1.4.=\r\n1. I am still trying to understand the drastic effect on \n  CPU usage. I am=\r\n doing more tests&nbsp;on this and will get the results on \n  Monday.&lt;/FONT=\r\n&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&nbsp;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;I will conso=\r\nlidate all these findings till date \n  in the document&nbsp;and send it for=\r\n you to get the complete \n  picture.&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&nbsp;&lt;/DIV&gt;\n  &lt;DI=\r\nV&gt;PS: I had a look into the seda http package to find the trick that Raymie=\r\n \n  mentioned which would avoid both the maintanence of a hashmap and the \n=\r\n  subsequent synchronization associated with it. They maintain a hashtable =\r\n( \n  ATcpConnection Vs. httpConnection ) which is populated when a new conn=\r\nection \n  is made. This httpConnection object is the \n  SinkIF&nbsp;which&n=\r\nbsp;primarily&nbsp;has neat interfaces for&nbsp;parsing the \n  http request=\r\n inpackets and other enqueue methods for sending back the URL \n  contents t=\r\nhrough the connection to the webclient. So, when ATcpInPackets \n  arrive, t=\r\nhe httpConnection is fetched from the hashtable and the parsePacket \n  meth=\r\nods are called on it.&nbsp;Other than being neat interfaces,&nbsp;this \n  d=\r\noes not avoid the hash being maintained.&nbsp;( The hash being \n  java.util=\r\n.Hashtable, it is internally synchronized.). On the other hand, \n  attachin=\r\ng arbitrary objects to the request is another way of avoiding the hash \n  o=\r\nf requests; but this hash/list cannot be avoided if we have to do \n  timeou=\r\nt/retry handing.&lt;/DIV&gt;\n  &lt;DIV&gt;&nbsp;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;/FONT&gt;&lt;FONT face=3DArial=\r\n size=3D2&gt;Thanks,&lt;/FONT&gt;&lt;/DIV&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Red=\r\ndy&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n  &lt;D=\r\nIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n  &lt;BLOCKQUOTE \n  style=\r\n=3D&quot;PADDING-RIGHT: 0px; PADDING-LEFT: 5px; MARGIN-LEFT: 5px; BORDER-LEFT: #=\r\n000000 2px solid; MARGIN-RIGHT: 0px&quot;&gt;\n    &lt;DIV style=3D&quot;FONT: 10pt arial&quot;&gt;-=\r\n---- Original Message ----- &lt;/DIV&gt;\n    &lt;DIV \n    style=3D&quot;BACKGROUND: #e4e4=\r\ne4; FONT: 10pt arial; font-color: black&quot;&gt;&lt;B&gt;From:&lt;/B&gt; \n    &lt;A title=3Dreddy=\r\n@... href=3D&quot;mailto:reddy@...&quot;&gt;G.B.Reddy&lt;/A&gt; \n    &lt;/DIV=\r\n&gt;\n    &lt;DIV style=3D&quot;FONT: 10pt arial&quot;&gt;&lt;B&gt;To:&lt;/B&gt; &lt;A \n    title=3Darchive-cr=\r\nawler@yahoogroups.com \n    href=3D&quot;mailto:archive-crawler@yahoogroups.com&quot;&gt;=\r\narchive-crawler@yahoogroups.com&lt;/A&gt; \n    &lt;/DIV&gt;\n    &lt;DIV style=3D&quot;FONT: 10p=\r\nt arial&quot;&gt;&lt;B&gt;Sent:&lt;/B&gt; Wednesday, April 16, 2003 10:03 \n    PM&lt;/DIV&gt;\n    &lt;DI=\r\nV style=3D&quot;FONT: 10pt arial&quot;&gt;&lt;B&gt;Subject:&lt;/B&gt; Re: [archive-crawler] SEDA \n  =\r\n  Performance !!&lt;/DIV&gt;\n    &lt;DIV&gt;&lt;BR&gt;&lt;/DIV&gt;\n    &lt;DIV&gt;&lt;FONT face=3DArial size=\r\n=3D2&gt;Gordon,&lt;/FONT&gt;&lt;/DIV&gt;\n    &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp=\r\n;&lt;/DIV&gt;&lt;FONT face=3DArial size=3D2&gt;\n    &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Th=\r\ne various tests and the results that we got \n    today are as follows. ( &lt;/=\r\nFONT&gt;&lt;FONT face=3DArial size=3D2&gt;In the below lines, \n    Java downloader m=\r\neans the HTTP downloader which we used earlier to measure \n    the java nio=\r\n performance.)&lt;/FONT&gt;&lt;/DIV&gt;\n    &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nb=\r\nsp;&lt;/DIV&gt;\n    &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;- Tried enabling the cache o=\r\nn the webservers. \n    Got only a 0.5 to 0.8 MBytes/sec improvement on the =\r\nJava Downloader code. \n    This could be lesser on SEDA downloader. Since t=\r\nhe throughput rise was not \n    too high,&nbsp;we planned to proceed with o=\r\nther&nbsp;tests with no \n    cache.&lt;/FONT&gt;&lt;/DIV&gt;\n    &lt;DIV&gt;&lt;FONT face=3DAria=\r\nl size=3D2&gt;- Measured the memory requirements of the SEDA \n    downloader.&=\r\nnbsp;The required memory is less than 20 MB. So, we&nbsp;decided \n    not t=\r\no use the&nbsp;JVM min/max extended cmd line memory settings. We \n    prefe=\r\nrred to do this, since the Java Downloader readings were not done with \n   =\r\n such settings earlier and will be difficult to compare since the GC logic =\r\n\n    might be different if there was a memory setting.&lt;/FONT&gt;&lt;/DIV&gt;\n    &lt;DI=\r\nV&gt;&lt;FONT face=3DArial size=3D2&gt;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; - 100 \n=\r\n    Connections - 7 MB approx&lt;/FONT&gt; &lt;/DIV&gt;\n    &lt;DIV&gt;&lt;FONT face=3DArial siz=\r\ne=3D2&gt;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; - 250 \n    Connections - 15 MB =\r\napprox&lt;/FONT&gt; &lt;/DIV&gt;\n    &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&nbsp;&nbsp;&nbsp=\r\n; &nbsp;&nbsp;&nbsp; - 500 \n    Connections - 20 MB approx&lt;/FONT&gt;&lt;/DIV&gt;\n   =\r\n &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;- Measured the throughput with the HotSpo=\r\nt \n    &lt;STRONG&gt;-server &lt;/STRONG&gt;option of JVM.&lt;/FONT&gt; &lt;/DIV&gt;\n    &lt;DIV&gt;&nbsp=\r\n;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; - &lt;FONT face=3DArial size=3D2&gt;This \n    di=\r\nd not yield any big noticible benefits. It is because of too much I/O in \n =\r\n   our code which in any case the JVM cannot optimize.&lt;/FONT&gt;&lt;/DIV&gt;\n    &lt;DI=\r\nV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n    &lt;DIV&gt;&lt;FONT face=3DAri=\r\nal size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n    &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Things=\r\n to discuss tomorrow on SEDA \n    Performance:&lt;/FONT&gt;&lt;/DIV&gt;\n    &lt;DIV&gt;&lt;FONT =\r\nface=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n    &lt;DIV&gt;&lt;FONT face=3DArial size=\r\n=3D2&gt;- SEDA Downloader uses not more than 60% CPU. \n    Probably if it uses=\r\n the rest, it might acheive more throughput similar to \n    our &quot;without sl=\r\neep&quot; tests on Java Downloader.&nbsp;CPU not being used \n    completely&nbsp=\r\n;could be because of two reasons; &lt;/FONT&gt;&lt;/DIV&gt;\n    &lt;DIV&gt;&lt;FONT face=3DArial=\r\n size=3D2&gt;&nbsp;&nbsp;&nbsp; -- One is that we are not \n    pumping enough =\r\nrequests which is not the case. &lt;/FONT&gt;&lt;FONT face=3DArial \n    size=3D2&gt;We =\r\nmonitored this and we see that the connectedURLCount at any point \n    is v=\r\nery close to the cmd line param. For instance, in case of 500 \n    connecti=\r\nons, the average was more than 470.&lt;/FONT&gt;&lt;/DIV&gt;\n    &lt;DIV&gt;&nbsp;&nbsp;&nbsp=\r\n; -- &lt;FONT face=3DArial size=3D2&gt;Other is that SEDA \n    threads&nbsp;are g=\r\netting blocked in some synchronization locks.&nbsp;Should \n    have to&nbsp=\r\n;identify these bottlenecks.&lt;/FONT&gt;&lt;/DIV&gt;\n    &lt;DIV&gt;&lt;FONT face=3DArial size=\r\n=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n    &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;- The test en=\r\nvironment being different between \n    SEDA benchmarks and our tests, it is=\r\n difficult to correlate. Probably we can \n    run the benchmarking&nbsp;tes=\r\nt scripts bundled in SEDA in our local \n    environment so that it will be =\r\neasy to compare against our tests. I haven&#39;t \n    yet completely looked int=\r\no their test scripts.&lt;/FONT&gt;&lt;/DIV&gt;&lt;/FONT&gt;\n    &lt;DIV&gt;&lt;FONT face=3DArial size=\r\n=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n    &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;=\r\n&lt;/DIV&gt;\n    &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;The updated schedule is also at=\r\ntached. We shall \n    also discuss about this tomorrow.&lt;/FONT&gt;&lt;/DIV&gt;\n    &lt;D=\r\nIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n    &lt;DIV&gt;&lt;FONT face=3DAr=\r\nial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n    &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Thank=\r\ns,&lt;/FONT&gt;&lt;/DIV&gt;\n    &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Reddy&lt;/FONT&gt;&lt;/DIV&gt;\n   =\r\n &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n    &lt;BLOCKQUOTE \n    =\r\nstyle=3D&quot;PADDING-RIGHT: 0px; PADDING-LEFT: 5px; MARGIN-LEFT: 5px; BORDER-LE=\r\nFT: #000000 2px solid; MARGIN-RIGHT: 0px&quot;&gt;\n      &lt;DIV style=3D&quot;FONT: 10pt a=\r\nrial&quot;&gt;----- Original Message ----- &lt;/DIV&gt;\n      &lt;DIV \n      style=3D&quot;BACKGR=\r\nOUND: #e4e4e4; FONT: 10pt arial; font-color: black&quot;&gt;&lt;B&gt;From:&lt;/B&gt; \n      &lt;A =\r\ntitle=3Dreddy@... \n      href=3D&quot;mailto:reddy@...&quot;&gt;G.B.=\r\nReddy&lt;/A&gt; &lt;/DIV&gt;\n      &lt;DIV style=3D&quot;FONT: 10pt arial&quot;&gt;&lt;B&gt;To:&lt;/B&gt; &lt;A \n     =\r\n title=3Darchive-crawler@yahoogroups.com \n      href=3D&quot;mailto:archive-craw=\r\nler@yahoogroups.com&quot;&gt;archive-crawler@yahoogroups.com&lt;/A&gt; \n      &lt;/DIV&gt;\n    =\r\n  &lt;DIV style=3D&quot;FONT: 10pt arial&quot;&gt;&lt;B&gt;Sent:&lt;/B&gt; Tuesday, April 15, 2003 11:2=\r\n0 \n      PM&lt;/DIV&gt;\n      &lt;DIV style=3D&quot;FONT: 10pt arial&quot;&gt;&lt;B&gt;Subject:&lt;/B&gt; Re:=\r\n [archive-crawler] SEDA \n      Performance !!&lt;/DIV&gt;\n      &lt;DIV&gt;&lt;BR&gt;&lt;/DIV&gt;\n =\r\n     &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Gordon,&lt;/FONT&gt;&lt;/DIV&gt;\n      &lt;DIV&gt;&lt;FONT=\r\n face=3DArial size=3D2&gt;&lt;/FONT&gt;&lt;FONT face=3DArial \n      size=3D2&gt;&lt;/FONT&gt;&nb=\r\nsp;&lt;/DIV&gt;\n      &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;We can have our call as su=\r\nggested on \n      Wednesday 8:30p PT (3:30UTC).&lt;/FONT&gt;&lt;/DIV&gt;\n      &lt;DIV&gt;&lt;FO=\r\nNT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n      &lt;DIV&gt;&lt;FONT face=3DArial =\r\nsize=3D2&gt;The test sources used are checked into CVS. \n      Look for the pa=\r\nckages &lt;/FONT&gt;&lt;/DIV&gt;\n      &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;- test.javanio.=\r\nhttp&nbsp;- Contains the Async \n      and Sync http downloader implementati=\r\non written to benchmark the java nio \n      apis.&lt;/FONT&gt;&lt;/DIV&gt;\n      &lt;DIV&gt;&lt;=\r\nFONT face=3DArial size=3D2&gt;- test.sedanio.http - Contains the SEDA \n      a=\r\nSocket based http downloader ( exactly similar to its javanio \n      counte=\r\nrpart).&lt;/FONT&gt;&lt;/DIV&gt;\n      &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/=\r\nDIV&gt;\n      &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;As you said, the maxConnections=\r\n is&nbsp;not a \n      strict target; so the actual number of connections at=\r\n any point could be \n      less than it; but not more.&lt;/FONT&gt;&lt;/DIV&gt;\n      &lt;=\r\nDIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n      &lt;DIV&gt;&lt;FONT face=\r\n=3DArial size=3D2&gt;We had earlier raised the value of maxClients \n      para=\r\nmeter suitably in httpd.conf to allow apache to service more than the \n    =\r\n  default 150 clients simultaneously.&lt;/FONT&gt;&lt;/DIV&gt;\n      &lt;DIV&gt;&lt;FONT face=3D=\r\nArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n      &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;T=\r\noday we found that the&nbsp;sandstorm script \n      by default ships&nbsp;w=\r\nith ( -ms128M -mx1024M )&nbsp;options. This setting \n      results in GC ge=\r\ntting called very lately but when called, it takes about a \n      minute to=\r\n complete. This is the reason behind the previous test results \n      showi=\r\nng very&nbsp;less throughput above 100 simulataneous connections. \n      Af=\r\nter removing it, we see the following throughput.&lt;/FONT&gt;&lt;/DIV&gt;\n      &lt;DIV&gt;&lt;=\r\nFONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n      &lt;DIV&gt;&lt;FONT face=3DAria=\r\nl size=3D2&gt;100 connections - about 4.0 Mbytes/sec ( This \n      is same as =\r\nthe reading we got before )&lt;/FONT&gt;&lt;/DIV&gt;\n      &lt;DIV&gt;&lt;FONT face=3DArial size=\r\n=3D2&gt;250 connections -&nbsp;about 2.7&lt;/FONT&gt;&lt;FONT \n      face=3DArial size=\r\n=3D2&gt; Mbytes/sec ( This was less than 1 Mbytes/sec before \n      )&lt;/FONT&gt;&lt;/=\r\nDIV&gt;\n      &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;500 connections - about&nbsp;1.=\r\n8&lt;FONT \n      face=3DArial size=3D2&gt; Mbytes/sec ( This was less than 1 Mbyt=\r\nes/sec before \n      )&lt;/FONT&gt;&lt;/FONT&gt;&lt;/DIV&gt;\n      &lt;DIV&gt;&lt;FONT face=3DArial si=\r\nze=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n      &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;which mea=\r\nns that the throughput indeed \n      degrades with the number of connection=\r\ns; but not as bad as \n      before.&lt;/FONT&gt;&lt;/DIV&gt;\n      &lt;DIV&gt;&lt;FONT face=3DAr=\r\nial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n      &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;We =\r\nalso ran another quick test wherein we \n      used NBIO instead of the java=\r\n NIO.&lt;/FONT&gt;&lt;FONT face=3DArial size=3D2&gt; \n      We&nbsp;noticed that the th=\r\nroughput degraded to 1.8 Mbytes/sec in the 100 \n      connections case. Thi=\r\ns makes things even more fishy.&lt;/FONT&gt;&lt;/DIV&gt;\n      &lt;DIV&gt;&lt;FONT face=3DArial =\r\nsize=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n      &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;The dif=\r\nferences between our setup and the \n      setup used by the SEDA benchmarks=\r\n are&lt;/FONT&gt;&lt;/DIV&gt;\n      &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV=\r\n&gt;\n      &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Crawler Setup&nbsp;&nbsp;&nbsp; \n =\r\n     &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; \n      &nbsp;=\r\n&nbsp;&nbsp; -- SEDA benchmark Setup&lt;/FONT&gt;&lt;/DIV&gt;\n      &lt;DIV&gt;&lt;FONT face=3DA=\r\nrial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n      &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;- =\r\nSun JDK \n      1.4.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;=\r\n&nbsp;&nbsp; \n      &nbsp;&nbsp;&nbsp; -- IBM JDK 1.1.8&lt;/FONT&gt;&lt;/DIV&gt;\n      =\r\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;- JDK 1.4 NIO \n      library&nbsp;&nbsp;&n=\r\nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- NBIO \n      library&lt;/FONT&gt;&lt;/DIV=\r\n&gt;\n      &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;- 100 Mbps Ethernet &nbsp;&nbsp;&n=\r\nbsp;&nbsp; \n      &nbsp;&nbsp;&nbsp; -- Gigabit Ethernet&lt;/FONT&gt;&lt;/DIV&gt;\n     =\r\n &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;- No Cache on Webserver&nbsp;&nbsp;-- Mus=\r\nt \n      have had caching.&lt;/FONT&gt;&lt;/DIV&gt;\n      &lt;DIV&gt;&nbsp;&lt;/DIV&gt;\n      &lt;DIV&gt;=\r\n&lt;FONT face=3DArial size=3D2&gt;The other test combinations&nbsp;we are \n      =\r\nrunning now&nbsp;over our SEDA Http downloader are&lt;/FONT&gt;&lt;/DIV&gt;\n      &lt;DIV&gt;=\r\n&lt;FONT face=3DArial size=3D2&gt;-&nbsp;Try java -server option.&lt;/FONT&gt;&lt;/DIV&gt;\n  =\r\n    &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;- Try&nbsp;JDK 1.4.2 beta.&lt;/FONT&gt;&lt;/DIV=\r\n&gt;\n      &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;- Try&nbsp;IBM JDK 1.4&lt;/FONT&gt;&lt;/DIV=\r\n&gt;\n      &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;- Try&nbsp;IBM JDK 1.1.8 with NBIO=\r\n - This is \n      the closest comparison that we can do against SEDA \nbench=\r\nmarks.&lt;/FONT&gt;&lt;/DIV&gt;\n      &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;- Do tests enabl=\r\ning the web server \n      cache.&lt;/FONT&gt;&lt;/DIV&gt;\n      &lt;DIV&gt;&lt;FONT face=3DArial=\r\n size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n      &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT=\r\n&gt;&nbsp;&lt;/DIV&gt;\n      &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Thanks,&lt;/FONT&gt;&lt;/DIV&gt;\n =\r\n     &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Reddy&lt;/FONT&gt;&lt;/DIV&gt;\n      &lt;DIV&gt;&lt;FONT f=\r\nace=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n      &lt;BLOCKQUOTE \n      style=3D&quot;=\r\nPADDING-RIGHT: 0px; PADDING-LEFT: 5px; MARGIN-LEFT: 5px; BORDER-LEFT: #0000=\r\n00 2px solid; MARGIN-RIGHT: 0px&quot;&gt;\n        &lt;DIV style=3D&quot;FONT: 10pt arial&quot;&gt;-=\r\n---- Original Message ----- &lt;/DIV&gt;\n        &lt;DIV \n        style=3D&quot;BACKGROUN=\r\nD: #e4e4e4; FONT: 10pt arial; font-color: black&quot;&gt;&lt;B&gt;From:&lt;/B&gt; \n        &lt;A t=\r\nitle=3Dgojomo@... href=3D&quot;mailto:gojomo@...&quot;&gt;Gordon \n      =\r\n  Mohr&lt;/A&gt; &lt;/DIV&gt;\n        &lt;DIV style=3D&quot;FONT: 10pt arial&quot;&gt;&lt;B&gt;To:&lt;/B&gt; &lt;A \n  =\r\n      title=3Darchive-crawler@yahoogroups.com \n        href=3D&quot;mailto:archi=\r\nve-crawler@yahoogroups.com&quot;&gt;archive-crawler@yahoogroups.com&lt;/A&gt; \n        &lt;/=\r\nDIV&gt;\n        &lt;DIV style=3D&quot;FONT: 10pt arial&quot;&gt;&lt;B&gt;Sent:&lt;/B&gt; Tuesday, April 15=\r\n, 2003 12:33 \n        AM&lt;/DIV&gt;\n        &lt;DIV style=3D&quot;FONT: 10pt arial&quot;&gt;&lt;B&gt;S=\r\nubject:&lt;/B&gt; Re: [archive-crawler] SEDA \n        Performance !!&lt;/DIV&gt;\n      =\r\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FON=\r\nT&gt;&lt;FONT \n        face=3DArial size=3D2&gt;&lt;/FONT&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;=\r\n/FONT&gt;&lt;FONT face=3DArial \n        size=3D2&gt;&lt;/FONT&gt;&lt;FONT face=3DArial size=\r\n=3D2&gt;&lt;/FONT&gt;&lt;FONT face=3DArial \n        size=3D2&gt;&lt;/FONT&gt;&lt;FONT face=3DArial =\r\nsize=3D2&gt;&lt;/FONT&gt;&lt;FONT face=3DArial \n        size=3D2&gt;&lt;/FONT&gt;&lt;FONT face=3DAr=\r\nial size=3D2&gt;&lt;/FONT&gt;&lt;FONT face=3DArial \n        size=3D2&gt;&lt;/FONT&gt;&lt;FONT face=\r\n=3DArial size=3D2&gt;&lt;/FONT&gt;&lt;FONT face=3DArial \n        size=3D2&gt;&lt;/FONT&gt;&lt;FONT =\r\nface=3DArial size=3D2&gt;&lt;/FONT&gt;&lt;FONT face=3DArial \n        size=3D2&gt;&lt;/FONT&gt;&lt;F=\r\nONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&lt;BR&gt;&lt;/DIV&gt;&lt;TT&gt;Thanks for \n        the upda=\r\nted analysis!&lt;BR&gt;&lt;BR&gt;However, I am concerned that the results \n        may =\r\nbe more a result of the&lt;BR&gt;test design or the specific HTTP \n        implem=\r\nentation we&#39;re using than the&lt;BR&gt;underlying NIO/aSocket code, \n        beca=\r\nuse the results diverge so greatly&lt;BR&gt;from SEDA&#39;s own published \n        pe=\r\nrformance testing.&lt;BR&gt;&lt;BR&gt;For example, the results at...&lt;BR&gt;&lt;BR&gt;&nbsp; \n   =\r\n     &lt;A \n        href=3D&quot;http://www.cs.berkeley.edu/~mdw/proj/sandstorm/ioc=\r\nore-bench/index.html&quot;&gt;http://www.cs.berkeley.edu/~mdw/proj/sandstorm/iocore=\r\n-bench/index.html&lt;/A&gt;&lt;BR&gt;&lt;BR&gt;...show \n        strong throughput up through =\r\n1,000 simultaneous connections,&lt;BR&gt;indeed \n        even up past 10,000 simu=\r\nltaneous connections.&lt;BR&gt;&lt;BR&gt;Also, given the \n        note about the 1.4.1 =\r\n-&gt; 1.4.2 JRE NIO change, a test&lt;BR&gt;under 1.4.2 \n        is necessary to =\r\ntruly evaluate either of the \n        asynchronous&lt;BR&gt;options.&lt;BR&gt;&lt;BR&gt;Some =\r\nother questions about the test \n        setup:&lt;BR&gt;&lt;BR&gt;- the meaning of &quot;max=\r\nConnections&quot; is unclear to me; it \n        seems it&lt;BR&gt;&nbsp;&nbsp; is not =\r\na &quot;maximum&quot; but a &quot;target&quot;, and the \n        actual number of&lt;BR&gt;&nbsp;&nbs=\r\np; connections at any point in time might \n        be larger or smaller.&lt;BR=\r\n&gt;&nbsp;&nbsp; Is this right?&lt;BR&gt;&lt;BR&gt;- do you \n        have any other intrum=\r\nentation which suggests it is&lt;BR&gt;&nbsp;&nbsp; \n        specifically garbage=\r\n collection which is causing the \n        degradation&lt;BR&gt;&nbsp;&nbsp; of th=\r\ne SEDA approach above 100 \n        connections?&lt;BR&gt;&lt;BR&gt;- if some of the set=\r\nups are hitting \n        garbage-collection or other&lt;BR&gt;&nbsp;&nbsp; resour=\r\nce thresholds, more \n        info about the test machine/VM would&lt;BR&gt;&nbsp;=\r\n&nbsp; be helpful: RAM, VM \n        options used (server hotspot? heap/stac=\r\nk&lt;BR&gt;&nbsp;&nbsp; sizes? \n        etc.)&lt;BR&gt;&lt;BR&gt;- with only 2 Apache web ser=\r\nvers to one client process, we \n        may&lt;BR&gt;&nbsp;&nbsp; be testing/hitt=\r\ning Apache performance limits as much \n        as Java/IO&lt;BR&gt;&nbsp;&nbsp; l=\r\nimits. For example, default Apache will only \n        accept 150 simultaneo=\r\nus&lt;BR&gt;&nbsp;&nbsp; clients; by my reading of the \n        test setup this m=\r\neans that no&lt;BR&gt;&nbsp;&nbsp; matter how many \n        connections the LAN t=\r\nest attempted, it would&lt;BR&gt;&nbsp;&nbsp; never \n        succeed on more than=\r\n 300 (across the two test Apaches)&lt;BR&gt;&nbsp;&nbsp; \n        at once -- so a=\r\nny LAN test numbers over 300 aren&#39;t \n        really&lt;BR&gt;&nbsp;&nbsp; indicat=\r\nive of Java performance.&lt;BR&gt;&lt;BR&gt;- is the \n        test code something you c=\r\nould check into CVS?&lt;BR&gt;&lt;BR&gt;These figures are \n        all very interesting=\r\n, and even if quirks in&lt;BR&gt;the test are pushing \n        results one way or=\r\n the other, that will&lt;BR&gt;usually generate useful info, \n        too.&lt;BR&gt;&lt;BR=\r\n&gt;- Gordon&lt;BR&gt;&lt;BR&gt;----- Original Message -----&lt;BR&gt;From: \n        G.B.Reddy&lt;B=\r\nR&gt;To: archive-crawler@yahoogroups.com&lt;BR&gt;Sent: Friday, April \n        11, 2=\r\n003 3:16 PM&lt;BR&gt;Subject: Re: [archive-crawler] SEDA Performance \n        !!&lt;=\r\nBR&gt;&lt;BR&gt;&lt;BR&gt;Gordon,&lt;BR&gt;&lt;BR&gt;Please find attached the performance report \n    =\r\n    on the SEDA aSocket NIO layer. Look for the last section in the documen=\r\nt \n        &quot;SEDA NIO&lt;BR&gt;Socket Framework&quot; and the &quot;Summary&quot; section is also=\r\n updated \n        with the results. An excel sheet with the readings and th=\r\ne graph is \n        also&lt;BR&gt;attached for reference.&lt;BR&gt;&lt;BR&gt;We would like to=\r\n have a brief \n        chat with you on Tuesday 8:30 pm PST ( Monday is a h=\r\noliday for us on the \n        eve of Tamil new year ) about&lt;BR&gt;SEDA socket =\r\nlayer and generally about \n        the various tasks and other proceedings.=\r\n&lt;BR&gt;&lt;BR&gt;JAnt Build Status \n        :&lt;BR&gt;&lt;BR&gt;- The proposed directory struct=\r\nure is not yet created since we \n        are still in the Anecdote prototyp=\r\ning stage and we do not have \n        any&lt;BR&gt;complete package to checkin. I=\r\n have modified the ant script a bit \n        to suit the present Anecdote s=\r\ntructure and activated a cronjob&lt;BR&gt;over \n        it. I have also added you=\r\n and Raymie to the notification mail-ids list \n        so that you would al=\r\nso get the nightly build mails. You&lt;BR&gt;could get the \n        nightly build=\r\n from the location \n        &quot;/home/users/w/wc/wcr-team/NightlyBuilds&quot; as st=\r\nated in the mail \n        on&lt;BR&gt;shell.sourceforge.net. You could use your o=\r\nwn logins and do SFTP \n        to access the NightlyBuilds directory. It ha=\r\ns read permissions \n        for&lt;BR&gt;all.&lt;BR&gt;&lt;BR&gt;- I am not sure why the stat=\r\na labs libraries ( \n        st.ata.* packages) have been checked in as a se=\r\nparate CVS module. Are we \n        planning to&lt;BR&gt;upgrade/modify those sour=\r\nces and maintain ourselves. If \n        not, we could just have the built c=\r\nlasses in a jar in CVS lib directory \n        as&lt;BR&gt;we had done for other t=\r\nhird party libraries. Otherwise, if we want \n        to maintain it, then w=\r\nould we require that to be a separate \n        CVS&lt;BR&gt;module ? I think it w=\r\nould be better if we have one CVS root \n        module under which everythi=\r\nng is put in. Probably, in such cases, we \n        can&lt;BR&gt;have a &quot;thiryPart=\r\nySrc&quot; directory to maintain such sources within \n        our main module &quot;O=\r\npenWebCrawler&quot; \n        itself.&lt;BR&gt;&lt;BR&gt;Thanks,&lt;BR&gt;Reddy&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;----- Or=\r\niginal Message \n        -----&lt;BR&gt;From: G.B.Reddy&lt;BR&gt;To: archive-crawler@yah=\r\noogroups.com&lt;BR&gt;Sent: \n        Friday, April 11, 2003 12:46 AM&lt;BR&gt;Subject: =\r\nRe: [archive-crawler] Status \n        !!&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Gordon,&lt;BR&gt;&lt;BR&gt;As you s=\r\nay, the aSocketInputStream is \n        needed only if the client stage is m=\r\nultithreaded. But the oceanstore \n        &quot;HttpClient&quot; stage is&lt;BR&gt;internal=\r\nly using it to do sequencing which is \n        unnecessary since anyway the=\r\n &quot;HttpClient&quot; class \n        implements&lt;BR&gt;SingleThreadedEventHandlerIF. I =\r\nhave removed these \n        overheads to do my performance testing.&lt;BR&gt;&lt;BR&gt;=\r\nAfter starting to test \n        the SEDA socket performance, I ran into thr=\r\nee problems in the SEDA&#39;s \n        socket framework.&lt;BR&gt;&lt;BR&gt;- Newly discove=\r\nred bug : The seda internals \n        throw ConcurrentModification exceptio=\r\nns when iterating through the \n        selector&#39;s registered&lt;BR&gt;keys. This =\r\nexceptions is highly reproducible \n        when more number of concurrent d=\r\nownloads happen. Synchronization has not \n        been taken&lt;BR&gt;care when t=\r\nhe ReadEventHandler tries to deregister the \n        socket from the select=\r\nor of the WriteEventHandler. ( As you would know, \n        there&lt;BR&gt;are thr=\r\nee stages ReadStage, WriteStage and ListenStage in the \n        seda socket=\r\n framework. Each has its own java Selector instance \n        and&lt;BR&gt;they wa=\r\nit on its select call. The ReadStage is the one that \n        determines th=\r\nat a connection is terminated. When this happens, \n        it&lt;BR&gt;directly t=\r\nries to make a deregister call on the WriteStage&#39;s \n        selector on thi=\r\ns socket object. So, easily concurrent mod \n        exceptions&lt;BR&gt;are throw=\r\nn when my downloader stage is pumping requests \n        and making new conn=\r\nections). I shall raise this bug to the author and I \n        am&lt;BR&gt;proceed=\r\ning with my fix on it. Because of this unsynchronized \n        communicatio=\r\nn, a lot of CancelledKeyExceptions are also thrown in \n        the&lt;BR&gt;inter=\r\nnals.&lt;BR&gt;&lt;BR&gt;- A documented bug : ConcurrentModification \n        exception=\r\ns when iterating through the selector&#39;s selectedKeys. This is \n        also=\r\n due to no&lt;BR&gt;synchronization. Multiple threads are allowed by the \n       =\r\n seda internals to do select calls on a single selector. (Look for the \n   =\r\n     docs in&lt;BR&gt;seda.sandStorm.lib.aSocket.nio.NIOSelectSource.doPoll \n    =\r\n    method). I will have to look for doing some minimal synchronization as =\r\n\n        stated&lt;BR&gt;in there.&lt;BR&gt;&lt;BR&gt;- There has been other rare \n        Nu=\r\nllPointerExceptions and IllegalArgumentException in some places. I \n       =\r\n will have to look into their&lt;BR&gt;implications.&lt;BR&gt;&lt;BR&gt;I will fix the last \n=\r\n        two problems and get the performance measurements \n        tomorrow=\r\n.&lt;BR&gt;&lt;BR&gt;Thanks,&lt;BR&gt;Reddy&lt;BR&gt;&lt;BR&gt;----- Original Message \n        -----&lt;BR&gt;F=\r\nrom: Gordon Mohr&lt;BR&gt;To: \n        archive-crawler@yahoogroups.com&lt;BR&gt;Sent: W=\r\nednesday, April 09, 2003 12:17 \n        AM&lt;BR&gt;Subject: Re: [archive-crawler=\r\n] Status !!&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Thanks for the \n        update!&lt;BR&gt;&lt;BR&gt;The Ocenstore=\r\n libhttp package is known to be very rough; \n        really just a&lt;BR&gt;place=\r\nholder or starting point for what we&#39;d need. (Note \n        that there&#39;s&lt;BR=\r\n&gt;also an alternative &#39;libhttp2&#39; package in OceanStore, \n        but it seem=\r\ned both&lt;BR&gt;unused in their other code and more elaborate, so \n        I hav=\r\nen&#39;t tried&lt;BR&gt;to use it yet.)&lt;BR&gt;&lt;BR&gt;The TCP response ordering \n        cap=\r\nabilities to aSocketInputStream only seem&lt;BR&gt;necessary if you have \n       =\r\n multiple threads reading from the same socket -- which&lt;BR&gt;I think can, \n  =\r\n      and probably should, be avoided.&lt;BR&gt;&lt;BR&gt;I&#39;m looking forward to seeing=\r\n \n        the test results.&lt;BR&gt;&lt;BR&gt;I like the BuildDesign proposal; please =\r\nmove \n        forward with creating&lt;BR&gt;that structure for a new module on t=\r\nhe \n        sourceforge CVS. However,&lt;BR&gt;please use the module name of \n   =\r\n     &quot;ArchiveOpenCrawler&quot; (instead \n        of&lt;BR&gt;&quot;Web-crawler&quot;).&lt;BR&gt;&lt;BR&gt;Th=\r\nanks!&lt;BR&gt;&lt;BR&gt;- Gordon&lt;BR&gt;&lt;BR&gt;----- \n        Original Message -----&lt;BR&gt;From:=\r\n G.B.Reddy&lt;BR&gt;To: \n        archive-crawler@yahoogroups.com&lt;BR&gt;Sent: Tuesday=\r\n, April 08, 2003 11:04 \n        AM&lt;BR&gt;Subject: [archive-crawler] Status !!&lt;=\r\nBR&gt;&lt;BR&gt;&lt;BR&gt;Gordon,&lt;BR&gt;&lt;BR&gt;I \n        am presently working on the SEDA socke=\r\nt overhead determination work. I \n        will get the results in the next =\r\ntwo days. Some initial&lt;BR&gt;insights into \n        it are&lt;BR&gt;- Oceanstore man=\r\nages both Tx and Rx in a single stage.&lt;BR&gt;- It \n        just holds the resp=\r\nonses in memory only. It does not write into tmp \n        files if they are=\r\n huge.&lt;BR&gt;- TCP response reordering is done by using \n        the seda.sand=\r\nStorm.lib.aSocket.aSocketInputStream class which reorders \n        packets =\r\naccording&lt;BR&gt;to the ATcpInPacket sequence number.&lt;BR&gt;&lt;BR&gt;The \n        test =\r\nthat will be done :&lt;BR&gt;- Port the downloader code ( which we had \n        w=\r\nritten earlier during the java nio performance tests ) to SEDA \n        fra=\r\nmework and use the&lt;BR&gt;OceanStore library for HTTP fetching. The same \n     =\r\n   tests that we did for the downloader will be repeated in this oceanstore=\r\n \n        setup. We&lt;BR&gt;are removing some oceanstore code to make it similar=\r\n. The \n        result of this test would tell us the percentage of overhead=\r\n imposed \n        by&lt;BR&gt;the SEDA framework.&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;We are also done wit=\r\nh the JAnt \n        packaging scripts. It uses the present CVS structure it=\r\nself. I shall \n        create the proposed CVS&lt;BR&gt;structure after you appro=\r\nve it. Today we have \n        put the cronjob for testing the web hosting p=\r\nart of nightly builds. We \n        shall enable it&lt;BR&gt;for all tomorrow. As =\r\nof now, only the last nightly \n        build will be available for download=\r\n. More changes need to be made for \n        hosting&lt;BR&gt;every nightly build =\r\nof a \n        week.&lt;BR&gt;&lt;BR&gt;Thanks,&lt;BR&gt;Reddy&lt;BR&gt;&lt;BR&gt;Yahoo! Groups \n        S=\r\nponsor&lt;BR&gt;ADVERTISEMENT&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;To unsubscribe from this \n      =\r\n  group, send an email \n        to:&lt;BR&gt;archive-crawler-unsubscribe@yahoogro=\r\nups.com&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Your \n        use of Yahoo! Groups is subject to the=\r\n Yahoo! Terms of \n        Service.&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;To unsubscribe from this =\r\ngroup, send an email \n        to:&lt;BR&gt;archive-crawler-unsubscribe@yahoogroup=\r\ns.com&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Your \n        use of Yahoo! Groups is subject to the Y=\r\nahoo! Terms of \n        Service.&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;To unsubscribe from this gr=\r\noup, send an email \n        to:&lt;BR&gt;archive-crawler-unsubscribe@yahoogroups.=\r\ncom&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Your \n        use of Yahoo! Groups is subject to the Yah=\r\noo! Terms of \n        Service.&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Yahoo! Groups \n        Sponsor&lt;BR=\r\n&gt;ADVERTISEMENT&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;To unsubscribe from this \n        group, =\r\nsend an email \n        to:&lt;BR&gt;archive-crawler-unsubscribe@yahoogroups.com&lt;B=\r\nR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Your \n        use of Yahoo! Groups is subject to the Yahoo! T=\r\nerms of \n        Service.&lt;BR&gt;&lt;BR&gt;&lt;/TT&gt;&lt;BR&gt;&lt;BR&gt;&lt;TT&gt;To unsubscribe from this =\r\ngroup, send an \n        email \n        to:&lt;BR&gt;archive-crawler-unsubscribe@y=\r\nahoogroups.com&lt;BR&gt;&lt;BR&gt;&lt;/TT&gt;&lt;BR&gt;&lt;BR&gt;&lt;TT&gt;Your \n        use of Yahoo! Groups i=\r\ns subject to the &lt;A \n        href=3D&quot;http://docs.yahoo.com/info/terms/&quot;&gt;Yah=\r\noo! Terms of \n        Service&lt;/A&gt;.&lt;/TT&gt; &lt;BR&gt;&lt;/BLOCKQUOTE&gt;&lt;BR&gt;&lt;BR&gt;&lt;TT&gt;To uns=\r\nubscribe from this \n      group, send an email \n      to:&lt;BR&gt;archive-crawle=\r\nr-unsubscribe@yahoogroups.com&lt;BR&gt;&lt;BR&gt;&lt;/TT&gt;&lt;BR&gt;&lt;BR&gt;&lt;TT&gt;Your \n      use of Ya=\r\nhoo! Groups is subject to the &lt;A \n      href=3D&quot;http://docs.yahoo.com/info/=\r\nterms/&quot;&gt;Yahoo! Terms of Service&lt;/A&gt;.&lt;/TT&gt; \n      &lt;BR&gt;&lt;/BLOCKQUOTE&gt;&lt;BR&gt;&lt;BR&gt;&lt;=\r\nTT&gt;To unsubscribe from this group, send an email \n    to:&lt;BR&gt;archive-crawle=\r\nr-unsubscribe@yahoogroups.com&lt;BR&gt;&lt;BR&gt;&lt;/TT&gt;&lt;BR&gt;&lt;BR&gt;&lt;TT&gt;Your \n    use of Yaho=\r\no! Groups is subject to the &lt;A \n    href=3D&quot;http://docs.yahoo.com/info/term=\r\ns/&quot;&gt;Yahoo! Terms of Service&lt;/A&gt;.&lt;/TT&gt; \n    &lt;BR&gt;&lt;/BLOCKQUOTE&gt;&lt;BR&gt;&lt;BR&gt;&lt;TT&gt;To =\r\n\n  unsubscribe from this group, send an email \n  to:&lt;BR&gt;archive-crawler-uns=\r\nubscribe@yahoogroups.com&lt;BR&gt;&lt;BR&gt;&lt;/TT&gt;&lt;BR&gt;&lt;BR&gt;&lt;TT&gt;Your \n  use of Yahoo! Grou=\r\nps is subject to the &lt;A \n  href=3D&quot;http://docs.yahoo.com/info/terms/&quot;&gt;Yahoo=\r\n! Terms of Service&lt;/A&gt;.&lt;/TT&gt; \n&lt;BR&gt;&lt;/BLOCKQUOTE&gt;&lt;/BODY&gt;&lt;/HTML&gt;\n\r\n------=_NextPart_001_204E_01C3085B.2AC2EE10--\r\n\n\r\n------=_NextPart_000_204D_01C3085B.2AC2EE10\r\nContent-Type: application/x-zip-compressed;\n\tname=&quot;DocsAndSchedule.zip&quot;\r\nContent-Disposition: attachment;\n\tfilename=&quot;DocsAndSchedule.zip&quot;\r\n\r\n[ Attachment content not displayed ]\r\n------=_NextPart_000_204D_01C3085B.2AC2EE10--\r\n\n"}}