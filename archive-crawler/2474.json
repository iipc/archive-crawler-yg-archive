{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":165458231,"authorName":"Bjarne Andersen","from":"Bjarne Andersen &lt;bja@...&gt;","profile":"bjarne_dk2000","replyTo":"LIST","senderId":"VbRZzSD7KofCA2Rf4FOLTxVtKkBtAkC31VOKYXJHd4XVjGL0jjIVA21uqPbOUR2inBQhSh-8FuWtPzvXDUq8qodo7t_-jB4lpG23SflBMKE","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] NPE in ExtractorJS","postDate":"1135845790","msgId":2474,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PGM4NzVjMjBiLmMyMGJjODc1QHN0YXRzYmlibGlvdGVrZXQuZGs+"},"prevInTopic":2473,"nextInTopic":2480,"prevInTime":2473,"nextInTime":2475,"topicId":2469,"numMessagesInTopic":5,"msgSnippet":"The NPEs started appearing after upgrading from 1.4.0 to 1.6.0 We used som builds of 1.5.0 in between but not for large crawls - so this might be why we","rawEmail":"Return-Path: &lt;bja@...&gt;\r\nX-Sender: bja@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 10507 invoked from network); 29 Dec 2005 08:43:21 -0000\r\nReceived: from unknown (66.218.66.166)\n  by m35.grp.scd.yahoo.com with QMQP; 29 Dec 2005 08:43:21 -0000\r\nReceived: from unknown (HELO luna.statsbiblioteket.dk) (130.225.24.87)\n  by mta5.grp.scd.yahoo.com with SMTP; 29 Dec 2005 08:43:21 -0000\r\nReceived: from statsbiblioteket.dk (localhost [127.0.0.1])\n by luna.statsbiblioteket.dk\n (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))\n with ESMTP id &lt;0IS9007XT47YSK@...&gt; for\n archive-crawler@yahoogroups.com; Thu, 29 Dec 2005 09:43:11 +0100 (MET)\r\nReceived: from [130.225.24.190] by luna.statsbiblioteket.dk (mshttpd); Thu,\n 29 Dec 2005 09:43:10 +0100\r\nDate: Thu, 29 Dec 2005 09:43:10 +0100\r\nTo: archive-crawler@yahoogroups.com\r\nMessage-id: &lt;c875c20b.c20bc875@...&gt;\r\nMIME-version: 1.0\r\nX-Mailer: iPlanet Messenger Express 5.2 HotFix 1.16 (built May 14 2003)\r\nContent-type: multipart/mixed; boundary=&quot;Boundary_(ID_EzTetrnedMurtcOyzR4sgw)&quot;\r\nContent-language: en\r\nX-Accept-Language: en\r\nPriority: normal\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: Bjarne Andersen &lt;bja@...&gt;\r\nSubject: Re: [archive-crawler] NPE in ExtractorJS\r\nX-Yahoo-Group-Post: member; u=165458231; y=XCZQRDAblSJ7v0UikaShSDvkCKNeWBIyOmDK3d9lFyibeHiPyxC10w\r\nX-Yahoo-Profile: bjarne_dk2000\r\n\r\n\r\n--Boundary_(ID_EzTetrnedMurtcOyzR4sgw)\r\nContent-type: text/plain; charset=us-ascii\r\nContent-disposition: inline\r\n\r\n[ Attachment content not displayed ]\r\n--Boundary_(ID_EzTetrnedMurtcOyzR4sgw)\r\nContent-type: message/rfc822\r\n\r\nReturn-path:\n &lt;sentto-8759867-2473-1135817124-bja=statsbiblioteket.dk@...&gt;\r\nReceived: from pollux.statsbiblioteket.dk\n (pollux.statsbiblioteket.dk [130.225.24.27]) by luna.statsbiblioteket.dk\n (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))\n with ESMTP id &lt;0IS8003VGI48HA@...&gt; for\n bja@...; Thu, 29 Dec 2005 01:45:45 +0100 (MET)\r\nReceived: from n4a.bullet.scd.yahoo.com\n (n4a.bullet.scd.yahoo.com [66.94.237.38])\tby pollux.statsbiblioteket.dk\n (8.11.6/8.11.6) with SMTP id jBT0d5p01014\tfor &lt;bja@...&gt;; Thu,\n 29 Dec 2005 01:39:05 +0100\r\nReceived: from [66.218.69.4] by n4.bullet.scd.yahoo.com with NNFMP; Thu,\n 29 Dec 2005 00:45:24 +0000\r\nReceived: from [66.218.66.103] by mailer4.bullet.scd.yahoo.com with NNFMP; Thu,\n 29 Dec 2005 00:45:24 +0000\r\nReceived: (qmail 60357 invoked from network); Thu, 29 Dec 2005 00:45:23 +0000\r\nReceived: from unknown (66.218.66.172) by m31.grp.scd.yahoo.com with QMQP; Thu,\n 29 Dec 2005 00:45:23 +0000\r\nReceived: from unknown (HELO relay02.pair.com) (209.68.5.16)\n by mta4.grp.scd.yahoo.com with SMTP; Thu, 29 Dec 2005 00:45:23 +0000\r\nReceived: (qmail 25746 invoked from network); Thu, 29 Dec 2005 00:44:18 +0000\r\nReceived: from unknown (HELO ?10.0.10.13?) (unknown) by unknown with SMTP; Thu,\n 29 Dec 2005 00:44:18 +0000\r\nDate: Wed, 28 Dec 2005 16:44:18 -0800\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\nSubject: Re: [archive-crawler] NPE in ExtractorJS\r\nIn-reply-to: &lt;43B2C630.5060709@...&gt;\r\nSender: archive-crawler@yahoogroups.com\r\nX-Sender: gojomo@...\r\nTo: archive-crawler@yahoogroups.com\r\nReply-to: archive-crawler@yahoogroups.com\r\nMessage-id: &lt;43B33162.4010406@...&gt;\r\nMIME-version: 1.0\r\nContent-type: text/html; charset=ISO-8859-1\r\nContent-transfer-encoding: 7BIT\r\nX-Accept-Language: en-us, en\r\nPrecedence: bulk\r\nDelivered-to: mailing list archive-crawler@yahoogroups.com\r\nComment: DomainKeys? See http://antispam.yahoo.com/domainkeys\r\nDomainKey-Signature: a=rsa-sha1; q=dns; c=nofws; s=lima; d=yahoogroups.com;\n\tb=YFNw69p9wE0UxSpZWLEaZ6vcqa5/XuMcxxiTgKw10ZRUBoQGnLyLjys73adIpUBOwpsKF4sYiwlNPabNiePVVAsterNCVwXRv0szCQ9RFFZY602GlV5l86QPfAR0ktDd;\r\nUser-Agent: Mozilla Thunderbird 1.0.7-1.1.fc3 (X11/20050929)\r\nMailing-List: list archive-crawler@yahoogroups.com; contact\n archive-crawler-owner@yahoogroups.com\r\nX-Yahoo-Newman-Property: groups-email\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-pair-Authenticated: 71.141.111.46\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nX-Yahoo-Profile: gojomo\r\nX-Statsbiblioteket-MailScanner: Found to be clean\r\nX-Statsbiblioteket-MailScanner-SpamCheck: not spam,\tSpamAssassin (score=0.284,\n required 5, HTML_50_60 0.18,\tHTML_MESSAGE 0.00, MIME_HTML_ONLY 0.10)\r\nX-Statsbiblioteket-MailScanner-From:\n sentto-8759867-2473-1135817124-bja=statsbiblioteket.dk@...\r\nReferences: &lt;f244e272.e272f244@...&gt;\n &lt;43B2C630.5060709@...&gt;\r\nList-Unsubscribe: &lt;mailto:archive-crawler-unsubscribe@yahoogroups.com&gt;\r\nList-Id: &lt;archive-crawler.yahoogroups.com&gt;\r\nOriginal-recipient: rfc822;bja@...\r\n\r\n&lt;html&gt;&lt;body&gt;\n\n\n&lt;tt&gt;\nI think the ExtractorJS code is assuming that a &#39;via&#39; URI will be&lt;BR&gt;\navailable to serve as the implied base HREF. This is usually&lt;BR&gt;\nthe case for Javascript content, but should not be assumed.&lt;BR&gt;\n&lt;BR&gt;\nI don&#39;t think any recent (just before 1.6) changes would have made&lt;BR&gt;\nthis error more common; is there any chance you&#39;ve recently started&lt;BR&gt;\nusing a larger seed list or manually feeding more URIs into a running&lt;BR&gt;\ncrawl (such that URIs returning Javascript would lack &#39;via&#39; URIs)?&lt;BR&gt;\n&lt;BR&gt;\nIn any case, it&#39;s a bug -- if no &#39;via&#39; is available the URI from&lt;BR&gt;\nwhich the Javascript itself was returned is probably the next&lt;BR&gt;\nbest &#39;base&#39; to use for derelativizing relative URIs.&lt;BR&gt;\n&lt;BR&gt;\n- Gordon @ IA&lt;BR&gt;\n&lt;BR&gt;\nstack wrote:&lt;BR&gt;\n&gt; Bjarne Andersen wrote:&lt;BR&gt;\n&gt; &lt;BR&gt;\n&gt;&gt;running 1.6 we started to see this quite often:&lt;BR&gt;\n&gt;&gt;&lt;BR&gt;\n&gt;&gt;Dec 25, 2005 9:18:01 PM org.archive.crawler.extractor.Extractor &lt;BR&gt;\n&gt;&gt;innerProcess&lt;BR&gt;\n&gt;&gt;WARNING: ExtractorJS: NullPointerException&lt;BR&gt;\n&gt;&gt;java.lang.NullPointerException&lt;BR&gt;\n&gt;&gt;at org.archive.net.UURIFactory.create(UURIFactory.java:336)&lt;BR&gt;\n&gt;&gt;at org.archive.net.UURIFactory.getInstance(UURIFactory.java:285)&lt;BR&gt;\n&gt;&gt;at &lt;BR&gt;\n&gt;&gt;org.archive.crawler.datamodel.CrawlURI.createAndAddLinkRelativeToVia(CrawlURI.java:1183)&lt;BR&gt;\n&gt;&gt;at &lt;BR&gt;\n&gt;&gt;org.archive.crawler.extractor.ExtractorJS.considerStrings(ExtractorJS.java:152)&lt;BR&gt;\n&gt;&gt;at org.archive.crawler.extractor.ExtractorJS.extract(ExtractorJS.java:118)&lt;BR&gt;\n&gt;&gt;at org.archive.crawler.extractor.Extractor.innerProcess(Extractor.java:67)&lt;BR&gt;\n&gt;&gt;at org.archive.crawler.framework.Processor.process(Processor.java:103)&lt;BR&gt;\n&gt;&gt;at &lt;BR&gt;\n&gt;&gt;org.archive.crawler.framework.ToeThread.processCrawlUri(ToeThread.java:306)&lt;BR&gt;\n&gt;&gt;at org.archive.crawler.framework.ToeThread.run(ToeThread.java:153)&lt;BR&gt;\n&gt;&gt;&lt;BR&gt;\n&gt;&gt;Any ideas ?&lt;BR&gt;\n&gt; &lt;BR&gt;\n&gt; We&#39;re speculating there&#39;s a link at this point in the javascript.&nbsp; Looks &lt;BR&gt;\n&gt; like we&#39;re passing a null &#39;base&#39; into UURIFactory (See &lt;BR&gt;\n&gt; &lt;a href=&quot;http://crawler.archive.org/xref/org/archive/net/UURIFactory.html#336).&quot;&gt;http://crawler.archive.org/xref/org/archive/net/UURIFactory.html#336).&lt;/a&gt;&nbsp; &lt;BR&gt;\n&gt; Should add a check in UURIFactory and probably to ExtractorJS since its &lt;BR&gt;\n&gt; in speculative mode (I opened an issue).&nbsp; I suppose you have no idea how &lt;BR&gt;\n&gt; to reproduce since we&#39;re not logging the page we found the NPE on?&lt;BR&gt;\n&gt; &lt;BR&gt;\n&gt; Thanks for reporting Bjarne.&lt;BR&gt;\n&gt; St.Ack&lt;BR&gt;\n&gt; &lt;BR&gt;\n&gt; &lt;BR&gt;\n&gt;&gt;best&lt;BR&gt;\n&gt;&gt;Bjarne Andersen&lt;BR&gt;\n&gt;&gt;&lt;BR&gt;\n&gt;&gt;&lt;BR&gt;\n&gt;&gt;SPONSORED LINKS&lt;BR&gt;\n&gt;&gt;Computer internet security &lt;BR&gt;\n&gt;&gt;&lt;&lt;a href=&quot;http://groups.yahoo.com/gads?t=ms&k=Computer+internet+security&w1=Computer+internet+security&w2=Computer+internet+business&w3=Computer+internet+access&w4=Computer+internet+privacy+securities&w5=Computer+internet+help&c=5&s=164&.sig=i0mxSmuqqFFe3BrjThENoA&quot;&gt;http://groups.yahoo.com/gads?t=ms&amp;k=Computer+internet+security&amp;w1=Computer+internet+security&amp;w2=Computer+internet+business&amp;w3=Computer+internet+access&amp;w4=Computer+internet+privacy+securities&amp;w5=Computer+internet+help&amp;c=5&amp;s=164&amp;.sig=i0mxSmuqqFFe3BrjThENoA&lt;/a&gt;&gt; &lt;BR&gt;\n&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Computer internet business &lt;BR&gt;\n&gt;&gt;&lt;&lt;a href=&quot;http://groups.yahoo.com/gads?t=ms&k=Computer+internet+business&w1=Computer+internet+security&w2=Computer+internet+business&w3=Computer+internet+access&w4=Computer+internet+privacy+securities&w5=Computer+internet+help&c=5&s=164&.sig=kmDyW-ptkQj6I5S4gG69AA&quot;&gt;http://groups.yahoo.com/gads?t=ms&amp;k=Computer+internet+business&amp;w1=Computer+internet+security&amp;w2=Computer+internet+business&amp;w3=Computer+internet+access&amp;w4=Computer+internet+privacy+securities&amp;w5=Computer+internet+help&amp;c=5&amp;s=164&amp;.sig=kmDyW-ptkQj6I5S4gG69AA&lt;/a&gt;&gt; &lt;BR&gt;\n&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Computer internet access &lt;BR&gt;\n&gt;&gt;&lt;&lt;a href=&quot;http://groups.yahoo.com/gads?t=ms&k=Computer+internet+access&w1=Computer+internet+security&w2=Computer+internet+business&w3=Computer+internet+access&w4=Computer+internet+privacy+securities&w5=Computer+internet+help&c=5&s=164&.sig=Ta-eZ3s36l3o1MvufztxDA&quot;&gt;http://groups.yahoo.com/gads?t=ms&amp;k=Computer+internet+access&amp;w1=Computer+internet+security&amp;w2=Computer+internet+business&amp;w3=Computer+internet+access&amp;w4=Computer+internet+privacy+securities&amp;w5=Computer+internet+help&amp;c=5&amp;s=164&amp;.sig=Ta-eZ3s36l3o1MvufztxDA&lt;/a&gt;&gt; &lt;BR&gt;\n&gt;&gt;&lt;BR&gt;\n&gt;&gt;Computer internet privacy securities &lt;BR&gt;\n&gt;&gt;&lt;&lt;a href=&quot;http://groups.yahoo.com/gads?t=ms&k=Computer+internet+privacy+securities&w1=Computer+internet+security&w2=Computer+internet+business&w3=Computer+internet+access&w4=Computer+internet+privacy+securities&w5=Computer+internet+help&c=5&s=164&.sig=uuqya_mMImRC6lLPDsK2yQ&quot;&gt;http://groups.yahoo.com/gads?t=ms&amp;k=Computer+internet+privacy+securities&amp;w1=Computer+internet+security&amp;w2=Computer+internet+business&amp;w3=Computer+internet+access&amp;w4=Computer+internet+privacy+securities&amp;w5=Computer+internet+help&amp;c=5&amp;s=164&amp;.sig=uuqya_mMImRC6lLPDsK2yQ&lt;/a&gt;&gt; &lt;BR&gt;\n&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Computer internet help &lt;BR&gt;\n&gt;&gt;&lt;&lt;a href=&quot;http://groups.yahoo.com/gads?t=ms&k=Computer+internet+help&w1=Computer+internet+security&w2=Computer+internet+business&w3=Computer+internet+access&w4=Computer+internet+privacy+securities&w5=Computer+internet+help&c=5&s=164&.sig=84G6glsO_UlIoE2IlCHAsw&quot;&gt;http://groups.yahoo.com/gads?t=ms&amp;k=Computer+internet+help&amp;w1=Computer+internet+security&amp;w2=Computer+internet+business&amp;w3=Computer+internet+access&amp;w4=Computer+internet+privacy+securities&amp;w5=Computer+internet+help&amp;c=5&amp;s=164&amp;.sig=84G6glsO_UlIoE2IlCHAsw&lt;/a&gt;&gt; &lt;BR&gt;\n&gt;&gt;&lt;BR&gt;\n&gt;&gt;&lt;BR&gt;\n&gt;&gt;&lt;BR&gt;\n&gt;&gt;------------------------------------------------------------------------&lt;BR&gt;\n&gt;&gt;YAHOO! GROUPS LINKS&lt;BR&gt;\n&gt;&gt;&lt;BR&gt;\n&gt;&gt;&nbsp;&nbsp;&nbsp; *&nbsp; Visit your group &quot;archive-crawler&lt;BR&gt;\n&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt;a href=&quot;http://groups.yahoo.com/group/archive-crawler&quot;&gt;http://groups.yahoo.com/group/archive-crawler&lt;/a&gt;&gt;&quot; on the web.&lt;BR&gt;\n&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;BR&gt;\n&gt;&gt;&nbsp;&nbsp;&nbsp; *&nbsp; To unsubscribe from this group, send an email to:&lt;BR&gt;\n&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; archive-crawler-unsubscribe@yahoogroups.com&lt;BR&gt;\n&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;mailto:archive-crawler-unsubscribe@yahoogroups.com?subject=Unsubscribe&gt;&lt;BR&gt;\n&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;BR&gt;\n&gt;&gt;&nbsp;&nbsp;&nbsp; *&nbsp; Your use of Yahoo! Groups is subject to the Yahoo! Terms of&lt;BR&gt;\n&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Service &lt;&lt;a href=&quot;http://docs.yahoo.com/info/terms/&quot;&gt;http://docs.yahoo.com/info/terms/&lt;/a&gt;&gt;.&lt;BR&gt;\n&gt;&gt;&lt;BR&gt;\n&gt;&gt;&lt;BR&gt;\n&gt;&gt;------------------------------------------------------------------------&lt;BR&gt;\n&gt;&gt;&lt;BR&gt;\n&gt; &lt;BR&gt;\n&gt; &lt;BR&gt;\n&gt; &lt;BR&gt;\n&gt; &lt;BR&gt;\n&gt; &lt;BR&gt;\n&gt;&nbsp; &lt;BR&gt;\n&gt; Yahoo! Groups Links&lt;BR&gt;\n&gt; &lt;BR&gt;\n&gt; &lt;BR&gt;\n&gt; &lt;BR&gt;\n&gt;&nbsp; &lt;BR&gt;\n&gt; &lt;BR&gt;\n&gt; &lt;BR&gt;\n&lt;BR&gt;\n&lt;/tt&gt;\n\n\n    \n\n\n\n\n\n\n\n&lt;/body&gt;&lt;/html&gt;\n\n\n\r\n--Boundary_(ID_EzTetrnedMurtcOyzR4sgw)\r\nContent-type: text/x-vcard; name=bja.vcf; charset=windows-1252\r\nContent-disposition: attachment; filename=bja.vcf\r\nContent-description: Card for Bjarne Andersen &lt;bja@...&gt;\r\n\r\n[ Attachment content not displayed ]\r\n--Boundary_(ID_EzTetrnedMurtcOyzR4sgw)--\r\n\n"}}