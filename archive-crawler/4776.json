{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137477665,"authorName":"Igor Ranitovic","from":"Igor Ranitovic &lt;igor@...&gt;","profile":"iranitovic","replyTo":"LIST","senderId":"2-eXTxIclH0C9gPWePoqVY_qu5COenwlzxWxd5ViOItrcxgWG2aIEVAV8JyF1ZaL5XiDdHk491Igrl0MND4HOdwObr-wUjXG","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] Question about ArchiveReader Iterator","postDate":"1197040997","msgId":4776,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ3NTk2NTY1LjEwMTAzMDRAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PDQ3NTY3NUIzLjgwODAxMDhAZ214LmRlPg==","referencesHeader":"PDQ3NTY3NUIzLjgwODAxMDhAZ214LmRlPg=="},"prevInTopic":4763,"nextInTopic":4777,"prevInTime":4775,"nextInTime":4777,"topicId":4763,"numMessagesInTopic":7,"msgSnippet":"Hi Christoph, Maybe the arc file is corrupted. Does the gzip test pass? (gzip -t CRAWL-20071130161712-00001-graz.arc.gz) Is this always happing after the first","rawEmail":"Return-Path: &lt;igor@...&gt;\r\nX-Sender: igor@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 2503 invoked from network); 7 Dec 2007 15:23:28 -0000\r\nX-Received: from unknown (66.218.67.94)\n  by m42.grp.scd.yahoo.com with QMQP; 7 Dec 2007 15:23:28 -0000\r\nX-Received: from unknown (HELO mail.archive.org) (207.241.233.246)\n  by mta15.grp.scd.yahoo.com with SMTP; 7 Dec 2007 15:23:27 -0000\r\nX-Received: from localhost (localhost [127.0.0.1])\n\tby mail.archive.org (Postfix) with ESMTP id 3199E4797D\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Fri,  7 Dec 2007 07:30:29 -0800 (PST)\r\nX-Received: from mail.archive.org ([127.0.0.1])\n\tby localhost (mail.archive.org [127.0.0.1]) (amavisd-new, port 10024)\n\twith LMTP id h2L-o5lmaOw9 for &lt;archive-crawler@yahoogroups.com&gt;;\n\tFri,  7 Dec 2007 07:30:28 -0800 (PST)\r\nX-Received: from [127.0.0.1] (nor75-24-88-170-99-175.fbx.proxad.net [88.170.99.175])\n\tby mail.archive.org (Postfix) with ESMTP id 6773D45\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Fri,  7 Dec 2007 07:30:28 -0800 (PST)\r\nMessage-ID: &lt;47596565.1010304@...&gt;\r\nDate: Fri, 07 Dec 2007 07:23:17 -0800\r\nUser-Agent: Thunderbird 2.0.0.9 (Windows/20071031)\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;475675B3.8080108@...&gt;\r\nIn-Reply-To: &lt;475675B3.8080108@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-15; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Igor Ranitovic &lt;igor@...&gt;\r\nSubject: Re: [archive-crawler] Question about ArchiveReader Iterator\r\nX-Yahoo-Group-Post: member; u=137477665; y=qWVQ7oy1zoUEPbEvOqG71uLf3OXUztE68uKr-ISRPljFfl9LIA\r\nX-Yahoo-Profile: iranitovic\r\n\r\nHi Christoph,\n\nMaybe the arc file is corrupted. Does the gzip test pass?\n(gzip -t CRAWL-20071130161712-00001-graz.arc.gz)\n\nIs this always happing after the first next() call?\n\ni.\n\n\n\n&gt; Hi,\n&gt; \n&gt; I&#39;m new to Heritrix and currently using version 1.12.1. I successfully crawled\n&gt; my first few webpages and want to use the ArchiveReader to further process the\n&gt; results in my Java program.\n&gt; \n&gt; I stumbled across some irritating behaviour of the ArchiveReader.iterator, that\n&gt; I would like to ask about. First, I thought that calling the hasNext() method on\n&gt; the ArchiveRecordIterator without advancing the iterator by calling the next()\n&gt; method should alway work. This seems to be true for a freshly created\n&gt; Reader/Iterator, but after getting the first record, calling hasNext() more than\n&gt; once gives the following Runtime exception:\n&gt; \n&gt; java.lang.RuntimeException: Failed i/o: Negative seek offset\n&gt; \tat\n&gt; org.archive.io.GzippedInputStream.moveToNextGzipMember(GzippedInputStream.java:301)\n&gt; \tat org.archive.io.GzippedInputStream$1.hasNext(GzippedInputStream.java:228)\n&gt; \tat\n&gt; org.archive.io.arc.ARCReaderFactory$CompressedARCReader$1.innerHasNext(ARCReaderFactory.java:399)\n&gt; \tat\n&gt; org.archive.io.ArchiveReader$ArchiveRecordIterator.hasNext(ArchiveReader.java:485)\n&gt; \n&gt; \n&gt; Here&#39;s the unit test, using a zipped Arc-File:\n&gt; \n&gt; public void testArchReaderIteratorHasNext() throws Exception {\n&gt; \t\tString inputFile =\n&gt; &quot;src/test/resources/arcFiles/CRAWL-20071130161712-00001-graz.arc.gz&quot;;\n&gt; \t\tArchiveReader reader = ArchiveReaderFactory.get(new File(inputFile));\n&gt; \t\tIterator&lt;ArchiveRecord&gt; arcRecordIterator = reader.iterator();\n&gt; \t\tif (arcRecordIterator.hasNext()) {\n&gt; \t\t\t// this seems to work\n&gt; \t\t\tfor (int i=0; i&lt;100; i++) {\n&gt; \t\t\t\tarcRecordIterator.hasNext();\n&gt; \t\t\t}\n&gt; \t\t\t// here I still get the first record\n&gt; \t\t\tArchiveRecord r = arcRecordIterator.next();\n&gt; \t\t\tassertNotNull(r);\n&gt; \t\t\tr.dump();\n&gt; \t\t}\n&gt; \t\tarcRecordIterator.hasNext();\n&gt; \t\tfor (int i=0; i&lt;100; i++) {\n&gt; \t\t\tarcRecordIterator.hasNext();\n&gt; \t\t}\n&gt; \t}\n&gt; \n&gt; \n&gt; At the moment it seems to me, that the only safe way using the iterator is to\n&gt; ensure that a hasNext() is always followed by exactly one next() call that reads\n&gt; the following record.\n&gt; Is this true or am I missing something? I&#39;m just asking because for me this\n&gt; wasn&#39;t the intuitive behaviour of an iterator and I couldn&#39;t find anything about\n&gt; this in the Docs or the Wiki so far.\n&gt; \n&gt; Thanks for any hints,\n&gt; \n&gt; Christoph\n&gt; \n&gt; \n&gt; \n&gt;  \n&gt; Yahoo! Groups Links\n&gt; \n&gt; \n&gt; \n\n\n"}}