{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":468881551,"authorName":"Mohamed Elsayed","from":"Mohamed Elsayed &lt;mohammed.elsayyed@...&gt;","profile":"mody1first","replyTo":"LIST","senderId":"fIVg8zYJLm3PAjvTEJveHAWan2svAuFzSJozx_jSoEg8g9xcwrEd7n2hVo-syOUmJKUHIiyo4Frl0msBcTj2CnxzlJomf-tz_jS2Pqzo5hOiX7Qlzus","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] Re: NotExceedsDocumentLengthTresholdDecideRule","postDate":"1291635312","msgId":6858,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDRDRkNDQTcwLjgwNTAxMDRAYmliYWxleC5vcmc+","inReplyToHeader":"PGlkaWQxaStqMms3QGVHcm91cHMuY29tPg==","referencesHeader":"PGlkaWQxaStqMms3QGVHcm91cHMuY29tPg=="},"prevInTopic":6857,"nextInTopic":6862,"prevInTime":6857,"nextInTime":6859,"topicId":6841,"numMessagesInTopic":9,"msgSnippet":"I tried shouldProcessRule instead of shouldProcessDecideRule and it worked with me. After applying shouldProcessRule to ARCWriterProcessor and after","rawEmail":"Return-Path: &lt;Mohammed.Elsayyed@...&gt;\r\nX-Sender: Mohammed.Elsayyed@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 50658 invoked from network); 6 Dec 2010 11:34:03 -0000\r\nX-Received: from unknown (66.196.94.107)\n  by m11.grp.re1.yahoo.com with QMQP; 6 Dec 2010 11:34:03 -0000\r\nX-Received: from unknown (HELO mail.bibalex.org) (196.204.161.5)\n  by mta3.grp.re1.yahoo.com with SMTP; 6 Dec 2010 11:34:02 -0000\r\nX-Received: from [10.8.33.68] (10.8.33.68) by mail.bibalex.org (10.202.2.22)\n with Microsoft SMTP Server (TLS) id 8.3.106.1; Mon, 6 Dec 2010 13:30:34 +0200\r\nMessage-ID: &lt;4CFCCA70.8050104@...&gt;\r\nDate: Mon, 6 Dec 2010 13:35:12 +0200\r\nUser-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.15) Gecko/20101027 Thunderbird/3.0.10\r\nMIME-Version: 1.0\r\nTo: &quot;archive-crawler@yahoogroups.com&quot; &lt;archive-crawler@yahoogroups.com&gt;\r\nReferences: &lt;idid1i+j2k7@...&gt;\r\nIn-Reply-To: &lt;idid1i+j2k7@...&gt;\r\nContent-Type: multipart/alternative;\n\tboundary=&quot;------------010704070909060604040900&quot;\r\nReturn-Path: mohammed.elsayyed@...\r\nFrom: Mohamed Elsayed &lt;mohammed.elsayyed@...&gt;\r\nSubject: Re: [archive-crawler] Re: NotExceedsDocumentLengthTresholdDecideRule\r\nX-Yahoo-Group-Post: member; u=468881551; y=j_6MxBUjrSLxxU7qWsGPLqMFonjqES2Hh30XMU96HxvaUXTv0Q\r\nX-Yahoo-Profile: mody1first\r\n\r\n\r\n--------------010704070909060604040900\r\nContent-Type: text/plain; charset=&quot;windows-1252&quot;; format=flowed\r\nContent-Transfer-Encoding: 8bit\r\n\r\nI tried &quot;shouldProcessRule&quot; instead of &quot;shouldProcessDecideRule&quot; and it \nworked with me. After applying &quot;shouldProcessRule&quot; to \n&quot;ARCWriterProcessor&quot; and after applying &quot;shouldFetchBodyRule&quot; to \n&quot;FetchHTTP&quot; processor, Heritrix-3-1-1.SNAPSHOT still downloads the large \nfiles. What can I do now? The following is the modified code snippet:\n\n_*FetchHTTP*_\n\n&lt;bean id=&quot;fetchHttp&quot; class=&quot;org.archive.modules.fetcher.FetchHTTP&quot;&gt;\n\n    &lt;property name=&quot;shouldFetchBodyRule&quot;&gt;\n\n        &lt;!--&lt;bean class=&quot;org.archive.modules.deciderules.AcceptDecideRule&quot;/&gt;--&gt;\n\n        &lt;!-- ...then REJECT any URI whose content-length exceeds the configured threshold... --&gt;\n\n        &lt;bean class=&quot;org.archive.modules.deciderules.NotExceedsDocumentLengthTresholdDecideRule&quot;&gt;\n\n          &lt;property name=&quot;decision&quot; value=&quot;REJECT&quot;/&gt;\n\n          &lt;property name=&quot;contentLengthThreshold&quot; value=&quot;10&quot;/&gt;\n\n        &lt;/bean&gt;\n\n      &lt;/property&gt;\n\n  &lt;/bean&gt;\n\n_*ARCWriterProcessor*_\n\n&lt;bean id=&quot;warcWriter&quot; class=&quot;org.archive.modules.writer.ARCWriterProcessor&quot;&gt;\n\n   &lt;property name=&quot;shouldProcessRule&quot;&gt;\n\n     &lt;bean class=&quot;org.archive.modules.deciderules.NotExceedsDocumentLengthTresholdDecideRule&quot;&gt;\n\n       &lt;property name=&quot;decision&quot; value=&quot;REJECT&quot;/&gt;\n\n       &lt;property name=&quot;contentLengthThreshold&quot; value=&quot;10&quot;/&gt;\n\n     &lt;/bean&gt;\n\n   &lt;/property&gt;\n\n&lt;/bean&gt;\n\n\nMohamed Elsayed\nBibliotheca Alexandrina\n\n\nOn 12/06/2010 12:14 PM, kristsi25 wrote:\n&gt;\n&gt;\n&gt;\n&gt; The &quot;shouldProcessDecideRule&quot; accepts a single decide rule, not a list.\n&gt;\n&gt; Your code should be:\n&gt;\n&gt; &lt;property name=&quot;shouldProcessDecideRule&quot;&gt;\n&gt; &lt;bean \n&gt; class=&quot;org.archive.modules.deciderules.NotExceedsDocumentLengthTresholdDecideRule&quot;&gt;\n&gt; &lt;property name=&quot;decision&quot; value=&quot;REJECT&quot;/&gt;\n&gt; &lt;property name=&quot;contentLengthThreshold&quot; value=&quot;10&quot;/&gt;\n&gt; &lt;/bean&gt;\n&gt; &lt;/property&gt;\n&gt;\n&gt; If you need to apply multiple decide rules here, you need to use \n&gt; DecideRuleSequence.\n&gt;\n&gt; - Kris\n&gt;\n&gt; --- In archive-crawler@yahoogroups.com \n&gt; &lt;mailto:archive-crawler%40yahoogroups.com&gt;, Mohamed Elsayed \n&gt; &lt;mohammed.elsayyed@...&gt; wrote:\n&gt; &gt;\n&gt; &gt; Thanks so much for your reply. I used the property &quot;maxLengthBytes&quot;\n&gt; &gt; before, as it downloaded the file till reached to the specified limit.\n&gt; &gt; The file was actually downloaded, but with a specific length. I don&#39;t\n&gt; &gt; like this solution, because I would like to reject the large file, so\n&gt; &gt; your first solution is suitable to me. I applied\n&gt; &gt; &quot;setShouldFetchBodyRule&quot; to the FetchHTTP processor and applied\n&gt; &gt; &quot;shouldProcessDecideRule&quot; to ARCWriterProcessor. \n&gt; Heritrix-3.1.1-SNAPSHOT\n&gt; &gt; displayed an error message &quot;/2010-12-05T11:56:26.756Z SEVERE Invalid\n&gt; &gt; property &#39;shouldProcessDecideRule&#39; of bean class\n&gt; &gt; [org.archive.modules.writer.ARCWriterProcessor]: Bean property\n&gt; &gt; &#39;shouldProcessDecideRule&#39; is not writable or has an invalid setter\n&gt; &gt; method. Does the parameter type of the setter match the return type of\n&gt; &gt; the getter?; Can&#39;t create bean &#39;warcWriter&#39;; Can&#39;t create bean\n&gt; &gt; &#39;dispositionProcessors&#39;; ; Can&#39;t create bean &#39;crawlController&#39;; Can&#39;t\n&gt; &gt; create bean &#39;statisticsTracker&#39;; ; Can&#39;t create bean &#39;seeds&#39;; ; Can&#39;t\n&gt; &gt; create bean\n&gt; &gt; \n&gt; &#39;org.archive.modules.deciderules.surt.NotSurtPrefixedDecideRule#7a0136b0&#39;; \n&gt;\n&gt; &gt; Can&#39;t create bean &#39;scope&#39;; ; Can&#39;t create bean &#39;frontier/&#39;.&quot; The\n&gt; &gt; following is a code snippet of FetchHTTP processor and \n&gt; ARCWriterProcessor._*\n&gt; &gt;\n&gt; &gt; FetchHTTP processor*_\n&gt; &gt;\n&gt; &gt; &lt;bean id=&quot;fetchHttp&quot; class=&quot;org.archive.modules.fetcher.FetchHTTP&quot;&gt;\n&gt; &gt;\n&gt; &gt; &lt;!--&lt;property name=&quot;maxLengthBytes&quot; value=&quot;500000&quot; /&gt;--&gt;\n&gt; &gt;\n&gt; &gt; &lt;!--&lt;property name=&quot;timeoutSeconds&quot; value=&quot;1200&quot; /&gt; --&gt;\n&gt; &gt;\n&gt; &gt; &lt;!--&lt;property name=&quot;maxFetchKBSec&quot; value=&quot;0&quot; /&gt; --&gt;\n&gt; &gt;\n&gt; &gt; &lt;!--&lt;property name=&quot;defaultEncoding&quot; value=&quot;ISO-8859-1&quot; /&gt; --&gt;\n&gt; &gt;\n&gt; &gt; / &lt;property name=&quot;shouldFetchBodyRule&quot;&gt;/\n&gt; &gt;\n&gt; &gt; / &lt;bean class=&quot;org.archive.modules.deciderules.AcceptDecideRule&quot;/&gt;/\n&gt; &gt;\n&gt; &gt; / &lt;/property&gt;/\n&gt; &gt;\n&gt; &gt; &lt;!--&lt;property name=&quot;soTimeoutMs&quot; value=&quot;20000&quot; /&gt; --&gt;\n&gt; &gt;\n&gt; &gt; &lt;!--&lt;property name=&quot;sendIfModifiedSince&quot; value=&quot;true&quot; /&gt; --&gt;\n&gt; &gt;\n&gt; &gt; &lt;!--&lt;property name=&quot;sendIfNoneMatch&quot; value=&quot;true&quot; /&gt; --&gt;\n&gt; &gt;\n&gt; &gt; &lt;!--&lt;property name=&quot;sendConnectionClose&quot; value=&quot;true&quot; /&gt; --&gt;\n&gt; &gt;\n&gt; &gt; &lt;!--&lt;property name=&quot;sendReferer&quot; value=&quot;true&quot; /&gt; --&gt;\n&gt; &gt;\n&gt; &gt; &lt;!--&lt;property name=&quot;sendRange&quot; value=&quot;false&quot; /&gt; --&gt;\n&gt; &gt;\n&gt; &gt; &lt;!--&lt;property name=&quot;ignoreCookies&quot; value=&quot;false&quot; /&gt; --&gt;\n&gt; &gt;\n&gt; &gt; &lt;!--&lt;property name=&quot;sslTrustLevel&quot; value=&quot;OPEN&quot; /&gt; --&gt;\n&gt; &gt;\n&gt; &gt; &lt;!--&lt;property name=&quot;acceptHeaders&quot;&gt;\n&gt; &gt;\n&gt; &gt; &lt;list&gt;\n&gt; &gt;\n&gt; &gt; &lt;/list&gt;\n&gt; &gt;\n&gt; &gt; &lt;/property&gt;\n&gt; &gt;\n&gt; &gt; --&gt;\n&gt; &gt;\n&gt; &gt; &lt;!--&lt;property name=&quot;httpBindAddress&quot; value=&quot;&quot; /&gt; --&gt;\n&gt; &gt;\n&gt; &gt; &lt;!--&lt;property name=&quot;httpProxyHost&quot; value=&quot;&quot; /&gt; --&gt;\n&gt; &gt;\n&gt; &gt; &lt;!--&lt;property name=&quot;httpProxyPort&quot; value=&quot;0&quot; /&gt; --&gt;\n&gt; &gt;\n&gt; &gt; &lt;!--&lt;property name=&quot;digestContent&quot; value=&quot;true&quot; /&gt; --&gt;\n&gt; &gt;\n&gt; &gt; &lt;!--&lt;property name=&quot;digestAlgorithm&quot; value=&quot;sha1&quot; /&gt; --&gt;\n&gt; &gt;\n&gt; &gt; &lt;/bean&gt;\n&gt; &gt;\n&gt; &gt; _*\n&gt; &gt; ARCWriterProcessor*_\n&gt; &gt;\n&gt; &gt; &lt;bean id=&quot;warcWriter&quot; \n&gt; class=&quot;org.archive.modules.writer.ARCWriterProcessor&quot;&gt;\n&gt; &gt;\n&gt; &gt; &lt;!--&lt;property name=&quot;compress&quot; value=&quot;true&quot; /&gt; --&gt;\n&gt; &gt;\n&gt; &gt; &lt;property name=&quot;prefix&quot; value=&quot;TEST&quot; /&gt;\n&gt; &gt;\n&gt; &gt; &lt;!--&lt;property name=&quot;suffix&quot; value=&quot;&quot; /&gt; --&gt;\n&gt; &gt;\n&gt; &gt; &lt;!--&lt;property name=&quot;maxFileSizeBytes&quot; value=&quot;100000000&quot; /&gt;--&gt;\n&gt; &gt;\n&gt; &gt; &lt;property name=&quot;poolMaxActive&quot; value=&quot;5&quot; /&gt;\n&gt; &gt;\n&gt; &gt; &lt;!--&lt;property name=&quot;poolMaxWaitMs&quot; value=&quot;300000&quot; /&gt; --&gt;\n&gt; &gt;\n&gt; &gt; &lt;!--&lt;property name=&quot;skipIdenticalDigests&quot; value=&quot;false&quot; /&gt; --&gt;\n&gt; &gt;\n&gt; &gt; &lt;!--&lt;property name=&quot;maxTotalBytesToWrite&quot; value=&quot;0&quot; /&gt; --&gt;\n&gt; &gt;\n&gt; &gt; &lt;!--&lt;property name=&quot;directory&quot; value=&quot;.&quot; /&gt; --&gt;\n&gt; &gt;\n&gt; &gt; &lt;property name=&quot;storePaths&quot;&gt;\n&gt; &gt;\n&gt; &gt; &lt;list&gt;\n&gt; &gt;\n&gt; &gt; &lt;value&gt;/0/webcrawl&lt;/value&gt;\n&gt; &gt;\n&gt; &gt; &lt;/list&gt;\n&gt; &gt;\n&gt; &gt; &lt;/property&gt;\n&gt; &gt;\n&gt; &gt; &lt;!--&lt;property name=&quot;writeRequests&quot; value=&quot;true&quot; /&gt; --&gt;\n&gt; &gt;\n&gt; &gt; &lt;!--&lt;property name=&quot;writeMetadata&quot; value=&quot;true&quot; /&gt; --&gt;\n&gt; &gt;\n&gt; &gt; &lt;!--&lt;property name=&quot;writeRevisitForIdenticalDigests&quot; value=&quot;true&quot; /&gt; --&gt;\n&gt; &gt;\n&gt; &gt; &lt;!--&lt;property name=&quot;writeRevisitForNotModified&quot; value=&quot;true&quot; /&gt; --&gt;\n&gt; &gt;\n&gt; &gt; /&lt;property name=&quot;shouldProcessDecideRule&quot;&gt;/\n&gt; &gt;\n&gt; &gt; / &lt;list&gt;/\n&gt; &gt;\n&gt; &gt; / &lt;bean \n&gt; class=&quot;org.archive.modules.deciderules.NotExceedsDocumentLengthTresholdDecideRule&quot;&gt;/\n&gt; &gt;\n&gt; &gt; / &lt;property name=&quot;decision&quot; value=&quot;REJECT&quot;/&gt;/\n&gt; &gt;\n&gt; &gt; / &lt;property name=&quot;contentLengthThreshold&quot; value=&quot;10&quot;/&gt;/\n&gt; &gt;\n&gt; &gt; / &lt;/bean&gt;/\n&gt; &gt;\n&gt; &gt; / &lt;/list&gt;/\n&gt; &gt;\n&gt; &gt; / &lt;/property&gt;/\n&gt; &gt;\n&gt; &gt; &lt;/bean&gt;\n&gt; &gt;\n&gt; &gt; Any suggestions will be much appreciated. Thanks a lot.\n&gt; &gt;\n&gt; &gt; Mohamed Elsayed\n&gt; &gt; Bibliotheca Alexandrina\n&gt; &gt;\n&gt; &gt; On 12/02/2010 06:55 PM, kristsi25 wrote:\n&gt; &gt; &gt;\n&gt; &gt; &gt; If the content-length is incorrect, the best you can do is set the\n&gt; &gt; &gt; &quot;maxLengthBytes&quot; setting on the FetchHTTP processor. Once this limit\n&gt; &gt; &gt; is hit, the processor will stop downloading a file and a truncated\n&gt; &gt; &gt; file will be written to your archive (unless you have filters on the\n&gt; &gt; &gt; W(ARC)WriterProcessor to prevent this).\n&gt; &gt; &gt;\n&gt; &gt; &gt; - Kris\n&gt; &gt; &gt;\n&gt; &gt; &gt; --- In archive-crawler@yahoogroups.com \n&gt; &lt;mailto:archive-crawler%40yahoogroups.com&gt;\n&gt; &gt; &gt; &lt;mailto:archive-crawler%40yahoogroups.com&gt;, Mohamed Elsayed\n&gt; &gt; &gt; &lt;mohammed.elsayyed@&gt; wrote:\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; Thanks very much for your care and for your useful reply. \n&gt; Enabling the\n&gt; &gt; &gt; &gt; property &quot;setShouldFetchBodyRule&quot; which is under &quot;FetchHTTP&quot; \n&gt; processor\n&gt; &gt; &gt; &gt; will prevent downloading a large file in case of its size is \n&gt; written in\n&gt; &gt; &gt; &gt; HTTP header. If the file size is not included in HTTP header, \n&gt; then what\n&gt; &gt; &gt; &gt; is the suitable solution to prevent downloading large files? Thanks\n&gt; &gt; &gt; again.\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; Mohamed Elsayed\n&gt; &gt; &gt; &gt; Bibliotheca Alexandrina\n&gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; On 12/01/2010 03:03 PM, kristsi25 wrote:\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; The NotExceedsDocumentLengthTresholdDecideRule can not be used \n&gt; in the\n&gt; &gt; &gt; &gt; &gt; scope rules as you have configured. Scope rules are applied \n&gt; prior to\n&gt; &gt; &gt; &gt; &gt; any network activity and the size of the document is unknown \n&gt; at that\n&gt; &gt; &gt; &gt; &gt; time. Only rules relating to the actual URL itself can be \n&gt; applied in\n&gt; &gt; &gt; &gt; &gt; scope rules.\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; The NotExceedsDocumentLengthTresholdDecideRule should be used to\n&gt; &gt; &gt; &gt; &gt; influence the behavior of processors. For each processor it is\n&gt; &gt; &gt; &gt; &gt; possible to set a shouldProcessDecideRule attribute. If you merely\n&gt; &gt; &gt; &gt; &gt; wish to avoid storing such long files, you could apply the \n&gt; filter to\n&gt; &gt; &gt; &gt; &gt; the (W)ARCWriterProcessor.\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; If you wish to avoid downloading large files, you will need to \n&gt; apply\n&gt; &gt; &gt; &gt; &gt; the setShouldFetchBodyRule to the FetchHTTP processor and make \n&gt; sure\n&gt; &gt; &gt; &gt; &gt; your NotExceedsDocumentLengthTresholdDecideRule is set to use \n&gt; header\n&gt; &gt; &gt; &gt; &gt; length. This will cause the FetchHTTP processor to run the decide\n&gt; &gt; &gt; rule\n&gt; &gt; &gt; &gt; &gt; after fetching the HTTP header (which hopefully contains an \n&gt; accurate\n&gt; &gt; &gt; &gt; &gt; content-length value) and will not download the actual file if \n&gt; it is\n&gt; &gt; &gt; &gt; &gt; too large.\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt; &gt; &gt; - Kris\n&gt; &gt; &gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt; &gt;\n&gt; &gt;\n&gt;\n&gt; \n\r\n--------------010704070909060604040900\r\nContent-Type: text/html; charset=&quot;windows-1252&quot;\r\nContent-Transfer-Encoding: 8bit\r\n\r\n&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;meta content=&quot;text/html; charset=windows-1252&quot;\n http-equiv=&quot;Content-Type&quot;&gt;\n&lt;/head&gt;\n&lt;body text=&quot;#000000&quot; bgcolor=&quot;#ffffff&quot;&gt;\nI tried &quot;shouldProcessRule&quot; instead of &quot;shouldProcessDecideRule&quot; and it\nworked with me. After applying &quot;shouldProcessRule&quot; to\n&quot;ARCWriterProcessor&quot; and after applying &quot;shouldFetchBodyRule&quot; to\n&quot;FetchHTTP&quot; processor, Heritrix-3-1-1.SNAPSHOT still downloads the\nlarge files. What can I do now? The following is the modified code\nsnippet:&lt;br&gt;\n&lt;br&gt;\n&lt;u&gt;&lt;b&gt;FetchHTTP&lt;/b&gt;&lt;/u&gt;&lt;br&gt;\n&lt;pre&gt;&lt;bean id=&quot;fetchHttp&quot; class=&quot;org.archive.modules.fetcher.FetchHTTP&quot;&gt;&lt;/pre&gt;\n&lt;pre&gt;�� &lt;property name=&quot;shouldFetchBodyRule&quot;&gt;&lt;/pre&gt;\n&lt;pre&gt;������ &lt;!--&lt;bean class=&quot;org.archive.modules.deciderules.AcceptDecideRule&quot;/&gt;--&gt;&lt;/pre&gt;\n&lt;pre&gt;������ &lt;!-- ...then REJECT any URI whose content-length exceeds the configured threshold... --&gt;&lt;/pre&gt;\n&lt;pre&gt;������ &lt;bean class=&quot;org.archive.modules.deciderules.NotExceedsDocumentLengthTresholdDecideRule&quot;&gt;&lt;/pre&gt;\n&lt;pre&gt;�������� &lt;property name=&quot;decision&quot; value=&quot;REJECT&quot;/&gt;&lt;/pre&gt;\n&lt;pre&gt;�������� &lt;property name=&quot;contentLengthThreshold&quot; value=&quot;10&quot;/&gt;&lt;/pre&gt;\n&lt;pre&gt;������ &lt;/bean&gt;&lt;/pre&gt;\n&lt;pre&gt;���  &lt;/property&gt;&lt;/pre&gt;\n&lt;pre&gt;�&lt;/bean&gt;\n\n&lt;/pre&gt;\n&lt;u&gt;&lt;b&gt;ARCWriterProcessor&lt;/b&gt;&lt;/u&gt;&lt;br&gt;\n&lt;pre&gt;&lt;bean id=&quot;warcWriter&quot; class=&quot;org.archive.modules.writer.ARCWriterProcessor&quot;&gt;&lt;/pre&gt;\n&lt;pre&gt;� &lt;property name=&quot;shouldProcessRule&quot;&gt;&lt;/pre&gt;\n&lt;pre&gt;��� &lt;bean class=&quot;org.archive.modules.deciderules.NotExceedsDocumentLengthTresholdDecideRule&quot;&gt;&lt;/pre&gt;\n&lt;pre&gt;����� &lt;property name=&quot;decision&quot; value=&quot;REJECT&quot;/&gt;&lt;/pre&gt;\n&lt;pre&gt;����� &lt;property name=&quot;contentLengthThreshold&quot; value=&quot;10&quot;/&gt;&lt;/pre&gt;\n&lt;pre&gt;��� &lt;/bean&gt;&lt;/pre&gt;\n&lt;pre&gt;� &lt;/property&gt;\n\n&lt;/bean&gt;&lt;/pre&gt;\n&lt;br&gt;\nMohamed Elsayed&lt;br&gt;\nBibliotheca Alexandrina&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\nOn 12/06/2010 12:14 PM, kristsi25 wrote:\n&lt;blockquote cite=&quot;mid:idid1i+j2k7@...&quot; type=&quot;cite&quot;&gt;\n  &lt;meta http-equiv=&quot;Content-Type&quot;\n content=&quot;text/html; charset=windows-1252&quot;&gt;\n  &lt;span style=&quot;display: none;&quot;&gt;�&lt;/span&gt;\n\n  &lt;div id=&quot;ygrp-text&quot;&gt;\n  &lt;p&gt;&lt;br&gt;\n  &lt;br&gt;\nThe &quot;shouldProcessDecideRule&quot; accepts a single decide rule, not a list.&lt;br&gt;\n  &lt;br&gt;\nYour code should be:&lt;br&gt;\n  &lt;br&gt;\n&lt;property name=&quot;shouldProcessDecideRule&quot;&gt;&lt;br&gt;\n&lt;bean\nclass=&quot;org.archive.modules.deciderules.NotExceedsDocumentLengthTresholdDecideRule&quot;&gt;&lt;br&gt;\n&lt;property name=&quot;decision&quot; value=&quot;REJECT&quot;/&gt;&lt;br&gt;\n&lt;property name=&quot;contentLengthThreshold&quot; value=&quot;10&quot;/&gt;&lt;br&gt;\n&lt;/bean&gt;&lt;br&gt;\n&lt;/property&gt;&lt;br&gt;\n  &lt;br&gt;\nIf you need to apply multiple decide rules here, you need to use\nDecideRuleSequence.&lt;br&gt;\n  &lt;br&gt;\n- Kris&lt;br&gt;\n  &lt;br&gt;\n--- In &lt;a moz-do-not-send=&quot;true&quot;\n href=&quot;mailto:archive-crawler%40yahoogroups.com&quot;&gt;archive-crawler@yahoogroups.com&lt;/a&gt;,\nMohamed Elsayed &lt;a class=&quot;moz-txt-link-rfc2396E&quot; href=&quot;mailto:mohammed.elsayyed@...&quot;&gt;&lt;mohammed.elsayyed@...&gt;&lt;/a&gt; wrote:&lt;br&gt;\n&gt;&lt;br&gt;\n&gt; Thanks so much for your reply. I used the property\n&quot;maxLengthBytes&quot; &lt;br&gt;\n&gt; before, as it downloaded the file till reached to the specified\nlimit. &lt;br&gt;\n&gt; The file was actually downloaded, but with a specific length. I\ndon&#39;t &lt;br&gt;\n&gt; like this solution, because I would like to reject the large file,\nso &lt;br&gt;\n&gt; your first solution is suitable to me. I applied &lt;br&gt;\n&gt; &quot;setShouldFetchBodyRule&quot; to the FetchHTTP processor and applied &lt;br&gt;\n&gt; &quot;shouldProcessDecideRule&quot; to ARCWriterProcessor.\nHeritrix-3.1.1-SNAPSHOT &lt;br&gt;\n&gt; displayed an error message &quot;/2010-12-05T11:56:26.756Z SEVERE\nInvalid &lt;br&gt;\n&gt; property &#39;shouldProcessDecideRule&#39; of bean class &lt;br&gt;\n&gt; [org.archive.modules.writer.ARCWriterProcessor]: Bean property &lt;br&gt;\n&gt; &#39;shouldProcessDecideRule&#39; is not writable or has an invalid setter\n  &lt;br&gt;\n&gt; method. Does the parameter type of the setter match the return\ntype of &lt;br&gt;\n&gt; the getter?; Can&#39;t create bean &#39;warcWriter&#39;; Can&#39;t create bean &lt;br&gt;\n&gt; &#39;dispositionProcessors&#39;; ; Can&#39;t create bean &#39;crawlController&#39;;\nCan&#39;t &lt;br&gt;\n&gt; create bean &#39;statisticsTracker&#39;; ; Can&#39;t create bean &#39;seeds&#39;; ;\nCan&#39;t &lt;br&gt;\n&gt; create bean &lt;br&gt;\n&gt;\n&#39;org.archive.modules.deciderules.surt.NotSurtPrefixedDecideRule#7a0136b0&#39;;\n  &lt;br&gt;\n&gt; Can&#39;t create bean &#39;scope&#39;; ; Can&#39;t create bean &#39;frontier/&#39;.&quot; The &lt;br&gt;\n&gt; following is a code snippet of FetchHTTP processor and\nARCWriterProcessor._*&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; FetchHTTP processor*_&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;bean id=&quot;fetchHttp&quot;\nclass=&quot;org.archive.modules.fetcher.FetchHTTP&quot;&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;!--&lt;property name=&quot;maxLengthBytes&quot; value=&quot;500000&quot;\n/&gt;--&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;!--&lt;property name=&quot;timeoutSeconds&quot; value=&quot;1200&quot; /&gt; --&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;!--&lt;property name=&quot;maxFetchKBSec&quot; value=&quot;0&quot; /&gt; --&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;!--&lt;property name=&quot;defaultEncoding&quot; value=&quot;ISO-8859-1&quot;\n/&gt; --&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; / &lt;property name=&quot;shouldFetchBodyRule&quot;&gt;/&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; / &lt;bean\nclass=&quot;org.archive.modules.deciderules.AcceptDecideRule&quot;/&gt;/&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; / &lt;/property&gt;/&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;!--&lt;property name=&quot;soTimeoutMs&quot; value=&quot;20000&quot; /&gt; --&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;!--&lt;property name=&quot;sendIfModifiedSince&quot; value=&quot;true&quot; /&gt;\n--&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;!--&lt;property name=&quot;sendIfNoneMatch&quot; value=&quot;true&quot; /&gt;\n--&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;!--&lt;property name=&quot;sendConnectionClose&quot; value=&quot;true&quot; /&gt;\n--&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;!--&lt;property name=&quot;sendReferer&quot; value=&quot;true&quot; /&gt; --&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;!--&lt;property name=&quot;sendRange&quot; value=&quot;false&quot; /&gt; --&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;!--&lt;property name=&quot;ignoreCookies&quot; value=&quot;false&quot; /&gt; --&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;!--&lt;property name=&quot;sslTrustLevel&quot; value=&quot;OPEN&quot; /&gt; --&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;!--&lt;property name=&quot;acceptHeaders&quot;&gt; &lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;list&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;/list&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;/property&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; --&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;!--&lt;property name=&quot;httpBindAddress&quot; value=&quot;&quot; /&gt; --&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;!--&lt;property name=&quot;httpProxyHost&quot; value=&quot;&quot; /&gt; --&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;!--&lt;property name=&quot;httpProxyPort&quot; value=&quot;0&quot; /&gt; --&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;!--&lt;property name=&quot;digestContent&quot; value=&quot;true&quot; /&gt; --&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;!--&lt;property name=&quot;digestAlgorithm&quot; value=&quot;sha1&quot; /&gt;\n--&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;/bean&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; _*&lt;br&gt;\n&gt; ARCWriterProcessor*_&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;bean id=&quot;warcWriter&quot;\nclass=&quot;org.archive.modules.writer.ARCWriterProcessor&quot;&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;!--&lt;property name=&quot;compress&quot; value=&quot;true&quot; /&gt; --&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;property name=&quot;prefix&quot; value=&quot;TEST&quot; /&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;!--&lt;property name=&quot;suffix&quot; value=&quot;&quot; /&gt; --&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;!--&lt;property name=&quot;maxFileSizeBytes&quot; value=&quot;100000000&quot;\n/&gt;--&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;property name=&quot;poolMaxActive&quot; value=&quot;5&quot; /&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;!--&lt;property name=&quot;poolMaxWaitMs&quot; value=&quot;300000&quot; /&gt;\n--&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;!--&lt;property name=&quot;skipIdenticalDigests&quot; value=&quot;false&quot;\n/&gt; --&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;!--&lt;property name=&quot;maxTotalBytesToWrite&quot; value=&quot;0&quot; /&gt;\n--&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;!--&lt;property name=&quot;directory&quot; value=&quot;.&quot; /&gt; --&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;property name=&quot;storePaths&quot;&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;list&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;value&gt;/0/webcrawl&lt;/value&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;/list&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;/property&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;!--&lt;property name=&quot;writeRequests&quot; value=&quot;true&quot; /&gt; --&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;!--&lt;property name=&quot;writeMetadata&quot; value=&quot;true&quot; /&gt; --&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;!--&lt;property name=&quot;writeRevisitForIdenticalDigests&quot;\nvalue=&quot;true&quot; /&gt; --&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;!--&lt;property name=&quot;writeRevisitForNotModified&quot; value=&quot;true&quot;\n/&gt; --&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; /&lt;property name=&quot;shouldProcessDecideRule&quot;&gt;/&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; / &lt;list&gt;/&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; / &lt;bean\nclass=&quot;org.archive.modules.deciderules.NotExceedsDocumentLengthTresholdDecideRule&quot;&gt;/&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; / &lt;property name=&quot;decision&quot; value=&quot;REJECT&quot;/&gt;/&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; / &lt;property name=&quot;contentLengthThreshold&quot; value=&quot;10&quot;/&gt;/&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; / &lt;/bean&gt;/&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; / &lt;/list&gt;/&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; / &lt;/property&gt;/&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; &lt;/bean&gt;&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; Any suggestions will be much appreciated. Thanks a lot.&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; Mohamed Elsayed&lt;br&gt;\n&gt; Bibliotheca Alexandrina&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; On 12/02/2010 06:55 PM, kristsi25 wrote:&lt;br&gt;\n&gt; &gt;&lt;br&gt;\n&gt; &gt; If the content-length is incorrect, the best you can do is\nset the &lt;br&gt;\n&gt; &gt; &quot;maxLengthBytes&quot; setting on the FetchHTTP processor. Once\nthis limit &lt;br&gt;\n&gt; &gt; is hit, the processor will stop downloading a file and a\ntruncated &lt;br&gt;\n&gt; &gt; file will be written to your archive (unless you have filters\non the &lt;br&gt;\n&gt; &gt; W(ARC)WriterProcessor to prevent this).&lt;br&gt;\n&gt; &gt;&lt;br&gt;\n&gt; &gt; - Kris&lt;br&gt;\n&gt; &gt;&lt;br&gt;\n&gt; &gt; --- In &lt;a moz-do-not-send=&quot;true&quot;\n href=&quot;mailto:archive-crawler%40yahoogroups.com&quot;&gt;archive-crawler@yahoogroups.com&lt;/a&gt;\n  &lt;br&gt;\n&gt; &gt; &lt;a class=&quot;moz-txt-link-rfc2396E&quot; href=&quot;mailto:archive-crawler%40yahoogroups.com&quot;&gt;&lt;mailto:archive-crawler%40yahoogroups.com&gt;&lt;/a&gt;, Mohamed\nElsayed &lt;br&gt;\n&gt; &gt; &lt;mohammed.elsayyed@&gt; wrote:&lt;br&gt;\n&gt; &gt; &gt;&lt;br&gt;\n&gt; &gt; &gt; Thanks very much for your care and for your useful\nreply. Enabling the&lt;br&gt;\n&gt; &gt; &gt; property &quot;setShouldFetchBodyRule&quot; which is under\n&quot;FetchHTTP&quot; processor&lt;br&gt;\n&gt; &gt; &gt; will prevent downloading a large file in case of its\nsize is written in&lt;br&gt;\n&gt; &gt; &gt; HTTP header. If the file size is not included in HTTP\nheader, then what&lt;br&gt;\n&gt; &gt; &gt; is the suitable solution to prevent downloading large\nfiles? Thanks &lt;br&gt;\n&gt; &gt; again.&lt;br&gt;\n&gt; &gt; &gt;&lt;br&gt;\n&gt; &gt; &gt; Mohamed Elsayed&lt;br&gt;\n&gt; &gt; &gt; Bibliotheca Alexandrina&lt;br&gt;\n&gt; &gt; &gt;&lt;br&gt;\n&gt; &gt; &gt; On 12/01/2010 03:03 PM, kristsi25 wrote:&lt;br&gt;\n&gt; &gt; &gt; &gt;&lt;br&gt;\n&gt; &gt; &gt; &gt;&lt;br&gt;\n&gt; &gt; &gt; &gt;&lt;br&gt;\n&gt; &gt; &gt; &gt; The NotExceedsDocumentLengthTresholdDecideRule can\nnot be used in the&lt;br&gt;\n&gt; &gt; &gt; &gt; scope rules as you have configured. Scope rules are\napplied prior to&lt;br&gt;\n&gt; &gt; &gt; &gt; any network activity and the size of the document\nis unknown at that&lt;br&gt;\n&gt; &gt; &gt; &gt; time. Only rules relating to the actual URL itself\ncan be applied in&lt;br&gt;\n&gt; &gt; &gt; &gt; scope rules.&lt;br&gt;\n&gt; &gt; &gt; &gt;&lt;br&gt;\n&gt; &gt; &gt; &gt; The NotExceedsDocumentLengthTresholdDecideRule\nshould be used to&lt;br&gt;\n&gt; &gt; &gt; &gt; influence the behavior of processors. For each\nprocessor it is&lt;br&gt;\n&gt; &gt; &gt; &gt; possible to set a shouldProcessDecideRule\nattribute. If you merely&lt;br&gt;\n&gt; &gt; &gt; &gt; wish to avoid storing such long files, you could\napply the filter to&lt;br&gt;\n&gt; &gt; &gt; &gt; the (W)ARCWriterProcessor.&lt;br&gt;\n&gt; &gt; &gt; &gt;&lt;br&gt;\n&gt; &gt; &gt; &gt; If you wish to avoid downloading large files, you\nwill need to apply&lt;br&gt;\n&gt; &gt; &gt; &gt; the setShouldFetchBodyRule to the FetchHTTP\nprocessor and make sure&lt;br&gt;\n&gt; &gt; &gt; &gt; your NotExceedsDocumentLengthTresholdDecideRule is\nset to use header&lt;br&gt;\n&gt; &gt; &gt; &gt; length. This will cause the FetchHTTP processor to\nrun the decide &lt;br&gt;\n&gt; &gt; rule&lt;br&gt;\n&gt; &gt; &gt; &gt; after fetching the HTTP header (which hopefully\ncontains an accurate&lt;br&gt;\n&gt; &gt; &gt; &gt; content-length value) and will not download the\nactual file if it is&lt;br&gt;\n&gt; &gt; &gt; &gt; too large.&lt;br&gt;\n&gt; &gt; &gt; &gt;&lt;br&gt;\n&gt; &gt; &gt; &gt; - Kris&lt;br&gt;\n&gt; &gt; &gt; &gt;&lt;br&gt;\n&gt; &gt;&lt;br&gt;\n&gt; &gt;&lt;br&gt;\n&gt;&lt;br&gt;\n  &lt;br&gt;\n  &lt;/p&gt;\n  &lt;/div&gt;\n\n\n&lt;!-- end group email --&gt;&lt;/blockquote&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n\r\n--------------010704070909060604040900--\r\n\n"}}