{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":95697582,"authorName":"G.B.Reddy","from":"&quot;G.B.Reddy&quot; &lt;reddy@...&gt;","profile":"gbreddysoft","replyTo":"LIST","senderId":"_sB8l9MPmIlnlTpuL5Zaa6uX0Xa2zUSpDnvuVmkurssdlaN8tkSdXk_U8r773myHbxS20dyXq2c1pI1glYYDjVtX4i0m4SGrqfjl-Oo","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] SEDA Performance !!","postDate":"1050510795","msgId":47,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDEyYTUwMWMzMDQzNSRlMTUzNWFlMCRkNTAwYThjMEB0aWRlbHBhcmsuaXNvZnR0ZWNoaW5kaWEuY29tPg==","referencesHeader":"PDA0ZmIwMWMzMDA3NyRmZGNkZDg2MCRkNTAwYThjMEB0aWRlbHBhcmsuaXNvZnR0ZWNoaW5kaWEuY29tPiA8MDAyMzAxYzMwMmI4JDk0ZmJlNTAwJDQ4ZjBlZGQxQFdPUktTVEFUSU9OMjE+IDwwZWQ0MDFjMzAzNzckN2RiNjVhMDAkZDUwMGE4YzBAdGlkZWxwYXJrLmlzb2Z0dGVjaGluZGlhLmNvbT4="},"prevInTopic":45,"nextInTopic":48,"prevInTime":46,"nextInTime":48,"topicId":42,"numMessagesInTopic":7,"msgSnippet":"Gordon, The various tests and the results that we got today are as follows. ( In the below lines, Java downloader means the HTTP downloader which we used","rawEmail":"Return-Path: &lt;reddy@...&gt;\r\nX-Sender: reddy@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (EGP: mail-8_2_6_5); 16 Apr 2003 16:35:53 -0000\r\nReceived: (qmail 57599 invoked from network); 16 Apr 2003 16:35:53 -0000\r\nReceived: from unknown (66.218.66.217)\n  by m13.grp.scd.yahoo.com with QMQP; 16 Apr 2003 16:35:53 -0000\r\nReceived: from unknown (HELO pub.isofttechindia.com) (203.199.202.17)\n  by mta2.grp.scd.yahoo.com with SMTP; 16 Apr 2003 16:35:49 -0000\r\nReceived: from ReddyGB (ReddyGB.isofttechindia.com [192.168.0.213])\n\tby pub.isofttechindia.com (8.11.0/8.11.0) with SMTP id h3GGVNi17111\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Wed, 16 Apr 2003 22:01:23 +0530\r\nMessage-ID: &lt;12a501c30435$e1535ae0$d500a8c0@...&gt;\r\nTo: &lt;archive-crawler@yahoogroups.com&gt;\r\nReferences: &lt;04fb01c30077$fdcdd860$d500a8c0@...&gt; &lt;002301c302b8$94fbe500$48f0edd1@WORKSTATION21&gt; &lt;0ed401c30377$7db65a00$d500a8c0@...&gt;\r\nSubject: Re: [archive-crawler] SEDA Performance !!\r\nDate: Wed, 16 Apr 2003 22:03:15 +0530\r\nOrganization: ISoftTech\r\nMIME-Version: 1.0\r\nContent-Type: multipart/mixed;\n\tboundary=&quot;----=_NextPart_000_12A1_01C30463.FADA9BD0&quot;\r\nX-Priority: 3\r\nX-MSMail-Priority: Normal\r\nX-Mailer: Microsoft Outlook Express 5.50.4920.2300\r\nX-MimeOLE: Produced By Microsoft MimeOLE V5.50.4920.2300\r\nX-eGroups-From: &quot;G.B.Reddy&quot; &lt;reddy@...&gt;\r\nFrom: &quot;G.B.Reddy&quot; &lt;reddy@...&gt;\r\nReply-To: &quot;G.B.Reddy&quot; &lt;reddy@...&gt;\r\nX-Yahoo-Group-Post: member; u=95697582\r\nX-Yahoo-Profile: gbreddysoft\r\n\r\n\r\n------=_NextPart_000_12A1_01C30463.FADA9BD0\r\nContent-Type: multipart/alternative;\n\tboundary=&quot;----=_NextPart_001_12A2_01C30463.FADA9BD0&quot;\r\n\r\n\r\n------=_NextPart_001_12A2_01C30463.FADA9BD0\r\nContent-Type: text/plain;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nGordon,\n\nThe various tests and the results that we got today are as follows=\r\n. ( In the below lines, Java downloader means the HTTP downloader which we =\r\nused earlier to measure the java nio performance.)\n\n- Tried enabling the ca=\r\nche on the webservers. Got only a 0.5 to 0.8 MBytes/sec improvement on the =\r\nJava Downloader code. This could be lesser on SEDA downloader. Since the th=\r\nroughput rise was not too high, we planned to proceed with other tests with=\r\n no cache.\n- Measured the memory requirements of the SEDA downloader. The r=\r\nequired memory is less than 20 MB. So, we decided not to use the JVM min/ma=\r\nx extended cmd line memory settings. We preferred to do this, since the Jav=\r\na Downloader readings were not done with such settings earlier and will be =\r\ndifficult to compare since the GC logic might be different if there was a m=\r\nemory setting.\n        - 100 Connections - 7 MB approx \n        - 250 Conne=\r\nctions - 15 MB approx \n        - 500 Connections - 20 MB approx\n- Measured =\r\nthe throughput with the HotSpot -server option of JVM. \n        - This did =\r\nnot yield any big noticible benefits. It is because of too much I/O in our =\r\ncode which in any case the JVM cannot optimize.\n\n\nThings to discuss tomorro=\r\nw on SEDA Performance:\n\n- SEDA Downloader uses not more than 60% CPU. Proba=\r\nbly if it uses the rest, it might acheive more throughput similar to our &quot;w=\r\nithout sleep&quot; tests on Java Downloader. CPU not being used completely could=\r\n be because of two reasons; \n    -- One is that we are not pumping enough r=\r\nequests which is not the case. We monitored this and we see that the connec=\r\ntedURLCount at any point is very close to the cmd line param. For instance,=\r\n in case of 500 connections, the average was more than 470.\n    -- Other is=\r\n that SEDA threads are getting blocked in some synchronization locks. Shoul=\r\nd have to identify these bottlenecks.\n\n- The test environment being differe=\r\nnt between SEDA benchmarks and our tests, it is difficult to correlate. Pro=\r\nbably we can run the benchmarking test scripts bundled in SEDA in our local=\r\n environment so that it will be easy to compare against our tests. I haven&#39;=\r\nt yet completely looked into their test scripts.\n\n\nThe updated schedule is =\r\nalso attached. We shall also discuss about this tomorrow.\n\n\nThanks,\nReddy\n\n=\r\n  ----- Original Message ----- \n  From: G.B.Reddy \n  To: archive-crawler@ya=\r\nhoogroups.com \n  Sent: Tuesday, April 15, 2003 11:20 PM\n  Subject: Re: [arc=\r\nhive-crawler] SEDA Performance !!\n\n\n  Gordon,\n\n  We can have our call as su=\r\nggested on Wednesday 8:30p PT (3:30UTC).\n\n  The test sources used are check=\r\ned into CVS. Look for the packages \n  - test.javanio.http - Contains the As=\r\nync and Sync http downloader implementation written to benchmark the java n=\r\nio apis.\n  - test.sedanio.http - Contains the SEDA aSocket based http downl=\r\noader ( exactly similar to its javanio counterpart).\n\n  As you said, the ma=\r\nxConnections is not a strict target; so the actual number of connections at=\r\n any point could be less than it; but not more.\n\n  We had earlier raised th=\r\ne value of maxClients parameter suitably in httpd.conf to allow apache to s=\r\nervice more than the default 150 clients simultaneously.\n\n  Today we found =\r\nthat the sandstorm script by default ships with ( -ms128M -mx1024M ) option=\r\ns. This setting results in GC getting called very lately but when called, i=\r\nt takes about a minute to complete. This is the reason behind the previous =\r\ntest results showing very less throughput above 100 simulataneous connectio=\r\nns. After removing it, we see the following throughput.\n\n  100 connections =\r\n- about 4.0 Mbytes/sec ( This is same as the reading we got before )\n  250 =\r\nconnections - about 2.7 Mbytes/sec ( This was less than 1 Mbytes/sec before=\r\n )\n  500 connections - about 1.8 Mbytes/sec ( This was less than 1 Mbytes/s=\r\nec before )\n\n  which means that the throughput indeed degrades with the num=\r\nber of connections; but not as bad as before.\n\n  We also ran another quick =\r\ntest wherein we used NBIO instead of the java NIO. We noticed that the thro=\r\nughput degraded to 1.8 Mbytes/sec in the 100 connections case. This makes t=\r\nhings even more fishy.\n\n  The differences between our setup and the setup u=\r\nsed by the SEDA benchmarks are\n\n  Crawler Setup                    -- SEDA =\r\nbenchmark Setup\n\n  - Sun JDK 1.4.1                 -- IBM JDK 1.1.8\n  - JDK=\r\n 1.4 NIO library          -- NBIO library\n  - 100 Mbps Ethernet          --=\r\n Gigabit Ethernet\n  - No Cache on Webserver  -- Must have had caching.\n\n  T=\r\nhe other test combinations we are running now over our SEDA Http downloader=\r\n are\n  - Try java -server option.\n  - Try JDK 1.4.2 beta.\n  - Try IBM JDK 1=\r\n.4\n  - Try IBM JDK 1.1.8 with NBIO - This is the closest comparison that we=\r\n can do against SEDA benchmarks.\n  - Do tests enabling the web server cache=\r\n.\n\n\n  Thanks,\n  Reddy\n\n    ----- Original Message ----- \n    From: Gordon M=\r\nohr \n    To: archive-crawler@yahoogroups.com \n    Sent: Tuesday, April 15, =\r\n2003 12:33 AM\n    Subject: Re: [archive-crawler] SEDA Performance !!\n\n\n    =\r\nThanks for the updated analysis!\n\n    However, I am concerned that the resu=\r\nlts may be more a result of the\n    test design or the specific HTTP implem=\r\nentation we&#39;re using than the\n    underlying NIO/aSocket code, because the =\r\nresults diverge so greatly\n    from SEDA&#39;s own published performance testin=\r\ng.\n\n    For example, the results at...\n\n      http://www.cs.berkeley.edu/~m=\r\ndw/proj/sandstorm/iocore-bench/index.html\n\n    ...show strong throughput up=\r\n through 1,000 simultaneous connections,\n    indeed even up past 10,000 sim=\r\nultaneous connections.\n\n    Also, given the note about the 1.4.1 -&gt; 1.4.2 J=\r\nRE NIO change, a test\n    under 1.4.2 is necessary to truly evaluate either=\r\n of the asynchronous\n    options.\n\n    Some other questions about the test =\r\nsetup:\n\n    - the meaning of &quot;maxConnections&quot; is unclear to me; it seems it=\r\n\n       is not a &quot;maximum&quot; but a &quot;target&quot;, and the actual number of\n       =\r\nconnections at any point in time might be larger or smaller.\n       Is this=\r\n right?\n\n    - do you have any other intrumentation which suggests it is\n  =\r\n     specifically garbage collection which is causing the degradation\n     =\r\n  of the SEDA approach above 100 connections?\n\n    - if some of the setups =\r\nare hitting garbage-collection or other\n       resource thresholds, more in=\r\nfo about the test machine/VM would\n       be helpful: RAM, VM options used =\r\n(server hotspot? heap/stack\n       sizes? etc.)\n\n    - with only 2 Apache w=\r\neb servers to one client process, we may\n       be testing/hitting Apache p=\r\nerformance limits as much as Java/IO\n       limits. For example, default Ap=\r\nache will only accept 150 simultaneous\n       clients; by my reading of the=\r\n test setup this means that no\n       matter how many connections the LAN t=\r\nest attempted, it would\n       never succeed on more than 300 (across the t=\r\nwo test Apaches)\n       at once -- so any LAN test numbers over 300 aren&#39;t =\r\nreally\n       indicative of Java performance.\n\n    - is the test code somet=\r\nhing you could check into CVS?\n\n    These figures are all very interesting,=\r\n and even if quirks in\n    the test are pushing results one way or the othe=\r\nr, that will\n    usually generate useful info, too.\n\n    - Gordon\n\n    ----=\r\n- Original Message -----\n    From: G.B.Reddy\n    To: archive-crawler@yahoog=\r\nroups.com\n    Sent: Friday, April 11, 2003 3:16 PM\n    Subject: Re: [archiv=\r\ne-crawler] SEDA Performance !!\n\n\n    Gordon,\n\n    Please find attached the =\r\nperformance report on the SEDA aSocket NIO layer. Look for the last section=\r\n in the document &quot;SEDA NIO\n    Socket Framework&quot; and the &quot;Summary&quot; section =\r\nis also updated with the results. An excel sheet with the readings and the =\r\ngraph is also\n    attached for reference.\n\n    We would like to have a brie=\r\nf chat with you on Tuesday 8:30 pm PST ( Monday is a holiday for us on the =\r\neve of Tamil new year ) about\n    SEDA socket layer and generally about the=\r\n various tasks and other proceedings.\n\n    JAnt Build Status :\n\n    - The p=\r\nroposed directory structure is not yet created since we are still in the An=\r\necdote prototyping stage and we do not have any\n    complete package to che=\r\nckin. I have modified the ant script a bit to suit the present Anecdote str=\r\nucture and activated a cronjob\n    over it. I have also added you and Raymi=\r\ne to the notification mail-ids list so that you would also get the nightly =\r\nbuild mails. You\n    could get the nightly build from the location &quot;/home/u=\r\nsers/w/wc/wcr-team/NightlyBuilds&quot; as stated in the mail on\n    shell.source=\r\nforge.net. You could use your own logins and do SFTP to access the NightlyB=\r\nuilds directory. It has read permissions for\n    all.\n\n    - I am not sure =\r\nwhy the stata labs libraries ( st.ata.* packages) have been checked in as a=\r\n separate CVS module. Are we planning to\n    upgrade/modify those sources a=\r\nnd maintain ourselves. If not, we could just have the built classes in a ja=\r\nr in CVS lib directory as\n    we had done for other third party libraries. =\r\nOtherwise, if we want to maintain it, then would we require that to be a se=\r\nparate CVS\n    module ? I think it would be better if we have one CVS root =\r\nmodule under which everything is put in. Probably, in such cases, we can\n  =\r\n  have a &quot;thiryPartySrc&quot; directory to maintain such sources within our main=\r\n module &quot;OpenWebCrawler&quot; itself.\n\n    Thanks,\n    Reddy\n\n\n    ----- Origina=\r\nl Message -----\n    From: G.B.Reddy\n    To: archive-crawler@yahoogroups.com=\r\n\n    Sent: Friday, April 11, 2003 12:46 AM\n    Subject: Re: [archive-crawle=\r\nr] Status !!\n\n\n    Gordon,\n\n    As you say, the aSocketInputStream is neede=\r\nd only if the client stage is multithreaded. But the oceanstore &quot;HttpClient=\r\n&quot; stage is\n    internally using it to do sequencing which is unnecessary si=\r\nnce anyway the &quot;HttpClient&quot; class implements\n    SingleThreadedEventHandler=\r\nIF. I have removed these overheads to do my performance testing.\n\n    After=\r\n starting to test the SEDA socket performance, I ran into three problems in=\r\n the SEDA&#39;s socket framework.\n\n    - Newly discovered bug : The seda intern=\r\nals throw ConcurrentModification exceptions when iterating through the sele=\r\nctor&#39;s registered\n    keys. This exceptions is highly reproducible when mor=\r\ne number of concurrent downloads happen. Synchronization has not been taken=\r\n\n    care when the ReadEventHandler tries to deregister the socket from the=\r\n selector of the WriteEventHandler. ( As you would know, there\n    are thre=\r\ne stages ReadStage, WriteStage and ListenStage in the seda socket framework=\r\n. Each has its own java Selector instance and\n    they wait on its select c=\r\nall. The ReadStage is the one that determines that a connection is terminat=\r\ned. When this happens, it\n    directly tries to make a deregister call on t=\r\nhe WriteStage&#39;s selector on this socket object. So, easily concurrent mod e=\r\nxceptions\n    are thrown when my downloader stage is pumping requests and m=\r\naking new connections). I shall raise this bug to the author and I am\n    p=\r\nroceeding with my fix on it. Because of this unsynchronized communication, =\r\na lot of CancelledKeyExceptions are also thrown in the\n    internals.\n\n    =\r\n- A documented bug : ConcurrentModification exceptions when iterating throu=\r\ngh the selector&#39;s selectedKeys. This is also due to no\n    synchronization.=\r\n Multiple threads are allowed by the seda internals to do select calls on a=\r\n single selector. (Look for the docs in\n    seda.sandStorm.lib.aSocket.nio.=\r\nNIOSelectSource.doPoll method). I will have to look for doing some minimal =\r\nsynchronization as stated\n    in there.\n\n    - There has been other rare Nu=\r\nllPointerExceptions and IllegalArgumentException in some places. I will hav=\r\ne to look into their\n    implications.\n\n    I will fix the last two problem=\r\ns and get the performance measurements tomorrow.\n\n    Thanks,\n    Reddy\n\n  =\r\n  ----- Original Message -----\n    From: Gordon Mohr\n    To: archive-crawle=\r\nr@yahoogroups.com\n    Sent: Wednesday, April 09, 2003 12:17 AM\n    Subject:=\r\n Re: [archive-crawler] Status !!\n\n\n    Thanks for the update!\n\n    The Ocen=\r\nstore libhttp package is known to be very rough; really just a\n    placehol=\r\nder or starting point for what we&#39;d need. (Note that there&#39;s\n    also an al=\r\nternative &#39;libhttp2&#39; package in OceanStore, but it seemed both\n    unused i=\r\nn their other code and more elaborate, so I haven&#39;t tried\n    to use it yet=\r\n.)\n\n    The TCP response ordering capabilities to aSocketInputStream only s=\r\neem\n    necessary if you have multiple threads reading from the same socket=\r\n -- which\n    I think can, and probably should, be avoided.\n\n    I&#39;m lookin=\r\ng forward to seeing the test results.\n\n    I like the BuildDesign proposal;=\r\n please move forward with creating\n    that structure for a new module on t=\r\nhe sourceforge CVS. However,\n    please use the module name of &quot;ArchiveOpen=\r\nCrawler&quot; (instead of\n    &quot;Web-crawler&quot;).\n\n    Thanks!\n\n    - Gordon\n\n    --=\r\n--- Original Message -----\n    From: G.B.Reddy\n    To: archive-crawler@yaho=\r\nogroups.com\n    Sent: Tuesday, April 08, 2003 11:04 AM\n    Subject: [archiv=\r\ne-crawler] Status !!\n\n\n    Gordon,\n\n    I am presently working on the SEDA =\r\nsocket overhead determination work. I will get the results in the next two =\r\ndays. Some initial\n    insights into it are\n    - Oceanstore manages both T=\r\nx and Rx in a single stage.\n    - It just holds the responses in memory onl=\r\ny. It does not write into tmp files if they are huge.\n    - TCP response re=\r\nordering is done by using the seda.sandStorm.lib.aSocket.aSocketInputStream=\r\n class which reorders packets according\n    to the ATcpInPacket sequence nu=\r\nmber.\n\n    The test that will be done :\n    - Port the downloader code ( wh=\r\nich we had written earlier during the java nio performance tests ) to SEDA =\r\nframework and use the\n    OceanStore library for HTTP fetching. The same te=\r\nsts that we did for the downloader will be repeated in this oceanstore setu=\r\np. We\n    are removing some oceanstore code to make it similar. The result =\r\nof this test would tell us the percentage of overhead imposed by\n    the SE=\r\nDA framework.\n\n\n    We are also done with the JAnt packaging scripts. It us=\r\nes the present CVS structure itself. I shall create the proposed CVS\n    st=\r\nructure after you approve it. Today we have put the cronjob for testing the=\r\n web hosting part of nightly builds. We shall enable it\n    for all tomorro=\r\nw. As of now, only the last nightly build will be available for download. M=\r\nore changes need to be made for hosting\n    every nightly build of a week.\n=\r\n\n    Thanks,\n    Reddy\n\n    Yahoo! Groups Sponsor\n    ADVERTISEMENT\n\n\n\n\n   =\r\n To unsubscribe from this group, send an email to:\n    archive-crawler-unsu=\r\nbscribe@yahoogroups.com\n\n\n\n    Your use of Yahoo! Groups is subject to the =\r\nYahoo! Terms of Service.\n\n\n\n    To unsubscribe from this group, send an ema=\r\nil to:\n    archive-crawler-unsubscribe@yahoogroups.com\n\n\n\n    Your use of Y=\r\nahoo! Groups is subject to the Yahoo! Terms of Service.\n\n\n\n    To unsubscri=\r\nbe from this group, send an email to:\n    archive-crawler-unsubscribe@yahoo=\r\ngroups.com\n\n\n\n    Your use of Yahoo! Groups is subject to the Yahoo! Terms =\r\nof Service.\n\n\n    Yahoo! Groups Sponsor\n    ADVERTISEMENT\n\n\n\n\n    To unsubs=\r\ncribe from this group, send an email to:\n    archive-crawler-unsubscribe@ya=\r\nhoogroups.com\n\n\n\n    Your use of Yahoo! Groups is subject to the Yahoo! Ter=\r\nms of Service.\n\n\n\n    To unsubscribe from this group, send an email to:\n   =\r\n archive-crawler-unsubscribe@yahoogroups.com\n\n\n\n    Your use of Yahoo! Grou=\r\nps is subject to the Yahoo! Terms of Service. \n\n\n        Yahoo! Groups Spon=\r\nsor \n              ADVERTISEMENT\n             \n       \n       \n\n  To unsubs=\r\ncribe from this group, send an email to:\n  archive-crawler-unsubscribe@yaho=\r\nogroups.com\n\n\n\n  Your use of Yahoo! Groups is subject to the Yahoo! Terms o=\r\nf Service. \n\n\r\n------=_NextPart_001_12A2_01C30463.FADA9BD0\r\nContent-Type: text/html;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot;&gt;\n&lt;HTML&gt;&lt;HEAD&gt;=\r\n\n&lt;META http-equiv=3DContent-Type content=3D&quot;text/html; charset=3Diso-8859-1=\r\n&quot;&gt;\n&lt;META content=3D&quot;MSHTML 5.50.4134.600&quot; name=3DGENERATOR&gt;\n&lt;STYLE&gt;&lt;/STYLE&gt;=\r\n\n&lt;/HEAD&gt;\n&lt;BODY bgColor=3D#ffffff&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Gordon,&lt;=\r\n/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;&lt;FONT face=\r\n=3DArial size=3D2&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;The various tests and t=\r\nhe results that we got today \nare as follows. ( &lt;/FONT&gt;&lt;FONT face=3DArial s=\r\nize=3D2&gt;In the below lines, Java \ndownloader means the HTTP downloader whic=\r\nh we used earlier to measure the java \nnio performance.)&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;=\r\n&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial siz=\r\ne=3D2&gt;- Tried enabling the cache on the webservers. Got \nonly a 0.5 to 0.8 =\r\nMBytes/sec improvement on the Java Downloader code. This could \nbe lesser o=\r\nn SEDA downloader. Since the throughput rise was not too \nhigh,&nbsp;we pla=\r\nnned to proceed with other&nbsp;tests with no \ncache.&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FO=\r\nNT face=3DArial size=3D2&gt;- Measured the memory requirements of the SEDA \ndo=\r\nwnloader.&nbsp;The required memory is less than 20 MB. So, we&nbsp;decided =\r\nnot \nto use the&nbsp;JVM min/max extended cmd line memory settings. We pref=\r\nerred to \ndo this, since the Java Downloader readings were not done with su=\r\nch settings \nearlier and will be difficult to compare since the GC logic mi=\r\nght be different \nif there was a memory setting.&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT fa=\r\nce=3DArial size=3D2&gt;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; - 100 \nConnection=\r\ns - 7 MB approx&lt;/FONT&gt; &lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&nbsp;&nbsp;=\r\n&nbsp; &nbsp;&nbsp;&nbsp; - 250 \nConnections - 15 MB approx&lt;/FONT&gt; &lt;/DIV&gt;\n&lt;=\r\nDIV&gt;&lt;FONT face=3DArial size=3D2&gt;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; - 500=\r\n \nConnections - 20 MB approx&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;=\r\n- Measured the throughput with the HotSpot \n&lt;STRONG&gt;-server &lt;/STRONG&gt;option=\r\n of JVM.&lt;/FONT&gt; &lt;/DIV&gt;\n&lt;DIV&gt;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; - &lt;FONT f=\r\nace=3DArial size=3D2&gt;This did \nnot yield any big noticible benefits. It is =\r\nbecause of too much I/O in our code \nwhich in any case the JVM cannot optim=\r\nize.&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV=\r\n&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial si=\r\nze=3D2&gt;Things to discuss tomorrow on SEDA \nPerformance:&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;=\r\nFONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=\r\n=3D2&gt;- SEDA Downloader uses not more than 60% CPU. \nProbably if it uses the=\r\n rest, it might acheive more throughput similar to our \n&quot;without sleep&quot; tes=\r\nts on Java Downloader.&nbsp;CPU not being used \ncompletely&nbsp;could be be=\r\ncause of two reasons; &lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&nbsp;=\r\n&nbsp;&nbsp; -- One is that we are not \npumping enough requests which is no=\r\nt the case. &lt;/FONT&gt;&lt;FONT face=3DArial size=3D2&gt;We \nmonitored this and we se=\r\ne that the connectedURLCount at any point is very close \nto the cmd line pa=\r\nram. For instance, in case of 500 connections, the average was \nmore than 4=\r\n70.&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&nbsp;&nbsp;&nbsp; -- &lt;FONT face=3DArial size=3D2&gt;Oth=\r\ner is that SEDA \nthreads&nbsp;are getting blocked in some synchronization l=\r\nocks.&nbsp;Should have \nto&nbsp;identify these bottlenecks.&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;D=\r\nIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial =\r\nsize=3D2&gt;- The test environment being different between SEDA \nbenchmarks an=\r\nd our tests, it is difficult to correlate. Probably we can run the \nbenchma=\r\nrking&nbsp;test scripts bundled in SEDA in our local environment so that \ni=\r\nt will be easy to compare against our tests. I haven&#39;t yet completely looke=\r\nd \ninto their test scripts.&lt;/FONT&gt;&lt;/DIV&gt;&lt;/FONT&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial siz=\r\ne=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/D=\r\nIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;The updated schedule is also attached.=\r\n We shall \nalso discuss about this tomorrow.&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=\r\n=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FO=\r\nNT&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Thanks,&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;=\r\n&lt;FONT face=3DArial size=3D2&gt;Reddy&lt;/FONT&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;FONT face=3DArial size=\r\n=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n&lt;BLOCKQUOTE \nstyle=3D&quot;PADDING-RIGHT: 0px; PADDING-=\r\nLEFT: 5px; MARGIN-LEFT: 5px; BORDER-LEFT: #000000 2px solid; MARGIN-RIGHT: =\r\n0px&quot;&gt;\n  &lt;DIV style=3D&quot;FONT: 10pt arial&quot;&gt;----- Original Message ----- &lt;/DIV&gt;=\r\n\n  &lt;DIV \n  style=3D&quot;BACKGROUND: #e4e4e4; FONT: 10pt arial; font-color: blac=\r\nk&quot;&gt;&lt;B&gt;From:&lt;/B&gt; \n  &lt;A title=3Dreddy@... href=3D&quot;mailto:reddy@isof=\r\nttech.com&quot;&gt;G.B.Reddy&lt;/A&gt; \n  &lt;/DIV&gt;\n  &lt;DIV style=3D&quot;FONT: 10pt arial&quot;&gt;&lt;B&gt;To:=\r\n&lt;/B&gt; &lt;A \n  title=3Darchive-crawler@yahoogroups.com \n  href=3D&quot;mailto:archiv=\r\ne-crawler@yahoogroups.com&quot;&gt;archive-crawler@yahoogroups.com&lt;/A&gt; \n  &lt;/DIV&gt;\n  =\r\n&lt;DIV style=3D&quot;FONT: 10pt arial&quot;&gt;&lt;B&gt;Sent:&lt;/B&gt; Tuesday, April 15, 2003 11:20 =\r\n\n  PM&lt;/DIV&gt;\n  &lt;DIV style=3D&quot;FONT: 10pt arial&quot;&gt;&lt;B&gt;Subject:&lt;/B&gt; Re: [archive-=\r\ncrawler] SEDA \n  Performance !!&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;BR&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=\r\n=3DArial size=3D2&gt;Gordon,&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;=\r\n/FONT&gt;&lt;FONT face=3DArial \nsize=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3D=\r\nArial size=3D2&gt;We can have our call as suggested on Wednesday \n  8:30p PT (=\r\n3:30UTC).&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DI=\r\nV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;The test sources used are checked int=\r\no CVS. Look \n  for the packages &lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial siz=\r\ne=3D2&gt;- test.javanio.http&nbsp;- Contains the Async and \n  Sync http downlo=\r\nader implementation written to benchmark the java nio \n  apis.&lt;/FONT&gt;&lt;/DIV&gt;=\r\n\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;- test.sedanio.http - Contains the SEDA=\r\n aSocket \n  based http downloader ( exactly similar to its javanio \n  count=\r\nerpart).&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV=\r\n&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;As you said, the maxConnections is&nbs=\r\np;not a \n  strict target; so the actual number of connections at any point =\r\ncould be less \n  than it; but not more.&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DAr=\r\nial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;We had =\r\nearlier raised the value of maxClients \n  parameter suitably in httpd.conf =\r\nto allow apache to service more than the \n  default 150 clients simultaneou=\r\nsly.&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n  =\r\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Today we found that the&nbsp;sandstorm scr=\r\nipt by \n  default ships&nbsp;with ( -ms128M -mx1024M )&nbsp;options. This s=\r\netting \n  results in GC getting called very lately but when called, it take=\r\ns about a \n  minute to complete. This is the reason behind the previous tes=\r\nt results \n  showing very&nbsp;less throughput above 100 simulataneous conn=\r\nections. After \n  removing it, we see the following throughput.&lt;/FONT&gt;&lt;/DIV=\r\n&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=\r\n=3DArial size=3D2&gt;100 connections - about 4.0 Mbytes/sec ( This is \n  same =\r\nas the reading we got before )&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=\r\n=3D2&gt;250 connections -&nbsp;about 2.7&lt;/FONT&gt;&lt;FONT \n  face=3DArial size=3D2&gt;=\r\n Mbytes/sec ( This was less than 1 Mbytes/sec before \n  )&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;D=\r\nIV&gt;&lt;FONT face=3DArial size=3D2&gt;500 connections - about&nbsp;1.8&lt;FONT face=\r\n=3DArial \n  size=3D2&gt; Mbytes/sec ( This was less than 1 Mbytes/sec before \n=\r\n  )&lt;/FONT&gt;&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/D=\r\nIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;which means that the throughput inde=\r\ned degrades \n  with the number of connections; but not as bad as before.&lt;/F=\r\nONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;F=\r\nONT face=3DArial size=3D2&gt;We also ran another quick test wherein we used \n =\r\n NBIO instead of the java NIO.&lt;/FONT&gt;&lt;FONT face=3DArial size=3D2&gt; We&nbsp;n=\r\noticed \n  that the throughput degraded to 1.8 Mbytes/sec in the 100 connect=\r\nions case. \n  This makes things even more fishy.&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT =\r\nface=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D=\r\n2&gt;The differences between our setup and the setup \n  used by the SEDA bench=\r\nmarks are&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DI=\r\nV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Crawler Setup&nbsp;&nbsp;&nbsp; \n  &n=\r\nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; -=\r\n- \n  SEDA benchmark Setup&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;=\r\n/FONT&gt;&nbsp;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;- Sun JDK \n  1.4.1&nb=\r\nsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; \n  &nbsp;&=\r\nnbsp;&nbsp; -- IBM JDK 1.1.8&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D=\r\n2&gt;- JDK 1.4 NIO \n  library&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=\r\nnbsp; -- NBIO \n  library&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;- =\r\n100 Mbps Ethernet &nbsp;&nbsp;&nbsp;&nbsp; \n  &nbsp;&nbsp;&nbsp; -- Gigabit=\r\n Ethernet&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;- No Cache on Web=\r\nserver&nbsp;&nbsp;-- Must have \n  had caching.&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&nbsp;&lt;/=\r\nDIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;The other test combinations&nbsp;we=\r\n are running \n  now&nbsp;over our SEDA Http downloader are&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;=\r\nDIV&gt;&lt;FONT face=3DArial size=3D2&gt;-&nbsp;Try java -server option.&lt;/FONT&gt;&lt;/DIV=\r\n&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;- Try&nbsp;JDK 1.4.2 beta.&lt;/FONT&gt;&lt;/DIV=\r\n&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;- Try&nbsp;IBM JDK 1.4&lt;/FONT&gt;&lt;/DIV&gt;\n  =\r\n&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;- Try&nbsp;IBM JDK 1.1.8 with NBIO - This =\r\nis the \n  closest comparison that we can do against SEDA benchmarks.&lt;/FONT&gt;=\r\n&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;- Do tests enabling the web serve=\r\nr \n  cache.&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/=\r\nDIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT fa=\r\nce=3DArial size=3D2&gt;Thanks,&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2=\r\n&gt;Reddy&lt;/FONT&gt;&lt;/DIV&gt;\n  &lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;\n=\r\n  &lt;BLOCKQUOTE \n  style=3D&quot;PADDING-RIGHT: 0px; PADDING-LEFT: 5px; MARGIN-LEF=\r\nT: 5px; BORDER-LEFT: #000000 2px solid; MARGIN-RIGHT: 0px&quot;&gt;\n    &lt;DIV style=\r\n=3D&quot;FONT: 10pt arial&quot;&gt;----- Original Message ----- &lt;/DIV&gt;\n    &lt;DIV \n    sty=\r\nle=3D&quot;BACKGROUND: #e4e4e4; FONT: 10pt arial; font-color: black&quot;&gt;&lt;B&gt;From:&lt;/B=\r\n&gt; \n    &lt;A title=3Dgojomo@... href=3D&quot;mailto:gojomo@...&quot;&gt;Gor=\r\ndon Mohr&lt;/A&gt; \n    &lt;/DIV&gt;\n    &lt;DIV style=3D&quot;FONT: 10pt arial&quot;&gt;&lt;B&gt;To:&lt;/B&gt; &lt;A =\r\n\n    title=3Darchive-crawler@yahoogroups.com \n    href=3D&quot;mailto:archive-cr=\r\nawler@yahoogroups.com&quot;&gt;archive-crawler@yahoogroups.com&lt;/A&gt; \n    &lt;/DIV&gt;\n    =\r\n&lt;DIV style=3D&quot;FONT: 10pt arial&quot;&gt;&lt;B&gt;Sent:&lt;/B&gt; Tuesday, April 15, 2003 12:33 =\r\n\n    AM&lt;/DIV&gt;\n    &lt;DIV style=3D&quot;FONT: 10pt arial&quot;&gt;&lt;B&gt;Subject:&lt;/B&gt; Re: [arch=\r\nive-crawler] SEDA \n    Performance !!&lt;/DIV&gt;\n    &lt;DIV&gt;&lt;FONT face=3DArial siz=\r\ne=3D2&gt;&lt;/FONT&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&lt;FONT \n    face=3DArial siz=\r\ne=3D2&gt;&lt;/FONT&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&lt;FONT face=3DArial \n    siz=\r\ne=3D2&gt;&lt;/FONT&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&lt;FONT face=3DArial \n    siz=\r\ne=3D2&gt;&lt;/FONT&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&lt;FONT face=3DArial \n    siz=\r\ne=3D2&gt;&lt;/FONT&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&lt;FONT face=3DArial \n    siz=\r\ne=3D2&gt;&lt;/FONT&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&lt;FONT face=3DArial \n    siz=\r\ne=3D2&gt;&lt;/FONT&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&lt;FONT face=3DArial \n    siz=\r\ne=3D2&gt;&lt;/FONT&gt;&lt;FONT face=3DArial size=3D2&gt;&lt;/FONT&gt;&lt;BR&gt;&lt;/DIV&gt;&lt;TT&gt;Thanks for th=\r\ne \n    updated analysis!&lt;BR&gt;&lt;BR&gt;However, I am concerned that the results ma=\r\ny be \n    more a result of the&lt;BR&gt;test design or the specific HTTP implemen=\r\ntation \n    we&#39;re using than the&lt;BR&gt;underlying NIO/aSocket code, because th=\r\ne results \n    diverge so greatly&lt;BR&gt;from SEDA&#39;s own published performance =\r\n\n    testing.&lt;BR&gt;&lt;BR&gt;For example, the results at...&lt;BR&gt;&lt;BR&gt;&nbsp; &lt;A \n    h=\r\nref=3D&quot;http://www.cs.berkeley.edu/~mdw/proj/sandstorm/iocore-bench/index.ht=\r\nml&quot;&gt;http://www.cs.berkeley.edu/~mdw/proj/sandstorm/iocore-bench/index.html&lt;=\r\n/A&gt;&lt;BR&gt;&lt;BR&gt;...show \n    strong throughput up through 1,000 simultaneous con=\r\nnections,&lt;BR&gt;indeed even \n    up past 10,000 simultaneous connections.&lt;BR&gt;&lt;=\r\nBR&gt;Also, given the note about \n    the 1.4.1 -&gt; 1.4.2 JRE NIO change, a =\r\ntest&lt;BR&gt;under 1.4.2 is necessary to \n    truly evaluate either of the async=\r\nhronous&lt;BR&gt;options.&lt;BR&gt;&lt;BR&gt;Some other \n    questions about the test setup:&lt;=\r\nBR&gt;&lt;BR&gt;- the meaning of &quot;maxConnections&quot; is \n    unclear to me; it seems it=\r\n&lt;BR&gt;&nbsp;&nbsp; is not a &quot;maximum&quot; but a \n    &quot;target&quot;, and the actual num=\r\nber of&lt;BR&gt;&nbsp;&nbsp; connections at any point \n    in time might be large=\r\nr or smaller.&lt;BR&gt;&nbsp;&nbsp; Is this right?&lt;BR&gt;&lt;BR&gt;- \n    do you have any =\r\nother intrumentation which suggests it is&lt;BR&gt;&nbsp;&nbsp; \n    specifically=\r\n garbage collection which is causing the \n    degradation&lt;BR&gt;&nbsp;&nbsp; o=\r\nf the SEDA approach above 100 \n    connections?&lt;BR&gt;&lt;BR&gt;- if some of the set=\r\nups are hitting garbage-collection \n    or other&lt;BR&gt;&nbsp;&nbsp; resource t=\r\nhresholds, more info about the test \n    machine/VM would&lt;BR&gt;&nbsp;&nbsp; b=\r\ne helpful: RAM, VM options used (server \n    hotspot? heap/stack&lt;BR&gt;&nbsp;&=\r\nnbsp; sizes? etc.)&lt;BR&gt;&lt;BR&gt;- with only 2 Apache \n    web servers to one clie=\r\nnt process, we may&lt;BR&gt;&nbsp;&nbsp; be testing/hitting \n    Apache performan=\r\nce limits as much as Java/IO&lt;BR&gt;&nbsp;&nbsp; limits. For \n    example, defa=\r\nult Apache will only accept 150 simultaneous&lt;BR&gt;&nbsp;&nbsp; \n    clients; =\r\nby my reading of the test setup this means that no&lt;BR&gt;&nbsp;&nbsp; \n    mat=\r\nter how many connections the LAN test attempted, it would&lt;BR&gt;&nbsp;&nbsp; \n=\r\n    never succeed on more than 300 (across the two test Apaches)&lt;BR&gt;&nbsp;&=\r\nnbsp; \n    at once -- so any LAN test numbers over 300 aren&#39;t really&lt;BR&gt;&nb=\r\nsp;&nbsp; \n    indicative of Java performance.&lt;BR&gt;&lt;BR&gt;- is the test code so=\r\nmething you \n    could check into CVS?&lt;BR&gt;&lt;BR&gt;These figures are all very in=\r\nteresting, and \n    even if quirks in&lt;BR&gt;the test are pushing results one w=\r\nay or the other, that \n    will&lt;BR&gt;usually generate useful info, too.&lt;BR&gt;&lt;B=\r\nR&gt;- Gordon&lt;BR&gt;&lt;BR&gt;----- \n    Original Message -----&lt;BR&gt;From: G.B.Reddy&lt;BR&gt;T=\r\no: \n    archive-crawler@yahoogroups.com&lt;BR&gt;Sent: Friday, April 11, 2003 3:1=\r\n6 \n    PM&lt;BR&gt;Subject: Re: [archive-crawler] SEDA Performance \n    !!&lt;BR&gt;&lt;BR=\r\n&gt;&lt;BR&gt;Gordon,&lt;BR&gt;&lt;BR&gt;Please find attached the performance report on \n    the=\r\n SEDA aSocket NIO layer. Look for the last section in the document &quot;SEDA \n =\r\n   NIO&lt;BR&gt;Socket Framework&quot; and the &quot;Summary&quot; section is also updated with =\r\nthe \n    results. An excel sheet with the readings and the graph is also&lt;BR=\r\n&gt;attached \n    for reference.&lt;BR&gt;&lt;BR&gt;We would like to have a brief chat wit=\r\nh you on Tuesday \n    8:30 pm PST ( Monday is a holiday for us on the eve o=\r\nf Tamil new year ) \n    about&lt;BR&gt;SEDA socket layer and generally about the =\r\nvarious tasks and other \n    proceedings.&lt;BR&gt;&lt;BR&gt;JAnt Build Status :&lt;BR&gt;&lt;BR=\r\n&gt;- The proposed directory \n    structure is not yet created since we are st=\r\nill in the Anecdote prototyping \n    stage and we do not have any&lt;BR&gt;comple=\r\nte package to checkin. I have modified \n    the ant script a bit to suit th=\r\ne present Anecdote structure and activated a \n    cronjob&lt;BR&gt;over it. I hav=\r\ne also added you and Raymie to the notification \n    mail-ids list so that =\r\nyou would also get the nightly build mails. \n    You&lt;BR&gt;could get the night=\r\nly build from the location \n    &quot;/home/users/w/wc/wcr-team/NightlyBuilds&quot; a=\r\ns stated in the mail \n    on&lt;BR&gt;shell.sourceforge.net. You could use your o=\r\nwn logins and do SFTP to \n    access the NightlyBuilds directory. It has re=\r\nad permissions \n    for&lt;BR&gt;all.&lt;BR&gt;&lt;BR&gt;- I am not sure why the stata labs l=\r\nibraries ( st.ata.* \n    packages) have been checked in as a separate CVS m=\r\nodule. Are we planning \n    to&lt;BR&gt;upgrade/modify those sources and maintain=\r\n ourselves. If not, we could \n    just have the built classes in a jar in C=\r\nVS lib directory as&lt;BR&gt;we had done \n    for other third party libraries. Ot=\r\nherwise, if we want to maintain it, then \n    would we require that to be a=\r\n separate CVS&lt;BR&gt;module ? I think it would be \n    better if we have one CV=\r\nS root module under which everything is put in. \n    Probably, in such case=\r\ns, we can&lt;BR&gt;have a &quot;thiryPartySrc&quot; directory to \n    maintain such sources=\r\n within our main module &quot;OpenWebCrawler&quot; \n    itself.&lt;BR&gt;&lt;BR&gt;Thanks,&lt;BR&gt;Red=\r\ndy&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;----- Original Message \n    -----&lt;BR&gt;From: G.B.Reddy&lt;BR&gt;To: a=\r\nrchive-crawler@yahoogroups.com&lt;BR&gt;Sent: \n    Friday, April 11, 2003 12:46 A=\r\nM&lt;BR&gt;Subject: Re: [archive-crawler] Status \n    !!&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Gordon,&lt;BR&gt;&lt;B=\r\nR&gt;As you say, the aSocketInputStream is needed \n    only if the client stag=\r\ne is multithreaded. But the oceanstore &quot;HttpClient&quot; \n    stage is&lt;BR&gt;intern=\r\nally using it to do sequencing which is unnecessary since \n    anyway the &quot;=\r\nHttpClient&quot; class implements&lt;BR&gt;SingleThreadedEventHandlerIF. I \n    have r=\r\nemoved these overheads to do my performance testing.&lt;BR&gt;&lt;BR&gt;After \n    star=\r\nting to test the SEDA socket performance, I ran into three problems in \n   =\r\n the SEDA&#39;s socket framework.&lt;BR&gt;&lt;BR&gt;- Newly discovered bug : The seda \n   =\r\n internals throw ConcurrentModification exceptions when iterating through t=\r\nhe \n    selector&#39;s registered&lt;BR&gt;keys. This exceptions is highly reproducib=\r\nle when \n    more number of concurrent downloads happen. Synchronization ha=\r\ns not been \n    taken&lt;BR&gt;care when the ReadEventHandler tries to deregister=\r\n the socket from \n    the selector of the WriteEventHandler. ( As you would=\r\n know, there&lt;BR&gt;are \n    three stages ReadStage, WriteStage and ListenStage=\r\n in the seda socket \n    framework. Each has its own java Selector instance=\r\n and&lt;BR&gt;they wait on its \n    select call. The ReadStage is the one that de=\r\ntermines that a connection is \n    terminated. When this happens, it&lt;BR&gt;dir=\r\nectly tries to make a deregister \n    call on the WriteStage&#39;s selector on =\r\nthis socket object. So, easily \n    concurrent mod exceptions&lt;BR&gt;are thrown=\r\n when my downloader stage is pumping \n    requests and making new connectio=\r\nns). I shall raise this bug to the author \n    and I am&lt;BR&gt;proceeding with =\r\nmy fix on it. Because of this unsynchronized \n    communication, a lot of C=\r\nancelledKeyExceptions are also thrown in \n    the&lt;BR&gt;internals.&lt;BR&gt;&lt;BR&gt;- A =\r\ndocumented bug : ConcurrentModification \n    exceptions when iterating thro=\r\nugh the selector&#39;s selectedKeys. This is also \n    due to no&lt;BR&gt;synchroniza=\r\ntion. Multiple threads are allowed by the seda \n    internals to do select =\r\ncalls on a single selector. (Look for the docs \n    in&lt;BR&gt;seda.sandStorm.li=\r\nb.aSocket.nio.NIOSelectSource.doPoll method). I will \n    have to look for =\r\ndoing some minimal synchronization as stated&lt;BR&gt;in \n    there.&lt;BR&gt;&lt;BR&gt;- The=\r\nre has been other rare NullPointerExceptions and \n    IllegalArgumentExcept=\r\nion in some places. I will have to look into \n    their&lt;BR&gt;implications.&lt;BR=\r\n&gt;&lt;BR&gt;I will fix the last two problems and get the \n    performance measurem=\r\nents tomorrow.&lt;BR&gt;&lt;BR&gt;Thanks,&lt;BR&gt;Reddy&lt;BR&gt;&lt;BR&gt;----- \n    Original Message -=\r\n----&lt;BR&gt;From: Gordon Mohr&lt;BR&gt;To: \n    archive-crawler@yahoogroups.com&lt;BR&gt;Se=\r\nnt: Wednesday, April 09, 2003 12:17 \n    AM&lt;BR&gt;Subject: Re: [archive-crawle=\r\nr] Status !!&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Thanks for the \n    update!&lt;BR&gt;&lt;BR&gt;The Ocenstore li=\r\nbhttp package is known to be very rough; \n    really just a&lt;BR&gt;placeholder =\r\nor starting point for what we&#39;d need. (Note \n    that there&#39;s&lt;BR&gt;also an al=\r\nternative &#39;libhttp2&#39; package in OceanStore, but it \n    seemed both&lt;BR&gt;unus=\r\ned in their other code and more elaborate, so I haven&#39;t \n    tried&lt;BR&gt;to us=\r\ne it yet.)&lt;BR&gt;&lt;BR&gt;The TCP response ordering capabilities to \n    aSocketInp=\r\nutStream only seem&lt;BR&gt;necessary if you have multiple threads \n    reading f=\r\nrom the same socket -- which&lt;BR&gt;I think can, and probably should, \n    be a=\r\nvoided.&lt;BR&gt;&lt;BR&gt;I&#39;m looking forward to seeing the test results.&lt;BR&gt;&lt;BR&gt;I \n  =\r\n  like the BuildDesign proposal; please move forward with creating&lt;BR&gt;that =\r\n\n    structure for a new module on the sourceforge CVS. However,&lt;BR&gt;please =\r\nuse \n    the module name of &quot;ArchiveOpenCrawler&quot; (instead \n    of&lt;BR&gt;&quot;Web-c=\r\nrawler&quot;).&lt;BR&gt;&lt;BR&gt;Thanks!&lt;BR&gt;&lt;BR&gt;- Gordon&lt;BR&gt;&lt;BR&gt;----- Original \n    Message=\r\n -----&lt;BR&gt;From: G.B.Reddy&lt;BR&gt;To: \n    archive-crawler@yahoogroups.com&lt;BR&gt;Se=\r\nnt: Tuesday, April 08, 2003 11:04 \n    AM&lt;BR&gt;Subject: [archive-crawler] Sta=\r\ntus !!&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Gordon,&lt;BR&gt;&lt;BR&gt;I am \n    presently working on the SEDA so=\r\ncket overhead determination work. I will get \n    the results in the next t=\r\nwo days. Some initial&lt;BR&gt;insights into it are&lt;BR&gt;- \n    Oceanstore manages =\r\nboth Tx and Rx in a single stage.&lt;BR&gt;- It just holds the \n    responses in =\r\nmemory only. It does not write into tmp files if they are \n    huge.&lt;BR&gt;- T=\r\nCP response reordering is done by using the \n    seda.sandStorm.lib.aSocket=\r\n.aSocketInputStream class which reorders packets \n    according&lt;BR&gt;to the A=\r\nTcpInPacket sequence number.&lt;BR&gt;&lt;BR&gt;The test that will \n    be done :&lt;BR&gt;- =\r\nPort the downloader code ( which we had written earlier \n    during the jav=\r\na nio performance tests ) to SEDA framework and use \n    the&lt;BR&gt;OceanStore =\r\nlibrary for HTTP fetching. The same tests that we did for \n    the download=\r\ner will be repeated in this oceanstore setup. We&lt;BR&gt;are removing \n    some =\r\noceanstore code to make it similar. The result of this test would tell \n   =\r\n us the percentage of overhead imposed by&lt;BR&gt;the SEDA \n    framework.&lt;BR&gt;&lt;B=\r\nR&gt;&lt;BR&gt;We are also done with the JAnt packaging scripts. It \n    uses the pr=\r\nesent CVS structure itself. I shall create the proposed \n    CVS&lt;BR&gt;structu=\r\nre after you approve it. Today we have put the cronjob for \n    testing the=\r\n web hosting part of nightly builds. We shall enable it&lt;BR&gt;for \n    all tom=\r\norrow. As of now, only the last nightly build will be available for \n    do=\r\nwnload. More changes need to be made for hosting&lt;BR&gt;every nightly build of =\r\n\n    a week.&lt;BR&gt;&lt;BR&gt;Thanks,&lt;BR&gt;Reddy&lt;BR&gt;&lt;BR&gt;Yahoo! Groups \n    Sponsor&lt;BR&gt;A=\r\nDVERTISEMENT&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;To unsubscribe from this group, \n    send a=\r\nn email \n    to:&lt;BR&gt;archive-crawler-unsubscribe@yahoogroups.com&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;=\r\n&lt;BR&gt;Your use \n    of Yahoo! Groups is subject to the Yahoo! Terms of \n    S=\r\nervice.&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;To unsubscribe from this group, send an email \n    t=\r\no:&lt;BR&gt;archive-crawler-unsubscribe@yahoogroups.com&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Your use \n=\r\n    of Yahoo! Groups is subject to the Yahoo! Terms of \n    Service.&lt;BR&gt;&lt;BR=\r\n&gt;&lt;BR&gt;&lt;BR&gt;To unsubscribe from this group, send an email \n    to:&lt;BR&gt;archive-=\r\ncrawler-unsubscribe@yahoogroups.com&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Your use \n    of Yahoo! =\r\nGroups is subject to the Yahoo! Terms of \n    Service.&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Yahoo! Gr=\r\noups \n    Sponsor&lt;BR&gt;ADVERTISEMENT&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;To unsubscribe from t=\r\nhis group, \n    send an email \n    to:&lt;BR&gt;archive-crawler-unsubscribe@yahoo=\r\ngroups.com&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Your use \n    of Yahoo! Groups is subject to the =\r\nYahoo! Terms of \n    Service.&lt;BR&gt;&lt;BR&gt;&lt;/TT&gt;&lt;BR&gt;&lt;BR&gt;&lt;TT&gt;To unsubscribe from t=\r\nhis group, send an \n    email \n    to:&lt;BR&gt;archive-crawler-unsubscribe@yahoo=\r\ngroups.com&lt;BR&gt;&lt;BR&gt;&lt;/TT&gt;&lt;BR&gt;&lt;BR&gt;&lt;TT&gt;Your \n    use of Yahoo! Groups is subjec=\r\nt to the &lt;A \n    href=3D&quot;http://docs.yahoo.com/info/terms/&quot;&gt;Yahoo! Terms of=\r\n Service&lt;/A&gt;.&lt;/TT&gt; \n    &lt;BR&gt;&lt;/BLOCKQUOTE&gt;&lt;BR&gt;&lt;BR&gt;&lt;TT&gt;To \n  unsubscribe from=\r\n this group, send an email \n  to:&lt;BR&gt;archive-crawler-unsubscribe@yahoogroup=\r\ns.com&lt;BR&gt;&lt;BR&gt;&lt;/TT&gt;&lt;BR&gt;&lt;BR&gt;&lt;TT&gt;Your \n  use of Yahoo! Groups is subject to th=\r\ne &lt;A \n  href=3D&quot;http://docs.yahoo.com/info/terms/&quot;&gt;Yahoo! Terms of Service&lt;=\r\n/A&gt;.&lt;/TT&gt; \n&lt;BR&gt;&lt;/BLOCKQUOTE&gt;&lt;/BODY&gt;&lt;/HTML&gt;\n\r\n------=_NextPart_001_12A2_01C30463.FADA9BD0--\r\n\n\r\n------=_NextPart_000_12A1_01C30463.FADA9BD0\r\nContent-Type: application/vnd.ms-excel;\n\tname=&quot;WebCrawler.xls&quot;\r\nContent-Disposition: attachment;\n\tfilename=&quot;WebCrawler.xls&quot;\r\n\r\n[ Attachment content not displayed ]\r\n------=_NextPart_000_12A1_01C30463.FADA9BD0--\r\n\n"}}