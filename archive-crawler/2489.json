{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":132996324,"authorName":"joehung302","from":"&quot;joehung302&quot; &lt;joe.hung@...&gt;","profile":"joehung302","replyTo":"LIST","senderId":"Q7IwjAATY05FpWSp6D8x5-1Y0gKLAbdLfz1_xmFh9HfGZis_rYltSjrehWGKDhRAeiP1g-ahXqYPn6nCe4_9uZhEw2YGCDzT95IDX-t1","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: How to deal with runaway thread?","postDate":"1136334395","msgId":2489,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PGRwZjRucisxaGszQGVHcm91cHMuY29tPg==","inReplyToHeader":"PDQ5NGFmZTFjMDYwMTAxMjIwNXYxNzhkZjkxM24yYzU0OTU3ZWYxZGI3OTM1QG1haWwuZ21haWwuY29tPg=="},"prevInTopic":2487,"nextInTopic":2491,"prevInTime":2488,"nextInTime":2490,"topicId":2485,"numMessagesInTopic":7,"msgSnippet":"I finally logged in to the web console and looked at the thread report. It looks like the thread is stuck at one regular expression call (java.uitl.regex) and","rawEmail":"Return-Path: &lt;joe.hung@...&gt;\r\nX-Sender: joe.hung@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 44082 invoked from network); 4 Jan 2006 00:27:06 -0000\r\nReceived: from unknown (66.218.66.166)\n  by m4.grp.scd.yahoo.com with QMQP; 4 Jan 2006 00:27:06 -0000\r\nReceived: from unknown (HELO n1a.bullet.scd.yahoo.com) (66.94.237.35)\n  by mta5.grp.scd.yahoo.com with SMTP; 4 Jan 2006 00:27:06 -0000\r\nComment: DomainKeys? See http://antispam.yahoo.com/domainkeys\r\nReceived: from [66.218.69.2] by n1.bullet.scd.yahoo.com with NNFMP; 04 Jan 2006 00:26:38 -0000\r\nReceived: from [66.218.66.74] by mailer2.bullet.scd.yahoo.com with NNFMP; 04 Jan 2006 00:26:36 -0000\r\nDate: Wed, 04 Jan 2006 00:26:35 -0000\r\nTo: archive-crawler@yahoogroups.com\r\nMessage-ID: &lt;dpf4nr+1hk3@...&gt;\r\nIn-Reply-To: &lt;494afe1c0601012205v178df913n2c54957ef1db7935@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: &quot;joehung302&quot; &lt;joe.hung@...&gt;\r\nSubject: Re: How to deal with runaway thread?\r\nX-Yahoo-Group-Post: member; u=132996324; y=TPWSLNWfxHPfYJtnSX6f8D3CADlaWoFzmabvXhllK47nm-4J0A\r\nX-Yahoo-Profile: joehung302\r\n\r\nI finally logged in to the web console and looked at the thread \nreport. It=\r\n looks like the thread is stuck at one regular expression \ncall (java.uitl.=\r\nregex) and I did use the &quot;kill thread&quot; functionality \n(and it worked!).\n\nI =\r\nwas able to checkpoint after that. I guess what I&#39;d do is, add a \ncheck in =\r\nthe script so that if I cannot pause a crawl job within an \nhour, I&#39;ll send=\r\n out an email and *manually* get rid of the hung \nthread.\n\nCheers,\n-joe\n\n--=\r\n- In archive-crawler@yahoogroups.com, Vishwesh Thakur \n&lt;vishwesh@g...&gt; wrot=\r\ne:\n&gt;\n&gt; Hello Joe/Community,\n&gt;  I believe you can make use of the JMX call e=\r\nxposed by Heritrix\n&gt; &quot;interrupt(String threadName&quot;) to kill a runaway threa=\r\nd.\n&gt; The call effectively makes a call Thread.interrput(). Looking at \nthe =\r\ncode it\n&gt; appears that this call should do the job.\n&gt;  However I&#39;ve been in=\r\nto a situation where I was unable to kill a \nthread in\n&gt; the way I&#39;ve menti=\r\noned.\n&gt; \n&gt;  Did you investigate why you thread was busy for more than an ho=\r\nur?\n&gt; Threaddump and the ToeThread Report taken together should give you \na=\r\n good\n&gt; picture of the problem.\n&gt; \n&gt;  I&#39;d want to report a problem that I c=\r\name across. I was using Sun \njdk\n&gt; 1.5.0_04 and was running around 50 toe t=\r\nhreads. Slowly the threads \nwere\n&gt; getting hung up for the lock on &quot;snoozed=\r\nClassQueues&quot; member \nvariable of\n&gt; WorkQueueFrontier class.\n&gt; \n&gt;  Upon inve=\r\nstigation I found that the case is not of a deadlock or \nor one\n&gt; thread ha=\r\nving aquired it and not giving up the same. To my \nsurprise few\n&gt; other Toe=\r\nThreads were able to aquire the lock \nof &quot;snoozedClassQueues&quot; and\n&gt; were ab=\r\nle to come out repeatedly whereas around 35-40 ToeThreads \nwere hung\n&gt; wait=\r\ning for the lock for more than half an hour. I stopped the \ncrawl and\n&gt; res=\r\ntarted the crawl again. This time the same issue cropped up but \nfor the\n&gt; =\r\nlock on some other object (I don&#39;t remember now). It led me to \nconclude th=\r\nat\n&gt; the lock allocation of the particular jdk I was using is bad.\n&gt; \n&gt;  I =\r\nupdagraded my jdk to next build (Build 5) and never saw the \nproblem\n&gt; agai=\r\nn.\n&gt; \n&gt; Regards\n&gt; Thakur\n&gt; \n&gt; \n&gt; \n&gt; On 1/1/06, joehung302 &lt;joe.hung@c...&gt; w=\r\nrote:\n&gt; &gt;\n&gt; &gt;  While I was testing my &quot;checkpointing&quot; script\n&gt; &gt; (pause-&gt;ch=\r\neckpoint-&gt;resume thru JMX client), I encounter a \nproblem\n&gt; &gt; where one thr=\r\nead just won&#39;t quit...the crawler keep saying\n&gt; &gt;\n&gt; &gt; &quot;Status: Pausing - Wa=\r\niting for threads to finish&quot;\n&gt; &gt; (ThreadCount is 1)\n&gt; &gt;\n&gt; &gt; for more than a=\r\nn hour. I finally had to &quot;resume&quot; the crawl (and \ngive\n&gt; &gt; up on checkpoint=\r\ning) because I need to go on.\n&gt; &gt;\n&gt; &gt; Will I encounter the problem again if=\r\n I restart the crawl from \nthe\n&gt; &gt; last checkpoint? In general how do peopl=\r\ne address this issue?\n&gt; &gt;\n&gt; &gt; Cheers,\n&gt; &gt; -joe\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;  -------=\r\n-----------------------\n&gt; &gt; YAHOO! GROUPS LINKS\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;    -  Visit you=\r\nr group &quot;archive-\ncrawler&lt;http://groups.yahoo.com/group/archive-crawler&gt;&quot;\n&gt;=\r\n &gt;    on the web.\n&gt; &gt;\n&gt; &gt;    -  To unsubscribe from this group, send an ema=\r\nil to:\n&gt; &gt;     archive-crawler-unsubscribe@yahoogroups.com&lt;archive-crawler-=\r\n\nunsubscribe@yahoogroups.com?subject=3DUnsubscribe&gt;\n&gt; &gt;\n&gt; &gt;    -  Your use =\r\nof Yahoo! Groups is subject to the Yahoo! Terms of\n&gt; &gt;    Service &lt;http://d=\r\nocs.yahoo.com/info/terms/&gt;.\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;  ------------------------------\n&gt; &gt;=\r\n\n&gt; \n&gt; \n&gt; \n&gt; --\n&gt; Thakur Vishwesh Singh\n&gt;\n\n\n\n\n\n"}}