{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":163406187,"authorName":"Kristinn Sigurdsson","from":"&quot;Kristinn Sigurdsson&quot; &lt;kris@...&gt;","profile":"kristsi25","replyTo":"LIST","senderId":"GJpQnt6TQMa7vFgI7SZsWDNTO2Kj4vK1U5Zh6RZiP2wLBsErZWhoLx2ZgRlVCFE3hugGAD-8SgxQ0auDS75C5axXqCOqgCh_KAJxxTD92w","spamInfo":{"isSpam":false,"reason":"12"},"subject":"RE: [archive-crawler] budgetting","postDate":"1129708917","msgId":2250,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDA2NzhEQjE5NjhFQUM3NDA5Q0MzRDBBQjdBMTFCODRBNzg1NjAyQHNrYXJmdXIuYm9rLmxvY2FsPg==","inReplyToHeader":"PDQzNTVGMkFELjUwMzA1MDFAc3RhdHNiaWJsaW90ZWtldC5kaz4="},"prevInTopic":2249,"nextInTopic":2259,"prevInTime":2249,"nextInTime":2251,"topicId":2249,"numMessagesInTopic":3,"msgSnippet":"Regarding the issue of queue budgets. It occurs to me that there might be a better way to handle this and give operators some flexibility. Like Bjarne","rawEmail":"Return-Path: &lt;kris@...&gt;\r\nX-Sender: kris@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 28763 invoked from network); 19 Oct 2005 08:02:08 -0000\r\nReceived: from unknown (66.218.66.167)\n  by m23.grp.scd.yahoo.com with QMQP; 19 Oct 2005 08:02:08 -0000\r\nReceived: from unknown (HELO ia00524.archive.org) (207.241.224.171)\n  by mta6.grp.scd.yahoo.com with SMTP; 19 Oct 2005 08:02:08 -0000\r\nReceived: (qmail 23332 invoked by uid 100); 19 Oct 2005 08:00:14 -0000\r\nReceived: from forritun-4.bok.hi.is (HELO forritun4) (kris@...@130.208.152.83)\n  by mail-dev.archive.org with SMTP; 19 Oct 2005 08:00:14 -0000\r\nTo: &lt;archive-crawler@yahoogroups.com&gt;\r\nDate: Wed, 19 Oct 2005 08:01:57 -0000\r\nMessage-ID: &lt;0678DB1968EAC7409CC3D0AB7A11B84A785602@...&gt;\r\nMIME-Version: 1.0\r\nContent-Type: multipart/alternative;\n\tboundary=&quot;----=_NextPart_000_000A_01C5D483.61C5E290&quot;\r\nX-Priority: 3 (Normal)\r\nX-MSMail-Priority: Normal\r\nX-Mailer: Microsoft Outlook, Build 10.0.4510\r\nX-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1506\r\nImportance: Normal\r\nIn-Reply-To: &lt;4355F2AD.5030501@...&gt;\r\nX-Spam-DCC: : \r\nX-Spam-Checker-Version: SpamAssassin 2.63 (2004-01-11) on ia00524.archive.org\r\nX-Spam-Level: \r\nX-Spam-Status: No, hits=-71.0 required=7.0 tests=AWL,HTML_30_40,\n\tHTML_FONTCOLOR_BLUE,HTML_MESSAGE,USER_IN_WHITELIST autolearn=no \n\tversion=2.63\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: &quot;Kristinn Sigurdsson&quot; &lt;kris@...&gt;\r\nSubject: RE: [archive-crawler] budgetting\r\nX-Yahoo-Group-Post: member; u=163406187; y=eoQ7ONuddKshbfYneCFtZM5PNRQx1STU9a1K1Nzh4kSI88wx\r\nX-Yahoo-Profile: kristsi25\r\n\r\n\r\n------=_NextPart_000_000A_01C5D483.61C5E290\r\nContent-Type: text/plain;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nRegarding the issue of queue budgets. It occurs to me that there might be a=\r\n\nbetter way to handle this and give operators some flexibility.\n \nLike Bjar=\r\nne suggests, move the wq.expend call to when the CrawlURI has\nfinished bein=\r\ng processed. But also move the actual cost calculation out into\nthe process=\r\ning chain by adding a BudgetCostEvaluator (possibly more then\none) that can=\r\n be further configured.\n \nThis not only allows more flexibility to the exis=\r\nting cost assignment\npolicies (since they currently don&#39;t have any settable=\r\n parameters, it&#39;s just\na choice between the fixed policies) but it also mak=\r\nes it very simple to add\ncustomized policies without messing with the BdbFr=\r\nontier in any way. It also\nmakes it easier for other frontiers to implement=\r\n budgeting.\n \n- Kris\n\n-----Original Message-----\nFrom: archive-crawler@yaho=\r\nogroups.com\n[mailto:archive-crawler@yahoogroups.com] On Behalf Of Bjarne An=\r\ndersen\nSent: 19. okt=F3ber 2005 07:16\nTo: archive-crawler@yahoogroups.com\nS=\r\nubject: [archive-crawler] budgetting\n\n\nHi.\n\nI have 2 issues about budgettin=\r\ng\n\n1. Would it be problematic to move: &quot;wq.expend(getCost(curi))&quot;;\n    from=\r\n WorkQueueFrontier.noteAboutToEmit(..)\n    to WorkQueueFrontier.finished(..=\r\n) - just below: &quot;if (curi.isSuccess())\n{&quot;\n\n2. should WorkQueue.refund() not=\r\n just always refund this.lastCost() ?\n\nbest\n\n-- \nBjarne Andersen\nIT-udvikle=\r\nr\n\nSTATSBIBLIOTEKET\nUniversitetsparken\n8000 =C5rhus C\nTlf. 89462165 - Mobil=\r\n 28713889\nCVR/SE 10100682 - EAN 5798000791084\nhttp://statsbiblioteket.dk\n\n\n=\r\n  _____  \n\nYAHOO! GROUPS LINKS \n\n\n\t\n*\t Visit your group &quot;archive-crawler\n&lt;h=\r\nttp://groups.yahoo.com/group/archive-crawler&gt; &quot; on the web.\n  \n\n*\t To unsub=\r\nscribe from this group, send an email to:\n archive-crawler-unsubscribe@yaho=\r\nogroups.com\n&lt;mailto:archive-crawler-unsubscribe@yahoogroups.com?subject=3DU=\r\nnsubscribe&gt; \n  \n\n*\t Your use of Yahoo! Groups is subject to the Yahoo! Term=\r\ns of Service\n&lt;http://docs.yahoo.com/info/terms/&gt; . \n\n\n  _____  \n\n\n\r\n------=_NextPart_000_000A_01C5D483.61C5E290\r\nContent-Type: text/html;\n\tcharset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot;&gt;\n&lt;HTML&gt;&lt;HEAD&gt;=\r\n&lt;TITLE&gt;Message&lt;/TITLE&gt;\n&lt;META http-equiv=3DContent-Type content=3D&quot;text/html=\r\n; charset=3Diso-8859-1&quot;&gt;\n&lt;META content=3D&quot;MSHTML 6.00.2800.1522&quot; name=3DGEN=\r\nERATOR&gt;&lt;/HEAD&gt;\n&lt;BODY&gt;\n&lt;DIV&gt;&lt;SPAN class=3D740145707-19102005&gt;&lt;FONT face=3DAr=\r\nial color=3D#0000ff \nsize=3D2&gt;Regarding the issue of queue budgets. It occu=\r\nrs to me that there might be \na better way to handle this and give operator=\r\ns some \nflexibility.&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=3D740145707-19102=\r\n005&gt;&lt;FONT face=3DArial color=3D#0000ff \nsize=3D2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&nbsp;&lt;/DIV&gt;=\r\n\n&lt;DIV&gt;&lt;SPAN class=3D740145707-19102005&gt;&lt;FONT face=3DArial color=3D#0000ff s=\r\nize=3D2&gt;Like \nBjarne suggests, move the wq.expend call to when the CrawlURI=\r\n has finished being \nprocessed. But also move the actual cost calculation o=\r\nut into the processing \nchain by adding a BudgetCostEvaluator (possibly mor=\r\ne then one) that can be \nfurther configured.&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN=\r\n class=3D740145707-19102005&gt;&lt;FONT face=3DArial color=3D#0000ff \nsize=3D2&gt;&lt;/=\r\nFONT&gt;&lt;/SPAN&gt;&nbsp;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=3D740145707-19102005&gt;&lt;FONT face=\r\n=3DArial color=3D#0000ff size=3D2&gt;This \nnot only allows more flexibility to=\r\n the existing cost assignment policies (since \nthey currently don&#39;t have an=\r\ny settable parameters, it&#39;s just a choice between \nthe fixed policies) but =\r\nit also makes it very simple to add customized policies \nwithout messing wi=\r\nth the BdbFrontier in any way. It also makes it easier for \nother frontiers=\r\n to implement budgeting.&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;\n&lt;DIV&gt;&lt;SPAN class=3D740145707-1=\r\n9102005&gt;&lt;FONT face=3DArial color=3D#0000ff \nsize=3D2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&nbsp;&lt;/=\r\nDIV&gt;\n&lt;DIV&gt;&lt;SPAN class=3D740145707-19102005&gt;&lt;FONT face=3DArial color=3D#0000=\r\nff size=3D2&gt;- \nKris&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;\n&lt;BLOCKQUOTE \nstyle=3D&quot;PADDING-LEFT:=\r\n 5px; MARGIN-LEFT: 5px; BORDER-LEFT: #0000ff 2px solid; MARGIN-RIGHT: 0px&quot;&gt;=\r\n\n  &lt;DIV&gt;&lt;/DIV&gt;\n  &lt;DIV class=3DOutlookMessageHeader lang=3Den-us dir=3Dltr a=\r\nlign=3Dleft&gt;&lt;FONT \n  face=3DTahoma size=3D2&gt;-----Original Message-----&lt;BR&gt;&lt;=\r\nB&gt;From:&lt;/B&gt; \n  archive-crawler@yahoogroups.com [mailto:archive-crawler@yaho=\r\nogroups.com] &lt;B&gt;On \n  Behalf Of &lt;/B&gt;Bjarne Andersen&lt;BR&gt;&lt;B&gt;Sent:&lt;/B&gt; 19. okt=\r\n=F3ber 2005 \n  07:16&lt;BR&gt;&lt;B&gt;To:&lt;/B&gt; archive-crawler@yahoogroups.com&lt;BR&gt;&lt;B&gt;Su=\r\nbject:&lt;/B&gt; \n  [archive-crawler] budgetting&lt;BR&gt;&lt;BR&gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;TT&gt;Hi.&lt;BR&gt;&lt;=\r\nBR&gt;I have 2 \n  issues about budgetting&lt;BR&gt;&lt;BR&gt;1. Would it be problematic to=\r\n move: \n  &quot;wq.expend(getCost(curi))&quot;;&lt;BR&gt;&nbsp;&nbsp;&nbsp; from \n  WorkQue=\r\nueFrontier.noteAboutToEmit(..)&lt;BR&gt;&nbsp;&nbsp;&nbsp; to \n  WorkQueueFrontie=\r\nr.finished(..) - just below: &quot;if (curi.isSuccess()) \n  {&quot;&lt;BR&gt;&lt;BR&gt;2. should =\r\nWorkQueue.refund() not just always refund this.lastCost() \n  ?&lt;BR&gt;&lt;BR&gt;best&lt;=\r\nBR&gt;&lt;BR&gt;-- &lt;BR&gt;Bjarne \n  Andersen&lt;BR&gt;IT-udvikler&lt;BR&gt;&lt;BR&gt;STATSBIBLIOTEKET&lt;BR&gt;=\r\nUniversitetsparken&lt;BR&gt;8000 \n  =C5rhus C&lt;BR&gt;Tlf. 89462165 - Mobil 28713889&lt;B=\r\nR&gt;CVR/SE 10100682 - EAN \n  5798000791084&lt;BR&gt;&lt;A \n  href=3D&quot;http://statsbibli=\r\noteket.dk&quot;&gt;http://statsbiblioteket.dk&lt;/A&gt;&lt;BR&gt;&lt;/TT&gt;&lt;/BODY&gt;&lt;/HTML&gt;\n\r\n------=_NextPart_000_000A_01C5D483.61C5E290--\r\n\n"}}