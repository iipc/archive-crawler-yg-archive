{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":137285340,"authorName":"Gordon Mohr","from":"Gordon Mohr &lt;gojomo@...&gt;","profile":"gojomo","replyTo":"LIST","senderId":"VhvHwAxjpbtFtL7kzsDHqCX1jLvcaWtvwbS961W93YHF3yR4lm3BJB7YBuVXgXTJau2cylriMzYlU8Mms2BQT6cYhZMu3y8","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: [archive-crawler] Killing hang up threads in Heritrix","postDate":"1409181628","msgId":8596,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDUzRkU2N0JDLjcwMDA3MDhAYXJjaGl2ZS5vcmc+","inReplyToHeader":"PENBQS16NzBKUFMrK3lUSnc5NENhYzlIS29OVVFlT3l0VVZmZ0Zwd1V6NVZOaXBIQWJRZ0BtYWlsLmdtYWlsLmNvbT4=","referencesHeader":"PEQwMjM0QjRDLkI2Q0MlYWFsc3VtQHN0YW5mb3JkLmVkdT4gPENBQS16NzBKUFMrK3lUSnc5NENhYzlIS29OVVFlT3l0VVZmZ0Zwd1V6NVZOaXBIQWJRZ0BtYWlsLmdtYWlsLmNvbT4="},"prevInTopic":8595,"nextInTopic":8597,"prevInTime":8595,"nextInTime":8597,"topicId":8594,"numMessagesInTopic":7,"msgSnippet":"Indeed I don t believe that generally, you can kill threads in this manner and still be sure that Java (including native JVM) data structures are still in a","rawEmail":"Return-Path: &lt;gojomo@...&gt;\r\nX-Sender: gojomo@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 99732 invoked by uid 102); 27 Aug 2014 23:20:30 -0000\r\nX-Received: from unknown (HELO mtaq1.grp.bf1.yahoo.com) (10.193.84.32)\n  by m16.grp.bf1.yahoo.com with SMTP; 27 Aug 2014 23:20:30 -0000\r\nX-Received: (qmail 10598 invoked from network); 27 Aug 2014 23:20:29 -0000\r\nX-Received: from unknown (HELO relay03.pair.com) (98.139.245.163)\n  by mtaq1.grp.bf1.yahoo.com with SMTP; 27 Aug 2014 23:20:29 -0000\r\nX-Received: (qmail 64015 invoked by uid 0); 27 Aug 2014 23:20:29 -0000\r\nX-Received: from 142.254.51.72 (HELO probook.local) (142.254.51.72)\n  by relay03.pair.com with SMTP; 27 Aug 2014 23:20:29 -0000\r\nX-pair-Authenticated: 142.254.51.72\r\nMessage-ID: &lt;53FE67BC.7000708@...&gt;\r\nDate: Wed, 27 Aug 2014 16:20:28 -0700\r\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.9; rv:24.0) Gecko/20100101 Thunderbird/24.6.0\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;D0234B4C.B6CC%aalsum@...&gt; &lt;CAA-z70JPS++yTJw94Cac9HKoNUQeOytUVfgFpwUz5VNipHAbQg@...&gt;\r\nIn-Reply-To: &lt;CAA-z70JPS++yTJw94Cac9HKoNUQeOytUVfgFpwUz5VNipHAbQg@...&gt;\r\nContent-Type: text/plain; charset=UTF-8; format=flowed\r\nContent-Transfer-Encoding: 8bit\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nSubject: Re: [archive-crawler] Killing hang up threads in Heritrix\r\nX-Yahoo-Group-Post: member; u=137285340; y=JihT8TVizi-vbA0mLmlIHmx7zpVtuDliRuC-Ced48-MJ\r\nX-Yahoo-Profile: gojomo\r\nFrom: Gordon Mohr &lt;gojomo@...&gt;\r\n\r\nIndeed I don&#39;t believe that generally, you can kill threads in this \nmanner and still be sure that Java (including native JVM) data \nstructures are still in a consistent state. So you could have mysterious \ncorruption or crashes, only evident arbitrarily later.\n\nFully diagnosing and correcting the cause of any such hangs is a better \napproach. Essentially every step of the usual Heritrix operation already \nhas designed-in timeouts or other limitations, so any indefinite hang is \na defect that should be fixed rather than adapted-to.\n\nAs Noah requests, representative stacks might give more ideas.\n\nNotably, exactly those places that might be &#39;safest&#39; to do an \nout-of-band thread kill may also be the easiest problems to diagnose/fix.\n\nAlso, I recall in the long-ago era of early JVMs and often-flaky Linux \nthreading (~2004ish; before/early-days-of NPTL era), some JVM/OS \ncombinations were prone to threads transiently missing the &#39;wake&#39; signal \nfrom the OS.  In such cases, a workaround was to connect with gdb, and \nsend the right &#39;IO is ready&#39; signal to the thread - which then resumed \nprogress. (I think it was SIGIO, but not sure.)\n\nWe&#39;re long separated from those bad old days, I hope â€“ unless you&#39;re \nusing an older/atypical OS/JVM combination, or some other mix of new \nhardware/filesystems that might have similar undebugged multi-threaded \ntiming issues. So I wonder if a similar &quot;send the overlooked signal&quot; \ncould be tried here, to unstick rather than kill the thread.\n\n(For a few subsequent years, OpenJDK at least through 1.6 versions often \nhad mysterious thread hangs, that I tended to attribute to some sort of \nsimilar issue - and tended to disappear when avoiding OpenJDK.)\n\n- Gordon\n\nOn 8/27/14, 10:16 AM, Noah Levitt nlevitt@... [archive-crawler] \nwrote:\n&gt;\n&gt;\n&gt; Hey Ahmed,\n&gt;\n&gt; Do you have a stack trace of these hung threads? It&#39;s not something I\n&gt; see very often. Usually they will finish if you wait them out.\n&gt;\n&gt; Noah\n&gt;\n&gt;\n&gt;\n&gt; On Wed, Aug 27, 2014 at 8:46 AM, Ahmed Alsum aalsum@...\n&gt; &lt;mailto:aalsum@...&gt; [archive-crawler]\n&gt; &lt;archive-crawler@yahoogroups.com\n&gt; &lt;mailto:archive-crawler@yahoogroups.com&gt;&gt; wrote:\n&gt;\n&gt;\n&gt;\n&gt;     Hello,\n&gt;\n&gt;     Sometimes we face the problem of hang up threads in Heritrix job\n&gt;     that may suspend the whole job. I investigated in this issue and\n&gt;     came with a method to kill these threads. I would like to share the\n&gt;     idea with you and looking forward for your feedback if there is any\n&gt;     concern or if there are other methods that I may add to the post.\n&gt;\n&gt;     http://a-alsum.blogspot.com/2014/08/killing-hang-up-threads-in-heritrix.html\n&gt;\n&gt;     Best regards,\n&gt;     Ahmed AlSum, Ph.D.\n&gt;     Web Archiving Engineer\n&gt;     Digital Library System and Services\n&gt;     Stanford University Library\n&gt;     Work: 650-868-7449 &lt;tel:650-868-7449&gt;\n&gt;\n&gt;     &lt; /div&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; \n\n"}}