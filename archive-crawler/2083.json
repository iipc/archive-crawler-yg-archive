{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":230697592,"authorName":"Ryan Gran","from":"Ryan Gran &lt;ryan@...&gt;","profile":"ryanatl","replyTo":"LIST","senderId":"OpQd1IOk3IxuxqNG1BorB9Lv3KapksFoiLOEMe7qub8cM4JlNE0-9XYyOZatyikmyR0qml0NKws_wTQEomdL2w","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [archive-crawler] Slowdown in LinkScoper?","postDate":"1123160300","msgId":2083,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQyRjIxMEVDLjUwMjA5MDZAY252aS5jb20+","inReplyToHeader":"PDQyRUU3MUQ1LjYwODA4MDJAYXJjaGl2ZS5vcmc+","referencesHeader":"PGRjbGdjNCtyM292QGVHcm91cHMuY29tPiA8NDJFRTRDODUuOTA0MDAwOEBjbnZpLmNvbT4gPDQyRUU3MUQ1LjYwODA4MDJAYXJjaGl2ZS5vcmc+"},"prevInTopic":2068,"nextInTopic":2086,"prevInTime":2082,"nextInTime":2084,"topicId":2062,"numMessagesInTopic":10,"msgSnippet":"... Not really, I examined a dozen or so URLs in the list.  A few pages had ALOT of links (maybe 1200-1500 at most), but most were normal pages. ... Since I","rawEmail":"Return-Path: &lt;ryan@...&gt;\r\nX-Sender: ryan@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 29733 invoked from network); 4 Aug 2005 13:01:35 -0000\r\nReceived: from unknown (66.218.66.166)\n  by m31.grp.scd.yahoo.com with QMQP; 4 Aug 2005 13:01:35 -0000\r\nReceived: from unknown (HELO srv01.kcpremierapts.com) (67.15.0.18)\n  by mta5.grp.scd.yahoo.com with SMTP; 4 Aug 2005 13:01:35 -0000\r\nX-ClientAddr: 24.31.251.140\r\nReceived: from [192.168.0.7] (CPE-24-31-251-140.kc.res.rr.com [24.31.251.140])\n\t(authenticated bits=0)\n\tby srv01.kcpremierapts.com (8.12.10/8.12.10) with ESMTP id j74D08Cc016345\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Thu, 4 Aug 2005 08:00:08 -0500\r\nMessage-ID: &lt;42F210EC.5020906@...&gt;\r\nDate: Thu, 04 Aug 2005 07:58:20 -0500\r\nUser-Agent: Mozilla Thunderbird 1.0.6 (Macintosh/20050716)\r\nX-Accept-Language: en-us, en\r\nMIME-Version: 1.0\r\nTo: archive-crawler@yahoogroups.com\r\nReferences: &lt;dclgc4+r3ov@...&gt; &lt;42EE4C85.9040008@...&gt; &lt;42EE71D5.6080802@...&gt;\r\nIn-Reply-To: &lt;42EE71D5.6080802@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-kcpremierapts-MailScanner-Information: Please contact the ISP for more information\r\nX-kcpremierapts-MailScanner: Found to be clean\r\nX-MailScanner-From: ryan@...\r\nX-eGroups-Msg-Info: 1:12:0\r\nFrom: Ryan Gran &lt;ryan@...&gt;\r\nReply-To: ryan@...\r\nSubject: Re: [archive-crawler] Slowdown in LinkScoper?\r\nX-Yahoo-Group-Post: member; u=230697592; y=6TwThH4gVznY838bWNp9OEzTYhsMtFaJTuZf4HPFmUSxdg\r\nX-Yahoo-Profile: ryanatl\r\n\r\n\n&gt; Two things that first come to mind:\n&gt;\n&gt; (1) Do the URIs they&#39;re working on have a gigantic number of outlinks? [*]\n\nNot really, I examined a dozen or so URLs in the list.  A few pages had \nALOT of links (maybe\n1200-1500 at most), but most were normal pages.\n\n&gt;\n&gt; (2) What Scope are you using? The legacy scopes (host/path/domain)\n&gt; are really inefficient, doing a linear probe through all &#39;seeds&#39;\n&gt; to determine if a new URI is in scope. (If using a custom scope,\n&gt; some other bottleneck could be the cause.) Some thread stacks from\n&gt; the overly-aged LinksScoper threads could point to the cause.\n&gt;\n&gt;\nSince I received this email, I started new crawls using SurtPrefixScope and\nDomainSensitiveFrontier.  I also went ahead and upgraded to the latest \nHEAD, as\nof about 2 days ago:  1.5.0-200508021001  Previously, I was using \nDomainScope.\n\nThe problem doesn&#39;t appear related to any specific URLS -- it appears to \nbe system-wide.\nI actually started 3 seperate crawls using 3 different sets of seeds \n(10k each).  Each crawl\nran on an identically configured machine with identical order.xmls.  As \na matter of fact,\nfor the first 29 hours or so, all of the crawls were running fine and \naveraging about\n5.0 documents/second (bandwidth limited at the moment).  This morning I \nsee that across\nall 3 machines, the averages have started to drop off, bandwidth usage \nhas become very\nspikey (was basically pegged at 100% at the start of the crawl), and \nperhaps most\ntelling, the load averages on all machines have spiked.  I was running a \nload average of\nabout 1.5 for the first 24-25 hours (last time I looked), now I&#39;m up to \na load average of\n~25.0 (varies a bit my machine).  There&#39;s literally no other activity on \nthese machines,\nthe logs are being stored to the local disk, but the archives themselves \nare being written\nacross NFS.  Each machine is writing to a different NFS directory.\n\nUsing regex from http://www.dreamersrealm.net/~tree/blog/?cat=6 to focus on\ntext/html content.  Using counter-mode: count-per-domain with a \nmax-docs: value\nof 500.\n\nAlso using all Apple OS/X Server -- perhaps that&#39;s the issue, I realize \nLinux is the\nprimary target.\n\nYou mentioned thread stacks -- I saw talk of jprofiler in the Developer \nDocs -- is\nthere a command line option or web UI option to dump the stacks?  Glad \nto provide\nwhatever I can to help troubleshoot, but I&#39;m also not a Java guy, so I \nknow my limits,\nand when to ask for help.  Help! =)\n\n"}}