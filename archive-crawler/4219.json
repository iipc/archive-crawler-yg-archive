{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":90724651,"authorName":"John Lekashman","from":"&quot;John Lekashman&quot; &lt;lekash@...&gt;","profile":"lekash","replyTo":"LIST","senderId":"VILNYt_sMeFOsjwAGbAPTLoA_iyTohpH_npLH57hq8MrXuYiDubnh8PqGQ0EpkcU09mp6emOZNwNOhY4Jl9cvzO7pPJHYjhOj_GPOA","spamInfo":{"isSpam":false,"reason":"6"},"subject":"recover from recovery logs.","postDate":"1178297531","msgId":4219,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PGYxZm9icitjcWZzQGVHcm91cHMuY29tPg==","inReplyToHeader":"PDQ1QzRFQkFELjkwNDAxMDJAYXJjaGl2ZS5vcmc+"},"prevInTopic":3777,"nextInTopic":4234,"prevInTime":4218,"nextInTime":4220,"topicId":3774,"numMessagesInTopic":6,"msgSnippet":"Hi Gordon, I ran into a challenge here as well. I did have a couple of questions on it. Is there anything in the on disk state directory from the old job e.g.","rawEmail":"Return-Path: &lt;lekash@...&gt;\r\nX-Sender: lekash@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 78731 invoked from network); 4 May 2007 16:55:23 -0000\r\nReceived: from unknown (66.218.66.72)\n  by m45.grp.scd.yahoo.com with QMQP; 4 May 2007 16:55:23 -0000\r\nReceived: from unknown (HELO n5c.bullet.sp1.yahoo.com) (69.147.64.187)\n  by mta14.grp.scd.yahoo.com with SMTP; 4 May 2007 16:55:22 -0000\r\nReceived: from [216.252.122.218] by n5.bullet.sp1.yahoo.com with NNFMP; 04 May 2007 16:52:13 -0000\r\nReceived: from [66.218.69.2] by t3.bullet.sp1.yahoo.com with NNFMP; 04 May 2007 16:52:13 -0000\r\nReceived: from [66.218.66.84] by t2.bullet.scd.yahoo.com with NNFMP; 04 May 2007 16:52:13 -0000\r\nDate: Fri, 04 May 2007 16:52:11 -0000\r\nTo: archive-crawler@yahoogroups.com\r\nMessage-ID: &lt;f1fobr+cqfs@...&gt;\r\nIn-Reply-To: &lt;45C4EBAD.9040102@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:6:0:0\r\nFrom: &quot;John Lekashman&quot; &lt;lekash@...&gt;\r\nSubject: recover from recovery logs.\r\nX-Yahoo-Group-Post: member; u=90724651; y=CIlDifgl0aYWL00hqKjtPNPEsW5O8MLpInHxSzIkr4Wq\r\nX-Yahoo-Profile: lekash\r\n\r\nHi Gordon,\nI ran into a challenge here as well.\n\nI did have a couple of que=\r\nstions on it.\n\nIs there anything in the on disk state directory from the \no=\r\nld job e.g. all those fine .jdb files, that has relevance to\nthe new crawl?=\r\n\n\nAnd, related to that, from looking at it, it appears all the\npriming cons=\r\nists of:\n a. write a new recover.gz file, of &#39;successful&#39; downloads.\n b. cr=\r\neate a frontier in memory.\n\nTrue, or do I miss something?\n\nI am not concern=\r\ned about disk space, or time, but I do have\nsome concern about re-crawling =\r\nplaces I just was at.  Being\nmore polite is more important every day.  (Mor=\r\ne on this, later.)\n\nIts not out of disk, just doing recovery from logs rath=\r\ner than\ncheckpoint.  I have about 2 crawlers a week just stop working.\nThey=\r\n do respond to a kill -3, and later -9, but nothing else.\n\nIts better to do=\r\n the recovery from the logs,\nas its more polite.  (No revisiting\nthe places=\r\n you just were.)\n\nWhat one has to do:\n- gunzip all the recover.gz.000xxx fi=\r\nles\ncp recover.gz.00001 ../../recover/rec1.gz\ncd ../../recover/\ngunzip rec1=\r\n.gz\n\n- add a return at the end of them.\n  cat &gt;&gt; rec1\n\n^D\n. . . repeat\n\nScr=\r\new around with the last recover file, to make it usable.\ncp recover.gz ../.=\r\n./recover/rec.gz\ncd ../../recover/\n# Need zcat, cause guzip always tells yo=\r\nu: loser, bad file.\nzcat rec.gz &gt; rec\ncat &gt;&gt; rec\n&lt;some random characters yo=\r\nu make up to make the last broken\nurl something vaguely valid&gt;\n^D\n\nThen, \nc=\r\nat rec1 rec2 rec3 rec4 rec &gt; recover\n\nAnd of course, make the new job, deal=\r\ning with the repeated\nrecover.gz.gz problem manually.\n\nStill, it appears mo=\r\nre reliable, polite and repeatable than\ncheckpointing, albeit with some inf=\r\normation loss.\n\nJohn\n\n\n\n\n--- In archive-crawler@yahoogroups.com, Gordon Moh=\r\nr &lt;gojomo@...&gt; wrote:\n&gt;\n&gt; Once a crawl hits an out-of-disk condition, it ma=\r\ny be in an unresumable \n&gt; and uncheckpointable state -- cleanly recovering =\r\nfrom everywhere this \n&gt; might happen would be very difficult.\n&gt; \n&gt; If you h=\r\nave a known-good checkpoint from earlier, you can recover from \n&gt; that, in =\r\na fresh JVM launch.\n&gt; \n&gt; If you want to recover by replaying the recovery l=\r\nogs, you&#39;ll have to \n&gt; concatenate them together first. This starts a new c=\r\nrawl, but then \n&gt; primes it to (1) not revisit anything marked as a &#39;succes=\r\ns&#39; in the \n&gt; replayed logs; (2) fill its queues with the same waiting URIs =\r\nfrom the \n&gt; logs. It doesn&#39;t recover all state from the previous crawl, tho=\r\nugh -- \n&gt; like running tallies, URI &#39;source&#39; tags (if used), and other data=\r\n -- so \n&gt; if those are essential a checkpoint should be used.\n&gt; \n&gt; Hope thi=\r\ns helps,\n&gt; \n&gt; - Gordon @ IA\n&gt; \n\n\n\n"}}