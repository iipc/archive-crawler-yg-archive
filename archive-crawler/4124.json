{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":176845436,"authorName":"anitabidari","from":"&quot;anitabidari&quot; &lt;abidari@...&gt;","profile":"anitabidari","replyTo":"LIST","senderId":"DHWfI-ncbiMo1U-8w3I1UYK6MRN04vKyc5e2kS8Uuqfau_4OGt-EAaS2OB2iHFVT9z8mNdivREAiRGiA0_C2DulHTL-4dg","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: Out of Memory Error","postDate":"1176824820","msgId":4124,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PGYwMnE1ays1cnRyQGVHcm91cHMuY29tPg==","inReplyToHeader":"PDQ2MTU2NENFLjUwNDA1MDFAYXJjaGl2ZS5vcmc+"},"prevInTopic":4056,"nextInTopic":4125,"prevInTime":4123,"nextInTime":4125,"topicId":4013,"numMessagesInTopic":16,"msgSnippet":"Hi Gordan I have run into the OOME again. This time I had the heap size set to 1G. I downloaded Java 1.6 per your suggestion, and below is the Stack Trace that","rawEmail":"Return-Path: &lt;abidari@...&gt;\r\nX-Sender: abidari@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 26487 invoked from network); 17 Apr 2007 15:47:29 -0000\r\nReceived: from unknown (66.218.67.33)\n  by m47.grp.scd.yahoo.com with QMQP; 17 Apr 2007 15:47:29 -0000\r\nReceived: from unknown (HELO n33c.bullet.sp1.yahoo.com) (209.131.38.216)\n  by mta7.grp.scd.yahoo.com with SMTP; 17 Apr 2007 15:47:29 -0000\r\nReceived: from [216.252.122.216] by n33.bullet.sp1.yahoo.com with NNFMP; 17 Apr 2007 15:47:01 -0000\r\nReceived: from [209.73.164.83] by t1.bullet.sp1.yahoo.com with NNFMP; 17 Apr 2007 15:47:01 -0000\r\nReceived: from [66.218.66.77] by t7.bullet.scd.yahoo.com with NNFMP; 17 Apr 2007 15:47:01 -0000\r\nDate: Tue, 17 Apr 2007 15:47:00 -0000\r\nTo: archive-crawler@yahoogroups.com\r\nMessage-ID: &lt;f02q5k+5rtr@...&gt;\r\nIn-Reply-To: &lt;461564CE.5040501@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:6:0:0\r\nFrom: &quot;anitabidari&quot; &lt;abidari@...&gt;\r\nSubject: Re: Out of Memory Error\r\nX-Yahoo-Group-Post: member; u=176845436; y=LfhNMeCi437j5ZhgNKuexR1CjCoBkF58bi-iaQbDsxsHBcYdSl4\r\nX-Yahoo-Profile: anitabidari\r\n\r\nHi Gordan\nI have run into the OOME again. This time I had the heap size set=\r\n to\n1G. I downloaded Java 1.6 per your suggestion, and below is the Stack\nT=\r\nrace that you requested.\n\nThe crawl ran for 11 days and progress stats are\n=\r\nDiscovered      Queued       Downloaded  mem-use-KB  Heap-use-KB   \nCongest=\r\nion\n23181561        11745868     11024191    979905     987584  1.0\nDo you =\r\nneed any other information such as my order.xml etc?\n\n04/16/2007 17:24:20 +=\r\n0000 SEVERE\norg.archive.crawler.framework.ToeThread seriousError Serious er=\r\nror\noccured trying to proces\ns &#39;unknown&#39;\n[ToeThread #79:\n -no CrawlURI-\n   =\r\n WAITING for 11m21s125ms\n    step: ABOUT_TO_GET_URI for 11m21s125ms\n    jav=\r\na.lang.Thread.getStackTrace(Thread.java:1426)\n    org.archive.crawler.frame=\r\nwork.ToeThread.reportTo(ToeThread.java:513)\n    org.archive.crawler.framewo=\r\nrk.ToeThread.reportTo(ToeThread.java:591)\n    org.archive.util.DevUtils.ext=\r\nraInfo(DevUtils.java:65)\n   \norg.archive.crawler.framework.ToeThread.seriou=\r\nsError(ToeThread.java:230)\n    org.archive.crawler.framework.ToeThread.run(=\r\nToeThread.java:174)\n]\n           timestamp  discovered      queued   downlo=\r\naded      \ndoc/s(avg)  KB/s(avg)   dl-failures   busy-thread   mem-use-\nKB =\r\n heap-size-KB   congestion   max-depth   avg-depth\n2007-04-16T17:24:20Z    =\r\n23181561    11745868     11024191      \n0.0(12.68)     0(182)        450518=\r\n             8       9769\n99        987584          1.0     3681209     146=\r\n8233\n\njava.lang.OutOfMemoryError: Java heap space\n&lt;Cleaner name=3D&quot;Cleaner-=\r\n1&quot;/&gt; caught exception:\njava.lang.NullPointerException\njava.lang.NullPointer=\r\nException\n        at java.util.TreeMap.getEntry(TreeMap.java:324)\n        a=\r\nt java.util.TreeMap.remove(TreeMap.java:580)\n        at java.util.TreeSet.r=\r\nemove(TreeSet.java:259)\n        at\ncom.sleepycat.je.cleaner.FileSelector.se=\r\nlectFileForCleaning(FileSelector.java:236)\n        at\ncom.sleepycat.je.clea=\r\nner.FileProcessor.doClean(FileProcessor.java:201)\n        at\ncom.sleepycat.=\r\nje.cleaner.FileProcessor.onWakeup(FileProcessor.java:143)\n        at\ncom.sl=\r\neepycat.je.utilint.DaemonThread.run(DaemonThread.java:189)\n        at java.=\r\nlang.Thread.run(Thread.java:619)\nContinuing\n\n\n--- In archive-crawler@yahoog=\r\nroups.com, Gordon Mohr &lt;gojomo@...&gt; wrote:\n&gt;\n&gt; anitabidari wrote:\n&gt; &gt; --- I=\r\nn archive-crawler@yahoogroups.com, Gordon Mohr &lt;gojomo@&gt; wrote:\n&gt; &gt;&gt; anitab=\r\nidari wrote:\n&gt; &gt;&gt;&gt; I have heretrix-1.10.2 running on a dual core Linux box =\r\nwith 2.8Ghz\n&gt; &gt;&gt;&gt; cpu&#39;s and 8G memory. Heretrix is often running into an Ou=\r\nt of Memory\n&gt; &gt;&gt;&gt; error. I dont recall seeing this error with an older vers=\r\nion of\n&gt; &gt;&gt;&gt; heretrix v1.8 that I had running for quite sometime.\n&gt; &gt;&gt;&gt;\n&gt; &gt;=\r\n&gt;&gt; I am running it on a 64 bit machine. And the version of java I am\n&gt; &gt;&gt;&gt; =\r\nusing is j2se_jdk_sun-1.5.0.07. I have the heap size set to 3Gigs\n&gt; &gt;&gt;&gt; (-X=\r\nmx option.). Does anyone have any ideas on how to resolve this?\n&gt; &gt;&gt;&gt; Shoul=\r\nd I try running it with a 64 bit JVM, so I can specify a larger\n&gt; &gt;&gt;&gt; heap?=\r\n \n&gt; &gt;&gt; Were you using the exact same JVM (esp. heap) and Heritrix (esp. \n&gt; =\r\n&gt;&gt; Processors and UriUniqFilter) options in 1.8? How long does it\ntake to \n=\r\n&gt; &gt;&gt; OOME?\n&gt; &gt;&gt;\n&gt; &gt;&gt; A problematic issue with our DNS library using an ever=\r\n-growing\n&gt; &gt; amount of \n&gt; &gt;&gt; cache memory was resolved between 1.8 and 1.10=\r\n.2, so I would have \n&gt; &gt;&gt; expected fewer OOMEs in long-running crawls, rath=\r\ner than more.\n&gt; &gt;&gt;\n&gt; &gt;&gt; Some thoughts:\n&gt; &gt;&gt;\n&gt; &gt;&gt; (1) Since you have 8GB, a =\r\n64bit JVM and larger heap could help --\n&gt; &gt; but it \n&gt; &gt;&gt; tends not help as =\r\nmuch as you think, because 64bit object\npointers mean \n&gt; &gt;&gt; it takes a larg=\r\ne heap to hold the same number of objects. (One\nestimate \n&gt; &gt;&gt; I&#39;ve seen no=\r\nt specific to Heritrix&#39;s heap: 40% larger heap needed\nfor \n&gt; &gt;&gt; same number=\r\n of 64bit JVM objects.)\n&gt; &gt;&gt;\n&gt; &gt;&gt; (2) Not all OOMEs are really caused by ma=\r\nin heap depletion -- some\n&gt; &gt; other \n&gt; &gt;&gt; resource/memory-space depletions =\r\nalso cause OOMEs. Some of these\nother \n&gt; &gt;&gt; depletions can be *worsened* by=\r\n growing a heap closer to an\naddressing \n&gt; &gt;&gt; ceiling. If you have a OOME t=\r\nhat&#39;s easy to reproduce quickly, you\nmay \n&gt; &gt;&gt; want to try running under a =\r\n1.6 JVM -- its OOME errors are more \n&gt; &gt;&gt; descriptive, and there are other =\r\noptions for examining the heap (see \n&gt; &gt;&gt;\n&gt; &gt;\nhttp://java.sun.com/javase/6/=\r\nwebnotes/trouble/TSG-VM/html/memleaks.html#gbywi)\n&gt; &gt; \n&gt; &gt;&gt; after the OOME.=\r\n\n&gt; &gt;&gt;\n&gt; &gt;&gt; - Gordon @ IA\n&gt; &gt;&gt;\n&gt; &gt;&gt;&gt; Yahoo! Groups Links\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt;\n&gt; &gt;&gt;&gt;\n&gt;=\r\n &gt; \n&gt; &gt; Hi Gordon\n&gt; &gt; Per your recommendation I have downloaded 1.6 JVM and=\r\n am running the\n&gt; &gt; crawl. 3G is a lot of memory. What could be causing Her=\r\netrix to take\n&gt; &gt; up more than 3G?\n&gt; \n&gt; I don&#39;t know; the last OOME problem=\r\n we had was related to the DNS issue \n&gt; fixed before 1.10.2.\n&gt; \n&gt; What is y=\r\nour crawl like -- number of seeds, breadth/scoping, etc. --\nand \n&gt; how soon=\r\n does it OOME (in time and number of URIs visited and\nscheduled)?\n&gt; \n&gt; - Go=\r\nrdon @ IA\n&gt;\n\n\n\n"}}