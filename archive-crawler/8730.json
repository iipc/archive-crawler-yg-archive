{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":325624130,"authorName":"Noah Levitt","from":"Noah Levitt &lt;nlevitt@...&gt;","profile":"nlevitt","replyTo":"LIST","senderId":"gtbgDh5w7W70bE47zcjjGsgIU3deZ5O85LLj1bslJSAoixvkooox02mNXn9yDYo43ZU2lUBjw099KjeSDPJ2JputEv96i0Mq","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] Umbra/RabbitMQ Problem","postDate":"1438288585","msgId":8730,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PENBQS16NzArRmZtbV9udkJVPVRvNjZLN2FBUTkxOGYwT0stWWpXUjh4TndKbXZNWTR3d0BtYWlsLmdtYWlsLmNvbT4=","inReplyToHeader":"PENZMVBSMDEwMU1CMTAwMUQ0ODg2NUFFNUE2RTE2QzQ4QkJGRTQ4QzBAQ1kxUFIwMTAxTUIxMDAxLnByb2QuZXhjaGFuZ2VsYWJzLmNvbT4=","referencesHeader":"PDU1OUE1ODJFLjMwMDAwMDlAZ214LmRlPgk8Q0FBLXo3MCtuTndDRnZBX3pfcV8zZ01vcHJSazNNTmR0M3dlU3FQS1BjZGtQUWpOODJBQG1haWwuZ21haWwuY29tPgk8NTU5QjRBM0EuNjAzMDYwOEBnbXguZGU+CTxDQUEtejcwSkxER3hvamNaNFF3S3NaRUpjY2Y5Z1d5c1RrUWpkcFZfaWdfZ21Cc01jNkFAbWFpbC5nbWFpbC5jb20+CTw1NTlDOUZCOC44MDkwMjA4QGdteC5kZT4JPENBQS16NzBLK2diMGtydkI1X29UcXFrZEJQR1Y1VG8tQz1pUGQtZmNOc0Q3WVExWlc0d0BtYWlsLmdtYWlsLmNvbT4JPDU1QTVDMzIwLjIwMDA2MDBAZ214LmRlPgk8Q1kxUFIwMTAxTUIxMDAxRDQ4ODY1QUU1QTZFMTZDNDhCQkZFNDhDMEBDWTFQUjAxMDFNQjEwMDEucHJvZC5leGNoYW5nZWxhYnMuY29tPg=="},"prevInTopic":8729,"nextInTopic":0,"prevInTime":8729,"nextInTime":8731,"topicId":8714,"numMessagesInTopic":11,"msgSnippet":"Hi Lauren, Yes you re exactly right about all of this. I wasn t sure where was most appropriate to make the declarations. Publishers know about exchanges and","rawEmail":"Return-Path: &lt;nlevitt@...&gt;\r\nX-Sender: nlevitt@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 17373 invoked by uid 102); 30 Jul 2015 20:36:27 -0000\r\nX-Received: from unknown (HELO mtaq3.grp.bf1.yahoo.com) (10.193.84.142)\n  by m1.grp.bf1.yahoo.com with SMTP; 30 Jul 2015 20:36:27 -0000\r\nX-Received: (qmail 1484 invoked from network); 30 Jul 2015 20:36:27 -0000\r\nX-Received: from unknown (HELO mta1005.groups.mail.ne1.yahoo.com) (98.138.100.120)\n  by mtaq3.grp.bf1.yahoo.com with SMTP; 30 Jul 2015 20:36:27 -0000\r\nX-Original-Return-Path: &lt;nlevitt@...&gt;\r\nX-Received-SPF: pass (domain of archive.org designates 207.241.224.6 as permitted sender)\r\nX-YMailISG: bFfSk1kWLDveye_BDzW4FjmsnfI._nKxSdnPOC5pxy2PlyRM\n ujgmqydLVIloRbpopkT_4BadYlae3GSJ6kwCCnXpn3kCiVUzbMtZdjsbd7kV\n yMS9IKkAqZSkDTDnftAHb3YP.L_7kvjJYdsquZ1rrZ50msXIda0VhbmGJAGU\n hb4OJdHrumZhYQJk4Haft6zgSNPpQOdA9ynYBlfmnSQ1_I3DPkLOMxEVAiQ6\n yT.LW8GrX9vtx0FB.r2prI0vjg3Qg2EZLJw9H.oO2nyY7tTMD2JxG3L9TkhV\n DH6Sf2FLJO3NRuwb_M2mIhQYrW9hEF9PVJugJq_85If0BVndCUBk1NQiSKpR\n aWuWlpnb6zmb_a0KVviOOI2adnlRgRFkmuyDSk81m.2XjVW6e0lZe3OsG4qn\n VlHdb2lSH0J1RPNyvEywSPV8ohA0eEAsKMWmYt0KcOtTTIyXHsA91XHzaxt3\n c38fzZ775FMQwFGHkX7.jvw59bA9KJ9B8yGJJ13c8.QcF4dZmZwPsD8cTndv\n nS3Q_I4vOJhYx0ORlq9oFNe1WVo.pApXsXnwn0v4u2itC9vBnz6CxsGYWEn4\n byjpvzHhxfWaUN3ldO0pIG4QMnSq2uB0OT8k4eKlUPqPrzqkOSNSb_8Ft3h8\n leAhAJI31nDOasD5d0QuQAJ1otXtYnzJlkkNpSNrj8e9D2waSX9z1eKpzXUi\n SAVE7dnFnbhHF8Pss_1YsDJHWjCH299zbqaBOqxlgm80mB3.2Q8e49gRsx3p\n mT6.y4w21BYS4VO73uM4W9VQtS6tAzmvyRWywWzyzxoRmamFEq2C2iMJf3T2\n Ef.cdy0FEvKSzleNOTYZUXxzFB7JD6cXQ_9Qxzz9bhOm0MNbOEEygkQPPfPs\n omXf4u_2mYABk3X4nazpP2rTD9_d1WlvGzXazTRngBgY1Y99yh872NwRQ3pz\n yZvc0d4kom1TqjFfVMmFAISj9knUdRfWnBvFInFgnzMo7jTbEpVt8NXQjieb\n X6UQgqyZ4yIo.tMru5UTmANepcMVfXC2gQ1duT5roVa.8YC1iU55pUSwYoaT\n q_DDJ0xw81U8FJCFVoRvw7GhsDqxJqV2LYRcj3ZOruaHISM3GWR1x0jN2AtS\n M9eIB6ZRTqW1Mzk6BktoY6pg7PoG1.i7xV_VLolll5ydasmHc2WRWHHczvuX\n Mhl2yJeu6taAX24B3apP1HAeO2nkYVJACiUSmfaB.14h4x14VMft_p6Q_nAr\n MsFIMtYICg8UmMsRjjPqdOWzr4Oal8ggjS_I65gqr1yg53adj.cE5.KP3GrN\n KsMaeIagz_nFd5ptqf3jfE.ODyZxNMPWzaZ8BYc3FatWEog9jh1lh9cibgIh\n wYapSG1FzKsYVGF8PP7cI2N66w_wfl5LJLihslpkMtLniCUCxDhwvJVHtKka\n T0jF_2.dTc5NVu5vMhTzidEpb4YyFoS8.xDHoJ9_yVYzAVfrLCcySUPjxdyA\n VcwBDcmkQDb_PJ2M8qQKfQ26jB7f26.Pcfm.40blDyZsijZVlnypOR4lNiOy\n bpDnbg--\r\nAuthentication-Results: mta1005.groups.mail.ne1.yahoo.com  from=archive.org; domainkeys=neutral (no sig);  from=archive.org; dkim=neutral (no sig)\r\nX-Received: from 127.0.0.1  (EHLO mail.archive.org) (207.241.224.6)\n  by mta1005.groups.mail.ne1.yahoo.com with SMTP; Thu, 30 Jul 2015 20:36:26 +0000\r\nX-Received: from mail.archive.org (localhost [127.0.0.1])\n\tby mail.archive.org (Postfix) with ESMTP id 3019DCA84\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Thu, 30 Jul 2015 20:36:26 +0000 (UTC)\r\nX-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on mail.archive.org\r\nX-Spam-Level: \r\nX-Spam-Status: No, score=-1.0 required=5.0 tests=ALL_TRUSTED,SHORTCIRCUIT,\n\tURIBL_BLOCKED autolearn=disabled version=3.4.0\r\nX-Received: from mail-ob0-f173.google.com (mail-ob0-f173.google.com [209.85.214.173])\n\t(using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))\n\t(No client certificate requested)\n\t(Authenticated sender: nlevitt@...)\n\tby mail.archive.org (Postfix) with ESMTPSA id F159EC8F8\n\tfor &lt;archive-crawler@yahoogroups.com&gt;; Thu, 30 Jul 2015 20:36:25 +0000 (UTC)\r\nX-Received: by obre1 with SMTP id e1so39629831obr.1\n        for &lt;archive-crawler@yahoogroups.com&gt;; Thu, 30 Jul 2015 13:36:25 -0700 (PDT)\r\nMIME-Version: 1.0\r\nX-Received: by 10.60.98.40 with SMTP id ef8mr49743641oeb.7.1438288585230; Thu,\n 30 Jul 2015 13:36:25 -0700 (PDT)\r\nX-Received: by 10.76.92.3 with HTTP; Thu, 30 Jul 2015 13:36:25 -0700 (PDT)\r\nIn-Reply-To: &lt;CY1PR0101MB1001D48865AE5A6E16C48BBFE48C0@...&gt;\r\nReferences: &lt;559A582E.3000009@...&gt;\n\t&lt;CAA-z70+nNwCFvA_z_q_3gMoprRk3MNdt3weSqPKPcdkPQjN82A@...&gt;\n\t&lt;559B4A3A.6030608@...&gt;\n\t&lt;CAA-z70JLDGxojcZ4QwKsZEJccf9gWysTkQjdpV_ig_gmBsMc6A@...&gt;\n\t&lt;559C9FB8.8090208@...&gt;\n\t&lt;CAA-z70K+gb0krvB5_oTqqkdBPGV5To-C=iPd-fcNsD7YQ1ZW4w@...&gt;\n\t&lt;55A5C320.2000600@...&gt;\n\t&lt;CY1PR0101MB1001D48865AE5A6E16C48BBFE48C0@...&gt;\r\nDate: Thu, 30 Jul 2015 13:36:25 -0700\r\nMessage-ID: &lt;CAA-z70+Ffmm_nvBU=To66K7aAQ918f0OK-YjWR8xNwJmvMY4ww@...&gt;\r\nTo: &quot;archive-crawler@yahoogroups.com&quot; &lt;archive-crawler@yahoogroups.com&gt;\r\nContent-Type: text/plain; charset=UTF-8\r\nContent-Transfer-Encoding: quoted-printable\r\nSubject: Re: [archive-crawler] Umbra/RabbitMQ Problem\r\nX-Yahoo-Group-Post: member; u=325624130; y=Qtz6bG3cmdAV2JKO3Ak9fGKW5RhtXtjAABJGkn2velUBpA\r\nX-Yahoo-Profile: nlevitt\r\nFrom: Noah Levitt &lt;nlevitt@...&gt;\r\n\r\nHi Lauren,\n\nYes you&#39;re exactly right about all of this. I wasn&#39;t sure where=\r\n was\nmost appropriate to make the declarations. Publishers know about\nexcha=\r\nnges and routing keys, and consumers know about exchanges and\nqueues. Neith=\r\ner needs to know about the queue binding. I guess both\nsides (umbra and her=\r\nitrix) should be proactive and set up everything\nthat might need to be set =\r\nup. I&#39;ll implement that when I get a chance.\nPull requests will make it hap=\r\npen sooner. :)\n\nNoah\n\n\nOn Wed, Jul 29, 2015 at 4:46 PM, &#39;Ko, Lauren&#39; lauren=\r\n.ko@...\n[archive-crawler] &lt;archive-crawler@yahoogroups.com&gt; wrote:\n&gt; Hi=\r\n Markus and Noah,\n&gt;\n&gt; After reading this thread and having been curious abo=\r\nut Heritrix with Umbra, I installed RabbitMQ and Umbra and configured Herit=\r\nrix with an AMQPPublishProcessor and an AMQPUrlReceiver as described. With =\r\n a fresh RabbitMQ with no queues and hadn&#39;t started Umbra yet, when I launc=\r\nhed the job I got this error:\n&gt;\n&gt; Jul 28, 2015 9:53:24 PM org.archive.crawl=\r\ner.frontier.AMQPUrlReceiver$StarterRestarter run\n&gt; SEVERE: problem starting=\r\n AMQP consumer (will try again after 30 seconds) (in thread &#39;AMQPUrlReceive=\r\nr-starter-restarter&#39;)\n&gt; java.io.IOException\n&gt;         at com.rabbitmq.clien=\r\nt.impl.AMQChannel.wrap(AMQChannel.java:106)\n&gt;         at com.rabbitmq.clien=\r\nt.impl.AMQChannel.wrap(AMQChannel.java:102)\n&gt;         at com.rabbitmq.clien=\r\nt.impl.AMQChannel.exnWrappingRpc(AMQChannel.java:124)\n&gt;         at com.rabb=\r\nitmq.client.impl.ChannelN.queueBind(ChannelN.java:825)\n&gt;         at com.rab=\r\nbitmq.client.impl.ChannelN.queueBind(ChannelN.java:840)\n&gt;         at com.ra=\r\nbbitmq.client.impl.ChannelN.queueBind(ChannelN.java:61)\n&gt;         at org.ar=\r\nchive.crawler.frontier.AMQPUrlReceiver$StarterRestarter.run(AMQPUrlReceiver=\r\n.java:128)\n&gt; Caused by: com.rabbitmq.client.ShutdownSignalException: channe=\r\nl error; reason: {#method&lt;channel.close&gt;(reply-code=3D404, reply-text=3DNOT=\r\n_FOUND - no exchange &#39;umbra&#39; in vhost &#39;/&#39;, class-id=3D50, method-id=3D20), =\r\nnull, &quot;&quot;}\n&gt;         at com.rabbitmq.utility.ValueOrException.getValue(Value=\r\nOrException.java:67)\n&gt;         at com.rabbitmq.utility.BlockingValueOrExcep=\r\ntion.uninterruptibleGetValue(BlockingValueOrException.java:33)\n&gt;         at=\r\n com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQCh=\r\nannel.java:343)\n&gt;         at com.rabbitmq.client.impl.AMQChannel.privateRpc=\r\n(AMQChannel.java:216)\n&gt;         at com.rabbitmq.client.impl.AMQChannel.exnW=\r\nrappingRpc(AMQChannel.java:118)\n&gt;         ... 4 more\n&gt; Caused by: com.rabbi=\r\ntmq.client.ShutdownSignalException: channel error; reason: {#method&lt;channel=\r\n.close&gt;(reply-code=3D404, reply-text=3DNOT_FOUND - no exchange &#39;umbra&#39; in v=\r\nhost &#39;/&#39;, class-id=3D50, method-id=3D20), null, &quot;&quot;}\n&gt;         at com.rabbit=\r\nmq.client.impl.ChannelN.asyncShutdown(ChannelN.java:474)\n&gt;         at com.r=\r\nabbitmq.client.impl.ChannelN.processAsync(ChannelN.java:315)\n&gt;         at c=\r\nom.rabbitmq.client.impl.AMQChannel.handleCompleteInboundCommand(AMQChannel.=\r\njava:144)\n&gt;         at com.rabbitmq.client.impl.AMQChannel.handleFrame(AMQC=\r\nhannel.java:91)\n&gt;         at com.rabbitmq.client.impl.AMQConnection$MainLoo=\r\np.run(AMQConnection.java:551)\n&gt;\n&gt; because no &quot;umbra&quot; exchange existed at th=\r\ne time of trying to start the consumer. These errors continue until the job=\r\n is unpaused and the queue is declared by the AMQPProducer publishing a mes=\r\nsage or when Umbra is started and declares the exchange. Should the exchang=\r\ne be declared in AMQPUrlReceiver to prevent these errors being thrown in su=\r\nch cases?\n&gt;\n&gt; Second, similar to Markus, I would see sentToAMQP in the craw=\r\nl log, but nothing was coming back. Looking at RabbitMQ I noticed the messa=\r\nges were being sent from Heritrix to the &quot;umbra&quot; exchange, but then they we=\r\nren&#39;t going to the queue according to the &quot;urls&quot; routing key given by Herit=\r\nrix. Looking at the &quot;urls&quot; queue that umbra had created, it didn&#39;t have a r=\r\nouting key affiliated with it. When I assigned the &quot;urls&quot; queue a routing k=\r\ney of &quot;urls&quot;, things started working and Heritrix started getting URLs from=\r\n Umbra.\n&gt;\n&gt; Lauren Ko\n&gt; UNT Libraries\n&gt;\n&gt; _________________________________=\r\n_______\n&gt; From: archive-crawler@yahoogroups.com [archive-crawler@yahoogroup=\r\ns.com]\n&gt; Sent: Tuesday, July 14, 2015 9:19 PM\n&gt; To: archive-crawler@yahoogr=\r\noups.com\n&gt; Subject: Re: [archive-crawler] Umbra/RabbitMQ Problem\n&gt;\n&gt; Hi Noa=\r\nh,\n&gt;\n&gt; I noticed that the used amqp library is for the rabbitmq version 3.2=\r\n.1.\n&gt; I changed my rabbitmq to that version and now I dont get these errors=\r\n anymore.\n&gt;\n&gt; I see in my heritrix logs that the AmqpReceiver was started, =\r\nis running and listening but I still get no answers from RabbitMQ.\n&gt; Strang=\r\ne ... but now I think too that the problem might be anything with rabbitmq.=\r\n I didnt configure anything different to the default except that I enabled =\r\nthe rabbitmq_management plugin\n&gt;\n&gt;\n&gt; Cheers,\n&gt; Markus\n&gt;\n&gt;\n&gt;\n&gt; Am 15.07.2015=\r\n um 03:04 schrieb Noah Levitt nlevitt@...&lt;mailto:nlevitt@...=\r\ng&gt; [archive-crawler]:\n&gt;\n&gt;\n&gt; Hello Markus,\n&gt;\n&gt; Sorry this slipped my mind un=\r\ntil now. I don&#39;t see anything wrong with\n&gt; your configuration. Is it possib=\r\nle your rabbitmq is overloaded? I&#39;m\n&gt; not sure what else to look at.\n&gt;\n&gt; No=\r\nah\n&gt;\n&gt; On Tue, Jul 7, 2015 at 8:57 PM, &#39;Markus.Mirsberger&#39;\n&gt; markus.mirsber=\r\nger@...&lt;mailto:markus.mirsberger@...&gt; [archive-crawler]\n&gt; &lt;archive-cr=\r\nawler@yahoogroups.com&gt;&lt;mailto:archive-crawler@yahoogroups.com&gt; wrote:\n&gt;&gt; [A=\r\nttachment(s) from Markus.Mirsberger included below]\n&gt;&gt;\n&gt;&gt; Hi Noah,\n&gt;&gt;\n&gt;&gt; I =\r\ndon&#39;t even have an own rabbitmq config as it seemed to work out of the box\n=\r\n&gt;&gt; with the default settings.\n&gt;&gt; I only activated the rabbitmq management p=\r\nlugin.\n&gt;&gt;\n&gt;&gt; I attached the crawler-beans.cxml for the specific crawl.\n&gt;&gt;\n&gt;=\r\n&gt;\n&gt;&gt; Thanks,\n&gt;&gt; Markus\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; Am 08.07.2015 um 03:40 schrieb Noah Levitt =\r\nnlevitt@...&lt;mailto:nlevitt@...&gt;\n&gt;&gt; [archive-crawler]:\n&gt;&gt;\n&gt;&gt;=\r\n\n&gt;&gt; Hello Markus,\n&gt;&gt;\n&gt;&gt; Not sure what&#39;s going on. I looked at the code wher=\r\ne your exception is\n&gt;&gt; coming from, and googled your stack trace, but didn&#39;=\r\nt find anything\n&gt;&gt; particularly helpful. If you want to send your full craw=\r\nler-beans.cxml I can\n&gt;&gt; take a look. There&#39;s nothing unusual in your rabbit=\r\nmq configuration is\n&gt;&gt; there?\n&gt;&gt;\n&gt;&gt; Noah\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; On Mon, Jul 6, 2015 at 8:=\r\n40 PM, &#39;Markus.Mirsberger&#39; markus.mirsberger@...&lt;mailto:markus.mirsberge=\r\nr@...&gt;\n&gt;&gt; [archive-crawler] &lt;archive-crawler@yahoogroups.com&gt;&lt;mailto:arc=\r\nhive-crawler@yahoogroups.com&gt; wrote:\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; Hi Noah,\n&gt;&gt;&gt;\n&gt;&gt;&gt; thank=\r\ns for the help. I configured my two beans similar to yours but the\n&gt;&gt;&gt; prob=\r\nlem persists.\n&gt;&gt;&gt; It looks like there is a connection timeout but the publi=\r\nsher can connect\n&gt;&gt;&gt; to the same Uri and send URLs to the queue.\n&gt;&gt;&gt;\n&gt;&gt;&gt; th=\r\nats my configuration:\n&gt;&gt;&gt;\n&gt;&gt;&gt; &lt;bean id=3D&quot;amqpPublishProcessor&quot;\n&gt;&gt;&gt; class=\r\n=3D&quot;org.archive.modules.AMQPPublishProcessor&quot;&gt;\n&gt;&gt;&gt; &lt;property name=3D&quot;amqpUr=\r\ni&quot;\n&gt;&gt;&gt; value=3D&quot;amqp://guest:guest@localhost:5672/%2f&quot;/&gt;\n&gt;&gt;&gt; &lt;property name=\r\n=3D&quot;clientId&quot; value=3D&quot;myqueue&quot;/&gt;\n&gt;&gt;&gt; &lt;/bean&gt;\n&gt;&gt;&gt; &lt;bean id=3D&quot;amqpUrlReceiv=\r\ner&quot;\n&gt;&gt;&gt; class=3D&quot;org.archive.crawler.frontier.AMQPUrlReceiver&quot;&gt;\n&gt;&gt;&gt; &lt;proper=\r\nty name=3D&quot;queueName&quot; value=3D&quot;myqueue&quot;/&gt;\n&gt;&gt;&gt; &lt;property name=3D&quot;amqpUri&quot;\n&gt;&gt;=\r\n&gt; value=3D&quot;amqp://guest:guest@localhost:5672/%2f&quot;/&gt;\n&gt;&gt;&gt; &lt;/bean&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;=\r\n and here is the stack trace of the exception:\n&gt;&gt;&gt;\n&gt;&gt;&gt; 2015-07-07 03:19:14.=\r\n660 SEVERE thread-248399\n&gt;&gt;&gt; org.archive.crawler.frontier.AMQPUrlReceiver$S=\r\ntarterRestarter.run() problem\n&gt;&gt;&gt; starting AMQP consumer (will try again af=\r\nter 30 seconds)\n&gt;&gt;&gt; java.io.IOException\n&gt;&gt;&gt; at com.rabbitmq.client.impl.AMQ=\r\nChannel.wrap(AMQChannel.java:106)\n&gt;&gt;&gt; at com.rabbitmq.client.impl.AMQChanne=\r\nl.wrap(AMQChannel.java:102)\n&gt;&gt;&gt; at\n&gt;&gt;&gt; com.rabbitmq.client.impl.AMQConnecti=\r\non.start(AMQConnection.java:378)\n&gt;&gt;&gt; at\n&gt;&gt;&gt; com.rabbitmq.client.ConnectionF=\r\nactory.newConnection(ConnectionFactory.java:516)\n&gt;&gt;&gt; at\n&gt;&gt;&gt; com.rabbitmq.cl=\r\nient.ConnectionFactory.newConnection(ConnectionFactory.java:533)\n&gt;&gt;&gt; at\n&gt;&gt;&gt;=\r\n org.archive.crawler.frontier.AMQPUrlReceiver.connection(AMQPUrlReceiver.ja=\r\nva:190)\n&gt;&gt;&gt; at\n&gt;&gt;&gt; org.archive.crawler.frontier.AMQPUrlReceiver.channel(AMQ=\r\nPUrlReceiver.java:203)\n&gt;&gt;&gt; at\n&gt;&gt;&gt; org.archive.crawler.frontier.AMQPUrlRecei=\r\nver$StarterRestarter.run(AMQPUrlReceiver.java:119)\n&gt;&gt;&gt; Caused by: com.rabbi=\r\ntmq.client.ShutdownSignalException: connection error;\n&gt;&gt;&gt; reason: java.net.=\r\nSocketTimeoutException: Timeout during Connection\n&gt;&gt;&gt; negotiation\n&gt;&gt;&gt; at\n&gt;&gt;=\r\n&gt; com.rabbitmq.utility.ValueOrException.getValue(ValueOrException.java:67)\n=\r\n&gt;&gt;&gt; at\n&gt;&gt;&gt; com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGet=\r\nValue(BlockingValueOrException.java:33)\n&gt;&gt;&gt; at\n&gt;&gt;&gt; com.rabbitmq.client.impl=\r\n.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:343)\n&gt;&gt;&gt; at\n&gt;&gt;=\r\n&gt; com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:321)\n&gt;&gt;&gt; =\r\n... 5 more\n&gt;&gt;&gt; Caused by: java.net.SocketTimeoutException: Timeout during C=\r\nonnection\n&gt;&gt;&gt; negotiation\n&gt;&gt;&gt; at\n&gt;&gt;&gt; com.rabbitmq.client.impl.AMQConnection=\r\n.handleSocketTimeout(AMQConnection.java:584)\n&gt;&gt;&gt; at\n&gt;&gt;&gt; com.rabbitmq.client=\r\n.impl.AMQConnection.access$500(AMQConnection.java:63)\n&gt;&gt;&gt; at\n&gt;&gt;&gt; com.rabbit=\r\nmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:559)\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;=\r\n&gt;&gt; Thanks,\n&gt;&gt;&gt; Markus\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; Am 07.07.2015 um 07:24 schrieb Noah L=\r\nevitt nlevitt@...&lt;mailto:nlevitt@...&gt;\n&gt;&gt;&gt; [archive-crawler]=\r\n:\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; Hello Markus,\n&gt;&gt;&gt;\n&gt;&gt;&gt; There is something that\n&gt;&gt;&gt; https://sbf=\r\norge.org/display/NAS/Integrating+Umbra+And+Heritrix+3 neglects to\n&gt;&gt;&gt; menti=\r\non that might explain the problem you&#39;re seeing. AMPQUrlReceiver needs\n&gt;&gt;&gt; =\r\nto be configured with a &quot;queueName&quot; that matches the clientId set on\n&gt;&gt;&gt; AM=\r\nQPPublishProcessor.\n&gt;&gt;&gt;\n&gt;&gt;&gt; Here is an example of the relevant configuratio=\r\nn from an archive-it crawl\n&gt;&gt;&gt; job. Our shouldProcessRule sends only seeds =\r\nto umbra. There are reasons for\n&gt;&gt;&gt; the particular way it works which I can=\r\n explain if anyone is wondering. :)\n&gt;&gt;&gt; But the important thing to be aware=\r\n of is that the shouldProcessRule can be\n&gt;&gt;&gt; used to limit the umbra treatm=\r\nent to the urls of your choice.\n&gt;&gt;&gt;\n&gt;&gt;&gt; &lt;bean id=3D&quot;amqpUrlReceiver&quot;\n&gt;&gt;&gt; cl=\r\nass=3D&quot;org.archive.crawler.frontier.AMQPUrlReceiver&quot;&gt;\n&gt;&gt;&gt; &lt;property name=3D=\r\n&quot;queueName&quot;\n&gt;&gt;&gt; value=3D&quot;archiveit.prod.9876-20150704232858960&quot;/&gt;\n&gt;&gt;&gt; &lt;prop=\r\nerty name=3D&quot;amqpUri&quot;\n&gt;&gt;&gt; value=3D&quot;amqp://guest:guest@localhost:5672/%2f&quot;/&gt;=\r\n\n&gt;&gt;&gt; &lt;/bean&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; &lt;bean id=3D&quot;amqpPublishProcessor&quot;\n&gt;&gt;&gt; class=3D&quot;org.arc=\r\nhive.modules.AMQPPublishProcessor&quot;&gt;\n&gt;&gt;&gt; &lt;property name=3D&quot;amqpUri&quot;\n&gt;&gt;&gt; valu=\r\ne=3D&quot;amqp://guest:guest@localhost:5672/%2f&quot;/&gt;\n&gt;&gt;&gt; &lt;property name=3D&quot;clientI=\r\nd&quot;\n&gt;&gt;&gt; value=3D&quot;archiveit.prod.9876-20150704232858960&quot;/&gt;\n&gt;&gt;&gt; &lt;property name=\r\n=3D&quot;shouldProcessRule&quot;&gt;\n&gt;&gt;&gt; &lt;bean\n&gt;&gt;&gt; class=3D&quot;org.archive.modules.decideru=\r\nles.ExpressionDecideRule&quot;&gt;\n&gt;&gt;&gt; &lt;property name=3D&quot;decision&quot; value=3D&quot;REJECT&quot;=\r\n/&gt;\n&gt;&gt;&gt; &lt;property name=3D&quot;groovyExpression&quot;\n&gt;&gt;&gt; value=3D&quot;!(curi.via =3D=3D n=\r\null && (curi.hasBeenLinkExtracted() ||\n&gt;&gt;&gt; (curi.getFetchStatus() &gt;=3D 300 =\r\n&& curi.getFetchStatus() &lt;\n&gt;&gt;&gt; 400)))&quot;/&gt;\n&gt;&gt;&gt; &lt;/bean&gt;\n&gt;&gt;&gt; &lt;/property&gt;\n&gt;&gt;&gt; &lt;/=\r\nbean&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; If the problem persists, please send the full stack trace.\n&gt;&gt;=\r\n&gt;\n&gt;&gt;&gt; Noah\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; On Mon, Jul 6, 2015 at 3:27 AM, &#39;Markus.Mirsberger&#39;\n=\r\n&gt;&gt;&gt; markus.mirsberger@...&lt;mailto:markus.mirsberger@...&gt; [archive-craw=\r\nler] &lt;archive-crawler@yahoogroups.com&gt;&lt;mailto:archive-crawler@yahoogroups.c=\r\nom&gt;\n&gt;&gt;&gt; wrote:\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; Hi,\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; I am trying to crawl websi=\r\ntes through Umbra / RabbitMQ to get more URLs\n&gt;&gt;&gt;&gt; generated by JS.\n&gt;&gt;&gt;&gt; I =\r\nset up everything as it is described here:\n&gt;&gt;&gt;&gt; https://sbforge.org/display=\r\n/NAS/Integrating+Umbra+And+Heritrix+3\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; I can see in my crawl logs =\r\nthat the URLs are beeing sent to\n&gt;&gt;&gt;&gt; Umbra/RabbitMQ because of the Status =\r\nsentToAMQP\n&gt;&gt;&gt;&gt; I think this means that so far my Requests are successfully=\r\n sent .....I\n&gt;&gt;&gt;&gt; can see the requests in the RabbitMQ Webadmin as well.\n&gt;&gt;=\r\n&gt;&gt;\n&gt;&gt;&gt;&gt; The problem is that I can not see anything comming back from\n&gt;&gt;&gt;&gt; U=\r\nmbra/RabbitMQ ..... the documentation says that I should see URLs with the\n=\r\n&gt;&gt;&gt;&gt; status received FromAMQP. This doesnt happen but instead I get this in=\r\n my\n&gt;&gt;&gt;&gt; job logs:\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; SEVERE problem starting AMQP consumer (will tr=\r\ny again after 30 seconds)\n&gt;&gt;&gt;&gt; (in thread &#39;AMQPUrlReceiver-starter-restarte=\r\nr&#39;)\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; My logfile from rabbitmq says this:\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; =3DINFO REPORT=\r\n=3D=3D=3D=3D 6-Jul-2015::12:24:41 =3D=3D=3D\n&gt;&gt;&gt;&gt; accepting AMQP connection =\r\n&lt;0.15717.1733&gt; (127.0.0.1:45721 -&gt;\n&gt;&gt;&gt;&gt; 127.0.0.1:5672)\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; =3DINFO R=\r\nEPORT=3D=3D=3D=3D 6-Jul-2015::12:24:45 =3D=3D=3D\n&gt;&gt;&gt;&gt; accepting AMQP connec=\r\ntion &lt;0.15762.1733&gt; (127.0.0.1:45724 -&gt;\n&gt;&gt;&gt;&gt; 127.0.0.1:5672)\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; =3DI=\r\nNFO REPORT=3D=3D=3D=3D 6-Jul-2015::12:25:21 =3D=3D=3D\n&gt;&gt;&gt;&gt; closing AMQP con=\r\nnection &lt;0.15762.1733&gt; (127.0.0.1:45724 -&gt;\n&gt;&gt;&gt;&gt; 127.0.0.1:5672)\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; =\r\n=3DINFO REPORT=3D=3D=3D=3D 6-Jul-2015::12:25:21 =3D=3D=3D\n&gt;&gt;&gt;&gt; closing AMQP=\r\n connection &lt;0.15717.1733&gt; (127.0.0.1:45721 -&gt;\n&gt;&gt;&gt;&gt; 127.0.0.1:5672)\n&gt;&gt;&gt;&gt;\n&gt;&gt;=\r\n&gt;&gt;\n&gt;&gt;&gt;&gt; As you can see rabbitmq is acception 2 connections from heritrix an=\r\nd when\n&gt;&gt;&gt;&gt; I finish the crawl both are closed.\n&gt;&gt;&gt;&gt; I think they are used =\r\nto send the URLs. After acception the connections\n&gt;&gt;&gt;&gt; and some seconds the=\r\n &quot;AMQP consumer&quot; problem occours and keeps comming every\n&gt;&gt;&gt;&gt; 30 seconds as=\r\n the AMQPUrlReceiver tries to start a consumer.\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; Does anyone have =\r\nan idea what might be the problem? Did I miss anything\n&gt;&gt;&gt;&gt; which wasn&#39;t de=\r\nscribed in the howto above?\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; Thanks,\n&gt;&gt;&gt;&gt; Markus\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;=\r\n&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; --------------------------=\r\n----------\n&gt;\n&gt; ------------------------------------\n&gt;\n&gt;\n&gt; -----------------=\r\n-------------------\n&gt;\n&gt; Yahoo Groups Links\n&gt;\n&gt;\n&gt;\n\n"}}