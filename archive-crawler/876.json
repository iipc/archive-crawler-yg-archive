{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":6903103,"authorName":"Tom Emerson","from":"Tom Emerson &lt;Tree@...&gt;","profile":"tree02139","replyTo":"LIST","senderId":"i3fWMkjVpaxrDlQVayuNiWqTkQVBhYyD35QMW9mj_7N9vH1_1eo2R3DDHtsoYL66KojXtqI-H06dY4_5P0nrW3RKpueaIr8","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [archive-crawler] Re: Character code conversion","postDate":"1093450064","msgId":876,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDE2Njg0LjQ3NDQwLjQzNzAxNC4xNjI2OTFAdGlwaGFyZXMuYmFzaXN0ZWNoLm5ldD4=","inReplyToHeader":"PGNnaTdpZCs2OGtsQGVHcm91cHMuY29tPg==","referencesHeader":"PDE2Njg0LjMxNDgyLjkyNzE2Ny40MzE4MjBAdGlwaGFyZXMuYmFzaXN0ZWNoLm5ldD4JPGNnaTdpZCs2OGtsQGVHcm91cHMuY29tPg=="},"prevInTopic":874,"nextInTopic":882,"prevInTime":875,"nextInTime":877,"topicId":872,"numMessagesInTopic":6,"msgSnippet":"... The short answer is that this isn t easy to do reliably: 0) Presumably you will do this transcoding in the ARCWriter. 1) You only want to apply the","rawEmail":"Return-Path: &lt;Tree@...&gt;\r\nX-Sender: Tree@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nReceived: (qmail 59711 invoked from network); 25 Aug 2004 16:08:06 -0000\r\nReceived: from unknown (66.218.66.166)\n  by m25.grp.scd.yahoo.com with QMQP; 25 Aug 2004 16:08:06 -0000\r\nReceived: from unknown (HELO mailserver.basistech.com) (199.88.205.4)\n  by mta5.grp.scd.yahoo.com with SMTP; 25 Aug 2004 16:08:06 -0000\r\nReceived: from postfix.basistech.com ([10.1.3.65] RDNS failed) by mailserver.basistech.com with Microsoft SMTPSVC(6.0.3790.0);\n\t Wed, 25 Aug 2004 12:07:44 -0400\r\nReceived: by postfix.basistech.com (Postfix, from userid 5007)\n\tid 915232CD2AB; Wed, 25 Aug 2004 12:07:44 -0400 (EDT)\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=us-ascii\r\nContent-Transfer-Encoding: 7bit\r\nMessage-ID: &lt;16684.47440.437014.162691@...&gt;\r\nDate: Wed, 25 Aug 2004 12:07:44 -0400\r\nTo: archive-crawler@yahoogroups.com\r\nIn-Reply-To: &lt;cgi7id+68kl@...&gt;\r\nReferences: &lt;16684.31482.927167.431820@...&gt;\n\t&lt;cgi7id+68kl@...&gt;\r\nX-Mailer: VM 7.18 under Emacs 21.2.1\r\nReturn-Path: tree@...\r\nX-OriginalArrivalTime: 25 Aug 2004 16:07:44.0623 (UTC) FILETIME=[A80F17F0:01C48ABD]\r\nX-eGroups-Remote-IP: 199.88.205.4\r\nFrom: Tom Emerson &lt;Tree@...&gt;\r\nReply-To: tree@...\r\nSubject: Re: [archive-crawler] Re: Character code conversion\r\nX-Yahoo-Group-Post: member; u=6903103\r\nX-Yahoo-Profile: tree02139\r\n\r\ncrawlerobo writes:\n&gt; I use Redhat7.3 and Heritrix 1.0.0\n&gt; I want to unify all Japanese in an ARC file by EUC_JP.\n\nThe short answer is that this isn&#39;t easy to do reliably:\n\n0) Presumably you will do this transcoding in the ARCWriter.\n\n1) You only want to apply the transformation to content containing\n   Japanese text. This means that you first need to determine which\n   content types you will make this transformation to. Checking\n   content type of the curi is the first step: minimally look for\n   text/html, otherwise look for text/* or other more specific types.\n\n2) Once you are looking at the right type of document, you need to\n   determine what the encoding of the document actually is. It may\n   already be in EUC-JP. It may be in Shift JIS. It may be in\n   ISO-2022-JP. It may not even be in Japanese. If it is in English,\n   no problem, unless there are accented characters. You can try to\n   determine the declared encoding by looking for a charset\n   declaration in the Content-Type header, whether sent by the server\n   or in an HTTP-EQUIV block. But that sometimes lies: it&#39;s not\n   uncommon to see a file declared to be CP1252 that is really CP932\n   (i.e., Microsoft&#39;s Shift JIS variant). Or it is common to find that\n   there is no declared character set.\n\n   Of course this is a non-issue if you know that all files you are\n   crawling are encoded in Shift JIS.\n\n   You may or may not want to convert HTML entities before\n   transcoding, e.g., &#26481;&#20140;.\n\n   When attempting to detect the language of the document, beware of\n   markup.\n\n3) You should still sniff the first few bytes of the document. In my\n   crawls I often see items coming back as &quot;text/html&quot; that are really\n   GIFs.\n\n4) If you do the transcoding in the ARC writer, are you going to\n   patch-up any charset declarations in the HTTP-EQUIV Content-Type,\n   if available? Browsers get confused if the document says its in\n   Shift JIS but is really encoded in EUC-JP.\n\nIf you want to just go ahead and try it, you can use the classes in\njava.nio.charset to convert from Shift JIS to EUC, pivoting through\nUnicode. Or you can use the toolkit you mentioned in your original\nmessage, or ICU4J, or just write your own: going from Shift JIS to\nEUC-JP can be done quite easily.\n\n    -tree\n\n-- \nTom Emerson                                          Basis Technology Corp.\nSoftware Architect                                 http://www.basistech.com\n  &quot;Beware the lollipop of mediocrity: lick it once and you suck forever&quot;\n\n"}}