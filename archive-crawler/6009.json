{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":413122819,"authorName":"Nicolas Giraud","from":"Nicolas Giraud &lt;nikokode@...&gt;","replyTo":"LIST","senderId":"PS9mEPxLkR_wlUhzRQW7VChvV7Ve0ud_uFQeFkD9Hk4--ny8Nx3Ncz_9IR4kB6bFDggWNpPGwkUquXzG19c1pLUrml0XW4N2v00","spamInfo":{"isSpam":false,"reason":"12"},"subject":"QuotaEnforcer and object limit","postDate":"1251911053","msgId":6009,"canDelete":false,"contentTrasformed":false,"systemMessage":true,"headers":{"messageIdInHeader":"PDE1Y2VlYWI1MDkwOTAyMTAwNHIyNjEyYWUwMHE1OTIxYjdkODQ2NWFjYjZkQG1haWwuZ21haWwuY29tPg=="},"prevInTopic":0,"nextInTopic":6014,"prevInTime":6008,"nextInTime":6010,"topicId":6009,"numMessagesInTopic":2,"msgSnippet":"Hi, I m trying to have queues retire when a certain object count has been reached for the CrawlURI s domain. I have configured the crawl to have one queue per","rawEmail":"Return-Path: &lt;nikokode@...&gt;\r\nReceived: (qmail 63411 invoked from network); 2 Sep 2009 17:14:38 -0000\r\nReceived: from unknown (69.147.108.201)\n  by m3.grp.re1.yahoo.com with QMQP; 2 Sep 2009 17:14:38 -0000\r\nReceived: from unknown (HELO n44d.bullet.mail.sp1.yahoo.com) (66.163.169.158)\n  by mta2.grp.re1.yahoo.com with SMTP; 2 Sep 2009 17:14:38 -0000\r\nDKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoogroups.com; s=lima; t=1251911630; bh=5y5R5b8RCDidJ0dAjluzRjDVrm5R96JhcCA36zaxD1E=; h=Received:Received:X-Sender:X-Apparently-To:X-Received:X-Received:X-Received:X-Received:MIME-Version:X-Received:Date:Message-ID:To:Content-Type:X-Originating-IP:X-eGroups-Msg-Info:From:Subject:X-Yahoo-Group-Post:X-YGroups-SubInfo:Sender:X-Yahoo-Newman-Property:X-eGroups-Approved-By:X-eGroups-Auth; b=YOMP38rX4dSUjyUDf03FFrusWE9d0LB7ob2uAoKALTknIiO6fa+b5fnTC9qj4VYbsi+S0DtbcTT+z0BpKkwBAMHcYDKW8ONU6A8IZDWenEvKyf/1FRDfwMWReuXAiGYY\r\nReceived: from [69.147.65.150] by n44.bullet.mail.sp1.yahoo.com with NNFMP; 02 Sep 2009 17:13:50 -0000\r\nReceived: from [98.137.34.184] by t7.bullet.mail.sp1.yahoo.com with NNFMP; 02 Sep 2009 17:13:50 -0000\r\nX-Sender: nikokode@...\r\nX-Apparently-To: archive-crawler@yahoogroups.com\r\nX-Received: (qmail 33942 invoked from network); 2 Sep 2009 17:04:15 -0000\r\nX-Received: from unknown (98.137.34.44)\n  by m3.grp.sp2.yahoo.com with QMQP; 2 Sep 2009 17:04:15 -0000\r\nX-Received: from unknown (HELO fg-out-1718.google.com) (72.14.220.153)\n  by mta1.grp.sp2.yahoo.com with SMTP; 2 Sep 2009 17:04:15 -0000\r\nX-Received: by fg-out-1718.google.com with SMTP id e21so1094861fga.10\n        for &lt;archive-crawler@yahoogroups.com&gt;; Wed, 02 Sep 2009 10:04:13 -0700 (PDT)\r\nMIME-Version: 1.0\r\nX-Received: by 10.86.12.35 with SMTP id 35mr2840177fgl.20.1251911053429; Wed, 02 \n\tSep 2009 10:04:13 -0700 (PDT)\r\nDate: Wed, 2 Sep 2009 19:04:13 +0200\r\nMessage-ID: &lt;15ceeab50909021004r2612ae00q5921b7d8465acb6d@...&gt;\r\nTo: archive-crawler@yahoogroups.com\r\nContent-Type: multipart/alternative; boundary=00c09ffb56b8a14f0204729b419e\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Nicolas Giraud &lt;nikokode@...&gt;\r\nSubject: QuotaEnforcer and object limit\r\nX-Yahoo-Group-Post: member; u=413122819\r\nX-YGroups-SubInfo: t=0;f=0;g=none;\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Approved-By: gojomo &lt;gojomo@...&gt; via web; 02 Sep 2009 17:13:48 -0000\r\n\r\n\r\n--00c09ffb56b8a14f0204729b419e\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nHi,\n\nI&#39;m trying to have queues retire when a certain object count has been\n=\r\nreached for the CrawlURI&#39;s domain. I have configured the crawl to have one\n=\r\nqueue per domain. So the way I know about is to set the queue-total-budget\n=\r\nparameter of the frontier to the limit I want. Here&#39;s my frontier\nconfigura=\r\ntion:\n\n&lt;newObject name=3D&quot;frontier&quot; class=3D&quot;org.archive.crawler.frontier.B=\r\ndbFrontier&quot;&gt;\n      &lt;float name=3D&quot;delay-factor&quot;&gt;2.0&lt;/float&gt;\n      &lt;integer =\r\nname=3D&quot;max-delay-ms&quot;&gt;10000&lt;/integer&gt;\n      &lt;integer name=3D&quot;min-delay-ms&quot;&gt;=\r\n2000&lt;/integer&gt;\n      &lt;integer name=3D&quot;max-retries&quot;&gt;10&lt;/integer&gt;\n      &lt;long=\r\n name=3D&quot;retry-delay-seconds&quot;&gt;60&lt;/long&gt;\n      &lt;integer name=3D&quot;preference-e=\r\nmbed-hops&quot;&gt;1&lt;/integer&gt;\n      &lt;integer name=3D&quot;total-bandwidth-usage-KB-sec&quot;=\r\n&gt;1500&lt;/integer&gt;\n      &lt;integer name=3D&quot;max-per-host-bandwidth-usage-KB-sec&quot;=\r\n&gt;500&lt;/integer&gt;\n      &lt;string\nname=3D&quot;queue-assignment-policy&quot;&gt;dk.netarkivet=\r\n.harvester.harvesting.DomainnameQueueAssignmentPolicy&lt;/string&gt;\n      &lt;strin=\r\ng name=3D&quot;force-queue-assignment&quot;/&gt;\n      &lt;boolean name=3D&quot;pause-at-start&quot;&gt;=\r\nfalse&lt;/boolean&gt;\n      &lt;boolean name=3D&quot;pause-at-finish&quot;&gt;false&lt;/boolean&gt;\n   =\r\n   &lt;boolean name=3D&quot;source-tag-seeds&quot;&gt;false&lt;/boolean&gt;\n      &lt;boolean name=\r\n=3D&quot;recovery-log-enabled&quot;&gt;false&lt;/boolean&gt;\n      &lt;boolean name=3D&quot;hold-queue=\r\ns&quot;&gt;true&lt;/boolean&gt;\n      &lt;integer name=3D&quot;balance-replenish-amount&quot;&gt;500&lt;/int=\r\neger&gt;\n      &lt;integer name=3D&quot;error-penalty-amount&quot;&gt;100&lt;/integer&gt;\n      &lt;lon=\r\ng name=3D&quot;queue-total-budget&quot;&gt;50&lt;/long&gt;\n      &lt;string\nname=3D&quot;cost-policy&quot;&gt;=\r\norg.archive.crawler.frontier.UnitCostAssignmentPolicy&lt;/string&gt;\n      &lt;long =\r\nname=3D&quot;snooze-deactivate-ms&quot;&gt;2000&lt;/long&gt;\n      &lt;integer name=3D&quot;target-rea=\r\ndy-backlog&quot;&gt;50&lt;/integer&gt;\n      &lt;string\nname=3D&quot;uri-included-structure&quot;&gt;org.=\r\narchive.crawler.util.BdbUriUniqFilter&lt;/string&gt;\n    &lt;/newObject&gt;\n\nSome param=\r\neters are pretty low, this is a config for a dev test machine.\n\nI also use =\r\na QuotaEnforcer pre-fetch processor :\n\n&lt;newObject name=3D&quot;QuotaEnforcer&quot;\ncl=\r\nass=3D&quot;org.archive.crawler.prefetch.QuotaEnforcer&quot;&gt;\n        &lt;boolean name=\r\n=3D&quot;force-retire&quot;&gt;false&lt;/boolean&gt;\n        &lt;boolean name=3D&quot;enabled&quot;&gt;true&lt;/b=\r\noolean&gt;\n        &lt;newObject name=3D&quot;QuotaEnforcer#decide-rules&quot;\nclass=3D&quot;org=\r\n.archive.crawler.deciderules.DecideRuleSequence&quot;&gt;\n          &lt;map name=3D&quot;ru=\r\nles&quot;/&gt;\n        &lt;/newObject&gt;\n        &lt;long name=3D&quot;server-max-fetch-successe=\r\ns&quot;&gt;-1&lt;/long&gt;\n        &lt;long name=3D&quot;server-max-success-kb&quot;&gt;-1&lt;/long&gt;\n       =\r\n &lt;long name=3D&quot;server-max-fetch-responses&quot;&gt;-1&lt;/long&gt;\n        &lt;long name=3D&quot;=\r\nserver-max-all-kb&quot;&gt;-1&lt;/long&gt;\n        &lt;long name=3D&quot;host-max-fetch-successes=\r\n&quot;&gt;-1&lt;/long&gt;\n        &lt;long name=3D&quot;host-max-success-kb&quot;&gt;-1&lt;/long&gt;\n        &lt;l=\r\nong name=3D&quot;host-max-fetch-responses&quot;&gt;-1&lt;/long&gt;\n        &lt;long name=3D&quot;host-=\r\nmax-all-kb&quot;&gt;-1&lt;/long&gt;\n        &lt;long name=3D&quot;group-max-fetch-successes&quot;&gt;-1&lt;/=\r\nlong&gt;\n        &lt;long name=3D&quot;group-max-success-kb&quot;&gt;-1&lt;/long&gt;\n        &lt;long n=\r\name=3D&quot;group-max-fetch-responses&quot;&gt;-1&lt;/long&gt;\n        &lt;long name=3D&quot;group-max=\r\n-all-kb&quot;&gt;[limit in kB]&lt;/long&gt;\n      &lt;/newObject&gt;\n\nSo I wanted to try to als=\r\no put the object limit in the QuotaEnforcer\nconfiguration, and made the fol=\r\nlowing changes to my config:\n\n- queue-total-budget =3D -1\n- group-max-fetch=\r\n-responses =3D my object count limit\n\nThis doesn&#39;t seem to work, the crawls=\r\n go beyond the configured limit, so\nthere must be something wrong in my con=\r\nfig. I&#39;ve tried to set the\nforce-retire parameter of QuotaEnforcer to &quot;true=\r\n&quot;, to no avail.\n\nAny suggestions, advice is more than welcome.\n\nBest regard=\r\ns,\n\nNicolas Giraud\n--------------------------------------------------------=\r\n-------------------------------------\nD=E9veloppeur Archives du Web - Web A=\r\nrchiving Developper\nBiblioth=E8que Nationale de France - National Library o=\r\nf France\n------------------------------------------------------------------=\r\n---------------------------\n\r\n--00c09ffb56b8a14f0204729b419e\r\nContent-Type: text/html; charset=ISO-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nHi,&lt;br&gt;&lt;br&gt;I&#39;m trying to have queues retire when a certain object count=\r\n has been reached for the CrawlURI&#39;s domain. I have configured the craw=\r\nl to have one queue per domain. So the way I know about is to set the queue=\r\n-total-budget parameter of the frontier to the limit I want. Here&#39;s my =\r\nfrontier configuration:&lt;br&gt;\n&lt;br&gt;&lt;newObject name=3D&quot;frontier&quot; c=\r\nlass=3D&quot;org.archive.crawler.frontier.BdbFrontier&quot;&gt;&lt;br&gt;=A0=A0=\r\n=A0=A0=A0 &lt;float name=3D&quot;delay-factor&quot;&gt;2.0&lt;/float&gt;&lt;br=\r\n&gt;=A0=A0=A0=A0=A0 &lt;integer name=3D&quot;max-delay-ms&quot;&gt;10000&lt;/i=\r\nnteger&gt;&lt;br&gt;\n=A0=A0=A0=A0=A0 &lt;integer name=3D&quot;min-delay-ms&quot;&=\r\ngt;2000&lt;/integer&gt;&lt;br&gt;=A0=A0=A0=A0=A0 &lt;integer name=3D&quot;max-ret=\r\nries&quot;&gt;10&lt;/integer&gt;&lt;br&gt;=A0=A0=A0=A0=A0 &lt;long name=3D&quot;r=\r\netry-delay-seconds&quot;&gt;60&lt;/long&gt;&lt;br&gt;\n=A0=A0=A0=A0=A0 &lt;integer=\r\n name=3D&quot;preference-embed-hops&quot;&gt;1&lt;/integer&gt;&lt;br&gt;=A0=A0=A0=\r\n=A0=A0 &lt;integer name=3D&quot;total-bandwidth-usage-KB-sec&quot;&gt;1500&=\r\nlt;/integer&gt;&lt;br&gt;=A0=A0=A0=A0=A0 &lt;integer name=3D&quot;max-per-host-ba=\r\nndwidth-usage-KB-sec&quot;&gt;500&lt;/integer&gt;&lt;br&gt;\n=A0=A0=A0=A0=A0 &lt;s=\r\ntring name=3D&quot;queue-assignment-policy&quot;&gt;dk.netarkivet.harvester=\r\n.harvesting.DomainnameQueueAssignmentPolicy&lt;/string&gt;&lt;br&gt;=A0=A0=A0=A0=\r\n=A0 &lt;string name=3D&quot;force-queue-assignment&quot;/&gt;&lt;br&gt;=A0=A0=A0=\r\n=A0=A0 &lt;boolean name=3D&quot;pause-at-start&quot;&gt;false&lt;/boolean&g=\r\nt;&lt;br&gt;\n=A0=A0=A0=A0=A0 &lt;boolean name=3D&quot;pause-at-finish&quot;&gt;fa=\r\nlse&lt;/boolean&gt;&lt;br&gt;=A0=A0=A0=A0=A0 &lt;boolean name=3D&quot;source-tag-=\r\nseeds&quot;&gt;false&lt;/boolean&gt;&lt;br&gt;=A0=A0=A0=A0=A0 &lt;boolean name=3D=\r\n&quot;recovery-log-enabled&quot;&gt;false&lt;/boolean&gt;&lt;br&gt;\n=A0=A0=A0=A0=\r\n=A0 &lt;boolean name=3D&quot;hold-queues&quot;&gt;true&lt;/boolean&gt;&lt;br&gt;=\r\n=A0=A0=A0=A0=A0 &lt;integer name=3D&quot;balance-replenish-amount&quot;&gt;=\r\n500&lt;/integer&gt;&lt;br&gt;=A0=A0=A0=A0=A0 &lt;integer name=3D&quot;error-penal=\r\nty-amount&quot;&gt;100&lt;/integer&gt;&lt;br&gt;\n=A0=A0=A0=A0=A0 &lt;long name=3D=\r\n&quot;queue-total-budget&quot;&gt;50&lt;/long&gt;&lt;br&gt;=A0=A0=A0=A0=A0 &lt;st=\r\nring name=3D&quot;cost-policy&quot;&gt;org.archive.crawler.frontier.UnitCos=\r\ntAssignmentPolicy&lt;/string&gt;&lt;br&gt;=A0=A0=A0=A0=A0 &lt;long name=3D&quot;s=\r\nnooze-deactivate-ms&quot;&gt;2000&lt;/long&gt;&lt;br&gt;\n=A0=A0=A0=A0=A0 &lt;inte=\r\nger name=3D&quot;target-ready-backlog&quot;&gt;50&lt;/integer&gt;&lt;br&gt;=A0=A0=\r\n=A0=A0=A0 &lt;string name=3D&quot;uri-included-structure&quot;&gt;org.archi=\r\nve.crawler.util.BdbUriUniqFilter&lt;/string&gt;&lt;br&gt;=A0=A0=A0 &lt;/newObject=\r\n&gt;&lt;br&gt;\n&lt;br&gt;Some parameters are pretty low, this is a config for a dev tes=\r\nt machine.&lt;br&gt;&lt;br&gt;I also use a QuotaEnforcer pre-fetch processor : &lt;br&gt;&lt;br&gt;=\r\n&lt;newObject name=3D&quot;QuotaEnforcer&quot; class=3D&quot;org.archive.cr=\r\nawler.prefetch.QuotaEnforcer&quot;&gt;&lt;br&gt;\n=A0=A0=A0=A0=A0=A0=A0 &lt;boolea=\r\nn name=3D&quot;force-retire&quot;&gt;false&lt;/boolean&gt;&lt;br&gt;=A0=A0=A0=A0=\r\n=A0=A0=A0 &lt;boolean name=3D&quot;enabled&quot;&gt;true&lt;/boolean&gt;&lt;br=\r\n&gt;=A0=A0=A0=A0=A0=A0=A0 &lt;newObject name=3D&quot;QuotaEnforcer#decide-rule=\r\ns&quot; class=3D&quot;org.archive.crawler.deciderules.DecideRuleSequence&qu=\r\not;&gt;&lt;br&gt;\n=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;map name=3D&quot;rules&quot;/&g=\r\nt;&lt;br&gt;=A0=A0=A0=A0=A0=A0=A0 &lt;/newObject&gt;&lt;br&gt;=A0=A0=A0=A0=A0=A0=A0 &lt=\r\n;long name=3D&quot;server-max-fetch-successes&quot;&gt;-1&lt;/long&gt;&lt;br&gt;=\r\n=A0=A0=A0=A0=A0=A0=A0 &lt;long name=3D&quot;server-max-success-kb&quot;&gt;=\r\n-1&lt;/long&gt;&lt;br&gt;\n=A0=A0=A0=A0=A0=A0=A0 &lt;long name=3D&quot;server-max-=\r\nfetch-responses&quot;&gt;-1&lt;/long&gt;&lt;br&gt;=A0=A0=A0=A0=A0=A0=A0 &lt;long =\r\nname=3D&quot;server-max-all-kb&quot;&gt;-1&lt;/long&gt;&lt;br&gt;=A0=A0=A0=A0=A0=\r\n=A0=A0 &lt;long name=3D&quot;host-max-fetch-successes&quot;&gt;-1&lt;/long&=\r\ngt;&lt;br&gt;\n=A0=A0=A0=A0=A0=A0=A0 &lt;long name=3D&quot;host-max-success-kb&quo=\r\nt;&gt;-1&lt;/long&gt;&lt;br&gt;=A0=A0=A0=A0=A0=A0=A0 &lt;long name=3D&quot;host-m=\r\nax-fetch-responses&quot;&gt;-1&lt;/long&gt;&lt;br&gt;=A0=A0=A0=A0=A0=A0=A0 &lt;lo=\r\nng name=3D&quot;host-max-all-kb&quot;&gt;-1&lt;/long&gt;&lt;br&gt;\n=A0=A0=A0=A0=\r\n=A0=A0=A0 &lt;long name=3D&quot;group-max-fetch-successes&quot;&gt;-1&lt;/l=\r\nong&gt;&lt;br&gt;=A0=A0=A0=A0=A0=A0=A0 &lt;long name=3D&quot;group-max-success-kb=\r\n&quot;&gt;-1&lt;/long&gt;&lt;br&gt;=A0=A0=A0=A0=A0=A0=A0 &lt;long name=3D&quot;gr=\r\noup-max-fetch-responses&quot;&gt;-1&lt;/long&gt;&lt;br&gt;\n=A0=A0=A0=A0=A0=A0=A0 =\r\n&lt;long name=3D&quot;group-max-all-kb&quot;&gt;[limit in kB]&lt;/long&gt;&lt;=\r\nbr&gt;=A0=A0=A0=A0=A0 &lt;/newObject&gt;&lt;br&gt;&lt;br&gt;So I wanted to try to also put=\r\n the object limit in the QuotaEnforcer configuration, and made the followin=\r\ng changes to my config:&lt;br&gt;\n&lt;br&gt;- queue-total-budget =3D -1&lt;br&gt;- group-max-=\r\nfetch-responses =3D my object count limit&lt;br&gt;&lt;br&gt;This doesn&#39;t seem to w=\r\nork, the crawls go beyond the configured limit, so there must be something =\r\nwrong in my config. I&#39;ve tried to set the force-retire parameter of Quo=\r\ntaEnforcer to &quot;true&quot;, to no avail.&lt;br&gt;\n&lt;br&gt;Any suggestions, advic=\r\ne is more than welcome.&lt;br&gt;&lt;br&gt;Best regards,&lt;br&gt;&lt;br&gt;Nicolas Giraud&lt;br&gt;-----=\r\n---------------------------------------------------------------------------=\r\n-------------&lt;br&gt;D=E9veloppeur Archives du Web - Web Archiving Developper&lt;b=\r\nr&gt;\nBiblioth=E8que Nationale de France - National Library of France&lt;br&gt;-----=\r\n---------------------------------------------------------------------------=\r\n-------------&lt;br&gt;\n\r\n--00c09ffb56b8a14f0204729b419e--\r\n\n"}}